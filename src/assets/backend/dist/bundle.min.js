(()=>{var t={169:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(92),i=function(t,e){t.style.display="none",t.style.opacity="0",setTimeout((function(){t.classList.add("uap-fade-in"),t.style.display="block",setTimeout((function(){t.style.opacity="1",setTimeout((function(){t.classList.remove("uap-fade-in"),(0,r.Z)(e)&&e()}),150)}),0)}),0)};const o=i;window.fadeIn=i},63:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var r=n(92);function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}(0,n(133).Z)((function(){new u}));var u=function(){function t(){s(this,t),this.createAccordions()}return a(t,[{key:"createAccordions",value:function(){i(this.$accordions).forEach((function(t){new l(t)}))}},{key:"$accordions",get:function(){return document.querySelectorAll(".uap-accordion")}}]),t}(),l=function(){function t(e){s(this,t),this.$accordion=e,this.listenClicksToToggles()}return a(t,[{key:"listenClicksToToggles",value:function(){var t=this;i(this.$toggles).forEach((function(e){e.addEventListener("click",(function(n){var r=e.closest(".".concat(t.cssSelectors.itemClass));t.toggleItem(r)}))}))}},{key:"toggleItem",value:function(t){var e=this,n={toggle:t.querySelector(".".concat(this.cssSelectors.itemToggleClass)),content:t.querySelector(".".concat(this.cssSelectors.itemContentClass))};t.classList.contains(this.cssSelectors.itemOpenClass)?function(t,e){var n=e.duration,i=e.onComplete;(0,r.Z)(n)&&(t.style.transitionDuration="".concat(n,"ms"));var o="".concat(t.clientHeight,"px");t.style.height=o,setTimeout((function(){t.style.height="0px",t.addEventListener("transitionend",(function(){if(t.style.display="none",t.style.removeProperty("height"),(0,r.Z)(n)&&t.style.removeProperty("transition-duration"),(0,r.Z)(i))try{i()}catch(t){}}),{once:!0})}),0)}(n.content,{duration:300,onComplete:function(){t.classList.remove(e.cssSelectors.itemOpenClass)}}):(t.classList.add(this.cssSelectors.itemOpenClass),function(t,e){var n=e.duration,i=e.onComplete;(0,r.Z)(n)&&(t.style.transitionDuration="".concat(n,"ms")),t.style.removeProperty("display"),t.style.height="auto";var o="".concat(t.clientHeight,"px");t.style.height="0px",setTimeout((function(){t.style.height=o,t.addEventListener("transitionend",(function(){if(t.style.removeProperty("height"),(0,r.Z)(n)&&t.style.removeProperty("transition-duration"),(0,r.Z)(i))try{i()}catch(t){}}),{once:!0})}),0)}(n.content,{duration:300}))}},{key:"$toggles",get:function(){return this.$accordion.querySelectorAll(".".concat(this.cssSelectors.itemToggleClass))}},{key:"cssSelectors",get:function(){return{itemClass:"uap-accordion-item",itemOpenClass:"uap-accordion-item--open",itemToggleClass:"uap-accordion-item__toggle",itemContentClass:"uap-accordion-item__content"}}}]),t}()},779:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.r(e),n.d(e,{default:()=>c}),(0,n(133).Z)((function(){new c}));var c=function(){function t(){i(this,t),this.createDropdowns()}return s(t,[{key:"createDropdowns",value:function(){var t;(t=this.$dropdowns,function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){new a(t)}))}},{key:"$dropdowns",get:function(){return document.querySelectorAll(".uap-dropdown")}}]),t}(),a=function(){function t(e){i(this,t),this.$dropdown=e,this.listenClicks()}return s(t,[{key:"$toggleButton",get:function(){return this.$dropdown.querySelector(".uap-dropdown-toggle")}},{key:"getElements",value:function(t){this.$elements={dropdown:t,toggleBtn:t.querySelector(".uap-dropdown-toggle")}}},{key:"listenClicks",value:function(){var t=this;this.$toggleButton.addEventListener("click",(function(){t.toggleMenuVisibility()}))}},{key:"toggleMenuVisibility",value:function(){this.isOpen?this.closeMenu():this.openMenu()}},{key:"openMenu",value:function(){var t=this;this.$dropdown.classList.add("uap-dropdown--open"),document.addEventListener("click",(function e(n){n.target.closest(".uap-dropdown")||(document.removeEventListener("click",e),t.closeMenu())}),!1)}},{key:"closeMenu",value:function(){this.$dropdown.classList.remove("uap-dropdown--open")}},{key:"isOpen",get:function(){return this.$dropdown.classList.contains("uap-dropdown--open")}}]),t}()},28:(t,e,n)=>{"use strict";n.r(e)},208:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>u});var r=n(169),i=n(92);var o=n(352);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var u=function(){function t(e){var n=e.id,r=e.$element;s(this,t),(0,i.Z)(n)&&(0,i.Z)(r)?(this.id=n,this.$element=r,this.groups={},this.render(),this.listenRightClick(),this.handleClickOutside()):UncannyAutomatorBackend.debugging.enabled&&console.warn("ContextMenu: Couldn't create menu because required data is missing.")}return a(t,[{key:"render",value:function(){var t=document.createElement("div");t.classList.add("uap-context-menu"),this.$contextMenu=t,document.body.appendChild(t)}},{key:"show",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;this.isVisible||(this.$contextMenu.style.top="".concat(n,"px"),this.$contextMenu.style.left="".concat(e,"px"),(0,r.Z)(this.$contextMenu,(function(){t.isVisible=!0;var e=new CustomEvent("uap/context-menu/show");t.$element.dispatchEvent(e),(0,i.Z)(o)&&o()})))}},{key:"hide",value:function(t){var e=this;this.isVisible&&function(t,e){t.style.display="block",t.style.opacity="1",setTimeout((function(){t.style.opacity="0",t.classList.add("uap-fade-out"),setTimeout((function(){t.style.display="none",t.classList.remove("uap-fade-out"),(0,i.Z)(e)&&e()}),150)}),10)}(this.$contextMenu,(function(){e.isVisible=!1;var n=new CustomEvent("uap/context-menu/hide");e.$element.dispatchEvent(n),(0,i.Z)(t)&&t()}))}},{key:"destroy",value:function(){var t=this,e=function(){Object.values(t.groups).forEach((function(t){t.destroy()})),t.$contextMenu.parentNode.removeChild(t.$contextMenu)};this.isVisible?this.hide((function(){e()})):e()}},{key:"addGroup",value:function(t){var e,n=t.id,r=t.name;return(0,i.Z)(this.groups[n])?e=this.groups[n]:(e=new l({id:n,name:r,contextMenu:this}),this.$contextMenu.appendChild(e.$menuGroup),this.groups[n]=e),e}},{key:"removeGroup",value:function(t){(0,i.Z)(this.groups[t])?(this.groups[t].destroy(),delete this.groups[t]):UncannyAutomatorBackend.debugging.enabled&&console.warn("ContextMenu: The group you're trying to remove (".concat(t,") doesn't exist."))}},{key:"listenRightClick",value:function(){var t=this;this.$element.addEventListener("contextmenu",(function(e){t.$contextMenu.contains(e.target)||(e.preventDefault(),t.$contextMenuSource=e.target,t.show(e.pageX,e.pageY))}))}},{key:"handleClickOutside",value:function(){var t=this,e=function(e){t.isVisible&&(t.$contextMenu.contains(e.target)||(t.$element.contains(e.target)&&2==e.button?t.hide((function(){t.show(e.pageX,e.pageY)})):t.hide()))};this.$element.addEventListener("uap/context-menu/show",(function(){document.addEventListener("mouseup",e),document.addEventListener("contextmenu",e)})),this.$element.addEventListener("uap/context-menu/hide",(function(){document.removeEventListener("mouseup",e),document.removeEventListener("contextmenu",e)}))}},{key:"isVisible",get:function(){var t=!1;return(0,i.Z)(this.isMenuVisible)&&(t=this.isMenuVisible),t},set:function(t){void 0===t&&(t=!1),this.isMenuVisible=t}}]),t}(),l=function(){function t(e){var n=e.id,r=e.name,i=void 0===r?"":r,c=e.contextMenu;s(this,t),(0,o.Z)(n)?UncannyAutomatorBackend.debugging.enabled&&console.warn("ContextMenu/MenuGroup: Couldn't create group because required data is missing."):(this.id=n,this.name=i,this.contextMenu=c,this.items={},this.render())}return a(t,[{key:"render",value:function(){var t=document.createElement("div");t.classList.add("uap-context-menu-group"),(0,o.Z)(this.name)||t.insertAdjacentHTML("beforeend",'\n\t\t\t\t<div class="uap-context-menu-group-title">'.concat(this.name,"</div>\n\t\t\t")),this.$menuGroup=t}},{key:"addItem",value:function(t){var e,n=t.id,r=t.icon,o=t.name,s=t.disabled,c=t.callback;return(0,i.Z)(this.items[n])?e=this.items[n]:(e=new d({id:n,icon:r,name:o,disabled:s,callback:c,contextMenu:this.contextMenu,contextMenuGroup:this}),this.$menuGroup.appendChild(e.$menuItem),this.items[n]=e),e}},{key:"removeItem",value:function(t){(0,i.Z)(this.items[t])?(this.items[t].destroy(),delete this.items[t]):UncannyAutomatorBackend.debugging.enabled&&console.warn("ContextMenu/MenuGroup: The item you're trying to remove (".concat(t,") doesn't exist."))}},{key:"destroy",value:function(){this.$menuGroup.parentNode.removeChild(this.$menuGroup)}}]),t}(),d=function(){function t(e){var n=e.id,r=e.icon,i=e.name,c=e.disabled,a=void 0!==c&&c,u=e.callback,l=e.contextMenu,d=e.contextMenuGroup;s(this,t),(0,o.Z)(n)||(0,o.Z)(i)?UncannyAutomatorBackend.debugging.enabled&&console.warn("ContextMenu/MenuItem: Couldn't create item because required data is missing."):(this.id=n,this.icon=r,this.name=i,this.disabled=a,this.callback=u,this.contextMenu=l,this.contextMenuGroup=d,this.render(),this.disabled||this.listenClick())}return a(t,[{key:"render",value:function(){var t=document.createElement("div");t.classList.add("uap-context-menu-group-item"),this.disabled&&t.classList.add("uap-context-menu-group-item--disabled"),t.innerHTML=this.name,this.$menuItem=t}},{key:"listenClick",value:function(){var t=this;this.$menuItem.addEventListener("click",(function(){(0,i.Z)(t.callback)&&t.callback(),t.contextMenu.hide()}))}},{key:"destroy",value:function(){this.$menuItem.parentNode.removeChild(this.$menuItem)}}]),t}();window.uap={},window.uap.ContextMenu=u},471:(t,e,n)=>{"use strict";n.r(e)},992:(t,e,n)=>{"use strict";n.r(e)},804:(t,e,n)=>{"use strict";n.r(e)},171:(t,e,n)=>{"use strict";n.r(e);var r=n(352);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return a(t,arguments,d(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)})(t)}function a(t,e,n){return(a=u()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&l(i,n.prototype),i}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(h,t);var e,n,i,c,a=(e=h,n=u(),function(){var t,r=d(e);if(n){var i=d(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return s(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=a.call(this)).attachShadow({mode:"open"}),t}return i=h,(c=[{key:"connectedCallback",value:function(){this.shadowRoot.innerHTML='\n\t\t\t<style>\n\n\t\t\t\t:host {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiv {\n\t\t\t\t\tbackground: var( --uap-color-green );\n\n\t\t\t\t\tfont-size: var( --uap-font-size--body-xsmall );\n\t\t\t\t\tline-height: var( --uap-line-height--body-xsmall );\n\t\t\t\t\tfont-weight: 700;\n\t\t\t\t\tcolor: #fff;\n\n\t\t\t\t\tdisplay: inline-flex;\n\n\t\t\t\t\tborder-radius: 150px;\n\n\t\t\t\t\tpadding: 0 6px;\n\t\t\t\t}\n\n\t\t\t\t[data-color="secondary"] {\n\t\t\t\t\tbackground: var( --uap-color-gray );\n\t\t\t\t}\n\n\t\t\t</style>\n\n\t\t\t<div data-color="'.concat(this.color,'">\n\t\t\t\t').concat(UncannyAutomatorBackend.i18n.proLabel.pro,"\n\t\t\t</div>\n\t\t")}},{key:"color",get:function(){var t=this.getAttribute("color");return(0,r.Z)(t)?"primary":t}}])&&o(i.prototype,c),h}(c(HTMLElement));customElements.define("automator-pro-tag",h)},621:(t,e,n)=>{"use strict";n.r(e)},253:(t,e,n)=>{"use strict";n.r(e)},576:(t,e,n)=>{"use strict";n.r(e)},129:(t,e,n)=>{"use strict";n.r(e)},92:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return null!=t}},352:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(92);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const o=function(t){var e=!0;return(0,r.Z)(t)&&(e=Array.isArray(t)?0==t.length:function(t){return null!==t&&"object"===i(t)}(t)?0==Object.keys(t).length:""==t),e}},133:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){document.addEventListener("DOMContentLoaded",t),"interactive"!==document.readyState&&"complete"!==document.readyState||t()}},287:(t,e,n)=>{var r={"./accordion/index.js":63,"./button-dropdown/index.js":779,"./button/index.js":28,"./context-menu/index.js":208,"./field/index.js":471,"./icon/index.js":992,"./notice/index.js":804,"./pro-label/index.js":171,"./table/index.js":621,"./text-placeholder/index.js":253,"./tooltip/index.js":576,"./video/index.js":129};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=287},36:(t,e,n)=>{var r={"./delay-or-schedule-actions-landscape@2x.png":659,"./delay-or-schedule-actions@2x.png":296,"./multiple-actions-landscape@2x.png":863,"./multiple-actions@2x.png":996,"./multiple-triggers-landscape@2x.png":854,"./multiple-triggers@2x.png":541};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=36},301:(t,e,n)=>{var r={"./robot-feedback.svg":665,"./robot-site-not-connected.svg":766};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=301},918:(t,e,n)=>{var r={"./integrations-page-banner-background.png":255};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=918},659:(t,e,n)=>{"use strict";t.exports=n.p+"img/delay-or-schedule-actions-landscape@2x.png"},296:(t,e,n)=>{"use strict";t.exports=n.p+"img/delay-or-schedule-actions@2x.png"},863:(t,e,n)=>{"use strict";t.exports=n.p+"img/multiple-actions-landscape@2x.png"},996:(t,e,n)=>{"use strict";t.exports=n.p+"img/multiple-actions@2x.png"},854:(t,e,n)=>{"use strict";t.exports=n.p+"img/multiple-triggers-landscape@2x.png"},541:(t,e,n)=>{"use strict";t.exports=n.p+"img/multiple-triggers@2x.png"},665:(t,e,n)=>{"use strict";t.exports=n.p+"img/robot-feedback.svg"},766:(t,e,n)=>{"use strict";t.exports=n.p+"img/robot-site-not-connected.svg"},255:(t,e,n)=>{"use strict";t.exports=n.p+"img/integrations-page-banner-background.png"}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{"use strict";const t=function(t){t.keys().forEach(t)};t(n(287));var e=n(133);t(n(301));var r=n(92),i=n(352);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}const s=function(t){var e=t.endpoint,n=t.data,r=void 0===n?{}:n,i=t.onSuccess,o=t.onFail,s=t.headers;return new c({endpoint:e,data:r,onSuccess:i,onFail:o,headers:void 0===s?{}:s})};var c=function(){function t(e){var n=e.endpoint,r=e.data,o=void 0===r?{}:r,s=e.onSuccess,c=e.onFail,a=e.headers,u=void 0===a?{}:a;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,i.Z)(n)?console.error("Endpoint not defined."):(this.endpoint=n,this.data=o,this.headers=u,this.onSuccess=s,this.onFail=c,this.sendRequest())}var e,n;return e=t,(n=[{key:"sendRequest",value:function(){var t=this;fetch(this.request).then(this.handleErrors).then((function(t){return t.json()})).then(this.handleMissingSuccessProperty).then((function(e){t.onSuccess(e)})).catch((function(e){t.onFail("generic",{error:e})}))}},{key:"request",get:function(){return new Request("".concat(UncannyAutomatorBackend.rest.url,"/").concat(this.endpoint,"/"),{method:"POST",headers:this.headers,body:this.data})}},{key:"data",get:function(){var t={};try{(0,r.Z)(this.requestData)&&(t=Object.assign(t,this.requestData))}catch(t){console.error("Data: Couldn't set the custom data"),console.error(t)}return t.doing_rest="1",new URLSearchParams(t)},set:function(t){this.requestData=t}},{key:"handleErrors",get:function(){var t=this,e={accessDenied:{title:UncannyAutomatorBackend.i18n.error.request.accessDenied.title},notFound:{title:UncannyAutomatorBackend.i18n.error.request.notFound.title},timeout:{title:UncannyAutomatorBackend.i18n.error.request.timeout.title},serverError:{title:UncannyAutomatorBackend.i18n.error.request.serverError.title},parserError:{title:UncannyAutomatorBackend.i18n.error.request.parserError.title}};return function(n){var r="",o={};if(!n.ok)switch(n.status){case 400:r="bad-request",o.title=e.badRequest.title;break;case 403:r="access-denied",o.title=e.accessDenied.title;break;case 404:r="not-found",o.title=e.notFound.title;break;case 408:r="time-out",o.title=e.timeOut.title;break;case 500:r="server-error",o.title=e.serverError.title}if(!(0,i.Z)(r))throw t.onFail(r,n),Error("".concat(r," ").concat(o.title));return n}}},{key:"handleMissingSuccessProperty",get:function(){var t=this;return function(e){if(!(0,r.Z)(e.success))throw console.error(".success is not defined"),t.onFail("generic",e),Error("generic ".concat(UncannyAutomatorBackend.i18n.error.request.generic.title));return e}}},{key:"onSuccess",get:function(){var t=this;return function(e){(0,r.Z)(t.requestOnSuccess)&&t.requestOnSuccess(e)}},set:function(t){this.requestOnSuccess=t}},{key:"onFail",get:function(){var t=this;return function(e,n){(0,r.Z)(t.requestOnFail)&&t.requestOnFail(e,n)}},set:function(t){this.requestOnFail=t}},{key:"headers",get:function(){var t=this,e=new Headers;try{(0,r.Z)(this.requestHeaders)&&Object.keys(this.requestHeaders).forEach((function(n){e.append(n,t.requestHeaders[n])}))}catch(t){console.error("Headers: Couldn't set the custom headers"),console.error(t)}return e.set("X-WP-Nonce",UncannyAutomatorBackend.rest.nonce),e.set("Content-Type","application/x-www-form-urlencoded"),e.set("Cache-Control","no-cache"),e},set:function(t){void 0===t&&(t={}),this.requestHeaders=t}}])&&o(e.prototype,n),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.getCreditsLeft(),this.getRecipesUsingCredits()}var e,n;return e=t,(n=[{key:"getCreditsLeft",value:function(){var t=this;UncannyAutomatorBackend.hasSiteConnected&&!UncannyAutomatorBackend.isPro&&s({endpoint:"get-credits",onSuccess:function(e){t.totalCredits=e.total_credits,t.creditsLeft=e.credits_left}})}},{key:"getRecipesUsingCredits",value:function(){var t=this;UncannyAutomatorBackend.hasSiteConnected&&s({endpoint:"get-recipes-using-credits",onSuccess:function(e){t.recipesUsingCredits=e.recipes}})}},{key:"$elements",get:function(){return{creditsLeft:{box:document.getElementById("uap-dashboard-credits-left"),progressBar:document.getElementById("uap-dashboard-credits-left-progress-bar"),left:document.getElementById("uap-dashboard-credits-left-quantity"),total:document.getElementById("uap-dashboard-credits-left-total")},recipesUsingCredits:{content:document.getElementById("uap-dashboard-credits-recipes-content")}}}},{key:"totalCredits",get:function(){return this.data.totalCredits},set:function(t){if(void 0===t&&(t=0),this.data.totalCredits=t,(0,r.Z)(this.$elements.creditsLeft.total))try{this.$elements.creditsLeft.total.innerText=(new Intl.NumberFormat).format(t)}catch(e){this.$elements.creditsLeft.total.innerText=t}}},{key:"creditsLeft",get:function(){return this.data.creditsLeft},set:function(t){void 0===t&&(t=0);var e=t/this.totalCredits*100;if(this.$elements.creditsLeft.progressBar.style.width="".concat(e,"%"),(0,r.Z)(this.$elements.creditsLeft.left))try{this.$elements.creditsLeft.left.innerText=(new Intl.NumberFormat).format(t)}catch(e){this.$elements.creditsLeft.left.innerText=t}}},{key:"recipesUsingCredits",set:function(t){if(void 0===t&&(t=[]),t.length>0){var e=[];t.forEach((function(t){e.push('\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class="uap-dashboard-credits-recipes-table-cell--recipe-name">\n\t\t\t\t\t\t\t<a href="'.concat(t.url,'" target="_blank">\n\t\t\t\t\t\t\t\t').concat(t.title,'\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="uap-dashboard-credits-recipes-table-cell--allowed-completions">\n\t\t\t\t\t\t\t').concat("user"==t.type?'<div class="uap-dashboard-credits-recipes-table-allowed-completions--per-user">'.concat(UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.perUser.replace("%1$s","<span>".concat(0==t.times_per_user||-1==t.times_per_user?UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.unlimited:t.times_per_user,"</span>")),"</div>"):"",'\n\n\t\t\t\t\t\t\t<div class="uap-dashboard-credits-recipes-table-allowed-completions--total">').concat(UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.total.replace("%1$s","<span>".concat(0==t.allowed_completions_total||-1==t.allowed_completions_total?UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.unlimited:t.allowed_completions_total,"</span>")),'</div>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td class="uap-dashboard-credits-recipes-table-cell--completed-runs">\n\t\t\t\t\t\t\t').concat(t.completed_runs,"\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t"))})),this.$elements.recipesUsingCredits.content.innerHTML='\n\t\t\t\t<div class="uap-dashboard-box-content-scroll">\n\t\t\t\t\t<table class="uap-table">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class="uap-dashboard-credits-recipes-table-cell--recipe-name">\n\t\t\t\t\t\t\t\t\t'.concat(UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.recipe,'\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th class="uap-dashboard-credits-recipes-table-cell--allowed-completions">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.completionsAllowed,'\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t<th class="uap-dashboard-credits-recipes-table-cell--completed-runs">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.table.completedRuns,"\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t").concat(e.join(""),"\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t")}else this.$elements.recipesUsingCredits.content.innerHTML='\n\t\t\t\t<div class="uap-dashboard-credits-recipes__no-recipes">\n\t\t\t\t\t<span class="uap-text-secondary">\n\t\t\t\t\t\t<span class="uap-icon uap-icon--info-circle"></span> '.concat(UncannyAutomatorBackend.i18n.credits.recipesUsingCredits.noRecipes,"\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t")}}])&&a(e.prototype,n),t}();function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t(n(36));var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isDashboardPage&&new u}var e,n;return e=t,(n=[{key:"isDashboardPage",get:function(){return(0,r.Z)(document.getElementById("uap-dashboard"))}}])&&l(e.prototype,n),t}();function h(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function f(t){return"string"==typeof t}function p(t){return"number"==typeof t}function g(t){return"object"==typeof t}function y(t){return null!=t}function m(t){return!t.trim().length}function v(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const b=Object.prototype.hasOwnProperty;class k{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=x(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function x(t){let e=null,n=null,r=null,i=1;if(f(t)||h(t))r=t,e=w(t),n=M(t);else{if(!b.call(t,"name"))throw new Error("Missing name property in key");const o=t.name;if(r=o,b.call(t,"weight")&&(i=t.weight,i<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(o));e=w(o),n=M(o)}return{path:e,id:n,weight:i,src:r}}function w(t){return h(t)?t:t.split(".")}function M(t){return h(t)?t.join("."):t}var C={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const i=(t,e,o)=>{if(y(t))if(e[o]){const s=t[e[o]];if(!y(s))return;if(o===e.length-1&&(f(s)||p(s)||function(t){return!0===t||!1===t||function(t){return g(t)&&null!==t}(t)&&"[object Boolean]"==v(t)}(s)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(s));else if(h(s)){r=!0;for(let t=0,n=s.length;t<n;t+=1)i(s[t],e,o+1)}else e.length&&i(s,e,o+1)}else n.push(t)};return i(t,f(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1};const E=/[^ ]+/g;class L{constructor({getFn:t=C.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(E).length;if(e.has(r))return e.get(r);const i=1/Math.sqrt(r),o=parseFloat(Math.round(i*n)/n);return e.set(r,o),o},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,f(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();f(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!y(t)||m(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let i=this.getFn(t,e.path);if(y(i))if(h(i)){let t=[];const e=[{nestedArrIndex:-1,value:i}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(y(r))if(f(r)&&!m(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else h(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!m(i)){let t={v:i,n:this.norm.get(i)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function S(t,e,{getFn:n=C.getFn}={}){const r=new L({getFn:n});return r.setKeys(t.map(x)),r.setSources(e),r.create(),r}function $(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=C.distance,ignoreLocation:o=C.ignoreLocation}={}){const s=e/t.length;if(o)return s;const c=Math.abs(r-n);return i?s+c/i:c?1:s}const _=32;function A(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}class O{constructor(t,{location:e=C.location,threshold:n=C.threshold,distance:r=C.distance,includeMatches:i=C.includeMatches,findAllMatches:o=C.findAllMatches,minMatchCharLength:s=C.minMatchCharLength,isCaseSensitive:c=C.isCaseSensitive,ignoreLocation:a=C.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:c,ignoreLocation:a},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const u=(t,e)=>{this.chunks.push({pattern:t,alphabet:A(t),startIndex:e})},l=this.pattern.length;if(l>_){let t=0;const e=l%_,n=l-e;for(;t<n;)u(this.pattern.substr(t,_),t),t+=_;if(e){const t=l-_;u(this.pattern.substr(t),t)}}else u(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:c,ignoreLocation:a}=this.options;let u=[],l=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:h,startIndex:f})=>{const{isMatch:p,score:g,indices:y}=function(t,e,n,{location:r=C.location,distance:i=C.distance,threshold:o=C.threshold,findAllMatches:s=C.findAllMatches,minMatchCharLength:c=C.minMatchCharLength,includeMatches:a=C.includeMatches,ignoreLocation:u=C.ignoreLocation}={}){if(e.length>_)throw new Error("Pattern length exceeds max of 32.");const l=e.length,d=t.length,h=Math.max(0,Math.min(r,d));let f=o,p=h;const g=c>1||a,y=g?Array(d):[];let m;for(;(m=t.indexOf(e,p))>-1;){let t=$(e,{currentLocation:m,expectedLocation:h,distance:i,ignoreLocation:u});if(f=Math.min(t,f),p=m+l,g){let t=0;for(;t<l;)y[m+t]=1,t+=1}}p=-1;let v=[],b=1,k=l+d;const x=1<<l-1;for(let r=0;r<l;r+=1){let o=0,c=k;for(;o<c;)$(e,{errors:r,currentLocation:h+c,expectedLocation:h,distance:i,ignoreLocation:u})<=f?o=c:k=c,c=Math.floor((k-o)/2+o);k=c;let a=Math.max(1,h-c+1),m=s?d:Math.min(h+c,d)+l,w=Array(m+2);w[m+1]=(1<<r)-1;for(let o=m;o>=a;o-=1){let s=o-1,c=n[t.charAt(s)];if(g&&(y[s]=+!!c),w[o]=(w[o+1]<<1|1)&c,r&&(w[o]|=(v[o+1]|v[o])<<1|1|v[o+1]),w[o]&x&&(b=$(e,{errors:r,currentLocation:s,expectedLocation:h,distance:i,ignoreLocation:u}),b<=f)){if(f=b,p=s,p<=h)break;a=Math.max(1,2*h-p)}}if($(e,{errors:r+1,currentLocation:h,expectedLocation:h,distance:i,ignoreLocation:u})>f)break;v=w}const w={isMatch:p>=0,score:Math.max(.001,b)};if(g){const t=function(t=[],e=C.minMatchCharLength){let n=[],r=-1,i=-1,o=0;for(let s=t.length;o<s;o+=1){let s=t[o];s&&-1===r?r=o:s||-1===r||(i=o-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}(y,c);t.length?a&&(w.indices=t):w.isMatch=!1}return w}(t,e,h,{location:r+f,distance:i,threshold:o,findAllMatches:s,minMatchCharLength:c,includeMatches:n,ignoreLocation:a});p&&(d=!0),l+=g,p&&y&&(u=[...u,...y])}));let h={isMatch:d,score:d?l/this.chunks.length:1};return d&&n&&(h.indices=u),h}}class I{constructor(t){this.pattern=t}static isMultiMatch(t){return j(t,this.multiRegex)}static isSingleMatch(t){return j(t,this.singleRegex)}search(){}}function j(t,e){const n=t.match(e);return n?n[1]:null}class U extends I{constructor(t,{location:e=C.location,threshold:n=C.threshold,distance:r=C.distance,includeMatches:i=C.includeMatches,findAllMatches:o=C.findAllMatches,minMatchCharLength:s=C.minMatchCharLength,isCaseSensitive:c=C.isCaseSensitive,ignoreLocation:a=C.ignoreLocation}={}){super(t),this._bitapSearch=new O(t,{location:e,threshold:n,distance:r,includeMatches:i,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:c,ignoreLocation:a})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class T extends I{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],i=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+i,r.push([e,n-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const F=[class extends I{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},T,class extends I{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends I{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends I{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends I{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends I{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},U],B=F.length,Z=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/,R=new Set([U.type,T.type]);const q=[];function P(t,e){for(let n=0,r=q.length;n<r;n+=1){let r=q[n];if(r.condition(t,e))return new r(t,e)}return new O(t,e)}const N="$and",D=t=>!(!t.$and&&!t.$or),V=t=>({[N]:Object.keys(t).map((e=>({[e]:t[e]})))});function H(t,e,{auto:n=!0}={}){const r=t=>{let i=Object.keys(t);const o=(t=>!!t.$path)(t);if(!o&&i.length>1&&!D(t))return r(V(t));if((t=>!h(t)&&g(t)&&!D(t))(t)){const r=o?t.$path:i[0],s=o?t.$val:t[r];if(!f(s))throw new Error((t=>`Invalid value for key ${t}`)(r));const c={keyId:M(r),pattern:s};return n&&(c.searcher=P(s,e)),c}let s={children:[],operator:i[0]};return i.forEach((e=>{const n=t[e];h(n)&&n.forEach((t=>{s.children.push(r(t))}))})),s};return D(t)||(t=V(t)),r(t)}function G(t,e){const n=t.matches;e.matches=[],y(n)&&n.forEach((t=>{if(!y(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let i={indices:n,value:r};t.key&&(i.key=t.key.src),t.idx>-1&&(i.refIndex=t.idx),e.matches.push(i)}))}function z(t,e){e.score=t.score}class K{constructor(t,e={},n){this.options={...C,...e},this.options.useExtendedSearch,this._keyStore=new k(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof L))throw new Error("Incorrect 'index' type");this._myIndex=e||S(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){y(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];t(i,n)&&(this.removeAt(n),n-=1,r-=1,e.push(i))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:o,ignoreFieldNorm:s}=this.options;let c=f(t)?f(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=C.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:i})=>{const o=t?t.weight:null;n*=Math.pow(0===i&&o?Number.EPSILON:i,(o||1)*(e?1:r))})),t.score=n}))}(c,{ignoreFieldNorm:s}),i&&c.sort(o),p(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=C.includeMatches,includeScore:r=C.includeScore}={}){const i=[];return n&&i.push(G),r&&i.push(z),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return i.length&&i.forEach((e=>{e(t,r)})),r}))}(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=P(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:i})=>{if(!y(t))return;const{isMatch:o,score:s,indices:c}=e.searchIn(t);o&&r.push({item:t,idx:n,matches:[{score:s,value:t,norm:i,indices:c}]})})),r}_searchLogical(t){const e=H(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:i}=t,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:i});return o&&o.length?[{idx:r,item:e,matches:o}]:[]}switch(t.operator){case N:{const i=[];for(let o=0,s=t.children.length;o<s;o+=1){const s=t.children[o],c=n(s,e,r);if(!c.length)return[];i.push(...c)}return i}case"$or":{const i=[];for(let o=0,s=t.children.length;o<s;o+=1){const s=t.children[o],c=n(s,e,r);if(c.length){i.push(...c);break}}return i}}},r=this._myIndex.records,i={},o=[];return r.forEach((({$:t,i:r})=>{if(y(t)){let s=n(e,t,r);s.length&&(i[r]||(i[r]={idx:r,item:t,matches:[]},o.push(i[r])),s.forEach((({matches:t})=>{i[r].matches.push(...t)})))}})),o}_searchObjectList(t){const e=P(t,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach((({$:t,i:r})=>{if(!y(t))return;let o=[];n.forEach(((n,r)=>{o.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),o.length&&i.push({idx:r,item:t,matches:o})})),i}_findMatches({key:t,value:e,searcher:n}){if(!y(e))return[];let r=[];if(h(e))e.forEach((({v:e,i,n:o})=>{if(!y(e))return;const{isMatch:s,score:c,indices:a}=n.searchIn(e);s&&r.push({score:c,key:t,value:e,idx:i,norm:o,indices:a})}));else{const{v:i,n:o}=e,{isMatch:s,score:c,indices:a}=n.searchIn(i);s&&r.push({score:c,key:t,value:i,norm:o,indices:a})}return r}}K.version="6.4.6",K.createIndex=S,K.parseIndex=function(t,{getFn:e=C.getFn}={}){const{keys:n,records:r}=t,i=new L({getFn:e});return i.setKeys(n),i.setIndexRecords(r),i},K.config=C,K.parseQuery=H,function(...t){q.push(...t)}(class{constructor(t,{isCaseSensitive:e=C.isCaseSensitive,includeMatches:n=C.includeMatches,minMatchCharLength:r=C.minMatchCharLength,ignoreLocation:i=C.ignoreLocation,findAllMatches:o=C.findAllMatches,location:s=C.location,threshold:c=C.threshold,distance:a=C.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:o,ignoreLocation:i,location:s,threshold:c,distance:a},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(Z).filter((t=>t&&!!t.trim())),r=[];for(let t=0,i=n.length;t<i;t+=1){const i=n[t];let o=!1,s=-1;for(;!o&&++s<B;){const t=F[s];let n=t.isMultiMatch(i);n&&(r.push(new t(n,e)),o=!0)}if(!o)for(s=-1;++s<B;){const t=F[s];let n=t.isSingleMatch(i);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let i=0,o=[],s=0;for(let r=0,c=e.length;r<c;r+=1){const c=e[r];o.length=0,i=0;for(let e=0,r=c.length;e<r;e+=1){const r=c[e],{isMatch:a,indices:u,score:l}=r.search(t);if(!a){s=0,i=0,o.length=0;break}if(i+=1,s+=l,n){const t=r.constructor.type;R.has(t)?o=[...o,...u]:o.push(u)}}if(i){let t={isMatch:!0,score:s/i};return n&&(t.indices=o),t}}return{isMatch:!1,score:1}}});const W=K;var Q=n(169),J="undefined"==typeof arguments?void 0:arguments;function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createFuse(),this.listenSearchField()}var e,n;return e=t,(n=[{key:"listenSearchField",value:function(){var t,e,n,r=this;this.$searchField.addEventListener("input",(t=function(){r.filter()},e=300,n=-1,function(){clearTimeout(n);var r=J;n=setTimeout((function(){t.apply(void 0,r)}),e)}))}},{key:"createFuse",value:function(){this._addNodesToIntegrationsObject(),this._addNodesToCollectionsObject(),this.fuse=new W(Object.values(UncannyAutomatorBackend.integrations),this.fuseConfig)}},{key:"_addNodesToIntegrationsObject",value:function(){Object.keys(UncannyAutomatorBackend.integrations).forEach((function(t){UncannyAutomatorBackend.integrations[t].nodeList=document.querySelectorAll('.uap-integrations-collections-integration[data-id="'.concat(t,'"]'))}))}},{key:"_addNodesToCollectionsObject",value:function(){Object.keys(UncannyAutomatorBackend.collections).forEach((function(t){UncannyAutomatorBackend.collections[t].node=document.querySelector('.uap-integrations-collection[data-id="'.concat(t,'"]'))}))}},{key:"filter",value:function(){var t=this;if((0,i.Z)(this.searchQuery))this._showAllIntegrations(),this._showAllCollections(),this._hideNoResults();else{this._hideAllIntegrations(),this._hideAllCollections();var e=this.fuse.search(this.searchQuery);e.length&&e.forEach((function(e){t._showIntegration(e.item.id)})),this._evaluateVisibilityOfCollections(e),e.length||this._showNoResults()}}},{key:"_hideAllIntegrations",value:function(){this.$allIntegrations.forEach((function(t){t.style.display="none"}))}},{key:"_showAllIntegrations",value:function(){this.$allIntegrations.forEach((function(t){(0,Q.Z)(t)}))}},{key:"_showIntegration",value:function(t){(0,r.Z)(UncannyAutomatorBackend.integrations[t])&&UncannyAutomatorBackend.integrations[t].nodeList.forEach((function(t){(0,Q.Z)(t)}))}},{key:"_evaluateVisibilityOfCollections",value:function(t){var e=[];t.forEach((function(t){e.push(t.item.id)})),Object.values(UncannyAutomatorBackend.collections).forEach((function(t){t.integrations.some((function(t){return e.includes(t)}))&&(t.node.style.display="block")}))}},{key:"_showAllCollections",value:function(){this.$allCollections.forEach((function(t){t.style.display="block"}))}},{key:"_hideAllCollections",value:function(){this.$allCollections.forEach((function(t){t.style.display="none"}))}},{key:"_showNoResults",value:function(){(0,Q.Z)(this.$noResults)}},{key:"_hideNoResults",value:function(){this.$noResults.style.display="none"}},{key:"searchQuery",get:function(){return this.$searchField.value}},{key:"$container",get:function(){return document.getElementById("uap-integrations-search")}},{key:"$searchField",get:function(){return document.getElementById("uap-integrations-search-field")}},{key:"$allIntegrations",get:function(){return document.querySelectorAll(".uap-integrations-collections-integration")}},{key:"$allCollections",get:function(){return document.querySelectorAll(".uap-integrations-collections:not(#uap-integrations-all) .uap-integrations-collection")}},{key:"$noResults",get:function(){return document.querySelector(".uap-integrations-collections-no-results")}},{key:"fuseConfig",get:function(){return{keys:["integration_id","name"],minMatchCharLength:1,threshold:.5}}}])&&X(e.prototype,n),t}();function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function et(t,e,n){return e&&tt(t.prototype,e),n&&tt(t,n),t}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t(n(918));var rt=function t(){nt(this,t),new it,new ot},it=function(){function t(){nt(this,t),this.isIntegrationsPage&&new Y}return et(t,[{key:"isIntegrationsPage",get:function(){return(0,r.Z)(document.getElementById("uap-integrations"))}}]),t}(),ot=function(){function t(){nt(this,t),this.isIntegrationsPage}return et(t,[{key:"isIntegrationsPage",get:function(){return(0,r.Z)(document.getElementById("uap-integration"))}}]),t}();(0,e.Z)((function(){new d,new rt}))})()})();
//# sourceMappingURL=bundle.min.js.map