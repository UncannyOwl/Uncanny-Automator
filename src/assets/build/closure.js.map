{"version":3,"file":"closure.js","mappings":"mBAEAA,OAAOC,UAAUC,OAAM,WAGtB,IAWOC,EAXDC,EAAyB,6BAK3BC,IAMGF,EAAIF,SAASK,cAAc,MAC/BC,GAVY,6BAWdJ,EAAEK,MAAMC,QAAU,OAClBN,EAAEO,IAAM,sBACRT,SAASU,KAAKC,YAAYT,GACnBA,GARyBU,aAWjC,WACC,IAAIZ,SAASa,OAAb,CAIA,IAiCqBC,EAjCfC,EAoBP,SAAmBD,GAIlB,IAHA,IAAME,EAAO,GAAHC,OAAMH,EAAK,KAEfI,EADgBC,mBAAmBnB,SAASoB,QACzBC,MAAM,KACtBC,EAAI,EAAGA,EAAIJ,EAAGK,OAAQD,IAAK,CACnC,IAAIE,EAAIN,EAAGI,GAAGG,OACd,GAAwB,IAApBD,EAAEE,QAAQV,GACb,OAAOQ,EAAEG,UAAUX,EAAKO,OAE1B,CACA,MAAO,EACR,CA/BqBK,CAAUzB,GAC1BY,GAOL,SAAoBc,GAEnB,GAAe,MAAXA,GAAkBA,EAAOC,WAAW,KAAM,OAAO,EAErD,IAEC,OADA,IAAIC,IAAIF,IACD,CACR,CAAE,MAAOG,GACR,OAAO,CACR,CACD,CAjBoBC,CAAWlB,KAgCTD,EA/BPX,EAgCdH,SAASoB,OAAS,GAAHH,OAAMH,EAAK,qDA/BzBV,EAAK8B,KAAOnB,EACZX,EAAK+B,QANN,CAQD,GAtB0D,IAoD3D,G","sources":["webpack://uncanny-automator-assets/./src/standalone/closure/index.js"],"sourcesContent":["\"use strict\";\n\njQuery(document).ready(function () {\n\n\t//const automatorClosureCookie = 'automator_closure_redirect_' + automatorClosure.nonce;\n\tconst automatorClosureCookie = 'automator_closure_redirect';\n\n\tconst linkId = 'automator-closure-redirect';\n\n\t// Create a hidden campaign link\n\tlet link = createLink(linkId);\n\n\t// Wait for the cookie from PHP\n\tconst automatorRedirectTimeout = setInterval(checkCookie, 250);\n\n\tfunction createLink(id) {\n\t\tconst a = document.createElement('a');\n\t\ta.id = id;\n\t\ta.style.display = 'none';\n\t\ta.rel = \"noopener noreferrer\"; // Enhance security for external links\n\t\tdocument.body.appendChild(a);\n\t\treturn a;\n\t}\n\n\tfunction checkCookie() {\n\t\tif (document.hidden) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst redirectURL = getCookie(automatorClosureCookie);\n\t\tif (redirectURL && isValidUrl(redirectURL)) { // Check if the URL is valid\n\t\t\tdeleteCookie(automatorClosureCookie);\n\t\t\tlink.href = redirectURL;\n\t\t\tlink.click();\n\t\t}\n\t}\n\n\tfunction isValidUrl(string) {\n\t\t// Directly accept '/' as a valid URL or start with '/' for relative URLs\n\t\tif (string === '/' || string.startsWith('/')) return true;\n\n\t\ttry {\n\t\t\tnew URL(string);\n\t\t\treturn true; // The URL is valid\n\t\t} catch (_) {\n\t\t\treturn false; // The URL is not valid\n\t\t}\n\t}\n\n\tfunction getCookie(cname) {\n\t\tconst name = `${cname}=`;\n\t\tconst decodedCookie = decodeURIComponent(document.cookie);\n\t\tconst ca = decodedCookie.split(';');\n\t\tfor (let i = 0; i < ca.length; i++) {\n\t\t\tlet c = ca[i].trim();\n\t\t\tif (c.indexOf(name) === 0) {\n\t\t\t\treturn c.substring(name.length);\n\t\t\t}\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tfunction deleteCookie(cname) {\n\t\tdocument.cookie = `${cname}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n\t}\n});\n"],"names":["jQuery","document","ready","a","automatorClosureCookie","link","createElement","id","style","display","rel","body","appendChild","setInterval","hidden","cname","redirectURL","name","concat","ca","decodeURIComponent","cookie","split","i","length","c","trim","indexOf","substring","getCookie","string","startsWith","URL","_","isValidUrl","href","click"],"sourceRoot":""}