(function(e){function t(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var a={};return t.m=e,t.c=a,t.d=function(n,s,o){t.o(n,s)||Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:o})},t.n=function(n){var s=n&&n.__esModule?function(){return n['default']}:function(){return n};return t.d(s,'a',s),s},t.o=function(n,s){return Object.prototype.hasOwnProperty.call(n,s)},t.p='/',t(t.s=16)})([function(e){e.exports=jQuery},function(e,t,a){'use strict';(function(n,s){function o(L=null,D={}){let A=!1;if(h(L)&&y(L,['create','validate']))switch(L){case'create':let P=['allRecipes'];if(y(P,Object.keys(D))){let U,M=D.allRecipes;n.each(M,function(F,q){q.ID==UncannyAutomator.recipe.id&&(U=q)}),n.each(U.triggers,(F,q)=>q.itemType='trigger'),n.each(U.actions,(F,q)=>q.itemType='action'),n.each(U.closures,(F,q)=>q.itemType='closure');let O=[].concat.apply([],[U.triggers,U.actions,U.closures]);r('reset'),n.each(O,function(F,q){let B,N,H;switch(q.itemType){case'trigger':H=UncannyAutomator.triggers;break;case'action':H=UncannyAutomator.actions;break;case'closure':H=UncannyAutomator.closures;}let W;if(n.each(H,function(z,G){G.code==q.meta.code&&(N=G,W=q.meta.code)}),h(N)){let z={};h(N.options)&&n.each(N.options,function(J,K){z[K.option_code]=[K]}),h(N.options_group)&&n.extend(!0,z,N.options_group);let G={};n.each(z,function(J,K){let Q=[],Y=1<K.length;n.each(K,function(Z,ee){let te={isGroup:Y,itemId:q.ID,itemType:q.itemType,isRequired:!!h(ee.required)&&ee.required,supportsTokens:!!h(ee.supports_tokens)&&ee.supports_tokens,supportsTinyMCE:!!h(ee.supports_tinymce)&&ee.supports_tinymce,isAjax:!!h(ee.is_ajax)&&ee.is_ajax,groupId:J,optionCode:ee.option_code,fieldType:ee.input_type,label:ee.label,description:ee.description,placeholder:ee.placeholder,tokenName:h(ee.token_name)?ee.token_name:ee.label,defaultValue:ee.default_value,currentValue:h(q.meta[ee.option_code])?q.meta[ee.option_code]:ee.default_value};te.isAjax&&(te.targetField=h(ee.fill_values_in)?ee.fill_values_in:'',te.endpoint=h(ee.endpoint)?ee.endpoint:'',te.integrationId=N.integration),'select'==te.fieldType&&(te.options=h(ee.options)?ee.options:[]);let ie=new S.a(te.fieldType,te,!1);Q.push(ie)}),G[J]={fields:Q,isValid:!1}}),B={id:q.ID,itemType:q.itemType,itemCode:W,integrationCode:N.integration,isLive:'publish'==q.post_status,options:G,tokens:h(q.tokens)?q.tokens:[],meta:q.meta,isMissing:!1},h(N.support)&&(B.support=N.support);let X={};n.each(G,function(J,K){n.each(K.fields,function(Q,Y){X[Y.getAttributes().optionCode]=Y})}),n.each(X,(J,K)=>{let Q=K.getAttributes();h(B.meta[Q.optionCode])&&!b(B.meta[Q.optionCode])||b(Q.currentValue)||(B.meta[Q.optionCode]=Q.currentValue)})}else B={id:q.ID,itemType:q.itemType,itemCode:q.meta.code,integrationCode:q.meta.integration,integrationName:q.meta.integration_name,sentence:q.meta.sentence,isLive:'publish'==q.post_status,tokens:[],options:{},meta:q.meta,isMissing:!0};r('add',B)}),o('validate')}else{let U=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['recipeObject',U]))}break;case'validate':let R=!0;n.each(UncannyAutomator.recipe.hasLive,function(U){UncannyAutomator.recipe.hasLive[U]=!1}),n.each(UncannyAutomator.recipe.items,function(U,M){M.isLive&&(UncannyAutomator.recipe.hasLive[M.itemType]=!0)}),n.each(UncannyAutomator.recipe.items,function(U,M){let O=!0;n.each(M.options,function(F,q){let B=!0;n.each(q.fields,function(N,H){let W=H.validate(!1);W.isValid||(B=!1)}),UncannyAutomator.recipe.items[U].options[F].isValid=B,B||(O=!1)}),UncannyAutomator.recipe.items[U].isValid=O,M.isLive&&!O&&(R=!1)}),UncannyAutomator.recipe.hasLive.trigger||(R=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneTrigger),UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(R=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneAction),UncannyAutomator.recipe.hasLive.trigger||UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.liveItems),UncannyAutomator.recipe.isValid=R,R&&(UncannyAutomator.recipe.message.error=''),A=!0;}else console.error(T('%s: The action "%s" isn\'t defined',['recipeObject',L]));return A}function r(L=null,D={}){let A=!1;if(h(L)&&y(L,['add','delete','clean','reset','update','get']))switch(L){case'add':D=n.extend({isValid:!1,isLive:!1},D);let P=['id','itemType'];if(y(P,Object.keys(D)))h(UncannyAutomator.recipe.items[D.id])||(UncannyAutomator.recipe.items[D.id]=D,r('clean',{}),A=!0);else{let U=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['itemsObject',U]))}break;case'delete':D=n.extend({isValid:!1},D),b(D.id)?console.error(T('%s: Invalid item ID',['itemsObject'])):h(UncannyAutomator.recipe.items[D.id])?(delete UncannyAutomator.recipe.items[D.id],A=!0):console.error(T('%s: We didn\'t find an item with this the ID %s',['itemsObject',D.id]));break;case'clean':let R={};n.each(UncannyAutomator.recipe.items,function(U,M){h(M)&&(R[U]=M)}),UncannyAutomator.recipe.items=R,A=!0;break;case'update':b(D.id)?console.error(T('%s: Invalid item ID',['itemsObject'])):h(UncannyAutomator.recipe.items[D.id])?(UncannyAutomator.recipe.items[D.id]=n.extend({},UncannyAutomator.recipe.items[D.id],D),A=!0):console.error(T('%s: We didn\'t find an item with this the ID %s',['itemsObject',D.id]));break;case'reset':UncannyAutomator.recipe.items={},A=!0;break;case'get':if(!b(D.filter)){let U={};n.each(UncannyAutomator.recipe.items,function(M,O){let F=!0;n.each(D.filter,function(q,B){O[q]!=B&&(F=!1)}),F&&(U[M]=O)}),A=U}else A=UncannyAutomator.recipe.items;}else console.error(T('%s: The action "%s" isn\'t defined',['itemsObject',L]));return A}function m(L,D){let A,E;return'trigger'===L?E=UncannyAutomator.triggers:'action'===L?E=UncannyAutomator.actions:'closure'===L?E=UncannyAutomator.closures:void 0,n.each(E,function(P,R){if(R.code==D)return A=R,!1}),A}function u(L,D={}){let A={};if(h(L)&&y(L,['metabox','items','item','optionGroup','lastItem'])){let P=[];switch(L){case'metabox':if(D=n.extend({},D),P=['type'],y(P,Object.keys(D))){D.cssSelector__metabox,'trigger'==D.type?D.cssSelector__metabox='#recipe-triggers-ui':'action'==D.type&&(D.cssSelector__metabox='#recipe-actions-ui');let R=n(D.cssSelector__metabox);A=R}else{let R=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['itemsObject',R]))}break;case'items':if(D=n.extend({},D),P=['type'],y(P,Object.keys(D))){let R=u('metabox',{type:D.type}),U=R.find('.item:not(.item--start):not(.item--closure)');A=U}else{let R=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['itemsObject',R]))}break;case'item':if(D=n.extend({},D),P=['id'],y(P,Object.keys(D))){D.cssSelector='.uap .item[data-id="'+D.id+'"]';let R=n(D.cssSelector),U=R.find('.item__content');A.item=R,A.contentContainer=U}else{let R=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['itemsObject',R]))}break;case'optionGroup':if(D=n.extend({},D),P=['itemID','groupID'],y(P,Object.keys(D))){let R=u('item',{id:D.itemID}).item;D.cssSelector__tokenInSentence='.item-title__token[data-tokenid="'+D.groupID+'"]',D.cssSelector__fieldsContainer='.item-options__group[data-optiongroup="'+D.groupID+'"]';let U=R.find(D.cssSelector__tokenInSentence),M=R.find(D.cssSelector__fieldsContainer),O=R.find('.item-options');A.tokenInSentence=U,A.fieldsContainer=M,A.optionsContainer=O}else{let R=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['itemsObject',R]))}break;case'lastItem':if(D=n.extend({},D),P=['type'],y(P,Object.keys(D))){let R=u('metabox',{type:D.type}),U=R.find('.item:not(.item--start):not(.item--closure)').last();A=U}else{let R=JSON.stringify(x(D,P));console.error(T('%s: Some attributes are missing: %s',['itemsObject',R]))}}}else console.error(T('%s: The element "%s" isn\'t defined',['getDOMElements',L]));return A}function _(L='',D={}){let A={plain:'',html:n('<div/>'),elements:{normal:[],token:[]},parts:[]};if(L=L.trim(),!b(L)){let E=new RegExp(/\{\{(.*?)\}\}/gm),P=[],R=[],U=L,M=0;L=L.replace(E,function(N,H){let W=H.split(':');if(H={type:'token',id:W[1],text:W[0]},h(D[T('%s_readable',[H.id])])||h(D[H.id])){let z=D[T('%s_readable',[H.id])];H.originalText=H.text,H.text=h(z)?z:D[H.id]}return R.push(H),U=U.replace(N,'{{token:'+M+'}}'),M++,'{{v}}'});let F=L.split('{{v}}'),q=0;n.each(F,function(N,H){if(''!=H){P.push({type:'normal',text:H}),U=U.replace(H,'{{normal:'+q+'}}'),q++}});for(let B,N;null!==(B=E.exec(U));)N=B[1].split(':'),N={type:N[0],index:N[1]},'normal'==N.type?A.parts.push(P[N.index]):A.parts.push(R[N.index]);n.each(A.parts,function(N,H){if(A.plain+=H.text,' '!=H.text){let W,z=H.text,G=' '==z[0];G&&(z=z.slice(1));let X=' '==z[z.length-1];if(X&&(z=z.slice(0,-1)),'normal'==H.type)W={'class':'item-title__normal'};else{let K='item-title__token';h(H.originalText)&&(K+=' item-title__token--filled'),W={'class':K,'data-tokenID':H.id}}let J=n('<span/>',W).text(z);A.elements[H.type].push(J),G&&A.html.append(' '),A.html.append(J),X&&A.html.append(' ')}else A.html.append(' ')}),A.elements.normal=n(A.elements.normal).map(function(){return this.get()}),A.elements.token=n(A.elements.token).map(function(){return this.get()})}return A}function h(L){return'undefined'!=typeof L&&null!==L}function b(L){let D=!0;return h(L)&&(n.isArray(L)?D=0==L.length:V(L)?D=n.isEmptyObject(L):D=''==L),D}function y(L,D){let A=!1;return A=Array.isArray(L)?0==x(L,D).length:-1!==n.inArray(L,D),A}function x(L,D){return n(L).not(D).get()}function T(L,D){var A=a(18).vsprintf;return A(L,D)}function V(L){return null!==L&&'object'==typeof L}t.o=o,t.m=r,t.r=function(L=null,D=null,A=null,E=null){let P=['add','delete','update','change_post_status','recipe_completions_allowed','change_post_title'];y(L,P)?(D=n.param(D)+'&'+n.param({doing_rest:1}),n.ajax({method:'POST',url:UncannyAutomator.restURL+L+'/',data:D,beforeSend:function(R){R.setRequestHeader('X-WP-Nonce',UncannyAutomator.nonce)},success:function(R){R.success?h(R.recipes_object)?h(A)&&(o('create',{allRecipes:R.recipes_object}),A(R)):(console.error('The call was successful, but the new recipes_object is missing.'),h(E)&&E(R)):(console.error('The call was successful, but there were errors.'),h(E)&&E(R))},statusCode:{403:function(){location.reload()}},fail:function(R){h(E)&&E(R)}})):console.error(T('The %s endPoint does not exists. The valid endpoints are %s',[L,P.join(', ')]))},t.a=function(L=null,D=null,A=null,E=null){console.log(D),h(L)?(D=n.extend(!0,D,{action:L,nonce:UncannyAutomator.nonce}),n.ajax({method:'POST',dataType:'json',url:ajaxurl,data:D,success:function(P){'undefined'!=typeof P.status&&'auth-failed'===P.status&&location.reload(),h(A)&&A(P,D)},statusCode:{403:function(){location.reload()}},fail:function(P){h(E)&&E(P)}})):console.error('We cannot do this AJAX request. {action} is not defined.')},t.c=function(L){let D={};return n.each(UncannyAutomator.recipe.items[L].options,(A,E)=>{n.each(E.fields,(P,R)=>{let U=R.getFieldID(),M=R.getValue();h(M)||(M=R.getAttributes().currentValue),D[U]=M})}),D},t.e=function(L,D){let A;return n.each(UncannyAutomator.recipe.items[L].options,function(E,P){n.each(P.fields,function(R,U){D==U.getFieldID()&&(A=U)})}),A},t.g=m,t.d=u,t.h=function(L,D){let A=[{id:'common',name:'Common',icon:'uo-icon--bolt',tokens:[{id:'site_name',type:'text',name:UncannyAutomator.i18n.tokens.global.siteName},{id:'user_username',type:'text',name:UncannyAutomator.i18n.tokens.global.userUsername},{id:'user_firstname',type:'text',name:UncannyAutomator.i18n.tokens.global.userFirstName},{id:'user_lastname',type:'text',name:UncannyAutomator.i18n.tokens.global.userLastName},{id:'user_email',type:'email',name:UncannyAutomator.i18n.tokens.global.userEmail},{id:'user_displayname',type:'text',name:UncannyAutomator.i18n.tokens.global.userDisplay},{id:'admin_email',type:'email',name:UncannyAutomator.i18n.tokens.global.adminEmail},{id:'site_url',type:'url',name:UncannyAutomator.i18n.tokens.global.siteUrl},{id:'recipe_name',type:'text',name:UncannyAutomator.i18n.tokens.global.recipeName}]}],E={};if(h(L)?(('action'==L||'closure'==L)&&(E=n.extend({},E,r('get',{filter:{itemType:'trigger'}}))),'closure'==L&&(E=n.extend({},E,r('get',{filter:{itemType:'action'}})))):E=s.extend(!0,{},UncannyAutomator.recipe.items),n.each(E,function(P,R){let U=[];n.each(R.options,function(F,q){n.each(q.fields,function(B,N){let H=N.getAttributes();U.push({id:R.id+':'+R.itemCode+':'+H.optionCode,name:H.tokenName,type:'select'==H.fieldType||'textarea'==H.fieldType?'text':H.fieldType})})}),n.each(R.tokens,function(F,q){U.push({id:R.id+':'+q.tokenIdentifier+':'+q.tokenId,name:q.tokenName,type:h(q.tokenType)?q.tokenType:'text'})});let M=R.isMissing?R.sentence:m(R.itemType,R.itemCode).sentence;let O={id:R.itemCode,name:_(M,UncannyAutomator.recipe.items[R.id].meta).html,integrationId:R.integrationCode,tokens:U};A.push(O)}),h(D)&&!y(D,['text','textarea','url'])){let P=[];n.each(A,function(R,U){let M=[];n.each(U.tokens,function(O,F){F.type='float'==D?'int'==F.type?'float':F.type:F.type,D==F.type&&M.push(F)}),0<M.length&&(U.tokens=M,P.push(U))}),A=P}return A},t.f=function(){return['select','textarea','text','url','email','int','float','checkbox']},t.n=_,t.j=h,t.k=b,t.b=function(L,D,A={caseSensitive:!0}){let E=!1;return E=A.caseSensitive?L.toString()==D.toString():L.toString().toLowerCase()==D.toString().toLowerCase(),E},t.i=y,t.s=T,t.l=function(L){return'string'==typeof L},t.p=function(L){return L.replace(/\s/g,'')},t.q=function(L,D,A){return L=L.replace(/{{/g,D),L=L.replace(/}}/g,A),L};var j=a(4),S=a(5)}).call(t,a(0),a(0))},function(e,t,a){'use strict';var n=a(1),s=a(8),o=a(15),r=a(20),l=a(21);t.a=class{constructor(){let p=Object(n.d)('metabox',{type:'action'});p.empty();let c=Object(n.m)('get',{filter:{itemType:'action'}});Object(n.k)(c)?new r.a('action'):new s.a('action'),new o.a('action'),new l.a}}},function(e,t,a){'use strict';var n=a(1),s=a(6),o=a(23),r=a(8),l=a(15);t.a=class{constructor(){let p=Object(n.d)('metabox',{type:'trigger'});p.empty();let c=Object(n.m)('get',{filter:{itemType:'trigger'}});Object(n.k)(c)?new s.a('trigger'):!(1<Object.keys(c).length)||Object(n.j)(UncannyAutomator.wp)&&UncannyAutomator.wp?new r.a('trigger'):new o.a('trigger','warning',Object(n.s)('<p>%s</p><p>%s</p>',[Object(n.s)(UncannyAutomator.i18n.proOnly.multipleTriggers,['Uncanny Automator Pro']),UncannyAutomator.i18n.proOnly.proActive])),new l.a('trigger')}}},function(e,t,a){'use strict';(function(n,s){function l(h){let b={isValid:!1},v=h.find('input.form-element__input, textarea.form-element__textarea, select.form-element__select'),y=!0;return v.each(function(){let x=n(this),T={field_type:x.data('type'),value:x.val(),attributes:{supportsTokens:x.data('supportstokens'),required:x.data('required')}},C=d(x,T.field_type,T.value,T.attributes);C.isValid||(y=!1,h.addClass('item-options--error'))}),b.isValid=y,b}function d(h,b,v,y={supportsTokens:!1,required:!1},x){let T={isValid:!1,message:''},C=Object(f.f)(),V={select:{empty:UncannyAutomator.i18n.validation.field.select.empty,invalid:UncannyAutomator.i18n.validation.field.select.invalid},text:{empty:UncannyAutomator.i18n.validation.field.text.empty,invalid:UncannyAutomator.i18n.validation.field.text.invalid},textarea:{empty:UncannyAutomator.i18n.validation.field.textarea.empty,invalid:UncannyAutomator.i18n.validation.field.textarea.invalid},int:{empty:UncannyAutomator.i18n.validation.field.int.empty,invalid:UncannyAutomator.i18n.validation.field.int.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.int.multipleTokens},float:{empty:UncannyAutomator.i18n.validation.field.float.empty,invalid:UncannyAutomator.i18n.validation.field.float.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.float.multipleTokens},email:{empty:UncannyAutomator.i18n.validation.field.email.empty,single:{invalid:UncannyAutomator.i18n.validation.field.email.single.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.single.multipleTokens},multiple:{invalid:UncannyAutomator.i18n.validation.field.email.multiple.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens}},url:{empty:UncannyAutomator.i18n.validation.field.url.empty,invalid:UncannyAutomator.i18n.validation.field.url.invalid},invalidType:UncannyAutomator.i18n.validation.field.invalidType};if(!Object(f.i)(b,C))T.message=V.invalidType;else if(y.required&&Object(f.k)(v))T.message=V[b].empty;else if(!y.required&&Object(f.k)(v))T.isValid=!0;else if(''!=v){let w;switch(b){case'select':if(T.isValid=!0,Object(f.j)(x)){let M=x(v);T.isValid=M.isValid,M.isValid||(T.message=M.message)}break;case'text':case'textarea':if(T.isValid=!0,Object(f.j)(x)){let M=x(v);T.isValid=M.isValid,M.isValid||(T.message=M.message)}break;case'int':let I=new RegExp(/^([+-]?[1-9]\d*|0)$/gm);w=p(v);let j;if(y.supportsTokens&&w.hasTokens?1==w.tokens.length?(j=c(v),I.test(j)?T.isValid=!0:T.message=V.int.invalid):T.message=V.int.multipleTokens:I.test(v)?T.isValid=!0:T.message=V.int.invalid,T.isValid&&Object(f.j)(x)){let M=x(v,j);T.isValid=M.isValid,M.isValid||(T.message=M.message)}break;case'float':let S=new RegExp(/[+-]?((\d+(\.|\,)?\d*)|(\.\d+))/gm);w=p(v);let L;if(w.hasTokens?1==w.tokens.length?(L=c(v),S.test(L)?T.isValid=!0:T.message=V.float.invalid):T.message=V.float.multipleTokens:S.test(v)?T.isValid=!0:T.message=V.float.invalid,T.isValid&&Object(f.j)(x)){let M=x(v,L);T.isValid=M.isValid,M.isValid||(T.message=M.message)}break;case'email':let D=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),A=[];v.includes(',')?(A=v.split(','),n.each(A,function(M,O){A[M]=O.trim()})):A.push(v.trim()),w=p(v);let E,P=!0,R=1<A.length;if(y.supportsTokens&&w.hasTokens){let M=!1;n.each(A,function(O,F){w=p(F),1>=w.tokens.length?(E=c(F),!D.test(E)&&(P=!1)):M=!0}),P&&!M?T.isValid=!0:M?R?T.message=V.email.multiple.multipleTokens:T.message=V.email.single.multipleTokens:R?T.message=V.email.multiple.invalid:T.message=V.email.single.invalid}else n.each(A,function(M,O){D.test(O)||(P=!1)}),P?T.isValid=!0:R?T.message=V.email.multiple.invalid:T.message=V.email.single.invalid;if(T.isValid&&Object(f.j)(x)){let M=x(v,E);T.isValid=M.isValid,M.isValid||(T.message=M.message)}break;case'url':let U=u(v,y);if(U.isValid?T.isValid=!0:T.message=V.invalidType,T.isValid&&Object(f.j)(x)){let M=x(v,U.simulatedURL);T.isValid=M.isValid,M.isValid||(T.message=M.message)}break;default:T.isValid=!1,T.message=V.url.invalid;}}if(!Object(f.k)(h)){let w=h.closest('.form-element'),I=w.find('.form-element__error');T.isValid?(w.removeClass('form-element--error'),w.addClass('form-element--success')):(w.removeClass('form-element--success'),w.addClass('form-element--error')),''==T.message?(I.removeClass('form-element__error--show'),I.text('')):(I.addClass('form-element__error--show'),I.text(T.message))}return T}function p(h){let b={hasTokens:!1,tokens:[]},v=new RegExp(/\{\{(.*?)\}\}/gm),y=Object(f.h)();if(!Object(f.j)(h))console.error('Undefined string attribute');else if(!Object(f.k)(h)){Object(f.l)(h)||(h=h.toString());let T,x=[];for(;null!==(T=v.exec(h));){let C=T[1];n.each(y,(V,w)=>{n.each(w.tokens,(I,j)=>{C==j.id&&x.push(j)})})}b.tokens=x,0<b.tokens.length&&(b.hasTokens=!0)}return b}function c(h){let b=h,v=p(h);return v.hasTokens&&n.each(v.tokens,function(y,x){let T=x.id.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');T=Object(f.s)('{{%s}}',[T]);let C=new RegExp(T,'g');b=b.replace(C,function(){return m(x.type)})}),b}function m(h){let b='';return'select'===h?b='option':'text'===h?b='lorem-ipsum':'textarea'===h?b='<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum finibus eros nunc, et posuere libero posuere a. Nam viverra mattis finibus. Aenean purus lorem, mollis vel ullamcorper ac</p>':'int'===h?b=1:'float'===h?b=1.1:'url'===h?b='https://example.com':'email'===h?b='example@example.com':void 0,b}function u(h,b={supportsTokens:!1}){let v={changed:!1,isValid:!1,newURL:null,simulatedURL:null};h=h.replace(/ /g,'%20');let y=/^(?:(?:https?|ftp):\/\/)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)(?:.(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)*(?:.(?:[a-z¡-￿]{2,})).?)(?::d{2,5})?(?:[\/?#]S*)?/,x=p(h),T=h;if(b.supportsTokens&&x.hasTokens){let C=c(h);v.simulatedURL=C,y.test(C)?v.isValid=!0:'/'==h[0]?(T=UncannyAutomator.siteURL+h,y.test(T)&&(v.isValid=!0)):(T=UncannyAutomator.siteURL+'/'+h,y.test(T)&&(v.isValid=!0))}else y.test(h)?v.isValid=!0:'/'==h[0]?(T=UncannyAutomator.siteURL+h,y.test(T)&&(v.isValid=!0)):(T=UncannyAutomator.siteURL+'/'+h,y.test(T)&&(v.isValid=!0));return v.newURL=T,v.newURL!=h&&(v.changed=!0),v}t.c=function(h,b=null){let v={isValid:!1};if(Object(f.j)(h)){let y=UncannyAutomator.recipe.items[h];if(!y.isMissing&&!Object(f.k)(y)&&(v.isValid=y.isValid,!y.isValid)){let x=Object(f.d)('item',{id:h}).item;x.addClass('item--error'),n.each(y.options,function(T,C){if(!C.isValid){let V=Object(f.d)('optionGroup',{itemID:h,groupID:T});V.tokenInSentence.addClass('item-title__token--error item-title__token--error-shake'),V.fieldsContainer.addClass('item-options__group--error'),V.optionsContainer.addClass('item-options--error'),setTimeout(function(){V.tokenInSentence.removeClass('item-title__variable--error-shake')},1e3),Object(f.j)(V.optionsContainer)&&l(V.optionsContainer)}})}}else v.isValid=!1,Object(f.k)(b)&&console.error('Neither itemID nor the $item are defined. One of them must be defined.');return v},t.d=l,t.b=d,t.a=function(h){h.checkURL()};var f=a(1),_=a(11);(function(h){h.fn.checkURL=function(b){return this.each(function(){function v(j){let S=u(j,C);''!=j&&S.isValid&&S.changed?(V.addClass('form-input-url-notice--show'),I.text(S.newURL)):V.removeClass('form-input-url-notice--show')}let y=h(this),x=h.extend({preURL:'Final URL: '},b),T={container:y,input:y.find('.form-element__input')},C={required:T.input.data('required'),supportsTokens:T.input.data('supportstokens')},V=h('<div/>',{'class':'form-input-url-notice'}),w=h('<div/>',{'class':'form-input-url-notice__header'}),I=h('<div/>',{'class':'form-input-url-notice__url'});return w.text(x.preURL),w.appendTo(V),I.appendTo(V),V.appendTo(T.container),''!=T.input.val()&&v(T.input.val()),T.input.on('input',function(){v(T.input.val())}),this})}})(s)}).call(t,a(0),a(0))},function(e,t,a){'use strict';(function(n,s){var o=a(1),r=a(4);t.a=class{constructor(d,p,c=!0,m=null){this.type=d,this.attributes=this.setAttributes(p),this.customValidationFunction=m,c&&this.createFormElement()}createFormElement(){let d=null,p=this.type,c=this.attributes;if(Object(o.i)(p,Object(o.f)())){let m=n('<div/>',{'class':'form-element'});Object(o.j)(c.formElementClass)&&m.addClass(c.formElementClass);let g,f,u={name:c.optionCode,id:c.optionCode,'data-isajax':c.isAjax,'data-targetfield':c.targetField,'data-integrationid':c.integrationID,'data-endPoint':c.endPoint,'data-supportsTokens':c.supportsTokens,'data-supportsTinymce':c.supportsTinyMCE,'data-required':c.isRequired,'data-item_type':c.itemType};switch(p){case'select':g=n('<div/>',{'class':'form-select'}),this.fieldContainer=g,f=n('<select/>',n.extend({},u,{'data-type':'select','class':'form-element__select'})),this.field=f;let y,x,b=!1,v=0;if(c.hasDefaultValue&&(Object(o.k)(c.defaultValue.option_value)||Object(o.k)(c.defaultValue.option_name)?y=c.defaultValue:y=c.defaultValue.option_value),n.each(c.options,function(w,I){let j=n('<option/>',{value:I.value,text:I.text});c.hasDefaultValue&&Object(o.b)(y,w)&&(j.prop('selected',!0),x=!0,b=!0),c.hasValue&&Object(o.b)(c.currentValue,I.value)&&(j.prop('selected',!0),b=!0),j.appendTo(f),v++}),c.hasDefaultValue&&!x&&!Object(o.k)(c.defaultValue.option_value)&&!Object(o.k)(c.defaultValue.option_name)){let w=n('<option/>',{value:c.defaultValue.option_value,text:c.defaultValue.option_name});c.hasValue||Object(o.b)(c.defaultValue.option_value,c.currentValue)||(w.prop('selected',!0),b=!0),w.prependTo(f),v++}if(c.hasPlaceholder){let w=n('<option/>',{value:'',text:c.placeholder,disabled:!0});c.hasDefaultValue||c.hasValue||(w.prop('selected',!0),b=!0),w.prependTo(f),v++}if(this.selectHasSelectedOption=b,0==v){let w=new Option(UncannyAutomator.i18n.noResults,'',!0,!0);this.field.append(w),this.field.prop('disabled',!0)}f.on('change',function(){m.trigger('automator:field:change')});break;case'text':case'url':case'email':case'int':case'float':g=n('<div/>',{'class':'form-input form-input--'+p}),this.fieldContainer=g,f=n('<input/>',n.extend({},u,{'class':'form-element__input',type:'text','data-type':p})),this.field=f,c.supportsTokens&&g.addClass('form-input--token'),c.hasPlaceholder&&f.prop('placeholder',c.placeholder),c.hasValue?f.prop('value',c.currentValue):c.hasDefaultValue&&f.prop('value',c.defaultValue),f.on('input',function(){m.trigger('automator:field:change')});break;case'textarea':g=n('<div/>',{'class':'form-textarea'}),this.fieldContainer=g,f=n('<textarea/>',n.extend(!0,u,{'data-type':'text','class':'form-element__textarea','data-item_type':c.itemType})),this.field=f,c.supportsTokens&&g.addClass('form-textarea--token'),c.hasPlaceholder&&f.prop('placeholder',c.placeholder),c.hasValue?f.text(c.currentValue):c.hasDefaultValue&&f.text(c.defaultValue),f.on('input',function(){m.trigger('automator:field:change')});break;case'checkbox':g=n('<div/>',{'class':'form-checkbox'}),this.fieldContainer=g;let C=n('<label/>',{'class':'form-checkbox__container'}),V=n('<div/>',{'class':'checkbox--show'});if(f=n('<input/>',n.extend({},u,{type:'checkbox','data-type':'checkbox','class':'checkbox--hidden checkbox--primary'})),c.hasValue&&c.currentValue&&f.prop('checked',!0),this.field=f,c.hasLabel&&C.text(c.label),g.append(C),C.append(f),C.append(V),Object(o.j)(c.isToggle)&&c.isToggle&&(g.addClass('form-checkbox--toggle'),Object(o.j)(c.toggle))){if(Object(o.j)(c.toggle.on)){let w=n('<span/>',{'class':'checkbox-label checkbox-label--on'}).text(c.toggle.on);C.append(w)}if(Object(o.j)(c.toggle.off)){let w=n('<span/>',{'class':'checkbox-label checkbox-label--off'}).text(c.toggle.off);C.append(w)}}if(Object(o.j)(c.color))if(Object(o.i)(c.color,['gutenberg','green']))switch(c.color){case'gutenberg':g.addClass('form-checkbox--toggle-gutenberg');break;case'green':g.addClass('form-checkbox--toggle-green');}else console.error(Object(o.s)('The color %s does not exists. Default color will be used instead.',[c.color]));Object(o.j)(c.align)&&(Object(o.i)(c.align,['left','right'])?'right'==c.align&&g.addClass('form-checkbox--toggle-right'):console.error(Object(o.s)('The alignment %s does not exists. %s will be used instead.',[c.align,'"left"']))),f.on('change',function(){m.trigger('automator:field:change')}),f=C;}if(c.supportsTokens){let b=n('<div/>',{'class':'form-variable'}),v=n('<div/>',{'class':'form-variable__element'}),y=n('<div/>',{'class':'form-variable__render-container'}),x=n('<div/>',{'class':'form-variable__toggle'}),T=n('<span/>',{'class':'uo-icon uo-icon--asterisk'});y.append(f),v.append(y),x.append(T),v.append(x),b.append(v);let C=n('<div/>',{'class':'form-variable__dropdown'});b.append(C),f=b}g.append(f);let _;if('checkbox'!=p&&(c.hasLabel||c.isRequired)&&(_=n('<label/>',{'class':'form-element__label','for':c.optionCode}),c.hasLabel&&_.text(c.label)),c.isRequired&&(g.addClass('form-element--required'),f.prop('required',!0),c.hasLabel)){let b=n('<span/>',{'class':'form-element-label__required'});_.append(b)}(c.hasLabel||c.isRequired)&&g.prepend(_);let h=n('<div/>',{'class':'form-element__error'});if(g.append(h),this.fieldContainer=g,c.hasDescription){let b=n('<div/>',{'class':'description'});b.text(c.description),g.append(b)}m.append(g),d=m,this.formElement=m,this.initLibraries(),this.onChange()}else console.error(Object(o.s)('The field type %s is invalid. The valid ones are %s',[p,Object(o.f)().join(', ')]));return d}setAttributes(d){return Object(o.j)(d.hasValue)||(Object(o.k)(d.currentValue)?d.hasValue=!1:d.hasValue=!0),Object(o.j)(d.hasPlaceholder)||(Object(o.k)(d.placeholder)?d.hasPlaceholder=!1:d.hasPlaceholder=!0),Object(o.j)(d.hasDefaultValue)||(Object(o.k)(d.defaultValue)?d.hasDefaultValue=!1:d.hasDefaultValue=!0),Object(o.j)(d.hasLabel)||(Object(o.k)(d.label)?d.hasLabel=!1:d.hasLabel=!0),Object(o.j)(d.hasDescription)||(Object(o.k)(d.description)?d.hasDescription=!1:d.hasDescription=!0),Object(o.j)(d.isRequired)||(d.isRequired=!1),Object(o.j)(d.supportsTokens)||(d.supportsTokens=!1),Object(o.j)(d.supportsTinyMCE)||(d.supportsTinyMCE=!1),!Object(o.j)(d.isToggle)&&Object(o.j)(d.toggle)&&(d.isToggle=!0),d}validate(d=!0){let c,p=null;d?(p=this.getFieldContainer(),c=this.getValue()):c=this.attributes.currentValue;let m=this.type,u={supportsTokens:this.attributes.supportsTokens,required:this.attributes.isRequired};return Object(r.b)(p,this.type,c,u,this.customValidationFunction)}onChange(){this.formElement.on('automator:field:change',()=>{this.doAJAX()})}isReady(){let d=!1;return Object(o.j)(UncannyAutomator.recipe.items[this.attributes.itemId])&&(d=!0),d}doAJAX(){let d=Object(o.j)(this.getValue())?this.getValue():this.getMetaValue(),p=Object(o.j)(this.attributes.options)&&0<this.attributes.options.length;if(this.attributes.isAjax&&!Object(o.k)(d)&&p&&!Object(o.k)(this.attributes.targetField)){let c=Object(o.e)(this.attributes.itemId,this.attributes.targetField);!Object(o.j)(c)||Object(o.k)(this.attributes.integrationId)||Object(o.k)(this.attributes.endpoint)||(this.startLoadingAnimation(),c.startLoadingAnimation(),Object(o.a)(this.attributes.endpoint,{integration_id:this.attributes.integrationId,item_id:this.attributes.itemId,group_id:this.attributes.groupId,field_id:this.attributes.optionCode,target_field:this.attributes.targetField,value:this.getValue(),values:Object(o.c)(this.attributes.itemId)},m=>{this.stopLoadingAnimation(),c.stopLoadingAnimation();let u=c.getAttributes();'select'==u.fieldType&&n.isArray(m)&&c.setSelectOptions(m)}))}}getFormElement(){return this.isReady()&&this.doAJAX(),this.formElement}getFieldContainer(){return this.fieldContainer}getFieldID(){return this.attributes.optionCode}getField(){return this.field}getAttributes(){return this.attributes}getValue(){let d=null;if(Object(o.j)(this.field))switch(this.type){case'select':case'text':case'url':case'email':case'int':case'float':case'textarea':d=this.field.val();break;case'checkbox':d=this.field.is(':checked');}return d}getReadableValue(){let d=null,p=this.getValue();switch(this.type){case'select':d=this.field.find(Object(o.s)('option[value="%s"]',[p])).text();break;case'text':case'url':case'email':case'int':case'float':case'textarea':p=n('<p/>').html(p).text();break;case'checkbox':d=p?UncannyAutomator.i18n.trueLabel:UncannyAutomator.i18n.falseLabel;}return d}getMetaValue(){let d;if(Object(o.j)(UncannyAutomator.recipe.items[this.attributes.itemId])){let p=UncannyAutomator.recipe.items[this.attributes.itemId].meta[this.attributes.optionCode];Object(o.j)(p)&&(d=p)}return d}setValue(d,p=!0){switch(this.type){case'select':let c=this.field.find('option[value="'+d+'"]');if(0<c.length){let g=this.field.find('option');g.prop('selected',!1),c.prop('selected',!0),p&&this.field.trigger('automator:field:change')}else console.error(Object(o.s)('The option with ID %s does not exists',[d]));break;case'text':case'url':case'email':case'int':case'float':case'textarea':this.field.val(d),p&&this.field.trigger('automator:field:change');break;case'checkbox':let m=d,u=this.getValue();m&&!u&&this.field.prop('checked',!0),!m&&u&&this.field.prop('checked',!1),p&&(m&&!u||!m&&u)&&this.field.trigger('automator:field:change');}}hasSelectedOption(){return this.selectHasSelectedOption}setSelectOptions(d){if(this.removeSelectOptions(),0<d.length){this.field.prop('disabled',!1);let p=Object(o.j)(this.getValue())?this.getValue():this.getMetaValue(),c=[];n.each(d,(m,u)=>{let g=new Option(u.text,u.value,!1,!1);this.field.append(g),c.push(g)}),Object(o.k)(p)||n.each(c,(m,u)=>{u.value==p&&n(u).prop('selected',!0)})}else{let p=new Option(UncannyAutomator.i18n.noResults,'',!0,!0);this.field.append(p),this.field.prop('disabled',!0)}this.field.trigger('change')}removeSelectOptions(){this.field.empty()}isLoading(){return this.formElement.hasClass('form-element--loading')}startLoadingAnimation(){let d='form-element--loading';Object(o.j)(this.formElement)&&!this.formElement.hasClass(d)&&(this.formElement.addClass(d),'checkbox'==this.type&&!Object(o.j)(this.attributes.isToggle)&&this.fieldContainer.addClass('form-checkbox--loading-inline'),this.formElement.trigger('automator:field:loading'))}stopLoadingAnimation(){let d='form-element--loading';this.formElement.hasClass(d)&&(this.formElement.removeClass(d),this.fieldContainer.removeClass('form-checkbox--loading-inline'),this.formElement.trigger('automator:field:loading'))}initLibraries(){switch(this.type){case'select':this.initSelect2(this.field);break;case'text':case'url':case'email':case'int':case'float':case'textarea':this.attributes.supportsTokens&&this.initTokenSelector(this.fieldContainer),'url'==this.attributes.fieldType&&Object(r.a)(this.fieldContainer);}}initSelect2(d){d.hasClass('select2-hidden-accessible')&&d.select2('destroy'),d.select2({searchInputPlaceholder:UncannyAutomator.i18n.search,language:{errorLoading:function(){return UncannyAutomator.i18n.validation.field.select.errorLoading},inputTooLong:function(p){var g,c=p.input.length-p.maximum,m=UncannyAutomator.i18n.validation.field.select.tooLong.singular,u=UncannyAutomator.i18n.validation.field.select.tooLong.plural;return u=Object(o.s)(u,[c]),g=1==c?m:u,g},inputTooShort:function(p){var c=p.minimum-p.input.length,m=Object(o.s)(UncannyAutomator.i18n.validation.field.select.tooShort,[c]);return m},loadingMore:function(){return UncannyAutomator.i18n.loadingMoreResults},maximumSelected:function(p){var u,c=UncannyAutomator.i18n.validation.field.select.maximumSelected.singular,m=UncannyAutomator.i18n.validation.field.select.maximumSelected.plural;return m=Object(o.s)(m,[p.maximum]),u=1==p.maximum?c:m,u},noResults:function(){return UncannyAutomator.i18n.noResults},searching:function(){return UncannyAutomator.i18n.searching}}})}initTokenSelector(d){let p=Object(o.h)(this.attributes.itemType,this.attributes.fieldType);d.TokenSelector(p)}initTinyMCE(){this.field;if('textarea'==this.attributes.fieldType&&this.attributes.supportsTinyMCE){let p=tinymce.get(this.attributes.optionCode);Object(o.j)(p)&&wp.editor.remove(this.attributes.optionCode),wp.editor.initialize(this.attributes.optionCode,{mediaButtons:!0,tinymce:{wpautop:!0,toolbar1:'formatselect bold italic bullist numlist blockquote alignleft aligncenter alignright link unlink wp_more',toolbar2:'strikethrough hr forecolor pastetext removeformat visualchars outdent indent undo redo'},quicktags:!0}),p=tinymce.get(this.attributes.optionCode),p.on('input change paste',()=>{this.field.text(p.getContent())})}}},function(d){var p=d.fn.select2.amd.require('select2/defaults');d.extend(p.defaults,{searchInputPlaceholder:''});var c=d.fn.select2.amd.require('select2/dropdown/search'),m=c.prototype.render;c.prototype.render=function(){var g=m.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr('placeholder',this.options.get('searchInputPlaceholder')),g}}(window.jQuery),function(d){d.fn.TokenSelector=function(p){return this.each(function(){let c=d(this),m={noResults:UncannyAutomator.i18n.noResults,responsive:{margin:30}},u=c.hasClass('form-input')?'input':'textarea';switch(m.classes={},u){case'input':m.classes.tokenReady='form-input--token-ready',m.classes.field='form-element__input',m.classes.hiddenField='form-element__input--hidden';break;case'textarea':m.classes.tokenReady='form-textarea--token-ready',m.classes.field='form-element__textarea',m.classes.hiddenField='form-element__textarea--hidden';let g=c.find('textarea');m.isTinyMCEinstance=g.data('supportstinymce'),m.TinyMCEinstanceID=g.prop('id');}if(!c.hasClass(m.classes.tokenReady)){let g=c.find('.'+m.classes.field).data('item_type'),f={list:p,getTokenList:function(){return this.list},hasTokens:function(){let h=this.list;return!d.isEmptyObject(h)}},_=f.getTokenList();if(f.hasTokens()){let h={config:{inputHeight:35},init:function(){this.createElement()},createElement:function(){let x=c,T=x.find('.'+m.classes.field),C=T.data('type'),V=x.find('.form-variable__dropdown'),w=d('<div/>',{'class':'form-variable__dropdown-container'}),I=d('<div/>',{'class':'form-variable__search'}),j=d('<input/>',{'class':'form-variable__search-input',placeholder:UncannyAutomator.i18n.tokens.search});I.append(j);let S=d('<div/>',{'class':'form-variable__groups'});d.each(_,function(D,A){let F,E=d('<div/>',{'class':'form-variable__group'}),P=d('<div/>',{'class':'form-variable__group-source'}),R=d('<div/>',{'class':'form-variable-group-source__icon'}),U=d('<div/>',{'class':'form-variable-group-source__description'}),M=d('<div/>',{'class':'form-variable-group-source__toggle'}),O=d('<span/>',{'class':'form-variable-group-source__toggle-icon'});if(Object(o.j)(UncannyAutomator.integrations[A.integrationId])){let B=UncannyAutomator.integrations[A.integrationId];F=d('<img/>',{src:B.icon_16,srcset:B.icon_16+' 1x, '+B.icon_32+' 2x',alt:A.name})}else F=d('<i/>',{'class':'uo-icon '+A.icon});R.append(F),U.append(A.name),M.append(O),P.append(R),P.append(U),P.append(M);let q=d('<span/>',{'class':'form-variable__group-children'});d.each(A.tokens,function(B,N){let H=d('<div/>',{'class':'form-variable__group-item','data-token':'{{'+N.id+'}}','data-type':N.type});H.text(N.name),q.append(H)}),E.append(P),E.append(q),S.append(E)});let L=d('<div/>',{'class':'form-variable__group-item-no-results form-variable__group-item-no-results--hide'});L.text(m.noResults),S.append(L),w.append(I),w.append(S),V.append(w),x.addClass(m.classes.tokenReady)},getPosition:function(){let x={window:d(window)},T={above:y.container.offset().top-x.window.scrollTop(),below:x.window.height()-(y.container.offset().top-x.window.scrollTop())-this.config.inputHeight};y.dropdown.container_relative.addClass('uo-realsize');let C=y.dropdown.container_relative.height()+75;return y.dropdown.container_relative.removeClass('uo-realsize'),T.hasSpaceBelow='textarea'==u||T.below>=C,T},setDirection:function(){let x=this.getPosition();y.container.removeClass('form-variable--above form-variable--below'),x.below>x.above||x.hasSpaceBelow?(y.container.addClass('form-variable--below'),b.position='below'):(y.container.addClass('form-variable--above'),b.position='above')},setScroll:function(){if(b.open){let x=this.getPosition()[b.position]-this.config.inputHeight-m.responsive.margin;y.dropdown.options.container.css({'max-height':x+'px'})}},addToken:function(x){let T=y.input.get(0).selectionStart,C=T+x.length;if(m.isTinyMCEinstance){let V=tinymce.get(m.TinyMCEinstanceID);if(Object(o.j)(V))if(x=Object(o.p)(x),y.input.is(':visible')){let w=y.input.val(),I=w.substr(0,T)+x+w.substr(T);y.input.val(I).focus(),y.input.trigger('input'),y.input.get(0).setSelectionRange(C,C)}else V.execCommand('mceInsertContent',!1,x)}else{let V=y.input.val(),w=V.substr(0,T)+x+V.substr(T);y.input.val(w).focus(),y.input.trigger('input'),y.input.get(0).setSelectionRange(C,C)}this.hideDropdown(),this.focusInput()},resetDropdown:function(){y.dropdown.options.groups.removeClass('form-variable__group--hide form-variable__group--open'),y.dropdown.options.groups.removeClass('form-variable__group--open'),y.dropdown.options.items.removeClass('form-variable__group-item--hide'),y.dropdown.options.no_results.addClass('form-variable__group-item-no-results--hide')},hideDropdown:function(){y.container.removeClass('form-variable--open'),b.open=!1,y.dropdown.search_input.val('').trigger('input')},focusInput:function(){y.input.focus()}},b={open:!1,position:null};h.init();let y={container:c.find('.form-variable'),input_area:c.find('.form-variable__element'),input:c.find('.'+m.classes.field),dropdown:{container:c.find('.form-variable__dropdown'),container_relative:c.find('.form-variable__dropdown-container'),button:c.find('.form-variable__toggle'),search_input:c.find('.form-variable__search-input'),options:{container:c.find('.form-variable__groups'),groups:c.find('.form-variable__group'),groups_title:c.find('.form-variable__group-source'),items:c.find('.form-variable__group-item'),no_results:c.find('.form-variable__group-item-no-results')}}};({init:function(){this.toggles(),this.insert_tokens(),this.search(),this.resize(),this.mirrorContent()},toggles:function(){y.dropdown.button.on('click',function(){y.container.toggleClass('form-variable--open'),b.open=y.container.hasClass('form-variable--open'),y.dropdown.search_input.val('').trigger('input'),y.dropdown.search_input.focus(),h.setDirection(),h.setScroll()}),y.dropdown.options.groups_title.on('click',function(){let x=d(this),T=x.closest('.form-variable__group');T.toggleClass('form-variable__group--open')})},resize:function(){d(window).resize(function(){h.setScroll()})},insert_tokens:function(){y.dropdown.options.items.on('click',function(){let x=d(this),T=x.data('token');h.addToken(T)})},search:function(){y.dropdown.search_input.on('input',function(){let x=d(this),T=x.val();if(''!=T){T=T.toLowerCase().replace(/\s/g,''),y.dropdown.options.groups.addClass('form-variable__group--open'),y.dropdown.options.groups.addClass('form-variable__group--hide'),y.dropdown.options.items.addClass('form-variable__group-item--hide'),y.dropdown.options.no_results.addClass('form-variable__group-item-no-results--hide');let C=!1;y.dropdown.options.items.each(function(){let V=d(this),w=V.text().toLowerCase().replace(/\s/g,'');if(-1!==w.search(T)){let I=V.closest('.form-variable__group');I.removeClass('form-variable__group--hide'),V.removeClass('form-variable__group-item--hide'),C=!0}}),C||y.dropdown.options.no_results.removeClass('form-variable__group-item-no-results--hide')}else h.resetDropdown()})},mirrorContent:function(){}}).init()}else c.find('.form-variable__element').addClass('form-variable__element--empty')}return this})}}(s)}).call(t,a(0),a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(7),r=a(22);t.a=class{constructor(d,p){this.itemType=d,this.$currentItem=p,this.create()}create(){let d=n('<div/>',{'class':'item'});this.$item=d;let p=this.createHeader(),c=n('<div/>',{'class':'item__content'}),m=this.createIntegrations();if(d.append(p),c.append(m),d.append(c),Object(s.j)(this.$currentItem))this.$currentItem.replaceWith(d);else{let u=Object(s.d)('lastItem',{type:this.itemType});if('trigger'==this.itemType)if(0<u.length)d.insertAfter(u);else{let g=Object(s.d)('metabox',{type:this.itemType});g.append(d)}if('action'==this.itemType){let g=Object(s.d)('items',{type:this.itemType});if(0<g.length)d.insertAfter(u);else{let f=Object(s.d)('metabox',{type:this.itemType}),_=f.find('.item.item--start');_.replaceWith(d)}}}}createHeader(){let d=n('<div/>'),p=n('<div/>',{'class':'item-icon'}),c=n('<div/>',{'class':'item-title clear'}),m=n('<div/>',{'class':'item-title__describe'}),u=n('<div/>',{'class':'item-title__non-editable'}).text(UncannyAutomator.i18n.integration.select),g=new o.a(this.itemType);return d.append(g),d.append(p),m.append(u),c.append(m),d.append(c),d}createIntegrations(){let d=n('<div/>',{'class':'item-integrations'}),p=this.getNonEmptyIntegrations(this.itemType);return n.each(p,(c,m)=>{let u=this.createIntegration(c,m);u.on('click',()=>{new r.a(this.itemType,c,this.$item)}),d.append(u)}),d}createIntegration(d,p){let c=n('<div/>',{'class':'item-integration'}),m=n('<div/>',{'class':'item-integration__logo'}),u=n('<div/>',{'class':'item-integration__name'}),g=n('<img/>',{src:p.logo,srcset:Object(s.s)('%s 1x, %s 2x',[p.logo,p.logo_retina]),alt:p.name});return u.text(p.name),m.append(g),c.append(m),c.append(u),c}getNonEmptyIntegrations(d){let m,p={},c=Object(s.m)('get',{filter:{itemType:d}});return'trigger'==d&&(m=UncannyAutomator.triggers),'action'==d&&(m=UncannyAutomator.actions),n.each(m,function(u,g){let f=g.integration;Object(s.j)(p[f])||(p[f]=UncannyAutomator.integrations[f])}),p}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(13),r=a(3),l=a(2);t.a=class{constructor(p,c,m){return this.itemType=p,this.itemCode=c,this.itemId=m,this.item=UncannyAutomator.recipe.items[m],this.createItemActions()}createItemActions(){let p=n('<div/>',{'class':'item-actions'}),c=n('<div/>',{'class':'item-actions__btn'}),m=n('<i/>',{'class':'uo-icon uo-icon--ellipsis-h'}),u=n('<div/>',{'class':'item-actions__dropdown'}),g=n('<ul/>',{'class':'item-actions-dropdown__ul'});c.append(m),p.append(c);let f=n('<li/>',{'class':'item-actions-dropdown__action'}),_=n('<span/>').text(UncannyAutomator.i18n.delete);if(f.append(_),g.append(f),Object(s.j)(this.itemType)&&Object(s.j)(this.itemCode)&&(!Object(s.j)(this.item)||Object(s.j)(this.item)&&!this.item.isMissing)){let h=Object(s.g)(this.itemType,this.itemCode);if(Object(s.j)(h.support_link)){let b=n('<a/>',{href:h.support_link,'class':'item-actions-dropdown__action',target:'_blank'}),v=n('<span/>').text(UncannyAutomator.i18n.support);b.append(v),g.append(b)}}return u.append(g),p.append(u),c.on('click',()=>p.toggleClass('item-actions--open')),f.on('click',()=>{if(Object(s.j)(this.itemId)&&UncannyAutomator.recipe.isLive&&UncannyAutomator.recipe.items[this.itemId].isLive){p.removeClass('item-actions--open');let h=new o.a({title:UncannyAutomator.i18n.confirmationModal.title,warning:Object(s.q)(UncannyAutomator.i18n.confirmationModal.deleteWarning,'<strong>','</strong>'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});h.setEvents({afterSetEvents:()=>{h.show()},onConfirm:()=>{let b=h.getElements(),v=b.modal.box.buttons.confirm;v.addClass('btn--loading').prop('disabled',!0),Object(s.r)('delete',{ID:this.itemId},()=>{h.destroy(),'trigger'==this.itemType&&new r.a,('action'==this.itemType||'closure'==this.itemType)&&new l.a,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)})},afterHide:function(){h.destroy()}})}else Object(s.j)(this.itemId)?(f.addClass('item-actions-dropdown__action--loading'),Object(s.r)('delete',{ID:this.itemId},()=>{'trigger'==this.itemType&&new r.a,('action'==this.itemType||'closure'==this.itemType)&&new l.a})):('trigger'==this.itemType&&new r.a,'action'==this.itemType&&new l.a)}),p}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(7),r=a(9),l=a(10),d=a(14);t.a=class{constructor(c){n.each(UncannyAutomator.recipe.items,(m,u)=>{if(c==u.itemType){let g=this.createItem(m),f=Object(s.d)('metabox',{type:c});f.append(g)}})}createItem(c){let m=UncannyAutomator.recipe.items[c],u=n('<div/>',{'class':'item','data-id':c});m.isMissing&&u.addClass('item--missing');let g=this.createHeader(m.integrationCode,m.itemType,m.itemCode,c),f=this.createNotice(m);return u.append(g),u.append(f),u}createHeader(c,m,u,g){let f=n('<div/>'),_=n('<div/>',{'class':'item-title clear'}),h=UncannyAutomator.recipe.items[g];h.isMissing&&(c=null);let b=new o.a(m,u,g);f.append(b);let v=new r.a(c);f.append(v);let y=h.integrationName,x=new l.a(c,y);_.append(x);let T=new d.a(m,u,g);_.append(T),f.append(_);let C=n('<div/>',{'class':'item__content'});return f.append(C),f}createNotice(c){let m;return c.isMissing&&(m=n('<div/>',{'class':'item-notice'}),m.text(UncannyAutomator.i18n.itemMissing)),m}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(r){return this.integrationCode=r,this.createItemIcon()}createItemIcon(){let r=n('<div/>',{'class':'item-icon'});if(Object(s.j)(UncannyAutomator.integrations[this.integrationCode])){let l=UncannyAutomator.integrations[this.integrationCode],d=n('<img/>',{src:l.icon_32,srcset:Object(s.s)('%s 1x, %s 2x',[l.icon_32,l.icon_64]),alt:l.name});r.append(d)}return r}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(r,l=null){return this.integrationId=r,this.integrationName=l,this.createItemTag()}createItemTag(){let r=UncannyAutomator.integrations[this.integrationId],l=n('<div/>',{'class':'item-title__integration clear'}),d=n('<div/>',{'class':'item-title__tag'});return Object(s.j)(r)?d.text(r.name):d.text(this.integrationName),l.append(d),l}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(12),r=a(5);class l{constructor(){this.elements={metabox:n('#uo-automator-publish-metabox'),timesPerUser:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null},toggle:null},this.createMetabox()}createMetabox(){let d=n('<div/>',{id:'uap-publish-metabox'}),p=n('<div/>',{class:'metabox__content'}),c=n('<div/>',{class:'metabox__footer'}),m=n('<div/>',{class:'publish-row'}),u=n('<div/>',{class:'publish-row__visible'}),g=n('<span/>',{class:'publish-row__icon'}),f=n('<i/>',{class:'uo-icon uo-icon--sync'}),_=n('<span/>',{class:'publish-row__name'}).text(UncannyAutomator.i18n.publish.timesPerUser);UncannyAutomator.recipe.publish.timesPerUser=-1==UncannyAutomator.recipe.publish.timesPerUser?'':UncannyAutomator.recipe.publish.timesPerUser;let h=Object(s.k)(UncannyAutomator.recipe.publish.timesPerUser)?UncannyAutomator.i18n.unlimited:UncannyAutomator.recipe.publish.timesPerUser,b=n('<span/>',{class:'publish-row__value'}).text(h),v=n('<span/>',{class:'publish-row__edit'}).text(UncannyAutomator.i18n.edit),y=n('<div/>',{class:'publish-row__hidden'}),x=n('<div/>',{class:'publish-row__settings'});this.elements.timesPerUser.editLink=v,this.elements.timesPerUser.hiddenBox=y;let T=new r.a('int',{currentValue:UncannyAutomator.recipe.publish.timesPerUser,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.exampleOne},!0,function(F){let B={isValid:!1,message:''};return 1<=F?B.isValid=!0:B.message=UncannyAutomator.i18n.publish.oneOrBigger,B});this.timesField=T;let C=n('<div/>',{class:'publish-row__buttons'}),V=n('<div/>',{class:'btn btn--primary'}).text(UncannyAutomator.i18n.save),w=n('<div/>',{class:'btn btn--secondary'}).text(UncannyAutomator.i18n.cancel);this.elements.timesPerUser.saveButton=V,this.elements.timesPerUser.cancelButton=w,C.append(V),C.append(w),x.append(T.getFormElement()),x.append(C),y.append(x),g.append(f),u.append(g),u.append(_),u.append(b),u.append(v),m.append(u),m.append(y),p.append(m);let I=n('<div/>',{class:'publish-row'}),j=n('<div/>',{class:'publish-row__visible'}),S=n('<span/>',{class:'publish-row__icon'}),L=n('<i/>',{class:'uo-icon uo-icon--calendar'}),D=n('<span/>',{class:'publish-row__name'}).text(UncannyAutomator.i18n.publish.createdOn),A=n('<span/>',{class:'publish-row__value'}).text(UncannyAutomator.recipe.publish.createdOn);S.append(L),j.append(S),j.append(D),j.append(A),I.append(j),p.append(I);let E=n('<div/>',{class:'publish-footer__row clear'}),P=n('<div/>',{class:'publish-footer__left'}),R=n('<a/>',{class:'publish-footer__move-to-draft',href:UncannyAutomator.recipe.publish.moveToTrash.replace(/&amp;/g,'&')}).text(UncannyAutomator.i18n.proOnly.moveToTrash),U=n('<div/>',{class:'publish-footer__right'}),M=new r.a('checkbox',{color:'gutenberg',align:'right',toggle:{on:UncannyAutomator.i18n.status.live,off:UncannyAutomator.i18n.status.draft},currentValue:UncannyAutomator.recipe.isLive});UncannyAutomator.recipe.publish.statusToggle=M;let O=M.getFormElement();this.recipeStatusToggle=M,this.elements.toggle=O,P.append(R),U.append(O),E.append(P),E.append(U),c.append(E),d.append(p),d.append(c),this.elements.metabox.html(d),this.bind(),this.validateStatus()}validateStatus(){UncannyAutomator.recipe.isLive&&!UncannyAutomator.recipe.isValid&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}bind(){this.elements.timesPerUser.editLink.on('click',()=>{this.elements.timesPerUser.hiddenBox.slideToggle(300)}),this.elements.timesPerUser.cancelButton.on('click',()=>{this.elements.timesPerUser.hiddenBox.slideToggle(300,()=>{new l})}),this.elements.timesPerUser.saveButton.on('click',()=>{let d=this.timesField.validate();if(d.isValid){this.elements.timesPerUser.saveButton.addClass('btn--loading btn--disabled');let p=this.timesField.getValue();Object(s.k)(p)&&(p=-1),Object(s.r)('recipe_completions_allowed',{post_ID:UncannyAutomator.recipe.id,recipe_completions_allowed:p},()=>{UncannyAutomator.recipe.publish.timesPerUser=p,this.elements.timesPerUser.hiddenBox.slideToggle(300,()=>{new l})})}}),this.timesField.getField().on('keyup',d=>{13==d.keyCode&&this.elements.timesPerUser.saveButton.trigger('click')}),this.elements.toggle.on('automator:field:change',()=>{this.recipeStatusToggle.startLoadingAnimation();let d=this.recipeStatusToggle.getValue(),p=d?'publish':'draft',c=Object(s.m)('get',{filter:{itemType:'trigger'}}),m=!(1<Object.keys(c).length)||Object(s.j)(UncannyAutomator.wp)&&UncannyAutomator.wp;m&&(!d||d&&UncannyAutomator.recipe.isValid)?Object(s.r)('change_post_status',{post_ID:UncannyAutomator.recipe.id,post_status:p},()=>{UncannyAutomator.recipe.isLive=d,new l},()=>{setTimeout(()=>{this.recipeStatusToggle.stopLoadingAnimation(),this.recipeStatusToggle.setValue(!1,!1)},1e3)}):(!m&&(UncannyAutomator.recipe.message.error=Object(s.s)(UncannyAutomator.i18n.proOnly.proToPublish,['Uncanny Automator Pro'])),UncannyAutomator.recipe.errorMode=!0,new o.a,setTimeout(()=>{this.recipeStatusToggle.stopLoadingAnimation(),this.recipeStatusToggle.setValue(!1,!1)},1e3))})}}t.a=l}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(){this.elements={container:n('#uo-uap-notices')},0==this.elements.container.length&&(this.createContainer(),this.elements.container=n('#uo-uap-notices')),this.emptyContainer(),this.createWarning(),UncannyAutomator.recipe.errorMode&&this.createError()}emptyContainer(){this.elements.container.empty()}createContainer(){let r=n('<div/>',{id:'uo-uap-notices',class:'uap'});n('#postbox-container-2').prepend(r)}createError(){this;if(!Object(s.k)(UncannyAutomator.recipe.message.error)){let l=n('<div/>',{class:'uo-notice uo-notice--error'}).text(UncannyAutomator.recipe.message.error);this.elements.container.append(l)}}createWarning(){this;if(!Object(s.k)(UncannyAutomator.recipe.message.warning)){let l=n('<div/>',{class:'uo-notice uo-notice--warning'}).text(UncannyAutomator.recipe.message.warning);this.elements.container.append(l)}}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(r){return this.elements={container:null,automatorContainer:null,modal:{container:null,box:{container:null,title:null,warning:null,buttons:{container:null,cancel:null,confirm:null}}}},this.elements.container=n('body'),this.isVisible=!1,this.config={fadeDuration:150},this.content=n.extend({},{buttons:{cancel:UncannyAutomator.i18n.cancel}},r),this.create(),this}create(){let r=n('<div/>',{'class':'uap'}),l=n('<div/>',{'class':'modal'}),d=n('<div/>',{'class':'modal__box'});if(this.elements.automatorContainer=r,this.elements.modal.container=l,this.elements.modal.box.container=d,Object(s.j)(this.content.title)){let m=n('<div/>',{'class':'modal__title'}).html(this.content.title);d.append(m),this.elements.modal.box.title=m}if(Object(s.j)(this.content.warning)){let m=n('<div/>',{'class':'modal__warning'}).html(this.content.warning);d.append(m),this.elements.modal.box.warning=m}let p=n('<div/>',{'class':'modal__buttons'}),c=n('<button/>',{'class':'btn btn--secondary'}).html(this.content.buttons.cancel);if(p.append(c),this.elements.modal.box.buttons.container=p,this.elements.modal.box.buttons.cancel=c,Object(s.j)(this.content.buttons.confirm)){let m=n('<button/>',{'class':'btn btn--primary'}).html(this.content.buttons.confirm);p.append(m),this.elements.modal.box.buttons.confirm=m}d.append(p),l.append(d),r.append(l),this.elements.container.append(r),this.bind()}setEvents(r){let l=this,d=function(){};this.events={afterSetEvents:Object(s.j)(r.afterSetEvents)?r.afterSetEvents:d,afterShow:Object(s.j)(r.afterShow)?r.afterShow:d,afterHide:Object(s.j)(r.afterHide)?r.afterHide:d,onConfirm:Object(s.j)(r.onConfirm)?r.onConfirm:d,onCancel:Object(s.j)(r.onCancel)?r.onCancel:d},Object(s.j)(r.onCancel)||(this.events.onCancel=function(){l.hide()}),this.events.afterSetEvents()}destroy(){let r=this;this.unbind(),this.isVisible?this.hide(function(){r.elements.automatorContainer.remove()}):r.elements.automatorContainer.remove()}bind(){let r=this;this.elements.modal.box.buttons.cancel.on('click',function(){r.events.onCancel()}),this.elements.modal.box.buttons.confirm.on('click',function(){r.events.onConfirm()})}unbind(){this.elements.modal.box.buttons.cancel.unbind('click'),this.elements.modal.box.buttons.confirm.unbind('click')}show(r=null){let l=this,d=function(){};d=Object(s.j)(r)?r:this.events.afterShow,r=d,this.isVisible=!0,this.elements.modal.container.fadeIn(l.config.fadeDuration,r)}hide(r=null){let l=this,d=function(){};d=Object(s.j)(r)?r:this.events.afterHide,r=d,this.isVisible=!1,this.elements.modal.container.fadeOut(l.config.fadeDuration,r)}getElements(){return this.elements}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(13),r=a(19),l=a(5),d=a(3),p=a(2),c=a(4),m=a(12);t.a=class{constructor(g,f,_){return this.itemType=g,this.itemCode=f,this.itemId=_,this.item=UncannyAutomator.recipe.items[_],this.createItemSentence(g,f,_)}createItemSentence(g,f,_){let h=Object(s.g)(g,f);this.globalItem=h;let b;b=this.item.isMissing?this.item.sentence:Object(s.g)(this.item.itemType,this.item.itemCode).sentence,b=Object(s.n)(b,UncannyAutomator.recipe.items[this.itemId].meta),this.item.isMissing||b.elements.token.on('click',function(){let C=n(this).data('tokenid'),V=Object(s.d)('optionGroup',{itemID:_,groupID:C});new r.a(_,C)});let v=n('<div/>',{'class':'item-title__describe-container'}),y=n('<div/>',{'class':'item-status'});v.append(b.html.addClass('item-title__describe'));var x=new l.a('checkbox',{color:'green',align:'right',toggle:{on:UncannyAutomator.i18n.status.live,off:UncannyAutomator.i18n.status.draft},currentValue:UncannyAutomator.recipe.items[_].isLive});let T=x.getFormElement();return y.append(T),v.append(y),this.item.isMissing||T.on('automator:field:change',function(){let C=x.getValue();var V=!0;if(C){let w=Object(c.c)(_);V=w.isValid}if(x.startLoadingAnimation(),V){let w=C?'publish':'draft';if(!C&&UncannyAutomator.recipe.isLive){let I=new o.a({title:UncannyAutomator.i18n.confirmationModal.title,warning:Object(s.q)(UncannyAutomator.i18n.confirmationModal.statusWarning,'<strong>','</strong>'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});I.setEvents({afterSetEvents:function(){I.show()},onConfirm:function(){let j=I.getElements(),S=j.modal.box.buttons.confirm;S.addClass('btn--loading').prop('disabled',!0),x.startLoadingAnimation(),Object(s.r)('change_post_status',{post_ID:_,post_status:w},function(){I.destroy(),new d.a,new p.a,new m.a,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)},function(){x.stopLoadingAnimation(),x.setValue(!C,!1)})},onCancel:function(){I.destroy(),x.setValue(!C,!1),x.stopLoadingAnimation()},afterHide:function(){I.destroy()}})}else Object(s.r)('change_post_status',{post_ID:_,post_status:w},function(){new d.a,new p.a,new m.a},function(){x.stopLoadingAnimation(),x.setValue(!C,!1)})}else setTimeout(function(){x.stopLoadingAnimation(),x.setValue(!1,!1)},1e3)}),v}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(6),r=a(3),l=a(2),d=a(8);t.a=class{constructor(c){this.itemType=c,this.shouldCreateMetaboxFooter()&&this.createFooter()}shouldCreateMetaboxFooter(){let c=!1;if('trigger'==this.itemType){let m=Object(s.m)('get',{filter:{itemType:'trigger'}}),u=!Object(s.k)(m);!u&&Object(s.j)(UncannyAutomator.wp)&&UncannyAutomator.wp||(c=!0)}if('action'==this.itemType){let m=Object(s.m)('get',{filter:{itemType:'action'}}),u=!Object(s.k)(m);u&&(c=!0)}return c}createFooter(){let c=n('<div/>',{'class':'metabox__footer'}),m=n('<div/>',{'class':'btn btn--secondary'});if(c.append(m),'trigger'==this.itemType&&(m.text(UncannyAutomator.i18n.trigger.addAnother),!Object(s.j)(UncannyAutomator.wp)||!UncannyAutomator.wp)){m.addClass('btn--disabled');let g=this.createProNotice();c.append(g)}'action'==this.itemType&&m.text(UncannyAutomator.i18n.action.addAnother),('trigger'==this.itemType&&Object(s.j)(UncannyAutomator.wp)&&UncannyAutomator.wp||'action'==this.itemType)&&m.on('click',()=>{new o.a(this.itemType)});let u=Object(s.d)('metabox',{type:this.itemType});u.append(c)}createProNotice(){let c=n('<div/>',{'class':'description'}).text(UncannyAutomator.i18n.proOnly.warning+' '),m=n('<a/>',{href:Object(s.s)('https://automatorplugin.com/uncanny-automator-pro-coming-soon/?utm_source=%s&utm_medium=%s&utm_content=%s',['uncanny_automator_lite','pro_only','add_trigger_button']),target:'_blank'}).text(UncannyAutomator.i18n.learnMore);return c.append(m),c}}}).call(t,a(0))},function(e,t,a){e.exports=a(17)},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var n=a(1),s=a(11),o=a(3),r=a(2),l=a(24),d=a(25),p=a(26),c=a.n(p),m=a(27),u=a.n(m),g=a(28),f=a.n(g),_=a(29),h=a.n(_);Object(n.o)('create',{allRecipes:UncannyAutomator.recipes_object}),delete UncannyAutomator.recipes_object,new s.a,new o.a,new r.a,new l.a,new d.a},function(e,t,a){var n;!function(){'use strict';function s(c){return r(l(c),arguments)}function o(c,m){return s.apply(null,[c].concat(m||[]))}function r(c,m){var f,h,b,v,y,x,T,C,V,u=1,g=c.length,_='';for(h=0;h<g;h++)if('string'==typeof c[h])_+=c[h];else if(Array.isArray(c[h])){if(v=c[h],v[2])for(f=m[u],b=0;b<v[2].length;b++){if(!f.hasOwnProperty(v[2][b]))throw new Error(s('[sprintf] property "%s" does not exist',v[2][b]));f=f[v[2][b]]}else f=v[1]?m[v[1]]:m[u++];if(d.not_type.test(v[8])&&d.not_primitive.test(v[8])&&f instanceof Function&&(f=f()),d.numeric_arg.test(v[8])&&'number'!=typeof f&&isNaN(f))throw new TypeError(s('[sprintf] expecting number but found %T',f));switch(d.number.test(v[8])&&(C=0<=f),v[8]){case'b':f=parseInt(f,10).toString(2);break;case'c':f=String.fromCharCode(parseInt(f,10));break;case'd':case'i':f=parseInt(f,10);break;case'j':f=JSON.stringify(f,null,v[6]?parseInt(v[6]):0);break;case'e':f=v[7]?parseFloat(f).toExponential(v[7]):parseFloat(f).toExponential();break;case'f':f=v[7]?parseFloat(f).toFixed(v[7]):parseFloat(f);break;case'g':f=v[7]?+f.toPrecision(v[7])+'':parseFloat(f);break;case'o':f=(parseInt(f,10)>>>0).toString(8);break;case's':f+='',f=v[7]?f.substring(0,v[7]):f;break;case't':f=!!f+'',f=v[7]?f.substring(0,v[7]):f;break;case'T':f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=v[7]?f.substring(0,v[7]):f;break;case'u':f=parseInt(f,10)>>>0;break;case'v':f=f.valueOf(),f=v[7]?f.substring(0,v[7]):f;break;case'x':f=(parseInt(f,10)>>>0).toString(16);break;case'X':f=(parseInt(f,10)>>>0).toString(16).toUpperCase();}d.json.test(v[8])?_+=f:(d.number.test(v[8])&&(!C||v[3])?(V=C?'+':'-',f=f.toString().replace(d.sign,'')):V='',x=v[4]?'0'===v[4]?'0':v[4].charAt(1):' ',T=v[6]-(V+f).length,y=v[6]?0<T?x.repeat(T):'':'',_+=v[5]?V+f+y:'0'===x?V+y+f:y+V+f)}return _}function l(c){if(p[c])return p[c];for(var u,m=c,g=[],f=0;m;){if(null!==(u=d.text.exec(m)))g.push(u[0]);else if(null!==(u=d.modulo.exec(m)))g.push('%');else if(null!==(u=d.placeholder.exec(m))){if(u[2]){f|=1;var _=[],h=u[2],b=[];if(null!==(b=d.key.exec(h))){for(_.push(b[1]);''!==(h=h.substring(b[0].length));)if(null!==(b=d.key_access.exec(h)))_.push(b[1]);else if(null!==(b=d.index_access.exec(h)))_.push(b[1]);else throw new SyntaxError('[sprintf] failed to parse named argument key');}else throw new SyntaxError('[sprintf] failed to parse named argument key');u[2]=_}else f|=2;if(3==f)throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported');g.push(u)}else throw new SyntaxError('[sprintf] unexpected placeholder');m=m.substring(u[0].length)}return p[c]=g}var d={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},p=Object.create(null);t.sprintf=s,t.vsprintf=o,'undefined'!=typeof window&&(window.sprintf=s,window.vsprintf=o,n=function(){return{sprintf:s,vsprintf:o}}.call(t,a,t,e),!(n!==void 0&&(e.exports=n)))}()},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(4),r=a(3),l=a(2);t.a=class{constructor(p,c){this.itemId=p,this.optionId=c,this.item=UncannyAutomator.recipe.items[p],this.fields=this.item.options[this.optionId].fields,this.create(),this.initTinyMCE()}create(){let p=Object(s.d)('item',{id:this.itemId}).contentContainer,c=n('<div/>',{'class':'item-options'}),m=this.createButtons(),u=this.createFields();this.fieldsContainer=u,c.append(u),c.append(m),p.html(c)}createFields(){let p=n('<div/>',{'class':'item-options__group'});return n.each(this.fields,(c,m)=>{m.createFormElement(),p.append(m.getFormElement());let u=m.getAttributes().fieldType;'textarea'!==u&&m.getField().on('keyup',g=>{13==g.keyCode&&this.saveButton.trigger('click')})}),p}createButtons(){let p=n('<div/>',{'class':'item-options__submit-buttons'}),c=n('<div/>',{'class':'btn btn--primary'}),m=n('<div/>',{'class':'btn btn--secondary'}).text(UncannyAutomator.i18n.cancel);return'trigger'==this.item.itemType&&c.text(UncannyAutomator.i18n.trigger.save),'action'==this.item.itemType&&c.text(UncannyAutomator.i18n.action.save),'closure'==this.item.itemType&&c.text(UncannyAutomator.i18n.save),this.saveButton=c,p.append(c),p.append(m),c.on('click',()=>{let u=Object(o.d)(this.fieldsContainer);if(u.isValid){c.addClass('btn--loading btn--disabled');let g=this.itemId,f=this.optionId,_=this.getOptionValue();Object(s.r)('update',{itemId:g,optionCode:f,optionValue:_},()=>{'trigger'==this.item.itemType&&new r.a,('action'==this.item.itemType||'closure'==this.item.itemType)&&new l.a})}}),m.on('click',()=>{'trigger'==this.item.itemType&&new r.a,('action'==this.item.itemType||'closure'==this.item.itemType)&&new l.a}),p}initTinyMCE(){n.each(this.fields,(p,c)=>{c.initTinyMCE()})}getOptionValue(){let p={},c=!1;return n.each(this.fields,(m,u)=>{let g=u.getAttributes().optionCode,f=u.getValue();'select'==u.getAttributes().fieldType&&(c=!0,p[Object(s.s)('%s_readable',[g])]=u.getReadableValue()),p[g]=f}),c||1!=Object.keys(p).length||(p=p[Object.keys(p)[0]]),p}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(6);t.a=class{constructor(l){let d=n('<div/>',{'class':'item item--start'}),p=n('<div/>',{'class':'item-icon'}),c=n('<div/>',{'class':'item-title clear'}),m=n('<div/>',{'class':'btn btn--secondary btn--small'});c.append(m),d.append(p),d.append(c);let u=Object(s.d)('metabox',{type:l});u.append(d),'trigger'==l&&m.text(UncannyAutomator.i18n.trigger.add),'action'==l&&m.text(UncannyAutomator.i18n.action.add),m.on('click',()=>new o.a(l))}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(7),r=a(9),l=a(10),d=a(14),p=a(2),c=a(5);t.a=class{constructor(){this.elements={$metabox:Object(s.d)('metabox',{type:'action'})},n.each(UncannyAutomator.closures,(u,g)=>this.createClosure(g))}createClosure(u){let g=!1,f=n('<div/>',{'class':'metabox__footer'}),_={label:u.select_option_name,formElementClass:'form-element--nomargin'},h=this.getClosureByCodeFromItemsObject(u.code);Object(s.j)(h)&&(g=!0,_.currentValue=!0,_.itemid=h.id);let b=new c.a('checkbox',_),v=b.getFormElement();v.on('change',function(){let x=b.getValue();b.startLoadingAnimation(),x?Object(s.r)('add',{recipePostID:UncannyAutomator.recipe.id,action:'add-new-closure',item_code:u.code},function(){new p.a}):Object(s.r)('delete',{ID:h.id},function(){new p.a})}),f.append(v);let y=n('<div/>',{'class':'uo-toggle uo-toggle--show'});if(g){y.addClass('uo-toggle--show');let x=n('<div/>',{'class':'item item--closure item--margintop','data-id':h.id}),T=this.createHeader(UncannyAutomator.recipe.items[h.id].integrationCode,'closure',u.code,h.id);x.append(T);let C=n('<div/>',{'class':'item__content'});x.append(C),y.append(x)}f.append(y),this.elements.$metabox.append(f)}createHeader(u,g,f,_){let h=n('<div/>'),b=n('<div/>',{'class':'item-title clear'}),v=new o.a(g,f,_);h.append(v);let y=new r.a(u);h.append(y);let x=new l.a(u);b.append(x);let T=new d.a(g,f,_);return b.append(T),h.append(b),h}getClosureByCodeFromItemsObject(u){let g;return n.each(UncannyAutomator.recipe.items,function(f,_){_.itemCode==u&&(g=_)}),g}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1),o=a(6),r=a(7),l=a(9),d=a(10),p=a(3),c=a(2);t.a=class{constructor(u,g,f){this.itemType=u,this.integrationId=g,this.$currentItem=f,this.create()}create(){let u=n('<div/>',{'class':'item'});this.$item=u,u.append(this.createHeader()),u.append(this.createTaskSelector()),this.$currentItem.replaceWith(u)}createHeader(){let u=n('<div/>'),g=n('<div/>',{'class':'item-title clear'}),f=n('<div/>',{'class':'item-title__describe'}),_=n('<div/>',{'class':'item-title__non-editable'});'trigger'==this.itemType&&_.text(UncannyAutomator.i18n.trigger.select),'action'==this.itemType&&_.text(UncannyAutomator.i18n.action.select);let h=new r.a;u.append(h);let b=new l.a(this.integrationId);u.append(b);let v=new d.a(this.integrationId);return g.append(v),f.append(_),g.append(f),u.append(g),u}createTaskSelector(){let u,g;'trigger'==this.itemType&&(u=UncannyAutomator.i18n.trigger.search,g=UncannyAutomator.triggers),'action'==this.itemType&&(u=UncannyAutomator.i18n.action.search,g=UncannyAutomator.actions);let f=n('<div/>',{'class':'item__content'}),_=n('<div/>',{'class':'item-options item-options--nopadding item-options--noborder'}),h=n('<div/>',{'class':'form-element'}),b=n('<div/>',{'class':'item__task-selector'}),v=n('<div/>',{'class':'item-task-selector__search'}),y=n('<input/>',{'class':'item-task-selector__search-input',type:'text',placeholder:u});v.append(y),b.append(v);let x=n('<div/>',{'class':'item-task-selector__options'}),T=[],C=[];n.each(g,(w,I)=>{I.integration==this.integrationId&&C.push(I)}),g=C,n.each(g,(w,I)=>{let j=n('<div/>',{'class':'item-task-selector__option'}),S=Object(s.q)(I.select_option_name,'<span class="item-task-selector__option-variable">','</span>');j.append(S),x.append(j),T.push(j),j.on('click',()=>{b.addClass('item__task-selector--loading'),j.addClass('item-task-selector__option--loading');let L;'trigger'==this.itemType&&(L='add-new-trigger'),'action'==this.itemType&&(L='add-new-action');let D={};n.each(I.options,(A,E)=>{Object(s.j)(E.default_value)&&(D[E.option_code]=E.default_value)}),Object(s.r)('add',{recipePostID:UncannyAutomator.recipe.id,action:L,item_code:I.code,default_meta:n.extend({},D,{integration_name:UncannyAutomator.integrations[this.integrationId].name,sentence:I.sentence})},()=>{'trigger'==this.itemType&&new p.a,'action'==this.itemType&&new c.a},A=>{!1==A.success&&new p.a})})}),T=n(T).map(function(){return this.get()});let V=n('<div/>',{'class':'item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide'});return V.text(UncannyAutomator.i18n.noResults),x.append(V),b.append(x),h.append(b),_.append(h),_.append(this.createCancelButton()),f.append(_),y.on('input',function(){let w=y.val();T.removeClass('item-task-selector__option--show item-task-selector__option--hide');let I=!0;Object(s.k)(w)||(I=!1,T.each(function(){let j=n(this),S=j.text().toLowerCase().replace(/\s+/,'');w.toLowerCase().replace(/\s+/,''),-1===S.search(w)?j.addClass('item-task-selector__option--hide'):(j.addClass('item-task-selector__option--show'),I=!0)})),V.removeClass('item-task-selector__option--hide item-task-selector__option--show'),I?V.addClass('item-task-selector__option--hide'):V.addClass('item-task-selector__option--show')}),f}createCancelButton(){let u=n('<div/>',{'class':'btn btn--secondary'}).text(UncannyAutomator.i18n.cancel);return u.on('click',()=>{new o.a(this.itemType,this.$item)}),u}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(r,l,d){this.itemType=r,this.noticeType=l,this.noticeMessage=d,this.create()}create(){let r=Object(s.d)('metabox',{type:this.itemType}),l=this.createNotice();r.append(l)}createNotice(){let r=n('<div/>',{'class':'metabox__notice'});return Object(s.j)(this.noticeType)&&r.addClass(Object(s.s)('metabox__notice--%s',[this.noticeType])),r.html(this.noticeMessage),r}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(){this.build()}build(){let r=n('<div/>',{'class':'uap-report-bug'});if(this.showAgain()){r.addClass('uap-report-bug--open');let m=n('<div/>',{'class':'uap-report-bug__overlay'}),u=n('<div/>',{'class':'uap-report-bug-circle'}),g=n('<div/>',{'class':'uap-report-bug-circle__container'}),f=n('<div/>',{'class':'uap-report-bug-circle__text'});f.text(Object(s.s)(UncannyAutomator.i18n.reportBug.message,['Uncanny Automator'])),f.appendTo(g);let _=n('<div/>',{'class':'uap-report-bug-circle__dont-show'}),h=n('<label/>',{'class':'uap-report-bug-circle-checkbox'}),b=n('<span/>',{'class':'uap-report-bug-circle__span'});b.text(UncannyAutomator.i18n.reportBug.dontShowAgain),b.appendTo(h);let v=n('<input/>',{'class':'uap-report-bug-circle-checkbox__input',type:'checkbox'}),y=n('<div/>',{'class':'uap-report-bug-circle-checkbox__render'});y.prependTo(h),v.prependTo(h),h.appendTo(_),_.appendTo(g);let x=n('<div/>',{'class':'uap-report-bug-circle__footer'}),T=n('<div/>',{'class':'uap-report-bug-circle__btn'});T.text(UncannyAutomator.i18n.reportBug.gotIt),T.appendTo(x),x.appendTo(g),g.appendTo(u),u.appendTo(m),m.appendTo(r),this.bind(T,v,m,r)}let l,d;Object(s.j)(UncannyAutomator.wp)&&UncannyAutomator.wp?(l=Object(s.s)('Uncanny Automator %s %s',['Pro',UncannyAutomator.version]),d=Object(s.s)('uncanny_automator_%s',['pro'])):(l=Object(s.s)('Uncanny Automator %s %s',['Lite',UncannyAutomator.version]),d=Object(s.s)('uncanny_automator_%s',['lite']));let p=n('<a/>',{'class':'uap-report-bug__btn','uap-tooltip':UncannyAutomator.i18n.reportBug.title,'uap-flow':'left',href:Object(s.s)('https://automatorplugin.com/feedback/?version=%s&utm_source=%s&utm_medium=%s',[l,d,'send_feedback']),target:'_blank'}),c=n('<span/>',{'class':'uap-report-bug__icon'});p.append(c),p.appendTo(r),n('body').append(r)}bind(r,l,d,p){r.on('click',function(){l.is(':checked')&&(localStorage.uapReportBugWelcome='hide'),d.fadeOut(150),p.removeClass('uap-report-bug--open')})}showAgain(){let r=!0;return localStorage.uapReportBugWelcome&&'hide'==localStorage.uapReportBugWelcome&&(r=!1),r}}}).call(t,a(0))},function(e,t,a){'use strict';(function(n){var s=a(1);t.a=class{constructor(){this.elements={container:n('#titlediv'),input:n('#titlediv #title'),status:{}},this.createStatus(),this.bindChanges(),this.notSavedAlert()}createStatus(){let r=n('<div/>',{'class':'uap-title-status'}),l=n('<div/>',{'class':'uap'}),d=n('<div/>',{'class':'uo-status uo-status--saving'}),p=n('<span/>',{'class':'uo-status-icon uo-icon uo-icon--loading uo-icon--rotate'}),c=n('<span/>',{'class':'uo-status__text'}).text(UncannyAutomator.i18n.title.saving);d.append(p),d.append(c),this.elements.status.saving=d;let m=n('<div/>',{'class':'uo-status uo-status--saved'}),u=n('<span/>',{'class':'uo-status-icon uo-icon uo-icon--check'}),g=n('<span/>',{'class':'uo-status__text'}).text(UncannyAutomator.i18n.saved);m.append(u),m.append(g),this.elements.status.saved=m,l.append(d),l.append(m),r.append(l),this.elements.container.append(r)}setStatusSaving(){this.elements.status.saving.stop().fadeIn(150)}setStatusSaved(){this.elements.status.saving.stop().fadeOut(150),this.elements.status.saved.stop().fadeIn(150,()=>{setTimeout(()=>{this.elements.status.saved.fadeOut(150)},3e3)})}bindChanges(){let r;this.elements.input.on('input',()=>{clearTimeout(r),r=setTimeout(()=>{this.setStatusSaving(),this.updateTitle()},1500)})}getTitle(){return this.elements.input.val()}updateTitle(){Object(s.r)('change_post_title',{post_ID:UncannyAutomator.recipe.id,post_title:this.getTitle()},()=>{this.setStatusSaved()},()=>{setTimeout(this.updateTitle(),1e3)})}notSavedAlert(){n(document).ready(()=>{n(window).off('beforeunload.edit-post')})}}}).call(t,a(0))},function(e){e.exports='uncannyowl-automator.svg'},function(e){e.exports='uncannyowl-automator.ttf'},function(e){e.exports='uncannyowl-automator.woff'},function(){}]);