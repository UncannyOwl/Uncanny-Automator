{"version":3,"file":"bundle.min.js","mappings":"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,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,KACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,IAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV,EAAU,IACV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","sources":["webpack://automator-recipe-creator/./node_modules/@wordpress/i18n/build-module/sprintf.js","webpack://automator-recipe-creator/./node_modules/@tannin/postfix/index.js","webpack://automator-recipe-creator/./node_modules/@tannin/evaluate/index.js","webpack://automator-recipe-creator/./node_modules/tannin/index.js","webpack://automator-recipe-creator/./node_modules/@tannin/plural-forms/index.js","webpack://automator-recipe-creator/./node_modules/@tannin/compile/index.js","webpack://automator-recipe-creator/./node_modules/@wordpress/i18n/build-module/create-i18n.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/validateNamespace.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/validateHookName.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createAddHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createRemoveHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createHasHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createRunHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createCurrentHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createDoingHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createDidHook.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/createHooks.js","webpack://automator-recipe-creator/./node_modules/@wordpress/hooks/build-module/index.js","webpack://automator-recipe-creator/./node_modules/@wordpress/i18n/build-module/default-i18n.js","webpack://automator-recipe-creator/./src/js/common/markdown.js","webpack://automator-recipe-creator/./src/js/common/modal.js","webpack://automator-recipe-creator/./src/js/item/utilities/flag-items-with-visible-id.js","webpack://automator-recipe-creator/./src/js/field/group.js","webpack://automator-recipe-creator/./src/js/field/repeater.js","webpack://automator-recipe-creator/./src/js/recipe/type-selector/index.js","webpack://automator-recipe-creator/./src/js/common/utilities.js","webpack://automator-recipe-creator/./src/js/config/valid-data/recipe-types.js","webpack://automator-recipe-creator/./src/js/config/valid-data/field-types.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/types/options.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/l10n/default.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/utils/index.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/utils/dom.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/utils/formatting.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/utils/dates.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/index.js","webpack://automator-recipe-creator/./src/js/tokens/token-selector.js","webpack://automator-recipe-creator/./src/js/field/index.js","webpack://automator-recipe-creator/./src/js/field/utilities/sanitize-attributes.js","webpack://automator-recipe-creator/./src/js/integrations/utilities/get-integration-by-code.js","webpack://automator-recipe-creator/./src/js/integrations/utilities/get-integration-icon-url.js","webpack://automator-recipe-creator/./src/js/integrations/utilities/get-integration-name.js","webpack://automator-recipe-creator/./src/js/integrations/utilities/get-integrations.js","webpack://automator-recipe-creator/./src/js/item/action-menu.js","webpack://automator-recipe-creator/./node_modules/sortablejs/modular/sortable.esm.js","webpack://automator-recipe-creator/./src/js/item/sortability/make-sortable/index.js","webpack://automator-recipe-creator/./src/js/user-selector/user-selector.js","webpack://automator-recipe-creator/./src/js/item/item-initial-action.js","webpack://automator-recipe-creator/./src/js/item/closures.js","webpack://automator-recipe-creator/./src/js/item/conditions/conditions-block/index.js","webpack://automator-recipe-creator/./src/js/item/conditions/render.js","webpack://automator-recipe-creator/./src/js/item/actions.js","webpack://automator-recipe-creator/./src/js/item/actions/utilities/get-actions/index.js","webpack://automator-recipe-creator/./src/js/item/actions/utilities/get-actions-that-run-before/index.js","webpack://automator-recipe-creator/./src/js/item/conditions/condition.js","webpack://automator-recipe-creator/./src/js/item/conditions/conditions-group.js","webpack://automator-recipe-creator/./src/js/recipe/utilities/is-everyone-recipe-without-user-data/index.js","webpack://automator-recipe-creator/./node_modules/lit-html/directives/unsafe-html.js","webpack://automator-recipe-creator/./src/js/user-selector/utilities/prompt-set-data-dialog/index.js","webpack://automator-recipe-creator/./src/js/item/conditions/modal-list/index.js","webpack://automator-recipe-creator/./node_modules/lit-html/directives/private-async-helpers.js","webpack://automator-recipe-creator/./node_modules/lit-html/directives/until.js","webpack://automator-recipe-creator/./src/js/item/conditions/modal-options/index.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/add-conditions-to-integrations.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/can-action-have-filter-button.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/can-manage-conditions.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/condition-post-data-has-fields.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/flag-actions-with-conditions.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-actions-with-conditions.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-and-save-condition-fields.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-condition-by-id.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-condition-post-data.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-conditions-block-node.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-conditions-by-integration.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/get-conditions-group-by-id.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/parse-conditions-in-meta.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/recipe-has-conditions.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/sanitize-conditions-for-meta.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/update-condition-post-data.js","webpack://automator-recipe-creator/./src/js/item/conditions/utilities/update-remote-conditions-meta.js","webpack://automator-recipe-creator/./src/js/item/integration-icon.js","webpack://automator-recipe-creator/./src/js/item/integration-name.js","webpack://automator-recipe-creator/./src/js/item/items-list.js","webpack://automator-recipe-creator/./src/js/item/integrations-grid.js","webpack://automator-recipe-creator/./src/js/item/options.js","webpack://automator-recipe-creator/./src/js/item/schedule/utilities/can-manage-schedule.js","webpack://automator-recipe-creator/./src/js/item/schedule/utilities/convert-date-to-sortable-integer.js","webpack://automator-recipe-creator/./src/js/item/schedule/utilities/convert-delay-to-seconds.js","webpack://automator-recipe-creator/./src/js/item/schedule/utilities/flag-actions-scheduled.js","webpack://automator-recipe-creator/./src/js/item/sentence.js","webpack://automator-recipe-creator/./src/js/item/sortability/utilities/get-actions-order.js","webpack://automator-recipe-creator/./src/js/item/sortability/utilities/should-be-sortable.js","webpack://automator-recipe-creator/./src/js/item/sortability/utilities/flag-actions-sortable.js","webpack://automator-recipe-creator/./src/js/item/triggers.js","webpack://automator-recipe-creator/./src/js/metabox/footer.js","webpack://automator-recipe-creator/./src/js/item/button-schedule.js","webpack://automator-recipe-creator/./src/js/metabox/items.js","webpack://automator-recipe-creator/./src/js/publish/publish.js","webpack://automator-recipe-creator/./src/js/recipe/notices.js","webpack://automator-recipe-creator/./src/js/tokens/index.js","webpack://automator-recipe-creator/./src/js/utilities/is-automator-pro-active.js","webpack://automator-recipe-creator/./src/js/utilities/parse-dynamic-sentence/index.js","webpack://automator-recipe-creator/./src/js/validation/validation.js","webpack://automator-recipe-creator/./src/js/integrations/components/integration-icon/web-component-style.scss","webpack://automator-recipe-creator/./src/js/item/conditions/components/condition-add-button/web-component-style.scss","webpack://automator-recipe-creator/./src/js/item/conditions/components/condition-pill/web-component-style.scss","webpack://automator-recipe-creator/./src/js/item/triggers/components/and-or-selector/web-component-style.scss","webpack://automator-recipe-creator/./src/js/user-selector/components/set-data-dialog/web-component-style.scss","webpack://automator-recipe-creator/./node_modules/css-loader/dist/runtime/api.js","webpack://automator-recipe-creator/./node_modules/css-loader/dist/runtime/noSourceMaps.js","webpack://automator-recipe-creator/./node_modules/flatpickr/dist/esm/utils/polyfills.js","webpack://automator-recipe-creator/./node_modules/html5sortable/dist/html5sortable.cjs.js","webpack://automator-recipe-creator/./node_modules/memize/index.js","webpack://automator-recipe-creator/./node_modules/select2/dist/js/select2.js","webpack://automator-recipe-creator/./node_modules/sprintf-js/src/sprintf.js","webpack://automator-recipe-creator/./src/js/integrations/components/integration-icon/web-component-style.scss?2d4c","webpack://automator-recipe-creator/./src/js/item/conditions/components/condition-add-button/web-component-style.scss?9514","webpack://automator-recipe-creator/./src/js/item/conditions/components/condition-pill/web-component-style.scss?8763","webpack://automator-recipe-creator/./src/js/item/triggers/components/and-or-selector/web-component-style.scss?cd19","webpack://automator-recipe-creator/./src/js/user-selector/components/set-data-dialog/web-component-style.scss?2c26","webpack://automator-recipe-creator/external var \"jQuery\"","webpack://automator-recipe-creator/./node_modules/lit-html/async-directive.js","webpack://automator-recipe-creator/./node_modules/lit-html/directive-helpers.js","webpack://automator-recipe-creator/./node_modules/lit-html/directive.js","webpack://automator-recipe-creator/./node_modules/lit-html/lit-html.js","webpack://automator-recipe-creator/./node_modules/lit-html/directives/ref.js","webpack://automator-recipe-creator/./node_modules/lit-html/directives/repeat.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/css-tag.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/reactive-element.js","webpack://automator-recipe-creator/./node_modules/lit-element/lit-element.js","webpack://automator-recipe-creator/webpack/bootstrap","webpack://automator-recipe-creator/webpack/runtime/compat get default export","webpack://automator-recipe-creator/webpack/runtime/define property getters","webpack://automator-recipe-creator/webpack/runtime/hasOwnProperty shorthand","webpack://automator-recipe-creator/webpack/runtime/make namespace object","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/decorators/custom-element.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/decorators/property.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/decorators/state.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/decorators/query.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/decorators/base.js","webpack://automator-recipe-creator/./node_modules/@lit/reactive-element/decorators/query-assigned-elements.js","webpack://automator-recipe-creator/./node_modules/lit-html/directives/if-defined.js","webpack://automator-recipe-creator/./src/js/integrations/components/integration-icon/index.js","webpack://automator-recipe-creator/./src/js/item/triggers/components/and-or-selector/index.js","webpack://automator-recipe-creator/./src/js/item/triggers/utilities/get-triggers/index.js","webpack://automator-recipe-creator/./src/js/item/conditions/components/condition-add-button/index.js","webpack://automator-recipe-creator/./src/js/item/conditions/components/condition-pill/index.js","webpack://automator-recipe-creator/./src/js/user-selector/components/set-data-dialog/index.js","webpack://automator-recipe-creator/./src/js/send-feedback/send-feedback.js","webpack://automator-recipe-creator/./src/js/recipe/title/index.js","webpack://automator-recipe-creator/./src/js/taxonomies/categories.js","webpack://automator-recipe-creator/./src/js/taxonomies/tags.js","webpack://automator-recipe-creator/./src/js/taxonomies/taxonomies.js","webpack://automator-recipe-creator/./src/index.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport memoize from 'memize';\nimport sprintfjs from 'sprintf-js';\n/**\n * Log to console, once per message; or more precisely, per referentially equal\n * argument set. Because Jed throws errors, we log these to the console instead\n * to avoid crashing the application.\n *\n * @param {...*} args Arguments to pass to `console.error`\n */\n\nconst logErrorOnce = memoize(console.error); // eslint-disable-line no-console\n\n/**\n * Returns a formatted string. If an error occurs in applying the format, the\n * original format string is returned.\n *\n * @param {string} format The format of the string to generate.\n * @param {...*}   args   Arguments to apply to the format.\n *\n * @see https://www.npmjs.com/package/sprintf-js\n *\n * @return {string} The formatted string.\n */\n\nexport function sprintf(format) {\n  try {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    return sprintfjs.sprintf(format, ...args);\n  } catch (error) {\n    if (error instanceof Error) {\n      logErrorOnce('sprintf error: \\n\\n' + error.toString());\n    }\n\n    return format;\n  }\n}\n//# sourceMappingURL=sprintf.js.map","var PRECEDENCE, OPENERS, TERMINATORS, PATTERN;\n\n/**\n * Operator precedence mapping.\n *\n * @type {Object}\n */\nPRECEDENCE = {\n\t'(': 9,\n\t'!': 8,\n\t'*': 7,\n\t'/': 7,\n\t'%': 7,\n\t'+': 6,\n\t'-': 6,\n\t'<': 5,\n\t'<=': 5,\n\t'>': 5,\n\t'>=': 5,\n\t'==': 4,\n\t'!=': 4,\n\t'&&': 3,\n\t'||': 2,\n\t'?': 1,\n\t'?:': 1,\n};\n\n/**\n * Characters which signal pair opening, to be terminated by terminators.\n *\n * @type {string[]}\n */\nOPENERS = [ '(', '?' ];\n\n/**\n * Characters which signal pair termination, the value an array with the\n * opener as its first member. The second member is an optional operator\n * replacement to push to the stack.\n *\n * @type {string[]}\n */\nTERMINATORS = {\n\t')': [ '(' ],\n\t':': [ '?', '?:' ],\n};\n\n/**\n * Pattern matching operators and openers.\n *\n * @type {RegExp}\n */\nPATTERN = /<=|>=|==|!=|&&|\\|\\||\\?:|\\(|!|\\*|\\/|%|\\+|-|<|>|\\?|\\)|:/;\n\n/**\n * Given a C expression, returns the equivalent postfix (Reverse Polish)\n * notation terms as an array.\n *\n * If a postfix string is desired, simply `.join( ' ' )` the result.\n *\n * @example\n *\n * ```js\n * import postfix from '@tannin/postfix';\n *\n * postfix( 'n > 1' );\n * //  [ 'n', '1', '>' ]\n * ```\n *\n * @param {string} expression C expression.\n *\n * @return {string[]} Postfix terms.\n */\nexport default function postfix( expression ) {\n\tvar terms = [],\n\t\tstack = [],\n\t\tmatch, operator, term, element;\n\n\twhile ( ( match = expression.match( PATTERN ) ) ) {\n\t\toperator = match[ 0 ];\n\n\t\t// Term is the string preceding the operator match. It may contain\n\t\t// whitespace, and may be empty (if operator is at beginning).\n\t\tterm = expression.substr( 0, match.index ).trim();\n\t\tif ( term ) {\n\t\t\tterms.push( term );\n\t\t}\n\n\t\twhile ( ( element = stack.pop() ) ) {\n\t\t\tif ( TERMINATORS[ operator ] ) {\n\t\t\t\tif ( TERMINATORS[ operator ][ 0 ] === element ) {\n\t\t\t\t\t// Substitution works here under assumption that because\n\t\t\t\t\t// the assigned operator will no longer be a terminator, it\n\t\t\t\t\t// will be pushed to the stack during the condition below.\n\t\t\t\t\toperator = TERMINATORS[ operator ][ 1 ] || operator;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if ( OPENERS.indexOf( element ) >= 0 || PRECEDENCE[ element ] < PRECEDENCE[ operator ] ) {\n\t\t\t\t// Push to stack if either an opener or when pop reveals an\n\t\t\t\t// element of lower precedence.\n\t\t\t\tstack.push( element );\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// For each popped from stack, push to terms.\n\t\t\tterms.push( element );\n\t\t}\n\n\t\tif ( ! TERMINATORS[ operator ] ) {\n\t\t\tstack.push( operator );\n\t\t}\n\n\t\t// Slice matched fragment from expression to continue match.\n\t\texpression = expression.substr( match.index + operator.length );\n\t}\n\n\t// Push remainder of operand, if exists, to terms.\n\texpression = expression.trim();\n\tif ( expression ) {\n\t\tterms.push( expression );\n\t}\n\n\t// Pop remaining items from stack into terms.\n\treturn terms.concat( stack.reverse() );\n}\n","/**\n * Operator callback functions.\n *\n * @type {Object}\n */\nvar OPERATORS = {\n\t'!': function( a ) {\n\t\treturn ! a;\n\t},\n\t'*': function( a, b ) {\n\t\treturn a * b;\n\t},\n\t'/': function( a, b ) {\n\t\treturn a / b;\n\t},\n\t'%': function( a, b ) {\n\t\treturn a % b;\n\t},\n\t'+': function( a, b ) {\n\t\treturn a + b;\n\t},\n\t'-': function( a, b ) {\n\t\treturn a - b;\n\t},\n\t'<': function( a, b ) {\n\t\treturn a < b;\n\t},\n\t'<=': function( a, b ) {\n\t\treturn a <= b;\n\t},\n\t'>': function( a, b ) {\n\t\treturn a > b;\n\t},\n\t'>=': function( a, b ) {\n\t\treturn a >= b;\n\t},\n\t'==': function( a, b ) {\n\t\treturn a === b;\n\t},\n\t'!=': function( a, b ) {\n\t\treturn a !== b;\n\t},\n\t'&&': function( a, b ) {\n\t\treturn a && b;\n\t},\n\t'||': function( a, b ) {\n\t\treturn a || b;\n\t},\n\t'?:': function( a, b, c ) {\n\t\tif ( a ) {\n\t\t\tthrow b;\n\t\t}\n\n\t\treturn c;\n\t},\n};\n\n/**\n * Given an array of postfix terms and operand variables, returns the result of\n * the postfix evaluation.\n *\n * @example\n *\n * ```js\n * import evaluate from '@tannin/evaluate';\n *\n * // 3 + 4 * 5 / 6  '3 4 5 * 6 / +'\n * const terms = [ '3', '4', '5', '*', '6', '/', '+' ];\n *\n * evaluate( terms, {} );\n * //  6.333333333333334\n * ```\n *\n * @param {string[]} postfix   Postfix terms.\n * @param {Object}   variables Operand variables.\n *\n * @return {*} Result of evaluation.\n */\nexport default function evaluate( postfix, variables ) {\n\tvar stack = [],\n\t\ti, j, args, getOperatorResult, term, value;\n\n\tfor ( i = 0; i < postfix.length; i++ ) {\n\t\tterm = postfix[ i ];\n\n\t\tgetOperatorResult = OPERATORS[ term ];\n\t\tif ( getOperatorResult ) {\n\t\t\t// Pop from stack by number of function arguments.\n\t\t\tj = getOperatorResult.length;\n\t\t\targs = Array( j );\n\t\t\twhile ( j-- ) {\n\t\t\t\targs[ j ] = stack.pop();\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tvalue = getOperatorResult.apply( null, args );\n\t\t\t} catch ( earlyReturn ) {\n\t\t\t\treturn earlyReturn;\n\t\t\t}\n\t\t} else if ( variables.hasOwnProperty( term ) ) {\n\t\t\tvalue = variables[ term ];\n\t\t} else {\n\t\t\tvalue = +term;\n\t\t}\n\n\t\tstack.push( value );\n\t}\n\n\treturn stack[ 0 ];\n}\n","import pluralForms from '@tannin/plural-forms';\n\n/**\n * Tannin constructor options.\n *\n * @typedef {Object} TanninOptions\n *\n * @property {string}   [contextDelimiter] Joiner in string lookup with context.\n * @property {Function} [onMissingKey]     Callback to invoke when key missing.\n */\n\n/**\n * Domain metadata.\n *\n * @typedef {Object} TanninDomainMetadata\n *\n * @property {string}            [domain]       Domain name.\n * @property {string}            [lang]         Language code.\n * @property {(string|Function)} [plural_forms] Plural forms expression or\n *                                              function evaluator.\n */\n\n/**\n * Domain translation pair respectively representing the singular and plural\n * translation.\n *\n * @typedef {[string,string]} TanninTranslation\n */\n\n/**\n * Locale data domain. The key is used as reference for lookup, the value an\n * array of two string entries respectively representing the singular and plural\n * translation.\n *\n * @typedef {{[key:string]:TanninDomainMetadata|TanninTranslation,'':TanninDomainMetadata|TanninTranslation}} TanninLocaleDomain\n */\n\n/**\n * Jed-formatted locale data.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @typedef {{[domain:string]:TanninLocaleDomain}} TanninLocaleData\n */\n\n/**\n * Default Tannin constructor options.\n *\n * @type {TanninOptions}\n */\nvar DEFAULT_OPTIONS = {\n\tcontextDelimiter: '\\u0004',\n\tonMissingKey: null,\n};\n\n/**\n * Given a specific locale data's config `plural_forms` value, returns the\n * expression.\n *\n * @example\n *\n * ```\n * getPluralExpression( 'nplurals=2; plural=(n != 1);' ) === '(n != 1)'\n * ```\n *\n * @param {string} pf Locale data plural forms.\n *\n * @return {string} Plural forms expression.\n */\nfunction getPluralExpression( pf ) {\n\tvar parts, i, part;\n\n\tparts = pf.split( ';' );\n\n\tfor ( i = 0; i < parts.length; i++ ) {\n\t\tpart = parts[ i ].trim();\n\t\tif ( part.indexOf( 'plural=' ) === 0 ) {\n\t\t\treturn part.substr( 7 );\n\t\t}\n\t}\n}\n\n/**\n * Tannin constructor.\n *\n * @class\n *\n * @param {TanninLocaleData} data      Jed-formatted locale data.\n * @param {TanninOptions}    [options] Tannin options.\n */\nexport default function Tannin( data, options ) {\n\tvar key;\n\n\t/**\n\t * Jed-formatted locale data.\n\t *\n\t * @name Tannin#data\n\t * @type {TanninLocaleData}\n\t */\n\tthis.data = data;\n\n\t/**\n\t * Plural forms function cache, keyed by plural forms string.\n\t *\n\t * @name Tannin#pluralForms\n\t * @type {Object<string,Function>}\n\t */\n\tthis.pluralForms = {};\n\n\t/**\n\t * Effective options for instance, including defaults.\n\t *\n\t * @name Tannin#options\n\t * @type {TanninOptions}\n\t */\n\tthis.options = {};\n\n\tfor ( key in DEFAULT_OPTIONS ) {\n\t\tthis.options[ key ] = options !== undefined && key in options\n\t\t\t? options[ key ]\n\t\t\t: DEFAULT_OPTIONS[ key ];\n\t}\n}\n\n/**\n * Returns the plural form index for the given domain and value.\n *\n * @param {string} domain Domain on which to calculate plural form.\n * @param {number} n      Value for which plural form is to be calculated.\n *\n * @return {number} Plural form index.\n */\nTannin.prototype.getPluralForm = function( domain, n ) {\n\tvar getPluralForm = this.pluralForms[ domain ],\n\t\tconfig, plural, pf;\n\n\tif ( ! getPluralForm ) {\n\t\tconfig = this.data[ domain ][ '' ];\n\n\t\tpf = (\n\t\t\tconfig[ 'Plural-Forms' ] ||\n\t\t\tconfig[ 'plural-forms' ] ||\n\t\t\t// Ignore reason: As known, there's no way to document the empty\n\t\t\t// string property on a key to guarantee this as metadata.\n\t\t\t// @ts-ignore\n\t\t\tconfig.plural_forms\n\t\t);\n\n\t\tif ( typeof pf !== 'function' ) {\n\t\t\tplural = getPluralExpression(\n\t\t\t\tconfig[ 'Plural-Forms' ] ||\n\t\t\t\tconfig[ 'plural-forms' ] ||\n\t\t\t\t// Ignore reason: As known, there's no way to document the empty\n\t\t\t\t// string property on a key to guarantee this as metadata.\n\t\t\t\t// @ts-ignore\n\t\t\t\tconfig.plural_forms\n\t\t\t);\n\n\t\t\tpf = pluralForms( plural );\n\t\t}\n\n\t\tgetPluralForm = this.pluralForms[ domain ] = pf;\n\t}\n\n\treturn getPluralForm( n );\n};\n\n/**\n * Translate a string.\n *\n * @param {string}      domain   Translation domain.\n * @param {string|void} context  Context distinguishing terms of the same name.\n * @param {string}      singular Primary key for translation lookup.\n * @param {string=}     plural   Fallback value used for non-zero plural\n *                               form index.\n * @param {number=}     n        Value to use in calculating plural form.\n *\n * @return {string} Translated string.\n */\nTannin.prototype.dcnpgettext = function( domain, context, singular, plural, n ) {\n\tvar index, key, entry;\n\n\tif ( n === undefined ) {\n\t\t// Default to singular.\n\t\tindex = 0;\n\t} else {\n\t\t// Find index by evaluating plural form for value.\n\t\tindex = this.getPluralForm( domain, n );\n\t}\n\n\tkey = singular;\n\n\t// If provided, context is prepended to key with delimiter.\n\tif ( context ) {\n\t\tkey = context + this.options.contextDelimiter + singular;\n\t}\n\n\tentry = this.data[ domain ][ key ];\n\n\t// Verify not only that entry exists, but that the intended index is within\n\t// range and non-empty.\n\tif ( entry && entry[ index ] ) {\n\t\treturn entry[ index ];\n\t}\n\n\tif ( this.options.onMissingKey ) {\n\t\tthis.options.onMissingKey( singular, domain );\n\t}\n\n\t// If entry not found, fall back to singular vs. plural with zero index\n\t// representing the singular value.\n\treturn index === 0 ? singular : plural;\n};\n","import compile from '@tannin/compile';\n\n/**\n * Given a C expression, returns a function which, when called with a value,\n * evaluates the result with the value assumed to be the \"n\" variable of the\n * expression. The result will be coerced to its numeric equivalent.\n *\n * @param {string} expression C expression.\n *\n * @return {Function} Evaluator function.\n */\nexport default function pluralForms( expression ) {\n\tvar evaluate = compile( expression );\n\n\treturn function( n ) {\n\t\treturn +evaluate( { n: n } );\n\t};\n}\n","import postfix from '@tannin/postfix';\nimport evaluate from '@tannin/evaluate';\n\n/**\n * Given a C expression, returns a function which can be called to evaluate its\n * result.\n *\n * @example\n *\n * ```js\n * import compile from '@tannin/compile';\n *\n * const evaluate = compile( 'n > 1' );\n *\n * evaluate( { n: 2 } );\n * //  true\n * ```\n *\n * @param {string} expression C expression.\n *\n * @return {(variables?:{[variable:string]:*})=>*} Compiled evaluator.\n */\nexport default function compile( expression ) {\n\tvar terms = postfix( expression );\n\n\treturn function( variables ) {\n\t\treturn evaluate( terms, variables );\n\t};\n}\n","/**\n * External dependencies\n */\nimport Tannin from 'tannin';\n/**\n * @typedef {Record<string,any>} LocaleData\n */\n\n/**\n * Default locale data to use for Tannin domain when not otherwise provided.\n * Assumes an English plural forms expression.\n *\n * @type {LocaleData}\n */\n\nconst DEFAULT_LOCALE_DATA = {\n  '': {\n    /** @param {number} n */\n    plural_forms(n) {\n      return n === 1 ? 0 : 1;\n    }\n\n  }\n};\n/*\n * Regular expression that matches i18n hooks like `i18n.gettext`, `i18n.ngettext`,\n * `i18n.gettext_domain` or `i18n.ngettext_with_context` or `i18n.has_translation`.\n */\n\nconst I18N_HOOK_REGEXP = /^i18n\\.(n?gettext|has_translation)(_|$)/;\n/**\n * @typedef {(domain?: string) => LocaleData} GetLocaleData\n *\n * Returns locale data by domain in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/**\n * @typedef {(data?: LocaleData, domain?: string) => void} SetLocaleData\n *\n * Merges locale data into the Tannin instance by domain. Note that this\n * function will overwrite the domain configuration. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/**\n * @typedef {(data?: LocaleData, domain?: string) => void} AddLocaleData\n *\n * Merges locale data into the Tannin instance by domain. Note that this\n * function will also merge the domain configuration. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/**\n * @typedef {(data?: LocaleData, domain?: string) => void} ResetLocaleData\n *\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n */\n\n/** @typedef {() => void} SubscribeCallback */\n\n/** @typedef {() => void} UnsubscribeCallback */\n\n/**\n * @typedef {(callback: SubscribeCallback) => UnsubscribeCallback} Subscribe\n *\n * Subscribes to changes of locale data\n */\n\n/**\n * @typedef {(domain?: string) => string} GetFilterDomain\n * Retrieve the domain to use when calling domain-specific filters.\n */\n\n/**\n * @typedef {(text: string, domain?: string) => string} __\n *\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n */\n\n/**\n * @typedef {(text: string, context: string, domain?: string) => string} _x\n *\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n */\n\n/**\n * @typedef {(single: string, plural: string, number: number, domain?: string) => string} _n\n *\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n */\n\n/**\n * @typedef {(single: string, plural: string, number: number, context: string, domain?: string) => string} _nx\n *\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n */\n\n/**\n * @typedef {() => boolean} IsRtl\n *\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n */\n\n/**\n * @typedef {(single: string, context?: string, domain?: string) => boolean} HasTranslation\n *\n * Check if there is a translation for a given string in singular form.\n */\n\n/** @typedef {import('@wordpress/hooks').Hooks} Hooks */\n\n/**\n * An i18n instance\n *\n * @typedef I18n\n * @property {GetLocaleData}   getLocaleData   Returns locale data by domain in a Jed-formatted JSON object shape.\n * @property {SetLocaleData}   setLocaleData   Merges locale data into the Tannin instance by domain. Note that this\n *                                             function will overwrite the domain configuration. Accepts data in a\n *                                             Jed-formatted JSON object shape.\n * @property {AddLocaleData}   addLocaleData   Merges locale data into the Tannin instance by domain. Note that this\n *                                             function will also merge the domain configuration. Accepts data in a\n *                                             Jed-formatted JSON object shape.\n * @property {ResetLocaleData} resetLocaleData Resets all current Tannin instance locale data and sets the specified\n *                                             locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n * @property {Subscribe}       subscribe       Subscribes to changes of Tannin locale data.\n * @property {__}              __              Retrieve the translation of text.\n * @property {_x}              _x              Retrieve translated string with gettext context.\n * @property {_n}              _n              Translates and retrieves the singular or plural form based on the supplied\n *                                             number.\n * @property {_nx}             _nx             Translates and retrieves the singular or plural form based on the supplied\n *                                             number, with gettext context.\n * @property {IsRtl}           isRTL           Check if current locale is RTL.\n * @property {HasTranslation}  hasTranslation  Check if there is a translation for a given string.\n */\n\n/**\n * Create an i18n instance\n *\n * @param {LocaleData} [initialData]   Locale data configuration.\n * @param {string}     [initialDomain] Domain for which configuration applies.\n * @param {Hooks}      [hooks]         Hooks implementation.\n *\n * @return {I18n} I18n instance.\n */\n\nexport const createI18n = (initialData, initialDomain, hooks) => {\n  /**\n   * The underlying instance of Tannin to which exported functions interface.\n   *\n   * @type {Tannin}\n   */\n  const tannin = new Tannin({});\n  const listeners = new Set();\n\n  const notifyListeners = () => {\n    listeners.forEach(listener => listener());\n  };\n  /**\n   * Subscribe to changes of locale data.\n   *\n   * @param {SubscribeCallback} callback Subscription callback.\n   * @return {UnsubscribeCallback} Unsubscribe callback.\n   */\n\n\n  const subscribe = callback => {\n    listeners.add(callback);\n    return () => listeners.delete(callback);\n  };\n  /** @type {GetLocaleData} */\n\n\n  const getLocaleData = function () {\n    let domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    return tannin.data[domain];\n  };\n  /**\n   * @param {LocaleData} [data]\n   * @param {string}     [domain]\n   */\n\n\n  const doSetLocaleData = function (data) {\n    var _tannin$data$domain;\n\n    let domain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n    tannin.data[domain] = { ...tannin.data[domain],\n      ...data\n    }; // Populate default domain configuration (supported locale date which omits\n    // a plural forms expression).\n\n    tannin.data[domain][''] = { ...DEFAULT_LOCALE_DATA[''],\n      ...((_tannin$data$domain = tannin.data[domain]) === null || _tannin$data$domain === void 0 ? void 0 : _tannin$data$domain[''])\n    }; // Clean up cached plural forms functions cache as it might be updated.\n\n    delete tannin.pluralForms[domain];\n  };\n  /** @type {SetLocaleData} */\n\n\n  const setLocaleData = (data, domain) => {\n    doSetLocaleData(data, domain);\n    notifyListeners();\n  };\n  /** @type {AddLocaleData} */\n\n\n  const addLocaleData = function (data) {\n    var _tannin$data$domain2;\n\n    let domain = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n    tannin.data[domain] = { ...tannin.data[domain],\n      ...data,\n      // Populate default domain configuration (supported locale date which omits\n      // a plural forms expression).\n      '': { ...DEFAULT_LOCALE_DATA[''],\n        ...((_tannin$data$domain2 = tannin.data[domain]) === null || _tannin$data$domain2 === void 0 ? void 0 : _tannin$data$domain2['']),\n        ...(data === null || data === void 0 ? void 0 : data[''])\n      }\n    }; // Clean up cached plural forms functions cache as it might be updated.\n\n    delete tannin.pluralForms[domain];\n    notifyListeners();\n  };\n  /** @type {ResetLocaleData} */\n\n\n  const resetLocaleData = (data, domain) => {\n    // Reset all current Tannin locale data.\n    tannin.data = {}; // Reset cached plural forms functions cache.\n\n    tannin.pluralForms = {};\n    setLocaleData(data, domain);\n  };\n  /**\n   * Wrapper for Tannin's `dcnpgettext`. Populates default locale data if not\n   * otherwise previously assigned.\n   *\n   * @param {string|undefined} domain   Domain to retrieve the translated text.\n   * @param {string|undefined} context  Context information for the translators.\n   * @param {string}           single   Text to translate if non-plural. Used as\n   *                                    fallback return value on a caught error.\n   * @param {string}           [plural] The text to be used if the number is\n   *                                    plural.\n   * @param {number}           [number] The number to compare against to use\n   *                                    either the singular or plural form.\n   *\n   * @return {string} The translated string.\n   */\n\n\n  const dcnpgettext = function () {\n    let domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    let context = arguments.length > 1 ? arguments[1] : undefined;\n    let single = arguments.length > 2 ? arguments[2] : undefined;\n    let plural = arguments.length > 3 ? arguments[3] : undefined;\n    let number = arguments.length > 4 ? arguments[4] : undefined;\n\n    if (!tannin.data[domain]) {\n      // Use `doSetLocaleData` to set silently, without notifying listeners.\n      doSetLocaleData(undefined, domain);\n    }\n\n    return tannin.dcnpgettext(domain, context, single, plural, number);\n  };\n  /** @type {GetFilterDomain} */\n\n\n  const getFilterDomain = function () {\n    let domain = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    return domain;\n  };\n  /** @type {__} */\n\n\n  const __ = (text, domain) => {\n    let translation = dcnpgettext(domain, undefined, text);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters text with its translation.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} text        Text to translate.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.gettext', translation, text, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.gettext_' + getFilterDomain(domain), translation, text, domain)\n    );\n  };\n  /** @type {_x} */\n\n\n  const _x = (text, context, domain) => {\n    let translation = dcnpgettext(domain, context, text);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters text with its translation based on context information.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} text        Text to translate.\n     * @param {string} context     Context information for the translators.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.gettext_with_context', translation, text, context, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.gettext_with_context_' + getFilterDomain(domain), translation, text, context, domain)\n    );\n  };\n  /** @type {_n} */\n\n\n  const _n = (single, plural, number, domain) => {\n    let translation = dcnpgettext(domain, undefined, single, plural, number);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters the singular or plural form of a string.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} single      The text to be used if the number is singular.\n     * @param {string} plural      The text to be used if the number is plural.\n     * @param {string} number      The number to compare against to use either the singular or plural form.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.ngettext', translation, single, plural, number, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.ngettext_' + getFilterDomain(domain), translation, single, plural, number, domain)\n    );\n  };\n  /** @type {_nx} */\n\n\n  const _nx = (single, plural, number, context, domain) => {\n    let translation = dcnpgettext(domain, context, single, plural, number);\n\n    if (!hooks) {\n      return translation;\n    }\n    /**\n     * Filters the singular or plural form of a string with gettext context.\n     *\n     * @param {string} translation Translated text.\n     * @param {string} single      The text to be used if the number is singular.\n     * @param {string} plural      The text to be used if the number is plural.\n     * @param {string} number      The number to compare against to use either the singular or plural form.\n     * @param {string} context     Context information for the translators.\n     * @param {string} domain      Text domain. Unique identifier for retrieving translated strings.\n     */\n\n\n    translation =\n    /** @type {string} */\n\n    /** @type {*} */\n    hooks.applyFilters('i18n.ngettext_with_context', translation, single, plural, number, context, domain);\n    return (\n      /** @type {string} */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.ngettext_with_context_' + getFilterDomain(domain), translation, single, plural, number, context, domain)\n    );\n  };\n  /** @type {IsRtl} */\n\n\n  const isRTL = () => {\n    return 'rtl' === _x('ltr', 'text direction');\n  };\n  /** @type {HasTranslation} */\n\n\n  const hasTranslation = (single, context, domain) => {\n    var _tannin$data, _tannin$data2;\n\n    const key = context ? context + '\\u0004' + single : single;\n    let result = !!((_tannin$data = tannin.data) !== null && _tannin$data !== void 0 && (_tannin$data2 = _tannin$data[domain !== null && domain !== void 0 ? domain : 'default']) !== null && _tannin$data2 !== void 0 && _tannin$data2[key]);\n\n    if (hooks) {\n      /**\n       * Filters the presence of a translation in the locale data.\n       *\n       * @param {boolean} hasTranslation Whether the translation is present or not..\n       * @param {string}  single         The singular form of the translated text (used as key in locale data)\n       * @param {string}  context        Context information for the translators.\n       * @param {string}  domain         Text domain. Unique identifier for retrieving translated strings.\n       */\n      result =\n      /** @type { boolean } */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.has_translation', result, single, context, domain);\n      result =\n      /** @type { boolean } */\n\n      /** @type {*} */\n      hooks.applyFilters('i18n.has_translation_' + getFilterDomain(domain), result, single, context, domain);\n    }\n\n    return result;\n  };\n\n  if (initialData) {\n    setLocaleData(initialData, initialDomain);\n  }\n\n  if (hooks) {\n    /**\n     * @param {string} hookName\n     */\n    const onHookAddedOrRemoved = hookName => {\n      if (I18N_HOOK_REGEXP.test(hookName)) {\n        notifyListeners();\n      }\n    };\n\n    hooks.addAction('hookAdded', 'core/i18n', onHookAddedOrRemoved);\n    hooks.addAction('hookRemoved', 'core/i18n', onHookAddedOrRemoved);\n  }\n\n  return {\n    getLocaleData,\n    setLocaleData,\n    addLocaleData,\n    resetLocaleData,\n    subscribe,\n    __,\n    _x,\n    _n,\n    _nx,\n    isRTL,\n    hasTranslation\n  };\n};\n//# sourceMappingURL=create-i18n.js.map","/**\n * Validate a namespace string.\n *\n * @param {string} namespace The namespace to validate - should take the form\n *                           `vendor/plugin/function`.\n *\n * @return {boolean} Whether the namespace is valid.\n */\nfunction validateNamespace(namespace) {\n  if ('string' !== typeof namespace || '' === namespace) {\n    // eslint-disable-next-line no-console\n    console.error('The namespace must be a non-empty string.');\n    return false;\n  }\n\n  if (!/^[a-zA-Z][a-zA-Z0-9_.\\-\\/]*$/.test(namespace)) {\n    // eslint-disable-next-line no-console\n    console.error('The namespace can only contain numbers, letters, dashes, periods, underscores and slashes.');\n    return false;\n  }\n\n  return true;\n}\n\nexport default validateNamespace;\n//# sourceMappingURL=validateNamespace.js.map","/**\n * Validate a hookName string.\n *\n * @param {string} hookName The hook name to validate. Should be a non empty string containing\n *                          only numbers, letters, dashes, periods and underscores. Also,\n *                          the hook name cannot begin with `__`.\n *\n * @return {boolean} Whether the hook name is valid.\n */\nfunction validateHookName(hookName) {\n  if ('string' !== typeof hookName || '' === hookName) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name must be a non-empty string.');\n    return false;\n  }\n\n  if (/^__/.test(hookName)) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name cannot begin with `__`.');\n    return false;\n  }\n\n  if (!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(hookName)) {\n    // eslint-disable-next-line no-console\n    console.error('The hook name can only contain numbers, letters, dashes, periods and underscores.');\n    return false;\n  }\n\n  return true;\n}\n\nexport default validateHookName;\n//# sourceMappingURL=validateHookName.js.map","/**\n * Internal dependencies\n */\nimport validateNamespace from './validateNamespace.js';\nimport validateHookName from './validateHookName.js';\n/**\n * @callback AddHook\n *\n * Adds the hook to the appropriate hooks container.\n *\n * @param {string}               hookName      Name of hook to add\n * @param {string}               namespace     The unique namespace identifying the callback in the form `vendor/plugin/function`.\n * @param {import('.').Callback} callback      Function to call when the hook is run\n * @param {number}               [priority=10] Priority of this hook\n */\n\n/**\n * Returns a function which, when invoked, will add a hook.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {AddHook} Function that adds a new hook.\n */\n\nfunction createAddHook(hooks, storeKey) {\n  return function addHook(hookName, namespace, callback) {\n    let priority = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 10;\n    const hooksStore = hooks[storeKey];\n\n    if (!validateHookName(hookName)) {\n      return;\n    }\n\n    if (!validateNamespace(namespace)) {\n      return;\n    }\n\n    if ('function' !== typeof callback) {\n      // eslint-disable-next-line no-console\n      console.error('The hook callback must be a function.');\n      return;\n    } // Validate numeric priority\n\n\n    if ('number' !== typeof priority) {\n      // eslint-disable-next-line no-console\n      console.error('If specified, the hook priority must be a number.');\n      return;\n    }\n\n    const handler = {\n      callback,\n      priority,\n      namespace\n    };\n\n    if (hooksStore[hookName]) {\n      // Find the correct insert index of the new hook.\n      const handlers = hooksStore[hookName].handlers;\n      /** @type {number} */\n\n      let i;\n\n      for (i = handlers.length; i > 0; i--) {\n        if (priority >= handlers[i - 1].priority) {\n          break;\n        }\n      }\n\n      if (i === handlers.length) {\n        // If append, operate via direct assignment.\n        handlers[i] = handler;\n      } else {\n        // Otherwise, insert before index via splice.\n        handlers.splice(i, 0, handler);\n      } // We may also be currently executing this hook.  If the callback\n      // we're adding would come after the current callback, there's no\n      // problem; otherwise we need to increase the execution index of\n      // any other runs by 1 to account for the added element.\n\n\n      hooksStore.__current.forEach(hookInfo => {\n        if (hookInfo.name === hookName && hookInfo.currentIndex >= i) {\n          hookInfo.currentIndex++;\n        }\n      });\n    } else {\n      // This is the first hook of its type.\n      hooksStore[hookName] = {\n        handlers: [handler],\n        runs: 0\n      };\n    }\n\n    if (hookName !== 'hookAdded') {\n      hooks.doAction('hookAdded', hookName, namespace, callback, priority);\n    }\n  };\n}\n\nexport default createAddHook;\n//# sourceMappingURL=createAddHook.js.map","/**\n * Internal dependencies\n */\nimport validateNamespace from './validateNamespace.js';\nimport validateHookName from './validateHookName.js';\n/**\n * @callback RemoveHook\n * Removes the specified callback (or all callbacks) from the hook with a given hookName\n * and namespace.\n *\n * @param {string} hookName  The name of the hook to modify.\n * @param {string} namespace The unique namespace identifying the callback in the\n *                           form `vendor/plugin/function`.\n *\n * @return {number | undefined} The number of callbacks removed.\n */\n\n/**\n * Returns a function which, when invoked, will remove a specified hook or all\n * hooks by the given name.\n *\n * @param {import('.').Hooks}    hooks             Hooks instance.\n * @param {import('.').StoreKey} storeKey\n * @param {boolean}              [removeAll=false] Whether to remove all callbacks for a hookName,\n *                                                 without regard to namespace. Used to create\n *                                                 `removeAll*` functions.\n *\n * @return {RemoveHook} Function that removes hooks.\n */\n\nfunction createRemoveHook(hooks, storeKey) {\n  let removeAll = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return function removeHook(hookName, namespace) {\n    const hooksStore = hooks[storeKey];\n\n    if (!validateHookName(hookName)) {\n      return;\n    }\n\n    if (!removeAll && !validateNamespace(namespace)) {\n      return;\n    } // Bail if no hooks exist by this name.\n\n\n    if (!hooksStore[hookName]) {\n      return 0;\n    }\n\n    let handlersRemoved = 0;\n\n    if (removeAll) {\n      handlersRemoved = hooksStore[hookName].handlers.length;\n      hooksStore[hookName] = {\n        runs: hooksStore[hookName].runs,\n        handlers: []\n      };\n    } else {\n      // Try to find the specified callback to remove.\n      const handlers = hooksStore[hookName].handlers;\n\n      for (let i = handlers.length - 1; i >= 0; i--) {\n        if (handlers[i].namespace === namespace) {\n          handlers.splice(i, 1);\n          handlersRemoved++; // This callback may also be part of a hook that is\n          // currently executing.  If the callback we're removing\n          // comes after the current callback, there's no problem;\n          // otherwise we need to decrease the execution index of any\n          // other runs by 1 to account for the removed element.\n\n          hooksStore.__current.forEach(hookInfo => {\n            if (hookInfo.name === hookName && hookInfo.currentIndex >= i) {\n              hookInfo.currentIndex--;\n            }\n          });\n        }\n      }\n    }\n\n    if (hookName !== 'hookRemoved') {\n      hooks.doAction('hookRemoved', hookName, namespace);\n    }\n\n    return handlersRemoved;\n  };\n}\n\nexport default createRemoveHook;\n//# sourceMappingURL=createRemoveHook.js.map","/**\n * @callback HasHook\n *\n * Returns whether any handlers are attached for the given hookName and optional namespace.\n *\n * @param {string} hookName    The name of the hook to check for.\n * @param {string} [namespace] Optional. The unique namespace identifying the callback\n *                             in the form `vendor/plugin/function`.\n *\n * @return {boolean} Whether there are handlers that are attached to the given hook.\n */\n\n/**\n * Returns a function which, when invoked, will return whether any handlers are\n * attached to a particular hook.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {HasHook} Function that returns whether any handlers are\n *                   attached to a particular hook and optional namespace.\n */\nfunction createHasHook(hooks, storeKey) {\n  return function hasHook(hookName, namespace) {\n    const hooksStore = hooks[storeKey]; // Use the namespace if provided.\n\n    if ('undefined' !== typeof namespace) {\n      return hookName in hooksStore && hooksStore[hookName].handlers.some(hook => hook.namespace === namespace);\n    }\n\n    return hookName in hooksStore;\n  };\n}\n\nexport default createHasHook;\n//# sourceMappingURL=createHasHook.js.map","/**\n * Returns a function which, when invoked, will execute all callbacks\n * registered to a hook of the specified type, optionally returning the final\n * value of the call chain.\n *\n * @param {import('.').Hooks}    hooks                  Hooks instance.\n * @param {import('.').StoreKey} storeKey\n * @param {boolean}              [returnFirstArg=false] Whether each hook callback is expected to\n *                                                      return its first argument.\n *\n * @return {(hookName:string, ...args: unknown[]) => unknown} Function that runs hook callbacks.\n */\nfunction createRunHook(hooks, storeKey) {\n  let returnFirstArg = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return function runHooks(hookName) {\n    const hooksStore = hooks[storeKey];\n\n    if (!hooksStore[hookName]) {\n      hooksStore[hookName] = {\n        handlers: [],\n        runs: 0\n      };\n    }\n\n    hooksStore[hookName].runs++;\n    const handlers = hooksStore[hookName].handlers; // The following code is stripped from production builds.\n\n    if ('production' !== process.env.NODE_ENV) {\n      // Handle any 'all' hooks registered.\n      if ('hookAdded' !== hookName && hooksStore.all) {\n        handlers.push(...hooksStore.all.handlers);\n      }\n    }\n\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (!handlers || !handlers.length) {\n      return returnFirstArg ? args[0] : undefined;\n    }\n\n    const hookInfo = {\n      name: hookName,\n      currentIndex: 0\n    };\n\n    hooksStore.__current.push(hookInfo);\n\n    while (hookInfo.currentIndex < handlers.length) {\n      const handler = handlers[hookInfo.currentIndex];\n      const result = handler.callback.apply(null, args);\n\n      if (returnFirstArg) {\n        args[0] = result;\n      }\n\n      hookInfo.currentIndex++;\n    }\n\n    hooksStore.__current.pop();\n\n    if (returnFirstArg) {\n      return args[0];\n    }\n  };\n}\n\nexport default createRunHook;\n//# sourceMappingURL=createRunHook.js.map","/**\n * Returns a function which, when invoked, will return the name of the\n * currently running hook, or `null` if no hook of the given type is currently\n * running.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {() => string | null} Function that returns the current hook name or null.\n */\nfunction createCurrentHook(hooks, storeKey) {\n  return function currentHook() {\n    var _hooksStore$__current, _hooksStore$__current2;\n\n    const hooksStore = hooks[storeKey];\n    return (_hooksStore$__current = (_hooksStore$__current2 = hooksStore.__current[hooksStore.__current.length - 1]) === null || _hooksStore$__current2 === void 0 ? void 0 : _hooksStore$__current2.name) !== null && _hooksStore$__current !== void 0 ? _hooksStore$__current : null;\n  };\n}\n\nexport default createCurrentHook;\n//# sourceMappingURL=createCurrentHook.js.map","/**\n * @callback DoingHook\n * Returns whether a hook is currently being executed.\n *\n * @param {string} [hookName] The name of the hook to check for.  If\n *                            omitted, will check for any hook being executed.\n *\n * @return {boolean} Whether the hook is being executed.\n */\n\n/**\n * Returns a function which, when invoked, will return whether a hook is\n * currently being executed.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {DoingHook} Function that returns whether a hook is currently\n *                     being executed.\n */\nfunction createDoingHook(hooks, storeKey) {\n  return function doingHook(hookName) {\n    const hooksStore = hooks[storeKey]; // If the hookName was not passed, check for any current hook.\n\n    if ('undefined' === typeof hookName) {\n      return 'undefined' !== typeof hooksStore.__current[0];\n    } // Return the __current hook.\n\n\n    return hooksStore.__current[0] ? hookName === hooksStore.__current[0].name : false;\n  };\n}\n\nexport default createDoingHook;\n//# sourceMappingURL=createDoingHook.js.map","/**\n * Internal dependencies\n */\nimport validateHookName from './validateHookName.js';\n/**\n * @callback DidHook\n *\n * Returns the number of times an action has been fired.\n *\n * @param {string} hookName The hook name to check.\n *\n * @return {number | undefined} The number of times the hook has run.\n */\n\n/**\n * Returns a function which, when invoked, will return the number of times a\n * hook has been called.\n *\n * @param {import('.').Hooks}    hooks    Hooks instance.\n * @param {import('.').StoreKey} storeKey\n *\n * @return {DidHook} Function that returns a hook's call count.\n */\n\nfunction createDidHook(hooks, storeKey) {\n  return function didHook(hookName) {\n    const hooksStore = hooks[storeKey];\n\n    if (!validateHookName(hookName)) {\n      return;\n    }\n\n    return hooksStore[hookName] && hooksStore[hookName].runs ? hooksStore[hookName].runs : 0;\n  };\n}\n\nexport default createDidHook;\n//# sourceMappingURL=createDidHook.js.map","/**\n * Internal dependencies\n */\nimport createAddHook from './createAddHook';\nimport createRemoveHook from './createRemoveHook';\nimport createHasHook from './createHasHook';\nimport createRunHook from './createRunHook';\nimport createCurrentHook from './createCurrentHook';\nimport createDoingHook from './createDoingHook';\nimport createDidHook from './createDidHook';\n/**\n * Internal class for constructing hooks. Use `createHooks()` function\n *\n * Note, it is necessary to expose this class to make its type public.\n *\n * @private\n */\n\nexport class _Hooks {\n  constructor() {\n    /** @type {import('.').Store} actions */\n    this.actions = Object.create(null);\n    this.actions.__current = [];\n    /** @type {import('.').Store} filters */\n\n    this.filters = Object.create(null);\n    this.filters.__current = [];\n    this.addAction = createAddHook(this, 'actions');\n    this.addFilter = createAddHook(this, 'filters');\n    this.removeAction = createRemoveHook(this, 'actions');\n    this.removeFilter = createRemoveHook(this, 'filters');\n    this.hasAction = createHasHook(this, 'actions');\n    this.hasFilter = createHasHook(this, 'filters');\n    this.removeAllActions = createRemoveHook(this, 'actions', true);\n    this.removeAllFilters = createRemoveHook(this, 'filters', true);\n    this.doAction = createRunHook(this, 'actions');\n    this.applyFilters = createRunHook(this, 'filters', true);\n    this.currentAction = createCurrentHook(this, 'actions');\n    this.currentFilter = createCurrentHook(this, 'filters');\n    this.doingAction = createDoingHook(this, 'actions');\n    this.doingFilter = createDoingHook(this, 'filters');\n    this.didAction = createDidHook(this, 'actions');\n    this.didFilter = createDidHook(this, 'filters');\n  }\n\n}\n/** @typedef {_Hooks} Hooks */\n\n/**\n * Returns an instance of the hooks object.\n *\n * @return {Hooks} A Hooks instance.\n */\n\nfunction createHooks() {\n  return new _Hooks();\n}\n\nexport default createHooks;\n//# sourceMappingURL=createHooks.js.map","/**\n * Internal dependencies\n */\nimport createHooks from './createHooks';\n/** @typedef {(...args: any[])=>any} Callback */\n\n/**\n * @typedef Handler\n * @property {Callback} callback  The callback\n * @property {string}   namespace The namespace\n * @property {number}   priority  The namespace\n */\n\n/**\n * @typedef Hook\n * @property {Handler[]} handlers Array of handlers\n * @property {number}    runs     Run counter\n */\n\n/**\n * @typedef Current\n * @property {string} name         Hook name\n * @property {number} currentIndex The index\n */\n\n/**\n * @typedef {Record<string, Hook> & {__current: Current[]}} Store\n */\n\n/**\n * @typedef {'actions' | 'filters'} StoreKey\n */\n\n/**\n * @typedef {import('./createHooks').Hooks} Hooks\n */\n\nexport const defaultHooks = createHooks();\nconst {\n  addAction,\n  addFilter,\n  removeAction,\n  removeFilter,\n  hasAction,\n  hasFilter,\n  removeAllActions,\n  removeAllFilters,\n  doAction,\n  applyFilters,\n  currentAction,\n  currentFilter,\n  doingAction,\n  doingFilter,\n  didAction,\n  didFilter,\n  actions,\n  filters\n} = defaultHooks;\nexport { createHooks, addAction, addFilter, removeAction, removeFilter, hasAction, hasFilter, removeAllActions, removeAllFilters, doAction, applyFilters, currentAction, currentFilter, doingAction, doingFilter, didAction, didFilter, actions, filters };\n//# sourceMappingURL=index.js.map","/**\n * Internal dependencies\n */\nimport { createI18n } from './create-i18n';\n/**\n * WordPress dependencies\n */\n\nimport { defaultHooks } from '@wordpress/hooks';\nconst i18n = createI18n(undefined, undefined, defaultHooks);\n/**\n * Default, singleton instance of `I18n`.\n */\n\nexport default i18n;\n/*\n * Comments in this file are duplicated from ./i18n due to\n * https://github.com/WordPress/gutenberg/pull/20318#issuecomment-590837722\n */\n\n/**\n * @typedef {import('./create-i18n').LocaleData} LocaleData\n * @typedef {import('./create-i18n').SubscribeCallback} SubscribeCallback\n * @typedef {import('./create-i18n').UnsubscribeCallback} UnsubscribeCallback\n */\n\n/**\n * Returns locale data by domain in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {string} [domain] Domain for which to get the data.\n * @return {LocaleData} Locale data.\n */\n\nexport const getLocaleData = i18n.getLocaleData.bind(i18n);\n/**\n * Merges locale data into the Tannin instance by domain. Accepts data in a\n * Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData} [data]   Locale data configuration.\n * @param {string}     [domain] Domain for which configuration applies.\n */\n\nexport const setLocaleData = i18n.setLocaleData.bind(i18n);\n/**\n * Resets all current Tannin instance locale data and sets the specified\n * locale data for the domain. Accepts data in a Jed-formatted JSON object shape.\n *\n * @see http://messageformat.github.io/Jed/\n *\n * @param {LocaleData} [data]   Locale data configuration.\n * @param {string}     [domain] Domain for which configuration applies.\n */\n\nexport const resetLocaleData = i18n.resetLocaleData.bind(i18n);\n/**\n * Subscribes to changes of locale data\n *\n * @param {SubscribeCallback} callback Subscription callback\n * @return {UnsubscribeCallback} Unsubscribe callback\n */\n\nexport const subscribe = i18n.subscribe.bind(i18n);\n/**\n * Retrieve the translation of text.\n *\n * @see https://developer.wordpress.org/reference/functions/__/\n *\n * @param {string} text     Text to translate.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} Translated text.\n */\n\nexport const __ = i18n.__.bind(i18n);\n/**\n * Retrieve translated string with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_x/\n *\n * @param {string} text     Text to translate.\n * @param {string} context  Context information for the translators.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} Translated context string without pipe.\n */\n\nexport const _x = i18n._x.bind(i18n);\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number.\n *\n * @see https://developer.wordpress.org/reference/functions/_n/\n *\n * @param {string} single   The text to be used if the number is singular.\n * @param {string} plural   The text to be used if the number is plural.\n * @param {number} number   The number to compare against to use either the\n *                          singular or plural form.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} The translated singular or plural form.\n */\n\nexport const _n = i18n._n.bind(i18n);\n/**\n * Translates and retrieves the singular or plural form based on the supplied\n * number, with gettext context.\n *\n * @see https://developer.wordpress.org/reference/functions/_nx/\n *\n * @param {string} single   The text to be used if the number is singular.\n * @param {string} plural   The text to be used if the number is plural.\n * @param {number} number   The number to compare against to use either the\n *                          singular or plural form.\n * @param {string} context  Context information for the translators.\n * @param {string} [domain] Domain to retrieve the translated text.\n *\n * @return {string} The translated singular or plural form.\n */\n\nexport const _nx = i18n._nx.bind(i18n);\n/**\n * Check if current locale is RTL.\n *\n * **RTL (Right To Left)** is a locale property indicating that text is written from right to left.\n * For example, the `he` locale (for Hebrew) specifies right-to-left. Arabic (ar) is another common\n * language written RTL. The opposite of RTL, LTR (Left To Right) is used in other languages,\n * including English (`en`, `en-US`, `en-GB`, etc.), Spanish (`es`), and French (`fr`).\n *\n * @return {boolean} Whether locale is RTL.\n */\n\nexport const isRTL = i18n.isRTL.bind(i18n);\n/**\n * Check if there is a translation for a given string (in singular form).\n *\n * @param {string} single    Singular form of the string to look up.\n * @param {string} [context] Context information for the translators.\n * @param {string} [domain]  Domain to retrieve the translated text.\n * @return {boolean} Whether the translation exists or not.\n */\n\nexport const hasTranslation = i18n.hasTranslation.bind(i18n);\n//# sourceMappingURL=default-i18n.js.map","import { escapeHTML } from './utilities.js';\n\n// Import utilities\nconst {\n\tisEmpty\n} = _uo.utility;\n\n/**\n * Parses markdown content\n */\nexport default class Markdown {\n\t/**\n\t * Saves the content as a property\n\t *\n\t * @param {String} content The content\n\t */\n\tconstructor( content = '' ) {\n\t\t// Save content\n\t\tthis.content = content;\n\t}\n\n\t/**\n\t * Parses the markdown content and returns the HTML\n\t *\n\t * @return {String} The content parsed\n\t */\n\tgetHTML() {\n\t\t// Define content and escape HTML\n\t\tlet content = escapeHTML( this.content );\n\n\t\t// Parse italic and bold\n\t\tcontent = this.parseItalicsAndBold( content );\n\n\t\t// Parse anchors\n\t\tcontent = this.parseAnchors( content );\n\n\t\treturn content;\n\t}\n\n\t/**\n\t * Parses bold and italic text on the text\n\t * This method will convert:\n\t * - **text** to <strong>text</strong>\n\t * - __text__ to <strong>text</strong>\n\t * - *text* to <em>text</em>\n\t * - _text_ to <em>text</em>\n\t *\n\t * @param {String} content The content\n\t * @return {String}         The content with the bolds and italics parsed\n\t */\n\tparseItalicsAndBold( content = '' ) {\n\t\tconst regularExpressions = {\n\t\t\tdoubleUnderscores: /(^|\\s|>|\\b)__(?=\\S)([^]+?)__(?=\\b|<|\\s|$)/gm,\n\t\t\tsingleUnderscores: /(^|\\s|>|\\b)_(?=\\S)([^]+?)_(?=\\b|<|\\s|$)/gm,\n\t\t\tdoubleAsterisks: /(\\*\\*)(?=\\S)([^\\r]*?\\S[*]*)\\1/g,\n\t\t\tsingleAsterisks: /(\\*)(?=\\S)([^\\r]*?\\S)\\1/g,\n\t\t};\n\n\t\t// Underscores\n\t\t// Since we are consuming a \\s character, we need to add it\n\t\tcontent = content.replace( regularExpressions.doubleUnderscores, '$1<strong>$2</strong>' );\n\n\t\tcontent = content.replace( regularExpressions.singleUnderscores, '$1<em>$2</em>' );\n\n\t\t// Asterisks\n\t\tcontent = content.replace( regularExpressions.doubleAsterisks, '<strong>$2</strong>' );\n\n\t\tcontent = content.replace( regularExpressions.singleAsterisks, '<em>$2</em>' );\n\n\t\t// Return content\n\t\treturn content;\n\t}\n\n\t/**\n\t * Parses anchors on the text\n\t * This method will convert [link text](url \"optional title\") anchors to <a href=\"url\" title=\"optional title\">link text</a>\n\t *\n\t * @param {String} content The content\n\t * @return {String}         The content with the anchors parsed\n\t */\n\tparseAnchors( content = '' ) {\n\t\t// Create the regex\n\t\t// eslint-disable-next-line max-len\n\t\tconst regExAnchors = /(\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]\\([ \\t]*()<?(.*?(?:\\(.*?\\).*?)?)>?[ \\t]*((['\"])(.*?)\\6[ \\t]*)?\\))/g;\n\n\t\t// Create the replacer function\n\t\t/**\n\t\t * Function to replace markdown anchor matches with HTML\n\t\t *\n\t\t * @param {String} wholeMatch The whole match\n\t\t * @param {String} m1         The whole match\n\t\t * @param {String} linkText   The link text\n\t\t * @param {String} linkId     The link ID\n\t\t * @param {String} url        The link URL\n\t\t * @param {String} m5         The link title with quotes\n\t\t * @param {String} m6         The link title' quotes\n\t\t * @param {String} title      The link title\n\t\t * @return {String}            The markdown anchor converted to HTML\n\t\t */\n\t\tconst replacerFunction = ( wholeMatch, m1, linkText, linkId, url, m5, m6, title = '' ) => {\n\t\t\t// Update the whole match\n\t\t\twholeMatch = m1;\n\n\t\t\t// Convert the link ID to lowercase\n\t\t\tlinkId = linkId.toLowerCase();\n\n\t\t\t// Check if the URL is defined\n\t\t\tif ( ! url ) {\n\t\t\t\t// Check if there is a link ID\n\t\t\t\tif ( ! linkId ) {\n\t\t\t\t\t// Lower-case and turn embedded newlines into spaces\n\t\t\t\t\tlinkId = linkText.toLowerCase().replace( / ?\\n/g, ' ' );\n\t\t\t\t}\n\n\t\t\t\t// Add the link ID as hash\n\t\t\t\turl = `#${ linkId }`;\n\n\t\t\t\tif ( wholeMatch.search( /\\(\\s*\\)$/m ) > -1 ) {\n\t\t\t\t\t// Special case for explicit empty url\n\t\t\t\t\turl = '';\n\t\t\t\t} else {\n\t\t\t\t\treturn wholeMatch;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Encode URL\n\t\t\turl = encodeURI( url, '*_', false );\n\n\t\t\t// Check if we have to add the title\n\t\t\tif ( ! isEmpty( title ) ) {\n\t\t\t\t// Encode content\n\t\t\t\ttitle = title.replace( /\"/g, '&quot;' );\n\t\t\t\ttitle = encodeURI( title, '*_', false );\n\n\t\t\t\t// Add HTML format\n\t\t\t\ttitle = ` title=\"${ title }\"`;\n\t\t\t} else {\n\t\t\t\ttitle = '';\n\t\t\t}\n\n\t\t\tconst result = `\n\t\t\t\t<a href=\"${ url }\" target=\"_blank\" ${ title }>\n\t\t\t\t\t${ linkText }\n\t\t\t\t</a>\n\t\t\t`;\n\n\t\t\treturn result;\n\t\t};\n\n\t\t// Inline-style links: [link text](url \"optional title\")\n\t\tcontent = content.replace( regExAnchors, replacerFunction );\n\n\t\t// Return content\n\t\treturn content;\n\t}\n}\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\n// Import utilities\nconst { isDefined } = _uo.utility;\n\n/**\n * Creates a modal\n */\nexport default class Modal {\n\t/**\n\t * Gets/saves the required data and invokes the methods to\n\t * create the modal\n\t *\n\t * @param {Object}      content                  The content of the modal\n\t * @param {String}      content.title            The title\n\t * @param {String}      content.warning          The warning\n\t * @param {Object}      content.buttons          The buttons\n\t * @param {String}      content.buttons.cancel   The label of the cancel button\n\t * @param {String}      content.buttons.confirm  The label of the confirm button\n\t * @param {String|Node} content.content          The modal body\n\t * @param {Object}      content.events           Object with callbacks\n\t * @param {Function}    content.events.onConfirm Callback invoked when user press the confirm button\n\t * @param {Function}    content.events.onCancel  Callback invoked when user press the cancel button\n\t * @param {Function}    content.events.onShow    Callback invoked when the modal is displayed\n\t * @param {Function}    content.events.onHide    Callback invoked when the modal is hidden\n\t * @param {Object}      config                   Configuration object\n\t * @param {Integer}     config.fadeDuration      Fade animation duration when the modal is displayed or hidden\n\t * @param {String}      config.size              The size of the modal: 'small', 'medium', 'large', 'extra-large'\n\t * @param {Boolean}     config.warningFirst      True if the warning should go above the modal content\n\t * @return {undefined}\n\t */\n\tconstructor( content = {}, config = {} ) {\n\t\t// Create elements object\n\t\tthis.elements = {\n\t\t\tcontainer: null,\n\t\t\tautomatorContainer: null, // ( .uap ) This DIV is only created to avoid conflicts with other plugins\n\t\t\tmodal: {\n\t\t\t\tcontainer: null,\n\t\t\t\tbox: {\n\t\t\t\t\tcontainer: null,\n\t\t\t\t\ttitle: null,\n\t\t\t\t\twarning: null,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tcontainer: null,\n\t\t\t\t\t\tcancel: null,\n\t\t\t\t\t\tconfirm: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\t// Set container\n\t\tthis.elements.container = $( 'body' );\n\n\t\t// Set isVisible property\n\t\tthis.isVisible = false;\n\n\t\t// Define default configuration\n\t\tthis.config = $.extend(\n\t\t\ttrue,\n\t\t\t{\n\t\t\t\tfadeDuration: 150,\n\t\t\t\tsize: 'medium',\n\t\t\t\twarningFirst: false,\n\t\t\t\tcustomClass: '',\n\t\t\t\tallowContentOverflow: false\n\t\t\t},\n\t\t\tconfig\n\t\t);\n\n\t\t// Save modal box content. Add default values\n\t\tthis.content = $.extend(\n\t\t\t{},\n\t\t\t{\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel: UncannyAutomator.i18n.cancel,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcontent\n\t\t);\n\n\t\t// Create new modal box\n\t\tthis.create();\n\n\t\t// Return object\n\t\treturn this;\n\t}\n\n\t/**\n\t * Creates the modal box DOM elements\n\t *\n\t * @return {undefined}\n\t */\n\tcreate() {\n\t\tconst automatorContainer = $( '<div/>', { class: 'uap' } );\n\t\tconst modal = $( '<div/>', { class: 'modal' } );\n\t\tconst modalBox = $( '<div/>', { class: 'modal__box' } );\n\n\t\t// Check if the user wants a different modal size than the default size\n\t\tif (\n\t\t\tisDefined( this.config.size ) &&\n\t\t\t[ 'small', 'medium', 'large', 'extra-large', 'xx-large' ].includes( this.config.size )\n\t\t) {\n\t\t\t// Add the correct size class\n\t\t\tmodal.addClass( `modal--${ this.config.size }` );\n\t\t}\n\n\t\t// Check if we should allow content overflow\n\t\tif ( this.config.allowContentOverflow ){\n\t\t\tmodal.addClass( `modal--allow-content-overflow` );\n\t\t}\n\n\t\t// Check if the user wants to add a custom class\n\t\tif ( isDefined( this.config.customClass ) ) {\n\t\t\tmodal.addClass( `modal--${ this.config.customClass }` );\n\t\t}\n\n\t\t// Save elements\n\t\tthis.elements.automatorContainer = automatorContainer;\n\t\tthis.elements.modal.container = modal;\n\t\tthis.elements.modal.box.container = modalBox;\n\n\t\t// Set title\n\t\tif ( isDefined( this.content.title ) ) {\n\t\t\tconst modalTitle = $( '<div/>', { class: 'modal__title' } ).html( this.content.title );\n\t\t\tmodalBox.append( modalTitle );\n\n\t\t\t// Save element\n\t\t\tthis.elements.modal.box.title = modalTitle;\n\t\t}\n\n\t\t// Set content\n\t\tlet modalContent;\n\t\tif ( isDefined( this.content.content ) ) {\n\t\t\tmodalContent = $( '<div/>', { class: 'modal__content' } );\n\n\t\t\t// Check if the content is node element\n\t\t\ttry {\n\t\t\t\tmodalContent.append( this.content.content );\n\t\t\t} catch ( e ) {\n\t\t\t\tmodalContent.html( this.content.content );\n\t\t\t}\n\n\t\t\tmodalBox.append( modalContent );\n\n\t\t\t// Save element\n\t\t\tthis.elements.modal.box.content = modalContent;\n\t\t}\n\n\t\t// Set warning\n\t\tlet modalWarning;\n\t\tif ( isDefined( this.content.warning ) ) {\n\t\t\tmodalWarning = $( '<div/>', { class: 'modal__warning' } ).html( this.content.warning );\n\n\t\t\t// Save element\n\t\t\tthis.elements.modal.box.warning = modalWarning;\n\t\t}\n\n\t\t// Check the order of the warning\n\t\tif ( isDefined( this.config.warningFirst ) && this.config.warningFirst ) {\n\t\t\tif ( isDefined( this.content.warning ) ) {\n\t\t\t\tmodalBox.append( modalWarning );\n\t\t\t}\n\n\t\t\tif ( isDefined( this.content.content ) ) {\n\t\t\t\tmodalBox.append( modalContent );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( isDefined( this.content.content ) ) {\n\t\t\t\tmodalBox.append( modalContent );\n\t\t\t}\n\n\t\t\tif ( isDefined( this.content.warning ) ) {\n\t\t\t\tmodalBox.append( modalWarning );\n\t\t\t}\n\t\t}\n\n\t\t// Set buttons\n\t\tconst modalButtons = $( '<div/>', {\n\t\t\tclass: 'modal__buttons',\n\t\t} );\n\t\tconst cancelButton = $( '<button/>', {\n\t\t\tclass: 'uap-btn uap-btn--secondary',\n\t\t} ).html( this.content.buttons.cancel );\n\t\tmodalButtons.append( cancelButton );\n\n\t\t// Save elements\n\t\tthis.elements.modal.box.buttons.container = modalButtons;\n\t\tthis.elements.modal.box.buttons.cancel = cancelButton;\n\n\t\tif ( isDefined( this.content.buttons.confirm ) ) {\n\t\t\tconst confirmButton = $( '<button/>', {\n\t\t\t\tclass: 'uap-btn uap-btn--primary',\n\t\t\t} ).html( this.content.buttons.confirm );\n\t\t\tmodalButtons.append( confirmButton );\n\n\t\t\t// Save element\n\t\t\tthis.elements.modal.box.buttons.confirm = confirmButton;\n\t\t}\n\n\t\tmodalBox.append( modalButtons );\n\n\t\t// Append elements and add to the container\n\t\tmodal.append( modalBox );\n\t\tautomatorContainer.append( modal );\n\t\tthis.elements.container.append( automatorContainer );\n\n\t\t// Add open class to the html tag\n\t\t$( 'html' ).addClass( 'automator-modal-open' );\n\n\t\t// Bind\n\t\tthis.bind();\n\t}\n\n\t/**\n\t * Defines custom events\n\t * This adds the ability to invoke callbacks when:\n\t * - After the events are set\n\t * - After the modal is displayed\n\t * - After the modal is hidden\n\t * - When the user clicks on the confirmation button\n\t * - When the user clicks on the cancel button\n\t *\n\t * @param {Object} events Object with callbacks\n\t * @return {undefined}\n\t */\n\tsetEvents( events ) {\n\t\t// Define events\n\t\tthis.events = {\n\t\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\t\tafterSetEvents: isDefined( events.afterSetEvents ) ? events.afterSetEvents : () => {},\n\t\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\t\tafterShow: isDefined( events.afterShow ) ? events.afterShow : () => {},\n\t\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\t\tafterHide: isDefined( events.afterHide ) ? events.afterHide : () => {},\n\t\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\t\tonConfirm: isDefined( events.onConfirm ) ? events.onConfirm : () => {},\n\t\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\t\tonCancel: isDefined( events.onCancel ) ? events.onCancel : () => {},\n\t\t};\n\n\t\tif ( ! isDefined( events.onCancel ) ) {\n\t\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\t\tthis.events.onCancel = () => {\n\t\t\t\t// Default onCancel function\n\t\t\t\t// Hide modal box\n\t\t\t\tthis.hide();\n\t\t\t};\n\t\t}\n\n\t\t// Fire afterSetEvents event\n\t\tthis.events.afterSetEvents();\n\t}\n\n\t/**\n\t * Removes the modal from the DOM\n\t *\n\t * @return {undefined}\n\t */\n\tdestroy() {\n\t\tconst thisModal = this;\n\n\t\t// Unbind everything\n\t\tthis.unbind();\n\n\t\t// Check if it's visible\n\t\tif ( this.isVisible ) {\n\t\t\t// We have to hide it first\n\t\t\tthis.hide( () => {\n\t\t\t\tthisModal.elements.automatorContainer.remove();\n\t\t\t} );\n\t\t} else {\n\t\t\tthisModal.elements.automatorContainer.remove();\n\t\t}\n\n\t\t// Remove modal open class from the html tag\n\t\t$( 'html' ).removeClass( 'automator-modal-open' );\n\t}\n\n\t/**\n\t * Listens clicks to the confirm and cancel buttons\n\t *\n\t * @return {undefined}\n\t */\n\tbind() {\n\t\tconst thisModal = this;\n\n\t\t// Bind cancel button\n\t\tif ( isDefined( this.elements.modal.box.buttons.cancel ) ) {\n\t\t\tthis.elements.modal.box.buttons.cancel.on( 'click', () => {\n\t\t\t\tthisModal.events.onCancel();\n\t\t\t} );\n\t\t}\n\n\t\t// Bind confirm button\n\t\tif ( isDefined( this.elements.modal.box.buttons.confirm ) ) {\n\t\t\tthis.elements.modal.box.buttons.confirm.on( 'click', () => {\n\t\t\t\tthisModal.events.onConfirm();\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Stops listening clicks on the confirm and cancel buttons\n\t *\n\t * @return {undefined}\n\t */\n\tunbind() {\n\t\tif ( isDefined( this.elements.modal.box.buttons.cancel ) ) {\n\t\t\tthis.elements.modal.box.buttons.cancel.unbind( 'click' );\n\t\t}\n\n\t\tif ( isDefined( this.elements.modal.box.buttons.confirm ) ) {\n\t\t\tthis.elements.modal.box.buttons.confirm.unbind( 'click' );\n\t\t}\n\t}\n\n\t/**\n\t * Shows the modal\n\t *\n\t * @param {Function} callback Custom function that it's going to be\n\t *                            invoked after we show the modal\n\t * @return {undefined}\n\t */\n\tshow( callback = null ) {\n\t\tconst thisModal = this;\n\n\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\tlet event = () => {};\n\n\t\tif ( isDefined( callback ) ) {\n\t\t\tevent = callback;\n\t\t} else if ( isDefined( this.events.afterShow ) ) {\n\t\t\tevent = this.events.afterShow;\n\t\t}\n\n\t\tcallback = event;\n\n\t\t// Change is visible status\n\t\tthis.isVisible = true;\n\n\t\t// Fade in\n\t\tthis.elements.modal.container.fadeIn( thisModal.config.fadeDuration, callback );\n\t}\n\n\t/**\n\t * Hides the modal\n\t *\n\t * @param {Function} callback Custom function that it's going to be\n\t *                            invoked after we hide the modal\n\t * @return {undefined}\n\t */\n\thide( callback = null ) {\n\t\t// eslint-disable-next-line no-empty-function, require-jsdoc\n\t\tlet event = () => {};\n\n\t\tif ( isDefined( callback ) ) {\n\t\t\tevent = callback;\n\t\t} else {\n\t\t\tevent = this.events.afterHide;\n\t\t}\n\n\t\tcallback = event;\n\n\t\t// Change is visible status\n\t\tthis.isVisible = false;\n\n\t\t// Fade out\n\t\tthis.elements.modal.container.fadeOut( this.config.fadeDuration, callback );\n\n\t\t// Remove modal open class from the html tag\n\t\t$( 'html' ).removeClass( 'automator-modal-open' );\n\t}\n\n\t/**\n\t * Returns all the DOM elements related to the modal\n\t *\n\t * @return {Object} All the DOM elements created by this class\n\t */\n\tgetElements() {\n\t\treturn this.elements;\n\t}\n}\n","// Import utilities\nimport {\n\titemsObject\n} from '@builder/common/utilities';\n\n/**\n * Determines whether Automator should make the item ID visible for some items\n * This modifies UncannyAutomator.recipe.items to add the \"shouldShowItemId\" property\n *\n * @return {undefined}\n */\nconst flagItemsWithVisibleID = () => {\n\t// For now, only triggers can show IDs. Check if we should show it\n\tif ( recipeHasMultipleItemsSameIntegration() ) {\n\t\t// Iterate the items\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tObject.keys( UncannyAutomator.recipe.items ).forEach( ( itemID ) => {\n\t\t\t// Add the property\n\t\t\tUncannyAutomator.recipe.items[ itemID ].shouldShowItemId = true;\n\t\t} );\n\t}\n}\n\n/**\n * Checks if the recipe has one of more item from the same integration\n * \n * @retuns {Boolean}\n */\nconst recipeHasMultipleItemsSameIntegration = () => {\n\t// Get the items\n\tconst items = Object.values( UncannyAutomator.recipe.items );\n\n\t// If there are less than two, don't show ID\n\tif ( items.length < 2 ) {\n\t\treturn false;\n\t}\n\n\t// Get the list of integrations used in the recipe items\n\tconst integrationsInItems = [\n\t\t// Remove the duplicates using Set\n\t\t// Ex: [ 'LD', 'WC', 'LD' ] ==> [ 'LD', 'WC' ]\n\t\t...new Set(\n\t\t\t// Create an array of integration codes. Ex: [ 'LD', 'WC', 'LD' ]\n\t\t\titems.map( item => item.integrationCode )\n\t\t)\n\t];\n\n\t// Check if there is more than one item from same integration\n\t// To check this, we will check if there are more items than integrations\n\tif ( integrationsInItems.length >= items.length ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nexport default flagItemsWithVisibleID;\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport Field from './index.js';\n\nclass FieldsGroup {\n\t// eslint-disable-next-line no-unused-vars\n\tconstructor( attributes, createDOMelements = true, customValidationFunction = null ) {\n\t\t// Save attributes\n\t\tthis.setAttributes( attributes );\n\n\t\t// Create fields\n\t\tthis.createFields();\n\t}\n\n\t/**\n\t * Sets attributes. It adds properties like hasValue, hasPlaceholder, etc, automatically\n\t *\n\t * @param {Object} attributes The field attributes\n\t * @return {undefined}\n\t */\n\tsetAttributes( attributes ) {\n\t\t// Has label\n\t\tif ( ! isDefined( attributes.hasLabel ) ) {\n\t\t\tif ( ! isEmpty( attributes.label ) ) {\n\t\t\t\tattributes.hasLabel = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasLabel = false;\n\t\t\t}\n\t\t}\n\n\t\t// Has description\n\t\tif ( ! isDefined( attributes.hasDescription ) ) {\n\t\t\tif ( ! isEmpty( attributes.description ) ) {\n\t\t\t\tattributes.hasDescription = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasDescription = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.attributes = attributes;\n\t}\n\n\t/**\n\t * Create instances of Field\n\t *\n\t * @since  2.0\n\t * @return undefined\n\t */\n\n\tcreateFields() {\n\t\t// Replace fields data with Field instances\n\t\tthis.fields = this.attributes.fields.map( ( fieldData ) => {\n\t\t\t// Create Field\n\t\t\treturn new Field( fieldData.fieldType, fieldData );\n\t\t} );\n\t}\n\n\t/**\n\t * Create a jQuery DOM element with the field\n\t *\n\t * @since 0.3\n\t */\n\n\tcreateFormElement() {\n\t\t// Create response object\n\t\tlet response = null;\n\n\t\t// Create container\n\t\tconst $container = $( `<div class=\"form-group\"></div>` );\n\n\t\t// Check if it has a label\n\t\tif ( this.attributes.hasLabel ) {\n\t\t\t// Create label\n\t\t\tconst $label = $( `<div class=\"form-group__label\">${ this.attributes.label }</div>` );\n\n\t\t\t// Append label\n\t\t\t$container.append( $label );\n\t\t}\n\n\t\t// Create form group. We're going to add the fields here\n\t\tconst $formGroup = $( `<div class=\"form-group__fields\"></div>` );\n\t\t// Iterate fields\n\t\tthis.fields.forEach( ( field ) => {\n\t\t\t// Create form element\n\t\t\tconst $fieldElement = field.createFormElement();\n\n\t\t\t// Append form element\n\t\t\t$formGroup.append( $fieldElement );\n\t\t} );\n\t\t// Append fields\n\t\t$container.append( $formGroup );\n\n\t\t// Check if it has a description\n\t\tif ( this.attributes.hasLabel ) {\n\t\t\t// Create description\n\t\t\tconst $description = $( `<div class=\"form-group__description\">${ this.attributes.description }</div>` );\n\n\t\t\t// Append description\n\t\t\t$container.append( $description );\n\t\t}\n\n\t\t// Save form element\n\t\tthis.formElement = $container;\n\t\tresponse = $container;\n\n\t\t// Return form element\n\t\treturn response;\n\t}\n\n\t/**\n\t * Get value\n\t *\n\t * @since  2.0\n\t * @return {object} Object where the key is the field ID and the value is the field's value\n\t */\n\n\tgetValue() {\n\t\t// Create object where we're going to save the values\n\t\tconst fieldsValue = {};\n\n\t\t// Iterate fields\n\t\tthis.fields.forEach( ( field ) => {\n\t\t\t// Add the field value\n\t\t\tfieldsValue[ field.getFieldID() ] = field.getValue();\n\t\t} );\n\n\t\t// Return validation object\n\t\treturn fieldsValue;\n\t}\n\n\t/**\n\t * Get form element\n\t *\n\t * @since 2.0\n\t * @return {object} jQuery object of the field's container\n\t */\n\n\tgetFormElement() {\n\t\treturn this.formElement;\n\t}\n\n\t/**\n\t * Get attributes\n\t *\n\t * @since 2.0\n\t * @return {object} Field attributes\n\t */\n\n\tgetAttributes() {\n\t\treturn this.attributes;\n\t}\n\n\t/**\n\t * Validate the fields\n\t *\n\t * @since 2.0\n\t * @param {boolean} renderError - TRUE if you want to render the field errors, FALSE if you only want to return the response object\n\t * @return {object} Object where the key is the field ID and the value is a validateField object\n\t */\n\n\tvalidate( renderError = true ) {\n\t\t// Create validation object\n\t\tconst validationObject = {\n\t\t\tisValid: true,\n\t\t\tmessage: '',\n\t\t};\n\n\t\t// Iterate fields\n\t\tthis.fields.forEach( ( field ) => {\n\t\t\t// Validate and add response to the validation object\n\t\t\tvalidationObject[ field.getFieldID() ] = field.validate( renderError );\n\n\t\t\t// Update main validation\n\t\t\tvalidationObject.isValid = validationObject.isValid && validationObject[ field.getFieldID() ].isValid;\n\t\t} );\n\n\t\t// Return validation object\n\t\treturn validationObject;\n\t}\n}\n\nexport default FieldsGroup;\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\n// Import utilities\nconst {\n\tdebounce,\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport {\n\tAJAXRequest,\n\tgetCurrentFieldsValues,\n\tgetField,\n} from '@builder/common/utilities';\n\nimport Field from './index.js';\n\nconst sortable = require( 'html5sortable' );\n\nclass FieldsRepeater {\n\t// eslint-disable-next-line no-unused-vars\n\tconstructor( attributes, createDOMelements = true, customValidationFunction = null ) {\n\t\t// Save attributes\n\t\tthis.setAttributes( attributes );\n\n\t\t// Create fields\n\t\tthis.createFields();\n\n\t\twindow.test = this;\n\t}\n\n\t/**\n\t * Set attributes. It add properties like hasValue, hasPlaceholder, etc, automatically\n\t *\n\t * @since 0.4\n\t * @param {object} attributes - The field attributes\n\t * @return {object} attributes - The field attributes\n\t */\n\tsetAttributes( attributes ) {\n\t\t// Has label\n\t\tif ( ! isDefined( attributes.hasLabel ) ) {\n\t\t\tif ( ! isEmpty( attributes.label ) ) {\n\t\t\t\tattributes.hasLabel = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasLabel = false;\n\t\t\t}\n\t\t}\n\n\t\t// Has description\n\t\tif ( ! isDefined( attributes.hasDescription ) ) {\n\t\t\tif ( ! isEmpty( attributes.description ) ) {\n\t\t\t\tattributes.hasDescription = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasDescription = false;\n\t\t\t}\n\t\t}\n\n\t\t// Default token name\n\t\tif ( isEmpty( attributes.tokenName ) ) {\n\t\t\tattributes.tokenName = attributes.label;\n\t\t}\n\n\t\t// Check if we should sort the rows\n\t\tif ( ! isDefined( attributes.canSortRows ) ) {\n\t\t\tattributes.canSortRows = true;\n\t\t}\n\n\t\tthis.attributes = attributes;\n\t}\n\n\t/**\n\t * Create instances of Field\n\t *\n\t * @since  2.0\n\t * @return undefined\n\t */\n\tcreateFields() {\n\t\t// Get fields template\n\t\tconst rowFieldsTemplate = this.attributes.fields;\n\n\t\t// Create array with fields\n\t\tlet fieldsRows = [];\n\n\t\t// Check if there is data and create multiple rows of the repeater field\n\t\tif ( Array.isArray( this.attributes.currentValue ) && this.attributes.currentValue.length > 0 ) {\n\t\t\t// https://regex101.com/r/tLL7S9/1/\n\t\t\t// Get field id and index from strings like FIELD_1\n\n\t\t\t// Iterate default rows\n\t\t\tthis.attributes.currentValue.forEach( ( row ) => {\n\t\t\t\t// Clone template row\n\t\t\t\tlet rowFields = JSON.parse( JSON.stringify( rowFieldsTemplate ) );\n\n\t\t\t\t// Iterate the rows in the template and try to get their\n\t\t\t\t// value from the \"row\" array\n\t\t\t\trowFields = rowFields.map( ( field ) => {\n\t\t\t\t\t// Check if there is a value for this field\n\t\t\t\t\tif ( isDefined( row[ field.optionCode ] ) ) {\n\t\t\t\t\t\t// Save value\n\t\t\t\t\t\tfield.currentValue = row[ field.optionCode ];\n\n\t\t\t\t\t\t// Check if there is a custom value and if we should add it\n\t\t\t\t\t\tif ( \n\t\t\t\t\t\t\tfield.currentValue == 'automator_custom_value' && \n\t\t\t\t\t\t\tisDefined( row[ `${ field.optionCode }_custom` ] )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tfield.customValue = row[ `${ field.optionCode }_custom` ];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Set empty value\n\t\t\t\t\t\tfield.currentValue = '';\n\t\t\t\t\t}\n\n\t\t\t\t\t// Return field\n\t\t\t\t\treturn field;\n\t\t\t\t} );\n\n\t\t\t\t// Add row with fields\n\t\t\t\tfieldsRows.push( rowFields );\n\t\t\t} );\n\t\t} else if ( this.attributes.isRequired ) {\n\t\t\t// Otherwise, just create one row\n\t\t\t// Check if the field is required\n\t\t\t//\n\t\t\t// Create an empty row\n\t\t\tconst emptyRow = JSON.parse( JSON.stringify( rowFieldsTemplate ) );\n\n\t\t\t// Remove undefined current value\n\t\t\temptyRow.currentValue = '';\n\n\t\t\t// Add it to the main array\n\t\t\tfieldsRows.push( emptyRow );\n\t\t}\n\n\t\t// Now iterate the row with fields\n\t\tfieldsRows = fieldsRows.map( ( row ) => {\n\t\t\t// Now iterate each group of fields\n\t\t\trow = row.map( ( fieldObject ) => {\n\t\t\t\t// Remove the label\n\t\t\t\t// fieldObject.label = '';\n\n\t\t\t\t// Remove the description\n\t\t\t\tfieldObject.description = '';\n\n\t\t\t\t// Add item ID\n\t\t\t\tfieldObject.itemId = this.attributes.itemId;\n\n\t\t\t\t// Create field\n\t\t\t\tconst field = new Field( fieldObject.fieldType, fieldObject );\n\n\t\t\t\t// AJAX: Check if it's the mapping column\n\t\t\t\tfield.isMappingColumn = isDefined( this.attributes.ajax ) && \n                                        isDefined( this.attributes.ajax.mappingColumn ) && \n                                        field.getFieldID() === this.attributes.ajax.mappingColumn;\n\n\t\t\t\t// Return field instance\n\t\t\t\treturn field;\n\t\t\t} );\n\n\t\t\t// Return row\n\t\t\treturn row;\n\t\t} );\n\n\t\t// Update the fields property\n\t\tthis.fieldRows = fieldsRows;\n\t}\n\n\t/**\n\t * Create a jQuery DOM element with the field\n\t *\n\t * @since 0.3\n\t */\n\tcreateFormElement() {\n\t\t// Create response object\n\t\tlet response = null;\n\n\t\t// Create container\n\t\tconst $container = $( `<div class=\"form-repeater\"></div>` );\n\n\t\t// Check if it has a label\n\t\tif ( this.attributes.hasLabel ) {\n\t\t\t// Create label\n\t\t\tconst $label = $( `\n\t\t\t\t<div class=\"form-repeater__label\">\n\t\t\t\t\t${ this.attributes.label }\n\t\t\t\t\t${ this.attributes.isRequired ? `<span class=\"form-repeater__label-required\"></span>` : `` }\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to manually trigger AJAX call again\n\t\t\tif (\n\t\t\t\tisDefined( this.attributes.ajax ) && \n\t\t\t\tisDefined( this.attributes.ajax.event ) && \n\t\t\t\t[ 'parent_fields_change', 'on_load' ].includes( this.attributes.ajax.event )\n\t\t\t) {\n\t\t\t\t$label.get(0).insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tsize=\"extra-small\"\n\t\t\t\t\t\tclass=\"form-element-ajax-refresh-btn\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id=\"sync\"></uo-icon>\n\n\t\t\t\t\t\t${ UncannyAutomator.i18n.refresh }\n\t\t\t\t\t</uo-button>\n\t\t\t\t` );\n\t\t\t}\n\n\t\t\t// Append label\n\t\t\t$container.append( $label );\n\t\t}\n\n\t\t// Create table with the fields\n\t\tconst $table = this.getFieldsTable();\n\t\t$container.append( $table );\n\n\t\t// Add error container\n\t\t$table.append( $( `<div class=\"form-element__error\"></div>` ) );\n\n\t\t// Check if it has a description\n\t\tif ( this.attributes.hasDescription ) {\n\t\t\t// Create description\n\t\t\tconst $description = $( `<div class=\"form-repeater__description\">${ this.attributes.description }</div>` );\n\n\t\t\t// Append description\n\t\t\t$container.append( $description );\n\t\t}\n\n\t\t// Save form element\n\t\tthis.formElement = $container;\n\t\tresponse = $container;\n\n\t\t// If there is more than one row, make list sortable\n\t\tif ( this.fieldRows.length > 1 ) {\n\t\t\tthis.makeRowsSortable();\n\t\t}\n\n\t\t// Listen save\n\t\tthis.listenSave();\n\n\t\t// Listen fields for AJAX\n\t\tthis.handleAJAX();\n\n\t\t// Return form element\n\t\treturn response;\n\t}\n\n\t/**\n\t * Gets the data needed by the server when doing AJAX requests from the field\n\t * \n\t * @param {Object} options \n\t * @param {String} options.fieldToListenToCode The ID of the field that triggered the AJAX call\n\t * @returns {Object} The data to be sent to the server when doing an AJAX call made by the field\n\t */\n\tgetAjaxRequestData( { fieldToListenToCode } ) { \n\t\treturn {\n\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\titem_id: this.attributes.itemId,\n\t\t\tgroup_id: this.attributes.groupId,\n\t\t\tfield_id: this.attributes.optionCode,\n\t\t\ttriggered_by: fieldToListenToCode,\n\t\t\tvalues: getCurrentFieldsValues( { itemID: this.attributes.itemId, field: this } ),\n\t\t}\n\t}\n\n\t/**\n\t * Merges two objects with fields data, keeping values as much as possible, assuming the values in the\n\t * mapping column are unique\n\t * \n\t * \n\t */\n\tgetMergedValuesWithMappingColumn( oldValues, newValues ) {\n\t\tif ( ! isDefined( this.attributes.ajax.mappingColumn ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Map old rows using the mapping column\n\t\tconst oldRowsMappingColumn = {}\n\n\t\toldValues.forEach( row => {\n\t\t\tconst mappingValue = row[ this.attributes.ajax.mappingColumn ];\n\n\t\t\t// Check if the mapping column has a value\n\t\t\tif ( isEmpty( mappingValue ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdelete row[ this.attributes.ajax.mappingColumn ];\n\t\t\toldRowsMappingColumn[ mappingValue ] = row;\n\t\t} );\n\t\t\n\t\tnewValues = newValues.map( ( row ) => {\n\t\t\t// Try to get the old values\n\t\t\tconst oldValues = isDefined( oldRowsMappingColumn[ row[ this.attributes.ajax.mappingColumn ] ] ) ? oldRowsMappingColumn[ row[ this.attributes.ajax.mappingColumn ] ] : {};\n\n\t\t\treturn { ...row, ...oldValues };\n\t\t} );\n\n\t\treturn newValues;\n\t}\n\n\t/**\n\t * Returns the mapping column that's used to update the field\n\t */\n\tget ajaxMappingColumn() {\n\t\tif ( ! isDefined( this.attributes.ajax ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! isDefined( this.attributes.ajax.mappingColumn ) ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\treturn this.attributes.ajax.mappingColumn;\n\t}\n\n\t/**\n\t * Handles the AJAX functionality on fields\n\t * Fields will listen to changes on other fields and trigger an AJAX call to retrieve a value or dropdown options\n\t */\n\thandleAJAX() {\n\t\t// Check if we should listen to other fields\n\t\tif ( ! isDefined( this.attributes.ajax ) || ! isDefined( this.attributes.ajax.event ) || ! isDefined( this.attributes.ajax.mappingColumn ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Performs the AJAX call\n\t\t */\n\t\tconst doAJAX = ( { fieldToListenToCode = '', onSuccess = () => {} } ) => {\n\t\t\t// Save the old values\n\t\t\tconst oldRows = this.getValue( { includeReadOnly: false } );\n\n\t\t\t// Before starting, clear any errors\n\t\t\t// This will hide errors from previous calls before doing the new one\n\t\t\tthis.clearError();\n\n\t\t\tAJAXRequest(\n\t\t\t\tthis.attributes.ajax.endpoint,\n\t\t\t\tthis.getAjaxRequestData( { fieldToListenToCode } ),\n\t\t\t\t( response ) => {\n\t\t\t\t\t// We'll update this even if the call returns an error. The call itself was successful\n\t\t\t\t\tthis.attributes.ajax.firstLoadDone = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t} catch ( e ) {}\n\t\t\t\t\t\n\t\t\t\t\t// Check if the call was successful\n\t\t\t\t\tif ( isDefined( response.success ) && ! response.success ) {\n\t\t\t\t\t\t// Reset value\n\t\t\t\t\t\tthis.setValue( [] );\n\n\t\t\t\t\t\t// Check if there is a message available\n\t\t\t\t\t\tif ( ! isEmpty( response.error ) ) {\n\t\t\t\t\t\t\tthis.setError( response.error );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set rows, but try to keep the previous values\n\t\t\t\t\tthis.setValue( this.getMergedValuesWithMappingColumn( oldRows, response.rows ) );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// Check if we have to listen other fields\n\t\tif ( this.attributes.ajax.event === 'parent_fields_change' ) {\n\t\t\t// Parent change event\n\t\t\tconst parentChangeEvent = `automator:field:change.handle-ajax-${ this.attributes.optionCode }`;\n\n\t\t\t// Check if the fields exist\n\t\t\tif ( ! isDefined( this.attributes.ajax.listenFields ) && Array.isArray( this.attributes.ajax.listenFields ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.attributes.ajax.listenFields.forEach( ( fieldID ) => {\n\t\t\t\t// Get field\n\t\t\t\tconst fieldToListenTo = getField( this.attributes.itemId, fieldID );\n\n\t\t\t\t// Get the debounce delay based on the field type\n\t\t\t\tconst debounceDelay = [ 'date', 'time', 'select', 'radio', 'checkbox' ].includes( fieldToListenTo.type ) ? 0 : 1000;\n\n\t\t\t\t// Listen changes to the parent field\n\t\t\t\tfieldToListenTo.formElement.off( parentChangeEvent );\n\t\t\t\tfieldToListenTo.formElement.on( parentChangeEvent, debounce( ( event, context ) => {\n\t\t\t\t\t// Don't trigger when getting formElement\n\t\t\t\t\tif ( isDefined( context ) && isDefined( context.source ) && context.source === 'getFormElement' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} \n\n\t\t\t\t\t// Before doing the request, show a loading animation in the field that changed\n\t\t\t\t\tfieldToListenTo.startLoadingAnimation();\n\t\t\t\t\t// And show animation in the target field too\n\t\t\t\t\tthis.startLoadingAnimation();\n\n\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\tfieldToListenToCode: fieldToListenTo.attributes.optionCode,\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t// Stop loading animation in both fields\n\t\t\t\t\t\t\tfieldToListenTo.stopLoadingAnimation();\n\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}, debounceDelay ) );\n\n\t\t\t\t// Check if it's a dropdown that supports custom values\n\t\t\t\tif ( fieldToListenTo.type === 'select' && fieldToListenTo.attributes.supportsCustomValue ) {\n\t\t\t\t\tfieldToListenTo.customValueField.formElement.off( parentChangeEvent );\n\t\t\t\t\tfieldToListenTo.customValueField.formElement.on( 'automator:field:change', debounce( ( event, context ) => {\n\t\t\t\t\t\t// Don't trigger when getting formElement\n\t\t\t\t\t\tif ( isDefined( context ) && isDefined( context.source ) && context.source === 'getFormElement' ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Before doing the request, show a loading animation in the field that changed\n\t\t\t\t\t\tfieldToListenTo.startLoadingAnimation();\n\t\t\t\t\t\t// Show loading animation in the custom value too\n\t\t\t\t\t\tfieldToListenTo.customValueField.startLoadingAnimation();\n\t\t\t\t\t\t// And show animation in the target field too\n\t\t\t\t\t\tthis.startLoadingAnimation();\n\t\n\t\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\t\tfieldToListenToCode: fieldToListenTo.attributes.optionCode,\n\t\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t\t// Stop loading animation in all fields\n\t\t\t\t\t\t\t\tfieldToListenTo.stopLoadingAnimation();\n\t\t\t\t\t\t\t\tfieldToListenTo.customValueField.stopLoadingAnimation();\n\t\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}, 1000 ) );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Trigger change event in the parent field as the field load\n\t\t\t\t// But do it only if the parent field isn't listening to another field too\n\t\t\t\tif ( ! isDefined( fieldToListenTo.attributes.ajax ) ) {\n\t\t\t\t\tfieldToListenTo.field.trigger( 'automator:field:change' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Check if the \"Refresh\" button exists and add event listener\n\t\t\tif ( this.$ajaxRefreshBtn ) {\n\t\t\t\tthis.$ajaxRefreshBtn.addEventListener( 'click', () => {\n\t\t\t\t\t// Show animation in the target field\n\t\t\t\t\tthis.startLoadingAnimation();\n\n\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\tfieldToListenToCode: this.attributes.optionCode,\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t// Stop loading animation \n\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Check if we have to perform the call on load\n\t\tif ( this.attributes.ajax.event === 'on_load' ) {\n\t\t\t// Show animation in the target field\n\t\t\tthis.startLoadingAnimation();\n\n\t\t\tdoAJAX( {\n\t\t\t\tfieldToListenToCode: this.attributes.optionCode,\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\t// Stop loading animation \n\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Check if the \"Refresh\" button exists and add event listener\n\t\t\tif ( this.$ajaxRefreshBtn ) {\n\t\t\t\tthis.$ajaxRefreshBtn.addEventListener( 'click', () => {\n\t\t\t\t\t// Show animation in the target field\n\t\t\t\t\tthis.startLoadingAnimation();\n\n\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\tfieldToListenToCode: this.attributes.optionCode,\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t// Stop loading animation \n\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\t\t} \n\t}\n\n\t/**\n\t * Listen save\n\t */\n\tlistenSave() {\n\t\t// Get form element\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tthis.formElement.on( 'saved', ( event ) => {\n\t\t\t// Update the fields array\n\t\t\tthis.updateAttributesFieldsFromRow();\n\t\t} );\n\t}\n\n\t/**\n\t * Use fieldRows to update the original attributes.fields\n\t * We will use this to render the container again after it was\n\t * saved\n\t */\n\tupdateAttributesFieldsFromRow() {\n\t\t// Create the array where we're going to save the fields data\n\t\tconst fields = [];\n\n\t\t// Iterate fieldRows\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Create array to save the row fields\n\t\t\tconst row = [];\n\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\trow.push( fieldInstance.attributes );\n\t\t\t} );\n\n\t\t\t// Add row\n\t\t\tfields.push( row );\n\t\t} );\n\n\t\t// Update fields\n\t\tthis.attributes.fields = fields;\n\t}\n\n\t/**\n\t * Make list of rows sortable\n\t */\n\tmakeRowsSortable() {\n\t\t// Check if we should make the rows sortable\n\t\tif ( this.attributes.canSortRows ) {\n\t\t\t// Make rows sortable\n\t\t\t// Use sortable from the html5sortable library\n\t\t\tsortable( this.formElement.find( '.form-repeater-fields__table-rows' ), {\n\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\thandle: '.form-repeater-fields__table-rows-cell--number',\n\t\t\t\tplaceholder: `<tr><td colspan=\"${ this.fieldRows[ 0 ].length + 2 }\">&nbsp;</td></tr>`,\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\titemSerializer: ( serializedItem, sortableContainer ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tposition: serializedItem.index,\n\t\t\t\t\t\thtml: serializedItem.html,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t} );\n\n\t\t\t// Listen modifications to the rows order\n\t\t\tthis.formElement.find( '.form-repeater-fields__table-rows' ).on( 'sortupdate', ( event ) => {\n\t\t\t\t// Create an array where each element is the index of the row in the old order\n\t\t\t\tconst newOrder = [];\n\n\t\t\t\t// Iterate the rows (in their new order)\n\t\t\t\t$.each( event.detail.destination.items, ( index, row ) => {\n\t\t\t\t\tnewOrder.push( $( row ).data( 'order' ) );\n\t\t\t\t} );\n\n\t\t\t\t// Change the order of the rows in the FieldRepeater instance\n\t\t\t\tconst newFieldRowsOrder = [];\n\t\t\t\tnewOrder.forEach( ( oldIndex ) => {\n\t\t\t\t\tnewFieldRowsOrder.push( this.fieldRows[ oldIndex ] );\n\t\t\t\t} );\n\t\t\t\tthis.fieldRows = newFieldRowsOrder;\n\n\t\t\t\t// Render the field agian\n\t\t\t\tthis.reRender();\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Create and return fields table\n\t *\n\t * @since  2.0\n\t */\n\tgetFieldsTable() {\n\t\t// Create variable to save the table\n\t\tconst $table = $( `\n\t\t\t<div class=\"form-repeater-fields\" data-id=\"${ this.attributes.optionCode }\">\n\t\t\t\t<table class=\"form-repeater-fields__table\">\n\t\t\t\t\t<thead class=\"form-repeater-fields__table-heading\"></thead>\n\t\t\t\t\t<tbody class=\"form-repeater-fields__table-rows\"></tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class=\"form-repeater-fields__actions\"></div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Create table with the rows\n\t\t// Get table headers\n\t\t// We will create a table where the name of the column will\n\t\t// be the label of the field\n\t\tconst heading = [];\n\n\t\t// Iterate the original fields object inside attributes (not the Field instances)\n\t\tthis.attributes.fields.forEach( ( fieldData ) => {\n\t\t\t// Get column title\n\t\t\tconst title = isDefined( fieldData.label ) ? fieldData.label : '';\n\n\t\t\t// Check if the fields under this column are required\n\t\t\tconst isRequired = isDefined( fieldData.isRequired ) ? fieldData.isRequired : false;\n\n\t\t\t// Check if the fields under this column are hidden\n\t\t\tconst isHidden = isDefined( fieldData.isHidden ) ? fieldData.isHidden : false;\n\n\t\t\t// Get the column description\n\t\t\tconst description = isDefined( fieldData.description ) ? fieldData.description : '';\n\n\t\t\t// Add heading column\n\t\t\theading.push( {\n\t\t\t\ttitle: title,\n\t\t\t\tdescription: description,\n\t\t\t\tisRequired: isRequired,\n\t\t\t\tisHidden: isHidden,\n\t\t\t\tid: fieldData.optionCode\n\t\t\t} );\n\t\t} );\n\n\t\t// Create HTML of the heading\n\t\tconst $heading = $( `<tr></tr>` );\n\n\t\t// Add the column with for the row number\n\t\t$heading.append(\n\t\t\t$(\n\t\t\t\t`<th class=\"form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--number\">#</th>`\n\t\t\t)\n\t\t);\n\n\t\t// Iterate heading columns\n\t\theading.forEach( ( headingColumn ) => {\n\t\t\t// Create column\n\t\t\tconst $headingColumn = $( `<th class=\"form-repeater-fields__table-heading-cell ${ headingColumn.isHidden ? 'form-repeater-fields__table-heading-cell--hidden' : '' }\" data-id=\"${ headingColumn.id }\"></th>` );\n\n\t\t\t// Add the title\n\t\t\tif ( ! isEmpty( headingColumn.title ) ) {\n\t\t\t\t$headingColumn.append(\n\t\t\t\t\t$( `\n\t\t\t\t\t<div class=\"form-repeater-fields__table-heading-cell-title\">\n\t\t\t\t\t\t${ headingColumn.title }\n\t\t\t\t\t\t${ headingColumn.isRequired ? '<span class=\"form-repeater-fields__table-heading-cell-required\"></span>' : '' }\n\t\t\t\t\t</div>\n\t\t\t\t` )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add the description\n\t\t\tif ( ! isEmpty( headingColumn.description ) ) {\n\t\t\t\t$headingColumn.append(\n\t\t\t\t\t$( `\n\t\t\t\t\t<div class=\"form-repeater-fields__table-heading-cell-description\">\n\t\t\t\t\t\t${ headingColumn.description }\n\t\t\t\t\t</div>\n\t\t\t\t` )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add heading column\n\t\t\t$heading.append( $headingColumn );\n\t\t} );\n\n\t\t// Add the column with for the actions\n\t\t$heading.append(\n\t\t\t$(\n\t\t\t\t`<th class=\"form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--actions\"></th>`\n\t\t\t)\n\t\t);\n\n\t\t// Append heading\n\t\tconst $headingContainer = $table.find( '.form-repeater-fields__table-heading' );\n\t\t$headingContainer.append( $heading );\n\n\t\t// Create HTML of the rows\n\t\tconst $rows = $table.find( '.form-repeater-fields__table-rows' );\n\n\t\t// Get number of rows\n\t\tconst numberOfRows = this.fieldRows.length;\n\n\t\t// Iterate rows of fields\n\t\tthis.fieldRows.forEach( ( row, index ) => {\n\t\t\t// Create container for the row\n\t\t\tconst $row = $( `<tr data-order=\"${ index }\"></tr>` );\n\n\t\t\t// Add the column with for the row number\n\t\t\t$row.append(\n\t\t\t\t$(\n\t\t\t\t\t`<td class=\"form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--number\">${\n\t\t\t\t\t\tindex + 1\n\t\t\t\t\t}</td>`\n\t\t\t\t)\n\t\t\t);\n\n\t\t\t// Add fields\n\t\t\trow.forEach( ( fieldInstance ) => {\n\t\t\t\t// Create container\n\t\t\t\tconst $fieldCell = $( `<td class=\"form-repeater-fields__table-rows-cell ${ fieldInstance.attributes.isHidden ? 'form-repeater-fields__table-rows-cell--hidden' : '' }\" data-id=\"${ fieldInstance.attributes.optionCode }\"></td>` );\n\n\t\t\t\t// Get field's DOM element\n\t\t\t\tconst $field = fieldInstance.getFormElement();\n\t\t\t\t// Make sure all the libraries had been initialized\n\t\t\t\tfieldInstance.initLibraries();\n\n\t\t\t\t// Add field container\n\t\t\t\t$fieldCell.append( $field );\n\n\t\t\t\t// Append field cell to the row\n\t\t\t\t$row.append( $fieldCell );\n\t\t\t} );\n\n\t\t\t// Add the column for the actions, and add the delete button\n\t\t\tconst $actions = $(\n\t\t\t\t`<td class=\"form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--actions\"></td>`\n\t\t\t);\n\t\t\t$row.append( $actions );\n\n\t\t\tconst fieldAtts = this.getAttributes();\n\n\t\t\t// Check if the field requires at least on row and if this is the first row\n\t\t\tif ( index != 0 || ( index == 0 && ( ! this.attributes.isRequired || numberOfRows > 1 ) ) ) {\n\t\t\t\t// Check if there is a custom \"Remove row\" label. If there is one,\n\t\t\t\t// use that, otherwise use the default one\n\t\t\t\tconst removeRowLabel = isDefined( this.attributes.removeRowButtonLabel )\n\t\t\t\t\t? this.attributes.removeRowButtonLabel\n\t\t\t\t\t: UncannyAutomator.i18n.removeRow;\n\n\t\t\t\t// Create delete button\n\t\t\t\tconst $removeRowButton = $(\n\t\t\t\t\t`<div class=\"form-repeater-fields__table-rows-cell-remove\" uap-tooltip=\"${ removeRowLabel }\"><span></span></div>`\n\t\t\t\t);\n\n\t\t\t\t// Listen clicks to the remove button\n\t\t\t\t$removeRowButton.on( 'click', () => {\n\t\t\t\t\t// Remove the row by index\n\t\t\t\t\tthis.deleteRow( index );\n\t\t\t\t} );\n\n\t\t\t\t// if hideActions is false, Add Remove row button\n\t\t\t\tif ( ! fieldAtts.hideActions ) {\n\t\t\t\t\t// Add remove button to the actions cell\n\t\t\t\t\t$actions.append( $removeRowButton );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add $row to the $rows element\n\t\t\t$rows.append( $row );\n\t\t} );\n\n\t\t// Create \"Add row\" button\n\t\tconst fieldAtts = this.getAttributes();\n\t\t// if hideActions is false, Add Pair button\n\t\tif ( ! fieldAtts.hideActions ) {\n\t\t\tconst $addRowButton = $( `\n\t\t\t\t<div class=\"uap-btn uap-btn--primary uap-btn--small\">\n\t\t\t\t\t${ UncannyAutomator.i18n.addRow }\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Check if we have to change label of the button\n\t\t\tif ( isDefined( this.attributes.addRowButtonLabel ) ) {\n\t\t\t\t$addRowButton.text( this.attributes.addRowButtonLabel );\n\t\t\t}\n\n\t\t\t// Listen clicks\n\t\t\t$addRowButton.on( 'click', () => {\n\t\t\t\t// Show loading animation\n\t\t\t\t$addRowButton.addClass( 'uap-btn--loading' );\n\n\t\t\t\t// Add another row\n\t\t\t\tthis.addRow();\n\t\t\t} );\n\n\t\t\t// Add actions\n\t\t\tconst $actionsContainer = $table.find( '.form-repeater-fields__actions' );\n\t\t\t$actionsContainer.append( $addRowButton );\n\t\t}\n\t\treturn $table;\n\t}\n\n\t/**\n\t * Get value\n\t *\n\t * @since  4.9\n\t * @return {Array|Object} Array of objects, where the key is the field ID and the value is the field value\n\t */\n\tgetValue( options = {} ) {\n\t\toptions = { ...{\n\t\t\tincludeReadOnly: true\n\t\t}, ...options }\n\n\t\t// Create object where we're going to save the values\n\t\tconst value = [];\n\n\t\t// Iterate rows\n\t\tthis.fieldRows.forEach( ( row ) => {\n\t\t\t// Get the value of the fields\n\t\t\tconst fieldsValue = {};\n\n\t\t\t// Iterate fields\n\t\t\trow.forEach( ( fieldInstance ) => {\n\t\t\t\t// Check if the field is editable and if we have to include it\n\t\t\t\tif ( \n\t\t\t\t\t// Check if we should NOT include the values from read-only fields\n\t\t\t\t\t! options.includeReadOnly && \n\t\t\t\t\t// If that's the case, check if the field is read-only\n\t\t\t\t\tfieldInstance.attributes.isReadOnly && \n\t\t\t\t\t// BUT, even if it's read only, still include if it's the mapping column\n\t\t\t\t\t! fieldInstance.isMappingColumn\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get the field value\n\t\t\t\tconst fieldInstanceValue = fieldInstance.getValue();\n\n\t\t\t\t// Add it to the fieldsValue object\n\t\t\t\tfieldsValue[ fieldInstance.getFieldID() ] = fieldInstanceValue;\n\n\t\t\t\t// Check if we have to save the custom value (only for selects)\n\t\t\t\tif (\n\t\t\t\t\tfieldInstance.type == 'select' && \n\t\t\t\t\tfieldInstanceValue == 'automator_custom_value'\n\t\t\t\t) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Save the custom value\n\t\t\t\t\t\tfieldsValue[ `${ fieldInstance.getFieldID() }_custom` ] = fieldInstance.getSelectCustomValue();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.warn( `Couldn't save the custom value` );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Add fields value to the main array\n\t\t\tvalue.push( fieldsValue );\n\t\t} );\n\n\t\t// Return value\n\t\treturn value;\n\t}\n\n\t/**\n\t * Returns the field value\n\t * \n\t * @return {String} The field value\n\t */\n\tget value() {\n\t\treturn this.getValue();\n\t}\n\n\t/**\n\t * Returns the value from the meta\n\t */\n\tget valueFromMeta() {\n\t\tlet value = null;\n\n\t\t// Check if the field has a value and add it\n\t\tif ( this.attributes.hasValue ) {\n\t\t\t// Return that value\n\t\t\tvalue = this.attributes.currentValue;\n\t\t} else if ( this.attributes.hasDefaultValue ) {\n\t\t\t// Return the default value\n\t\t\tvalue = this.attributes.defaultValue;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Set value\n\t * \n\t * @param {Array} newRows The new rows that have to be created\n\t * @since 4.9\n\t */\n\tsetValue( newRows = [] ) {\n\t\t// Remove all the current rows\n\t\tthis.fieldRows = [];\n\n\t\t// Iterate rows\n\t\tnewRows.forEach( ( row, index ) => {\n\t\t\tthis.addRow( row, false);\n\t\t} );\n\n\t\t// Render again\n\t\tthis.reRender();\n\t}\n\n\t/**\n\t * Add row\n\t *\n\t * @since  2.0\n\t */\n\taddRow( fieldsData = {}, reRender = true ) {\n\t\t// Create an empty row\n\t\tlet emptyRow = JSON.parse( JSON.stringify( this.attributes.fields ) );\n\n\t\t// Now iterate the fields\n\t\temptyRow = emptyRow.map( ( fieldObject ) => {\n\t\t\t// Check if there is a default value for this field\n\t\t\tif ( isDefined( fieldsData[ fieldObject.optionCode ] ) ) {\n\t\t\t\t// And if there is, use that data\n\t\t\t\tfieldObject.currentValue = fieldsData[ fieldObject.optionCode ];\n\t\t\t}\n\n\t\t\t// Create field\n\t\t\tconst field = new Field( fieldObject.fieldType, { ...fieldObject, ...{\n\t\t\t\titemId: this.attributes.itemId\n\t\t\t} } );\n\n\t\t\t// AJAX: Check if it's the mapping column\n\t\t\tfield.isMappingColumn = field.getFieldID() === this.ajaxMappingColumn;\n\n\t\t\t// Return field instance\n\t\t\treturn field;\n\t\t} );\n\n\t\t// Add it to the rows of fields\n\t\tthis.fieldRows.push( emptyRow );\n\n\t\t// Render form element again\n\t\tif ( reRender ) {\n\t\t\tthis.reRender( true );\n\t\t}\n\t}\n\n\t/**\n\t * Rerender the field again\n\t */\n\treRender( focusFirstFieldOfLastRow = false ) {\n\t\t// Create all the fields again\n\t\tthis.fieldRows = this.value.map( ( rowValues ) => {\n\t\t\t// Create an empty row\n\t\t\tlet newRow = JSON.parse( JSON.stringify( this.attributes.fields ) );\n\n\t\t\t// Now iterate the fields\n\t\t\tnewRow = newRow.map( ( fieldObject ) => {\n\t\t\t\t// Create field\n\t\t\t\tconst field = new Field( fieldObject.fieldType, { ...fieldObject, ...{\n\t\t\t\t\tcurrentValue: rowValues[ fieldObject.optionCode ],\n\t\t\t\t\titemId: this.attributes.itemId\n\t\t\t\t} } );\n\n\t\t\t\t// AJAX: Check if it's the mapping column\n\t\t\t\tfield.isMappingColumn = field.getFieldID() === this.ajaxMappingColumn;\n\n\t\t\t\t// Return field instance\n\t\t\t\treturn field;\n\t\t\t} );\n\n\t\t\treturn newRow;\n\t\t} );\n\n\t\t// Create the form element again\n\t\tconst $currentFormElement = this.formElement;\n\t\tconst $newFormElement = this.createFormElement( false );\n\t\t$currentFormElement.replaceWith( $newFormElement );\n\n\t\t// Create the date/time selector\n\t\tthis.initFlatpickr();\n\n\t\t// Create the token selector\n\t\tthis.initTokenSelector();\n\n\t\t// Create the CodeMirror instances\n\t\tthis.initCodeMirror();\n\n\t\t// Check if we have to focus the first field of the last row\n\t\tif ( focusFirstFieldOfLastRow ) {\n\t\t\t// Get the last row\n\t\t\tconst lastRow = this.fieldRows[ this.fieldRows.length - 1 ];\n\n\t\t\tif ( isDefined( lastRow ) ) {\n\t\t\t\t// Get the first field\n\t\t\t\tconst firstField = lastRow[ 0 ];\n\n\t\t\t\tif ( isDefined( firstField ) ) {\n\t\t\t\t\tfirstField.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Delete row\n\t *\n\t * @since  2.0\n\t */\n\tdeleteRow( index ) {\n\t\t// Check if there is a row with that index\n\t\tif ( isDefined( this.fieldRows[ index ] ) ) {\n\t\t\t// Remove element\n\t\t\tthis.fieldRows.splice( index, 1 );\n\t\t}\n\n\t\t// Render form element again\n\t\tthis.formElement.replaceWith( this.createFormElement() );\n\t}\n\n\t/**\n\t * Shows an error in the field\n\t * \n\t * @param {String} message The message to clear the error\n\t */\n\tsetError( message = '' ) {\n\t\t// Make sure there is a message defined\n\t\tif ( isEmpty( message ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add error classes\n\t\tthis.$errorWrapper.innerHTML = message;\n\n\t\t// Add error class to the main wrapper\n\t\tthis.formElement.get(0).classList.add( 'form-element--error' );\n\t}\n\n\t/**\n\t * Removes the error from a field\n\t */\n\tclearError() {\n\t\t// Remove message\n\t\tthis.$errorWrapper.innerHTML = '';\n\n\t\t// Remove error class (hide error container too)\n\t\tthis.formElement.get(0).classList.remove( 'form-element--error' );\n\t}\n\n\t/**\n\t * Adds loading animation to field\n\t *\n\t * @since 4.9\n\t */\n\tstartLoadingAnimation() {\n\t\t// Check if has class\n\t\tconst CSSclass = 'form-element--loading';\n\n\t\tif ( isDefined( this.formElement ) && ! this.formElement.hasClass( CSSclass ) ) {\n\t\t\t// Add class\n\t\t\tthis.formElement.addClass( CSSclass );\n\n\t\t\t// Trigger\n\t\t\tthis.formElement.trigger( 'automator:field:loading' );\n\t\t}\n\t}\n\n\t/**\n\t * Removes loading animation to field\n\t *\n\t * @since 4.9\n\t */\n\tstopLoadingAnimation() {\n\t\t// Check if has class\n\t\tconst CSSclass = 'form-element--loading';\n\n\t\tif ( isDefined( this.formElement ) && this.formElement.hasClass( CSSclass ) ) {\n\t\t\t// Remove class\n\t\t\tthis.formElement.removeClass( CSSclass );\n\n\t\t\t// Remove checkbox class\n\t\t\tthis.fieldContainer.removeClass( 'form-checkbox--loading-inline' );\n\n\t\t\t// Trigger\n\t\t\tthis.formElement.trigger( 'automator:field:loading' );\n\t\t}\n\t}\n\n\t/**\n\t * Returns the container that shows the error message\n\t */\n\tget $errorWrapper() {\n\t\treturn this.formElement.get(0).querySelector( '.form-element__error' );\n\t}\n\n\t/**\n\t * Returns button to manually retry AJAX call\n\t */\n\tget $ajaxRefreshBtn() {\n\t\treturn this.formElement.get(0).querySelector( '.form-element-ajax-refresh-btn' );\n\t}\n\n\t/**\n\t * Get form element\n\t *\n\t * @since 2.0\n\t * @return {object} jQuery object of the field's container\n\t */\n\tgetFormElement() {\n\t\t// Reset the \"first load\" status\n\t\tthis.attributes.completedFirstLoad = false;\n\n\t\t// Return form element\n\t\treturn this.formElement;\n\t}\n\n\t/**\n\t * Get attributes\n\t *\n\t * @since 2.0\n\t * @return {object} Field attributes\n\t */\n\tgetAttributes() {\n\t\treturn this.attributes;\n\t}\n\n\t/**\n\t * Get field ID\n\t *\n\t * @since 2.0\n\t * @return {string} The field ID\n\t */\n\tgetFieldID() {\n\t\treturn this.attributes.optionCode;\n\t}\n\n\t/**\n\t * Validate the fields\n\t *\n\t * @since 2.0\n\t * @param {boolean} renderError - TRUE if you want to render the field errors, FALSE if you only want to return the response object\n\t * @return {object} Object where the key is the field ID and the value is a validateField object\n\t */\n\tvalidate( renderError = true ) {\n\t\t// Create validation object\n\t\tconst validation = {\n\t\t\tisValid: true,\n\t\t\tmessage: '',\n\t\t};\n\n\t\t// Create array to save the validation of the rows\n\t\tconst rowsValidation = [];\n\n\t\t// Iterate fields\n\t\tthis.fieldRows.forEach( ( row ) => {\n\t\t\t// Create object to save the row validation\n\t\t\tconst rowValidation = {};\n\n\t\t\t// Iterate each field\n\t\t\trow.forEach( ( fieldInstance ) => {\n\t\t\t\t// Validate and add response to the validation object\n\t\t\t\trowValidation[ fieldInstance.getFieldID() ] = fieldInstance.validate( renderError );\n\n\t\t\t\t// Update global validation\n\t\t\t\tvalidation.isValid = validation.isValid && rowValidation[ fieldInstance.getFieldID() ].isValid;\n\t\t\t} );\n\n\t\t\t// Add row validation to the main validation array\n\t\t\trowsValidation.push( rowValidation );\n\t\t} );\n\n\t\t// Return validation object\n\t\treturn validation;\n\t}\n\n\tinitTokenSelector() {\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\tfieldInstance.initTokenSelector();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tdestroyTokenSelector() {\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\tfieldInstance.destroyTokenSelector();\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Create date/time selector\n\t */\n\tinitFlatpickr() {\n\t\t// Iterate rows\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\tfieldInstance.initFlatpickr();\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Destroys the date/time selectors that were created before for\n\t * this repeater field\n\t */\n\tdestroyFlatpickr() {\n\t\t// Iterate rows\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\tfieldInstance.destroyFlatpickr();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tinitCodeMirror() {\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\tfieldInstance.initCodeMirror();\n\t\t\t} );\n\t\t} );\n\t}\n\n\tdestroyCodeMirror() {\n\t\tthis.fieldRows.forEach( ( rowFields ) => {\n\t\t\t// Iterate row fields\n\t\t\trowFields.forEach( ( fieldInstance ) => {\n\t\t\t\t// Add field\n\t\t\t\tfieldInstance.destroyCodeMirror();\n\t\t\t} );\n\t\t} );\n\t}\n}\n\nexport default FieldsRepeater;\n","// Import styles\nimport './style.scss';\n\n// Import dependencies and utilities\nconst { isEmpty } = _uo.utility;\n\nimport { restCall } from '@builder/common/utilities';\nimport { recipeTypes as validRecipeTypes } from '@builder/config/valid-data';\n\nimport { html, render } from 'lit';\n\nimport { repeat } from 'lit/directives/repeat.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\n\n/**\n * Creates the recipe type selector\n * Uses Lit\n */\nexport default class RecipeTypeSelector {\n\n\t/**\n\t * Create a reference to the dialog\n\t *\n\t * @type {Ref}\n\t */\n\t$dialog = createRef();\n\n\t/**\n\t * Invokes the method to render the dialog\n\t *\n\t * @param {Callback} onReady A callback invoked after the user set a recipe type\n\t */\n\tconstructor( onReady ) {\n\t\t// Save the callback\n\t\tthis.onReady = onReady;\n\n\t\t// Render the dialog\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Renders the dialog\n\t *\n\t * @return {undefined}\n\t */\n\trender() {\n\n\t\t// Render\n\t\trender(\n\t\t\thtml`\n\t\t\t\t<uo-dialog\n\t\t\t\t\theading=\"${ UncannyAutomator.i18n.recipeType.title }\"\n\t\t\t\t\tforce-manual-close\n\t\t\t\t\topen\n\n\t\t\t\t\t${ ref( this.$dialog ) }\n\t\t\t\t>\n\t\t\t\t\t<div class=\"uap-recipe-type\">\n\t\t\t\t\t\t${\n\t\t\t\t\t\t\t// Lit's repeat. If you need more information, check\n\t\t\t\t\t\t\t// https://lit.dev/docs/templates/directives/#repeat\n\t\t\t\t\t\t\trepeat(\n\t\t\t\t\t\t\t\tObject.values( validRecipeTypes ),\n\t\t\t\t\t\t\t\t( option ) => option.id,\n\t\t\t\t\t\t\t\t( option ) => html`\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass=\"uap-recipe-type-item\"\n\t\t\t\t\t\t\t\t\t\tdata-id=${ option.id }\n\t\t\t\t\t\t\t\t\t\t@click=\"${ () => {\n\t\t\t\t\t\t\t\t\t\t\tthis.recipeType = option.id;\n\t\t\t\t\t\t\t\t\t\t} }\"\n\t\t\t\t\t\t\t\t\t\t?selected=${ option.id === this.recipeType }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<h3>${ option.name }</h3>\n\t\t\t\t\t\t\t\t\t\t<p>${ option.description }</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<uo-alert\n\t\t\t\t\t\ttype=\"info\"\n\t\t\t\t\t\theading=\"${ UncannyAutomator.i18n.recipeType.cantChangeLaterNotice }\"\n\t\t\t\t\t\tclass=\"uap-spacing-top uap-spacing-top--big\"\n\t\t\t\t\t></uo-alert>\n\t\t\t\t\t\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot=\"secondary-action\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\thref=\"${ UncannyAutomator.recipe.publish.moveToTrash.replaceAll( '&amp;', '&' ) }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.cancel }\n\t\t\t\t\t</uo-button>\n\n\t\t    \t\t<uo-button\n\t\t\t\t\t\tslot=\"primary-action\"\n\n\t\t\t\t\t\t@click=${ ( event ) => {\n\t\t\t\t\t\t\t// Set loading animation on the button\n\t\t\t\t\t\t\tevent.target.loading = true;\n\n\t\t\t\t\t\t\t// Save the recipe type\n\t\t\t\t\t\t\tthis.saveRecipeType();\n\t\t\t\t\t\t} }\n\n\t\t\t\t\t\t?disabled=${ isEmpty( this.recipeType ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.confirm }\n\t\t\t\t\t</uo-button>\n\t\t\t\t</uo-dialog>\n\t\t\t`,\n\t\t\tdocument.body\n\t\t);\n\n\t}\n\n\t/**\n\t * Saves the recipe type\n\t *\n\t * @return {undefined}\n\t */\n\tsaveRecipeType() {\n\n\t\t// Do REST call\n\t\trestCall(\n\t\t\t// Endpoint\n\t\t\t'change_post_recipe_type',\n\n\t\t\t// Data\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tpost_ID: UncannyAutomator.recipe.id,\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\trecipe_type: this.recipeType,\n\t\t\t},\n\n\t\t\t// On success\n\t\t\t( response ) => {\n\t\t\t\t// Check if the call was successful\n\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t// Check if debugging is enabled\n\t\t\t\t\tif ( UncannyAutomatorBackend.debugging.enabled ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t// eslint-disable-next-line max-len\n\t\t\t\t\t\t\t\"Recipe type selector: Couldn't set the recipe type. Open the Network tab and perform the action again.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Save in main object\n\t\t\t\tUncannyAutomator.recipe.type = this.recipeType;\n\n\t\t\t\t// Close the dialog\n\t\t\t\tthis.$dialog.value.close();\n\n\t\t\t\t// Invoke callback defined on the constructor to continue rendering the UI\n\t\t\t\tthis.onReady();\n\t\t\t}\n\t\t);\n\n\t}\n\n\t/**\n\t * The recipe type. When this changes, we have to render the dialog again\n\t *\n\t * @param {String} recipeType The recipe type\n\t * @return {undefined}\n\t */\n\tset recipeType( recipeType = '' ) {\n\t\t// Check if it's a valid recipe type\n\t\tif ( ! Object.keys( validRecipeTypes ).includes( recipeType ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Save the value\n\t\tthis.#_recipeType = recipeType;\n\n\t\t// Render the UI again\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Returns the recipe type\n\t *\n\t * @return {String} The recipe type\n\t */\n\tget recipeType() {\n\t\treturn Object.keys( validRecipeTypes ).includes( this.#_recipeType ) ? this.#_recipeType : '';\n\t}\n\n\t#_recipeType;\n}\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\taddParametersToURL\n} = _uo.utility;\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport flagItemsWithVisibleID from '@builder/item/utilities/flag-items-with-visible-id';\n\nimport Field from '../field';\nimport FieldsGroup from '../field/group.js';\nimport FieldsRepeater from '../field/repeater.js';\nimport sanitizeFieldAttributes from '@builder/field/utilities/sanitize-attributes';\n\nimport RecipeTypeSelector from '../recipe/type-selector';\n\nimport Tokens from '../tokens';\n\nimport Modal from './modal.js';\n\nimport {\n\tflagActionsScheduled\n} from '@builder/item/schedule/utilities';\n\nimport {\n\tflagActionsSortable\n} from '@builder/item/sortability/utilities';\n\nimport {\n\tparseConditionsInMeta,\n\taddConditionsToIntegrations,\n\tflagActionsWithConditions\n} from '@builder/item/conditions/utilities';\n\n/**\n * Creates the data required for Automator to render\n *\n * @param {Function} callback The function to invoke after the data is ready\n * @return {undefined}\n */\nexport const createDataOnLoad = ( callback = '' ) => {\n\t// Output if the developer mode is enabled\n\tif ( UncannyAutomator.dev.developerMode ) {\n\t\tconsoleLogLabel( 'Start creating the main object' );\n\t}\n\n\t// Check if there is a callback defined\n\t// eslint-disable-next-line no-empty-function\n\tcallback = ! isEmpty( callback ) ? callback : () => {};\n\n\t/**\n\t * Completes the process of UI creation once it knows what's the\n\t * recipe type the user wants to create\n\t *\n\t * @return {undefined}\n\t */\n\tconst completeProcess = () => {\n\t\t// Filter Automator items\n\t\tfilterAutomatorItemsByRecipeType();\n\t\t// Group the triggers and actions by integration\n\t\tgroupItemsByIntegration();\n\n\t\t// Get recipe items on page load\n\t\trecipeObject( 'create', {\n\t\t\tallRecipes: UncannyAutomator.recipes_object,\n\t\t} );\n\n\t\t// Remove unnecessary data\n\t\t// delete UncannyAutomator.recipes_object;\n\t\tdelete UncannyAutomator.triggers;\n\t\tdelete UncannyAutomator.actions;\n\t\tdelete UncannyAutomator.actionsConditions;\n\n\t\t// Output if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\tconsoleLogLabel( 'Ended creating the main object' );\n\t\t}\n\n\t\t// Invoke the callback\n\t\tcallback();\n\t};\n\n\t// Check if WP is ready\n\tif ( ! isEmpty( UncannyAutomator.recipe.type ) ) {\n\t\t// Complete the process\n\t\tcompleteProcess();\n\t} else {\n\t\t// Call to Recipe Type Selector\n\t\tnew RecipeTypeSelector( () => {\n\t\t\t// Complete the process\n\t\t\tcompleteProcess();\n\t\t} );\n\t}\n};\n\n/**\n * Updates all the objects used for the UI using the recipes_object object\n *\n * @param {String} action     Action to perform. Valid actions: 'create', 'delete',\n * @param {Object} attributes Data, check each switch to see the required data\n * @return {Boolean}            True if the action was made successfully\n */\nexport const recipeObject = ( action = null, attributes = {} ) => {\n\t// Create response variable and set default value\n\tlet response = false;\n\n\t// Define valid actions\n\tconst validActions = [ 'create', 'validate' ];\n\n\t// Check if the action is not undefined and if it's a valid action\n\tif ( isDefined( action ) && inArray( action, validActions ) ) {\n\t\tswitch ( action ) {\n\t\t\tcase 'create':\n\t\t\t\t// Define required attributes properties\n\t\t\t\tconst requiredData = [ 'allRecipes' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Get this recipe in the allRecipes object\n\t\t\t\t\tlet recipe;\n\n\t\t\t\t\t// Create allRecipes variable\n\t\t\t\t\tconst allRecipes = attributes.allRecipes;\n\n\t\t\t\t\t$.each( allRecipes, ( index, theRecipe ) => {\n\t\t\t\t\t\tif ( theRecipe.ID == UncannyAutomator.recipe.id ) {\n\t\t\t\t\t\t\trecipe = theRecipe;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Store extra options in the main UncannyAutomator object for future use\n\t\t\t\t\tif ( isDefined( recipe.extra_options ) && ! isEmpty( recipe.extra_options ) ) {\n\t\t\t\t\t\tUncannyAutomator.recipes_object[ recipe.ID ].extra_options = recipe.extra_options;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add element to all triggers, actions and closures to define the itemType. We're going to need this later\n\t\t\t\t\t$.each( recipe.triggers, ( index, item ) => ( item.itemType = 'trigger' ) );\n\t\t\t\t\t$.each( recipe.actions, ( index, item ) => ( item.itemType = 'action' ) );\n\t\t\t\t\t$.each( recipe.closures, ( index, item ) => ( item.itemType = 'closure' ) );\n\n\t\t\t\t\t// Merge all the recipe triggers, actions and closures into one array\n\t\t\t\t\tconst items = [].concat.apply( [], [ recipe.triggers, recipe.actions, recipe.closures ] );\n\n\t\t\t\t\t// Reset items object\n\t\t\t\t\titemsObject( 'reset' );\n\n\t\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\t\tconst recipeIsAnonymous = UncannyAutomator.recipe.type == 'anonymous';\n\n\t\t\t\t\t// Iterate each item and add it to the itemsObject\n\t\t\t\t\t$.each( items, ( index, item ) => {\n\t\t\t\t\t\t// We're going to get all the required information to before adding the item to the items object\n\t\t\t\t\t\tlet itemToAdd;\n\n\t\t\t\t\t\t// Get the integration ID\n\t\t\t\t\t\tconst itemIntegration = item.meta.integration;\n\n\t\t\t\t\t\t// Get the item code in this variable\n\t\t\t\t\t\tconst itemCode = item.meta.code;\n\n\t\t\t\t\t\tlet extraOptions;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\textraOptions =\n\t\t\t\t\t\t\t\tUncannyAutomator.recipes_object[ recipe.ID ].extra_options[ itemIntegration ][\n\t\t\t\t\t\t\t\t\titemCode\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t} catch ( error ) {\n\t\t\t\t\t\t\t// There are no extra options for this item, do nothing\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get the data from the global item\n\t\t\t\t\t\tconst globalItem = getGlobalItem( itemIntegration, item.itemType, itemCode );\n\n\t\t\t\t\t\t// Check if the required PHP code for this item exists\n\t\t\t\t\t\tif ( isDefined( globalItem ) ) {\n\t\t\t\t\t\t\t// Create variable to save all the options\n\t\t\t\t\t\t\tconst options = {};\n\n\t\t\t\t\t\t\tif ( ! isEmpty( extraOptions ) ) {\n\t\t\t\t\t\t\t\t// If extra options were supplied, they will be used instead of the gloab ones\n\t\t\t\t\t\t\t\tif ( isDefined( extraOptions.options ) ) {\n\t\t\t\t\t\t\t\t\t$.each( extraOptions.options, ( i, option ) => {\n\t\t\t\t\t\t\t\t\t\toptions[ option.option_code ] = [ option ];\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( isDefined( extraOptions.options_group ) ) {\n\t\t\t\t\t\t\t\t\t$.extend( true, options, extraOptions.options_group );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Check if it has simple options (options that aren't part of a group of options)\n\t\t\t\t\t\t\t\tif ( isDefined( globalItem.options ) ) {\n\t\t\t\t\t\t\t\t\t$.each( globalItem.options, ( i, option ) => {\n\t\t\t\t\t\t\t\t\t\toptions[ option.option_code ] = [ option ];\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Add group of options\n\t\t\t\t\t\t\t\tif ( isDefined( globalItem.options_group ) ) {\n\t\t\t\t\t\t\t\t\t$.extend( true, options, globalItem.options_group );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// We're going to create another options variable to create the options object as we're going to add it to the item object\n\t\t\t\t\t\t\tconst groupsOfOptions = {};\n\n\t\t\t\t\t\t\t$.each( options, ( groupKey, fields ) => {\n\t\t\t\t\t\t\t\tconst allFieldsOnThisGroup = [];\n\n\t\t\t\t\t\t\t\t// Check if it has more this group of fields has more than one option\n\t\t\t\t\t\t\t\tconst hasMoreThanOneOption = fields.length > 1;\n\n\t\t\t\t\t\t\t\t$.each( fields, ( i, field ) => {\n\t\t\t\t\t\t\t\t\t// Set the item type\n\t\t\t\t\t\t\t\t\tfield.itemType = item.itemType;\n\n\t\t\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t\t\t * Sanitizes the field data\n\t\t\t\t\t\t\t\t\t *\n\t\t\t\t\t\t\t\t\t * @param {Object} field The field data\n\t\t\t\t\t\t\t\t\t * @return {Object}      The field data, sanitized\n\t\t\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line require-jsdoc, no-shadow\n\t\t\t\t\t\t\t\t\tconst sanitizeFieldData = ( field ) => { \n\t\t\t\t\t\t\t\t\t\t// Create field object\n\t\t\t\t\t\t\t\t\t\tconst fieldObject = Object.assign( sanitizeFieldAttributes( field ), {\n\t\t\t\t\t\t\t\t\t\t\tisGroup: hasMoreThanOneOption,\n\t\t\t\t\t\t\t\t\t\t\titemId: item.ID,\n\n\t\t\t\t\t\t\t\t\t\t\tgroupId: groupKey,\n\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: isDefined( item.meta[ field.option_code ] )\n\t\t\t\t\t\t\t\t\t\t\t\t? item.meta[ field.option_code ]\n\t\t\t\t\t\t\t\t\t\t\t\t: field.default_value,\n\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\t// If it's a select, check if it support custom values\n\t\t\t\t\t\t\t\t\t\tif ( fieldObject.fieldType == 'select' ) {\n\t\t\t\t\t\t\t\t\t\t\t// Check if it supports custom values and it also supports tokens\n\t\t\t\t\t\t\t\t\t\t\tif ( isDefined( item.meta[ `${ fieldObject.optionCode }_custom` ] ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Add custom value\n\t\t\t\t\t\t\t\t\t\t\t\tfieldObject.customValue = item.meta[ `${ fieldObject.optionCode }_custom` ];\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Check if it an AJAX field\n\t\t\t\t\t\t\t\t\t\tif ( fieldObject.isAjax ) {\n\t\t\t\t\t\t\t\t\t\t\tfieldObject.integrationId = globalItem.integration;\n\n\t\t\t\t\t\t\t\t\t\t\t// Check if it's an ajax field without target field\n\t\t\t\t\t\t\t\t\t\t\t// This means no other field will change when this one changes\n\t\t\t\t\t\t\t\t\t\t\t// and that we have to do an AJAX request when rendering the field, on page load\n\t\t\t\t\t\t\t\t\t\t\tif ( isEmpty( fieldObject.targetField ) ) {\n\t\t\t\t\t\t\t\t\t\t\t\tfieldObject.targetField = field.option_code;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Return field object\n\t\t\t\t\t\t\t\t\t\treturn fieldObject;\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tlet fieldObject, fieldInstance;\n\n\t\t\t\t\t\t\t\t\t// Check if it's a group of fields\n\t\t\t\t\t\t\t\t\tif ( field.input_type == 'group' ) {\n\t\t\t\t\t\t\t\t\t\t// Get the field data\n\t\t\t\t\t\t\t\t\t\tfieldObject = Object.assign( sanitizeFieldAttributes( field ), {\n\t\t\t\t\t\t\t\t\t\t\tgroupId: groupKey,\n\n\t\t\t\t\t\t\t\t\t\t\tisGroup: hasMoreThanOneOption,\n\t\t\t\t\t\t\t\t\t\t\titemId: item.ID,\n\t\t\t\t\t\t\t\t\t\t\titemType: item.itemType\n\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\t// Create field instance\n\t\t\t\t\t\t\t\t\t\tfieldInstance = new FieldsGroup( fieldObject );\n\t\t\t\t\t\t\t\t\t} else if ( field.input_type == 'repeater' ) {\n\t\t\t\t\t\t\t\t\t\t// Try to parse the value of the repeater\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\titem.meta[ field.option_code ] = JSON.parse(\n\t\t\t\t\t\t\t\t\t\t\t\titem.meta[ field.option_code ]\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {}\n\n\t\t\t\t\t\t\t\t\t\t// Get field data\n\t\t\t\t\t\t\t\t\t\tfieldObject = Object.assign( sanitizeFieldAttributes( field ), {\n\t\t\t\t\t\t\t\t\t\t\tgroupId: groupKey,\n\n\t\t\t\t\t\t\t\t\t\t\tisGroup: hasMoreThanOneOption,\n\t\t\t\t\t\t\t\t\t\t\titemId: item.ID,\n\t\t\t\t\t\t\t\t\t\t\titemType: item.itemType,\n\n\t\t\t\t\t\t\t\t\t\t\tcurrentValue: isDefined( item.meta[ field.option_code ] )\n\t\t\t\t\t\t\t\t\t\t\t\t? item.meta[ field.option_code ]\n\t\t\t\t\t\t\t\t\t\t\t\t: field.default_value,\n\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\t// Create field instance\n\t\t\t\t\t\t\t\t\t\tfieldInstance = new FieldsRepeater( fieldObject );\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Otherwise, treat it as a normal field\n\n\t\t\t\t\t\t\t\t\t\t// Get the field data\n\t\t\t\t\t\t\t\t\t\tfieldObject = sanitizeFieldData( field );\n\n\t\t\t\t\t\t\t\t\t\t// Create the field instance\n\t\t\t\t\t\t\t\t\t\tfieldInstance = new Field( fieldObject.fieldType, fieldObject, false );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Add field to the group of fields\n\t\t\t\t\t\t\t\t\tallFieldsOnThisGroup.push( fieldInstance );\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Array where we're going to save the buttons of this item\n\t\t\t\t\t\t\t\tconst buttons = [];\n\n\t\t\t\t\t\t\t\t// Check if this group of options has buttons\n\t\t\t\t\t\t\t\tif ( isDefined( globalItem.buttons ) ) {\n\t\t\t\t\t\t\t\t\t// Iterate buttons\n\t\t\t\t\t\t\t\t\t$.each( globalItem.buttons, ( i, button ) => {\n\t\t\t\t\t\t\t\t\t\t// Check if we have to add the button to this group\n\t\t\t\t\t\t\t\t\t\tif ( button.show_in == groupKey ) {\n\t\t\t\t\t\t\t\t\t\t\tbuttons.push( button );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Push fields to the groupsOfOptions object\n\t\t\t\t\t\t\t\tgroupsOfOptions[ groupKey ] = {\n\t\t\t\t\t\t\t\t\tfields: allFieldsOnThisGroup,\n\t\t\t\t\t\t\t\t\tisValid: false, // FALSE by default, but we're going to do a validation later\n\t\t\t\t\t\t\t\t\tbuttons: buttons,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// Create object with the item data\n\t\t\t\t\t\t\titemToAdd = {\n\t\t\t\t\t\t\t\tid: item.ID,\n\t\t\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\t\t\titemCode: itemCode,\n\t\t\t\t\t\t\t\tintegrationCode: globalItem.integration,\n\t\t\t\t\t\t\t\tisLive: item.post_status == 'publish' ? true : false,\n\t\t\t\t\t\t\t\toptions: groupsOfOptions,\n\t\t\t\t\t\t\t\tmeta: item.meta,\n\t\t\t\t\t\t\t\tisMissing: false,\n\t\t\t\t\t\t\t\ttokens: isDefined( item.tokens ) ? item.tokens : [],\n\t\t\t\t\t\t\t\tinlineCss: isDefined( globalItem.inline_css ) ? globalItem.inline_css : '',\n\t\t\t\t\t\t\t\tcustomHTML: isDefined( globalItem.custom_html ) ? globalItem.custom_html : '',\n\t\t\t\t\t\t\t\tfilterTokens: isDefined( globalItem.filter_tokens ) ? globalItem.filter_tokens : '',\n\t\t\t\t\t\t\t\tmenuOrder: item.menu_order ? parseInt( item.menu_order ) : 9999,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Check if the support link is defined\n\t\t\t\t\t\t\tif ( isDefined( globalItem.support ) ) {\n\t\t\t\t\t\t\t\titemToAdd.support = globalItem.support;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Create meta for those field that don't have a value saved in the database but have a default value\n\n\t\t\t\t\t\t\t// Get all fields\n\t\t\t\t\t\t\tconst fields = {};\n\n\t\t\t\t\t\t\t// Create an object with all the options from the field\n\t\t\t\t\t\t\t$.each( groupsOfOptions, ( optionKey, opts ) => {\n\t\t\t\t\t\t\t\t$.each( opts.fields, ( i, field ) => {\n\t\t\t\t\t\t\t\t\tfields[ field.getAttributes().optionCode ] = field;\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t$.each( fields, ( i, field ) => {\n\t\t\t\t\t\t\t\tconst fieldAttributes = field.getAttributes();\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t( ! isDefined( itemToAdd.meta[ fieldAttributes.optionCode ] ) ||\n\t\t\t\t\t\t\t\t\t\tisEmpty( itemToAdd.meta[ fieldAttributes.optionCode ] ) ) &&\n\t\t\t\t\t\t\t\t\t! isEmpty( fieldAttributes.currentValue )\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\titemToAdd.meta[ fieldAttributes.optionCode ] = fieldAttributes.currentValue;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// If it's anonymous, add the \"canLogUserIn\" property\n\t\t\t\t\t\t\t// Also set the default value\n\t\t\t\t\t\t\tif ( recipeIsAnonymous ) {\n\t\t\t\t\t\t\t\titemToAdd.canLogNewUserIn = isDefined( globalItem.can_log_in_new_user )\n\t\t\t\t\t\t\t\t\t? globalItem.can_log_in_new_user\n\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Create object with the item data\n\t\t\t\t\t\t\titemToAdd = {\n\t\t\t\t\t\t\t\tid: item.ID,\n\t\t\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\t\t\titemCode: item.meta.code,\n\t\t\t\t\t\t\t\tintegrationCode: item.meta.integration,\n\t\t\t\t\t\t\t\tintegrationName: item.meta.integration_name,\n\t\t\t\t\t\t\t\tsentence: item.meta.sentence,\n\t\t\t\t\t\t\t\tisLive: item.post_status == 'publish' ? true : false,\n\t\t\t\t\t\t\t\ttokens: [],\n\t\t\t\t\t\t\t\toptions: {},\n\t\t\t\t\t\t\t\tmeta: item.meta,\n\t\t\t\t\t\t\t\tisMissing: true,\n\t\t\t\t\t\t\t\tmenuOrder: item.menu_order ? parseInt( item.menu_order ) : 9999,\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// If it's anonymous, add the \"canLogUserIn\" property\n\t\t\t\t\t\t\t// Also set the default value\n\t\t\t\t\t\t\tif ( recipeIsAnonymous ) {\n\t\t\t\t\t\t\t\titemToAdd.canLogNewUserIn = isDefined( item.meta.can_log_in_new_user )\n\t\t\t\t\t\t\t\t\t? item.meta.can_log_in_new_user == 'true'\n\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// We have to add it\n\t\t\t\t\t\titemsObject( 'add', itemToAdd );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Check if we should show the item ID\n\t\t\t\t\t// We make this outside of the loop because we need the data of all the items first\n\t\t\t\t\tflagItemsWithVisibleID();\n\n\t\t\t\t\t// Parse conditions in the recipe meta\n\t\t\t\t\tparseConditionsInMeta( recipe ); \n\n\t\t\t\t\t// Flag scheduled actions and actions with conditions\n\t\t\t\t\tflagActionsWithConditions();\n\t\t\t\t\tflagActionsScheduled();\n\t\t\t\t\tflagActionsSortable();\n\n\t\t\t\t\t// Check if the recipe is anonymous and can log the new user in\n\t\t\t\t\tif ( recipeIsAnonymous ) {\n\t\t\t\t\t\t// Set the default value\n\t\t\t\t\t\tUncannyAutomator.recipe.canLogNewUserIn = false;\n\n\t\t\t\t\t\t// Get the recipe items\n\t\t\t\t\t\tconst recipeTriggers = itemsObject( 'get', {\n\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\titemType: 'trigger',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Check if it has items\n\t\t\t\t\t\tif ( Object.keys( recipeTriggers ) > 0 ) {\n\t\t\t\t\t\t\t// Change the default value\n\t\t\t\t\t\t\tUncannyAutomator.recipe.canLogNewUserIn = true;\n\n\t\t\t\t\t\t\t// Iterate the triggers\n\t\t\t\t\t\t\t$.each( recipeTriggers, ( index, trigger ) => {\n\t\t\t\t\t\t\t\t// Check if this trigger allows the recipe\n\t\t\t\t\t\t\t\t// to log the new user in\n\t\t\t\t\t\t\t\tUncannyAutomator.recipe.canLogNewUserIn =\n\t\t\t\t\t\t\t\t\tUncannyAutomator.recipe.canLogNewUserIn && trigger.canLogNewUserIn;\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if we should validate the data\n\t\t\t\t\tif (\n\t\t\t\t\t\t! isDefined( attributes.validate ) ||\n\t\t\t\t\t\t( isDefined( attributes.validate ) && attributes.validate )\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Validate the recipe to update the isValid elements\n\t\t\t\t\t\trecipeObject( 'validate' );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `recipeObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'validate':\n\t\t\t\t// Valid by default, will be changed to false if we find an error\n\t\t\t\tlet isRecipeValid = true;\n\n\t\t\t\t// Check if the recipe has triggers, actions and/or closures\n\t\t\t\t// Update UncannyAutomator.recipe.hasLive\n\t\t\t\t$.each( UncannyAutomator.recipe.hasLive, ( itemType ) => {\n\t\t\t\t\t// All false\n\t\t\t\t\tUncannyAutomator.recipe.hasLive[ itemType ] = false;\n\t\t\t\t} );\n\n\t\t\t\t// Check if there is at least one item of that type in the main object\n\t\t\t\t$.each( UncannyAutomator.recipe.items, ( itemID, itemData ) => {\n\t\t\t\t\t// If at least one live item, then set TRUE\n\t\t\t\t\tif ( itemData.isLive ) {\n\t\t\t\t\t\tUncannyAutomator.recipe.hasLive[ itemData.itemType ] = true;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Iterate each item\n\t\t\t\t$.each( UncannyAutomator.recipe.items, ( itemID, itemData ) => {\n\t\t\t\t\t// We will use this variable to decide if the item is valid or not\n\t\t\t\t\tlet itemIsValid = true;\n\n\t\t\t\t\t// Iterate each group of fields\n\t\t\t\t\t$.each( itemData.options, ( optionsGroupID, optionsGroupData ) => {\n\t\t\t\t\t\t// We will use this variable to decide if the group of fields is valid or not\n\t\t\t\t\t\tlet groupIsValid = true;\n\n\t\t\t\t\t\t// Iterate each field\n\t\t\t\t\t\t$.each( optionsGroupData.fields, ( index, field ) => {\n\t\t\t\t\t\t\t// Validate the field. Read validateField comments to learn more.\n\t\t\t\t\t\t\tconst fieldValidation = field.validate( false );\n\n\t\t\t\t\t\t\t// Check if the option is invalid, if at least one field is invalid make all the group invalid\n\t\t\t\t\t\t\tif ( ! fieldValidation.isValid ) {\n\t\t\t\t\t\t\t\tgroupIsValid = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set result\n\t\t\t\t\t\tUncannyAutomator.recipe.items[ itemID ].options[ optionsGroupID ].isValid = groupIsValid;\n\n\t\t\t\t\t\t// Check if the group is invalid, if at least on group of fields is invalid make all the item invalid\n\t\t\t\t\t\tif ( ! groupIsValid ) {\n\t\t\t\t\t\t\titemIsValid = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tUncannyAutomator.recipe.items[ itemID ].isValid = itemIsValid;\n\n\t\t\t\t\t// Check if the item is invalid. If at least one item is invalid make all the recipe invalid\n\t\t\t\t\tif ( itemData.isLive && ! itemIsValid ) {\n\t\t\t\t\t\tisRecipeValid = false;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Now check what items we have in the object\n\t\t\t\t// We must have at least one trigger and an action or closure\n\t\t\t\t// Check if it has at least one trigger\n\t\t\t\tif ( ! UncannyAutomator.recipe.hasLive.trigger ) {\n\t\t\t\t\tisRecipeValid = false;\n\n\t\t\t\t\t// Set error message\n\t\t\t\t\tUncannyAutomator.recipe.message.error = UncannyAutomator.i18n.validation.recipe.oneTrigger;\n\t\t\t\t} else {\n\t\t\t\t\t// Validate user selector\n\t\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Check if it's an anonymous recipe\n\t\t\t\t\t\tUncannyAutomator.recipe.type == 'anonymous' &&\n\t\t\t\t\t\t// if it requires user data (thus it needs the user selector)\n\t\t\t\t\t\tUncannyAutomator.recipe.requiresUserData &&\n\t\t\t\t\t\t// and if the user selector is not valid (doesn't have required data)\n\t\t\t\t\t\t! UncannyAutomator.recipe.userSelector.isValid\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Then the recipe is not valid\n\t\t\t\t\t\tisRecipeValid = false;\n\n\t\t\t\t\t\t// Add message\n\t\t\t\t\t\tUncannyAutomator.recipe.message.error = UncannyAutomator.i18n.validation.recipe.userSelector;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t// Check if it has at least one action or closure\n\t\t\t\t\t\t! UncannyAutomator.recipe.hasLive.action &&\n\t\t\t\t\t\t! UncannyAutomator.recipe.hasLive.closure\n\t\t\t\t\t) {\n\t\t\t\t\t\tisRecipeValid = false;\n\n\t\t\t\t\t\t// Set error message\n\t\t\t\t\t\tUncannyAutomator.recipe.message.error = UncannyAutomator.i18n.validation.recipe.oneAction;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\t! UncannyAutomator.recipe.hasLive.trigger &&\n\t\t\t\t\t\t! UncannyAutomator.recipe.hasLive.action &&\n\t\t\t\t\t\t! UncannyAutomator.recipe.hasLive.closure\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Set error message\n\t\t\t\t\t\tUncannyAutomator.recipe.message.error = UncannyAutomator.i18n.validation.recipe.liveItems;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tUncannyAutomator.recipe.isValid = isRecipeValid;\n\n\t\t\t\t// Reset message if recipe is valid\n\t\t\t\tif ( isRecipeValid ) {\n\t\t\t\t\t// Reset message, we don't need it\n\t\t\t\t\tUncannyAutomator.recipe.message.error = '';\n\t\t\t\t}\n\n\t\t\t\t// Everything is ok, return true\n\t\t\t\tresponse = true;\n\n\t\t\t\tbreak;\n\t\t}\n\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( `recipeObject: The action \"${ action }\" isn't defined` );\n\t}\n\n\treturn response;\n};\n\n/**\n * Add, update, delete, update, validate and clean the main recipe object\n *\n * @param {String}  action              Action to perform. Valid actions: 'add', 'update', 'delete', 'reset', 'get', and 'clean'.\n * @param {Object}  attributes          The attributes\n * @param {Integer} attributes.id       Item ID\n * @param {String}  attributes.itemType The item type. The valid types are 'trigger', 'action' and 'closure'\n * @return {Boolean}                       True if the action was made successfully\n */\nexport const itemsObject = ( action = null, attributes = {} ) => {\n\t// Create response variable and set default value\n\tlet response = false;\n\t\n\t// Define valid actions\n\tconst validActions = [ 'add', 'delete', 'clean', 'reset', 'update', 'get' ];\n\n\t// Check if the action is not undefined and if it's a valid action\n\tif ( isDefined( action ) && inArray( action, validActions ) ) {\n\t\tswitch ( action ) {\n\t\t\tcase 'add':\n\t\t\t\t// Extend default attributes object with default values\n\t\t\t\tattributes = $.extend(\n\t\t\t\t\t{\n\t\t\t\t\t\tisValid: false, // Because it's going to be empty\n\t\t\t\t\t\tisLive: false, // Draft by default\n\t\t\t\t\t},\n\t\t\t\t\tattributes\n\t\t\t\t);\n\n\t\t\t\t// Define required attributes properties\n\t\t\t\tconst requiredData = [ 'id', 'itemType' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Has ID, check if it wasn't added\n\t\t\t\t\tif ( ! isDefined( UncannyAutomator.recipe.items[ attributes.id ] ) ) {\n\t\t\t\t\t\t// Create property\n\t\t\t\t\t\tUncannyAutomator.recipe.items[ attributes.id ] = attributes;\n\n\t\t\t\t\t\t// Clean undefined properties\n\t\t\t\t\t\titemsObject( 'clean', {} );\n\n\t\t\t\t\t\t// Everything is ok, return true\n\t\t\t\t\t\tresponse = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'delete':\n\t\t\t\tattributes = $.extend(\n\t\t\t\t\t{\n\t\t\t\t\t\tisValid: false,\n\t\t\t\t\t},\n\t\t\t\t\tattributes\n\t\t\t\t);\n\n\t\t\t\tif ( ! isEmpty( attributes.id ) ) {\n\t\t\t\t\tif ( isDefined( UncannyAutomator.recipe.items[ attributes.id ] ) ) {\n\t\t\t\t\t\tdelete UncannyAutomator.recipe.items[ attributes.id ];\n\n\t\t\t\t\t\t// Everything is ok, return true\n\t\t\t\t\t\tresponse = true;\n\t\t\t\t\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: We didn't find an item with this the ID ${ attributes.id }` );\n\t\t\t\t\t}\n\t\t\t\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error( 'itemsObject: Invalid item ID' );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'clean':\n\t\t\t\t// Delete undefined and null properties\n\n\t\t\t\tconst items = {};\n\n\t\t\t\t$.each( UncannyAutomator.recipe.items, ( index, value ) => {\n\t\t\t\t\tif ( isDefined( value ) ) {\n\t\t\t\t\t\titems[ index ] = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tUncannyAutomator.recipe.items = items;\n\n\t\t\t\t// Everything is ok, return true\n\t\t\t\tresponse = true;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'update':\n\t\t\t\t// Update item attributes\n\n\t\t\t\tif ( ! isEmpty( attributes.id ) ) {\n\t\t\t\t\tif ( isDefined( UncannyAutomator.recipe.items[ attributes.id ] ) ) {\n\t\t\t\t\t\t// Extend item object properties with new ones\n\t\t\t\t\t\tUncannyAutomator.recipe.items[ attributes.id ] = $.extend(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tUncannyAutomator.recipe.items[ attributes.id ],\n\t\t\t\t\t\t\tattributes\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Everything is ok, return true\n\t\t\t\t\t\tresponse = true;\n\t\t\t\t\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: We didn't find an item with this the ID ${ attributes.id }` );\n\t\t\t\t\t}\n\t\t\t\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error( 'itemsObject: Invalid item ID' );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'reset':\n\t\t\t\t// Delete all the items in the items object\n\t\t\t\tUncannyAutomator.recipe.items = {};\n\n\t\t\t\t// Return true\n\t\t\t\tresponse = true;\n\t\t\t\tbreak;\n\n\t\t\tcase 'get':\n\t\t\t\tresponse = UncannyAutomator.recipe.items;\n\n\t\t\t\t// Check if we should include only some items\n\t\t\t\tif ( ! isEmpty( attributes.includeOnly ) ) {\n\t\t\t\t\t// Create a new items object. We're going to add items to this one if the filters match\n\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\tconst items = {};\n\n\t\t\t\t\t// Iterate all current items\n\t\t\t\t\tObject.entries( response ).forEach( ( [ itemId, item ] ) => {\n\t\t\t\t\t\t// Check if it's one of the items we should add\n\t\t\t\t\t\tif ( attributes.includeOnly.includes( parseInt( itemId ) ) ) {\n\t\t\t\t\t\t\titems[ itemId ] = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Return the new items object\n\t\t\t\t\tresponse = items;\n\t\t\t\t}\n\n\t\t\t\t// Check if we should exclude some items\n\t\t\t\tif ( ! isEmpty( attributes.exclude ) ) {\n\t\t\t\t\t// Create a new items object. We're going to add items to this one if the filters match\n\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\tconst items = {};\n\n\t\t\t\t\t// Iterate all current items\n\t\t\t\t\tObject.entries( response ).forEach( ( [ itemId, item ] ) => {\n\t\t\t\t\t\t// Check if it's one of the items we should add\n\t\t\t\t\t\tif ( ! attributes.exclude.includes( parseInt( itemId ) ) ) {\n\t\t\t\t\t\t\titems[ itemId ] = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Return the new items object\n\t\t\t\t\tresponse = items;\n\t\t\t\t}\n\n\t\t\t\t// Check if we have to filter items\n\t\t\t\tif ( ! isEmpty( attributes.filter ) ) {\n\t\t\t\t\t// Create a new items object. We're going to add items to this one if the filters match\n\t\t\t\t\t// eslint-disable-next-line no-shadow\n\t\t\t\t\tconst items = {};\n\n\t\t\t\t\t// Iterate all current items\n\t\t\t\t\tObject.entries( response ).forEach( ( [ itemId, item ] ) => {\n\t\t\t\t\t\t// Default response\n\t\t\t\t\t\tlet matchesFilters = true;\n\n\t\t\t\t\t\t// Iterate filters\n\t\t\t\t\t\tObject.entries( attributes.filter ).forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\t\t// Only return the entries that match with the filters used\n\t\t\t\t\t\t\tif ( item[ key ] != value ) {\n\t\t\t\t\t\t\t\tmatchesFilters = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Check if the item matches the filters\n\t\t\t\t\t\tif ( matchesFilters ) {\n\t\t\t\t\t\t\titems[ itemId ] = item;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Return the new items object\n\t\t\t\t\tresponse = items;\n\t\t\t\t}\n\n\t\t\t\t// Check if we should return an array\n\t\t\t\tif ( ! isEmpty( attributes.format ) && attributes.format == 'array' ) {\n\t\t\t\t\tresponse = Object.values( response );\n\t\t\t\t}\n\n\t\t\t\t// Check if we have to order the items. If so, also check if the we're requesting an array\n\t\t\t\t// We can't rely on the JS object\n\t\t\t\tif ( ! isEmpty( attributes.orderBy ) && ( ! isEmpty( attributes.format ) && attributes.format == 'array' ) ) {\t\t\t\t\t\n\t\t\t\t\t// Check if we should use a custom function\n\t\t\t\t\tif ( typeof attributes.orderBy === 'function' ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Sort it. This will already be an array\n\t\t\t\t\t\t\tresponse = response.sort( attributes.orderBy );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.error( `itemsObject: The compare function \\`orderBy\\` thrown an error` );\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.log( attributes.orderBy );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Create the default compare function\n\t\t\t\t\t\tconst compare = ( a, b ) => {\n\t\t\t\t\t\t\t// Check if both values are equal, and compare by ID\n\t\t\t\t\t\t\t// Otherwise, continue\n\t\t\t\t\t\t\tif ( a[ attributes.orderBy ] === b[ attributes.orderBy ] ) {\n\t\t\t\t\t\t\t\tif ( isDefined( a.id ) && isDefined( b.id ) ) {\n\t\t\t\t\t\t\t\t\treturn a.id < b.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Check if the property is defined\n\t\t\t\t\t\t\tif ( \n\t\t\t\t\t\t\t\t! isDefined( a[ attributes.orderBy ] ) || \n\t\t\t\t\t\t\t\t! isDefined( b[ attributes.orderBy ] ) \n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Values to compare\n\t\t\t\t\t\t\tlet valA = a[ attributes.orderBy ], \n\t\t\t\t\t\t\t\tvalB = b[ attributes.orderBy ];\n\n\t\t\t\t\t\t\t// Check if the property is numeric\n\t\t\t\t\t\t\tif ( isDefined( attributes.orderByType ) ) {\n\t\t\t\t\t\t\t\tif ( attributes.orderByType == 'int' ) {\n\t\t\t\t\t\t\t\t\tvalA = parseInt( valA );\n\t\t\t\t\t\t\t\t\tvalB = parseInt( valB );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn valA > valB ? 1 : -1;\n\t\t\t\t\t\t} \n\n\t\t\t\t\t\t// Sort it. This will already be an array\n\t\t\t\t\t\tresponse = response.sort( compare );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( `itemsObject: The action \"${ action }\" isn't defined` );\n\t}\n\n\treturn response;\n};\n\n/**\n * Add the triggers and actions to each integration.\n * Change the data structure so it's possible to know\n * what items and integrations are pro\n *\n * @return {undefined}\n */\nexport const groupItemsByIntegration = () => {\n\t// Iterate the integrations\n\t// eslint-disable-next-line no-unused-vars\n\tObject.entries( UncannyAutomator.integrations ).forEach( ( [ integrationID, integration ] ) => {\n\t\t// Get the list of available triggers and actions\n\t\t// Sort them alphabetically\n\t\tconst triggers = {\n\t\t\t\tavailable: sortArrayOfObjectsAlphabetically(\n\t\t\t\t\tUncannyAutomator.triggers.filter( ( item ) => item.integration == integrationID ),\n\t\t\t\t\t'select_option_name',\n\t\t\t\t\t( sentence ) => replaceCurlyBraces( sentence )\n\t\t\t\t),\n\t\t\t\tunavailable: [],\n\t\t\t},\n\t\t\tactions = {\n\t\t\t\tavailable: sortArrayOfObjectsAlphabetically(\n\t\t\t\t\tUncannyAutomator.actions.filter( ( item ) => item.integration == integrationID ),\n\t\t\t\t\t'select_option_name',\n\t\t\t\t\t( sentence ) => replaceCurlyBraces( sentence )\n\t\t\t\t),\n\t\t\t\tunavailable: [],\n\t\t\t};\n\n\t\tif ( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp ) {\n\t\t\t// Check if there are PRO items for this integration\n\t\t\tif (\n\t\t\t\tisDefined( UncannyAutomator.proFeatures ) &&\n\t\t\t\tisDefined( UncannyAutomator.proFeatures[ integrationID ] )\n\t\t\t) {\n\t\t\t\t// Get the recipe type\n\t\t\t\tlet recipeType = UncannyAutomator.recipe.type;\n\t\t\t\t// Just for filtering the triggers, change \"user\" to \"logged-in\"\n\t\t\t\trecipeType = recipeType == 'user' ? 'logged-in' : recipeType;\n\n\t\t\t\t// Push the pro triggers to the unavailable triggers array\n\t\t\t\t// Sort them alphabetically\n\t\t\t\ttriggers.unavailable = sortArrayOfObjectsAlphabetically(\n\t\t\t\t\t// Elements to sort alphabetically\n\t\t\t\t\tUncannyAutomator.proFeatures[ integrationID ].triggers\n\t\t\t\t\t\t// Filter by recipe type\n\t\t\t\t\t\t// trigger.type is the trigger time\n\t\t\t\t\t\t.filter( ( trigger ) => trigger.type == recipeType ),\n\t\t\t\t\t// Sort them by name\n\t\t\t\t\t'name',\n\t\t\t\t\t// Remove the curly braces before comparing the names\n\t\t\t\t\t( sentence ) => replaceCurlyBraces( sentence )\n\t\t\t\t);\n\n\t\t\t\t// Push the pro actions to the unavailable actions array\n\t\t\t\t// Sort them alphabetically\n\t\t\t\tactions.unavailable = sortArrayOfObjectsAlphabetically(\n\t\t\t\t\tUncannyAutomator.proFeatures[ integrationID ].actions,\n\t\t\t\t\t'name',\n\t\t\t\t\t( sentence ) => replaceCurlyBraces( sentence )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Evaluate if all the available items are pro\n\t\t// To do that, iterate every element using the method every\n\t\t// and return the value of \"is_pro\"\n\t\ttriggers.allItemsArePro = triggers.available.every( ( item ) =>\n\t\t\tisDefined( item.is_pro ) ? item.is_pro : false\n\t\t);\n\t\tactions.allItemsArePro = actions.available.every( ( item ) =>\n\t\t\tisDefined( item.is_pro ) ? item.is_pro : false\n\t\t);\n\n\t\t// Check if the integration has available triggers and actions\n\t\ttriggers.hasAvailableItems = triggers.available.length > 0;\n\t\tactions.hasAvailableItems = actions.available.length > 0;\n\n\t\t// Check if the integration has unavailable triggers and actions\n\t\ttriggers.hasUnavailableItems = triggers.unavailable.length > 0;\n\t\tactions.hasUnavailableItems = actions.unavailable.length > 0;\n\n\t\t// Check if it has any kind of items\n\t\ttriggers.hasTriggers = triggers.hasAvailableItems || triggers.unavailable.length > 0;\n\t\tactions.hasActions = actions.hasAvailableItems || actions.unavailable.length > 0;\n\n\t\t// Add the items to the integration\n\t\tUncannyAutomator.integrations[ integrationID ].items = {\n\t\t\ttriggers: triggers,\n\t\t\tactions: actions,\n\t\t};\n\n\t\t// Add conditions\n\t\taddConditionsToIntegrations( {\n\t\t\tintegrationCode: integrationID\n\t\t} );\n\t} );\n};\n\n/**\n * Sorts an array of objects using one of the properties\n *\n * @param {Array}    items             The array\n * @param {String}   propertyToCompare The property used to compare the elements\n * @param {Function} filter            A custom function to compare the elements\n * @return {Array}                       The array, sorted\n */\nexport const sortArrayOfObjectsAlphabetically = ( items = [], propertyToCompare = '', filter ) => {\n\t// Check if there isn't a filter defined\n\tif ( ! isDefined( filter ) ) {\n\t\tfilter = ( value ) => value;\n\t}\n\n\t// Check if it's an array and it's not empty\n\tif ( Array.isArray( items ) && ! isEmpty( items ) ) {\n\t\t// Sort the array of integrations using the integration name\n\t\titems = items.sort( ( a, b ) => {\n\t\t\t// Define the default value\n\t\t\tlet compare = 0;\n\n\t\t\t// Check if the elements have the properties we're going to use to compare\n\t\t\tif ( isDefined( a[ propertyToCompare ] ) && isDefined( b[ propertyToCompare ] ) ) {\n\t\t\t\t// Filter the values\n\t\t\t\tconst valueA = filter( a[ propertyToCompare ] ),\n\t\t\t\t\tvalueB = filter( b[ propertyToCompare ] );\n\n\t\t\t\t// Check which integration name should go first\n\t\t\t\tcompare = valueA.localeCompare( valueB );\n\n\t\t\t\t// Validate the result\n\t\t\t\t// Do NOT rely on exact return values of -1 or 1\n\t\t\t\t// Negative and positive integer results vary between browsers (as well as between browser versions) because the W3C specification only mandates negative and positive values. Some browsers may return -2 or 2, or even some other negative or positive value.\n\t\t\t\tcompare = compare > 0 ? 1 : compare;\n\t\t\t\tcompare = compare < 0 ? -1 : compare;\n\t\t\t}\n\n\t\t\t// Return result\n\t\t\treturn compare;\n\t\t} );\n\t}\n\n\t// Return the new array\n\treturn items;\n};\n\n/**\n * Returns a list of triggers or actions by integration\n *\n * @param {String} integrationID The integration ID\n * @param {String} itemType      The item type. Valid values: \"trigger\", \"triggers\", \"action\" and \"actions\"\n * @param {Object} options       The options\n * @return {Object}                And object with the available and unavailable items\n */\nexport const getItemsByIntegration = ( integrationID = '', itemType = 'triggers', options ) => {\n\t// Extend the options\n\toptions = Object.assign(\n\t\t{\n\t\t\taddDeprecatedItems: false,\n\t\t},\n\t\toptions\n\t);\n\n\t// Create the array where we're going to save the items\n\tlet items = {\n\t\tavailable: {},\n\t\tunavailable: {},\n\t};\n\n\t// Convert itemType \"trigger\" to \"triggers\"\n\titemType = itemType == 'trigger' ? 'triggers' : itemType;\n\t// Convert itemType \"action\" to \"actions\"\n\titemType = itemType == 'action' ? 'actions' : itemType;\n\n\t// Validate the parameter itemType\n\tif ( [ 'triggers', 'actions' ].includes( itemType ) ) {\n\t\t// Check if the integration ID is defined\n\t\tif ( ! isEmpty( integrationID ) ) {\n\t\t\t// Check if the integration exists\n\t\t\tif ( isDefined( UncannyAutomator.integrations[ integrationID ] ) ) {\n\t\t\t\t// Get the requested items\n\t\t\t\titems = $.extend( true, {}, UncannyAutomator.integrations[ integrationID ].items[ itemType ] );\n\n\t\t\t\t// Check if we have to remove the deprecated items\n\t\t\t\tif ( ! options.addDeprecatedItems ) {\n\t\t\t\t\t// Remove deprecated items\n\t\t\t\t\titems = filterDeprecatedItems( items );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the triggers\n\treturn items;\n};\n\n/**\n * Returns the data about a trigger or action using the item code\n *\n * @param {String} integrationID The integration ID\n * @param {String} itemType      The item type. Vlaid values: \"trigger\", \"triggers\", \"action\" and \"actions\"\n * @param {String} itemCode      The item code\n * @param {Object} options       Options\n * @return {Object}               Data about the item\n */\nexport const getItemByCode = ( integrationID = '', itemType = 'triggers', itemCode = '', options = {} ) => {\n\t// Default response\n\tlet item;\n\n\t// Extend the options\n\toptions = Object.assign(\n\t\t{\n\t\t\taddDeprecatedItems: false,\n\t\t},\n\t\toptions\n\t);\n\n\t// Convert itemType \"trigger\" to \"triggers\"\n\titemType = itemType == 'trigger' ? 'triggers' : itemType;\n\t// Convert itemType \"action\" to \"actions\"\n\titemType = itemType == 'action' ? 'actions' : itemType;\n\n\t// Validate the parameter itemType\n\tif ( [ 'triggers', 'actions' ].includes( itemType ) ) {\n\t\t// Check if the integration ID is defined\n\t\tif ( ! isEmpty( integrationID ) ) {\n\t\t\t// Get the integration items\n\t\t\tconst integrationItems = getItemsByIntegration( integrationID, itemType, {\n\t\t\t\taddDeprecatedItems: options.addDeprecatedItems,\n\t\t\t} );\n\n\t\t\t// Get the available items\n\t\t\tconst items = integrationItems.available;\n\n\t\t\t// Search the item\n\t\t\titems.forEach( ( integrationItem ) => {\n\t\t\t\t// Check the item code\n\t\t\t\tif ( integrationItem.code == itemCode ) {\n\t\t\t\t\t// Save it\n\t\t\t\t\titem = integrationItem;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\treturn item;\n};\n\n/**\n * Removes deprecated items from an items object\n *\n * @param {Object} items Items object\n * @return {Object}        Items object, without deprecated items\n */\nexport const filterDeprecatedItems = ( items ) => {\n\t// Remove deprecated items\n\titems.available = items.available.filter( ( item ) => ! item.is_deprecated );\n\n\t// Check if there are still available items\n\titems.hasAvailableItems = items.available.length > 0;\n\n\t// Check if it still has triggers or actions\n\tif ( isDefined( items.hasTriggers ) ) {\n\t\titems.hasTriggers = items.hasAvailableItems || items.unavailable.length > 0;\n\t} else if ( isDefined( items.hasActions ) ) {\n\t\titems.hasActions = items.hasAvailableItems || items.unavailable.length > 0;\n\t}\n\n\t// Check if all the available items are pro now\n\titems.allItemsArePro = items.available.every( ( item ) => ( isDefined( item.is_pro ) ? item.is_pro : false ) );\n\n\treturn items;\n};\n\n/**\n * Updates the user selector data\n *\n * @param {String} action     Action to perform. Valid actions: 'set-step', 'get-step', 'set-source', 'update-fields', 'reset-fields'.\n * @param {Object} attributes The attributes\n * @return {Boolean}                       True if the action was made successfully\n */\nexport const userSelectorObject = ( action = null, attributes = {} ) => {\n\t// Create response variable and set default value\n\tlet response = false;\n\n\t// Define valid actions\n\tconst validActions = [ 'set-step', 'get-step', 'set-source', 'update-fields', 'reset-fields' ];\n\n\t// Create shortcut of the user selector object\n\t// const userSelector = UncannyAutomator.recipe.userSelector;\n\n\t// Check if the action is not undefined and if it's a valid action\n\tif ( isDefined( action ) && inArray( action, validActions ) ) {\n\t\t// Create empty array to check if the actions have the required data\n\t\tlet requiredData = [];\n\n\t\tswitch ( action ) {\n\t\t\t/**\n\t\t\t * Get the current step so we know what we have to render\n\t\t\t * There are 4 steps:\n\t\t\t *\n\t\t\t * 1. select-source: Where the recipe creator select the source of the user.\n\t\t\t *                   The options are \"Existing user\" and \"New user\".\n\t\t\t * 2. set-options: Where the recipe creator defines values of the fields.\n\t\t\t * 3. show-sentence: When the data is complete and valid.\n\t\t\t */\n\n\t\t\tcase 'set-step':\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'step' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Set status\n\t\t\t\t\tUncannyAutomator.recipe.userSelector.step = attributes.step;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `userSelectorObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'get-step':\n\t\t\t\t// Create the variable we're going to return\n\t\t\t\t// Set default value\n\t\t\t\tlet step = 'select-source';\n\n\t\t\t\t// Check if the step property is defined\n\t\t\t\tif ( isDefined( UncannyAutomator.recipe.userSelector.step ) ) {\n\t\t\t\t\t// If it is, then return that value\n\t\t\t\t\tstep = UncannyAutomator.recipe.userSelector.step;\n\t\t\t\t} else if (\n\t\t\t\t\t// Try to get step\n\t\t\t\t\t// Check if there are fields saved\n\t\t\t\t\t! isEmpty(\n\t\t\t\t\t\tUncannyAutomator.recipe.userSelector.data[ UncannyAutomator.recipe.userSelector.source ]\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t// Show sentence\n\t\t\t\t\tstep = 'show-sentence';\n\n\t\t\t\t\t// If we have fields it's because we already valid them before,\n\t\t\t\t\t// thus the user selector is valid\n\t\t\t\t\tUncannyAutomator.recipe.userSelector.isValid = true;\n\t\t\t\t}\n\n\t\t\t\t// Return step\n\t\t\t\tresponse = step;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'set-source':\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'source' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Set status\n\t\t\t\t\tUncannyAutomator.recipe.userSelector.source = attributes.source;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `userSelectorObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'update-fields':\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'source', 'data' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Check if the source parameter is valid\n\t\t\t\t\tif ( [ 'existingUser', 'newUser' ].includes( attributes.source ) ) {\n\t\t\t\t\t\t// Check if we already have fields\n\t\t\t\t\t\tif ( isEmpty( UncannyAutomator.recipe.userSelector.data ) ) {\n\t\t\t\t\t\t\tUncannyAutomator.recipe.userSelector.data = {\n\t\t\t\t\t\t\t\texistingUser: {},\n\t\t\t\t\t\t\t\tnewUser: {},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Update fields\n\t\t\t\t\t\tUncannyAutomator.recipe.userSelector.data[ attributes.source ] = $.extend(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tUncannyAutomator.recipe.userSelector.data[ attributes.source ],\n\t\t\t\t\t\t\tattributes.data\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( 'userSelectorObject: The source parameter is invalid. Valid values are: existingUser, newUser' );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `userSelectorObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'reset-fields':\n\t\t\t\t// Return boolean\n\t\t\t\tUncannyAutomator.recipe.userSelector.data = {\n\t\t\t\t\texistingUser: {},\n\t\t\t\t\tnewUser: {},\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( `userSelectorObject: The action \"${ action }\" isn't defined` );\n\t}\n\n\treturn response;\n};\n\n/**\n * Filters triggers, actions and closures by recipe type.\n * This won't filter the items of a recipe, but the available\n * items in Automator. This means that the filtered items won't\n * be available after.\n *\n * @return {undefined}\n */\nexport const filterAutomatorItemsByRecipeType = () => {\n\t// Check if the type attribute has a valid value\n\tif ( [ 'user', 'anonymous' ].includes( UncannyAutomator.recipe.type ) ) {\n\t\t// Output if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// Start group\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsoleLogLabel( 'Filter Automator items', true, {\n\t\t\t\tcollapseGroup: true,\n\t\t\t} );\n\n\t\t\t// Show current recipe type\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log( `Current recipe type: ${ UncannyAutomator.recipe.type }` );\n\t\t}\n\n\t\t// Filter triggers\n\t\tUncannyAutomator.triggers = UncannyAutomator.triggers.filter( ( trigger ) => {\n\t\t\t// Output if the developer mode is enabled\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// Show trigger\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log( trigger );\n\n\t\t\t\t// Show decision\n\t\t\t\tif ( trigger.type == UncannyAutomator.recipe.type ) {\n\t\t\t\t\tconsoleLogResult( 'success', 'Keep' );\n\t\t\t\t} else {\n\t\t\t\t\tconsoleLogResult( 'error', 'Remove' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if it matches the recipe type\n\t\t\treturn trigger.type == UncannyAutomator.recipe.type;\n\t\t} );\n\n\t\t// Check if debug mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// Start group\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.groupEnd();\n\t\t}\n\t}\n};\n\n/**\n * Performs a REST Call\n *\n * @param {String}   endPoint  Endpoint of the REST call\n * @param {Object}   data      Data to be sent in the call\n * @param {Function} onSuccess Function to be invoked if the call is successful\n * @param {Function} onFail    Function to be invoked if the call fails\n * @param {Object}   options   The parameters sent in the call\n * @return {undefined}\n */\nexport const restCall = ( endPoint = null, data = null, onSuccess = null, onFail = null, options = {} ) => {\n\t// Define the valid endpoints\n\tconst validEndpoints = [\n\t\t'actions_conditions_fields',\n\t\t'actions_conditions_update',\n\t\t'actions_order_and_conditions',\n\t\t'actions_order',\n\t\t'add',\n\t\t'change_post_recipe_type',\n\t\t'change_post_status',\n\t\t'change_post_title',\n\t\t'delete',\n\t\t'duplicate_action',\n\t\t'recipe_completions_allowed',\n\t\t'recipe_max_completions_allowed',\n\t\t'remove_schedule',\n\t\t'schedule_action',\n\t\t'set_recipe_requires_user',\n\t\t'set_recipe_terms',\n\t\t'triggers_change_logic',\n\t\t'update',\n\t\t'user-selector',\n\t];\n\n\t// Link to the support page\n\tconst supportPageURL = supportLink();\n\n\t// Check custom options\n\toptions = Object.assign({\n\t\trequiresRecipesObject: true,\n\t\trenderUI: true,\n\t\terrorMessaging: {\n\t\t\t// Access denied (access-denied)\n\t\t\t// 403. Usually caused by an invalid nonce or a server configuration.\n\t\t\t//  Reloading the page might fix the issue.\n\t\t\taccessDenied: {\n\t\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,\n\t\t\t\tcontent: sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,\n\t\t\t\t\t`<strong>${ endPoint }</strong>`\n\t\t\t\t),\n\t\t\t},\n\t\t\t// Not found.\n\t\t\t// 404. Thrown when Automator tries to do a request to a non-existing endpoint.\n\t\t\t//  Most probably an issue in Automator. Requires support.\n\t\t\tnotFound: {\n\t\t\t\ttitle: sprintf( UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.title, `<code style=\"margin: 0 6px\">${ endPoint }</code>` ),\n\t\t\t\tcontent: sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.content, \n\t\t\t\t\t`<a href=\"${ UncannyAutomator.dev.permalinksURL }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.sitePermalinks }</a>`,\n\t\t\t\t\t`<a href=\"${ supportPageURL }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.automatorSupport }</a>`\n\t\t\t\t)\n\t\t\t},\n\t\t\t// Request timeout. \n\t\t\t// 408. Caused by a server without enough resources.\n\t\t\t//  Requires the user to increase resources.\n\t\t\ttimeout: {\n\t\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.title,\n\t\t\t\tcontent: UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.content,\n\t\t\t},\n\t\t\t// Internal server error\n\t\t\t// 500. Server encountered an unexpected condition. We can't know if it's caused by Automator or another plugin automatically, we need to check the debug data shown below. Most of the time is an issue on Automator.\n\t\t\t//  Requires support.\n\t\t\tserverError: {\n\t\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.title,\n\t\t\t\tcontent: sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.content,\n\t\t\t\t\t`<a href=\"${ supportPageURL }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.automatorSupport }</a>`\n\t\t\t\t),\n\t\t\t},\n\t\t\t// Parser error. \n\t\t\t// There is likely a conflict with another plugin that throws a warning, making the returned data invalid.\n\t\t\t//  Most of the time, disabling all plugins but Automator will be enough. It might also be an issue in Automator, so it might require support.\n\t\t\tparserError: {\n\t\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.title,\n\t\t\t\tcontent: UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.content,\n\t\t\t},\n\t\t\t// Data missing.\n\t\t\t// Caused by missing data in Automator.\n\t\t\t//  Requires support.\n\t\t\tdataMissing: {\n\t\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.title,\n\t\t\t\tcontent: sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.content,\n\t\t\t\t\t`<a href=\"${ supportPageURL }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.contactSupport }</a>`,\n\t\t\t\t\t`<a href=\"${ UncannyAutomator.dev.automatorTools }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.automatorTools }</a>`\n\t\t\t\t)\n\t\t\t},\n\t\t\t// Generic error\n\t\t\t// Fallback\n\t\t\tgeneric: {\n\t\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.title,\n\t\t\t\tcontent: sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,\n\t\t\t\t\t`<a href=\"${ supportPageURL }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.automatorSupport }</a>`\n\t\t\t\t),\n\t\t\t}\n\t\t}\n\t}, options );\n\n\t// Check if the endPoint parameter is a valid endpoint\n\tif ( inArray( endPoint, validEndpoints ) ) {\n\t\t// Do AJAX\n\t\t$.ajax( {\n\t\t\tmethod: 'POST',\n\t\t\turl: `${ UncannyAutomator.restURL }/${ endPoint }/`,\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tdata: `${ $.param( data ) }&${ $.param( { doing_rest: 1 } ) }`,\n\t\t\tdataType: 'json',\n\n\t\t\t/**\n\t\t\t * Attachs Nonce the the header of the request\n\t\t\t *\n\t\t\t * @param {Object} xhr jqXHR\n\t\t\t * @return {undefined}\n\t\t\t */\n\t\t\tbeforeSend: ( xhr ) => {\n\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', UncannyAutomator.nonce );\n\t\t\t}\n\t\t} )\n\t\t\t// eslint-disable-next-line require-jsdoc\n\t\t\t.done( ( response, textStatus, errorThrown ) => {\n\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\tconsoleLogLabel( ` REST: ${ endPoint }`, true, {\n\t\t\t\t\t\tcollapseGroup: true,\n\t\t\t\t\t} );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( `Endpoint: ${ endPoint }` );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Data:' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( data );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Response:' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( response );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\n\t\t\t\t// Check if the request succeeded\n\t\t\t\tif ( response.success ) {\n\t\t\t\t\t// Check if we have the new recipes_object, otherwise the data will change on the server but not in the UI\n\t\t\t\t\tif ( isDefined( response.recipes_object ) || ! options.requiresRecipesObject ) {\n\t\t\t\t\t\t// Check if onSuccess\n\t\t\t\t\t\tif ( isDefined( onSuccess ) ) {\n\t\t\t\t\t\t\t// Check if we have to render the UI again\n\t\t\t\t\t\t\tif ( options.requiresRecipesObject && options.renderUI ) {\n\t\t\t\t\t\t\t\trecipeObject( 'create', {\n\t\t\t\t\t\t\t\t\tallRecipes: response.recipes_object,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Invoke callback\n\t\t\t\t\t\t\tonSuccess( response );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// The call was successful, but the new recipes_object is missing\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( 'The call was successful, but the new recipes_object is missing.' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the onFail callback is defined\n\t\t\t\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\t\t\t\t// Invoke callback\n\t\t\t\t\t\t\tonFail( response, 'data-missing' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// The call was successful, but there were errors\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( 'The call was successful, but there were errors.' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the onFail callback is defined\n\t\t\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\t\t\t// Invoke callback\n\t\t\t\t\t\tonFail( response, 'data-missing' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} )\n\t\t\t// eslint-disable-next-line require-jsdoc\n\t\t\t.fail( ( jqXHR, textStatus, errorThrown ) => {\n\t\t\t\t// Get error code\n\t\t\t\tlet errorCode = textStatus;\n\n\t\t\t\t// Get error messaging\n\t\t\t\tlet errorMessaging = options.errorMessaging.generic;\n\n\t\t\t\t// Improve readability of the error\n\t\t\t\tswitch ( errorCode ){\n\t\t\t\t\tcase 'parsererror':\n\t\t\t\t\t\t// Set code\n\t\t\t\t\t\terrorCode = 'parser-error';\n\n\t\t\t\t\t\t// Set messaging\n\t\t\t\t\t\terrorMessaging = options.errorMessaging.parserError;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t// Check the code\n\t\t\t\t\t\tif ( jqXHR.status == 403 ){\n\t\t\t\t\t\t\t// Set code\n\t\t\t\t\t\t\terrorCode = 'access-denied';\n\n\t\t\t\t\t\t\t// Set messaging\n\t\t\t\t\t\t\terrorMessaging = options.errorMessaging.accessDenied;\n\t\t\t\t\t\t} else if ( jqXHR.status == 404 ){\n\t\t\t\t\t\t\t// Set code\n\t\t\t\t\t\t\terrorCode = 'not-found';\n\n\t\t\t\t\t\t\t// Set messaging\n\t\t\t\t\t\t\terrorMessaging = options.errorMessaging.notFound;\n\t\t\t\t\t\t} else if ( jqXHR.status == 500 ){\n\t\t\t\t\t\t\t// Set code\n\t\t\t\t\t\t\terrorCode = 'server-error';\n\n\t\t\t\t\t\t\t// Set messaging\n\t\t\t\t\t\t\terrorMessaging = options.errorMessaging.serverError;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'timeout':\n\t\t\t\t\t\t// Set code\n\t\t\t\t\t\terrorCode = 'timeout';\n\n\t\t\t\t\t\t// Set messaging\n\t\t\t\t\t\terrorMessaging = options.errorMessaging.timeOut;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Show console messages if debug is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsoleLogLabel( ` REST: ${ endPoint }`, true, {\n\t\t\t\t\t\tcollapseGroup: true,\n\t\t\t\t\t} );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Data:' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( data );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Response' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( jqXHR );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( errorCode );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( errorThrown );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\n\t\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\t\tonFail( {\n\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t}, errorCode );\n\t\t\t\t}\n\n\t\t\t\t// Handle error by showing a modal with data\n\t\t\t\thandleFatalError({\n\t\t\t\t\ttitle:   errorMessaging.title,\n\t\t\t\t\twarning: errorMessaging.content,\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tconsole: `Data sent:\\n` +\n\t\t\t\t\t\t`${ JSON.stringify( data ) }\\n\\n` +\n\t\t\t\t\t\t`errorCode: \\n${ errorCode }\\n\\n` +\n\t\t\t\t\t\t`errorThrown:\\n${ JSON.stringify( errorThrown ) }\\n\\n` +\n\t\t\t\t\t\t`jqXHR: \\n${ JSON.stringify( jqXHR ) } \\n\\n`,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tconfirm: null,\n\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.close,\n\t\t\t\t\t\t\tonClick: ( $modal ) => {\n\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t$modal.destroy();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} );\n\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( `The ${ endPoint } endPoint does not exists. The valid endpoints are ${ validEndpoints.join( ', ' ) }` );\n\t}\n};\n\n/**\n * Returns support link\n * \n * @return {String} Support link\n */\nexport const supportLink = () => {\n\treturn addParametersToURL( addUTMParameters( UncannyAutomator.dev.supportPage, {\n\t\tmedium: 'error-handler',\n\t\tcontent: 'get-support-link'\n\t} ), {\n\t\tsubject: 'technical-support',\n\t\tversion: UncannyAutomator.version,\n\t\tsite_url: UncannyAutomator.siteURL\n\t} );\n}\n\n/**\n * Performs an AJAX request\n *\n * @param {String}   action    The ID of the action\n * @param {Object}   data      Data to be sent in the request\n * @param {Function} onSuccess Function to be invoked if the request is successful\n * @param {Function} onFail    Function to be invoked if the request fails\n * @return {undefined}\n */\nexport const AJAXRequest = ( action = null, data = null, onSuccess = null, onFail = null ) => {\n\t// Check that {action} is defined\n\tif ( isDefined( action ) ) {\n\t\t// Add {action} to the data object\n\t\tdata = $.extend( true, data, {\n\t\t\taction: action,\n\t\t\tnonce: UncannyAutomator.nonce,\n\t\t} );\n\n\t\t// Do AJAX\n\t\t$.ajax( {\n\t\t\tmethod: 'POST',\n\t\t\tdataType: 'json',\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\n\t\t\t// eslint-disable-next-line require-jsdoc\n\t\t\tsuccess: ( response ) => {\n\t\t\t\t// Show console messages if debug is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsoleLogLabel( 'AJAX call ', true, {\n\t\t\t\t\t\tcollapseGroup: true,\n\t\t\t\t\t} );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Data:' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( data );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Response' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( response );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\n\t\t\t\t// Reload page if user authentication fails\n\t\t\t\tif ( isDefined( response.status ) && response.status == 'auth-failed' ) {\n\t\t\t\t\t\t\n\t\t\t\t\t// Check if the onFail callback is defined\n\t\t\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\t\t\t// Invoke callback\n\t\t\t\t\t\tonFail( response );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle error by showing a modal with data\n\t\t\t\t\thandleFatalError({\n\t\t\t\t\t\ttitle:   UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,\n\t\t\t\t\t\twarning: sprintf(\n\t\t\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,\n\t\t\t\t\t\t\t`<strong>${ action }</strong>`\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tconsole: `Data sent:\\n` +\n\t\t\t\t\t\t\t`${ JSON.stringify( data ) }\\n\\n` +\n\t\t\t\t\t\t\t`errorCode: \\naccess-denied\\n\\n`,\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tconfirm: null,\n\t\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.close,\n\t\t\t\t\t\t\t\tonClick: ( $modal ) => {\n\t\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t\t$modal.destroy();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t} else if ( isDefined( onSuccess ) ) {\n\t\t\t\t\t// Invoke callback\n\t\t\t\t\tonSuccess( response, data );\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tstatusCode: {\n\t\t\t\t// eslint-disable-next-line require-jsdoc\n\t\t\t\t403: ( response ) => {\n\t\t\t\t\t// Show console messages if debug is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsoleLogLabel( 'AJAX call ', true, {\n\t\t\t\t\t\t\tcollapseGroup: true,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log( 'Data:' );\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log( data );\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log( 'Response' );\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsoleLogLabel( '403: Access denied', false, { bgColor: '#ff0000' } );\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the onFail callback is defined\n\t\t\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\t\t\t// Invoke callback\n\t\t\t\t\t\tonFail( response );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle error by showing a modal with data\n\t\t\t\t\thandleFatalError({\n\t\t\t\t\t\ttitle:   UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,\n\t\t\t\t\t\twarning: sprintf(\n\t\t\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,\n\t\t\t\t\t\t\t`<strong>${ action }</strong>`\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tconsole: `Data sent:\\n` +\n\t\t\t\t\t\t\t`${ JSON.stringify( data ) }\\n\\n` +\n\t\t\t\t\t\t\t`errorCode: \\naccess-denied\\n\\n`,\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tconfirm: null,\n\t\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.close,\n\t\t\t\t\t\t\t\tonClick: ( $modal ) => {\n\t\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t\t$modal.destroy();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t// eslint-disable-next-line require-jsdoc\n\t\t\tfail: ( response ) => {\n\t\t\t\t// Show console messages if debug is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsoleLogLabel( 'AJAX call ', true, {\n\t\t\t\t\t\tcollapseGroup: true,\n\t\t\t\t\t} );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Data:' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( data );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( 'Response' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( '%cUnknown error', 'color: red' );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.groupEnd();\n\t\t\t\t}\n\n\t\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\t\tonFail( response );\n\t\t\t\t}\n\t\t\t},\n\t\t} );\n\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( 'We cannot do this AJAX request. {action} is not defined.' );\n\t}\n};\n\n/**\n * Returns all the current value of the field, even if they aren't saved on the database\n * This will use .val() to get the values\n *\n * @param {Integer} itemId The ID of the item\n * @return {Object}         The fields value\n */\nexport const getCurrentFieldsValues = ( { itemID, field } ) => {\n\tconst values = {};\n\n\t// Iterate the items' group of fields\n\t// Check if there is a itemID defined\n\tif ( isDefined( itemID ) ) {\n\t\t$.each( UncannyAutomator.recipe.items[ itemID ].options, ( index, groupOfFields ) => {\n\t\t\t// Iterate each field\n\t\t\t$.each( groupOfFields.fields, ( i, field ) => {\n\t\t\t\t// Get value\n\t\t\t\tconst fieldId = field.getFieldID();\n\t\t\t\tlet fieldValue = field.getValue();\n\n\t\t\t\t// Check if it isn't defined. In that case get the current value from the currentValue attribute\n\t\t\t\tif ( ! isDefined( fieldValue ) ) {\n\t\t\t\t\tfieldValue = field.getAttributes().currentValue;\n\t\t\t\t}\n\n\t\t\t\t// Check if the field is a select with custom value\n\t\t\t\tif ( field.getAttributes().fieldType == 'select' && fieldValue == 'automator_custom_value' ) {\n\t\t\t\t\tvalues[ `${ fieldId }_custom` ] = field.getSelectCustomValue();\n\t\t\t\t}\n\n\t\t\t\t// Save value\n\t\t\t\tvalues[ fieldId ] = fieldValue;\n\n\t\t\t\t// Check if it's a select and also get the readable value\n\t\t\t\tif ( ! isEmpty( fieldValue ) && field.getAttributes().fieldType == 'select' ) {\n\t\t\t\t\t// Get and save the readable value\n\t\t\t\t\tvalues[ `${ fieldId }_readable` ] = field.getReadableValue();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t} else if ( isDefined( field ) ) {\n\t\t// Try to get it using the field data\n\t\ttry {\n\t\t\tfield.$wrapper.get(0).parentNode.querySelectorAll( 'select, input, textarea' ).forEach( ( formField ) => {\n\t\t\t\tif ( isDefined( formField.fieldInstance ) ) {\n\t\t\t\t\tvalues[ formField.fieldInstance.attributes.optionCode ] = formField.fieldInstance.getValue();\n\t\t\t\t}\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tconsole.log( e );\n\t\t}\n\t}\n\n\treturn values;\n};\n\n/**\n * Returns a Field instance given a item and field ID\n *\n * @param {Integer} itemId  The item ID\n * @param {String}  fieldId The field ID\n * @return {Field}            The Field instance\n */\nexport const getField = ( itemId, fieldId ) => {\n\tlet field;\n\n\t// Make sure the data required exists\n\tif ( ! isEmpty( itemId ) && ! isEmpty( fieldId ) ) {\n\t\t$.each( UncannyAutomator.recipe.items[ itemId ].options, ( optionsGroupId, optionsGroup ) => {\n\t\t\t$.each( optionsGroup.fields, ( index, fieldInstance ) => {\n\n\t\t\t\tif ( fieldId == fieldInstance.getFieldID() ) {\n\t\t\t\t\tfield = fieldInstance;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t} else {\n\t\t// Work around for conditions\n\t\t// This MUST change once we extend the <uo-text-field> web component and use it here\n\t\t// AND we change how AJAX is used on fields\n\t\tconst $fieldFromDOM = document.querySelector( `[name=\"${ fieldId }\"]:not([data-item-id])` );\n\n\t\tif ( isDefined( $fieldFromDOM ) && isDefined( $fieldFromDOM.fieldInstance ) ) {\n\t\t\tfield = $fieldFromDOM.fieldInstance;\n\t\t}\n\t}\n\n\treturn field;\n};\n\n/**\n * Returns data about a trigger, action or closure\n *\n * @param {Integer} integrationID The item ID\n * @param {String}  itemType      The item type. Valid values are trigger, action and closure\n * @param {String}  itemCode      The item code\n * @return {Object}                Item's data\n */\nexport const getGlobalItem = ( integrationID = '', itemType = '', itemCode = '' ) => {\n\tlet theItem;\n\n\t// Check if all are defined\n\tif ( ! isEmpty( integrationID ) && ! isEmpty( itemType ) && ! isEmpty( itemCode ) ) {\n\t\tlet integrationItems = {};\n\n\t\t// Check if the we're trying to get a trigger or action\n\t\tif ( itemType == 'trigger' || itemType == 'action' ) {\n\t\t\t// Check if the integration exists\n\t\t\tif ( isDefined( UncannyAutomator.integrations[ integrationID ] ) ) {\n\t\t\t\t// Create a reference to the integration\n\t\t\t\tconst integration = UncannyAutomator.integrations[ integrationID ];\n\n\t\t\t\t// Check if the items are defined\n\t\t\t\tif ( isDefined( integration.items ) ) {\n\t\t\t\t\t// Set integrationItems\n\t\t\t\t\tintegrationItems =\n\t\t\t\t\t\titemType == 'trigger'\n\t\t\t\t\t\t\t? integration.items.triggers.available\n\t\t\t\t\t\t\t: integration.items.actions.available;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( itemType == 'closure' ) {\n\t\t\tintegrationItems = UncannyAutomator.closures;\n\t\t}\n\n\t\t// Search for the item\n\t\t$.each( integrationItems, ( index, item ) => {\n\t\t\tif ( item.code == itemCode ) {\n\t\t\t\t// Save the item\n\t\t\t\ttheItem = item;\n\n\t\t\t\t// Return false in the loop callback to break the loop\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\t}\n\n\t// Return the item\n\treturn theItem;\n};\n\n/**\n * Sets the recipe \"requires user\" value\n *\n * @param {Boolean}  requires  TRUE if the recipe requires a user\n * @param {Function} onSuccess Callback, on success\n * @param {Function} onFail    Callback, on fail\n * @return {undefined}\n */\nexport const recipeSetRequiresUser = ( requires = false, onSuccess, onFail ) => {\n\trestCall(\n\t\t'set_recipe_requires_user',\n\t\t{\n\t\t\trecipePostID: UncannyAutomator.recipe.id,\n\t\t\trequiresUser: requires,\n\t\t},\n\t\t( response ) => {\n\t\t\t// Check if the call was successful\n\t\t\tif ( response.success ) {\n\t\t\t\t// Check if the onSuccess callback is defined\n\t\t\t\tif ( isDefined( onSuccess ) ) {\n\t\t\t\t\t// Update the global \"requiresData\"\n\t\t\t\t\tUncannyAutomator.recipe.requiresUserData = requires;\n\n\t\t\t\t\t// Get the User Selector\n\t\t\t\t\tconst $userSelector = getDOMElements( 'user-selector' );\n\t\t\t\t\t// Show it\n\t\t\t\t\t$userSelector.addClass( 'user-selector--show' );\n\n\t\t\t\t\tonSuccess( response );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t( response ) => {\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log( \"Couldn't set the recipe requires user status\" );\n\t\t\t}\n\n\t\t\t// Check if the onFail callback is defined\n\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\tonFail( response );\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\trequiresRecipesObject: false\n\t\t}\n\t);\n};\n\n/**\n * Returns DOM elements, such as a metabox, item of optionGroup\n * In Automator DOM elements are deleted and created in each step, so the reference to a DOM element change.\n *\n * @param {String} element    Code of the element that you want to get\n * @param {Object} attributes Contains required data to get the elements. Depends of the \"element\" value. Check the variable requiredData in each case.\n * @return {Object}             Object with DOM elements. The properties depend of \"element\"\n */\nexport const getDOMElements = ( element, attributes = {} ) => {\n\t// Create response object\n\tlet response = {};\n\n\t// Define valid actions\n\tconst validElements = [ 'metabox', 'items', 'item', 'optionGroup', 'lastItem', 'user-selector', 'itemsContainer' ];\n\n\t// Check if the action is not undefined and if it's a valid action\n\tif ( isDefined( element ) && inArray( element, validElements ) ) {\n\t\t// Create array that will store all the requires attributes properties based on the requested element\n\t\tlet requiredData = [];\n\n\t\tswitch ( element ) {\n\t\t\tcase 'metabox':\n\t\t\t\t// Extend default attributes object with default values\n\t\t\t\tattributes = $.extend( {}, attributes );\n\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'type' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\tattributes.cssSelectorMetabox = '';\n\n\t\t\t\t\t// Check the itemType\n\t\t\t\t\tif ( attributes.type == 'trigger' ) {\n\t\t\t\t\t\tattributes.cssSelectorMetabox = '#recipe-triggers-ui';\n\t\t\t\t\t} else if ( attributes.type == 'action' ) {\n\t\t\t\t\t\tattributes.cssSelectorMetabox = '#recipe-actions-ui';\n\t\t\t\t\t}\n\n\t\t\t\t\tconst $metabox = $( attributes.cssSelectorMetabox );\n\n\t\t\t\t\tresponse = $metabox;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'items':\n\t\t\t\t// Extend default attributes object with default values\n\t\t\t\tattributes = $.extend( {}, attributes );\n\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'type' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\tconst metabox = getDOMElements( 'metabox', {\n\t\t\t\t\t\ttype: attributes.type,\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Get jQuery DOM element\n\t\t\t\t\tconst $items = metabox.find(\n\t\t\t\t\t\t'.uap-item:not(.item--user-selector):not(.uap-item--actions-initial):not(.item--closure)'\n\t\t\t\t\t);\n\n\t\t\t\t\t// Add element to the response\n\t\t\t\t\tresponse = $items;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'item':\n\t\t\t\t// Extend default attributes object with default values\n\t\t\t\tattributes = $.extend( {}, attributes );\n\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'id' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Define CSS Selector\n\t\t\t\t\tattributes.cssSelector = `.uap .uap-item[data-id=\"${ attributes.id }\"]`;\n\n\t\t\t\t\t// Get jQuery DOM element\n\t\t\t\t\tconst $item = $( attributes.cssSelector ),\n\t\t\t\t\t\t$contentContainer = $item.find( '.uap-item-inner-content' );\n\n\t\t\t\t\t// Add element to the response\n\t\t\t\t\tresponse.item = $item;\n\t\t\t\t\tresponse.contentContainer = $contentContainer;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'optionGroup':\n\t\t\t\t// Extend default attributes object with default values\n\t\t\t\tattributes = $.extend( {}, attributes );\n\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'itemID', 'groupID' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Get main object\n\t\t\t\t\tconst item = getDOMElements( 'item', { id: attributes.itemID } ).item;\n\n\t\t\t\t\t// Define CSS Selector\n\t\t\t\t\tattributes.cssSelectorTokenInSentence = `.item-title__token[data-token-id=\"${ attributes.groupID }\"]`;\n\t\t\t\t\tattributes.cssSelectorFieldsContainer = `.item-options__group[data-optiongroup=\"${ attributes.groupID }\"]`;\n\n\t\t\t\t\tconst $tokenInSentence = item.find( attributes.cssSelectorTokenInSentence ),\n\t\t\t\t\t\t$fieldsContainer = item.find( attributes.cssSelectorFieldsContainer ),\n\t\t\t\t\t\t$optionsContainer = item.find( '.item-options' );\n\n\t\t\t\t\tresponse.tokenInSentence = $tokenInSentence;\n\t\t\t\t\tresponse.fieldsContainer = $fieldsContainer;\n\t\t\t\t\tresponse.optionsContainer = $optionsContainer;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'lastItem':\n\t\t\t\t// Extend default attributes object with default values\n\t\t\t\tattributes = $.extend( {}, attributes );\n\n\t\t\t\t// Define required attributes properties\n\t\t\t\trequiredData = [ 'type' ];\n\n\t\t\t\t// Check if the attributes object has all the required properties\n\t\t\t\tif ( inArray( requiredData, Object.keys( attributes ) ) ) {\n\t\t\t\t\t// Get metabox\n\t\t\t\t\tconst metabox = getDOMElements( 'metabox', {\n\t\t\t\t\t\ttype: attributes.type,\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Get last item\n\t\t\t\t\tconst lastItem = metabox\n\t\t\t\t\t\t.find( '.uap-item:not(.item--user-selector):not(.uap-item--actions-initial):not(.item--closure)' )\n\t\t\t\t\t\t.last();\n\n\t\t\t\t\tresponse = lastItem;\n\t\t\t\t} else {\n\t\t\t\t\t// Show to the developer what attributes are missing\n\t\t\t\t\tconst missingAttributes = JSON.stringify( arrayDifference( attributes, requiredData ) );\n\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( `itemsObject: Some attributes are missing: ${ missingAttributes }` );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'user-selector':\n\t\t\t\t// Get user selector container\n\t\t\t\tresponse = $( '.user-selector' );\n\n\t\t\t\tbreak;\n\t\t\n\t\t\tcase 'itemsContainer':\n\t\t\t\t\n\t\t\t\tif ( ! isEmpty( attributes.type ) ) {\n\t\t\t\t\tif ( attributes.type === 'trigger' ) {\n\t\t\t\t\t\tresponse = document.querySelector( '#recipe-triggers-ui .uap-items' );\n\t\t\t\t\t} else if ( attributes.type === 'action' ) {\n\t\t\t\t\t\tif ( ! isEmpty( attributes.actionContext ) ) {\n\t\t\t\t\t\t\tswitch ( attributes.actionContext ) {\n\t\t\t\t\t\t\t\tcase 'instant':\n\t\t\t\t\t\t\t\t\tresponse = document.querySelector( '#recipe-actions-ui .uap-items.uap-items--actions-instant' );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'delayed':\n\t\t\t\t\t\t\t\t\tresponse = document.querySelector( '#recipe-actions-ui .uap-items.uap-items--actions-delayed' );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'scheduled':\n\t\t\t\t\t\t\t\t\tresponse = document.querySelector( '#recipe-actions-ui .uap-items.uap-items--actions-scheduled' );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t} else if ( UncannyAutomator.dev.developerMode ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error( `getDOMElements: The element \"${ element }\" isn't defined` );\n\t}\n\n\treturn response;\n};\n\n/**\n * Returns the integration icon, both URL and node\n *\n * @param {String} integrationID The integration ID\n * @return {Object}               Object with the image URL and node\n */\nexport const getIntegrationIcon = ( integrationID = '' ) => {\n\t// Default response\n\tconst response = {\n\t\turl: '',\n\t\tnode: null,\n\t};\n\n\t// Get the integration data\n\tconst integration = UncannyAutomator.integrations[ integrationID ];\n\n\t// Check if the integration exists\n\tif ( isDefined( integration ) ) {\n\t\t// Create img element\n\t\tresponse.node = document.createElement( 'img' );\n\n\t\t// Check if it has a svg image\n\t\tif ( isDefined( integration.icon_svg ) ) {\n\t\t\t// Get the URL\n\t\t\tresponse.url = integration.icon_svg;\n\n\t\t\t// Add source to the img element\n\t\t\tresponse.node.setAttribute( 'src', integration.icon_svg );\n\n\t\t\t// Add alt\n\t\t\tresponse.node.setAttribute( 'alt', integration.name );\n\t\t} else if ( isDefined( integration.icon_32 ) && isDefined( integration.icon_64 ) ) {\n\t\t\t// Get the URLs\n\t\t\tresponse.url = {\n\t\t\t\ticon16: integration.icon_16,\n\t\t\t\ticon32: integration.icon_32,\n\t\t\t\ticon64: integration.icon_64,\n\t\t\t};\n\n\t\t\t// Add source to the img element\n\t\t\tresponse.node.setAttribute( 'src', integration.icon_32 );\n\n\t\t\tresponse.node.setAttribute(\n\t\t\t\t'srcset',\n\t\t\t\t`${ integration.icon_32 } 1x, ${ integration.icon_64 } 2x`\n\t\t\t);\n\n\t\t\t// Add alt\n\t\t\tresponse.node.setAttribute( 'alt', integration.name );\n\t\t}\n\t}\n\n\treturn response;\n};\n\n/**\n * Parses string with SENTENCE tokens\n *\n * @param {Object} item   The item\n * @param {String} string The string with the tokens\n * @param {Object} data   Object with the data to replace the text in the tokens.\n * @return {Object}  response                   Object with information about the string\n *         {String}  response.html              The string with the tokens replaced with the data and enclosed in HTML tags\n *         {Object}  response.elements          Node parts of the sentence\n *         {Array}   response.elements.tokens   Array of jQuery object. All the tokens part of the sentence\n *         {Array}   response.parts             Object with information about each part of the sentence\n */\nexport const parseStringWithTokens = ( item = null, string = '', data = {} ) => {\n\tlet response = null;\n\n\tif (\n\t\t/* isDefined( UncannyAutomator.recipe.items[ item.id ].itemSentence )\n        && forceReDo == false */\n\t\tfalse\n\t) {\n\t\tresponse = UncannyAutomator.recipe.items[ item.id ].itemSentence;\n\t} else {\n\t\t// Create response object\n\t\tresponse = {\n\t\t\tplain: '',\n\t\t\tbrackets: '',\n\t\t\thtml: $( '<div/>' ),\n\t\t\telements: {\n\t\t\t\tnormal: [],\n\t\t\t\ttoken: [],\n\t\t\t},\n\t\t\tparts: [],\n\t\t};\n\n\t\t// Trim string\n\t\tstring = string.trim();\n\n\t\t// Check if the string isn't empty\n\t\tif ( ! isEmpty( string ) ) {\n\t\t\t// Create regex\n\t\t\tconst tokensRegex = new RegExp( /\\{\\{(.*?)\\}\\}/gm ),\n\t\t\t\tnormals = [],\n\t\t\t\ttokens = [];\n\n\t\t\tlet mappedString = string;\n\n\t\t\t// Get tokens\n\t\t\tlet tokenNumber = 0;\n\n\t\t\tstring = string.replace( tokensRegex, ( fullMatch, token ) => {\n\t\t\t\tconst tokenParts = token.split( ':' );\n\n\t\t\t\t// Get the token placeholder text\n\t\t\t\tconst tokenPlaceholderText = tokenParts[ 0 ];\n\n\t\t\t\t// Get the token value ID\n\t\t\t\tconst tokenValueID = tokenParts[ 1 ];\n\n\t\t\t\t// Get the ID of the group of fields this token has to open\n\t\t\t\t// Check if the token should open a different group of options\n\t\t\t\tconst optionsID = isDefined( tokenParts[ 2 ] ) ? tokenParts[ 2 ] : tokenValueID;\n\n\t\t\t\ttoken = {\n\t\t\t\t\ttype: 'token',\n\t\t\t\t\tid: tokenValueID,\n\t\t\t\t\ttext: tokenPlaceholderText,\n\t\t\t\t\toptionsID: optionsID,\n\t\t\t\t\thasFields: isDefined( item.options[ optionsID ] ),\n\t\t\t\t};\n\n\t\t\t\t// Check if we have data for the token\n\t\t\t\tif ( isDefined( data[ token.id ] ) ) {\n\t\t\t\t\tlet readableText;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tdata[ token.id ] == 'automator_custom_value' &&\n\t\t\t\t\t\tisDefined( data[ `${ token.id }_custom` ] )\n\t\t\t\t\t) {\n\t\t\t\t\t\treadableText = data[ `${ token.id }_custom` ];\n\t\t\t\t\t} else if ( isDefined( data[ `${ token.id }_readable` ] ) ) {\n\t\t\t\t\t\treadableText = data[ `${ token.id }_readable` ];\n\t\t\t\t\t}\n\n\t\t\t\t\ttoken.originalText = token.text;\n\t\t\t\t\ttoken.text = isDefined( readableText ) ? readableText : data[ token.id ];\n\t\t\t\t}\n\n\t\t\t\t// Add token\n\t\t\t\ttokens.push( token );\n\n\t\t\t\t// Add token to the mapped string\n\t\t\t\tmappedString = mappedString.replace( fullMatch, `{{token:${ tokenNumber }}}` );\n\t\t\t\ttokenNumber++;\n\n\t\t\t\treturn '{{v}}';\n\t\t\t} );\n\n\t\t\tconst stringParts = string.split( '{{v}}' );\n\n\t\t\t// Get normals\n\t\t\tlet normalNumber = 0;\n\t\t\t$.each( stringParts, ( key, sentenceSection ) => {\n\t\t\t\tif ( sentenceSection != '' ) {\n\t\t\t\t\t// Create normal part\n\t\t\t\t\tconst normal = {\n\t\t\t\t\t\ttype: 'normal',\n\t\t\t\t\t\ttext: sentenceSection,\n\t\t\t\t\t};\n\n\t\t\t\t\t// Add normal text\n\t\t\t\t\tnormals.push( normal );\n\n\t\t\t\t\t// Add \"normal\" part to the mapped string\n\t\t\t\t\tmappedString = mappedString.replace( sentenceSection, `{{normal:${ normalNumber }}}` );\n\t\t\t\t\tnormalNumber++;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Create response.parts\n\t\t\tlet match;\n\n\t\t\twhile ( ( match = tokensRegex.exec( mappedString ) ) !== null ) {\n\t\t\t\t// Get info\n\t\t\t\tlet part = match[ 1 ].split( ':' );\n\n\t\t\t\tpart = {\n\t\t\t\t\ttype: part[ 0 ],\n\t\t\t\t\tindex: part[ 1 ],\n\t\t\t\t};\n\n\t\t\t\t// Get part object and add to parts\n\t\t\t\tif ( part.type == 'normal' ) {\n\t\t\t\t\tresponse.parts.push( normals[ part.index ] );\n\t\t\t\t} else {\n\t\t\t\t\tresponse.parts.push( tokens[ part.index ] );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if the sentence has tokens\n\t\t\tlet itemTokens = null;\n\n\t\t\t// Create plain text and HTML versions\n\t\t\t$.each( response.parts, ( index, part ) => {\n\t\t\t\t// Plain text\n\t\t\t\tresponse.plain += part.text;\n\n\t\t\t\t// HTML\n\t\t\t\tif ( part.text != ' ' ) {\n\t\t\t\t\tlet elementAttributes,\n\t\t\t\t\t\ttext = part.text;\n\n\t\t\t\t\tlet contentIsNode = false,\n\t\t\t\t\t\ttagNodeContent = null;\n\n\t\t\t\t\tif ( part.type == 'normal' || ( part.type == 'token' && ! part.hasFields && ! item.isMissing ) ) {\n\t\t\t\t\t\telementAttributes = {\n\t\t\t\t\t\t\tclass: 'item-title__normal',\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Add normal-text part to the brackets version\n\t\t\t\t\t\tresponse.brackets += part.text;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst CSSClass = 'item-title__token';\n\n\t\t\t\t\t\telementAttributes = {\n\t\t\t\t\t\t\tclass: CSSClass,\n\t\t\t\t\t\t\t'data-token-id': part.id,\n\t\t\t\t\t\t\t'data-options-id': part.optionsID,\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Check if it's using a valid ID\n\t\t\t\t\t\tif ( isDefined( item.options[ part.optionsID ] ) ) {\n\t\t\t\t\t\t\t// Check if the section is valid\n\t\t\t\t\t\t\tif ( item.options[ part.optionsID ].isValid ) {\n\t\t\t\t\t\t\t\t// Add filled class\n\t\t\t\t\t\t\t\telementAttributes.class += ' item-title__token--filled';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if it's filled\n\t\t\t\t\t\tif ( isDefined( part.originalText ) ) {\n\t\t\t\t\t\t\t// Add filled class\n\t\t\t\t\t\t\t// elementAttributes[ 'class' ] += ' item-title__token--filled';\n\n\t\t\t\t\t\t\t// Check if the text is a token\n\t\t\t\t\t\t\t// let isValidToken = false;\n\n\t\t\t\t\t\t\t// Remove HTML from the text. We'll only add plain text in the sentence\n\t\t\t\t\t\t\ttext = decodeEntities( text );\n\t\t\t\t\t\t\ttext = text.replace( /(<([^>]+)>)/gi, \"\" );\n\n\t\t\t\t\t\t\tif ( tokensRegex.test( text ) ) {\n\t\t\t\t\t\t\t\t// Check if we already have the tokens data\n\t\t\t\t\t\t\t\tif ( ! isDefined( itemTokens ) ) {\n\t\t\t\t\t\t\t\t\titemTokens = new Tokens( item.itemType, 'text', {\n\t\t\t\t\t\t\t\t\t\tincludeGroupName: false,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Text attributes\n\t\t\t\t\t\t\t\tconst textAttributes = {}\n\n\t\t\t\t\t\t\t\t// Get first and last three words\n\t\t\t\t\t\t\t\tconst words = text.split( /\\s+/ );\n\t\t\t\t\t\t\t\tif ( words.length > 6 ) {\n\t\t\t\t\t\t\t\t\ttext = `${ words.slice( 0, 3 ).join( ' ' ) } ... ${ words.slice( -3 ).join( ' ' ) }`;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Check if there is an ID defined\n\t\t\t\t\t\t\t\tif ( isDefined( item ) && isDefined( item.id ) ) {\n\t\t\t\t\t\t\t\t\ttextAttributes.itemID = item.id;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Check if it's a valid token\n\t\t\t\t\t\t\t\tconst token = itemTokens.renderTextWithTokens( text, textAttributes );\n\n\t\t\t\t\t\t\t\tif ( isDefined( token ) ) {\n\t\t\t\t\t\t\t\t\t// Change the validity of the token\n\t\t\t\t\t\t\t\t\t// isValidToken = true;\n\t\t\t\t\t\t\t\t\tcontentIsNode = true;\n\t\t\t\t\t\t\t\t\ttagNodeContent = token;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( ! contentIsNode ) {\n\t\t\t\t\t\t\t\t// Define text of the token\n\t\t\t\t\t\t\t\tconst abbreviatedText = abbreviateText( text, 30 );\n\n\t\t\t\t\t\t\t\t// Check if the text was long enough to abbreviate it\n\t\t\t\t\t\t\t\tif ( abbreviatedText.isAbbreviated ) {\n\t\t\t\t\t\t\t\t\t// Add tooltip with the complete text\n\t\t\t\t\t\t\t\t\telementAttributes[ 'uap-tooltip' ] = text;\n\n\t\t\t\t\t\t\t\t\t// Replace original text\n\t\t\t\t\t\t\t\t\ttext = abbreviatedText.text;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Try to add the name of the label\n\t\t\t\t\t\t\t// First make sure the item is not missing\n\t\t\t\t\t\t\tif ( ! item.isMissing ) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t// Get the label of the field attached to this part of the sentence\n\t\t\t\t\t\t\t\t\tconst linkedField = getField( item.id, part.id );\n\t\t\t\t\t\t\t\t\tconst fieldLabel = linkedField.attributes.label;\n\n\t\t\t\t\t\t\t\t\t// Check if it's just text for now\n\t\t\t\t\t\t\t\t\tif ( ! contentIsNode ) {\n\t\t\t\t\t\t\t\t\t\ttext = `${ linkedField.attributes.showLabelInSentence ? `<span class=\"item-title__token-label\">${ fieldLabel }:</span>` : '' } ${ isEmpty( text ) ? `<em class=\"uap-empty-value\">${ UncannyAutomator.i18n.emptyValue }</em>` : text }`.trim();\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tconst $wrap = document.createElement( 'span' );\n\t\t\t\t\t\t\t\t\t\t$wrap.appendChild( tagNodeContent );\n\n\t\t\t\t\t\t\t\t\t\tif ( linkedField.attributes.showLabelInSentence ) {\n\t\t\t\t\t\t\t\t\t\t\t$wrap.insertAdjacentHTML( 'afterBegin', `<span class=\"item-title__token-label\">${ fieldLabel }: </span>` );\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\ttagNodeContent = $wrap;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch ( e ) {}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add token to the brackets version\n\t\t\t\t\t\tresponse.brackets += `{{${ decodeEntities( text ) }}}`;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst element = $( '<span/>', elementAttributes );\n\n\t\t\t\t\tif ( contentIsNode ) {\n\t\t\t\t\t\telement.append( tagNodeContent );\n\t\t\t\t\t} else {\n\t\t\t\t\t\telement.html( text );\n\t\t\t\t\t}\t\t\t\t\t\n\n\t\t\t\t\t// Add to the elements array\n\t\t\t\t\tresponse.elements[ part.type ].push( element );\n\n\t\t\t\t\t// Append HTML\n\t\t\t\t\tresponse.html.append( element );\n\t\t\t\t} else {\n\t\t\t\t\t// Add white spaces to the brackets version\n\t\t\t\t\tresponse.brackets += part.text;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Convert array of jQuery elements into wrapped set of elements\n\t\t\tresponse.elements.normal = $( response.elements.normal ).map( ( index, element ) => {\n\t\t\t\treturn element.get();\n\t\t\t} );\n\t\t\tresponse.elements.token = $( response.elements.token )\n\t\t\t\t.map( ( index, element ) => {\n\t\t\t\t\treturn element.get();\n\t\t\t\t} )\n\t\t\t\t.filter( ':not(.item-title__normal)' );\n\t\t}\n\n\t\tUncannyAutomator.recipe.items[ item.id ].itemSentence = response;\n\t}\n\n\treturn response;\n};\n\n/**\n * Opens URL on a new centered window\n *\n * @param {String}   options         The options\n * @param {String}   options.url     The URL\n * @param {String}   options.title   The window title\n * @param {Integer}  options.w       The window width\n * @param {Integer}  options.h       The window height\n * @param {Function} options.onClose Callback invoked when the window is closed\n * @return {WindowProxy}               The window instance\n */\nexport const openCenteredWindow = ( { url, title, w, h, onClose } ) => {\n\t// Fixes dual-screen position\n\tconst dualScreenLeft = isDefined( window.screenLeft ) ? window.screenLeft : window.screenX;\n\tconst dualScreenTop = isDefined( window.screenTop ) ? window.screenTop : window.screenY;\n\n\tlet width = document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n\tif ( window.innerWidth ) {\n\t\twidth = window.innerWidth;\n\t}\n\n\tlet height = document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\tif ( window.innerHeight ) {\n\t\theight = window.innerHeight;\n\t}\n\n\tconst systemZoom = width / window.screen.availWidth;\n\tconst left = ( width - w ) / 2 / systemZoom + dualScreenLeft;\n\tconst top = ( height - h ) / 2 / systemZoom + dualScreenTop;\n\tconst newWindow = window.open(\n\t\turl,\n\t\ttitle,\n\t\t`\n\t\tscrollbars=yes,\n\t\twidth=${ w / systemZoom }, \n\t\theight=${ h / systemZoom }, \n\t\ttop=${ top }, \n\t\tleft=${ left }\n\t\t`\n\t);\n\n\tif ( window.focus ) {\n\t\tnewWindow.focus();\n\t}\n\n\t// Check if there is an onClose event defined\n\tif ( isDefined( onClose ) ) {\n\t\t/**\n\t\t * Checks if the window was closed\n\t\t */\n\t\tconst wasWindowClosed = () => {\n\t\t\tif ( newWindow.closed ) {\n\t\t\t\tonClose();\n\t\t\t} else {\n\t\t\t\t// Check in .5 seconds again\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\twasWindowClosed();\n\t\t\t\t}, 500 );\n\t\t\t}\n\t\t};\n\n\t\twasWindowClosed();\n\t}\n\n\treturn newWindow;\n};\n\n/**\n * Checks if two strings are equal\n *\n * @param {String}  string1                String to be compared\n * @param {String}  string2                String to be compared\n * @param {Object}  settings               Object with settings\n * @param {Boolean} settings.caseSensitive If true, uppercase and lowercase chars will be treated as distinct\n * @return {Boolean}                         True if both strings are equal\n */\nexport const compareStrings = ( string1, string2, settings = { caseSensitive: true } ) => {\n\t// Create response variable\n\tlet response = false;\n\n\t// Check if it's case sensitive\n\tif ( ! settings.caseSensitive ) {\n\t\tresponse = string1.toString().toLowerCase() == string2.toString().toLowerCase();\n\t} else {\n\t\tresponse = string1.toString() == string2.toString();\n\t}\n\n\treturn response;\n};\n\n/**\n * Checks if a value exists in an array\n * If the needle is an array then it will check if all his elements exists in the haystack\n *\n * @param {Mixed} needle   The searched value. The comparison between values is strict. If the needle is an array then it will check if all his elements exists in the haystack\n * @param {Array} haystack An array through which to search.\n * @return {Boolean}           True if needle is found in the array or if needle is an array, TRUE if all the elements from the needle are in haystack\n */\nexport const inArray = ( needle, haystack ) => {\n\tlet response = false;\n\n\tif ( Array.isArray( needle ) ) {\n\t\t// Check that all the elements from the array \"value\" are in the array \"array\"\n\t\tresponse = arrayDifference( needle, haystack ).length == 0;\n\t} else {\n\t\t// Check if one element is in an array\n\t\tresponse = $.inArray( needle, haystack ) !== -1;\n\t}\n\n\treturn response;\n};\n\n/**\n * Compares the values of two arrays and returns the difference\n * Compares array1 against one array and returns the values in array1 that are not present in array2.\n * Examples:\n * +-------------------+-------------+--------------+\n * |      array1       |   array2    |    return    |\n * +-------------------+-------------+--------------+\n * | [ 1, 2, 3, 4, 5 ] | [ 1, 3, 4 ] | [ 2, 5]      |\n * | [ 1, 2, 3 ]       | [ 2, 3 ]    | [ 1 ]        |\n * | [ 2, 3 ]          | [ 1, 2, 3 ] | []           |\n * | [ 1, 2 ]          | [ 1, 2 ]    | []           |\n * | [ '1', '2' ]      | [ 1, 2 ]    | [ '1', '2' ] |\n * +-------------------+-------------+--------------+\n *\n * @param {Array} array1 The array to compare from\n * @param {Array} array2 An array to compare against\n * @return {Array}          Array containing all the entries from array1 that are not present in array2\n */\nexport const arrayDifference = ( array1, array2 ) => {\n\treturn $( array1 ).not( array2 ).get();\n};\n\n/**\n * Determines whether a variable is a string\n *\n * @param {Mixed} string The variable being evaluated\n * @return {Boolean}         True if the variable is an string\n */\nexport const isString = ( string ) => {\n\treturn typeof string === 'string';\n};\n\n/**\n * Removes all spaces from a string\n *\n * @param {String} string The string\n * @return  {String}        String without spaces\n */\nexport const removeSpaces = ( string ) => {\n\treturn string.replace( /\\s/g, '' );\n};\n\n/**\n * Replaces curly braces\n *\n * @param {String} string The string to be searched\n * @param {String} start  The value to replace the for {{\n * @param {String} end    The value to replace the for }}\n * @return {String}          The value with the replaced values\n */\nexport const replaceCurlyBraces = ( string = '', start = '', end = '' ) => {\n\tstring = string.replace( /{{/g, start );\n\tstring = string.replace( /}}/g, end );\n\treturn string;\n};\n\n/**\n * Creates a console log label\n *\n * @param {String}  text    Text to show after the label\n * @param {Boolean} isGroup Define if we have to do a console.group instead of console.log\n * @param {Object}  options The options\n */\nexport const consoleLogLabel = ( text = '', isGroup = false, options = {} ) => {\n\t// Output if the developer mode is enabled\n\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t// Check if the user defined a custom background color\n\t\tif ( ! isDefined( options.bgColor ) ) {\n\t\t\toptions.bgColor = '#0790e8';\n\t\t}\n\n\t\t// Define console log Automator style\n\t\tconst labelStyle = `background: ${ options.bgColor }; color: #fff; font-weight: 500; padding: 2px 6px; font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif; border-radius: 8px;`;\n\n\t\t// Do console log\n\t\tif ( isGroup ) {\n\t\t\tif ( isDefined( options.collapseGroup ) && options.collapseGroup ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.groupCollapsed( '%cAutomator', labelStyle, text );\n\t\t\t} else {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.group( '%cAutomator', labelStyle, text );\n\t\t\t}\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log( '%cAutomator', labelStyle, text );\n\t\t}\n\t}\n};\n\n/**\n * Creates a custom console log with colors to\n * represent success and failure\n *\n * @param {String} status Message type. Use 'success' or 'error'\n * @param {String} text   Text to show after the label\n */\nexport const consoleLogResult = ( status = 'error', text = '' ) => {\n\t// Output if the developer mode is enabled\n\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t// Define console log Automator style\n\t\tlet labelStyle = [\n\t\t\t'color: #fff',\n\t\t\t'padding: 2px 7px',\n\t\t\t// eslint-disable-next-line max-len\n\t\t\t'font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif',\n\t\t\t'font-weight: normal',\n\t\t].join( ';' );\n\n\t\t// Add error or success colors\n\t\tif ( status == 'error' ) {\n\t\t\tlabelStyle = `background: #f13c3c; ${ labelStyle }`;\n\t\t}\n\n\t\tif ( status == 'success' ) {\n\t\t\tlabelStyle = `background: #40b528; ${ labelStyle }`;\n\t\t}\n\n\t\t// Do console log\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.log( `%c${ text }`, labelStyle );\n\t}\n};\n\n/**\n * Escape HTML characters\n *\n * @param {String} html The HTML\n * @return {String}      Scaped HTML\n */\nexport const escapeHTML = ( html = '' ) => {\n\tconst tagsToReplace = {\n\t\t'&': '&amp;',\n\t\t'<': '&lt;',\n\t\t'>': '&gt;',\n\t};\n\n\t/**\n\t * Replace tags\n\t *\n\t * @param {String} tag The tag to replace\n\t * @return {String}     The tag replaced\n\t */\n\tconst replaceTag = ( tag ) => {\n\t\treturn tagsToReplace[ tag ] || tag;\n\t};\n\n\treturn html.replace( /[&<>]/g, replaceTag );\n};\n\n/**\n * Abbreviate long texts. This function will convert a string\n * like \"123456789\" to \"123...789\"\n *\n * @param {String}  text   The string\n * @param {Integer} length The max length of the string\n * @return {Object}        Object with two properties: isAbbreviated and text\n */\nexport const abbreviateText = ( text = '', length = 10 ) => {\n\t// Default response\n\tconst response = {\n\t\tisAbbreviated: false,\n\t\ttext: text,\n\t};\n\n\t// Only abbreviate the text if the text is longer than the length\n\tif ( text.length > length ) {\n\t\t// Get length of each parts (start and end)\n\t\tconst partLengths = Math.floor( length / 2 );\n\n\t\t// Get parts\n\t\tconst textParts = {\n\t\t\tstart: text.substring( 0, partLengths ),\n\t\t\tend: text.slice( -partLengths ),\n\t\t};\n\n\t\t// Create abbrevited text\n\t\tresponse.text = `${ textParts.start } ... ${ textParts.end }`;\n\t\tresponse.isAbbreviated = true;\n\t}\n\n\t// Return response\n\treturn response;\n};\n\n/**\n * Decodes HTML entities\n *\n * @since  2.1.4\n * @param {String} encodedString The string with encoded entities\n * @return {String}               The same string, with the entities decoded\n */\nexport const decodeEntities = ( encodedString = '' ) => {\n\tconst $textarea = document.createElement( 'textarea' );\n\t$textarea.innerHTML = encodedString;\n\treturn $textarea.value;\n};\n\n/**\n * Throttles a function\n *\n * @param {Function} func     The function to throttle\n * @param {Integer}  interval The interval, in milliseconds\n * @return {Function}           The function throttled\n */\nexport const throttle = ( func, interval ) => {\n\tlet lastCall = 0;\n\n\treturn () => {\n\t\tconst now = Date.now();\n\t\tif ( lastCall + interval < now ) {\n\t\t\tlastCall = now;\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\treturn func.apply( this, arguments );\n\t\t}\n\t};\n};\n\n/**\n * Copies a string to the clipboard\n *\n * @param {String} string The string to copy\n * @return {undefined}\n */\nexport const copyToClipboard = ( string ) => {\n\t// Create temporal textarea\n\tconst $tempTextarea = document.createElement( 'textarea' );\n\n\t// Make the textarea really small\n\t$tempTextarea.style.width = '0px';\n\t$tempTextarea.style.height = '0px';\n\n\t// Set the string as the textarea value\n\t$tempTextarea.value = string;\n\n\t// Add the textarea to the body\n\tdocument.body.appendChild( $tempTextarea );\n\n\t// Select all the text from the textarea\n\t$tempTextarea.select();\n\n\t// Copy content\n\tdocument.execCommand( 'copy' );\n\n\t// Remove the element from the body\n\tdocument.body.removeChild( $tempTextarea );\n};\n\n/**\n * Creates and show a modal with useful data when the JS throws a fatal error\n *\n * @param {Object} settings The settings\n * @return {undefined}\n */\nexport const handleFatalError = ( settings = {} ) => {\n\tsettings = $.extend(\n\t\ttrue,\n\t\t{\n\t\t\ttitle: UncannyAutomator.i18n.debugging.fatalErrorHandler.title,\n\t\t\twarning: '',\n\t\t\tcontent: UncannyAutomator.i18n.debugging.fatalErrorHandler.content,\n\t\t\tconsole: null,\n\t\t\tbuttons: {\n\t\t\t\tconfirm: {\n\t\t\t\t\tlabel: UncannyAutomator.i18n.debugging.learnMore,\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t// Learn more\n\t\t\t\t\t\twindow.open( UncannyAutomator.dev.debuggingURL, '_blank' );\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcancel: {\n\t\t\t\t\tlabel: UncannyAutomator.i18n.close,\n\t\t\t\t\tonClick: ( $modal ) => {\n\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t$modal.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tsettings\n\t);\n\n\t// Create report log\n\tlet reportLog = '';\n\n\tlet recipeData;\n\ttry {\n\t\t// Get the recipe data\n\t\t$.each( UncannyAutomator.recipes_object, ( index, theRecipe ) => {\n\t\t\tif ( theRecipe.ID == UncannyAutomator.recipe.id ) {\n\t\t\t\trecipeData = theRecipe;\n\t\t\t}\n\t\t} );\n\t} catch ( e ) {\n\t\t// Continue regardless of error\n\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( e );\n\t\t}\n\t}\n\n\t// Get general information about the recipe\n\ttry {\n\t\tlet logRecipe = `====== ${ UncannyAutomator.i18n.debugging.recipeTitle } ====== \\n`;\n\n\t\t// Add recipe type\n\t\tlet recipeType = UncannyAutomator.i18n.debugging.recipeTypeUser;\n\t\tif ( recipeData.recipe_type == 'anonymous' ) {\n\t\t\trecipeType = UncannyAutomator.i18n.debugging.recipeTypeAnonymous;\n\t\t}\n\n\t\tlogRecipe += `${ UncannyAutomator.i18n.debugging.recipeType }: ${ recipeType }`;\n\n\t\t// Add recipe status\n\t\tlet recipeStatus = UncannyAutomator.i18n.debugging.recipeStatusDraft;\n\t\tif ( recipeData.post_status == 'publish' ) {\n\t\t\trecipeStatus = UncannyAutomator.i18n.debugging.recipeStatusLive;\n\t\t}\n\n\t\tlogRecipe += `\\n${ UncannyAutomator.i18n.debugging.recipeStatus }: ${ recipeStatus }`;\n\n\t\treportLog = logRecipe;\n\t} catch ( e ) {\n\t\t// Continue regardless of error\n\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( e );\n\t\t}\n\t}\n\n\t// Get information about the recipe items\n\ttry {\n\t\tlet logRecipeItems = `=== ${ UncannyAutomator.i18n.debugging.recipeItemsTitle } === \\n`;\n\n\t\t/**\n\t\t * Cleans extra data\n\t\t *\n\t\t * @param {Object} item The item\n\t\t * @return {String}      Information about the item\n\t\t */\n\t\tconst cleanItemData = ( item ) => {\n\t\t\t// Get status\n\t\t\tconst recipeStatus =\n\t\t\t\titem.post_status == 'publish'\n\t\t\t\t\t? UncannyAutomator.i18n.debugging.itemStatusLive\n\t\t\t\t\t: UncannyAutomator.i18n.debugging.itemStatusDraft;\n\n\t\t\treturn `> ${ item.meta.integration } - ${\n\t\t\t\titem.meta.code\n\t\t\t} - ${ recipeStatus }\\n  (${ item.meta.sentence.replace(\n\t\t\t\t/\\{\\{|\\:[a-zA-Z0-9]*\\}\\}/g,\n\t\t\t\t''\n\t\t\t) })\\n  ${ JSON.stringify( item )\n\t\t\t\t.replaceAll( '<', '&lt;' )\n\t\t\t\t.replaceAll( '>', '&gt;' ) }\\n`;\n\t\t};\n\n\t\t// Get triggers\n\t\tconst triggers = recipeData.triggers.map( cleanItemData );\n\t\tconst hasTriggers = triggers.length > 0;\n\n\t\t// Get actions\n\t\tconst actions = recipeData.actions.map( cleanItemData );\n\t\tconst hasActions = actions.length > 0;\n\n\t\t// Get closures\n\t\tconst closures = recipeData.closures.map( cleanItemData );\n\t\tconst hasClosures = closures.length > 0;\n\n\t\t// Check if it has recipe items\n\t\tif ( hasTriggers || hasActions || hasClosures ) {\n\t\t\t// Add triggers\n\t\t\tlogRecipeItems += `${ UncannyAutomator.i18n.debugging.triggersTitle }\\n\\n`;\n\n\t\t\t// Check if it has triggers\n\t\t\tif ( hasTriggers ) {\n\t\t\t\tlogRecipeItems += triggers.join( '\\n' );\n\t\t\t} else {\n\t\t\t\tlogRecipeItems += `> ${ UncannyAutomator.i18n.debugging.noTriggers }`;\n\t\t\t}\n\n\t\t\t// Add actions\n\t\t\tlogRecipeItems += `\\n${ UncannyAutomator.i18n.debugging.actionsTitle }\\n\\n`;\n\n\t\t\t// Check if it has actions\n\t\t\tif ( hasActions ) {\n\t\t\t\tlogRecipeItems += actions.join( '\\n' );\n\t\t\t} else {\n\t\t\t\tlogRecipeItems += `> ${ UncannyAutomator.i18n.debugging.noActions }`;\n\t\t\t}\n\n\t\t\t// Add closures\n\t\t\tlogRecipeItems += `\\n${ UncannyAutomator.i18n.debugging.closuresTitle }\\n\\n`;\n\n\t\t\t// Check if it has closures\n\t\t\tif ( hasClosures ) {\n\t\t\t\tlogRecipeItems += closures.join( '\\n' );\n\t\t\t} else {\n\t\t\t\tlogRecipeItems += `> ${ UncannyAutomator.i18n.debugging.noClosures }`;\n\t\t\t}\n\t\t} else {\n\t\t\tlogRecipeItems += `${ UncannyAutomator.i18n.debugging.noRecipeItemsFound }`;\n\t\t}\n\n\t\treportLog = reportLog !== '' ? `${ reportLog }\\n\\n${ logRecipeItems }` : reportLog;\n\t} catch ( e ) {\n\t\t// Continue regardless of error\n\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( e );\n\t\t}\n\t}\n\n\t// Add JS console\n\ttry {\n\t\t// Check if we have content to add\n\t\tif ( isDefined( settings.console ) ) {\n\t\t\t// Output only if the developer mode is enabled\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( settings.console );\n\t\t\t}\n\n\t\t\tlet jsConsole = `====== ${ UncannyAutomator.i18n.debugging.jsConsole } ====== \\n`;\n\n\t\t\t// Add JS console\n\t\t\ttry {\n\t\t\t\tjsConsole += `${ settings.console.stack.replaceAll( UncannyAutomator.siteURL, '{site_url}' ) }`;\n\t\t\t} catch ( e ){\n\t\t\t\ttry {\n\t\t\t\t\tjsConsole += `${ settings.console.replaceAll( UncannyAutomator.siteURL, '{site_url}' ) }`;\n\t\t\t\t} catch ( e ){\n\t\t\t\t\tjsConsole += settings.console;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treportLog = reportLog !== '' ? `${ reportLog }\\n\\n${ jsConsole }` : reportLog;\n\t\t}\n\t} catch ( e ) {\n\t\t// Continue regardless of error\n\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( e );\n\t\t}\n\t}\n\n\t// Escape HTML from report log\n\ttry {\n\t\treportLog = reportLog\n\t\t\t\t\t\t.replace( /&/g, '&amp;' )\n\t\t\t\t\t\t.replace( /</g, '&lt;' )\n\t\t\t\t\t\t.replace( />/g, '&gt;' )\n\t\t\t\t\t\t.replace( /\"/g, '&quot;' )\n\t\t\t\t\t\t.replace( /'/g, '&#039;' );\n\t} catch ( e ){\n\t\t// Continue regardless of error\n\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( e );\n\t\t}\n\t}\n\n\t// Create buttons\n\tconst modalButtons = {};\n\n\tif ( isDefined( settings.buttons.cancel ) ){\n\t\tmodalButtons.cancel = settings.buttons.cancel.label;\n\t}\n\n\tif ( isDefined( settings.buttons.confirm ) ){\n\t\tmodalButtons.confirm = settings.buttons.confirm.label;\n\t}\n\n\tlet $modal = new Modal(\n\t\t{\n\t\t\ttitle: `<span class=\"modal__title-icon\"><uo-icon id=\"exclamation-triangle\"></uo-icon></span> ${ settings.title }`,\n\t\t\twarning: `${ settings.warning }`,\n\t\t\tcontent: `\n\t\t\t<div>\n\t\t\t\t${ ! isEmpty( settings.content ) ? settings.content : '' }\n\t\t\t\t<div class=\"modal__content-code\">\n\t\t\t\t\t<pre id=\"uap-debugging\">${ reportLog }</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,\n\t\t\tbuttons: modalButtons,\n\t\t},\n\t\t{\n\t\t\tsize: 'extra-large',\n\t\t\twarningFirst: true,\n\t\t}\n\t);\n\n\t$modal.setEvents( {\n\t\tonConfirm: () => {\n\t\t\tsettings.buttons.confirm.onClick( $modal );\n\t\t},\n\t\tonCancel: () => {\n\t\t\tsettings.buttons.cancel.onClick( $modal );\n\t\t},\n\t\tafterSetEvents: () => {\n\t\t\t// Get the element with the debugging\n\t\t\tconst $debuggingConsole = $( '#uap-debugging' );\n\n\t\t\t// On click, copy the content\n\t\t\t$debuggingConsole.on( 'click', () => {\n\t\t\t\t// Select the content of the container\n\t\t\t\t// This is just to improve the UX\n\t\t\t\tconst range = document.createRange();\n\t\t\t\trange.selectNodeContents( $debuggingConsole[ 0 ] );\n\t\t\t\t// eslint-disable-next-line @wordpress/no-global-get-selection\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t// eslint-disable-next-line @wordpress/no-global-get-selection\n\t\t\t\twindow.getSelection().addRange( range );\n\t\t\t} );\n\t\t},\n\t} );\n};\n\n/**\n * Filters items with specific post meta value\n *\n * @since 3.0\n * @param {array}  items The array of items to filter\n * @param {String} meta  Meta key\n * @param {String} value Meta value\n * @return {array} Array of filtered items\n */\nexport const filterMetaValue = ( items, meta, value ) => {\n\tconst itemsWithMeta = {};\n\n\t$.each( items, ( itemId, item ) => {\n\t\tif ( item.meta[ meta ] && item.meta[ meta ] == value ) {\n\t\t\titemsWithMeta[ itemId ] = item;\n\t\t}\n\t} );\n\n\treturn itemsWithMeta;\n};\n\n/**\n * Filters items without specific post meta\n *\n * @param {Array}  items The array of items to filter\n * @param {String} meta  Meta key\n * @param {String} value Meta value\n * @return {Array}          Array of filtered items\n */\nexport const filterMeta = ( items, meta, value = true ) => {\n\tconst filteredItems = {};\n\n\t$.each( items, ( itemId, item ) => {\n\t\tif ( meta in item.meta === value ) {\n\t\t\tfilteredItems[ itemId ] = item;\n\t\t}\n\t} );\n\n\treturn filteredItems;\n};\n\n/**\n * Opens a link on a new tab\n *\n * @param {String} href The URL\n * @return {undefined}\n */\nexport const openInNewTab = ( href ) => {\n\tObject.assign( document.createElement( 'a' ), {\n\t\ttarget: '_blank',\n\t\thref: href,\n\t} ).click();\n};\n\n/**\n * Adds the UTM parameters to a given URL\n *\n * @param {String} url                 The URL\n * @param {Object} parameters          The parameters to add\n * @param {String} parameters.medium   The utm_medium\n * @param {String} parameters.campaign The utm_campaign\n * @param {String} parameters.content  The utm_content\n * @return {String}                     The URL with the parameters\n */\nexport const addUTMParameters = ( url, { medium, campaign, content } ) => {\n\t// Define the parameters we're going to add\n\tconst urlParameters = {};\n\n\t// Add the utm_source\n\t// eslint-disable-next-line camelcase\n\turlParameters.utm_source =\n\t\tisDefined( UncannyAutomator.wp ) && UncannyAutomator.wp ? 'uncanny_automator_pro' : 'uncanny_automator';\n\n\t// Add the medium\n\tif ( ! isEmpty( medium ) ) {\n\t\t// eslint-disable-next-line camelcase\n\t\turlParameters.utm_medium = medium;\n\t}\n\n\t// Add the campaign\n\tif ( ! isEmpty( campaign ) ) {\n\t\t// eslint-disable-next-line camelcase\n\t\turlParameters.utm_campaign = campaign;\n\t}\n\n\t// Add the content\n\tif ( ! isEmpty( content ) ) {\n\t\t// eslint-disable-next-line camelcase\n\t\turlParameters.utm_content = content;\n\t}\n\n\t// Check if we have to add the utm_r parameter\n\tif ( ! isEmpty( UncannyAutomator.marketing.utmR ) ) {\n\t\t// eslint-disable-next-line camelcase\n\t\turlParameters.utm_r = UncannyAutomator.marketing.utmR;\n\t}\n\n\t// Add the parameters\n\turl = addParametersToURL( url, urlParameters );\n\n\t// Return the modified URL\n\treturn url;\n};\n","/**\n * The valid recipe types\n * @type {Object}\n */\nconst recipeTypes = {\n    user: {\n        id: 'user',\n        name: UncannyAutomator.i18n.recipeType.userRecipeName,\n        description: UncannyAutomator.i18n.recipeType.userRecipeDescription,\n    },\n    anonymous: {\n        id: 'anonymous',\n        name: UncannyAutomator.i18n.recipeType.everyoneRecipeName,\n        description: UncannyAutomator.i18n.recipeType.everyoneRecipeDescription,\n    },\n};\n\nexport default recipeTypes;\n","/**\n * The valid field types\n * @type {Object}\n */\nconst fieldTypes = [\n    'select',\n    'textarea',\n    'text',\n    'url',\n    'email',\n    'int',\n    'float',\n    'checkbox',\n    'radio',\n    'group',\n    'date',\n    'time',\n    'repeater',\n];\n\nexport default fieldTypes;\n","export var HOOKS = [\n    \"onChange\",\n    \"onClose\",\n    \"onDayCreate\",\n    \"onDestroy\",\n    \"onKeyDown\",\n    \"onMonthChange\",\n    \"onOpen\",\n    \"onParseConfig\",\n    \"onReady\",\n    \"onValueUpdate\",\n    \"onYearChange\",\n    \"onPreCalendarPosition\",\n];\nexport var defaults = {\n    _disable: [],\n    allowInput: false,\n    allowInvalidPreload: false,\n    altFormat: \"F j, Y\",\n    altInput: false,\n    altInputClass: \"form-control input\",\n    animate: typeof window === \"object\" &&\n        window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n    ariaDateFormat: \"F j, Y\",\n    autoFillDefaultTime: true,\n    clickOpens: true,\n    closeOnSelect: true,\n    conjunction: \", \",\n    dateFormat: \"Y-m-d\",\n    defaultHour: 12,\n    defaultMinute: 0,\n    defaultSeconds: 0,\n    disable: [],\n    disableMobile: false,\n    enableSeconds: false,\n    enableTime: false,\n    errorHandler: function (err) {\n        return typeof console !== \"undefined\" && console.warn(err);\n    },\n    getWeek: function (givenDate) {\n        var date = new Date(givenDate.getTime());\n        date.setHours(0, 0, 0, 0);\n        date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n        var week1 = new Date(date.getFullYear(), 0, 4);\n        return (1 +\n            Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                3 +\n                ((week1.getDay() + 6) % 7)) /\n                7));\n    },\n    hourIncrement: 1,\n    ignoredFocusElements: [],\n    inline: false,\n    locale: \"default\",\n    minuteIncrement: 5,\n    mode: \"single\",\n    monthSelectorType: \"dropdown\",\n    nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n    noCalendar: false,\n    now: new Date(),\n    onChange: [],\n    onClose: [],\n    onDayCreate: [],\n    onDestroy: [],\n    onKeyDown: [],\n    onMonthChange: [],\n    onOpen: [],\n    onParseConfig: [],\n    onReady: [],\n    onValueUpdate: [],\n    onYearChange: [],\n    onPreCalendarPosition: [],\n    plugins: [],\n    position: \"auto\",\n    positionElement: undefined,\n    prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n    shorthandCurrentMonth: false,\n    showMonths: 1,\n    static: false,\n    time_24hr: false,\n    weekNumbers: false,\n    wrap: false,\n};\n","export var english = {\n    weekdays: {\n        shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n        longhand: [\n            \"Sunday\",\n            \"Monday\",\n            \"Tuesday\",\n            \"Wednesday\",\n            \"Thursday\",\n            \"Friday\",\n            \"Saturday\",\n        ],\n    },\n    months: {\n        shorthand: [\n            \"Jan\",\n            \"Feb\",\n            \"Mar\",\n            \"Apr\",\n            \"May\",\n            \"Jun\",\n            \"Jul\",\n            \"Aug\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n        ],\n        longhand: [\n            \"January\",\n            \"February\",\n            \"March\",\n            \"April\",\n            \"May\",\n            \"June\",\n            \"July\",\n            \"August\",\n            \"September\",\n            \"October\",\n            \"November\",\n            \"December\",\n        ],\n    },\n    daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n    firstDayOfWeek: 0,\n    ordinal: function (nth) {\n        var s = nth % 100;\n        if (s > 3 && s < 21)\n            return \"th\";\n        switch (s % 10) {\n            case 1:\n                return \"st\";\n            case 2:\n                return \"nd\";\n            case 3:\n                return \"rd\";\n            default:\n                return \"th\";\n        }\n    },\n    rangeSeparator: \" to \",\n    weekAbbreviation: \"Wk\",\n    scrollTitle: \"Scroll to increment\",\n    toggleTitle: \"Click to toggle\",\n    amPM: [\"AM\", \"PM\"],\n    yearAriaLabel: \"Year\",\n    monthAriaLabel: \"Month\",\n    hourAriaLabel: \"Hour\",\n    minuteAriaLabel: \"Minute\",\n    time_24hr: false,\n};\nexport default english;\n","export var pad = function (number, length) {\n    if (length === void 0) { length = 2; }\n    return (\"000\" + number).slice(length * -1);\n};\nexport var int = function (bool) { return (bool === true ? 1 : 0); };\nexport function debounce(fn, wait) {\n    var t;\n    return function () {\n        var _this = this;\n        var args = arguments;\n        clearTimeout(t);\n        t = setTimeout(function () { return fn.apply(_this, args); }, wait);\n    };\n}\nexport var arrayify = function (obj) {\n    return obj instanceof Array ? obj : [obj];\n};\n","export function toggleClass(elem, className, bool) {\n    if (bool === true)\n        return elem.classList.add(className);\n    elem.classList.remove(className);\n}\nexport function createElement(tag, className, content) {\n    var e = window.document.createElement(tag);\n    className = className || \"\";\n    content = content || \"\";\n    e.className = className;\n    if (content !== undefined)\n        e.textContent = content;\n    return e;\n}\nexport function clearNode(node) {\n    while (node.firstChild)\n        node.removeChild(node.firstChild);\n}\nexport function findParent(node, condition) {\n    if (condition(node))\n        return node;\n    else if (node.parentNode)\n        return findParent(node.parentNode, condition);\n    return undefined;\n}\nexport function createNumberInput(inputClassName, opts) {\n    var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n    if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n        numInput.type = \"number\";\n    }\n    else {\n        numInput.type = \"text\";\n        numInput.pattern = \"\\\\d*\";\n    }\n    if (opts !== undefined)\n        for (var key in opts)\n            numInput.setAttribute(key, opts[key]);\n    wrapper.appendChild(numInput);\n    wrapper.appendChild(arrowUp);\n    wrapper.appendChild(arrowDown);\n    return wrapper;\n}\nexport function getEventTarget(event) {\n    try {\n        if (typeof event.composedPath === \"function\") {\n            var path = event.composedPath();\n            return path[0];\n        }\n        return event.target;\n    }\n    catch (error) {\n        return event.target;\n    }\n}\n","import { int, pad } from \"../utils\";\nvar doNothing = function () { return undefined; };\nexport var monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\nexport var revFormat = {\n    D: doNothing,\n    F: function (dateObj, monthName, locale) {\n        dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n    },\n    G: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    H: function (dateObj, hour) {\n        dateObj.setHours(parseFloat(hour));\n    },\n    J: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    K: function (dateObj, amPM, locale) {\n        dateObj.setHours((dateObj.getHours() % 12) +\n            12 * int(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n    },\n    M: function (dateObj, shortMonth, locale) {\n        dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n    },\n    S: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n    W: function (dateObj, weekNum, locale) {\n        var weekNumber = parseInt(weekNum);\n        var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n        date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);\n        return date;\n    },\n    Y: function (dateObj, year) {\n        dateObj.setFullYear(parseFloat(year));\n    },\n    Z: function (_, ISODate) { return new Date(ISODate); },\n    d: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    h: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    i: function (dateObj, minutes) {\n        dateObj.setMinutes(parseFloat(minutes));\n    },\n    j: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    l: doNothing,\n    m: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    n: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    s: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    u: function (_, unixMillSeconds) {\n        return new Date(parseFloat(unixMillSeconds));\n    },\n    w: doNothing,\n    y: function (dateObj, year) {\n        dateObj.setFullYear(2000 + parseFloat(year));\n    },\n};\nexport var tokenRegex = {\n    D: \"\",\n    F: \"\",\n    G: \"(\\\\d\\\\d|\\\\d)\",\n    H: \"(\\\\d\\\\d|\\\\d)\",\n    J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n    K: \"\",\n    M: \"\",\n    S: \"(\\\\d\\\\d|\\\\d)\",\n    U: \"(.+)\",\n    W: \"(\\\\d\\\\d|\\\\d)\",\n    Y: \"(\\\\d{4})\",\n    Z: \"(.+)\",\n    d: \"(\\\\d\\\\d|\\\\d)\",\n    h: \"(\\\\d\\\\d|\\\\d)\",\n    i: \"(\\\\d\\\\d|\\\\d)\",\n    j: \"(\\\\d\\\\d|\\\\d)\",\n    l: \"\",\n    m: \"(\\\\d\\\\d|\\\\d)\",\n    n: \"(\\\\d\\\\d|\\\\d)\",\n    s: \"(\\\\d\\\\d|\\\\d)\",\n    u: \"(.+)\",\n    w: \"(\\\\d\\\\d|\\\\d)\",\n    y: \"(\\\\d{2})\",\n};\nexport var formats = {\n    Z: function (date) { return date.toISOString(); },\n    D: function (date, locale, options) {\n        return locale.weekdays.shorthand[formats.w(date, locale, options)];\n    },\n    F: function (date, locale, options) {\n        return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n    },\n    G: function (date, locale, options) {\n        return pad(formats.h(date, locale, options));\n    },\n    H: function (date) { return pad(date.getHours()); },\n    J: function (date, locale) {\n        return locale.ordinal !== undefined\n            ? date.getDate() + locale.ordinal(date.getDate())\n            : date.getDate();\n    },\n    K: function (date, locale) { return locale.amPM[int(date.getHours() > 11)]; },\n    M: function (date, locale) {\n        return monthToStr(date.getMonth(), true, locale);\n    },\n    S: function (date) { return pad(date.getSeconds()); },\n    U: function (date) { return date.getTime() / 1000; },\n    W: function (date, _, options) {\n        return options.getWeek(date);\n    },\n    Y: function (date) { return pad(date.getFullYear(), 4); },\n    d: function (date) { return pad(date.getDate()); },\n    h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n    i: function (date) { return pad(date.getMinutes()); },\n    j: function (date) { return date.getDate(); },\n    l: function (date, locale) {\n        return locale.weekdays.longhand[date.getDay()];\n    },\n    m: function (date) { return pad(date.getMonth() + 1); },\n    n: function (date) { return date.getMonth() + 1; },\n    s: function (date) { return date.getSeconds(); },\n    u: function (date) { return date.getTime(); },\n    w: function (date) { return date.getDay(); },\n    y: function (date) { return String(date.getFullYear()).substring(2); },\n};\n","import { tokenRegex, revFormat, formats, } from \"./formatting\";\nimport { defaults } from \"../types/options\";\nimport { english } from \"../l10n/default\";\nexport var createDateFormatter = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;\n    return function (dateObj, frmt, overrideLocale) {\n        var locale = overrideLocale || l10n;\n        if (config.formatDate !== undefined && !isMobile) {\n            return config.formatDate(dateObj, frmt, locale);\n        }\n        return frmt\n            .split(\"\")\n            .map(function (c, i, arr) {\n            return formats[c] && arr[i - 1] !== \"\\\\\"\n                ? formats[c](dateObj, locale, config)\n                : c !== \"\\\\\"\n                    ? c\n                    : \"\";\n        })\n            .join(\"\");\n    };\n};\nexport var createDateParser = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n    return function (date, givenFormat, timeless, customLocale) {\n        if (date !== 0 && !date)\n            return undefined;\n        var locale = customLocale || l10n;\n        var parsedDate;\n        var dateOrig = date;\n        if (date instanceof Date)\n            parsedDate = new Date(date.getTime());\n        else if (typeof date !== \"string\" &&\n            date.toFixed !== undefined)\n            parsedDate = new Date(date);\n        else if (typeof date === \"string\") {\n            var format = givenFormat || (config || defaults).dateFormat;\n            var datestr = String(date).trim();\n            if (datestr === \"today\") {\n                parsedDate = new Date();\n                timeless = true;\n            }\n            else if (config && config.parseDate) {\n                parsedDate = config.parseDate(date, format);\n            }\n            else if (/Z$/.test(datestr) ||\n                /GMT$/.test(datestr)) {\n                parsedDate = new Date(date);\n            }\n            else {\n                var matched = void 0, ops = [];\n                for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                    var token = format[i];\n                    var isBackSlash = token === \"\\\\\";\n                    var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                    if (tokenRegex[token] && !escaped) {\n                        regexStr += tokenRegex[token];\n                        var match = new RegExp(regexStr).exec(date);\n                        if (match && (matched = true)) {\n                            ops[token !== \"Y\" ? \"push\" : \"unshift\"]({\n                                fn: revFormat[token],\n                                val: match[++matchIndex],\n                            });\n                        }\n                    }\n                    else if (!isBackSlash)\n                        regexStr += \".\";\n                }\n                parsedDate =\n                    !config || !config.noCalendar\n                        ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                        : new Date(new Date().setHours(0, 0, 0, 0));\n                ops.forEach(function (_a) {\n                    var fn = _a.fn, val = _a.val;\n                    return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                });\n                parsedDate = matched ? parsedDate : undefined;\n            }\n        }\n        if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n            config.errorHandler(new Error(\"Invalid date provided: \" + dateOrig));\n            return undefined;\n        }\n        if (timeless === true)\n            parsedDate.setHours(0, 0, 0, 0);\n        return parsedDate;\n    };\n};\nexport function compareDates(date1, date2, timeless) {\n    if (timeless === void 0) { timeless = true; }\n    if (timeless !== false) {\n        return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n            new Date(date2.getTime()).setHours(0, 0, 0, 0));\n    }\n    return date1.getTime() - date2.getTime();\n}\nexport function compareTimes(date1, date2) {\n    return (3600 * (date1.getHours() - date2.getHours()) +\n        60 * (date1.getMinutes() - date2.getMinutes()) +\n        date1.getSeconds() -\n        date2.getSeconds());\n}\nexport var isBetween = function (ts, ts1, ts2) {\n    return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n};\nexport var calculateSecondsSinceMidnight = function (hours, minutes, seconds) {\n    return hours * 3600 + minutes * 60 + seconds;\n};\nexport var parseSeconds = function (secondsSinceMidnight) {\n    var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;\n    return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];\n};\nexport var duration = {\n    DAY: 86400000,\n};\nexport function getDefaultHours(config) {\n    var hours = config.defaultHour;\n    var minutes = config.defaultMinute;\n    var seconds = config.defaultSeconds;\n    if (config.minDate !== undefined) {\n        var minHour = config.minDate.getHours();\n        var minMinutes = config.minDate.getMinutes();\n        var minSeconds = config.minDate.getSeconds();\n        if (hours < minHour) {\n            hours = minHour;\n        }\n        if (hours === minHour && minutes < minMinutes) {\n            minutes = minMinutes;\n        }\n        if (hours === minHour && minutes === minMinutes && seconds < minSeconds)\n            seconds = config.minDate.getSeconds();\n    }\n    if (config.maxDate !== undefined) {\n        var maxHr = config.maxDate.getHours();\n        var maxMinutes = config.maxDate.getMinutes();\n        hours = Math.min(hours, maxHr);\n        if (hours === maxHr)\n            minutes = Math.min(maxMinutes, minutes);\n        if (hours === maxHr && minutes === maxMinutes)\n            seconds = config.maxDate.getSeconds();\n    }\n    return { hours: hours, minutes: minutes, seconds: seconds };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { defaults as defaultOptions, HOOKS, } from \"./types/options\";\nimport English from \"./l10n/default\";\nimport { arrayify, debounce, int, pad } from \"./utils\";\nimport { clearNode, createElement, createNumberInput, findParent, toggleClass, getEventTarget, } from \"./utils/dom\";\nimport { compareDates, createDateParser, createDateFormatter, duration, isBetween, getDefaultHours, calculateSecondsSinceMidnight, parseSeconds, } from \"./utils/dates\";\nimport { tokenRegex, monthToStr } from \"./utils/formatting\";\nimport \"./utils/polyfills\";\nvar DEBOUNCED_CHANGE_MS = 300;\nfunction FlatpickrInstance(element, instanceConfig) {\n    var self = {\n        config: __assign(__assign({}, defaultOptions), flatpickr.defaultConfig),\n        l10n: English,\n    };\n    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    self._handlers = [];\n    self.pluginElements = [];\n    self.loadedPlugins = [];\n    self._bind = bind;\n    self._setHoursFromDate = setHoursFromDate;\n    self._positionCalendar = positionCalendar;\n    self.changeMonth = changeMonth;\n    self.changeYear = changeYear;\n    self.clear = clear;\n    self.close = close;\n    self.onMouseOver = onMouseOver;\n    self._createElement = createElement;\n    self.createDay = createDay;\n    self.destroy = destroy;\n    self.isEnabled = isEnabled;\n    self.jumpToDate = jumpToDate;\n    self.updateValue = updateValue;\n    self.open = open;\n    self.redraw = redraw;\n    self.set = set;\n    self.setDate = setDate;\n    self.toggle = toggle;\n    function setupHelperFunctions() {\n        self.utils = {\n            getDaysInMonth: function (month, yr) {\n                if (month === void 0) { month = self.currentMonth; }\n                if (yr === void 0) { yr = self.currentYear; }\n                if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                    return 29;\n                return self.l10n.daysInMonth[month];\n            },\n        };\n    }\n    function init() {\n        self.element = self.input = element;\n        self.isOpen = false;\n        parseConfig();\n        setupLocale();\n        setupInputs();\n        setupDates();\n        setupHelperFunctions();\n        if (!self.isMobile)\n            build();\n        bindEvents();\n        if (self.selectedDates.length || self.config.noCalendar) {\n            if (self.config.enableTime) {\n                setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : undefined);\n            }\n            updateValue(false);\n        }\n        setCalendarWidth();\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        if (!self.isMobile && isSafari) {\n            positionCalendar();\n        }\n        triggerEvent(\"onReady\");\n    }\n    function getClosestActiveElement() {\n        var _a;\n        return (((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode())\n            .activeElement || document.activeElement);\n    }\n    function bindToInstance(fn) {\n        return fn.bind(self);\n    }\n    function setCalendarWidth() {\n        var config = self.config;\n        if (config.weekNumbers === false && config.showMonths === 1) {\n            return;\n        }\n        else if (config.noCalendar !== true) {\n            window.requestAnimationFrame(function () {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.style.visibility = \"hidden\";\n                    self.calendarContainer.style.display = \"block\";\n                }\n                if (self.daysContainer !== undefined) {\n                    var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                    self.daysContainer.style.width = daysWidth + \"px\";\n                    self.calendarContainer.style.width =\n                        daysWidth +\n                            (self.weekWrapper !== undefined\n                                ? self.weekWrapper.offsetWidth\n                                : 0) +\n                            \"px\";\n                    self.calendarContainer.style.removeProperty(\"visibility\");\n                    self.calendarContainer.style.removeProperty(\"display\");\n                }\n            });\n        }\n    }\n    function updateTime(e) {\n        if (self.selectedDates.length === 0) {\n            var defaultDate = self.config.minDate === undefined ||\n                compareDates(new Date(), self.config.minDate) >= 0\n                ? new Date()\n                : new Date(self.config.minDate.getTime());\n            var defaults = getDefaultHours(self.config);\n            defaultDate.setHours(defaults.hours, defaults.minutes, defaults.seconds, defaultDate.getMilliseconds());\n            self.selectedDates = [defaultDate];\n            self.latestSelectedDateObj = defaultDate;\n        }\n        if (e !== undefined && e.type !== \"blur\") {\n            timeWrapper(e);\n        }\n        var prevValue = self._input.value;\n        setHoursFromInputs();\n        updateValue();\n        if (self._input.value !== prevValue) {\n            self._debouncedChange();\n        }\n    }\n    function ampm2military(hour, amPM) {\n        return (hour % 12) + 12 * int(amPM === self.l10n.amPM[1]);\n    }\n    function military2ampm(hour) {\n        switch (hour % 24) {\n            case 0:\n            case 12:\n                return 12;\n            default:\n                return hour % 12;\n        }\n    }\n    function setHoursFromInputs() {\n        if (self.hourElement === undefined || self.minuteElement === undefined)\n            return;\n        var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n            ? (parseInt(self.secondElement.value, 10) || 0) % 60\n            : 0;\n        if (self.amPM !== undefined) {\n            hours = ampm2military(hours, self.amPM.textContent);\n        }\n        var limitMinHours = self.config.minTime !== undefined ||\n            (self.config.minDate &&\n                self.minDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.minDate, true) ===\n                    0);\n        var limitMaxHours = self.config.maxTime !== undefined ||\n            (self.config.maxDate &&\n                self.maxDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                    0);\n        if (self.config.maxTime !== undefined &&\n            self.config.minTime !== undefined &&\n            self.config.minTime > self.config.maxTime) {\n            var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());\n            var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());\n            var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);\n            if (currentTime > maxBound && currentTime < minBound) {\n                var result = parseSeconds(minBound);\n                hours = result[0];\n                minutes = result[1];\n                seconds = result[2];\n            }\n        }\n        else {\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours() && minutes < minTime.getMinutes())\n                    minutes = minTime.getMinutes();\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n        }\n        setHours(hours, minutes, seconds);\n    }\n    function setHoursFromDate(dateObj) {\n        var date = dateObj || self.latestSelectedDateObj;\n        if (date && date instanceof Date) {\n            setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n        }\n    }\n    function setHours(hours, minutes, seconds) {\n        if (self.latestSelectedDateObj !== undefined) {\n            self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n        }\n        if (!self.hourElement || !self.minuteElement || self.isMobile)\n            return;\n        self.hourElement.value = pad(!self.config.time_24hr\n            ? ((12 + hours) % 12) + 12 * int(hours % 12 === 0)\n            : hours);\n        self.minuteElement.value = pad(minutes);\n        if (self.amPM !== undefined)\n            self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];\n        if (self.secondElement !== undefined)\n            self.secondElement.value = pad(seconds);\n    }\n    function onYearInput(event) {\n        var eventTarget = getEventTarget(event);\n        var year = parseInt(eventTarget.value) + (event.delta || 0);\n        if (year / 1000 > 1 ||\n            (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n            changeYear(year);\n        }\n    }\n    function bind(element, event, handler, options) {\n        if (event instanceof Array)\n            return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n        if (element instanceof Array)\n            return element.forEach(function (el) { return bind(el, event, handler, options); });\n        element.addEventListener(event, handler, options);\n        self._handlers.push({\n            remove: function () { return element.removeEventListener(event, handler, options); },\n        });\n    }\n    function triggerChange() {\n        triggerEvent(\"onChange\");\n    }\n    function bindEvents() {\n        if (self.config.wrap) {\n            [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                    return bind(el, \"click\", self[evt]);\n                });\n            });\n        }\n        if (self.isMobile) {\n            setupMobile();\n            return;\n        }\n        var debouncedResize = debounce(onResize, 50);\n        self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);\n        if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n            bind(self.daysContainer, \"mouseover\", function (e) {\n                if (self.config.mode === \"range\")\n                    onMouseOver(getEventTarget(e));\n            });\n        bind(self._input, \"keydown\", onKeyDown);\n        if (self.calendarContainer !== undefined) {\n            bind(self.calendarContainer, \"keydown\", onKeyDown);\n        }\n        if (!self.config.inline && !self.config.static)\n            bind(window, \"resize\", debouncedResize);\n        if (window.ontouchstart !== undefined)\n            bind(window.document, \"touchstart\", documentClick);\n        else\n            bind(window.document, \"mousedown\", documentClick);\n        bind(window.document, \"focus\", documentClick, { capture: true });\n        if (self.config.clickOpens === true) {\n            bind(self._input, \"focus\", self.open);\n            bind(self._input, \"click\", self.open);\n        }\n        if (self.daysContainer !== undefined) {\n            bind(self.monthNav, \"click\", onMonthNavClick);\n            bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n            bind(self.daysContainer, \"click\", selectDate);\n        }\n        if (self.timeContainer !== undefined &&\n            self.minuteElement !== undefined &&\n            self.hourElement !== undefined) {\n            var selText = function (e) {\n                return getEventTarget(e).select();\n            };\n            bind(self.timeContainer, [\"increment\"], updateTime);\n            bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n            bind(self.timeContainer, \"click\", timeIncrement);\n            bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n            if (self.secondElement !== undefined)\n                bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n            if (self.amPM !== undefined) {\n                bind(self.amPM, \"click\", function (e) {\n                    updateTime(e);\n                });\n            }\n        }\n        if (self.config.allowInput) {\n            bind(self._input, \"blur\", onBlur);\n        }\n    }\n    function jumpToDate(jumpDate, triggerChange) {\n        var jumpTo = jumpDate !== undefined\n            ? self.parseDate(jumpDate)\n            : self.latestSelectedDateObj ||\n                (self.config.minDate && self.config.minDate > self.now\n                    ? self.config.minDate\n                    : self.config.maxDate && self.config.maxDate < self.now\n                        ? self.config.maxDate\n                        : self.now);\n        var oldYear = self.currentYear;\n        var oldMonth = self.currentMonth;\n        try {\n            if (jumpTo !== undefined) {\n                self.currentYear = jumpTo.getFullYear();\n                self.currentMonth = jumpTo.getMonth();\n            }\n        }\n        catch (e) {\n            e.message = \"Invalid date supplied: \" + jumpTo;\n            self.config.errorHandler(e);\n        }\n        if (triggerChange && self.currentYear !== oldYear) {\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        if (triggerChange &&\n            (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {\n            triggerEvent(\"onMonthChange\");\n        }\n        self.redraw();\n    }\n    function timeIncrement(e) {\n        var eventTarget = getEventTarget(e);\n        if (~eventTarget.className.indexOf(\"arrow\"))\n            incrementNumInput(e, eventTarget.classList.contains(\"arrowUp\") ? 1 : -1);\n    }\n    function incrementNumInput(e, delta, inputElem) {\n        var target = e && getEventTarget(e);\n        var input = inputElem ||\n            (target && target.parentNode && target.parentNode.firstChild);\n        var event = createEvent(\"increment\");\n        event.delta = delta;\n        input && input.dispatchEvent(event);\n    }\n    function build() {\n        var fragment = window.document.createDocumentFragment();\n        self.calendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n        self.calendarContainer.tabIndex = -1;\n        if (!self.config.noCalendar) {\n            fragment.appendChild(buildMonthNav());\n            self.innerContainer = createElement(\"div\", \"flatpickr-innerContainer\");\n            if (self.config.weekNumbers) {\n                var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                self.innerContainer.appendChild(weekWrapper);\n                self.weekNumbers = weekNumbers;\n                self.weekWrapper = weekWrapper;\n            }\n            self.rContainer = createElement(\"div\", \"flatpickr-rContainer\");\n            self.rContainer.appendChild(buildWeekdays());\n            if (!self.daysContainer) {\n                self.daysContainer = createElement(\"div\", \"flatpickr-days\");\n                self.daysContainer.tabIndex = -1;\n            }\n            buildDays();\n            self.rContainer.appendChild(self.daysContainer);\n            self.innerContainer.appendChild(self.rContainer);\n            fragment.appendChild(self.innerContainer);\n        }\n        if (self.config.enableTime) {\n            fragment.appendChild(buildTime());\n        }\n        toggleClass(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n        toggleClass(self.calendarContainer, \"animate\", self.config.animate === true);\n        toggleClass(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n        self.calendarContainer.appendChild(fragment);\n        var customAppend = self.config.appendTo !== undefined &&\n            self.config.appendTo.nodeType !== undefined;\n        if (self.config.inline || self.config.static) {\n            self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n            if (self.config.inline) {\n                if (!customAppend && self.element.parentNode)\n                    self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                else if (self.config.appendTo !== undefined)\n                    self.config.appendTo.appendChild(self.calendarContainer);\n            }\n            if (self.config.static) {\n                var wrapper = createElement(\"div\", \"flatpickr-wrapper\");\n                if (self.element.parentNode)\n                    self.element.parentNode.insertBefore(wrapper, self.element);\n                wrapper.appendChild(self.element);\n                if (self.altInput)\n                    wrapper.appendChild(self.altInput);\n                wrapper.appendChild(self.calendarContainer);\n            }\n        }\n        if (!self.config.static && !self.config.inline)\n            (self.config.appendTo !== undefined\n                ? self.config.appendTo\n                : window.document.body).appendChild(self.calendarContainer);\n    }\n    function createDay(className, date, _dayNumber, i) {\n        var dateIsEnabled = isEnabled(date, true), dayElement = createElement(\"span\", className, date.getDate().toString());\n        dayElement.dateObj = date;\n        dayElement.$i = i;\n        dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n        if (className.indexOf(\"hidden\") === -1 &&\n            compareDates(date, self.now) === 0) {\n            self.todayDateElem = dayElement;\n            dayElement.classList.add(\"today\");\n            dayElement.setAttribute(\"aria-current\", \"date\");\n        }\n        if (dateIsEnabled) {\n            dayElement.tabIndex = -1;\n            if (isDateSelected(date)) {\n                dayElement.classList.add(\"selected\");\n                self.selectedDateElem = dayElement;\n                if (self.config.mode === \"range\") {\n                    toggleClass(dayElement, \"startRange\", self.selectedDates[0] &&\n                        compareDates(date, self.selectedDates[0], true) === 0);\n                    toggleClass(dayElement, \"endRange\", self.selectedDates[1] &&\n                        compareDates(date, self.selectedDates[1], true) === 0);\n                    if (className === \"nextMonthDay\")\n                        dayElement.classList.add(\"inRange\");\n                }\n            }\n        }\n        else {\n            dayElement.classList.add(\"flatpickr-disabled\");\n        }\n        if (self.config.mode === \"range\") {\n            if (isDateInRange(date) && !isDateSelected(date))\n                dayElement.classList.add(\"inRange\");\n        }\n        if (self.weekNumbers &&\n            self.config.showMonths === 1 &&\n            className !== \"prevMonthDay\" &&\n            i % 7 === 6) {\n            self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n        }\n        triggerEvent(\"onDayCreate\", dayElement);\n        return dayElement;\n    }\n    function focusOnDayElem(targetNode) {\n        targetNode.focus();\n        if (self.config.mode === \"range\")\n            onMouseOver(targetNode);\n    }\n    function getFirstAvailableDay(delta) {\n        var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        for (var m = startMonth; m != endMonth; m += delta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = delta > 0 ? 0 : month.children.length - 1;\n            var endIndex = delta > 0 ? month.children.length : -1;\n            for (var i = startIndex; i != endIndex; i += delta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                    return c;\n            }\n        }\n        return undefined;\n    }\n    function getNextAvailableDay(current, delta) {\n        var givenMonth = current.className.indexOf(\"Month\") === -1\n            ? current.dateObj.getMonth()\n            : self.currentMonth;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        var loopDelta = delta > 0 ? 1 : -1;\n        for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = givenMonth - self.currentMonth === m\n                ? current.$i + delta\n                : delta < 0\n                    ? month.children.length - 1\n                    : 0;\n            var numMonthDays = month.children.length;\n            for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 &&\n                    isEnabled(c.dateObj) &&\n                    Math.abs(current.$i - i) >= Math.abs(delta))\n                    return focusOnDayElem(c);\n            }\n        }\n        self.changeMonth(loopDelta);\n        focusOnDay(getFirstAvailableDay(loopDelta), 0);\n        return undefined;\n    }\n    function focusOnDay(current, offset) {\n        var activeElement = getClosestActiveElement();\n        var dayFocused = isInView(activeElement || document.body);\n        var startElem = current !== undefined\n            ? current\n            : dayFocused\n                ? activeElement\n                : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                    ? self.selectedDateElem\n                    : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                        ? self.todayDateElem\n                        : getFirstAvailableDay(offset > 0 ? 1 : -1);\n        if (startElem === undefined) {\n            self._input.focus();\n        }\n        else if (!dayFocused) {\n            focusOnDayElem(startElem);\n        }\n        else {\n            getNextAvailableDay(startElem, offset);\n        }\n    }\n    function buildMonthDays(year, month) {\n        var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n        var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);\n        var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n        var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n        for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n        }\n        for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n        }\n        for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n            (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n        }\n        var dayContainer = createElement(\"div\", \"dayContainer\");\n        dayContainer.appendChild(days);\n        return dayContainer;\n    }\n    function buildDays() {\n        if (self.daysContainer === undefined) {\n            return;\n        }\n        clearNode(self.daysContainer);\n        if (self.weekNumbers)\n            clearNode(self.weekNumbers);\n        var frag = document.createDocumentFragment();\n        for (var i = 0; i < self.config.showMonths; i++) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n        }\n        self.daysContainer.appendChild(frag);\n        self.days = self.daysContainer.firstChild;\n        if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n            onMouseOver();\n        }\n    }\n    function buildMonthSwitch() {\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType !== \"dropdown\")\n            return;\n        var shouldBuildMonth = function (month) {\n            if (self.config.minDate !== undefined &&\n                self.currentYear === self.config.minDate.getFullYear() &&\n                month < self.config.minDate.getMonth()) {\n                return false;\n            }\n            return !(self.config.maxDate !== undefined &&\n                self.currentYear === self.config.maxDate.getFullYear() &&\n                month > self.config.maxDate.getMonth());\n        };\n        self.monthsDropdownContainer.tabIndex = -1;\n        self.monthsDropdownContainer.innerHTML = \"\";\n        for (var i = 0; i < 12; i++) {\n            if (!shouldBuildMonth(i))\n                continue;\n            var month = createElement(\"option\", \"flatpickr-monthDropdown-month\");\n            month.value = new Date(self.currentYear, i).getMonth().toString();\n            month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);\n            month.tabIndex = -1;\n            if (self.currentMonth === i) {\n                month.selected = true;\n            }\n            self.monthsDropdownContainer.appendChild(month);\n        }\n    }\n    function buildMonth() {\n        var container = createElement(\"div\", \"flatpickr-month\");\n        var monthNavFragment = window.document.createDocumentFragment();\n        var monthElement;\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType === \"static\") {\n            monthElement = createElement(\"span\", \"cur-month\");\n        }\n        else {\n            self.monthsDropdownContainer = createElement(\"select\", \"flatpickr-monthDropdown-months\");\n            self.monthsDropdownContainer.setAttribute(\"aria-label\", self.l10n.monthAriaLabel);\n            bind(self.monthsDropdownContainer, \"change\", function (e) {\n                var target = getEventTarget(e);\n                var selectedMonth = parseInt(target.value, 10);\n                self.changeMonth(selectedMonth - self.currentMonth);\n                triggerEvent(\"onMonthChange\");\n            });\n            buildMonthSwitch();\n            monthElement = self.monthsDropdownContainer;\n        }\n        var yearInput = createNumberInput(\"cur-year\", { tabindex: \"-1\" });\n        var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n        yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n        if (self.config.minDate) {\n            yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n        }\n        if (self.config.maxDate) {\n            yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n            yearElement.disabled =\n                !!self.config.minDate &&\n                    self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n        }\n        var currentMonth = createElement(\"div\", \"flatpickr-current-month\");\n        currentMonth.appendChild(monthElement);\n        currentMonth.appendChild(yearInput);\n        monthNavFragment.appendChild(currentMonth);\n        container.appendChild(monthNavFragment);\n        return {\n            container: container,\n            yearElement: yearElement,\n            monthElement: monthElement,\n        };\n    }\n    function buildMonths() {\n        clearNode(self.monthNav);\n        self.monthNav.appendChild(self.prevMonthNav);\n        if (self.config.showMonths) {\n            self.yearElements = [];\n            self.monthElements = [];\n        }\n        for (var m = self.config.showMonths; m--;) {\n            var month = buildMonth();\n            self.yearElements.push(month.yearElement);\n            self.monthElements.push(month.monthElement);\n            self.monthNav.appendChild(month.container);\n        }\n        self.monthNav.appendChild(self.nextMonthNav);\n    }\n    function buildMonthNav() {\n        self.monthNav = createElement(\"div\", \"flatpickr-months\");\n        self.yearElements = [];\n        self.monthElements = [];\n        self.prevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n        self.prevMonthNav.innerHTML = self.config.prevArrow;\n        self.nextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n        self.nextMonthNav.innerHTML = self.config.nextArrow;\n        buildMonths();\n        Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n            get: function () { return self.__hidePrevMonthArrow; },\n            set: function (bool) {\n                if (self.__hidePrevMonthArrow !== bool) {\n                    toggleClass(self.prevMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hidePrevMonthArrow = bool;\n                }\n            },\n        });\n        Object.defineProperty(self, \"_hideNextMonthArrow\", {\n            get: function () { return self.__hideNextMonthArrow; },\n            set: function (bool) {\n                if (self.__hideNextMonthArrow !== bool) {\n                    toggleClass(self.nextMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hideNextMonthArrow = bool;\n                }\n            },\n        });\n        self.currentYearElement = self.yearElements[0];\n        updateNavigationCurrentMonth();\n        return self.monthNav;\n    }\n    function buildTime() {\n        self.calendarContainer.classList.add(\"hasTime\");\n        if (self.config.noCalendar)\n            self.calendarContainer.classList.add(\"noCalendar\");\n        var defaults = getDefaultHours(self.config);\n        self.timeContainer = createElement(\"div\", \"flatpickr-time\");\n        self.timeContainer.tabIndex = -1;\n        var separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n        var hourInput = createNumberInput(\"flatpickr-hour\", {\n            \"aria-label\": self.l10n.hourAriaLabel,\n        });\n        self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n        var minuteInput = createNumberInput(\"flatpickr-minute\", {\n            \"aria-label\": self.l10n.minuteAriaLabel,\n        });\n        self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n        self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n        self.hourElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getHours()\n            : self.config.time_24hr\n                ? defaults.hours\n                : military2ampm(defaults.hours));\n        self.minuteElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getMinutes()\n            : defaults.minutes);\n        self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n        self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n        self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n        self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n        self.hourElement.setAttribute(\"maxlength\", \"2\");\n        self.minuteElement.setAttribute(\"min\", \"0\");\n        self.minuteElement.setAttribute(\"max\", \"59\");\n        self.minuteElement.setAttribute(\"maxlength\", \"2\");\n        self.timeContainer.appendChild(hourInput);\n        self.timeContainer.appendChild(separator);\n        self.timeContainer.appendChild(minuteInput);\n        if (self.config.time_24hr)\n            self.timeContainer.classList.add(\"time24hr\");\n        if (self.config.enableSeconds) {\n            self.timeContainer.classList.add(\"hasSeconds\");\n            var secondInput = createNumberInput(\"flatpickr-second\");\n            self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n            self.secondElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getSeconds()\n                : defaults.seconds);\n            self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n            self.secondElement.setAttribute(\"min\", \"0\");\n            self.secondElement.setAttribute(\"max\", \"59\");\n            self.secondElement.setAttribute(\"maxlength\", \"2\");\n            self.timeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n            self.timeContainer.appendChild(secondInput);\n        }\n        if (!self.config.time_24hr) {\n            self.amPM = createElement(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[int((self.latestSelectedDateObj\n                ? self.hourElement.value\n                : self.config.defaultHour) > 11)]);\n            self.amPM.title = self.l10n.toggleTitle;\n            self.amPM.tabIndex = -1;\n            self.timeContainer.appendChild(self.amPM);\n        }\n        return self.timeContainer;\n    }\n    function buildWeekdays() {\n        if (!self.weekdayContainer)\n            self.weekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n        else\n            clearNode(self.weekdayContainer);\n        for (var i = self.config.showMonths; i--;) {\n            var container = createElement(\"div\", \"flatpickr-weekdaycontainer\");\n            self.weekdayContainer.appendChild(container);\n        }\n        updateWeekdays();\n        return self.weekdayContainer;\n    }\n    function updateWeekdays() {\n        if (!self.weekdayContainer) {\n            return;\n        }\n        var firstDayOfWeek = self.l10n.firstDayOfWeek;\n        var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);\n        if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n            weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n        }\n        for (var i = self.config.showMonths; i--;) {\n            self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n        }\n    }\n    function buildWeeks() {\n        self.calendarContainer.classList.add(\"hasWeeks\");\n        var weekWrapper = createElement(\"div\", \"flatpickr-weekwrapper\");\n        weekWrapper.appendChild(createElement(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n        var weekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n        weekWrapper.appendChild(weekNumbers);\n        return {\n            weekWrapper: weekWrapper,\n            weekNumbers: weekNumbers,\n        };\n    }\n    function changeMonth(value, isOffset) {\n        if (isOffset === void 0) { isOffset = true; }\n        var delta = isOffset ? value : value - self.currentMonth;\n        if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n            (delta > 0 && self._hideNextMonthArrow === true))\n            return;\n        self.currentMonth += delta;\n        if (self.currentMonth < 0 || self.currentMonth > 11) {\n            self.currentYear += self.currentMonth > 11 ? 1 : -1;\n            self.currentMonth = (self.currentMonth + 12) % 12;\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        buildDays();\n        triggerEvent(\"onMonthChange\");\n        updateNavigationCurrentMonth();\n    }\n    function clear(triggerChangeEvent, toInitial) {\n        if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n        if (toInitial === void 0) { toInitial = true; }\n        self.input.value = \"\";\n        if (self.altInput !== undefined)\n            self.altInput.value = \"\";\n        if (self.mobileInput !== undefined)\n            self.mobileInput.value = \"\";\n        self.selectedDates = [];\n        self.latestSelectedDateObj = undefined;\n        if (toInitial === true) {\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n        }\n        if (self.config.enableTime === true) {\n            var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n            setHours(hours, minutes, seconds);\n        }\n        self.redraw();\n        if (triggerChangeEvent)\n            triggerEvent(\"onChange\");\n    }\n    function close() {\n        self.isOpen = false;\n        if (!self.isMobile) {\n            if (self.calendarContainer !== undefined) {\n                self.calendarContainer.classList.remove(\"open\");\n            }\n            if (self._input !== undefined) {\n                self._input.classList.remove(\"active\");\n            }\n        }\n        triggerEvent(\"onClose\");\n    }\n    function destroy() {\n        if (self.config !== undefined)\n            triggerEvent(\"onDestroy\");\n        for (var i = self._handlers.length; i--;) {\n            self._handlers[i].remove();\n        }\n        self._handlers = [];\n        if (self.mobileInput) {\n            if (self.mobileInput.parentNode)\n                self.mobileInput.parentNode.removeChild(self.mobileInput);\n            self.mobileInput = undefined;\n        }\n        else if (self.calendarContainer && self.calendarContainer.parentNode) {\n            if (self.config.static && self.calendarContainer.parentNode) {\n                var wrapper = self.calendarContainer.parentNode;\n                wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                if (wrapper.parentNode) {\n                    while (wrapper.firstChild)\n                        wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                }\n            }\n            else\n                self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n        }\n        if (self.altInput) {\n            self.input.type = \"text\";\n            if (self.altInput.parentNode)\n                self.altInput.parentNode.removeChild(self.altInput);\n            delete self.altInput;\n        }\n        if (self.input) {\n            self.input.type = self.input._type;\n            self.input.classList.remove(\"flatpickr-input\");\n            self.input.removeAttribute(\"readonly\");\n        }\n        [\n            \"_showTimeInput\",\n            \"latestSelectedDateObj\",\n            \"_hideNextMonthArrow\",\n            \"_hidePrevMonthArrow\",\n            \"__hideNextMonthArrow\",\n            \"__hidePrevMonthArrow\",\n            \"isMobile\",\n            \"isOpen\",\n            \"selectedDateElem\",\n            \"minDateHasTime\",\n            \"maxDateHasTime\",\n            \"days\",\n            \"daysContainer\",\n            \"_input\",\n            \"_positionElement\",\n            \"innerContainer\",\n            \"rContainer\",\n            \"monthNav\",\n            \"todayDateElem\",\n            \"calendarContainer\",\n            \"weekdayContainer\",\n            \"prevMonthNav\",\n            \"nextMonthNav\",\n            \"monthsDropdownContainer\",\n            \"currentMonthElement\",\n            \"currentYearElement\",\n            \"navigationCurrentMonth\",\n            \"selectedDateElem\",\n            \"config\",\n        ].forEach(function (k) {\n            try {\n                delete self[k];\n            }\n            catch (_) { }\n        });\n    }\n    function isCalendarElem(elem) {\n        return self.calendarContainer.contains(elem);\n    }\n    function documentClick(e) {\n        if (self.isOpen && !self.config.inline) {\n            var eventTarget_1 = getEventTarget(e);\n            var isCalendarElement = isCalendarElem(eventTarget_1);\n            var isInput = eventTarget_1 === self.input ||\n                eventTarget_1 === self.altInput ||\n                self.element.contains(eventTarget_1) ||\n                (e.path &&\n                    e.path.indexOf &&\n                    (~e.path.indexOf(self.input) ||\n                        ~e.path.indexOf(self.altInput)));\n            var lostFocus = !isInput &&\n                !isCalendarElement &&\n                !isCalendarElem(e.relatedTarget);\n            var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                return elem.contains(eventTarget_1);\n            });\n            if (lostFocus && isIgnored) {\n                if (self.config.allowInput) {\n                    self.setDate(self._input.value, false, self.config.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                }\n                if (self.timeContainer !== undefined &&\n                    self.minuteElement !== undefined &&\n                    self.hourElement !== undefined &&\n                    self.input.value !== \"\" &&\n                    self.input.value !== undefined) {\n                    updateTime();\n                }\n                self.close();\n                if (self.config &&\n                    self.config.mode === \"range\" &&\n                    self.selectedDates.length === 1)\n                    self.clear(false);\n            }\n        }\n    }\n    function changeYear(newYear) {\n        if (!newYear ||\n            (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n            (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n            return;\n        var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n        self.currentYear = newYearNum || self.currentYear;\n        if (self.config.maxDate &&\n            self.currentYear === self.config.maxDate.getFullYear()) {\n            self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n        }\n        else if (self.config.minDate &&\n            self.currentYear === self.config.minDate.getFullYear()) {\n            self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n        }\n        if (isNewYear) {\n            self.redraw();\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n    }\n    function isEnabled(date, timeless) {\n        var _a;\n        if (timeless === void 0) { timeless = true; }\n        var dateToCheck = self.parseDate(date, undefined, timeless);\n        if ((self.config.minDate &&\n            dateToCheck &&\n            compareDates(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n            (self.config.maxDate &&\n                dateToCheck &&\n                compareDates(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n            return false;\n        if (!self.config.enable && self.config.disable.length === 0)\n            return true;\n        if (dateToCheck === undefined)\n            return false;\n        var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;\n        for (var i = 0, d = void 0; i < array.length; i++) {\n            d = array[i];\n            if (typeof d === \"function\" &&\n                d(dateToCheck))\n                return bool;\n            else if (d instanceof Date &&\n                dateToCheck !== undefined &&\n                d.getTime() === dateToCheck.getTime())\n                return bool;\n            else if (typeof d === \"string\") {\n                var parsed = self.parseDate(d, undefined, true);\n                return parsed && parsed.getTime() === dateToCheck.getTime()\n                    ? bool\n                    : !bool;\n            }\n            else if (typeof d === \"object\" &&\n                dateToCheck !== undefined &&\n                d.from &&\n                d.to &&\n                dateToCheck.getTime() >= d.from.getTime() &&\n                dateToCheck.getTime() <= d.to.getTime())\n                return bool;\n        }\n        return !bool;\n    }\n    function isInView(elem) {\n        if (self.daysContainer !== undefined)\n            return (elem.className.indexOf(\"hidden\") === -1 &&\n                elem.className.indexOf(\"flatpickr-disabled\") === -1 &&\n                self.daysContainer.contains(elem));\n        return false;\n    }\n    function onBlur(e) {\n        var isInput = e.target === self._input;\n        var valueChanged = self._input.value.trimEnd() !== getDateStr();\n        if (isInput &&\n            valueChanged &&\n            !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {\n            self.setDate(self._input.value, true, e.target === self.altInput\n                ? self.config.altFormat\n                : self.config.dateFormat);\n        }\n    }\n    function onKeyDown(e) {\n        var eventTarget = getEventTarget(e);\n        var isInput = self.config.wrap\n            ? element.contains(eventTarget)\n            : eventTarget === self._input;\n        var allowInput = self.config.allowInput;\n        var allowKeydown = self.isOpen && (!allowInput || !isInput);\n        var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n        if (e.keyCode === 13 && isInput) {\n            if (allowInput) {\n                self.setDate(self._input.value, true, eventTarget === self.altInput\n                    ? self.config.altFormat\n                    : self.config.dateFormat);\n                self.close();\n                return eventTarget.blur();\n            }\n            else {\n                self.open();\n            }\n        }\n        else if (isCalendarElem(eventTarget) ||\n            allowKeydown ||\n            allowInlineKeydown) {\n            var isTimeObj = !!self.timeContainer &&\n                self.timeContainer.contains(eventTarget);\n            switch (e.keyCode) {\n                case 13:\n                    if (isTimeObj) {\n                        e.preventDefault();\n                        updateTime();\n                        focusAndClose();\n                    }\n                    else\n                        selectDate(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    focusAndClose();\n                    break;\n                case 8:\n                case 46:\n                    if (isInput && !self.config.allowInput) {\n                        e.preventDefault();\n                        self.clear();\n                    }\n                    break;\n                case 37:\n                case 39:\n                    if (!isTimeObj && !isInput) {\n                        e.preventDefault();\n                        var activeElement = getClosestActiveElement();\n                        if (self.daysContainer !== undefined &&\n                            (allowInput === false ||\n                                (activeElement && isInView(activeElement)))) {\n                            var delta_1 = e.keyCode === 39 ? 1 : -1;\n                            if (!e.ctrlKey)\n                                focusOnDay(undefined, delta_1);\n                            else {\n                                e.stopPropagation();\n                                changeMonth(delta_1);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                        }\n                    }\n                    else if (self.hourElement)\n                        self.hourElement.focus();\n                    break;\n                case 38:\n                case 40:\n                    e.preventDefault();\n                    var delta = e.keyCode === 40 ? 1 : -1;\n                    if ((self.daysContainer &&\n                        eventTarget.$i !== undefined) ||\n                        eventTarget === self.input ||\n                        eventTarget === self.altInput) {\n                        if (e.ctrlKey) {\n                            e.stopPropagation();\n                            changeYear(self.currentYear - delta);\n                            focusOnDay(getFirstAvailableDay(1), 0);\n                        }\n                        else if (!isTimeObj)\n                            focusOnDay(undefined, delta * 7);\n                    }\n                    else if (eventTarget === self.currentYearElement) {\n                        changeYear(self.currentYear - delta);\n                    }\n                    else if (self.config.enableTime) {\n                        if (!isTimeObj && self.hourElement)\n                            self.hourElement.focus();\n                        updateTime(e);\n                        self._debouncedChange();\n                    }\n                    break;\n                case 9:\n                    if (isTimeObj) {\n                        var elems = [\n                            self.hourElement,\n                            self.minuteElement,\n                            self.secondElement,\n                            self.amPM,\n                        ]\n                            .concat(self.pluginElements)\n                            .filter(function (x) { return x; });\n                        var i = elems.indexOf(eventTarget);\n                        if (i !== -1) {\n                            var target = elems[i + (e.shiftKey ? -1 : 1)];\n                            e.preventDefault();\n                            (target || self._input).focus();\n                        }\n                    }\n                    else if (!self.config.noCalendar &&\n                        self.daysContainer &&\n                        self.daysContainer.contains(eventTarget) &&\n                        e.shiftKey) {\n                        e.preventDefault();\n                        self._input.focus();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            switch (e.key) {\n                case self.l10n.amPM[0].charAt(0):\n                case self.l10n.amPM[0].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[0];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n                case self.l10n.amPM[1].charAt(0):\n                case self.l10n.amPM[1].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[1];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n            }\n        }\n        if (isInput || isCalendarElem(eventTarget)) {\n            triggerEvent(\"onKeyDown\", e);\n        }\n    }\n    function onMouseOver(elem, cellClass) {\n        if (cellClass === void 0) { cellClass = \"flatpickr-day\"; }\n        if (self.selectedDates.length !== 1 ||\n            (elem &&\n                (!elem.classList.contains(cellClass) ||\n                    elem.classList.contains(\"flatpickr-disabled\"))))\n            return;\n        var hoverDate = elem\n            ? elem.dateObj.getTime()\n            : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());\n        var containsDisabled = false;\n        var minRange = 0, maxRange = 0;\n        for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {\n            if (!isEnabled(new Date(t), true)) {\n                containsDisabled =\n                    containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                if (t < initialDate && (!minRange || t > minRange))\n                    minRange = t;\n                else if (t > initialDate && (!maxRange || t < maxRange))\n                    maxRange = t;\n            }\n        }\n        var hoverableCells = Array.from(self.rContainer.querySelectorAll(\"*:nth-child(-n+\" + self.config.showMonths + \") > .\" + cellClass));\n        hoverableCells.forEach(function (dayElem) {\n            var date = dayElem.dateObj;\n            var timestamp = date.getTime();\n            var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                (maxRange > 0 && timestamp > maxRange);\n            if (outOfRange) {\n                dayElem.classList.add(\"notAllowed\");\n                [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                    dayElem.classList.remove(c);\n                });\n                return;\n            }\n            else if (containsDisabled && !outOfRange)\n                return;\n            [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                dayElem.classList.remove(c);\n            });\n            if (elem !== undefined) {\n                elem.classList.add(hoverDate <= self.selectedDates[0].getTime()\n                    ? \"startRange\"\n                    : \"endRange\");\n                if (initialDate < hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"startRange\");\n                else if (initialDate > hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"endRange\");\n                if (timestamp >= minRange &&\n                    (maxRange === 0 || timestamp <= maxRange) &&\n                    isBetween(timestamp, initialDate, hoverDate))\n                    dayElem.classList.add(\"inRange\");\n            }\n        });\n    }\n    function onResize() {\n        if (self.isOpen && !self.config.static && !self.config.inline)\n            positionCalendar();\n    }\n    function open(e, positionElement) {\n        if (positionElement === void 0) { positionElement = self._positionElement; }\n        if (self.isMobile === true) {\n            if (e) {\n                e.preventDefault();\n                var eventTarget = getEventTarget(e);\n                if (eventTarget) {\n                    eventTarget.blur();\n                }\n            }\n            if (self.mobileInput !== undefined) {\n                self.mobileInput.focus();\n                self.mobileInput.click();\n            }\n            triggerEvent(\"onOpen\");\n            return;\n        }\n        else if (self._input.disabled || self.config.inline) {\n            return;\n        }\n        var wasOpen = self.isOpen;\n        self.isOpen = true;\n        if (!wasOpen) {\n            self.calendarContainer.classList.add(\"open\");\n            self._input.classList.add(\"active\");\n            triggerEvent(\"onOpen\");\n            positionCalendar(positionElement);\n        }\n        if (self.config.enableTime === true && self.config.noCalendar === true) {\n            if (self.config.allowInput === false &&\n                (e === undefined ||\n                    !self.timeContainer.contains(e.relatedTarget))) {\n                setTimeout(function () { return self.hourElement.select(); }, 50);\n            }\n        }\n    }\n    function minMaxDateSetter(type) {\n        return function (date) {\n            var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n            var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n            if (dateObj !== undefined) {\n                self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                    dateObj.getHours() > 0 ||\n                        dateObj.getMinutes() > 0 ||\n                        dateObj.getSeconds() > 0;\n            }\n            if (self.selectedDates) {\n                self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                if (!self.selectedDates.length && type === \"min\")\n                    setHoursFromDate(dateObj);\n                updateValue();\n            }\n            if (self.daysContainer) {\n                redraw();\n                if (dateObj !== undefined)\n                    self.currentYearElement[type] = dateObj.getFullYear().toString();\n                else\n                    self.currentYearElement.removeAttribute(type);\n                self.currentYearElement.disabled =\n                    !!inverseDateObj &&\n                        dateObj !== undefined &&\n                        inverseDateObj.getFullYear() === dateObj.getFullYear();\n            }\n        };\n    }\n    function parseConfig() {\n        var boolOpts = [\n            \"wrap\",\n            \"weekNumbers\",\n            \"allowInput\",\n            \"allowInvalidPreload\",\n            \"clickOpens\",\n            \"time_24hr\",\n            \"enableTime\",\n            \"noCalendar\",\n            \"altInput\",\n            \"shorthandCurrentMonth\",\n            \"inline\",\n            \"static\",\n            \"enableSeconds\",\n            \"disableMobile\",\n        ];\n        var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);\n        var formats = {};\n        self.config.parseDate = userConfig.parseDate;\n        self.config.formatDate = userConfig.formatDate;\n        Object.defineProperty(self.config, \"enable\", {\n            get: function () { return self.config._enable; },\n            set: function (dates) {\n                self.config._enable = parseDateRules(dates);\n            },\n        });\n        Object.defineProperty(self.config, \"disable\", {\n            get: function () { return self.config._disable; },\n            set: function (dates) {\n                self.config._disable = parseDateRules(dates);\n            },\n        });\n        var timeMode = userConfig.mode === \"time\";\n        if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n            var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaultOptions.dateFormat;\n            formats.dateFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                    : defaultDateFormat + \" H:i\" + (userConfig.enableSeconds ? \":S\" : \"\");\n        }\n        if (userConfig.altInput &&\n            (userConfig.enableTime || timeMode) &&\n            !userConfig.altFormat) {\n            var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaultOptions.altFormat;\n            formats.altFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                    : defaultAltFormat + (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n        }\n        Object.defineProperty(self.config, \"minDate\", {\n            get: function () { return self.config._minDate; },\n            set: minMaxDateSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxDate\", {\n            get: function () { return self.config._maxDate; },\n            set: minMaxDateSetter(\"max\"),\n        });\n        var minMaxTimeSetter = function (type) { return function (val) {\n            self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i:S\");\n        }; };\n        Object.defineProperty(self.config, \"minTime\", {\n            get: function () { return self.config._minTime; },\n            set: minMaxTimeSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxTime\", {\n            get: function () { return self.config._maxTime; },\n            set: minMaxTimeSetter(\"max\"),\n        });\n        if (userConfig.mode === \"time\") {\n            self.config.noCalendar = true;\n            self.config.enableTime = true;\n        }\n        Object.assign(self.config, formats, userConfig);\n        for (var i = 0; i < boolOpts.length; i++)\n            self.config[boolOpts[i]] =\n                self.config[boolOpts[i]] === true ||\n                    self.config[boolOpts[i]] === \"true\";\n        HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n            self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);\n        });\n        self.isMobile =\n            !self.config.disableMobile &&\n                !self.config.inline &&\n                self.config.mode === \"single\" &&\n                !self.config.disable.length &&\n                !self.config.enable &&\n                !self.config.weekNumbers &&\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n        for (var i = 0; i < self.config.plugins.length; i++) {\n            var pluginConf = self.config.plugins[i](self) || {};\n            for (var key in pluginConf) {\n                if (HOOKS.indexOf(key) > -1) {\n                    self.config[key] = arrayify(pluginConf[key])\n                        .map(bindToInstance)\n                        .concat(self.config[key]);\n                }\n                else if (typeof userConfig[key] === \"undefined\")\n                    self.config[key] = pluginConf[key];\n            }\n        }\n        if (!userConfig.altInputClass) {\n            self.config.altInputClass =\n                getInputElem().className + \" \" + self.config.altInputClass;\n        }\n        triggerEvent(\"onParseConfig\");\n    }\n    function getInputElem() {\n        return self.config.wrap\n            ? element.querySelector(\"[data-input]\")\n            : element;\n    }\n    function setupLocale() {\n        if (typeof self.config.locale !== \"object\" &&\n            typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n            self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n        self.l10n = __assign(__assign({}, flatpickr.l10ns.default), (typeof self.config.locale === \"object\"\n            ? self.config.locale\n            : self.config.locale !== \"default\"\n                ? flatpickr.l10ns[self.config.locale]\n                : undefined));\n        tokenRegex.D = \"(\" + self.l10n.weekdays.shorthand.join(\"|\") + \")\";\n        tokenRegex.l = \"(\" + self.l10n.weekdays.longhand.join(\"|\") + \")\";\n        tokenRegex.M = \"(\" + self.l10n.months.shorthand.join(\"|\") + \")\";\n        tokenRegex.F = \"(\" + self.l10n.months.longhand.join(\"|\") + \")\";\n        tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n        var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));\n        if (userConfig.time_24hr === undefined &&\n            flatpickr.defaultConfig.time_24hr === undefined) {\n            self.config.time_24hr = self.l10n.time_24hr;\n        }\n        self.formatDate = createDateFormatter(self);\n        self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    }\n    function positionCalendar(customPositionElement) {\n        if (typeof self.config.position === \"function\") {\n            return void self.config.position(self, customPositionElement);\n        }\n        if (self.calendarContainer === undefined)\n            return;\n        triggerEvent(\"onPreCalendarPosition\");\n        var positionElement = customPositionElement || self._positionElement;\n        var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n            (configPosVertical !== \"below\" &&\n                distanceFromBottom < calendarHeight &&\n                inputBounds.top > calendarHeight);\n        var top = window.pageYOffset +\n            inputBounds.top +\n            (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n        toggleClass(self.calendarContainer, \"arrowTop\", !showOnTop);\n        toggleClass(self.calendarContainer, \"arrowBottom\", showOnTop);\n        if (self.config.inline)\n            return;\n        var left = window.pageXOffset + inputBounds.left;\n        var isCenter = false;\n        var isRight = false;\n        if (configPosHorizontal === \"center\") {\n            left -= (calendarWidth - inputBounds.width) / 2;\n            isCenter = true;\n        }\n        else if (configPosHorizontal === \"right\") {\n            left -= calendarWidth - inputBounds.width;\n            isRight = true;\n        }\n        toggleClass(self.calendarContainer, \"arrowLeft\", !isCenter && !isRight);\n        toggleClass(self.calendarContainer, \"arrowCenter\", isCenter);\n        toggleClass(self.calendarContainer, \"arrowRight\", isRight);\n        var right = window.document.body.offsetWidth -\n            (window.pageXOffset + inputBounds.right);\n        var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n        var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n        toggleClass(self.calendarContainer, \"rightMost\", rightMost);\n        if (self.config.static)\n            return;\n        self.calendarContainer.style.top = top + \"px\";\n        if (!rightMost) {\n            self.calendarContainer.style.left = left + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n        else if (!centerMost) {\n            self.calendarContainer.style.left = \"auto\";\n            self.calendarContainer.style.right = right + \"px\";\n        }\n        else {\n            var doc = getDocumentStyleSheet();\n            if (doc === undefined)\n                return;\n            var bodyWidth = window.document.body.offsetWidth;\n            var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n            var centerBefore = \".flatpickr-calendar.centerMost:before\";\n            var centerAfter = \".flatpickr-calendar.centerMost:after\";\n            var centerIndex = doc.cssRules.length;\n            var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n            toggleClass(self.calendarContainer, \"rightMost\", false);\n            toggleClass(self.calendarContainer, \"centerMost\", true);\n            doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n            self.calendarContainer.style.left = centerLeft + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n    }\n    function getDocumentStyleSheet() {\n        var editableSheet = null;\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            var sheet = document.styleSheets[i];\n            if (!sheet.cssRules)\n                continue;\n            try {\n                sheet.cssRules;\n            }\n            catch (err) {\n                continue;\n            }\n            editableSheet = sheet;\n            break;\n        }\n        return editableSheet != null ? editableSheet : createStyleSheet();\n    }\n    function createStyleSheet() {\n        var style = document.createElement(\"style\");\n        document.head.appendChild(style);\n        return style.sheet;\n    }\n    function redraw() {\n        if (self.config.noCalendar || self.isMobile)\n            return;\n        buildMonthSwitch();\n        updateNavigationCurrentMonth();\n        buildDays();\n    }\n    function focusAndClose() {\n        self._input.focus();\n        if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n            navigator.msMaxTouchPoints !== undefined) {\n            setTimeout(self.close, 0);\n        }\n        else {\n            self.close();\n        }\n    }\n    function selectDate(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var isSelectable = function (day) {\n            return day.classList &&\n                day.classList.contains(\"flatpickr-day\") &&\n                !day.classList.contains(\"flatpickr-disabled\") &&\n                !day.classList.contains(\"notAllowed\");\n        };\n        var t = findParent(getEventTarget(e), isSelectable);\n        if (t === undefined)\n            return;\n        var target = t;\n        var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n        var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n            selectedDate.getMonth() >\n                self.currentMonth + self.config.showMonths - 1) &&\n            self.config.mode !== \"range\";\n        self.selectedDateElem = target;\n        if (self.config.mode === \"single\")\n            self.selectedDates = [selectedDate];\n        else if (self.config.mode === \"multiple\") {\n            var selectedIndex = isDateSelected(selectedDate);\n            if (selectedIndex)\n                self.selectedDates.splice(parseInt(selectedIndex), 1);\n            else\n                self.selectedDates.push(selectedDate);\n        }\n        else if (self.config.mode === \"range\") {\n            if (self.selectedDates.length === 2) {\n                self.clear(false, false);\n            }\n            self.latestSelectedDateObj = selectedDate;\n            self.selectedDates.push(selectedDate);\n            if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        setHoursFromInputs();\n        if (shouldChangeMonth) {\n            var isNewYear = self.currentYear !== selectedDate.getFullYear();\n            self.currentYear = selectedDate.getFullYear();\n            self.currentMonth = selectedDate.getMonth();\n            if (isNewYear) {\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            triggerEvent(\"onMonthChange\");\n        }\n        updateNavigationCurrentMonth();\n        buildDays();\n        updateValue();\n        if (!shouldChangeMonth &&\n            self.config.mode !== \"range\" &&\n            self.config.showMonths === 1)\n            focusOnDayElem(target);\n        else if (self.selectedDateElem !== undefined &&\n            self.hourElement === undefined) {\n            self.selectedDateElem && self.selectedDateElem.focus();\n        }\n        if (self.hourElement !== undefined)\n            self.hourElement !== undefined && self.hourElement.focus();\n        if (self.config.closeOnSelect) {\n            var single = self.config.mode === \"single\" && !self.config.enableTime;\n            var range = self.config.mode === \"range\" &&\n                self.selectedDates.length === 2 &&\n                !self.config.enableTime;\n            if (single || range) {\n                focusAndClose();\n            }\n        }\n        triggerChange();\n    }\n    var CALLBACKS = {\n        locale: [setupLocale, updateWeekdays],\n        showMonths: [buildMonths, setCalendarWidth, buildWeekdays],\n        minDate: [jumpToDate],\n        maxDate: [jumpToDate],\n        positionElement: [updatePositionElement],\n        clickOpens: [\n            function () {\n                if (self.config.clickOpens === true) {\n                    bind(self._input, \"focus\", self.open);\n                    bind(self._input, \"click\", self.open);\n                }\n                else {\n                    self._input.removeEventListener(\"focus\", self.open);\n                    self._input.removeEventListener(\"click\", self.open);\n                }\n            },\n        ],\n    };\n    function set(option, value) {\n        if (option !== null && typeof option === \"object\") {\n            Object.assign(self.config, option);\n            for (var key in option) {\n                if (CALLBACKS[key] !== undefined)\n                    CALLBACKS[key].forEach(function (x) { return x(); });\n            }\n        }\n        else {\n            self.config[option] = value;\n            if (CALLBACKS[option] !== undefined)\n                CALLBACKS[option].forEach(function (x) { return x(); });\n            else if (HOOKS.indexOf(option) > -1)\n                self.config[option] = arrayify(value);\n        }\n        self.redraw();\n        updateValue(true);\n    }\n    function setSelectedDate(inputDate, format) {\n        var dates = [];\n        if (inputDate instanceof Array)\n            dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n        else if (inputDate instanceof Date || typeof inputDate === \"number\")\n            dates = [self.parseDate(inputDate, format)];\n        else if (typeof inputDate === \"string\") {\n            switch (self.config.mode) {\n                case \"single\":\n                case \"time\":\n                    dates = [self.parseDate(inputDate, format)];\n                    break;\n                case \"multiple\":\n                    dates = inputDate\n                        .split(self.config.conjunction)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                case \"range\":\n                    dates = inputDate\n                        .split(self.l10n.rangeSeparator)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                default:\n                    break;\n            }\n        }\n        else\n            self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n        self.selectedDates = (self.config.allowInvalidPreload\n            ? dates\n            : dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); }));\n        if (self.config.mode === \"range\")\n            self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n    }\n    function setDate(date, triggerChange, format) {\n        if (triggerChange === void 0) { triggerChange = false; }\n        if (format === void 0) { format = self.config.dateFormat; }\n        if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n            return self.clear(triggerChange);\n        setSelectedDate(date, format);\n        self.latestSelectedDateObj =\n            self.selectedDates[self.selectedDates.length - 1];\n        self.redraw();\n        jumpToDate(undefined, triggerChange);\n        setHoursFromDate();\n        if (self.selectedDates.length === 0) {\n            self.clear(false);\n        }\n        updateValue(triggerChange);\n        if (triggerChange)\n            triggerEvent(\"onChange\");\n    }\n    function parseDateRules(arr) {\n        return arr\n            .slice()\n            .map(function (rule) {\n            if (typeof rule === \"string\" ||\n                typeof rule === \"number\" ||\n                rule instanceof Date) {\n                return self.parseDate(rule, undefined, true);\n            }\n            else if (rule &&\n                typeof rule === \"object\" &&\n                rule.from &&\n                rule.to)\n                return {\n                    from: self.parseDate(rule.from, undefined),\n                    to: self.parseDate(rule.to, undefined),\n                };\n            return rule;\n        })\n            .filter(function (x) { return x; });\n    }\n    function setupDates() {\n        self.selectedDates = [];\n        self.now = self.parseDate(self.config.now) || new Date();\n        var preloadedDate = self.config.defaultDate ||\n            ((self.input.nodeName === \"INPUT\" ||\n                self.input.nodeName === \"TEXTAREA\") &&\n                self.input.placeholder &&\n                self.input.value === self.input.placeholder\n                ? null\n                : self.input.value);\n        if (preloadedDate)\n            setSelectedDate(preloadedDate, self.config.dateFormat);\n        self._initialDate =\n            self.selectedDates.length > 0\n                ? self.selectedDates[0]\n                : self.config.minDate &&\n                    self.config.minDate.getTime() > self.now.getTime()\n                    ? self.config.minDate\n                    : self.config.maxDate &&\n                        self.config.maxDate.getTime() < self.now.getTime()\n                        ? self.config.maxDate\n                        : self.now;\n        self.currentYear = self._initialDate.getFullYear();\n        self.currentMonth = self._initialDate.getMonth();\n        if (self.selectedDates.length > 0)\n            self.latestSelectedDateObj = self.selectedDates[0];\n        if (self.config.minTime !== undefined)\n            self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n        if (self.config.maxTime !== undefined)\n            self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n        self.minDateHasTime =\n            !!self.config.minDate &&\n                (self.config.minDate.getHours() > 0 ||\n                    self.config.minDate.getMinutes() > 0 ||\n                    self.config.minDate.getSeconds() > 0);\n        self.maxDateHasTime =\n            !!self.config.maxDate &&\n                (self.config.maxDate.getHours() > 0 ||\n                    self.config.maxDate.getMinutes() > 0 ||\n                    self.config.maxDate.getSeconds() > 0);\n    }\n    function setupInputs() {\n        self.input = getInputElem();\n        if (!self.input) {\n            self.config.errorHandler(new Error(\"Invalid input element specified\"));\n            return;\n        }\n        self.input._type = self.input.type;\n        self.input.type = \"text\";\n        self.input.classList.add(\"flatpickr-input\");\n        self._input = self.input;\n        if (self.config.altInput) {\n            self.altInput = createElement(self.input.nodeName, self.config.altInputClass);\n            self._input = self.altInput;\n            self.altInput.placeholder = self.input.placeholder;\n            self.altInput.disabled = self.input.disabled;\n            self.altInput.required = self.input.required;\n            self.altInput.tabIndex = self.input.tabIndex;\n            self.altInput.type = \"text\";\n            self.input.setAttribute(\"type\", \"hidden\");\n            if (!self.config.static && self.input.parentNode)\n                self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n        }\n        if (!self.config.allowInput)\n            self._input.setAttribute(\"readonly\", \"readonly\");\n        updatePositionElement();\n    }\n    function updatePositionElement() {\n        self._positionElement = self.config.positionElement || self._input;\n    }\n    function setupMobile() {\n        var inputType = self.config.enableTime\n            ? self.config.noCalendar\n                ? \"time\"\n                : \"datetime-local\"\n            : \"date\";\n        self.mobileInput = createElement(\"input\", self.input.className + \" flatpickr-mobile\");\n        self.mobileInput.tabIndex = 1;\n        self.mobileInput.type = inputType;\n        self.mobileInput.disabled = self.input.disabled;\n        self.mobileInput.required = self.input.required;\n        self.mobileInput.placeholder = self.input.placeholder;\n        self.mobileFormatStr =\n            inputType === \"datetime-local\"\n                ? \"Y-m-d\\\\TH:i:S\"\n                : inputType === \"date\"\n                    ? \"Y-m-d\"\n                    : \"H:i:S\";\n        if (self.selectedDates.length > 0) {\n            self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n        }\n        if (self.config.minDate)\n            self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n        if (self.config.maxDate)\n            self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n        if (self.input.getAttribute(\"step\"))\n            self.mobileInput.step = String(self.input.getAttribute(\"step\"));\n        self.input.type = \"hidden\";\n        if (self.altInput !== undefined)\n            self.altInput.type = \"hidden\";\n        try {\n            if (self.input.parentNode)\n                self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n        }\n        catch (_a) { }\n        bind(self.mobileInput, \"change\", function (e) {\n            self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);\n            triggerEvent(\"onChange\");\n            triggerEvent(\"onClose\");\n        });\n    }\n    function toggle(e) {\n        if (self.isOpen === true)\n            return self.close();\n        self.open(e);\n    }\n    function triggerEvent(event, data) {\n        if (self.config === undefined)\n            return;\n        var hooks = self.config[event];\n        if (hooks !== undefined && hooks.length > 0) {\n            for (var i = 0; hooks[i] && i < hooks.length; i++)\n                hooks[i](self.selectedDates, self.input.value, self, data);\n        }\n        if (event === \"onChange\") {\n            self.input.dispatchEvent(createEvent(\"change\"));\n            self.input.dispatchEvent(createEvent(\"input\"));\n        }\n    }\n    function createEvent(name) {\n        var e = document.createEvent(\"Event\");\n        e.initEvent(name, true, true);\n        return e;\n    }\n    function isDateSelected(date) {\n        for (var i = 0; i < self.selectedDates.length; i++) {\n            var selectedDate = self.selectedDates[i];\n            if (selectedDate instanceof Date &&\n                compareDates(selectedDate, date) === 0)\n                return \"\" + i;\n        }\n        return false;\n    }\n    function isDateInRange(date) {\n        if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n            return false;\n        return (compareDates(date, self.selectedDates[0]) >= 0 &&\n            compareDates(date, self.selectedDates[1]) <= 0);\n    }\n    function updateNavigationCurrentMonth() {\n        if (self.config.noCalendar || self.isMobile || !self.monthNav)\n            return;\n        self.yearElements.forEach(function (yearElement, i) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType === \"static\") {\n                self.monthElements[i].textContent =\n                    monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + \" \";\n            }\n            else {\n                self.monthsDropdownContainer.value = d.getMonth().toString();\n            }\n            yearElement.value = d.getFullYear().toString();\n        });\n        self._hidePrevMonthArrow =\n            self.config.minDate !== undefined &&\n                (self.currentYear === self.config.minDate.getFullYear()\n                    ? self.currentMonth <= self.config.minDate.getMonth()\n                    : self.currentYear < self.config.minDate.getFullYear());\n        self._hideNextMonthArrow =\n            self.config.maxDate !== undefined &&\n                (self.currentYear === self.config.maxDate.getFullYear()\n                    ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                    : self.currentYear > self.config.maxDate.getFullYear());\n    }\n    function getDateStr(specificFormat) {\n        var format = specificFormat ||\n            (self.config.altInput ? self.config.altFormat : self.config.dateFormat);\n        return self.selectedDates\n            .map(function (dObj) { return self.formatDate(dObj, format); })\n            .filter(function (d, i, arr) {\n            return self.config.mode !== \"range\" ||\n                self.config.enableTime ||\n                arr.indexOf(d) === i;\n        })\n            .join(self.config.mode !== \"range\"\n            ? self.config.conjunction\n            : self.l10n.rangeSeparator);\n    }\n    function updateValue(triggerChange) {\n        if (triggerChange === void 0) { triggerChange = true; }\n        if (self.mobileInput !== undefined && self.mobileFormatStr) {\n            self.mobileInput.value =\n                self.latestSelectedDateObj !== undefined\n                    ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                    : \"\";\n        }\n        self.input.value = getDateStr(self.config.dateFormat);\n        if (self.altInput !== undefined) {\n            self.altInput.value = getDateStr(self.config.altFormat);\n        }\n        if (triggerChange !== false)\n            triggerEvent(\"onValueUpdate\");\n    }\n    function onMonthNavClick(e) {\n        var eventTarget = getEventTarget(e);\n        var isPrevMonth = self.prevMonthNav.contains(eventTarget);\n        var isNextMonth = self.nextMonthNav.contains(eventTarget);\n        if (isPrevMonth || isNextMonth) {\n            changeMonth(isPrevMonth ? -1 : 1);\n        }\n        else if (self.yearElements.indexOf(eventTarget) >= 0) {\n            eventTarget.select();\n        }\n        else if (eventTarget.classList.contains(\"arrowUp\")) {\n            self.changeYear(self.currentYear + 1);\n        }\n        else if (eventTarget.classList.contains(\"arrowDown\")) {\n            self.changeYear(self.currentYear - 1);\n        }\n    }\n    function timeWrapper(e) {\n        e.preventDefault();\n        var isKeyDown = e.type === \"keydown\", eventTarget = getEventTarget(e), input = eventTarget;\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            self.amPM.textContent =\n                self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n        }\n        var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n            (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n        var newValue = curValue + step * delta;\n        if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n            var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n            if (newValue < min) {\n                newValue =\n                    max +\n                        newValue +\n                        int(!isHourElem) +\n                        (int(isHourElem) && int(!self.amPM));\n                if (isMinuteElem)\n                    incrementNumInput(undefined, -1, self.hourElement);\n            }\n            else if (newValue > max) {\n                newValue =\n                    input === self.hourElement ? newValue - max - int(!self.amPM) : min;\n                if (isMinuteElem)\n                    incrementNumInput(undefined, 1, self.hourElement);\n            }\n            if (self.amPM &&\n                isHourElem &&\n                (step === 1\n                    ? newValue + curValue === 23\n                    : Math.abs(newValue - curValue) > step)) {\n                self.amPM.textContent =\n                    self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            input.value = pad(newValue);\n        }\n    }\n    init();\n    return self;\n}\nfunction _flatpickr(nodeList, config) {\n    var nodes = Array.prototype.slice\n        .call(nodeList)\n        .filter(function (x) { return x instanceof HTMLElement; });\n    var instances = [];\n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        try {\n            if (node.getAttribute(\"data-fp-omit\") !== null)\n                continue;\n            if (node._flatpickr !== undefined) {\n                node._flatpickr.destroy();\n                node._flatpickr = undefined;\n            }\n            node._flatpickr = FlatpickrInstance(node, config || {});\n            instances.push(node._flatpickr);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    return instances.length === 1 ? instances[0] : instances;\n}\nif (typeof HTMLElement !== \"undefined\" &&\n    typeof HTMLCollection !== \"undefined\" &&\n    typeof NodeList !== \"undefined\") {\n    HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n    HTMLElement.prototype.flatpickr = function (config) {\n        return _flatpickr([this], config);\n    };\n}\nvar flatpickr = function (selector, config) {\n    if (typeof selector === \"string\") {\n        return _flatpickr(window.document.querySelectorAll(selector), config);\n    }\n    else if (selector instanceof Node) {\n        return _flatpickr([selector], config);\n    }\n    else {\n        return _flatpickr(selector, config);\n    }\n};\nflatpickr.defaultConfig = {};\nflatpickr.l10ns = {\n    en: __assign({}, English),\n    default: __assign({}, English),\n};\nflatpickr.localize = function (l10n) {\n    flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);\n};\nflatpickr.setDefaults = function (config) {\n    flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);\n};\nflatpickr.parseDate = createDateParser({});\nflatpickr.formatDate = createDateFormatter({});\nflatpickr.compareDates = compareDates;\nif (typeof jQuery !== \"undefined\" && typeof jQuery.fn !== \"undefined\") {\n    jQuery.fn.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n}\nDate.prototype.fp_incr = function (days) {\n    return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n};\nif (typeof window !== \"undefined\") {\n    window.flatpickr = flatpickr;\n}\nexport default flatpickr;\n","import $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport Tokens from './index.js';\n\nimport {\n\tthrottle,\n\tcopyToClipboard,\n\topenInNewTab,\n\trecipeSetRequiresUser,\n\taddUTMParameters\n} from '../common/utilities';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tdebounce,\n\taddParametersToURL\n} = _uo.utility;\n\nimport Modal from '../common/modal';\n\nimport Field from '../field';\n\nexport default class TokenSelector {\n\tconstructor( Field, options = {} ){\n\t\t// Check if the field supports tokens\n\t\tif ( Field.attributes.supportsTokens ){\n\t\t\t// Create different Tokens Selectors depending on the field type\n\t\t\tif ( Field.type == 'textarea' ){\n\t\t\t\treturn new TokenSelectorTextarea( Field, options );\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn new TokenSelectorInput( Field, options );\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass TokenSelectorInput extends Tokens {\n\tconstructor( Field, options = {} ){\n\t\tsuper(\n\t\t\tField.attributes.itemType,\n\t\t\tField.type,\n\t\t\toptions\n\t\t);\n\n\t\t// Save field\n\t\tthis.Field = Field;\n\n\t\t// Save the Token Selector instance in the field\n\t\tthis.Field.TokenSelector = this;\n\n\t\t// Render the token selector\n\t\tthis.render();\n\n\t\t// Set data\n\t\tthis.setData();\n\n\t\t// CodeMirror methods\n\t\tthis.Field.getField().on( 'ua-codemirror-ready', () => {\n\t\t\t// Get the CodeMirror editor\n\t\t\tthis.getCodeMirrorEditor();\n\n\t\t\t// Render tokens right away, without the delay\n\t\t\tthis.editor.setValue( this.editor.getValue() );\n\t\t\tthis.renderTokens();\n\n\t\t\t// Handle requests to add tokens to the field\n\t\t\tthis.handleAddTokens();\n\n\t\t\t// Render tokens in real time\n\t\t\tthis.renderTokensInRealTime();\n\t\t}); \n\t}\n\n\trender(){\n\t\tthis.RenderTokenSelector = new RenderTokenSelector( this.Field, this.tokens );\n\t}\n\n\tsetData(){\n\t\tthis.data = {\n\t\t\ttokenRenderingDebounce: 200,\n\t\t\t// cachedCMWidgets: []\n\t\t}\n\t}\n\n\tgetCodeMirrorEditor(){\n\t\tthis.editor = this.Field.fieldCM;\n\t}\n\n\thandleAddTokens(){\n\t\t// Listen events that are trying to add a token\n\t\tthis.Field.field\n\t\t\t.off( 'ua-add-token' )\n\t\t\t.on( 'ua-add-token', ( event, token ) => {\n\t\t\t\t// Check if it's a date or time field\n\t\t\t\tif ( [ 'date', 'time' ].includes( this.Field.attributes.fieldType ) ){\n\t\t\t\t\t// Remove the value of the field\n\t\t\t\t\tthis.editor.setValue( '' );\n\t\t\t\t}\n\n\t\t\t\t// Add it to the editor\n\t\t\t\tthis.insertTextAtCursor( `{{${ token.id }}}` );\n\n\t\t\t\t// Render tokens right away, without the delay\n\t\t\t\tthis.renderTokens({\n\t\t\t\t\tignoreRequiresUserModal: true\n\t\t\t\t});\n\n\t\t\t\t// Check if it's NOT a date or time field\n\t\t\t\tif ( ! [ 'date', 'time' ].includes( this.Field.attributes.fieldType ) ){\n\t\t\t\t\t// Focus the field again\n\t\t\t\t\tthis.editor.focus();\n\t\t\t\t}\n\n\t\t\t\t // Check if it's a date or time field\n\t\t\t\tif ( [ 'date', 'time' ].includes( this.Field.attributes.fieldType ) ){\n\t\t\t\t\t// Set value in the real field\n\t\t\t\t\tthis.Field.setValue( `{{${ token.id }}}` );\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tdestroy(){\n\t\t// Destroy wrapper\n\t\tthis.RenderTokenSelector.destroy();\n\t}\n\n\t/**\n\t * Insert content in the CM field at the current position\n\t *\n\t * @since 3.0\n\t * \n\t * @param  String   text The content to be added\n\t */\n\tinsertTextAtCursor( text ){\n\t\tthis.editor.doc.replaceRange( text, this.editor.doc.getCursor() );\n\t}\n\n\trenderTokensInRealTime(){\n\t\tthis.editor.on( 'changes', debounce( ( event ) => {\n\t\t\t// Render tokens\n\t\t\tthis.renderTokens();\n\t\t}, this.data.tokenRenderingDebounce ) );\n\t}\n\n\trenderTokens( options ){\n\t\t// Clear all the current widgets\n\t\t// this.data.cachedCMWidgets.forEach( marker => marker.clear() );\n\t\t// this.data.cachedCMWidgets = [];\n\n\t\t// Get the options\n\t\toptions = Object.assign({\n\t\t\tignoreRequiresUserModal: false,\n\t\t}, options );\n\n\t\t// Search tokens\n\t\tconst querySearchTokens = this.editor.getSearchCursor( /\\{\\{(.*?)\\}\\}/ );\n\n\t\t// Iterate them\n\t\twhile ( querySearchTokens.findNext() ){\n\t\t\t// Get position\n\t\t\tconst position = {\n\t\t\t\tfrom: querySearchTokens.from(),\n\t\t\t\tto:   querySearchTokens.to()\n\t\t\t}\n\n\t\t\t// Get the content\n\t\t\tconst content = this.editor.getRange(\n\t\t\t\tposition.from,\n\t\t\t\tposition.to\n\t\t\t);\n\n\t\t\t// Remove the opening and closing brackets\n\t\t\tconst tokenId = content.replace( '{{', '' ).replace( '}}', '' );\n\t\t\t\n\t\t\t// Get the token HMTL\n\t\t\tconst $tokenNode = this.createTokenDOMNode( tokenId );\n\n\t\t\t// Create CodeMirror widget\n\t\t\tconst widget = this.editor.markText( \n\t\t\t\tposition.from,\n\t\t\t\tposition.to,\n\t\t\t\t{\n\t\t\t\t\treplacedWith: $tokenNode\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (\n\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\tUncannyAutomator.recipe.type == 'anonymous'\n\t\t\t\t// Check if the recipe currently doesn't require user data\n\t\t\t\t&& ! UncannyAutomator.recipe.requiresUserData\n\t\t\t\t&& (\n\t\t\t\t\t// Check if the current tokens requires user data\n\t\t\t\t\tthis.tokensThatRequireUser.includes( tokenId )\n\t\t\t\t\t// Check if it's the user meta token\n\t\t\t\t\t|| tokenId.startsWith( 'USERMETA:' )\n\t\t\t\t)\n\t\t\t\t// Check if we have to ignore the requires user modal\n\t\t\t\t&& ! options.ignoreRequiresUserModal\n\t\t\t){\n\t\t\t\tthis.tokenNeedsUserModal( $tokenNode, {\n\t\t\t\t\t// Create function to remove the current token\n\t\t\t\t\tremoveToken: () => {\n\t\t\t\t\t\t// Get the widget position\n\t\t\t\t\t\tconst widgetPosition = widget.find();\n\n\t\t\t\t\t\t// Remove the widget\n\t\t\t\t\t\twidget.clear();\n\n\t\t\t\t\t\t// Remove the token content\n\t\t\t\t\t\tthis.editor.replaceRange(\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\twidgetPosition.from,\n\t\t\t\t\t\t\twidgetPosition.to\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Stop the loop\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Add events to the tokens, but only if the field is not read only\n\t\t\tif ( ! this.Field.attributes.isReadOnly ){\n\t\t\t\t// Select on click\n\t\t\t\t$tokenNode.addEventListener( 'click', () => {\n\t\t\t\t\t// Check if it's focus\n\t\t\t\t\tif ( ! $tokenNode.classList.contains( 'uap-token--cm-focused' ) ){\n\t\t\t\t\t\t// Add focus class\n\t\t\t\t\t\t$tokenNode.classList.add( 'uap-token--cm-focused' );\n\n\t\t\t\t\t\tconst onFocusOut = () => {\n\t\t\t\t\t\t\t// Remove focus class\n\t\t\t\t\t\t\t$tokenNode.classList.remove( 'uap-token--cm-focused' );\n\n\t\t\t\t\t\t\t// Remove the event listener that listen clicks\n\t\t\t\t\t\t\t// outside the token\n\t\t\t\t\t\t\tdocument.removeEventListener( 'mouseup', onClickOutside );\n\n\t\t\t\t\t\t\t// Remove the event listener to copy to the\n\t\t\t\t\t\t\t// token to the clipboard\n\t\t\t\t\t\t\tdocument.removeEventListener( 'copy', onCopy );\n\n\t\t\t\t\t\t\t// Remove the event listener to remove the token\n\t\t\t\t\t\t\tdocument.removeEventListener( 'keydown', onDelete );\n\n\t\t\t\t\t\t\t// Remove the event listener to move the cursor\n\t\t\t\t\t\t\t// to the left or right using the direction keys\n\t\t\t\t\t\t\tdocument.removeEventListener( 'keydown', onNavigation );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Listen clicks outside\n\t\t\t\t\t\tconst onClickOutside = ( event ) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t// Check if the clicked element is not the token\n\t\t\t\t\t\t\t\t! ( $tokenNode === event.target )\n\t\t\t\t\t\t\t\t// And check if the clicked element is NOT a child\n\t\t\t\t\t\t\t\t// of the token\n\t\t\t\t\t\t\t\t&& ! ( $tokenNode.contains( event.target ) )\n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\tonFocusOut();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdocument.addEventListener( 'mouseup', onClickOutside );\n\n\t\t\t\t\t\t// Listen copy event\n\t\t\t\t\t\tconst onCopy = ( event ) => {\n\t\t\t\t\t\t\tonFocusOut();\n\n\t\t\t\t\t\t\t// Copy the token ID\n\t\t\t\t\t\t\tcopyToClipboard( `{{${ tokenId }}}` );\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdocument.addEventListener( 'copy', onCopy );\n\n\t\t\t\t\t\t// Listen delete event\n\t\t\t\t\t\tconst onDelete = ( event ) => {\n\t\t\t\t\t\t\t// Get the pressed key\n\t\t\t\t\t\t\tconst key = event.keyCode || event.charCode;\n\n\t\t\t\t\t\t\t// Check if it's the \"backspace\" or \"del\" key\n\t\t\t\t\t\t\tif ( key == 8 || key == 46 ){\n\t\t\t\t\t\t\t\t// Get the widget position\n\t\t\t\t\t\t\t\tconst widgetPosition = widget.find();\n\n\t\t\t\t\t\t\t\t// Remove the widget\n\t\t\t\t\t\t\t\twidget.clear();\n\n\t\t\t\t\t\t\t\t// Remove the token content\n\t\t\t\t\t\t\t\tthis.editor.replaceRange(\n\t\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t\t\twidgetPosition.from,\n\t\t\t\t\t\t\t\t\twidgetPosition.to\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tonFocusOut();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdocument.addEventListener( 'keydown', onDelete );\n\n\t\t\t\t\t\t// Listen navigation events\n\t\t\t\t\t\tconst onNavigation = ( event ) => {\n\t\t\t\t\t\t\t// Get the pressed key\n\t\t\t\t\t\t\tconst key = event.keyCode || event.charCode;\n\n\t\t\t\t\t\t\t// Check if it's one of the <- or -> keys\n\t\t\t\t\t\t\tif ( key == 37 || key == 39 ){\n\t\t\t\t\t\t\t\tonFocusOut();\n\n\t\t\t\t\t\t\t\t// Get the widget position\n\t\t\t\t\t\t\t\tconst widgetPosition = widget.find();\n\n\t\t\t\t\t\t\t\t// Get the new position\n\t\t\t\t\t\t\t\tlet position;\n\n\t\t\t\t\t\t\t\t// Check if it's the \"<-\" (left) key\n\t\t\t\t\t\t\t\tif ( key == 37 ){\n\t\t\t\t\t\t\t\t\t// Get the left position\n\t\t\t\t\t\t\t\t\tposition = widgetPosition.from;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Check if it's the \"->\" (right) key\n\t\t\t\t\t\t\t\tif ( key == 39 ){\n\t\t\t\t\t\t\t\t\t// Get the right position\n\t\t\t\t\t\t\t\t\tposition = widgetPosition.to;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Set focus\n\t\t\t\t\t\t\t\tthis.editor.focus();\n\n\t\t\t\t\t\t\t\t// Set the cursor\n\t\t\t\t\t\t\t\tthis.editor.setCursor( position )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdocument.addEventListener( 'keydown', onNavigation );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}  \n\t\t}\n\t}\n\n\t/**\n\t * Shows modal to tell the user that the token added needs user data\n\t * \n\t * @param  {Object} token     The token added\n\t * @param  {Object} callbacks Object with callbacks\n\t */\n\ttokenNeedsUserModal( $tokenNode, callbacks = {} ){\n\t\t/**\n\t\t * Create modal to ley the user know that\n\t\t * they will need user data\n\t\t */\n\t\tlet modal;\n\n\t\t// Check if WP is ready\n\t\tif ( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp ){\n\t\t\tmodal = new Modal({\n\t\t\t\ttitle:   `${ UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title } <span class=\"needs-user-data-modal-pro-badge\">${ UncannyAutomator.i18n.proOnly.pro }</span>`,\n\t\t\t\tcontent: `\n\t\t\t\t\t<div class=\"needs-user-data-modal\">\n\t\t\t\t\t\t<div class=\"needs-user-data-modal__title\">${ \n\t\t\t\t\t\t\tsprintf( \n\t\t\t\t\t\t\t\tUncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.mustRunOnUser,\n\t\t\t\t\t\t\t\t$tokenNode.outerHTML\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}</div>\n\t\t\t\t\t\t<div class=\"needs-user-data-modal__disclaimer\">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class=\"description\">${ sprintf( UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.description, UncannyAutomator.i18n.uncannyAutomatorPro ) } <a href=\"${ addUTMParameters( 'https://automatorplugin.com/pricing/', { 'medium': 'select_an_item', 'campaign': 'update_to_pro', 'content': 'requires_user_data',\n\t\t\t\t\t\t\t}) }\" target=\"_blank\">${ UncannyAutomator.i18n.upgradeNow } <uo-icon id=\"external-link\"></uo-icon></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class=\"description\">${ UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.upgradeLater } <a href=\"${ addUTMParameters( 'https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types', { 'medium': 'select_an_item', 'content': 'requires_user_data-learn-more',\n\t\t\t\t\t\t\t}) }\" target=\"_blank\">${ UncannyAutomator.i18n.learnMore } <uo-icon id=\"external-link\"></uo-icon></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel:  UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.cancelButton,\n\t\t\t\t\tconfirm: UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.confirmButton,\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\tsize: 'large'\n\t\t\t});\n\n\t\t\tmodal.setEvents({\n\t\t\t\tonConfirm: () => {\n\t\t\t\t\t// Close and destroy modal\n\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t// Open link in new tab\n\t\t\t\t\topenInNewTab( addUTMParameters( 'https://automatorplugin.com/pricing/', { 'medium': 'add_token', 'campaign': 'update_to_pro', 'content': 'requires_user_data',\n\t\t\t\t\t\t\t}) );\n\n\t\t\t\t\t// Remove token\n\t\t\t\t\tif ( isDefined( callbacks.removeToken ) ){\n\t\t\t\t\t\tcallbacks.removeToken();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Can't add, confirm\n\t\t\t\t\tif ( isDefined( callbacks.forbiddenConfirm ) ){\n\t\t\t\t\t\tcallbacks.forbiddenConfirm();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonCancel: () => {\n\t\t\t\t\t// Close and destroy modal\n\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t// Remove token\n\t\t\t\t\tif ( isDefined( callbacks.removeToken ) ){\n\t\t\t\t\t\tcallbacks.removeToken();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Can't add, cancel\n\t\t\t\t\tif ( isDefined( callbacks.forbiddenCancel ) ){\n\t\t\t\t\t\tcallbacks.forbiddenCancel();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t// Check if we should set the recipe to draft when the user adds the action\n\t\t\t// We're doing this because the user will need to fill the User Selector\n\t\t\tconst actionWillSetRecipeToDraft = UncannyAutomator.recipe.isLive;\n\n\t\t\tmodal = new Modal({\n\t\t\t\ttitle:   `${ UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title } <span class=\"needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray\">${ UncannyAutomator.i18n.proOnly.pro }</span>`,\n\t\t\t\tcontent: `\n\t\t\t\t\t<div class=\"needs-user-data-modal\">\n\t\t\t\t\t\t<div class=\"needs-user-data-modal__title\">${\n\t\t\t\t\t\t\tsprintf( \n\t\t\t\t\t\t\t\tUncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.mustRunOnUser,\n\t\t\t\t\t\t\t\t$tokenNode.outerHTML\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}</div>\n\t\t\t\t\t\t<div class=\"needs-user-data-modal__disclaimer\">\n\t\t\t\t\t\t\t<div class=\"description\">${ UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.description }</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel:  UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.cancelButton,\n\t\t\t\t\tconfirm: UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.confirmButton,\n\t\t\t\t},\n\t\t\t}, {\n\t\t\t\tsize: 'large',\n\t\t\t});\n\n\t\t\tmodal.setEvents({\n\t\t\t\tonConfirm: () => {\n\t\t\t\t\tlet modalElements = modal.getElements();\n\n\t\t\t\t\t// Add loading class to button\n\t\t\t\t\tmodalElements.modal.box.buttons.confirm.addClass( 'uap-btn--loading' ).prop( 'disabled', true );\n\n\t\t\t\t\t// Do an AJAX call to set the global recipe requires user\n\t\t\t\t\trecipeSetRequiresUser(\n\t\t\t\t\t\t// Set to true (requires user)\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t// On success\n\t\t\t\t\t\t( response ) => {\n\t\t\t\t\t\t\t// On success, close and destroy the modal\n\t\t\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t\t\t// Render the tokens again, some might be missing\n\t\t\t\t\t\t\tthis.renderTokens();\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// On fail\n\t\t\t\t\t\t( response ) => {\n\t\t\t\t\t\t\t// Remove loading class to button\n\t\t\t\t\t\t\tmodalElements.modal.box.buttons.confirm.removeClass( 'uap-btn--loading' ).prop( 'disabled', false );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t\t// Do a call to set the recipe to draft\n\t\t\t\t\tif ( actionWillSetRecipeToDraft ){\n\t\t\t\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Can add, confirm\n\t\t\t\t\tif ( isDefined( callbacks.allowedConfirm ) ){\n\t\t\t\t\t\tcallbacks.allowedConfirm();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonCancel: () => {\n\t\t\t\t\t// Close and destroy modal\n\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t// Remove token\n\t\t\t\t\tif ( isDefined( callbacks.removeToken ) ){\n\t\t\t\t\t\tcallbacks.removeToken();\n\t\t\t\t\t}\n\n\t\t\t\t\t // Can add, confirm\n\t\t\t\t\tif ( isDefined( callbacks.allowedCancel ) ){\n\t\t\t\t\t\tcallbacks.allowedCancel();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n}\n\nclass TokenSelectorTextarea extends TokenSelectorInput {\n\tconstructor( Field, options = {} ){\n\t\tsuper( Field, options );\n\n\t\t// Check if it supports TinyMCE\n\t\tif ( this.Field.attributes.supportsTinyMCE ){\n\t\t\t// TinyMCE methods\n\t\t\tthis.Field.getField().on( 'ua-tinymce-ready', () => {\n\t\t\t\t// Get the CodeMirror editor\n\t\t\t\tthis.getTinyMCEEditor();\n\n\t\t\t\t// Add styles to the editor\n\t\t\t\tthis.addStylesToEditor();\n\n\t\t\t\t// Parse tokens in the TinyMCE editor\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.parsePlainTokensInTinyMCE({\n\t\t\t\t\t\tparseTokensInAttributes: false\n\t\t\t\t\t});\n\t\t\t\t}, this.data.tokenRenderingDebounce );\n\n\t\t\t\t// Parse tokens in the text editor\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.parseHTMLTokensInPlainTextarea();\n\t\t\t\t}, this.data.tokenRenderingDebounce );\n\t\t\t\t\n\t\t\t\t// Handle requests to add tokens to the field\n\t\t\t\tthis.handleAddTokens();\n\n\t\t\t\t// Handle tokens added to the textarea (HTML)\n\t\t\t\tthis.handleHTMLTokensInPlainTextarea();\n\n\t\t\t\t// Handle tokens added to TinyMCE (plain)\n\t\t\t\tthis.handlePlainTokensInTinyMCE();\n\t\t\t});\n\t\t}\n\t}\n\n\tsetData(){\n\t\tthis.data = {\n\t\t\ttokenRenderingDebounce: 200,\n\t\t\ttokenCSSClass: 'uap-token-tinymce',\n\t\t\t// Regular expression (lazy) used to find tokens in the raw TinyMCE content\n\t\t\ttinymceTokenRegex: new RegExp( /\\<ins contenteditable\\=\"false\"\\>\\<\\!\\-\\-UAToken\\-\\-\\>(?:.*?)data\\-token\\-id\\=\"(.*?)\"(?:.*?)\\<\\!\\-\\-UATokenEnd\\-\\-\\>\\<\\/ins\\>/gm ),\n\t\t}\n\n\t\t// 1. Token HTML, 2. Token ID\n\t\tthis.data.tinymceTokenTemplate = `<ins contenteditable=\"false\"><!--UAToken--><span class=\"${ this.data.tokenCSSClass }\" contenteditable=\"false\" data-token-id=\"%2$s\">%1$s</span><!--UATokenEnd--></ins>`;\n\t}\n\n\trender(){\n\t\tthis.RenderTokenSelector = new RenderTokenSelector( this.Field, this.tokens );\n\t}\n\n\tinsertTextAtCursor( token = '' ){\n\t\t// Check if \"Text\" view is selected\n\t\t// Insert using CodeMirror methods\n\t\tif (\n\t\t\t// Doesn't have TinyMCE\n\t\t\t! isDefined( this.tinyMCEeditor )\n\t\t\t// It has TinyMCE, but it's hidden\n\t\t\t|| isDefined( this.tinyMCEeditor ) && this.tinyMCEeditor.hidden\n\t\t){\n\t\t\t// Insert content in the CM field at the current position\n\t\t\tthis.editor.doc.replaceRange( token, this.editor.doc.getCursor() );\n\t\t}\n\t\t// Insert using TinyMCE methods\n\t\telse {\n\t\t\t// Token without brackets\n\t\t\ttoken = token.replace( '{{', '' ).replace( '}}', '' );\n\n\t\t\t// Get the token HMTL\n\t\t\tconst $tokenNode = this.createTokenDOMNode( token );\n\n\t\t\t// Check if the token needs user data\n\t\t\t// Because of how TinyMCE works, we have to do this here\n\t\t\tif (\n\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\tUncannyAutomator.recipe.type == 'anonymous'\n\t\t\t\t// Check if the recipe currently doesn't require user data\n\t\t\t\t&& ! UncannyAutomator.recipe.requiresUserData\n\t\t\t\t// Check if the current tokens requires user data\n\t\t\t\t&& (\n\t\t\t\t\t// Check if the current tokens requires user data\n\t\t\t\t\tthis.tokensThatRequireUser.includes( token )\n\t\t\t\t\t// Check if it's the user meta token\n\t\t\t\t\t|| token.startsWith( 'USERMETA:' )\n\t\t\t\t)\n\t\t\t){\n\t\t\t\tthis.tokenNeedsUserModal( $tokenNode, {\n\t\t\t\t\tallowedConfirm: () => {\n\t\t\t\t\t\t// Insert token\n\t\t\t\t\t\tthis.tinyMCEeditor.execCommand( 'mceInsertContent', false, sprintf( this.data.tinymceTokenTemplate, $tokenNode.outerHTML, token ) );\n\n\t\t\t\t\t\t// Trigger a change event in the field\n\t\t\t\t\t\tthis.Field.getField()\n\t\t\t\t\t\t\t.trigger( 'change input' );\n\t\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Insert token\n\t\t\t\tthis.tinyMCEeditor.execCommand( 'mceInsertContent', false, sprintf( this.data.tinymceTokenTemplate, $tokenNode.outerHTML, token ) );\n\n\t\t\t\t// Trigger a change event in the field\n\t\t\t\tthis.Field.getField()\n\t\t\t\t\t.trigger( 'change input' );\n\t\t\t} \n\t\t}\n\t}\n\n\tgetTinyMCEEditor(){\n\t\tthis.tinyMCEeditor = this.Field.fieldTinyMCE;\n\t}\n\n\taddStylesToEditor(){\n\t\tthis.tinyMCEeditor.dom.addStyle( `\n\t\t\thtml body {\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\tfont-size: 15px;\n\t\t\t\tmargin-left: 12px;\n\t\t\t\tmargin-right: 12px;\n\t\t\t}\n\n\t\t\tins {\n\t\t\t\ttext-decoration: none !important;\n\t\t\t}\n\t\t` );\n\t}\n\n\thandleHTMLTokensInPlainTextarea(){\n\t\t// Listen changes to the field\n\t\tthis.Field.getField()\n\t\t\t.on( 'change input',\n\t\t\t\tdebounce(() => {\n\t\t\t\t\t// Parse tokens\n\t\t\t\t\tthis.parseHTMLTokensInPlainTextarea();\n\t\t\t\t}, this.data.tokenRenderingDebounce )\n\t\t\t);\n\n\t\t// Trigger a change event in the text field \n\t\t// when the user changes to the \"Text\" tab\n\t\tthis.Field.getField()\n\t\t\t.on( 'ua-tinymce-activate-text-view', () => {\n\t\t\t\t// Parse tokens\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.parseHTMLTokensInPlainTextarea();\n\t\t\t\t}, this.data.tokenRenderingDebounce );\n\t\t\t});\n\t}\n\n\thandlePlainTokensInTinyMCE(){\n\t\t// Trigger a change event in the text field \n\t\t// when the user changes to the \"Text\" tab\n\t\tthis.Field.getField()\n\t\t\t.on( 'ua-tinymce-activate-visual-view', () => {\n\t\t\t\t// Parse tokens in the editor\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.parsePlainTokensInTinyMCE({\n\t\t\t\t\t\tparseTokensInAttributes: false\n\t\t\t\t\t});\n\t\t\t\t}, this.data.tokenRenderingDebounce );\n\t\t\t});\n\t}\n\n\tparsePlainTokensInTinyMCE( options = {} ){\n\t\t// Get options\n\t\toptions = Object.assign( {\n\t\t\tparseTokensInAttributes: true\n\t\t}, options );\n\n\t\t// Get the content of the TinyMCE field\n\t\tconst editorContent = this.tinyMCEeditor.getContent({\n\t\t\tformat: 'raw'\n\t\t});\n\n\t\t// Render the tokens\n\t\tconst editorContentWithTokens = this.renderTextWithTokens(\n\t\t\teditorContent,\n\t\t\t{\n\t\t\t\t// 1. Token HTML, 2. Token ID\n\t\t\t\ttemplate: this.data.tinymceTokenTemplate,\n\t\t\t\tparseTokensInAttributes: options.parseTokensInAttributes,\n\t\t\t\treturnString: true\n\t\t\t}\n\t\t);\n\n\t\t// Check if the content is different\n\t\tif ( editorContent != editorContentWithTokens ){\n\t\t\t// Set the content again\n\t\t\tthis.tinyMCEeditor.setContent( editorContentWithTokens );\n\t\t}   \n\t}\n\n\tparseHTMLTokensInPlainTextarea(){\n\t\t// Get the content of the field\n\t\tlet content = this.Field.getField().val();\n\n\t\t// Create a variable to check later if the content changed\n\t\tlet contentChanged = false;\n\n\t\t// Convert TinyMCE tokens to real tokens\n\t\tcontent = content.replaceAll( this.data.tinymceTokenRegex, ( match, tokenID ) => {\n\t\t\t// If this code is reached, it means the content changed\n\t\t\tcontentChanged = true;\n\n\t\t\t// Replace it with a valid token\n\t\t\treturn `{{${ tokenID }}}`;\n\t\t} );\n\n\t\t//  If the content hasn't changed, stop here\n\t\tif ( ! contentChanged ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Set the value of the normal field\n\t\t// But don't trigger the change event\n\t\ttry {\n\t\t\tthis.editor.setValue( content );\n\t\t} catch ( e ){\n\t\t\tthis.Field.getField().val( content );\n\t\t} \n\t}\n\n\tdestroy(){\n\t\tthis.RenderTokenSelector.destroy();\n\t}\n}\n\nclass RenderTokenSelector {\n\tconstructor( Field, tokens ){\n\t\tthis.Field  = Field;\n\t\tthis.tokens = tokens;\n\n\t\t// Save order of groups\n\t\tthis.tokens = this.tokens.map( ( tokenGroup, index ) => {\n\t\t\ttokenGroup.order = index;\n\t\t\treturn tokenGroup;\n\t\t} );\n\n\t\t// Get data\n\t\tthis.getData();\n\n\t\t// Get elements\n\t\tthis.getElements();\n\n\t\t// Create wrapper\n\t\tthis.createWrapper();\n\n\t\t// Create filter\n\t\tthis.createFilter();\n\n\t\t// Create groups of tokens\n\t\tthis.createGroupsOfTokens();\n\n\t\t// Open tokens on click\n\t\tthis.listenToggleButton();\n\n\t\t// Resize dropdown on window resize\n\t\tthis.resizeDropdownOnWindowResize();\n\n\t\t// Resize on scroll\n\t\tthis.resizeDropdownOnWindowScroll();\n\n\t\t// Refresh when the field value changes\n\t\tthis.refreshOnFieldChange();\n\n\t\t// Search\n\t\tthis.search();\n\n\t\t// Set default filter\n\t\tif ( this.shouldSupportFilters() ){\n\t\t\tthis.setFilter( true );\n\t\t}\n\t}\n\n\tgetData(){\n\t\tthis.data = {\n\t\t\tisOpen:   false,\n\t\t\tposition: 'below'\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\twrapper: null,\n\t\t\ttoggleButton: null,\n\t\t\tsearchField: null,\n\t\t\tdropdown: null,\n\t\t\tallGroups: null,\n\t\t\tdropdownGroupsContainer: null,\n\t\t\tdropdownTokens: null,\n\t\t\tnoResultsOption: null,\n\t\t\tseperators: null,\n\t\t};\n\t}\n\n\tcreateWrapper(){\n\t\tconst $wrapper = $( `\n\t\t\t<div class=\"form-variable\">\n\t\t\t\t<div class=\"form-variable__element\">\n\t\t\t\t\t<div class=\"form-variable__render-container\"></div>\n\t\t\t\t\t<div class=\"form-variable__toggle\">\n\t\t\t\t\t\t<uo-icon id=\"asterisk\"></uo-icon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-variable__dropdown\">\n\t\t\t\t\t<div class=\"form-variable__dropdown-container\">\n\t\t\t\t\t\t<div class=\"form-variable__search\">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tclass=\"form-variable__search-input\" \n\t\t\t\t\t\t\t\tplaceholder=\"${ UncannyAutomator.i18n.tokens.search }\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"form-variable__groups\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Get the fields that we have to move\n\t\tconst $fieldsToMove = [];\n\n\t\t// Check if it's a textarea\n\t\tif ( this.Field.type == 'textarea' ){\n\t\t\t$fieldsToMove.push( this.Field.getField() );\n\t\t}\n\n\t\t// Check if the CodeMirror field is defined\n\t\tif ( isDefined( this.Field.getFieldCM() ) ){\n\t\t\t$fieldsToMove.push( this.Field.getFieldCM() );\n\t\t}\n\n\t\t// Move the fields\n\t\t$fieldsToMove.forEach(( $field ) => {\n\t\t\t// Move the field\n\t\t\t$wrapper\n\t\t\t\t.insertAfter( $field );\n\n\t\t\t$wrapper\n\t\t\t\t.find( '.form-variable__render-container' )\n\t\t\t\t.append( $field );\n\t\t});\n\n\t\t// Save the element\n\t\tthis.$elements.wrapper = $wrapper;\n\n\t\t// Save the element that has the field inside\n\t\tthis.$elements.renderContainer = $wrapper\n\t\t\t.find( '.form-variable__render-container' );\n\n\t\t// Save the search field container\n\t\tthis.$elements.searchFieldContainer = $wrapper.find( '.form-variable__search' );\n\n\t\t// Save the search field\n\t\tthis.$elements.searchField = $wrapper.find( '.form-variable__search-input' );\n\n\t\t// Save the toggle button\n\t\tthis.$elements.toggleButton = $wrapper.find( '.form-variable__toggle' );\n\n\t\t// Save the dropdown\n\t\tthis.$elements.dropdown = $wrapper.find( '.form-variable__dropdown' );\n\n\t\t// Save the container of the groups\n\t\tthis.$elements.dropdownGroupsContainer = $wrapper.find( '.form-variable__groups' );\n\t}\n\n\tcreateFilter(){\n\t\t// Check if it's a field that should filter tokens\n\t\tif ( this.shouldSupportFilters() ){\n\t\t\t// Get the field type\n\t\t\tconst fieldType = this.Field.attributes.fieldType;\n\n\t\t\t// Get the field type human-readable name\n\t\t\tconst fieldTypeHumanReadable = isDefined( UncannyAutomator.i18n.tokens.tokenType[ fieldType ] ) ? UncannyAutomator.i18n.tokens.tokenType[ fieldType ] : fieldType;\n\n\t\t\t// Create filter container\n\t\t\tconst $filterContainer = $( `\n\t\t\t\t<div class=\"form-variable__filter\"></div>\n\t\t\t` );\n\n\t\t\t// Create checkbox\n\t\t\tconst filterToggle = new Field( 'checkbox', {\n\t\t\t\toptionCode:   'token__enableFilter',\n\t\t\t\tcurrentValue: true,\n\t\t\t\tlabel: `<span class=\"form-variable__filter-label\">` + sprintf( UncannyAutomator.i18n.tokens.filter, `<span class=\"form-variable__filter-type\">${ fieldTypeHumanReadable }</span>` ) + `<span>`,\n\t\t\t});\n\n\t\t\t// Get checkbox form element\n\t\t\tconst $filterFormElement = filterToggle.createFormElement();\n\n\t\t\t// Add the field\n\t\t\t$filterContainer.prepend( $filterFormElement );\n\n\t\t\t// Add filter to the DOM\n\t\t\tthis.$elements.searchFieldContainer.append( $filterContainer );\n\n\t\t\t// Save the filter container\n\t\t\tthis.$elements.filterContainer = $filterContainer;\n\n\t\t\t// Listen changes to the checkbox value\n\t\t\t$filterFormElement.on( 'automator:field:change', () => {\n\t\t\t\t// Get value\n\t\t\t\tconst filterValue = filterToggle.getValue();\n\n\t\t\t\t// Check if we have to filter or remove the filter\n\t\t\t\tif ( filterValue ){\n\t\t\t\t\tthis.setFilter( true );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.setFilter( false );\n\t\t\t\t}\n\t\t\t});\n\t\t}    \n\t}\n\n\tcreateGroupsOfTokens(){\n\t\t// Get the container\n\t\tconst $container = this.$elements.wrapper.find( '.form-variable__groups' );\n\n\t\t// Get all tokens but the ones coming from actions\n\t\tconst nonItemTokens  = this.tokens.filter( tokenGroup => ! isDefined( tokenGroup.itemType ) );\n\t\tconst triggersTokens = this.tokens.filter( tokenGroup => tokenGroup.itemType === 'trigger' );\n\t\tconst actionTokens   = this.tokens.filter( tokenGroup => tokenGroup.itemType === 'action' );\n\n\t\tnonItemTokens.forEach(( groupOfTokens, groupKey ) => {\n\t\t\t$container.append( this.createIndividualGroupOfTokens( groupKey, groupOfTokens ) );\n\t\t});\n\n\t\t// Check if it has trigger tokens\n\t\tif ( triggersTokens.length > 0 ) {\n\t\t\t$container.get(0).insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t<uo-alert \n\t\t\t\t\tsize=\"xsmall\" \n\t\t\t\t\ttype=\"info\" \n\t\t\t\t\tcustom-icon \n\t\t\t\t\tno-radius\n\n\t\t\t\t\tclass=\"form-variable__group-item-separator form-variable__group-item-separator--triggers\"\n\t\t\t\t>\n\t\t\t\t\t${ UncannyAutomator.i18n.trigger.name }\n\t\t\t\t</uo-alert>\n\t\t\t` );\n\n\t\t\ttriggersTokens.forEach(( groupOfTokens, groupKey ) => {\n\t\t\t\t$container.append( this.createIndividualGroupOfTokens( groupKey, groupOfTokens ) );\n\t\t\t});\n\t\t}\n\n\t\tif ( actionTokens.length > 0 ) {\n\t\t\t$container.get(0).insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t<uo-alert \n\t\t\t\t\tsize=\"xsmall\" \n\t\t\t\t\ttype=\"info\" \n\t\t\t\t\tcustom-icon \n\t\t\t\t\tno-radius\n\n\t\t\t\t\tclass=\"form-variable__group-item-separator form-variable__group-item-separator--actions\"\n\t\t\t\t>\n\t\t\t\t\t${ UncannyAutomator.i18n.action.name }\n\t\t\t\t</uo-alert>\n\t\t\t` );\n\n\t\t\tactionTokens.forEach(( groupOfTokens, groupKey ) => {\n\t\t\t\t$container.append( this.createIndividualGroupOfTokens( groupKey, groupOfTokens ) );\n\t\t\t});\n\t\t}\n\n\t\t// Save all the groups\n\t\tthis.$elements.allGroups = $container.find( '.form-variable__group' );\n\n\t\t// Save all the items\n\t\tthis.$elements.dropdownTokens = $container.find( '.form-variable__group-item' );\n\n\t\t// Get separators\n\t\tthis.$elements.separators = {\n\t\t\ttriggers: $container.get(0).querySelector( '.form-variable__group-item-separator--triggers' ),\n\t\t\tactions:  $container.get(0).querySelector( '.form-variable__group-item-separator--actions' ),\n\t\t};\n\n\t\t// Add the \"no results\" option\n\t\tthis.$elements.noResultsOption = $( `\n\t\t\t<div class=\"form-variable__group-item-no-results form-variable__group-item-no-results--hide\">\n\t\t\t\t<div class=\"form-variable__group-item-no-results-title\">\n\t\t\t\t\t${ UncannyAutomator.i18n.tokens.noResults }\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-variable__group-item-no-results-description\">\n\t\t\t\t\t${ this.shouldSupportFilters() ? UncannyAutomator.i18n.tokens.noResultsDescriptionWithFilter : UncannyAutomator.i18n.tokens.noResultsDescription }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t` );\n\t\t$container.append( this.$elements.noResultsOption );\n\t}\n\n\tcreateIndividualGroupOfTokens( groupKey, groupOfTokens ){\n\t\tconst $group = $( `\n\t\t\t<div \n\t\t\t\tclass=\"form-variable__group\"\n\t\t\t\tdata-id=\"${ groupOfTokens.id }\"\n\t\t\t>\n\t\t\t\t<div class=\"form-variable__group-source\">\n\t\t\t\t\t<div class=\"form-variable-group-source__icon\"></div>\n\t\t\t\t\t<div class=\"form-variable-group-source__description\">\n\t\t\t\t\t\t<div class=\"form-variable-group-source__title\"></div>\n\t\t\t\t\t\t<div class=\"form-variable-group-source__tags\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-variable-group-source__toggle\">\n\t\t\t\t\t\t<span class=\"form-variable-group-source__toggle-icon\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"form-variable__group-children\"></span>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Add the name\n\t\tconst groupName = groupOfTokens.name;\n\t\tif ( ! typeof groupName == 'string' ){\n\t\t\tgroupName = groupName.html.clone();\n\t\t}\n\n\t\t$group\n\t\t\t.find( '.form-variable-group-source__title' )\n\t\t\t.append( groupOfTokens.name );\n\n\t\t// Create the icon\n\t\tlet $icon = groupOfTokens.icon.clone();\n\n\t\t// Add the icon to the group\n\t\t$group.find( '.form-variable-group-source__icon' ).append( $icon );\n\n\t\t// Get the toggle button\n\t\tconst $toggleButton = $group.find( '.form-variable__group-source' );\n\t\t// Listen clicks to the toggle button\n\t\t$toggleButton.on( 'click', () => {\n\t\t\t$group.toggleClass( 'form-variable__group--open' );\n\t\t});\n\n\t\t// Check if it's an action that's delayed, scheduled or inside a conditions block\n\t\tif ( \n\t\t\tisDefined( groupOfTokens.itemID ) && \n\t\t\tisDefined( UncannyAutomator.recipe.items[ groupOfTokens.itemID ] )\n\t\t) {\n\t\t\tif (\n\t\t\t\tUncannyAutomator.recipe.items[ groupOfTokens.itemID ].itemType === 'trigger'\n\t\t\t) {\n\t\t\t\t// Add class to get these groups later\n\t\t\t\t$group.get(0).classList.add( 'form-variable__group--trigger' );\n\t\t\t}\n\n\t\t\tif ( \n\t\t\t\tUncannyAutomator.recipe.items[ groupOfTokens.itemID ].itemType === 'action'\n\t\t\t) {\n\t\t\t\t// Get the wrapper of the tags\n\t\t\t\tconst $tagsWrapper = $group.get(0).querySelector( '.form-variable-group-source__tags' );\n\n\t\t\t\t// Get the itme of the FIELD. This is where we're adding the token\n\t\t\t\tconst fieldItemID = this.Field.attributes.itemId;\n\n\t\t\t\t// Get action of the TOKEN. This is where the token is coming from\n\t\t\t\tconst tokenAction = UncannyAutomator.recipe.items[ groupOfTokens.itemID ];\n\n\t\t\t\t// Add class to get these groups later\n\t\t\t\t$group.get(0).classList.add( 'form-variable__group--action' );\n\n\t\t\t\tif ( tokenAction.hasConditions ) {\n\t\t\t\t\t$group.get(0).classList.add( 'form-variable__group--action-conditions' );\n\n\t\t\t\t\t$tagsWrapper.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t\t<uo-tooltip>\n\t\t\t\t\t\t\t${ UncannyAutomator.i18n.conditions.hasConditionsTokensDisclaimer }\n\n\t\t\t\t\t\t\t<uo-chip\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tcolor=\"warning\"\n\t\t\t\t\t\t\t\tfilled\n\n\t\t\t\t\t\t\t\tslot=\"target\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<uo-icon id=\"code-merge\"></uo-icon> ${ UncannyAutomator.i18n.conditions.hasConditions }\n\t\t\t\t\t\t\t</uo-chip>\n\t\t\t\t\t\t</uo-tooltip>\n\t\t\t\t\t` );\n\t\t\t\t}\n\n\t\t\t\t// Check if we're adding this token to an action\n\t\t\t\tif (\n\t\t\t\t\tisDefined( fieldItemID ) && \n\t\t\t\t\tisDefined( UncannyAutomator.recipe.items[ fieldItemID ] ) && \n\t\t\t\t\tUncannyAutomator.recipe.items[ fieldItemID ].itemType === 'action'\n\t\t\t\t) {\n\t\t\t\t\t// Get the field action\n\t\t\t\t\tconst fieldItem = UncannyAutomator.recipe.items[ fieldItemID ];\n\n\t\t\t\t\t// Check if the action where the token is coming from is scheduled, BUT THE DESTINATION action is not\n\t\t\t\t\t// This means the token MIGHT not be available\n\t\t\t\t\tif ( tokenAction.isScheduled && ! fieldItem.isScheduled ) {\n\t\t\t\t\t\t$group.get(0).classList.add( 'form-variable__group--action-scheduled' );\n\n\t\t\t\t\t\t$tagsWrapper.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t\t\t<uo-tooltip>\n\t\t\t\t\t\t\t\t${ UncannyAutomator.i18n.tokens.isScheduledTokensDisclaimer }\n\n\t\t\t\t\t\t\t\t<uo-chip\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tcolor=\"warning\"\n\t\t\t\t\t\t\t\t\tfilled\n\n\t\t\t\t\t\t\t\t\tslot=\"target\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<uo-icon id=\"clock\"></uo-icon> ${ UncannyAutomator.i18n.tokens.isScheduled }\n\t\t\t\t\t\t\t\t</uo-chip>\n\t\t\t\t\t\t\t</uo-tooltip>\n\t\t\t\t\t\t` );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( tokenAction.isDelayed && ! fieldItem.isDelayed ) {\n\t\t\t\t\t\t$group.get(0).classList.add( 'form-variable__group--action-delayed' );\n\n\t\t\t\t\t\t$tagsWrapper.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t\t\t<uo-tooltip>\n\t\t\t\t\t\t\t\t${ UncannyAutomator.i18n.tokens.isDelayedTokensDisclaimer }\n\n\t\t\t\t\t\t\t\t<uo-chip\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\tcolor=\"warning\"\n\t\t\t\t\t\t\t\t\tfilled\n\n\t\t\t\t\t\t\t\t\tslot=\"target\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<uo-icon id=\"clock\"></uo-icon> ${ UncannyAutomator.i18n.tokens.isDelayed }\n\t\t\t\t\t\t\t\t</uo-chip>\n\t\t\t\t\t\t\t</uo-tooltip>\n\t\t\t\t\t\t` );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Get the container where we're going to add the tokens\n\t\tconst $tokensListContainer = $group.find( '.form-variable__group-children' );\n\n\t\t// Add tokens\n\t\tgroupOfTokens.tokens.forEach(( token ) => {\n\t\t\t// Check if the token is deprecated\n\t\t\tif ( isDefined( token.deprecated ) && token.deprecated ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet tokenName = ! isEmpty( token.name ) ? token.name : '';\n\n\t\t\t// Create the token\n\t\t\tconst $token = $( `\n\t\t\t\t<div \n\t\t\t\t\tclass=\"form-variable__group-item\"\n\t\t\t\t\tdata-search=\"${\n\t\t\t\t\t\ttokenName\n\t\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t\t\t.replace( /\\s/g, '' )\n\t\t\t\t\t}\"\n\t\t\t\t\tdata-type=\"${ token.type }\"\n\t\t\t\t>\n\t\t\t\t\t<span>${ tokenName }</span>\n\n\t\t\t\t\t${ UncannyAutomator.recipe.type == 'anonymous' && ! UncannyAutomator.recipe.requiresUserData && isDefined( token.requiresUser ) && token.requiresUser ? '<span class=\"form-variable__group-item-tag\">' + UncannyAutomator.i18n.needsUserData + '</span>' : '' }\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t/**\n\t\t\t * Callback invoked to add the token to the field\n\t\t\t * \n\t\t\t * @return {undefined}\n\t\t\t */\n\t\t\tconst addTokenToField = ( token ) => {\n\t\t\t\t// Trigger event to add the token\n\t\t\t\tthis.Field.field.trigger( 'ua-add-token', token );\n\t\t\t}\n\n\t\t\t// Listen clicks to the tokens\n\t\t\t$token.on( 'click', () => {\n\t\t\t\t// Close the token selector\n\t\t\t\tthis.close();\n\n\t\t\t\t// Check if the beforeAdded callback is defined for this token\n\t\t\t\tif ( isDefined( token.beforeAdded ) ) {\n\t\t\t\t\t// Invoke custom method\n\t\t\t\t\ttoken.beforeAdded( addTokenToField );\n\t\t\t\t} else {\n\t\t\t\t\taddTokenToField( token );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add token\n\t\t\t$tokensListContainer.append( $token );\n\t\t});\n\n\t\tthis.tokens[ groupOfTokens.order ].$toggleButton = $toggleButton;\n\n\t\treturn $group;\n\t}\n\n\taddAllTokensInGroupCallback( groupOfTokens ) {\n\t\t// Create the content for the modal\n\t\tconst $modalContent = $( `<div></div>` );\n\n\t\t// Create the \"Include name\" field\n\t\tconst includeTokenNameField = new Field( 'checkbox', {\n\t\t\tlabel: UncannyAutomator.i18n.tokens.includeTokenName,\n\t\t\tcurrentValue: true\n\t\t});\n\t\t// Add the field\n\t\t$modalContent.append( includeTokenNameField.createFormElement() );\n\n\t\t// Create the \"Include token ID\" field\n\t\tconst includeTokenIDField = new Field( 'checkbox', {\n\t\t\tlabel: UncannyAutomator.i18n.tokens.includeTokenID,\n\t\t\tcurrentValue: false\n\t\t});\n\t\t// Add the field\n\t\t$modalContent.append( includeTokenIDField.createFormElement() );\n\n\t\t// Add description\n\t\tconst groupName = groupOfTokens.name instanceof jQuery ? groupOfTokens.name.text() : groupOfTokens.name;\n\n\t\tconst $taskDescription = $( `<div class=\"description\">${\n\t\t\tsprintf(\n\t\t\t\tUncannyAutomator.i18n.tokens.addAllDescription,\n\t\t\t\tgroupName,\n\t\t\t\t! isEmpty( this.Field.attributes.label ) ? this.Field.attributes.label : UncannyAutomator.i18n.noLabel\n\t\t\t)\n\t\t}</div>` );\n\t\t$modalContent.append( $taskDescription );\n\n\t\t// Show a modal\n\t\tconst modal = new Modal({\n\t\t\ttitle: UncannyAutomator.i18n.tokens.addTokens,\n\t\t\tcontent: $modalContent,\n\t\t\tbuttons: {\n\t\t\t\tcancel:  UncannyAutomator.i18n.cancel,\n\t\t\t\tconfirm: UncannyAutomator.i18n.tokens.addTokens,\n\t\t\t}\n\t\t});\n\n\t\tmodal.setEvents({\n\t\t\tonConfirm: () => {\n\t\t\t\t// Try to add all tokens\n\t\t\t\ttry {\n\t\t\t\t\t// Close the token selector\n\t\t\t\t\tthis.close();\n\n\t\t\t\t\t// Get the value of the fields\n\t\t\t\t\tconst hasToIncludeName = includeTokenNameField.getValue(),\n\t\t\t\t\t      hasToIncludeID   = includeTokenIDField.getValue();\n\n\t\t\t\t\t// Get the current value of the field\n\t\t\t\t\tconst currentFieldValue = this.Field.getValue();\n\n\t\t\t\t\t// Create string where we're going to save the output of the tokens\n\t\t\t\t\tlet tokenContent = '';\n\n\t\t\t\t\t// Iterate tokens\n\t\t\t\t\tgroupOfTokens.tokens.forEach( ( token ) => {\n\t\t\t\t\t\t// Check if the token is deprecated\n\t\t\t\t\t\tif ( isDefined( token.deprecated ) && token.deprecated ) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add name\n\t\t\t\t\t\tif ( hasToIncludeName ) {\n\t\t\t\t\t\t\ttokenContent += `${ token.name }`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add the token ID\n\t\t\t\t\t\tif ( hasToIncludeID ) {\n\t\t\t\t\t\t\tif ( hasToIncludeName ) {\n\t\t\t\t\t\t\t\ttokenContent += ' ';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttokenContent += `(${ token.id })`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add colon\n\t\t\t\t\t\tif ( hasToIncludeName || hasToIncludeID ) {\n\t\t\t\t\t\t\ttokenContent += `: `;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Add the token\n\t\t\t\t\t\ttokenContent += `{{${ token.id }}}`;\n\n\t\t\t\t\t\t// Add a breakline (only if the field is Textarea)\n\t\t\t\t\t\tif ( this.Field.type == 'textarea' ) {\n\t\t\t\t\t\t\ttokenContent += '<br><br>';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Otherwise, add a separator\n\t\t\t\t\t\t\ttokenContent += ' | ';\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Add it to the current token of the field\n\t\t\t\t\t// This behavior changes if we're adding it to a textarea with TinyMCE\n\t\t\t\t\t// Check if it's a TinyMCE textarea with an HTML template\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.Field.type == 'textarea' && \n\t\t\t\t\t\tisDefined( this.Field.fieldTinyMCE ) && \n\t\t\t\t\t\tcurrentFieldValue.includes( '</body>' )\n\t\t\t\t\t) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Add it before the closing body tag\n\t\t\t\t\t\t\tthis.Field.setValue( currentFieldValue.replace( '</body>', `${ tokenContent }</body>` ) );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// It's a normal field or a plain-text textarea\n\t\t\t\t\t\t\t// Add it at the end\n\t\t\t\t\t\t\tthis.Field.setValue( `${ currentFieldValue } ${ tokenContent }` );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// It's a normal field or a plain-text textarea\n\t\t\t\t\t\t// Add it at the end\n\t\t\t\t\t\tthis.Field.setValue( `${ currentFieldValue } ${ tokenContent }` );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if it's a textarea using the \"Visual\" view\n\t\t\t\t\tif ( this.Field.type == 'textarea' && isDefined( this.Field.fieldTinyMCE ) && ! this.Field.fieldTinyMCE.hidden ) {\n\t\t\t\t\t\t// Trigger change to render tokens\n\t\t\t\t\t\tthis.Field.getField().trigger( 'ua-tinymce-activate-visual-view' );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t}\n\n\t\t\t\t\talert( `Debugging: Couldn't add all tokens. Enable debug mode and check the console.` );\n\t\t\t\t}\n\n\t\t\t\t// Destroy the modal\n\t\t\t\tmodal.destroy();\n\t\t\t},\n\t\t\tafterHide: function(){\n\t\t\t\tmodal.destroy();\n\t\t\t}\n\t\t});\n\t}\n\n\tlistenToggleButton(){\n\t\tthis.$elements.toggleButton.on( 'click', () => {\n\t\t\t// Check if it's NOT open\n\t\t\tif ( ! this.data.isOpen ){\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t});\n\t}\n\n\tsearch(){\n\t\t// Listen changes to the search field\n\t\tthis.$elements.searchField.on( 'input', throttle( () => {\n\t\t\t// Get the value\n\t\t\tlet query = this.$elements.searchField.val();\n\n\t\t\t// Remove spaces and make the query lowercase\n\t\t\tquery = query\n\t\t\t\t.trim()\n\t\t\t\t.toLowerCase()\n\t\t\t\t.replace( /\\s/g, '' );\n\n\t\t\tif ( ! isEmpty( query ) ){\n\t\t\t\t// Open all groups of tokens\n\t\t\t\tthis.$elements.allGroups\n\t\t\t\t\t.addClass( 'form-variable__group--open' );\n\n\t\t\t\t// Hide all elements\n\t\t\t\tthis.$elements.dropdownTokens\n\t\t\t\t\t.addClass( 'form-variable__group-item--hidden-by-search' );\n\n\t\t\t\t// Get search matches\n\t\t\t\tconst $searchMatches = this.$elements.dropdownTokens\n\t\t\t\t\t.filter(( i, token ) => {\n\t\t\t\t\t\treturn token.dataset.search.search( query ) !== -1\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Show the search matches\n\t\t\t\t$searchMatches\n\t\t\t\t\t.removeClass( 'form-variable__group-item--hidden-by-search' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close all groups\n\t\t\t\tthis.$elements.allGroups\n\t\t\t\t\t.removeClass( 'form-variable__group--open' );\n\n\t\t\t\t// Show all tokens\n\t\t\t\tthis.$elements.dropdownTokens\n\t\t\t\t\t.removeClass( 'form-variable__group-item--hidden-by-search' );\n\t\t\t}\n\n\t\t\t// Set the visibility of the group of tokens\n\t\t\tthis.updateGroupsOfTokensVisibility();\n\t\t}, 30 ) );\n\n\t\tthis.$elements.searchField.on( 'focus', () => {\n\t\t\tthis.$elements.wrapper.addClass( 'form-variable--search-focus' );\n\t\t} );\n\n\t\tthis.$elements.searchField.on( 'blur', () => {\n\t\t\tthis.$elements.wrapper.removeClass( 'form-variable--search-focus' );\n\t\t} );\n\t}\n\n\tsetFilter( filterByType = true ){\n\t\t// Check if we have to filter\n\t\tif ( filterByType ){\n\t\t\t// Hide all elements\n\t\t\tthis.$elements.dropdownTokens\n\t\t\t\t.addClass( 'form-variable__group-item--hidden-by-filter' );\n\n\t\t\t// Get the tokens by type\n\t\t\tconst $tokensByType = this.$elements.dropdownTokens\n\t\t\t\t.filter(( i, token ) => {\n\t\t\t\t\t// Check if the field is a \"float\" field. In that case,\n\t\t\t\t\t// promote all the \"int\" tokens to \"float\". All integers\n\t\t\t\t\t// are floats\n\t\t\t\t\tconst tokenType = ( token.dataset.type == 'int' && this.Field.attributes.fieldType == 'float' ) ? 'float' : token.dataset.type;\n\n\t\t\t\t\t// Return the tokens that match the field type\n\t\t\t\t\treturn tokenType == this.Field.attributes.fieldType;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Show the tokens that match the field type\n\t\t\t$tokensByType\n\t\t\t\t.removeClass( 'form-variable__group-item--hidden-by-filter' );\n\t\t}\n\t\telse {\n\t\t\t// Show all tokens\n\t\t\tthis.$elements.dropdownTokens\n\t\t\t\t.removeClass( 'form-variable__group-item--hidden-by-filter' );\n\t\t}\n\n\t\t// Set the visibility of the group of tokens\n\t\tthis.updateGroupsOfTokensVisibility();\n\t}\n\n\tupdateGroupsOfTokensVisibility(){\n\t\t// this.$elements.allGroups\n\t\t\t// .removeClass( 'form-variable__group--open' );\n\n\t\t// Create the variable that we will use to evaluate\n\t\t// if there are available tokens\n\t\tlet hasResults = false;\n\n\t\t// Show all the groups of tokens\n\t\tthis.$elements.allGroups\n\t\t\t.removeClass( 'form-variable__group--without-available-tokens' );\n\n\t\t// Hide the group of tokens that don't have available tokens\n\t\tthis.$elements.allGroups\n\t\t\t.filter(( i, group ) => {\n\t\t\t\t// Check if the group has available tokens\n\t\t\t\tconst groupHasAvailableTokens = group\n\t\t\t\t\t.querySelectorAll( '.form-variable__group-item:not(.form-variable__group-item--hidden-by-filter):not(.form-variable__group-item--hidden-by-search)' )\n\t\t\t\t\t.length > 0;\n\n\t\t\t\t// If it doesn't have available tokens, then hide the group\n\t\t\t\tif ( ! groupHasAvailableTokens ){\n\t\t\t\t\tgroup.classList.add( 'form-variable__group--without-available-tokens' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// The group has available tokens, update \"hasResults\"\n\t\t\t\t\thasResults = true;\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t// Check if there are available tokens at all\n\t\tif ( hasResults ){\n\t\t\tthis.$elements.noResultsOption\n\t\t\t\t.addClass( 'form-variable__group-item-no-results--hide' );\n\n\t\t\t// Check if we have to show or hide the separators\n\t\t\tif ( this.$elements.separators.triggers ) {\n\t\t\t\t// Check if tokens from triggers\n\t\t\t\tif ( this.$elements.allGroups.filter( '.form-variable__group--trigger:not(.form-variable__group--without-available-tokens)' ).length === 0 ) {\n\t\t\t\t\tthis.$elements.separators.triggers.classList.add( 'form-variable__group-item--hidden-by-search' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.$elements.separators.triggers.classList.remove( 'form-variable__group-item--hidden-by-search' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if we have to show or hide the separators\n\t\t\tif ( this.$elements.separators.actions ) {\n\t\t\t\t// Check if tokens from actions\n\t\t\t\tif ( this.$elements.allGroups.filter( '.form-variable__group--action:not(.form-variable__group--without-available-tokens)' ).length === 0 ) {\n\t\t\t\t\tthis.$elements.separators.actions.classList.add( 'form-variable__group-item--hidden-by-search' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.$elements.separators.actions.classList.remove( 'form-variable__group-item--hidden-by-search' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.$elements.noResultsOption\n\t\t\t\t.removeClass( 'form-variable__group-item-no-results--hide' );\n\n\t\t\tif ( this.$elements.separators.triggers ) { this.$elements.separators.triggers.classList.add( 'form-variable__group-item--hidden-by-search' ); }\n\t\t\tif ( this.$elements.separators.actions ) { this.$elements.separators.actions.classList.add( 'form-variable__group-item--hidden-by-search' ); }\n\t\t}\n\t}\n\n\topen(){\n\t\t// If it's a date or time field, try to close\n\t\t// the calendar\n\t\tif ( [ 'date', 'time' ].includes( this.Field.attributes.fieldType ) ){\n\t\t\ttry {\n\t\t\t\tthis.Field.flatpickrInstance.close();\n\t\t\t} catch ( e ){\n\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add open class\n\t\tthis.$elements.wrapper.addClass( 'form-variable--open' );\n\n\t\t// Save status\n\t\tthis.data.isOpen = true;\n\n\t\t// Listen clicks outside the token selector and close it\n\t\tthis.closeWhenClickedOutside();\n\n\t\t// Reset the search field (remove the value)\n\t\tthis.$elements.searchField\n\t\t\t.val( '' )\n\t\t\t.trigger( 'input' )\n\t\t\t// Set padding of the search field depending on the width\n\t\t\t// of the checkbox label\n\t\t\t.css({\n\t\t\t\t'padding-right': `${ ( ( isDefined( this.$elements.filterContainer ) ? this.$elements.filterContainer.outerWidth() : 0 ) + 12 ) }px`\n\t\t\t});;\n\n\t\t// Focus the search field\n\t\tthis.$elements.searchField\n\t\t\t.focus();\n\n\t\t// Determine view (default/bubble)\n\t\tthis.setDropdownView();\n\t\t\t\t\t\t\t\t\n\t\t// Determine direction of the selector\n\t\tthis.setDropdownDirection();\n\n\t\t// Set scroll\n\t\tthis.setDropdownHeight();\n\n\t\t// Create the custom context menus\n\t\tthis.addContextMenus();\n\t}\n\n\taddContextMenus() {\n\t\t// Iterate the groups of tokens\n\t\tthis.tokens.forEach(( groupOfTokens, groupKey ) => {\n\t\t\t// Create custom context menu for debugging\n\t\t\ttry {\n\t\t\t\tconst contextMenu = new uap.ContextMenu( {\n\t\t\t\t\tid: 'tokens',\n\t\t\t\t\t$element: groupOfTokens.$toggleButton[0]\n\t\t\t\t} );\n\n\t\t\t\t// Save it\n\t\t\t\tthis.tokens[ groupKey ].contextMenu = contextMenu;\n\n\t\t\t\t// Add a group\n\t\t\t\tconst debuggingGroup = contextMenu.addGroup( {\n\t\t\t\t\tid: 'testing',\n\t\t\t\t\tname: UncannyAutomator.i18n.debuggingTools\n\t\t\t\t} );\n\n\t\t\t\t// Add a different context for the \"Advanced\" group\n\t\t\t\tif ( groupOfTokens.id == 'advanced' ) {\n\t\t\t\t\t// Add the items\n\t\t\t\t\tdebuggingGroup.addItem( {\n\t\t\t\t\t\tid: 'add-all-tokens',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.addAllTokensInGroup,\n\t\t\t\t\t\tdisabled: true\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t// Add the items\n\t\t\t\t\tdebuggingGroup.addItem( {\n\t\t\t\t\t\tid: 'add-all-tokens',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.addAllTokensInGroup,\n\t\t\t\t\t\tcallback: () => { this.addAllTokensInGroupCallback( groupOfTokens ) }\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} catch ( e ){\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tclose(){\n\t\tthis.$elements.wrapper.removeClass( 'form-variable--open' );\n\n\t\t// Save status\n\t\tthis.data.isOpen = false;\n\n\t\t// Rest input value and trigger 'input' event\n\t\tthis.$elements.searchField\n\t\t\t.val( '' )\n\t\t\t.trigger( 'input' );\n\n\t\t// Stop listening clicks outside the token selector\n\t\t$( document ).off( 'mouseup.uap-token-selector-click-outside' );\n\n\t\t// Iterate the groups and remove the context menus\n\t\tthis.tokens.forEach(( groupOfTokens, groupKey ) => {\n\t\t\ttry {\n\t\t\t\t// Destroy ContextMenu\n\t\t\t\tgroupOfTokens.contextMenu.destroy();\n\t\t\t} catch ( e ) {\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\tdestroy(){\n\t\t// Remove all the elements but the original field\n\t\tthis.$elements.renderContainer.children().insertAfter( this.$elements.wrapper );\n\t\tthis.$elements.wrapper.remove();\n\t}\n\n\tcloseWhenClickedOutside(){\n\t\t$( document ).on( 'mouseup.uap-token-selector-click-outside', ( event ) => {\n\t\t\t// Set the targetted container\n\t\t\tconst $container = this.$elements.wrapper;\n\n\t\t\tif ( ! $container.is( event.target ) && $container.has( event.target ).length === 0 ){\n\t\t\t\t// Hide\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetDropdownPosition(){\n\t\tconst $window = $( window );\n\n\t\tconst position = {}\n\t\tposition.above = this.$elements.wrapper.offset().top - $window.scrollTop();\n\t\tposition.below = $window.height() - ( position.above + this.$elements.wrapper.outerHeight() );\n\n\t\t// Check if the current field is a textarea\n\t\tif ( this.Field.type == 'textarea' ){\n\t\t\t// Recalculate the space below\n\t\t\tposition.below = $window.height() - ( position.above + 38 );\n\t\t}\n\n\t\t// Add \"real size\" class. We're using this to\n\t\t// get the real size of the dropdown\n\t\tthis.$elements.dropdown.addClass( 'uo-realsize' );\n\t\t// Get the dropdown height\n\t\tconst dropdownHeight = this.$elements.dropdown.outerHeight() + 110; // + 75px to show at least 1 option\n\t\tthis.$elements.dropdown.removeClass( 'uo-realsize' );\n\n\t\t// Show dropdown always below for textareas\n\t\tif ( this.Field.type == 'textarea' ){\n\t\t\tposition.hasSpaceBelow = true;\n\t\t}\n\t\telse {\n\t\t\tposition.hasSpaceBelow = position.below >= dropdownHeight;\n\t\t}\n\n\t\treturn position;\n\t}\n\n\tsetDropdownView() {\n\t\tif ( this.$elements.dropdown.width() < 350 ) {\n\t\t\t// Set the \"bubble\" view\n\t\t\tthis.$elements.wrapper.addClass( 'form-variable--bubble' );\n\t\t}\n\t}\n\n\tsetDropdownDirection(){\n\t\t// Get the position of the dropdown\n\t\tconst position = this.getDropdownPosition();\n\n\t\t// Remove the position classes\n\t\tthis.$elements.wrapper.removeClass( 'form-variable--above form-variable--below' );\n\n\t\t// Determine the position\n\t\tif ( position.below > position.above || position.hasSpaceBelow ){\n\t\t\t// Let's show it below\n\t\t\tthis.$elements.wrapper.addClass( 'form-variable--below' );\n\n\t\t\t// Save the position\n\t\t\tthis.data.position = 'below';\n\t\t}\n\t\telse {\n\t\t\t// Let's show it above\n\t\t\tthis.$elements.wrapper.addClass( 'form-variable--above' );\n\n\t\t\t// Save the position\n\t\t\tthis.data.position = 'above';\n\t\t}\n\t}\n\n\tsetDropdownHeight(){\n\t\t// Check if it's open\n\t\tif ( this.data.isOpen ){\n\t\t\t// Get the max height of the dropdown\n\t\t\tconst maxHeight = this.getDropdownPosition()[ this.data.position ] - this.$elements.searchField.outerHeight() - 45;\n\n\t\t\t// Set the max height\n\t\t\tthis.$elements.dropdownGroupsContainer\n\t\t\t\t.css({ \n\t\t\t\t\t'max-height' : `${ maxHeight }px`\n\t\t\t\t});\n\t\t}\n\t}\n\n\tfocusSearchField(){\n\t\tthis.$elements.searchField\n\t\t\t.focus();\n\t}\n\n\tresizeDropdownOnWindowResize(){\n\t\t$( window ).on( 'resize', \n\t\t\tthrottle( () => {\n\t\t\t\t// Determine direction of the selector\n\t\t\t\tthis.setDropdownDirection();\n\n\t\t\t\t// Set height\n\t\t\t\tthis.setDropdownHeight();\n\t\t\t}, 20 )\n\t\t);\n\t}\n\n\tresizeDropdownOnWindowScroll(){\n\t\t$( window ).on( 'scroll', \n\t\t\tdebounce( () => {\n\t\t\t\t// Determine direction of the selector\n\t\t\t\tthis.setDropdownDirection();\n\n\t\t\t\t// Set height\n\t\t\t\tthis.setDropdownHeight();\n\t\t\t}, 300 )\n\t\t);\n\t}\n\n\trefreshOnFieldChange(){\n\t\t// CodeMirror methods\n\t\tthis.Field.formElement.on( 'automator:field:change', () => {\n\t\t\t// Determine direction of the selector\n\t\t\tthis.setDropdownDirection();\n\n\t\t\t// Set height\n\t\t\tthis.setDropdownHeight();\n\t\t});\n\t}\n\n\tshouldSupportFilters(){\n\t\t// Get the field type\n\t\tconst fieldType = this.Field.attributes.fieldType;\n\n\t\treturn [ 'email', 'int', 'float', 'url', 'date', 'time' ].includes( fieldType );\n\t}\n}","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\n// Import select2 (Dropdown)\n// select2.org\nimport 'select2';\n\n// Import flatpickr (DatePicker)\n// flatpickr.js.org\nimport flatpickr from 'flatpickr';\n\nimport {\n\tAJAXRequest,\n\tcompareStrings,\n\tgetCurrentFieldsValues,\n\tgetField,\n\tinArray,\n\tremoveSpaces,\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tdebounce,\n\tgetUniqueID,\n\taddParametersToURL\n} = _uo.utility;\n\nimport {\n\tfieldTypes as validFieldTypes\n} from '@builder/config/valid-data';\n\nimport { validateField } from '../validation/validation.js';\n\nimport TokenSelector from '../tokens/token-selector.js';\n\n/**\n * Create a field\n *\n * @since 0.4\n * @param {string}              type                     - Field type\n * @param {object}              attributes               - Object with information about the field\n * @param {string}              attributes.itemType      Item type. Valid values are trigger, action and closure.\n * @param {int}                 attributes.itemId        ID of the recipe item\n * @param {(null|string|array)} attributes.defaultValue  Default value of the field\n * @param {string}              attributes.currentValue  Current value of the field\n * @param {string}              attributes.placeholder   Placeholder of the field\n * @param {string}              attributes.isHidden      Defines if the field should be hidden\n * @param {string}              attributes.label         Label of the field\n * @param {string}              attributes.description   Description of the field\n * @param {object}              attributes.options       Only used if the field is a select. All the options of the select.\n * @param {null|string}         [attributes.color]       Only used for checkboxes. Valid values are null, 'gutenberg' or 'green'\n * @param {null|string}         [attributes.align]       Only used for checkboxes. Valid values are null, 'left' or 'right'\n * @param {object}              [attributes.toggle]      Only used for checkboxes. Has On and Off strings\n * @param {string}              [attributes.toggle.on]   String shown when the toggle is selected\n * @param {string}              [attributes.toggle.off]  String shown when the toggle is unselected\n * @param {boolean}             attributes.isAjax        Only used if the field is a select. Add listner for the AJAX request.\n * @param {(null|string|array)} attributes.targetField   Only used if the field is a select. AJAX return values and populate this field.\n * @param {string}              attributes.integrationID Integration of plugin\n * @param {string}              attributes.endPoint      endPoint for Ajax Call\n */\n\nclass Field {\n\tconstructor( type, attributes, createDOMelements = true, customValidationFunction = null ) {\n\t\tthis.type = type;\n\n\t\tthis.attributes = this.setAttributes( attributes );\n\t\tthis.createDOMelements = createDOMelements;\n\t\tthis.customValidationFunction = customValidationFunction;\n\n\t\tif ( createDOMelements ) {\n\t\t\tthis.createFormElement();\n\t\t}\n\t}\n\n\t/**\n\t * Create a jQuery DOM element with the field\n\t *\n\t * @since 0.3\n\t */\n\n\tcreateFormElement( initLibraries = true ) {\n\t\t// Create response object\n\t\tlet response = null;\n\n\t\t// Local variables\n\t\tconst type = this.type;\n\t\tconst attributes = this.attributes;\n\n\t\t// Check if it's a valid field type\n\t\tif ( inArray( type, validFieldTypes ) ) {\n\t\t\t// Create form element container, this is global\n\t\t\tconst formElement = $( '<div/>', { class: 'form-element' } );\n\n\t\t\t// Check the user is trying to add a custom class to the formElement element\n\t\t\tif ( isDefined( attributes.formElementClass ) ) {\n\t\t\t\tformElement.addClass( attributes.formElementClass );\n\t\t\t}\n\n\t\t\t// Fields attributes, those will be added to the field jQuery object\n\t\t\tconst fieldAttributes = {\n\t\t\t\tname: attributes.optionCode,\n\t\t\t\tid: attributes.uniqueFieldID,\n\n\t\t\t\t'data-isajax': attributes.isAjax,\n\t\t\t\t'data-targetfield': attributes.targetField,\n\t\t\t\t'data-integrationid': attributes.integrationID,\n\t\t\t\t'data-endPoint': attributes.endPoint,\n\n\t\t\t\t'data-supportsTokens': attributes.supportsTokens,\n\t\t\t\t'data-supportsTinymce': attributes.supportsTinyMCE,\n\t\t\t\t'data-required': attributes.isRequired,\n\t\t\t\t'data-item_type': attributes.itemType,\n\t\t\t\t'data-item-id': attributes.itemId,\n\n\t\t\t\t'data-option-group': attributes.groupId,\n\n\t\t\t\t'data-is-hidden': attributes.isHidden,\n\t\t\t\t'data-is-child-field': attributes.isChildField,\n\t\t\t};\n\n\t\t\t// Check if it's a textarea\n\t\t\tif ( this.type === 'textarea' ) {\n\t\t\t\tfieldAttributes[ 'data-supportsfullpageediting' ] = attributes.supportsFullPageEditing;\n\t\t\t}\n\n\t\t\t// Define field container variable once. An different jQuery object will be created based on the field type\n\t\t\tlet fieldContainer, field;\n\n\t\t\t// Create field based in field type\n\t\t\tswitch ( type ) {\n\t\t\t\tcase 'select':\n\t\t\t\t\t// Field container\n\t\t\t\t\tfieldContainer = $( '<div/>', {\n\t\t\t\t\t\tclass: 'form-select',\n\t\t\t\t\t} );\n\n\t\t\t\t\tthis.fieldContainer = fieldContainer;\n\n\t\t\t\t\t// Create select element and add fieldAttributes to jQuery object. Merge second object into fieldAttributes, recursively\n\t\t\t\t\tfield = $(\n\t\t\t\t\t\t'<select/>',\n\t\t\t\t\t\t$.extend( {}, fieldAttributes, {\n\t\t\t\t\t\t\t'data-type': 'select',\n\t\t\t\t\t\t\tclass: 'form-element__select',\n\t\t\t\t\t\t\t'data-supports-custom-value': attributes.supportsCustomValue,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\t// Check if it supports multiple values\n\t\t\t\t\tif ( attributes.supportsMultipleValues ) {\n\t\t\t\t\t\t// Make it a multiple select\n\t\t\t\t\t\tfield.prop( 'multiple', 'multiple' );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.field = field;\n\n\t\t\t\t\tlet hasSelectedOption = false,\n\t\t\t\t\t\tnumberOfOptions = 0,\n\t\t\t\t\t\tdefaultValue,\n\t\t\t\t\t\tdefaultOptionExists;\n\n\t\t\t\t\t// Check if it has default option and get the default option's value\n\t\t\t\t\tif ( attributes.hasDefaultValue ) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! isEmpty( attributes.defaultValue.option_value ) &&\n\t\t\t\t\t\t\t! isEmpty( attributes.defaultValue.option_name )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// The default option has value and name, so we have to add a new option instead of searching for one\n\t\t\t\t\t\t\tdefaultValue = attributes.defaultValue.option_value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdefaultValue = attributes.defaultValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create select options\n\t\t\t\t\tconst $normalOptions = $(\n\t\t\t\t\t\t`<optgroup class=\"form-element__select-normal-options\"></optgroup>`\n\t\t\t\t\t);\n\n\t\t\t\t\t// console.log( attributes.label );\n\t\t\t\t\t// console.log( ' Original value: ' + attributes.currentValue );\n\n\t\t\t\t\t// Remove the \"automator_custom_value\" option\n\t\t\t\t\tattributes.options = attributes.options.filter( ( option ) => {\n\t\t\t\t\t\treturn option.value !== 'automator_custom_value';\n\t\t\t\t\t} );\n\n\t\t\t\t\t$.each( attributes.options, function ( value, option_data ) {\n\t\t\t\t\t\tconst selectOption = $( '<option/>', {\n\t\t\t\t\t\t\tvalue: option_data.value,\n\t\t\t\t\t\t\ttext: option_data.text,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Check if one of the options value match with the default value. In that case, just select it instead of creating another one with the same value\n\t\t\t\t\t\tif ( attributes.hasDefaultValue && compareStrings( defaultValue, value ) ) {\n\t\t\t\t\t\t\tselectOption.prop( 'selected', true );\n\t\t\t\t\t\t\tdefaultOptionExists = true;\n\t\t\t\t\t\t\thasSelectedOption = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// But also check if the select has a value (and it's not empty), in that case we have to select that one\n\t\t\t\t\t\tif ( attributes.hasValue && compareStrings( attributes.currentValue, option_data.value ) ) {\n\t\t\t\t\t\t\tselectOption.prop( 'selected', true );\n\t\t\t\t\t\t\thasSelectedOption = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tselectOption.appendTo( $normalOptions );\n\t\t\t\t\t\tnumberOfOptions++;\n\t\t\t\t\t} );\n\t\t\t\t\t// Append options to the field\n\t\t\t\t\t$normalOptions.appendTo( field );\n\n\t\t\t\t\t//  Check if it's a multiselect\n\t\t\t\t\tif ( attributes.supportsMultipleValues ) {\n\t\t\t\t\t\t// If so, check if it's has a current value\n\t\t\t\t\t\tif ( ! isEmpty( attributes.currentValue ) ) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tfield.val( attributes.currentValue );\n\t\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if it has a selected value\n\t\t\t\t\t\tif ( ! isEmpty( field.val() ) ) {\n\t\t\t\t\t\t\thasSelectedOption = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if an option was selected, if not then check if we have a default option that doesn't exist in the select, in that case, create one\n\t\t\t\t\tif ( attributes.hasDefaultValue && ! defaultOptionExists ) {\n\t\t\t\t\t\t// Create option\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! isEmpty( attributes.defaultValue.option_value ) &&\n\t\t\t\t\t\t\t! isEmpty( attributes.defaultValue.option_name )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst defaultOption = $( '<option/>', {\n\t\t\t\t\t\t\t\tvalue: attributes.defaultValue.option_value,\n\t\t\t\t\t\t\t\ttext: attributes.defaultValue.option_name,\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t! attributes.hasValue &&\n\t\t\t\t\t\t\t\t! compareStrings( attributes.defaultValue.option_value, attributes.currentValue )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tdefaultOption.prop( 'selected', true );\n\t\t\t\t\t\t\t\thasSelectedOption = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Add first (or second, if the select has a placeholder)\n\t\t\t\t\t\t\tdefaultOption.prependTo( field );\n\t\t\t\t\t\t\tnumberOfOptions++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if we have to add a placeholder\n\t\t\t\t\tif ( attributes.hasPlaceholder ) {\n\t\t\t\t\t\t// Add empty option at the top\n\t\t\t\t\t\tfield.prepend( '<option></option>' );\n\n\t\t\t\t\t\t// If nothing else is selected, then remove the selected\n\t\t\t\t\t\t// value of the select\n\t\t\t\t\t\tif ( ! attributes.hasDefaultValue && ! attributes.hasValue ) {\n\t\t\t\t\t\t\tfield.find( 'option:selected' ).prop( 'selected', false );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the field has AJAX that's triggered by searching options, select2 won't create the option, so\n\t\t\t\t\t// we have to create it even if it's not a valid option anymore\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Has value and it's not custom\n\t\t\t\t\t\tattributes.hasValue && \n\t\t\t\t\t\tattributes.currentValue !== 'automator_custom_value' &&\n\n\t\t\t\t\t\t// Has AJAX that's triggered by searching otpions\n\t\t\t\t\t\tisDefined( attributes.ajax ) && \n\t\t\t\t\t\tisDefined( attributes.ajax.event ) &&\n\t\t\t\t\t\tattributes.ajax.event === 'search_options' &&\n\n\t\t\t\t\t\t// Now check if we have the information name\n\t\t\t\t\t\tisDefined( UncannyAutomator.recipe.items[ attributes.itemId ].meta[ `${ attributes.optionCode }_readable` ] )\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst currentValues = Array.isArray( attributes.currentValue ) ? attributes.currentValue : [ attributes.currentValue ];\n\n\t\t\t\t\t\tcurrentValues.forEach( ( currentValue ) => {\n\t\t\t\t\t\t\t$normalOptions.get(0).insertAdjacentHTML( 'afterBegin', `\n\t\t\t\t\t\t\t\t<option value=\"${ currentValue }\" selected=\"selected\">\n\t\t\t\t\t\t\t\t\t${ UncannyAutomator.recipe.items[ attributes.itemId ].meta[ `${ attributes.optionCode }_readable` ] }\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t` );\n\n\t\t\t\t\t\t\tnumberOfOptions++;\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\thasSelectedOption = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if this select supports the token selector\n\t\t\t\t\t// If it does, create the \"Custom value\" field\n\t\t\t\t\tif ( attributes.supportsCustomValue ) {\n\t\t\t\t\t\tlet customFieldValue = attributes.customValue;\n\n\t\t\t\t\t\t// Create \"Other options\" section\n\t\t\t\t\t\tconst $otherOptions = $( `\n\t\t\t\t\t\t\t<optgroup label=\"${ UncannyAutomator.i18n.validation.field.select.otherOptions }\">\n\t\t\t\t\t\t\t\t<option value=\"automator_custom_value\">${ UncannyAutomator.i18n.validation.field.select.customValue }</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t` );\n\n\t\t\t\t\t\t// Append \"Other options\" to the field\n\t\t\t\t\t\tfield.append( $otherOptions );\n\n\t\t\t\t\t\t// Check if we have to select it\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tattributes.hasValue &&\n\t\t\t\t\t\t\tcompareStrings( attributes.currentValue, 'automator_custom_value' )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Select that option\n\t\t\t\t\t\t\t$otherOptions.find( 'option' ).attr( 'selected', true );\n\t\t\t\t\t\t\thasSelectedOption = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if it doesn't have a selected value\n\t\t\t\t\t\tif ( attributes.hasValue && ! hasSelectedOption ) {\n\t\t\t\t\t\t\t// Select that option\n\t\t\t\t\t\t\t$otherOptions.find( 'option' ).attr( 'selected', true );\n\t\t\t\t\t\t\thasSelectedOption = true;\n\n\t\t\t\t\t\t\t// Set the current value as the custom value\n\t\t\t\t\t\t\tcustomFieldValue = attributes.currentValue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create the custom field\n\t\t\t\t\t\tthis.customValueField = new Field( 'text', {\n\t\t\t\t\t\t\titemId: attributes.itemId,\n\t\t\t\t\t\t\titemType: attributes.itemType,\n\n\t\t\t\t\t\t\tisRequired: attributes.isRequired,\n\t\t\t\t\t\t\tisReadOnly: false,\n\t\t\t\t\t\t\tsupportsTinyMCE: false,\n\t\t\t\t\t\t\tsupportsCopyToClipboard: false,\n\t\t\t\t\t\t\tsupportsTokens: attributes.supportsTokens,\n\n\t\t\t\t\t\t\tisAjax: false, //\n\n\t\t\t\t\t\t\tfieldType: 'text',\n\t\t\t\t\t\t\toptionCode: `${ attributes.optionCode }_custom`,\n\n\t\t\t\t\t\t\tlabel: '',\n\t\t\t\t\t\t\tdescription: attributes.hasCustomValueDescription\n\t\t\t\t\t\t\t\t? attributes.customValueDescription\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\tplaceholder: '',\n\t\t\t\t\t\t\tisHidden: false,\n\t\t\t\t\t\t\ttokenName: sprintf(\n\t\t\t\t\t\t\t\tUncannyAutomator.i18n.validation.field.select.customValueToken,\n\t\t\t\t\t\t\t\tattributes.label\n\t\t\t\t\t\t\t),\n\n\t\t\t\t\t\t\tdefaultValue: null,\n\t\t\t\t\t\t\tcurrentValue: customFieldValue,\n\n\t\t\t\t\t\t\tisChildField: true,\n\t\t\t\t\t\t\tparentOptionCode: attributes.optionCode,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Has a selected option\n\t\t\t\t\tthis.selectHasSelectedOption = hasSelectedOption;\n\n\t\t\t\t\t// Check if it has options to add the \"No results\" option\n\t\t\t\t\tif ( numberOfOptions == 0 ) {\n\t\t\t\t\t\tconst $noResults = $( new Option( UncannyAutomator.i18n.noResults, '', true, true ) );\n\n\t\t\t\t\t\t$noResults.prop( 'disabled', true );\n\n\t\t\t\t\t\tthis.field.find( '.form-element__select-normal-options' ).append( $noResults );\n\n\t\t\t\t\t\tif ( ! this.attributes.supportsCustomValue ) {\n\t\t\t\t\t\t\t// Disable the select\n\t\t\t\t\t\t\tthis.field.prop( 'disabled', true );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind changes\n\t\t\t\t\tfield.on( 'change', function( event, customData ) {\n\t\t\t\t\t\tformElement.trigger( 'automator:field:change', customData );\n\t\t\t\t\t} );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'float':\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'time':\n\t\t\t\t\t// FALLTHROUGH: These fields share the same structure as all of them are input text. The validation is done by another function. For now, these fields types only have two differences, the CSS class added in fieldContainer and the type property of the attributes object added to the field variable.\n\n\t\t\t\t\t// Create CSS classes that will be used by the field container element. This will create classes like \"form-input--url\". They are not used for validation but are useful to add custom CSS to each field\n\t\t\t\t\tconst fieldContainerClass = `form-input form-input--${ type }`;\n\n\t\t\t\t\t// Field container\n\t\t\t\t\tfieldContainer = $( '<div/>', {\n\t\t\t\t\t\tclass: fieldContainerClass,\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Add the CodeMirror field\n\t\t\t\t\tthis.$fakeCodemirrorField = $( '<div/>', {\n\t\t\t\t\t\tclass: 'form-element__input-cm',\n\t\t\t\t\t} );\n\n\t\t\t\t\tfieldContainer.append( this.$fakeCodemirrorField );\n\n\t\t\t\t\tthis.fieldContainer = fieldContainer;\n\n\t\t\t\t\t// Create input element and add fieldAttributes to jQuery object. Merge second object into fieldAttributes, recursively\n\t\t\t\t\tfield = $(\n\t\t\t\t\t\t'<input/>',\n\t\t\t\t\t\t$.extend( {}, fieldAttributes, {\n\t\t\t\t\t\t\tclass: 'form-element__input',\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t'data-type': type,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\t// Check if maxlength is defined\n\t\t\t\t\tif ( isDefined( attributes.maxLength ) ) {\n\t\t\t\t\t\tfield.prop( 'maxlength', attributes.maxLength );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.field = field;\n\n\t\t\t\t\t// Add tokens CSS class to field. This will be used to render the Token Selector once the element is added to the DOM\n\t\t\t\t\tif ( attributes.supportsTokens ) {\n\t\t\t\t\t\tfieldContainer.addClass( 'form-input--token' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the field has a placeholder and add it\n\t\t\t\t\tif ( attributes.hasPlaceholder ) {\n\t\t\t\t\t\tfield.prop( 'placeholder', attributes.placeholder );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the field has a value and add it\n\t\t\t\t\tif ( attributes.hasValue ) {\n\t\t\t\t\t\tfield.prop( 'value', attributes.currentValue );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Now that we now that the field doesn't have a value we can check if the developer defined a default value\n\t\t\t\t\t\tif ( attributes.hasDefaultValue ) {\n\t\t\t\t\t\t\tfield.prop( 'value', attributes.defaultValue );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add \"clear\" button to date and time fields\n\t\t\t\t\tif ( [ 'date', 'time' ].includes( attributes.fieldType ) ) {\n\t\t\t\t\t\t// Add button\n\t\t\t\t\t\tconst $clearButton = $( `\n\t\t\t\t\t\t\t\t<div class=\"form-element__input-clear\" uap-tooltip=\"${ UncannyAutomator.i18n.clear }\">\n\t\t\t\t\t\t\t\t\t<uo-icon id=\"times\"></uo-icon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t` );\n\n\t\t\t\t\t\t// Add class to the container\n\t\t\t\t\t\tfieldContainer.addClass( 'form-input--has-clear' );\n\n\t\t\t\t\t\t// Append the clear button\n\t\t\t\t\t\tthis.$fakeCodemirrorField.append( $clearButton );\n\n\t\t\t\t\t\t// Listen clicks to the button\n\t\t\t\t\t\t$clearButton.on( 'click', () => {\n\t\t\t\t\t\t\tthis.clearValue();\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if it has min/max numbers\n\t\t\t\t\tif ( ( [ 'int', 'float' ] ).includes( attributes.fieldType ) ) {\n\t\t\t\t\t\tif ( ! isEmpty( attributes.minNumber ) ) {\n\t\t\t\t\t\t\tfield.get(0).setAttribute( 'data-min', attributes.minNumber );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( ! isEmpty( attributes.maxNumber ) ) {\n\t\t\t\t\t\t\tfield.get(0).setAttribute( 'data-max', attributes.maxNumber );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind changes\n\t\t\t\t\tfield.on( 'input', function() {\n\t\t\t\t\t\tformElement.trigger( 'automator:field:change' );\n\t\t\t\t\t} );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'textarea':\n\t\t\t\t\t// Field container\n\t\t\t\t\tfieldContainer = $( '<div/>', { class: 'form-textarea' } );\n\n\t\t\t\t\tthis.fieldContainer = fieldContainer;\n\n\t\t\t\t\t// Create textarea\n\t\t\t\t\tfield = $(\n\t\t\t\t\t\t'<textarea/>',\n\t\t\t\t\t\t$.extend( true, fieldAttributes, {\n\t\t\t\t\t\t\t'data-type': 'textarea',\n\t\t\t\t\t\t\tclass: 'form-element__textarea',\n\t\t\t\t\t\t\t'data-item_type': attributes.itemType,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\t// Check if maxlength is defined\n\t\t\t\t\tif ( isDefined( attributes.maxLength ) ) {\n\t\t\t\t\t\tfield.prop( 'maxlength', attributes.maxLength );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.field = field;\n\n\t\t\t\t\t// Add tokens CSS class to field. This will be used to render the Token Selector once the element is added to the DOM\n\t\t\t\t\tif ( attributes.supportsTokens ) {\n\t\t\t\t\t\tfieldContainer.addClass( 'form-textarea--token' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the field has a placeholder and add it\n\t\t\t\t\tif ( attributes.hasPlaceholder ) {\n\t\t\t\t\t\tfield.prop( 'placeholder', attributes.placeholder );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add the CodeMirror field\n\t\t\t\t\t// All textareas have a CodeMirror editor, independently on\n\t\t\t\t\t// whether they also have TinyMCE.\n\t\t\t\t\tthis.$fakeCodemirrorField = $( '<div/>', {\n\t\t\t\t\t\tclass: 'form-element__input-cm',\n\t\t\t\t\t} );\n\n\t\t\t\t\tfieldContainer.append( this.$fakeCodemirrorField );\n\n\t\t\t\t\t// Check if the field has a value and add it\n\t\t\t\t\tif ( attributes.hasValue ) {\n\t\t\t\t\t\tfield.text( attributes.currentValue );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Now that we now that the field doesn't have a value we can check if the developer defined a default value\n\t\t\t\t\t\tif ( attributes.hasDefaultValue ) {\n\t\t\t\t\t\t\tfield.text( attributes.defaultValue );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind changes\n\t\t\t\t\tfield.on( 'input', function() {\n\t\t\t\t\t\tformElement.trigger( 'automator:field:change' );\n\t\t\t\t\t} );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\t// Field container\n\t\t\t\t\tfieldContainer = $( '<div/>', { class: 'form-checkbox' } );\n\n\t\t\t\t\tthis.fieldContainer = fieldContainer;\n\n\t\t\t\t\tconst checkboxLabel = $( '<label/>', { class: 'form-checkbox__container' } );\n\t\t\t\t\tconst checkboxPseudo = $( '<div/>', { class: 'checkbox--show' } );\n\n\t\t\t\t\t// Create checkbox\n\t\t\t\t\tfield = $(\n\t\t\t\t\t\t'<input/>',\n\t\t\t\t\t\t$.extend( {}, fieldAttributes, {\n\t\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t\t\t'data-type': 'checkbox',\n\t\t\t\t\t\t\tclass: 'checkbox--hidden checkbox--primary',\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\n\t\t\t\t\t// Check if checked by default\n\t\t\t\t\tif ( attributes.hasValue && attributes.currentValue ) {\n\t\t\t\t\t\tfield.prop( 'checked', true );\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.field = field;\n\n\t\t\t\t\t// Add label\n\t\t\t\t\tif ( attributes.hasLabel ) {\n\t\t\t\t\t\tif ( isDefined( attributes.isToggle ) && attributes.isToggle ) {\n\t\t\t\t\t\t\t// Add label outside the switch\n\t\t\t\t\t\t\tfieldContainer[0].insertAdjacentHTML(\n\t\t\t\t\t\t\t\t'afterBegin',\n\t\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\tfor=\"${ fieldAttributes.id }\"\n\t\t\t\t\t\t\t\t\t\tclass=\"form-element__label\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t${ attributes.label }\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Add label inside the checkbox wrapper\n\t\t\t\t\t\t\tcheckboxLabel[0].innerHTML = attributes.label;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Append elements\n\t\t\t\t\tfieldContainer.append( checkboxLabel );\n\t\t\t\t\tcheckboxLabel.append( field );\n\t\t\t\t\tcheckboxLabel.append( checkboxPseudo );\n\n\t\t\t\t\t// Check if we have to render a Toggle\n\t\t\t\t\tif ( isDefined( attributes.isToggle ) && attributes.isToggle ) {\n\t\t\t\t\t\tfieldContainer.addClass( 'form-checkbox--toggle' );\n\n\t\t\t\t\t\t// Check if we have to add on and off strings divs\n\t\t\t\t\t\tif ( ! isDefined( attributes.toggle ) ) {\n\t\t\t\t\t\t\tattributes.toggle = {\n\t\t\t\t\t\t\t\ton: UncannyAutomator.i18n.yes,\n\t\t\t\t\t\t\t\toff: UncannyAutomator.i18n.no\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\tconst checkboxToggleOn = $( '<span/>', {\n\t\t\t\t\t\t\tclass: 'checkbox-label checkbox-label--on',\n\t\t\t\t\t\t} ).text( attributes.toggle.on );\n\t\t\t\t\t\tcheckboxLabel.append( checkboxToggleOn );\n\n\t\t\t\t\t\tconst checkboxToggleOff = $( '<span/>', {\n\t\t\t\t\t\t\tclass: 'checkbox-label checkbox-label--off',\n\t\t\t\t\t\t} ).text( attributes.toggle.off );\n\t\t\t\t\t\tcheckboxLabel.append( checkboxToggleOff );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Define color\n\t\t\t\t\tif ( isDefined( attributes.color ) ) {\n\t\t\t\t\t\t// Check if the color is valid\n\t\t\t\t\t\tif ( inArray( attributes.color, [ 'gutenberg', 'green' ] ) ) {\n\t\t\t\t\t\t\t// Add class\n\t\t\t\t\t\t\tswitch ( attributes.color ) {\n\t\t\t\t\t\t\t\tcase 'gutenberg':\n\t\t\t\t\t\t\t\t\tfieldContainer.addClass( 'form-checkbox--toggle-gutenberg' );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'green':\n\t\t\t\t\t\t\t\t\tfieldContainer.addClass( 'form-checkbox--toggle-green' );\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error( `The color ${ attributes.color } does not exists. Default color will be used instead.` );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Define align\n\t\t\t\t\tif ( isDefined( attributes.align ) ) {\n\t\t\t\t\t\t// Check if it's a valid value\n\t\t\t\t\t\tif ( inArray( attributes.align, [ 'left', 'right' ] ) ) {\n\t\t\t\t\t\t\t// Check if it's 'right', otherwise ignore, since 'left' doesn't needs a class\n\t\t\t\t\t\t\tif ( attributes.align == 'right' ) {\n\t\t\t\t\t\t\t\t// Add class\n\t\t\t\t\t\t\t\tfieldContainer.addClass( 'form-checkbox--toggle-right' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error( `The alignment ${ attributes.align } does not exists. \"left\" will be used instead.` );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Bind changes\n\t\t\t\t\tfield.on( 'change', function( event, customData ) {\n\t\t\t\t\t\tformElement.trigger( 'automator:field:change', customData );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Change field variable with all the container\n\t\t\t\t\tfield = checkboxLabel;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\t// Field container\n\t\t\t\t\tfieldContainer = $( '<div/>', { class: 'form-radio' } );\n\t\t\t\t\tthis.fieldContainer = fieldContainer;\n\n\t\t\t\t\t// Create array to save all the jQuery DOM elements\n\t\t\t\t\tlet $fields = $(),\n\t\t\t\t\t\t$fieldContainers = $();\n\n\t\t\t\t\t// Iterate options\n\t\t\t\t\t$.each( attributes.options, function( index, option ) {\n\t\t\t\t\t\t// Create container\n\t\t\t\t\t\tconst $formRadioContainer = $( '<label/>', { class: 'form-radio__container' } );\n\n\t\t\t\t\t\t// Add label\n\t\t\t\t\t\t$formRadioContainer.html( option.text );\n\n\t\t\t\t\t\t// Create radio\n\t\t\t\t\t\tconst $field = $(\n\t\t\t\t\t\t\t'<input/>',\n\t\t\t\t\t\t\t$.extend( {}, fieldAttributes, {\n\t\t\t\t\t\t\t\ttype: 'radio',\n\t\t\t\t\t\t\t\t'data-type': 'radio',\n\t\t\t\t\t\t\t\tclass: 'radio--hidden radio--primary',\n\n\t\t\t\t\t\t\t\tvalue: option.value,\n\t\t\t\t\t\t\t\tname: fieldAttributes.id,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Save radio\n\t\t\t\t\t\t$fields = $fields.add( $field );\n\n\t\t\t\t\t\t// Create fake radio\n\t\t\t\t\t\tconst $fakeRadio = $( '<div/>', { class: 'radio--show' } );\n\n\t\t\t\t\t\t// Append elements\n\t\t\t\t\t\t$formRadioContainer.append( $field );\n\t\t\t\t\t\t$formRadioContainer.append( $fakeRadio );\n\n\t\t\t\t\t\t// Check if this field has a value, if it does, and the value\n\t\t\t\t\t\t// matches the input radio name, then check it\n\t\t\t\t\t\tif ( attributes.hasValue && attributes.currentValue == option.value ) {\n\t\t\t\t\t\t\t$field.prop( 'checked', true );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Otherwise, check if it has a default value and use that\n\t\t\t\t\t\telse if (\n\t\t\t\t\t\t\t! attributes.hasValue &&\n\t\t\t\t\t\t\tattributes.hasDefaultValue &&\n\t\t\t\t\t\t\tattributes.defaultValue == option.value\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t$field.prop( 'checked', true );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Save container\n\t\t\t\t\t\t$fieldContainers = $fieldContainers.add( $formRadioContainer );\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Save fields\n\t\t\t\t\tthis.field = $fieldContainers;\n\t\t\t\t\tfield = $fieldContainers;\n\n\t\t\t\t\t// Bind changes\n\t\t\t\t\t$fields.on( 'change', ( event, customData ) => {\n\t\t\t\t\t\t// Check if the value is different\n\t\t\t\t\t\tformElement.trigger( 'automator:field:change', customData );\n\t\t\t\t\t} );\n\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Append field jQuery object to field container\n\t\t\tfieldContainer.append( field );\n\n\t\t\t// Create label\n\n\t\t\t// Create Label, even if it's empty but the field is required, so we can add the asterisk\n\t\t\tlet fieldLabel;\n\n\t\t\tif ( type != 'checkbox' && ( attributes.hasLabel || attributes.isRequired ) ) {\n\t\t\t\tfieldLabel = $( '<label/>', {\n\t\t\t\t\tclass: 'form-element__label',\n\t\t\t\t\tfor: attributes.uniqueFieldID,\n\t\t\t\t} );\n\n\t\t\t\t// Add label text\n\t\t\t\tif ( attributes.hasLabel ) {\n\t\t\t\t\tfieldLabel.html( attributes.label );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if it's a required field\n\t\t\tif ( attributes.isRequired ) {\n\t\t\t\t// Add required class to the field container\n\t\t\t\tfieldContainer.addClass( 'form-element--required' );\n\n\t\t\t\t// Check if it's a checkbox\n\t\t\t\tif ( attributes.fieldType == 'checkbox' ) {\n\t\t\t\t\t// Add required attribute to the field\n\t\t\t\t\tfield.find( 'input' ).prop( 'required', true );\n\n\t\t\t\t\t// Add asterisk to the label\n\t\t\t\t\tif ( attributes.hasLabel ) {\n\t\t\t\t\t\t// Add required icon next to label\n\t\t\t\t\t\tconst fieldLabelAsterisk = $( '<span/>', { class: 'form-element-label__required' } );\n\t\t\t\t\t\tfield.append( fieldLabelAsterisk );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Add required attribute to the field\n\t\t\t\t\tfield.prop( 'required', true );\n\n\t\t\t\t\t// Add asterisk to the label\n\t\t\t\t\tif ( attributes.hasLabel ) {\n\t\t\t\t\t\t// Add required icon next to label\n\t\t\t\t\t\tconst fieldLabelAsterisk = $( '<span/>', { class: 'form-element-label__required' } );\n\t\t\t\t\t\tfieldLabel.append( fieldLabelAsterisk );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if it's read only\n\t\t\tif ( isDefined( attributes.isReadOnly ) && attributes.isReadOnly ) {\n\t\t\t\t// Check if it's NOT a date or time field\n\t\t\t\tif ( ! [ 'date', 'time' ].includes( this.attributes.fieldType ) ) {\n\t\t\t\t\t// Add required class to the field container\n\t\t\t\t\tfieldContainer.addClass( 'form-element--readonly' );\n\t\t\t\t}\n\n\t\t\t\t// Check if it's a select\n\t\t\t\tif ( attributes.fieldType == 'select' ) {\n\t\t\t\t\t// Disable the select\n\t\t\t\t\tfield.prop( 'disabled', true );\n\t\t\t\t} else if ( [ 'checkbox', 'radio' ].includes( attributes.fieldType ) ) {\n\t\t\t\t\t// Disable the radio and checkbox\n\t\t\t\t\tfield.find( 'input' ).prop( 'disabled', true );\n\t\t\t\t} else {\n\t\t\t\t\t// Add read only attribute to the field\n\t\t\t\t\tfield.prop( 'readonly', true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Append label element if is defined\n\t\t\tif ( attributes.hasLabel || attributes.isRequired ) {\n\t\t\t\tfieldContainer.prepend( fieldLabel );\n\t\t\t}\n\n\t\t\t// Error container\n\t\t\tconst fieldError = $( '<div/>', { class: 'form-element__error' } );\n\t\t\tfieldContainer.append( fieldError );\n\n\t\t\tthis.fieldContainer = fieldContainer;\n\n\t\t\t// Field description\n\t\t\tif ( attributes.hasDescription ) {\n\t\t\t\tconst fieldDescription = $( '<div/>', { class: 'description' } );\n\t\t\t\tfieldDescription.html( attributes.description );\n\t\t\t\tfieldContainer.append( fieldDescription );\n\t\t\t}\n\n\t\t\t// Add button to manually trigger AJAX call again\n\t\t\tif (\n\t\t\t\tisDefined( attributes.ajax ) && \n\t\t\t\tisDefined( attributes.ajax.event ) && \n\t\t\t\t[ 'parent_fields_change', 'on_load' ].includes( attributes.ajax.event )\n\t\t\t) {\n\t\t\t\tfieldLabel.get(0).insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tsize=\"extra-small\"\n\t\t\t\t\t\tclass=\"form-element-ajax-refresh-btn\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id=\"sync\"></uo-icon>\n\n\t\t\t\t\t\t${ this.type === 'select' ? UncannyAutomator.i18n.refreshOptions : UncannyAutomator.i18n.refresh }\n\t\t\t\t\t</uo-button>\n\t\t\t\t` );\n\t\t\t}\n\t\t\t\n\n\t\t\t// Check if the field is hidden\n\t\t\tif ( attributes.isHidden ) {\n\t\t\t\t// Add class to hide the field container\n\t\t\t\tfieldContainer.addClass( 'form-element--hidden' );\n\t\t\t}\n\n\t\t\t// Append everything to the form element container\n\t\t\tformElement.append( fieldContainer );\n\n\t\t\t// Check if it's a select and has a customField defined,\n\t\t\t// if so, add it\n\t\t\tif ( attributes.fieldType == 'select' && isDefined( this.customValueField ) ) {\n\t\t\t\t// Create container for the custom value field\n\t\t\t\tthis.customValueFieldContainer = $(\n\t\t\t\t\t`<div class=\"form-select-custom\">\n\t\t\t\t\t\t<div class=\"form-element-children\"></div>\n\t\t\t\t\t</div>`\n\t\t\t\t);\n\n\t\t\t\t// Get the form element\n\t\t\t\tthis.customValueFieldContainer\n\t\t\t\t\t.find( '.form-element-children' )\n\t\t\t\t\t.append( this.customValueField.createFormElement() );\n\n\t\t\t\t// Append it\n\t\t\t\tformElement.append( this.customValueFieldContainer );\n\n\t\t\t\t// Check if we have to show the custom field\n\t\t\t\tif ( this.getValue() == 'automator_custom_value' ) {\n\t\t\t\t\tthis.customValueFieldContainer.addClass( 'form-select-custom--visible' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.customValueFieldContainer.removeClass( 'form-select-custom--visible' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.field.get(0).fieldInstance = this;\n\n\t\t\t// Response\n\t\t\tresponse = formElement;\n\n\t\t\t// Save Form Element\n\t\t\tthis.formElement = formElement;\n\n\t\t\t// Init libraries\n\t\t\tif ( initLibraries ) {\n\t\t\t\tthis.initLibraries();\n\t\t\t}\n\n\t\t\t// Listen fields for AJAX\n\t\t\tthis.handleAJAX();\n\n\t\t\t// Trigger methods on change\n\t\t\tthis.onChange();\n\n\t\t\t// Trigger methods on focus\n\t\t\tthis.onFocus();\n\t\t} else {\n\t\t\t// Error: Invalid field type\n\t\t\tconsole.error( `The field type \"${ type }\" is invalid. The valid ones are ${ validFieldTypes.join( ', ' ) }` );\n\t\t}\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * Set attributes. It add properties like hasValue, hasPlaceholder, etc, automatically\n\t *\n\t * @since 0.4\n\t * @param {object} attributes - The field attributes\n\t * @return {object} attributes - The field attributes\n\t */\n\n\tsetAttributes( attributes ) {\n\t\t// Save field type in the attributes\n\t\tattributes.fieldType = this.type;\n\n\t\t// Create an unique ID\n\t\tattributes.uniqueFieldID = `${ attributes.optionCode }__${ getUniqueID() }`;\n\n\t\t// Check if it's a checkbox and sanitaze the current value\n\t\tif ( attributes.fieldType == 'checkbox' && ! isEmpty( attributes.currentValue ) ) {\n\t\t\t// Check if the value is \"true\" or \"false\"\n\t\t\tif ( [ 'true', 'false' ].includes( attributes.currentValue ) ) {\n\t\t\t\t// Make it a boolean\n\t\t\t\tattributes.currentValue = attributes.currentValue == 'true' ? true : false;\n\n\t\t\t\t// If it's false, set hasValue to false\n\t\t\t\tif ( ! attributes.currentValue ) {\n\t\t\t\t\tattributes.hasValue = false;\n\t\t\t\t} else {\n\t\t\t\t\tattributes.hasValue = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Has value\n\t\tif ( ! isDefined( attributes.hasValue ) ) {\n\t\t\tif ( ! isEmpty( attributes.currentValue ) ) {\n\t\t\t\tattributes.hasValue = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasValue = false;\n\t\t\t}\n\t\t}\n\n\t\t// Default placeholder\n\t\tif ( \n\t\t\tisEmpty( attributes.placeholder ) && \n\t\t\tthis.type === 'select' && \n\t\t\tisDefined( attributes.ajax ) && \n\t\t\tisDefined( attributes.ajax.event ) && \n\t\t\tattributes.ajax.event === 'search_options'\n\t\t) {\n\t\t\tattributes.placeholder = UncannyAutomator.i18n.searchEllipsis;\n\t\t}\n\n\t\t// Has placeholder\n\t\tif ( ! isDefined( attributes.hasPlaceholder ) ) {\n\t\t\tif ( ! isEmpty( attributes.placeholder ) ) {\n\t\t\t\tattributes.hasPlaceholder = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasPlaceholder = false;\n\t\t\t}\n\t\t}\n\n\t\t// Has default value\n\t\tif ( ! isDefined( attributes.hasDefaultValue ) ) {\n\t\t\tif ( ! isEmpty( attributes.defaultValue ) ) {\n\t\t\t\tattributes.hasDefaultValue = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasDefaultValue = false;\n\t\t\t}\n\t\t}\n\n\t\t// Has label\n\t\tif ( ! isDefined( attributes.hasLabel ) ) {\n\t\t\tif ( ! isEmpty( attributes.label ) ) {\n\t\t\t\tattributes.hasLabel = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasLabel = false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if we have to show the label of the field in the trigger/action sentence\n\t\t// This doesn't define whether the value of the field will be shown in the sentence. It defines whether in case\n\t\t// we're showing the value of the field in the sentence we'll show the label before the value.\n\t\tif ( ! isDefined( attributes.showLabelInSentence ) ) {\n\t\t\tattributes.showLabelInSentence = true;\n\t\t}\n\n\t\t// Has description\n\t\tif ( ! isDefined( attributes.hasDescription ) ) {\n\t\t\tif ( ! isEmpty( attributes.description ) ) {\n\t\t\t\tattributes.hasDescription = true;\n\t\t\t} else {\n\t\t\t\tattributes.hasDescription = false;\n\t\t\t}\n\t\t}\n\n\t\t// Default token name\n\t\tif ( isEmpty( attributes.tokenName ) ) {\n\t\t\tattributes.tokenName = attributes.label;\n\t\t}\n\n\t\t// Default copy to clipboard\n\t\tif ( ! isDefined( attributes.supportsCopyToClipboard ) ) {\n\t\t\tattributes.supportsCopyToClipboard = false;\n\t\t}\n\n\t\t// Is Required\n\t\tif ( ! isDefined( attributes.isRequired ) ) {\n\t\t\tattributes.isRequired = false;\n\t\t}\n\n\t\t// Is children\n\t\tif ( ! isDefined( attributes.isChildField ) ) {\n\t\t\tattributes.isChildField = false;\n\t\t}\n\n\t\t// Check default value for readOnly\n\t\tif ( ! isDefined( attributes.isReadOnly ) ) {\n\t\t\tattributes.isReadOnly = false;\n\t\t}\n\n\t\t// Check if it supports multiple values\n\t\tif ( ! isDefined( attributes.supportsMultipleValues ) ) {\n\t\t\tattributes.supportsMultipleValues = false;\n\t\t}\n\n\t\t// Check if it's a select\n\t\tif ( attributes.fieldType == 'select' ) {\n\t\t\t//  Check if it supports multiple values, if it does,\n\t\t\t// don't support custom values.\n\t\t\tif ( attributes.supportsMultipleValues ) {\n\t\t\t\tattributes.supportsCustomValue = false;\n\t\t\t} else {\n\t\t\t\t// Check if it can support custom tokens\n\t\t\t\tif ( ! isDefined( attributes.supportsCustomValue ) ) {\n\t\t\t\t\tif ( [ 'condition', 'action', 'closure' ].includes( attributes.itemType ) ) {\n\t\t\t\t\t\tattributes.supportsCustomValue = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tattributes.supportsCustomValue = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//  Check if the current dropdown is a multiselect,\n\t\t\t// if so, check if it has a current value. In case it\n\t\t\t// has a value, try to parse it, because it might be a\n\t\t\t// JSON string\n\t\t\tif ( attributes.supportsMultipleValues ) {\n\t\t\t\ttry {\n\t\t\t\t\tattributes.currentValue = JSON.parse( attributes.currentValue );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if the user defined a description for the custom field too\n\t\t\tattributes.hasCustomValueDescription = ! isEmpty( attributes.customValueDescription );\n\t\t}\n\n\t\t// Check if it's a select or radio\n\t\tif ( [ 'radio', 'select' ].includes( attributes.fieldType ) ) {\n\t\t\tif ( ! isDefined( attributes.options ) ) {\n\t\t\t\tattributes.options = [];\n\t\t\t}\n\n\t\t\t// Show the IDs by default\n\t\t\tif ( ! isDefined( attributes.optionsShowID ) ) {\n\t\t\t\tattributes.optionsShowID = true;\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's an integer or float field\n\t\tif ( [ 'int', 'float' ].includes( attributes.fieldType ) ) {\n\t\t\tif ( ! isEmpty( attributes.minNumber ) ) {\n\t\t\t\t// Make sure it's a valid number\n\t\t\t\tconst minNumber = parseFloat( attributes.minNumber );\n\t\t\t\tif ( ! isNaN( minNumber ) ) {\n\t\t\t\t\tattributes.minNumber = minNumber;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! isEmpty( attributes.maxNumber ) ) {\n\t\t\t\t// Make sure it's a valid number\n\t\t\t\tconst maxNumber = parseFloat( attributes.maxNumber );\n\t\t\t\tif ( ! isNaN( maxNumber ) ) {\n\t\t\t\t\tattributes.maxNumber = maxNumber;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's a date field\n\t\tif ( attributes.fieldType == 'date' ) {\n\t\t\tattributes.isReadOnly = true;\n\n\t\t\t// Check if it doesn't have a custom date format\n\t\t\tif ( ! isDefined( attributes.dateFormat ) ) {\n\t\t\t\tattributes.dateFormat = 'Y-m-d';\n\t\t\t}\n\n\t\t\t// Check if it doesn't have a custom date alt format\n\t\t\tif ( ! isDefined( attributes.dateAltFormat ) ) {\n\t\t\t\tattributes.dateAltFormat = UncannyAutomator.format.date;\n\t\t\t}\n\n\t\t\t// Check if it has a min date\n\t\t\tif ( isDefined( attributes.minDate ) ) {\n\t\t\t\tattributes.minDate = attributes.minDate;\n\t\t\t}\n\n\t\t\t// Check if it has a max date\n\t\t\tif ( isDefined( attributes.maxDate ) ) {\n\t\t\t\tattributes.maxDate = attributes.maxDate;\n\t\t\t}\n\n\t\t\t// Set default value for the supports range option\n\t\t\tif ( ! isDefined( attributes.supportsRange ) ) {\n\t\t\t\tattributes.supportsRange = false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's a time field\n\t\tif ( attributes.fieldType == 'time' ) {\n\t\t\tattributes.isReadOnly = true;\n\n\t\t\t// Check if it doesn't have a custom time format\n\t\t\tif ( ! isDefined( attributes.timeFormat ) ) {\n\t\t\t\tattributes.timeFormat = 'h:i K'; // PHP: h:i A\n\t\t\t}\n\n\t\t\t// Check if it doesn't have a custom time alt format\n\t\t\tif ( ! isDefined( attributes.timeAltFormat ) ) {\n\t\t\t\t// WordPress format\n\t\t\t\tattributes.timeAltFormat = UncannyAutomator.format.time;\n\t\t\t}\n\n\t\t\t// Convert from PHP date format to the format user by flatpickr\n\t\t\t// Keys are the PHP format, values are the flatpickr format\n\t\t\tconst flatpickrDateReplace = {\n\t\t\t\t// Lowercase Ante meridiem and Post meridiem\n\t\t\t\ta: 'K',\n\t\t\t\t// Uppercase Ante meridiem and Post meridiem\n\t\t\t\tA: 'K',\n\t\t\t\t// Swatch Internet time\n\t\t\t\tB: '',\n\t\t\t\t// 24-hour format of an hour without leading zeros\n\t\t\t\tG: 'H',\n\t\t\t\t// 12-hour format of an hour without leading zeros\n\t\t\t\tg: 'h',\n\t\t\t\t// 12-hour format of an hour with leading zeros\n\t\t\t\th: 'g'\n\t\t\t}\n\n\t\t\t// Convert the PHP time format to flatpickr format\n\t\t\ttry {\n\t\t\t\tattributes.timeAltFormat = attributes.timeAltFormat.replace(\n\t\t\t\t\tnew RegExp( Object.keys( flatpickrDateReplace ).join( '|' ), 'g' ),\n\t\t\t\t\t( match ) => {\n\t\t\t\t\t\treturn flatpickrDateReplace[ match ];\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} catch ( e ) {\n\t\t\t\t// Set another time format\n\t\t\t\tattributes.timeAltFormat = attributes.timeFormat;\n\n\t\t\t\t// Check if debugging mode is enabled\n\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\tif ( UncannyAutomatorBackend.debugging.enabled ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// Check if it has a min time\n\t\t\tif ( isDefined( attributes.minTime ) ) {\n\t\t\t\tattributes.minTime = attributes.minTime;\n\t\t\t}\n\n\t\t\t// Check if it has a max time\n\t\t\tif ( isDefined( attributes.maxTime ) ) {\n\t\t\t\tattributes.maxTime = attributes.maxTime;\n\t\t\t}\n\t\t}\n\n\t\t// Supports tinyMCE\n\t\tif ( ! isDefined( attributes.supportsTinyMCE ) ) {\n\t\t\tattributes.supportsTinyMCE = false;\n\t\t}\n\n\t\t// If it supports TinyMCE, set default value for full page editing\n\t\tif ( attributes.supportsTinyMCE && ! isDefined( attributes.supportsFullPageEditing ) ) {\n\t\t\tattributes.supportsFullPageEditing = false;\n\t\t}\n\n\t\t// Is Toggle\n\t\tif ( ! isDefined( attributes.isToggle ) && isDefined( attributes.toggle ) ) {\n\t\t\tattributes.isToggle = true;\n\t\t}\n\n\t\t// Is AJAX\n\t\tif ( ! isDefined( attributes.isAjax ) ) {\n\t\t\tattributes.isAjax = false;\n\t\t}\n\n\t\tif (\n\t\t\tisDefined( attributes.ajax ) && \n\t\t\tisDefined( attributes.ajax.event )\n\t\t) {\n\t\t\tattributes.ajax.firstLoadDone = false;\n\t\t}\n\n\t\t// Set the default value for isHidden\n\t\tif ( ! isDefined( attributes.isHidden ) ) {\n\t\t\tattributes.isHidden = false;\n\t\t}\n\n\t\t// Check if we should remove some tokens\n\t\tif ( ! isDefined( attributes.unsupportedTokens ) ) {\n\t\t\tattributes.unsupportedTokens = [];\n\t\t}\n\n\t\t// Check if the field is inside a trigger\n\t\t// If it is, disable tokens\n\t\tif ( attributes.itemType == 'trigger' ) {\n\t\t\tattributes.supportsTokens = false;\n\t\t}\n\n\t\t// Supports tokens\n\t\tif ( ! isDefined( attributes.supportsTokens ) ) {\n\n\t\t\tif (\n\t\t\t\t[ 'text', 'textarea', 'int', 'float', 'email', 'url', 'select', 'date', 'time' ].includes( attributes.fieldType ) &&\n\t\t\t\t[ 'condition', 'action', 'closure' ].includes( attributes.itemType ) &&\n\t\t\t\t! attributes.isReadOnly\n\t\t\t) {\n\t\t\t\tattributes.supportsTokens = true;\n\t\t\t} else {\n\t\t\t\tattributes.supportsTokens = false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if it can support tokens\n\t\tif (\n\t\t\tattributes.supportsTokens &&\n\t\t\tattributes.fieldType == 'select' &&\n\t\t\t! [ 'condition', 'action', 'closure' ].includes( attributes.itemType )\n\t\t) {\n\t\t\tattributes.supportsTokens = false;\n\t\t}\n\n\t\treturn attributes;\n\t}\n\n\t/**\n\t * Gets the data needed by the server when doing AJAX requests from the field\n\t * \n\t * @param {Object} options \n\t * @param {String} options.fieldToListenToCode The ID of the field that triggered the AJAX call\n\t * @returns {Object} The data to be sent to the server when doing an AJAX call made by the field\n\t */\n\tgetAjaxRequestData( { fieldToListenToCode } ) { \n\t\treturn {\n\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\titem_id: this.attributes.itemId,\n\t\t\tgroup_id: this.attributes.groupId,\n\t\t\tfield_id: this.attributes.optionCode,\n\t\t\ttriggered_by: fieldToListenToCode,\n\t\t\tvalues: getCurrentFieldsValues( { itemID: this.attributes.itemId, field: this } ),\n\t\t}\n\t}\n\n\t/**\n\t * Handles the AJAX functionality on fields\n\t * Fields will listen to changes on other fields and trigger an AJAX call to retrieve a value or dropdown options\n\t */\n\thandleAJAX() {\n\t\t// Check if we should listen to other fields\n\t\tif ( ! isDefined( this.attributes.ajax ) || ! isDefined( this.attributes.ajax.event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Performs the AJAX call\n\t\t */\n\t\tconst doAJAX = ( { fieldToListenToCode = '', onSuccess = () => {} } ) => {\n\t\t\t// Get the value of all the fields\n\t\t\tconst fieldValues = getCurrentFieldsValues( { itemID: this.attributes.itemId, field: this } );\n\n\t\t\t// Before starting, clear any errors\n\t\t\t// This will hide errors from previous calls before doing the new one\n\t\t\tthis.clearError();\n\n\t\t\tAJAXRequest(\n\t\t\t\tthis.attributes.ajax.endpoint,\n\t\t\t\tthis.getAjaxRequestData( { fieldToListenToCode } ),\n\t\t\t\t( response ) => {\n\t\t\t\t\t// We'll update this even if the call returns an error. The call itself was successful\n\t\t\t\t\tthis.attributes.ajax.firstLoadDone = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tonSuccess();\n\t\t\t\t\t} catch ( e ) {}\n\t\t\t\t\t\n\t\t\t\t\t// Check if the call was successful\n\t\t\t\t\tif ( isDefined( response.success ) && ! response.success ) {\n\t\t\t\t\t\t// Check if there is a message available\n\t\t\t\t\t\tif ( ! isEmpty( response.error ) ) {\n\t\t\t\t\t\t\tthis.setError( response.error );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set the new options\n\t\t\t\t\t\tif ( this.type === 'select' ) {\n\t\t\t\t\t\t\tthis.setSelectOptions( [], false );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.setValue( '' );\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if we have to set the select options\n\t\t\t\t\tif ( isDefined( response.options ) ) {\n\t\t\t\t\t\t// Set the new options\n\t\t\t\t\t\tthis.setSelectOptions( response.options, false );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Check if we have to set the value\n\t\t\t\t\tif ( isDefined( response.value ) ) {\n\t\t\t\t\t\tthis.setValue( response.value );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check if it's a custom value\n\t\t\t\t\t\tif ( fieldValues[ this.attributes.optionCode ] === 'automator_custom_value' ) {\n\t\t\t\t\t\t\tthis.setValue( fieldValues[ `${ this.attributes.optionCode }_custom` ] );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif ( \n\t\t\t\t\t\t\t\t// Check if it's a multiselect\n\t\t\t\t\t\t\t\tthis.attributes.supportsMultipleValues ||\n\t\t\t\t\t\t\t\t// Or if it's a single select, but the option exists\n\t\t\t\t\t\t\t\tthis.field.get(0).querySelector( `option[value=\"${ fieldValues[ this.attributes.optionCode ] }\"]` )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tthis.setValue( fieldValues[ this.attributes.optionCode ] );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Check if the option exists\n\t\t\t\t\t\t\t\tthis.setValue( '' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// Check if we have to listen other fields\n\t\tif ( this.attributes.ajax.event === 'parent_fields_change' ) {\n\t\t\t// Check if the fields exist\n\t\t\tif ( ! isDefined( this.attributes.ajax.listenFields ) && Array.isArray( this.attributes.ajax.listenFields ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.attributes.ajax.listenFields.forEach( ( fieldID ) => {\n\t\t\t\t// Get field\n\t\t\t\tconst fieldToListenTo = getField( this.attributes.itemId, fieldID );\n\n\t\t\t\t// Get the debounce delay based on the field type\n\t\t\t\tconst debounceDelay = [ 'date', 'time', 'select', 'radio', 'checkbox' ].includes( fieldToListenTo.type ) ? 0 : 1000;\n\n\t\t\t\t// Listen changes to the parent field\n\t\t\t\tfieldToListenTo.formElement.on( 'automator:field:change', debounce( ( event, context ) => {\n\t\t\t\t\t// Don't trigger when getting formElement\n\t\t\t\t\tif ( isDefined( context ) && isDefined( context.source ) && context.source === 'getFormElement' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} \n\n\t\t\t\t\t// Before doing the request, show a loading animation in the field that changed\n\t\t\t\t\tfieldToListenTo.startLoadingAnimation();\n\t\t\t\t\t// And show animation in the target field too\n\t\t\t\t\tthis.startLoadingAnimation();\n\n\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\tfieldToListenToCode: fieldToListenTo.attributes.optionCode,\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t// Stop loading animation in both fields\n\t\t\t\t\t\t\tfieldToListenTo.stopLoadingAnimation();\n\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}, debounceDelay ) );\n\n\t\t\t\t// Check if it's a dropdown that supports custom values\n\t\t\t\tif ( fieldToListenTo.type === 'select' && fieldToListenTo.attributes.supportsCustomValue ) {\n\t\t\t\t\tfieldToListenTo.customValueField.formElement.on( 'automator:field:change', debounce( ( event, context ) => {\n\t\t\t\t\t\t// Don't trigger when getting formElement\n\t\t\t\t\t\tif ( isDefined( context ) && isDefined( context.source ) && context.source === 'getFormElement' ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Before doing the request, show a loading animation in the field that changed\n\t\t\t\t\t\tfieldToListenTo.startLoadingAnimation();\n\t\t\t\t\t\t// Show loading animation in the custom value too\n\t\t\t\t\t\tfieldToListenTo.customValueField.startLoadingAnimation();\n\t\t\t\t\t\t// And show animation in the target field too\n\t\t\t\t\t\tthis.startLoadingAnimation();\n\t\n\t\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\t\tfieldToListenToCode: fieldToListenTo.attributes.optionCode,\n\t\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t\t// Stop loading animation in all fields\n\t\t\t\t\t\t\t\tfieldToListenTo.stopLoadingAnimation();\n\t\t\t\t\t\t\t\tfieldToListenTo.customValueField.stopLoadingAnimation();\n\t\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}, 1000 ) );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Trigger change event in the parent field as the field load\n\t\t\t\t// But do it only if the parent field isn't listening to another field too\n\t\t\t\tif ( ! isDefined( fieldToListenTo.attributes.ajax ) ) {\n\t\t\t\t\tfieldToListenTo.field.trigger( 'automator:field:change' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Check if the \"Refresh\" button exists and add event listener\n\t\t\tif ( this.$ajaxRefreshBtn ) {\n\t\t\t\tthis.$ajaxRefreshBtn.addEventListener( 'click', () => {\n\t\t\t\t\t// Show animation in the target field\n\t\t\t\t\tthis.startLoadingAnimation();\n\n\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\tfieldToListenToCode: this.attributes.optionCode,\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t// Stop loading animation \n\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Check if we have to perform the call on load\n\t\tif ( this.attributes.ajax.event === 'on_load' ) {\n\t\t\t// Show animation in the target field\n\t\t\tthis.startLoadingAnimation();\n\n\t\t\tdoAJAX( {\n\t\t\t\tfieldToListenToCode: this.attributes.optionCode,\n\t\t\t\tonSuccess: () => {\n\t\t\t\t\t// Stop loading animation \n\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Check if the \"Refresh\" button exists and add event listener\n\t\t\tif ( this.$ajaxRefreshBtn ) {\n\t\t\t\tthis.$ajaxRefreshBtn.addEventListener( 'click', () => {\n\t\t\t\t\t// Show animation in the target field\n\t\t\t\t\tthis.startLoadingAnimation();\n\n\t\t\t\t\tdoAJAX( {\n\t\t\t\t\t\tfieldToListenToCode: this.attributes.optionCode,\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t// Stop loading animation \n\t\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\t\t} \n\n\t\t// Check if we have to clear the field when another field changes\n\t\tif ( this.attributes.ajax.event === 'search_options' && isDefined( this.attributes.ajax.clearOnChangeFields ) && Array.isArray( this.attributes.ajax.clearOnChangeFields ) ) {\n\t\t\tthis.attributes.ajax.clearOnChangeFields.forEach( ( fieldID ) => {\n\t\t\t\t// Get field\n\t\t\t\tconst fieldToListenTo = getField( this.attributes.itemId, fieldID );\n\n\t\t\t\t// Get the debounce delay based on the field type\n\t\t\t\tconst debounceDelay = [ 'date', 'time', 'select', 'radio', 'checkbox' ].includes( fieldToListenTo.type ) ? 0 : 1000;\n\n\t\t\t\t// Listen changes to the parent field\n\t\t\t\tfieldToListenTo.formElement.on( 'automator:field:change', debounce( ( event, context ) => {\n\t\t\t\t\tthis.setValue( '' );\n\t\t\t\t}, debounceDelay ) );\n\n\t\t\t\t// Check if it's a dropdown that supports custom values\n\t\t\t\tif ( fieldToListenTo.type === 'select' && fieldToListenTo.attributes.supportsCustomValue ) {\n\t\t\t\t\tfieldToListenTo.customValueField.formElement.on( 'automator:field:change', debounce( ( event, context ) => {\n\t\t\t\t\t\tthis.setValue( '' );\n\t\t\t\t\t}, 1000 ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Validate field\n\t *\n\t * @since 0.4\n\t * @param {boolean} renderError - TRUE if you want to render the field errors, FALSE if you only want to return the response object\n\t * @return {validateField} validateField object. Read the comments on Validation.js to learn more\n\t */\n\n\tvalidate( renderError = true ) {\n\t\t// Parameters\n\n\t\t// Field (DOM)\n\t\tlet field = null,\n\t\t\tvalue;\n\n\t\tif ( renderError ) {\n\t\t\tfield = this.getFieldContainer();\n\t\t\tvalue = this.getValue();\n\t\t} else {\n\t\t\tvalue = this.attributes.currentValue;\n\t\t}\n\n\t\t// Type\n\t\tconst fieldType = this.type;\n\n\t\t// Attributes\n\t\tconst attributes = {\n\t\t\tsupportsTokens: this.attributes.supportsTokens,\n\t\t\trequired: this.attributes.isRequired\n\t\t};\n\n\t\t// Check if it's a textarea, and check if it supports full-page editing\n\t\tif ( this.type === 'textarea' ) {\n\t\t\tattributes.supportsFullPageEditing = this.attributes.supportsFullPageEditing;\n\t\t}\n\t\t\n\t\t// Check if it's an integer or float field and we have to validate max and min numbers\n\t\tif ( [ 'int', 'float' ].includes( this.type ) ) {\n\t\t\tif ( isDefined( this.attributes.minNumber ) ) {\n\t\t\t\tattributes.minNumber = this.attributes.minNumber;\n\t\t\t}\n\n\t\t\tif ( isDefined( this.attributes.maxNumber ) ) {\n\t\t\t\tattributes.maxNumber = this.attributes.maxNumber;\n\t\t\t}\n\t\t}\n\n\t\t// This uses the validateField function. Check Validation.js for more information\n\t\treturn validateField( field, this.type, value, attributes, this.customValidationFunction );\n\t}\n\n\t/**\n\t * Shows an error in the field\n\t * \n\t * @param {String} message The message to clear the error\n\t */\n\tsetError( message = '' ) {\n\t\t// Make sure there is a message defined\n\t\tif ( isEmpty( message ) ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Check if the field is defined\n\t\tif ( ! this.field ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Add error classes\n\t\tthis.$errorWrapper.innerHTML = message;\n\n\t\t// Add error class to the main wrapper\n\t\tthis.formElement.get(0).classList.add( 'form-element--error' );\n\t}\n\n\t/**\n\t * Removes the error from a field\n\t */\n\tclearError() {\n\t\t// Check if the field is defined\n\t\tif ( ! this.field ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove message\n\t\tthis.$errorWrapper.innerHTML = '';\n\n\t\t// Remove error class (hide error container too)\n\t\tthis.formElement.get(0).classList.remove( 'form-element--error' );\n\t}\n\n\t/**\n\t * Returns the container that shows the error message\n\t */\n\tget $errorWrapper() {\n\t\treturn this.formElement.get(0).querySelector( '.form-element__error' );\n\t}\n\n\t/**\n\t * Invoke functions on field change\n\t * Those functions are global for all the Field objects\n\t * Don't use directly, use 'automator:field:change' instead\n\t */\n\tonChange() {\n\t\tthis.formElement.on( 'automator:field:change', ( event, customData ) => {\n\t\t\t// Check if it's a select that supports custom values (and that option is selected)\n\t\t\t// console.log( this.attributes.label );\n\t\t\t// console.log( '>  Change (automator:field:change)' );\n\n\t\t\t// Check if it has a value\n\t\t\tif ( isDefined( this.fieldContainer ) ) {\n\t\t\t\tif ( ! isEmpty( this.getValue() ) ) {\n\t\t\t\t\tthis.fieldContainer.addClass( 'form-input--has-value' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.fieldContainer.removeClass( 'form-input--has-value' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( this.attributes.fieldType == 'select' && this.attributes.supportsCustomValue ) {\n\t\t\t\tif ( this.getValue() == 'automator_custom_value' ) {\n\t\t\t\t\t// Show custom field container\n\t\t\t\t\tthis.customValueFieldContainer.addClass( 'form-select-custom--visible' );\n\t\t\t\t} else {\n\t\t\t\t\t// Hide custom field container\n\t\t\t\t\tthis.customValueFieldContainer.removeClass( 'form-select-custom--visible' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst onChangeAJAXCallback = () => {\n\t\t\t\t// Check if it's an AJAX field\n\t\t\t\tif ( this.attributes.isAjax ) {\n\t\t\t\t\t// Check if the target field is different\n\t\t\t\t\tif ( this.attributes.targetField !== this.attributes.optionCode ) {\n\t\t\t\t\t\t// console.log( this.attributes.label );\n\t\t\t\t\t\t// console.log( '> AJAX (onChangeAJAXCallback)' );\n\n\t\t\t\t\t\tthis.doAJAX();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Check if it's a child field\n\t\t\t\tif ( isDefined( this.attributes.isChildField ) && this.attributes.isChildField ) {\n\t\t\t\t\t// Check if the option code of the parent is defined\n\t\t\t\t\tif ( isDefined( this.attributes.parentOptionCode ) ) {\n\t\t\t\t\t\t// Get the field\n\t\t\t\t\t\tconst parentField = getField( this.attributes.itemId, this.attributes.parentOptionCode );\n\n\t\t\t\t\t\t// Check if we found it\n\t\t\t\t\t\tif ( isDefined( parentField ) ) {\n\t\t\t\t\t\t\t// console.log( this.attributes.label + ' --> ' + parentField.attributes.label );\n\t\t\t\t\t\t\t// console.log( '> AJAX (onChangeAJAXCallback)' );\n\n\t\t\t\t\t\t\t// Do AJAX call on parent\n\t\t\t\t\t\t\tparentField.doAJAX();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Check if it's an AJAX field, has a target field\n\t\t\t// and the target field is different than the option code\n\t\t\tif (\n\t\t\t\t// Check if the field is ajax\n\t\t\t\tthis.attributes.isAjax &&\n\t\t\t\t// Check if there is a valid target field (Field instance)\n\t\t\t\tisDefined( this.attributes.targetField ) &&\n\t\t\t\t// Check if the ID of the target field is different that the\n\t\t\t\t// ID of the parent field\n\t\t\t\tthis.attributes.targetField !== this.attributes.optionCode &&\n\t\t\t\t// Check if the parent field completed the first load\n\t\t\t\t( this.attributes.completedFirstLoad ||\n\t\t\t\t\t// Otherwise, even if the first load wasn't completed,\n\t\t\t\t\t// check if the \"current value\" (value saved) on\n\t\t\t\t\t// the database is empty, or if it doesn't have a default value\n\t\t\t\t\t( isEmpty( this.attributes.currentValue ) &&\n\t\t\t\t\t\t! this.attributes.hasDefaultValue &&\n\t\t\t\t\t\t! this.attributes.completedFirstLoad ) )\n\t\t\t) {\n\t\t\t\t// Get the target field\n\t\t\t\tconst targetField = getField( this.attributes.itemId, this.attributes.targetField );\n\n\t\t\t\t// console.log( 'Reset value of ' + targetField.attributes.label );\n\n\t\t\t\t// Reset the value of the target field\n\t\t\t\tif ( ! targetField.attributes.supportsMultipleValues ) {\n\t\t\t\t\ttargetField.setValue( null, false );\n\t\t\t\t\ttargetField.setCustomValue( null, false );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if it's a dropdown, checkbox or radio\n\t\t\tif ( [ 'select', 'radio', 'checkbox' ].includes( this.attributes.fieldType ) ) {\n\t\t\t\t// Do it right away\n\t\t\t\tonChangeAJAXCallback();\n\t\t\t} else {\n\t\t\t\t// Check if the inverval exists, and clear it\n\t\t\t\tif ( isDefined( this.onChangeTimeout ) ) {\n\t\t\t\t\tclearTimeout( this.onChangeTimeout );\n\t\t\t\t}\n\n\t\t\t\t// Wait a few seconds before doing the change\n\t\t\t\tthis.onChangeTimeout = setTimeout( () => {\n\t\t\t\t\tonChangeAJAXCallback();\n\t\t\t\t}, 1500 );\n\t\t\t}\n\n\t\t\t// Return false to prevent bubbling in child fields\n\t\t\treturn false;\n\t\t} );\n\t}\n\n\t/**\n\t * Creates a copy of the field\n\t */\n\tclone() {\n\t\tconst newField = new Field(\n\t\t\tthis.type,\n\t\t\tthis.attributes,\n\t\t\tthis.createDOMelements,\n\t\t\tthis.customValidationFunction\n\t\t);\n\n\t\t// Get current value\n\t\tnewField.setValue( this.value, false );\n\n\t\t// Check if we have to set a custom value\n\t\tif ( isDefined( this.selectCustomValue ) ) {\n\t\t\tnewField.setCustomValue( this.selectCustomValue, false );\n\t\t}\n\t}\n\n\t/**\n\t * Invoke functions on field change\n\t * Those functions are global for all the Field objects\n\t * Don't use directly, use 'automator:field:change' instead\n\t */\n\n\tonFocus() {\n\t\tthis.field.on( 'focusin', ( event ) => {\n\t\t\t// Check if it's a read-only field\n\t\t\tif ( this.attributes.isReadOnly ) {\n\t\t\t\t// Select the text\n\t\t\t\t$( event.currentTarget ).select();\n\t\t\t}\n\t\t} );\n\n\t\tthis.field.on( 'focusout', () => {} );\n\t}\n\n\t/**\n\t * Check if the item's object has all the required properties\n\t *\n\t * @since 0.5\n\t */\n\n\tisReady() {\n\t\tlet ready = false;\n\n\t\tif ( isDefined( UncannyAutomator.recipe.items[ this.attributes.itemId ] ) ) {\n\t\t\tready = true;\n\t\t}\n\n\t\treturn ready;\n\t}\n\n\t/**\n\t * Do AJAX\n\t *\n\t * @since 0.5\n\t */\n\n\tdoAJAX() {\n\t\t// Get field value. If it isn't defined in the DOM then get the default value\n\t\tconst fieldValue = isDefined( this.getValue() ) ? this.getValue() : this.getMetaValue();\n\n\t\t// Check if we have to do an AJAX call on this field\n\t\tif ( this.attributes.isAjax ) {\n\t\t\t// Get the target field\n\t\t\tlet targetField = this;\n\n\t\t\tif ( this.attributes.optionCode != this.attributes.targetField ) {\n\t\t\t\ttargetField = getField( this.attributes.itemId, this.attributes.targetField );\n\t\t\t}\n\n\t\t\t// Check that we have everything\n\t\t\tif ( ! isEmpty( this.attributes.integrationId ) && ! isEmpty( this.attributes.endpoint ) ) {\n\t\t\t\t// Before doing the request, show a loading animation in the changed field\n\t\t\t\tthis.startLoadingAnimation();\n\t\t\t\t// And show animation in the target field too\n\t\t\t\ttargetField.startLoadingAnimation();\n\n\t\t\t\t// Get parent field value\n\t\t\t\tlet parentFieldValue = this.getValue(),\n\t\t\t\t\ttargetFieldValue = isDefined( targetField.getValue() )\n\t\t\t\t\t\t? targetField.getValue()\n\t\t\t\t\t\t: targetField.getMetaValue();\n\n\t\t\t\tAJAXRequest(\n\t\t\t\t\tthis.attributes.endpoint,\n\t\t\t\t\t{\n\t\t\t\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\t\t\t\tintegration_id: this.attributes.integrationId,\n\t\t\t\t\t\titem_id: this.attributes.itemId,\n\t\t\t\t\t\tgroup_id: this.attributes.groupId,\n\t\t\t\t\t\tfield_id: this.attributes.optionCode,\n\t\t\t\t\t\ttarget_field: this.attributes.targetField,\n\t\t\t\t\t\tvalue: parentFieldValue,\n\t\t\t\t\t\tvalues: getCurrentFieldsValues( { itemID: this.attributes.itemId, field: this } ),\n\t\t\t\t\t},\n\t\t\t\t\t( response ) => {\n\t\t\t\t\t\t// console.log( this.attributes.label );\n\t\t\t\t\t\t// console.log( '%c> AJAX completed', 'background: red; color: #fff;' );\n\n\t\t\t\t\t\t// Stop loading animation in both fields\n\t\t\t\t\t\tthis.stopLoadingAnimation();\n\t\t\t\t\t\ttargetField.stopLoadingAnimation();\n\n\t\t\t\t\t\tconst targetFieldAttributes = targetField.getAttributes();\n\n\t\t\t\t\t\t// console.table({\n\t\t\t\t\t\t// \tparentField:      this.getAttributes().optionCode,\n\t\t\t\t\t\t// \tparentFieldValue: parentFieldValue,\n\t\t\t\t\t\t// \ttargetField:      this.attributes.targetField,\n\t\t\t\t\t\t// \ttargetFieldValue: targetFieldValue\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// Check if the target field is a select and the response is an array\n\n\t\t\t\t\t\t// console.log( targetFieldAttributes.label );\n\t\t\t\t\t\t// console.log( '> Set options' );\n\n\t\t\t\t\t\tif ( targetFieldAttributes.fieldType == 'select' && Array.isArray( response ) ) {\n\t\t\t\t\t\t\t// Value of the target field before the call\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t// Check if the field is ajax\n\t\t\t\t\t\t\t\tthis.attributes.isAjax &&\n\t\t\t\t\t\t\t\t// Make sure it's not a multiselect\n\t\t\t\t\t\t\t\t( ! this.attributes.supportsMultipleValues ) &&\n\t\t\t\t\t\t\t\t// Check if there is a valid target field (Field instance)\n\t\t\t\t\t\t\t\tisDefined( this.attributes.targetField ) &&\n\t\t\t\t\t\t\t\t// Check if the ID of the target field is different that the\n\t\t\t\t\t\t\t\t// ID of the parent field\n\t\t\t\t\t\t\t\tthis.attributes.targetField !== this.attributes.optionCode &&\n\t\t\t\t\t\t\t\t// Check if the parent field completed the first load\n\t\t\t\t\t\t\t\t( this.attributes.completedFirstLoad ||\n\t\t\t\t\t\t\t\t\t// Otherwise, even if the first load wasn't completed,\n\t\t\t\t\t\t\t\t\t// check if the \"current value\" (value saved) on\n\t\t\t\t\t\t\t\t\t// the database is empty, or if it doesn't have a default value\n\t\t\t\t\t\t\t\t\t( isEmpty( this.attributes.currentValue ) &&\n\t\t\t\t\t\t\t\t\t\t! this.attributes.hasDefaultValue &&\n\t\t\t\t\t\t\t\t\t\t! this.attributes.completedFirstLoad ) )\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\ttargetFieldValue = null;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Set the current value as the target field value if it's empty\n\t\t\t\t\t\t\tif ( ! this.attributes.completedFirstLoad && isEmpty( targetFieldValue ) ) {\n\t\t\t\t\t\t\t\ttargetFieldValue = targetField.attributes.currentValue;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Check if the value of the target field is custom\n\t\t\t\t\t\t\tif ( targetFieldValue == 'automator_custom_value' ) {\n\t\t\t\t\t\t\t\t// Get the custom field value\n\t\t\t\t\t\t\t\tconst customFieldValue = targetField.getSelectCustomValue();\n\n\t\t\t\t\t\t\t\t// Check if the value of the custom field is NOT empty\n\t\t\t\t\t\t\t\tif ( ! isEmpty( customFieldValue ) ) {\n\t\t\t\t\t\t\t\t\t// Then use the custom value as the real value\n\t\t\t\t\t\t\t\t\ttargetFieldValue = customFieldValue;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Otherwise, don't use the custom value at all\n\t\t\t\t\t\t\t\t\ttargetFieldValue = null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// console.log( targetField.attributes.label );\n\t\t\t\t\t\t\t// console.log( '> Value: ' + targetFieldValue );\n\n\t\t\t\t\t\t\t// The developer wants to set new options for a select\n\t\t\t\t\t\t\t// Don't trigger change (even though select2 needs it),\n\t\t\t\t\t\t\t// we're going to trigger it later\n\t\t\t\t\t\t\ttargetField.setSelectOptions( response, false );\n\n\t\t\t\t\t\t\t// console.log( targetField.attributes.label + ' (by ' + this.attributes.label + ')' );\n\t\t\t\t\t\t\t// console.log( '> Set: ' + targetFieldValue );\n\n\t\t\t\t\t\t\t// Set the value again\n\t\t\t\t\t\t\ttargetField.setValue( targetFieldValue );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Try to set the value\n\t\t\t\t\t\t\ttargetField.setValue( response );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Update the \"completed first load\" status\n\t\t\t\t\t\tthis.attributes.completedFirstLoad = true;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get form element\n\t *\n\t * @since 0.4\n\t * @return {object} jQuery object of the field's container\n\t */\n\n\tgetFormElement() {\n\t\tif ( [ 'trigger', 'action', 'closure' ].includes( this.attributes.itemType ) && this.isReady() ) {\n\t\t\t// Reset the \"first load\" status\n\t\t\tthis.attributes.completedFirstLoad = false;\n\n\t\t\tif (\n\t\t\t\tisDefined( this.attributes.ajax ) && \n\t\t\t\tisDefined( this.attributes.ajax.firstLoadDone )\n\t\t\t) {\n\t\t\t\tthis.attributes.ajax.firstLoadDone = false;\n\t\t\t}\n\n\t\t\t// Do the AJAX call only if it's not a child field\n\t\t\t// Otherwise, we will just wait for the AJAX call\n\t\t\t// of the parent field to end. That will trigger an\n\t\t\t// AJAX call in the child field.\n\t\t\tlet isTargetField = false;\n\n\t\t\ttry {\n\t\t\t\t// Get group of options\n\t\t\t\tconst fields =\n\t\t\t\t\tUncannyAutomator.recipe.items[ this.attributes.itemId ].options[ this.attributes.groupId ].fields;\n\n\t\t\t\t// Determine if it's a target field\n\t\t\t\tisTargetField = fields.reduce( ( accumulator, field ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\taccumulator ||\n\t\t\t\t\t\t// Check if this field is the target field of another field\n\t\t\t\t\t\t( field.attributes.targetField == this.attributes.optionCode &&\n\t\t\t\t\t\t\t// But it's not the field itself\n\t\t\t\t\t\t\tfield.attributes.optionCode != this.attributes.optionCode &&\n\t\t\t\t\t\t\t// And it's AJAX\n\t\t\t\t\t\t\tfield.attributes.isAjax )\n\t\t\t\t\t);\n\t\t\t\t}, false );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Continue regardless of error\n\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t// console.warn( e );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! isTargetField ) {\n\t\t\t\t// console.log( this.attributes.label );\n\t\t\t\t// console.log( '> AJAX (getFormElement)' );\n\n\t\t\t\t// Check if the field AJAX, and it's both the parent and target\n\t\t\t\tif ( this.attributes.targetField == this.attributes.optionCode && this.attributes.isAjax ) {\n\t\t\t\t\tthis.doAJAX();\n\t\t\t\t}\n\n\t\t\t\tthis.field.trigger( 'automator:field:change', {\n\t\t\t\t\tsource: 'getFormElement',\n\t\t\t\t\tmanuallySet: false,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn this.formElement;\n\t}\n\n\tget $wrapper() {\n\t\treturn this.getFormElement();\n\t} \n\n\t/**\n\t * Get field container\n\t *\n\t * @since 0.4\n\t * @return {object} jQuery object of the field's container\n\t */\n\n\tgetFieldContainer() {\n\t\treturn this.fieldContainer;\n\t}\n\n\t/**\n\t * Get field ID\n\t *\n\t * @since 0.5\n\t * @return {string} The field ID\n\t */\n\n\tgetFieldID() {\n\t\treturn this.attributes.optionCode;\n\t}\n\n\t/**\n\t * Returns the field ID\n\t * @return {String} The field ID\n\t */\n\tget id() {\n\t\treturn this.getFieldID();\n\t}\n\n\tget $ajaxRefreshBtn() {\n\t\treturn this.formElement.get(0).querySelector( '.form-element-ajax-refresh-btn' );\n\t}\n\n\t/**\n\t * Get field\n\t *\n\t * @since 0.4\n\t * @return {object} jQuery object of the field\n\t */\n\n\tgetField() {\n\t\treturn this.field;\n\t}\n\n\tgetFieldCM() {\n\t\treturn this.$fakeCodemirrorField;\n\t}\n\n\t/**\n\t * Get attributes\n\t *\n\t * @since 0.5\n\t * @return {object} Field attributes\n\t */\n\n\tgetAttributes() {\n\t\treturn this.attributes;\n\t}\n\n\t/**\n\t * Get field's value FROM THE DOM ELEMENT\n\t * If you want to get the value from the main object then check {attributes.currentValue}\n\t *\n\t * @since 0.4\n\t * @return {string|int} Value of the field\n\t */\n\n\tgetValue() {\n\t\tlet response = null;\n\n\t\tif ( isDefined( this.field ) ) {\n\t\t\tswitch ( this.type ) {\n\t\t\t\tcase 'select':\n\t\t\t\t\tif (\n\t\t\t\t\t\t// This means it's AJAX, and that the select doesn't have all its options yet\n\t\t\t\t\t\t// We must get the value from the meta\n\t\t\t\t\t\tisDefined( this.attributes.ajax ) && \n\t\t\t\t\t\t! this.attributes.ajax.firstLoadDone\n\t\t\t\t\t) {\n\t\t\t\t\t\tresponse = this.valueFromMeta;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresponse = this.field.val();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'float':\n\t\t\t\t\tresponse = this.field.val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'textarea':\n\t\t\t\t\t// Check if it has a token selector\n\t\t\t\t\tif ( isDefined( this.TokenSelector ) ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tthis.TokenSelector.parseHTMLTokensInPlainTextarea();\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse = this.field.val();\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Check if TinyMCE is enabled\n\t\t\t\t\t\tif ( isDefined( this.fieldTinyMCE ) && ! this.fieldTinyMCE.hidden ) {\n\t\t\t\t\t\t\t// Get the value from the TinyMCE field instead\n\t\t\t\t\t\t\tresponse = this.fieldTinyMCE.getContent( {\n\t\t\t\t\t\t\t\tformat: 'raw',\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch ( e ) {}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tresponse = this.field.is( ':checked' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\tresponse = this.field.find( 'input:checked' ).val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'date':\n\t\t\t\t\tresponse = this.field.val();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'time':\n\t\t\t\t\tresponse = this.field.val();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! isDefined( response ) ) {\n\t\t\tresponse = this.valueFromMeta;\n\t\t}\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * Returns the field value\n\t * \n\t * @return {String} The field value\n\t */\n\tget value() {\n\t\treturn this.getValue();\n\t}\n\n\t/**\n\t * Returns the value from the meta\n\t */\n\tget valueFromMeta() {\n\t\tlet value = null;\n\n\t\t// Check if the field has a value and add it\n\t\tif ( this.attributes.hasValue ) {\n\t\t\t// Return that value\n\t\t\tvalue = this.attributes.currentValue;\n\t\t} else if ( this.attributes.hasDefaultValue ) {\n\t\t\t// Return the default value\n\t\t\tvalue = this.attributes.defaultValue;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Get readable value\n\t *\n\t * @since 0.6\n\t * @return string with the value\n\t */\n\tgetReadableValue() {\n\t\tlet response = null,\n\t\t\tvalue = this.getValue();\n\n\t\tswitch ( this.type ) {\n\t\t\tcase 'select':\n\t\t\t\t// Check if the field DOM element is defined\n\t\t\t\tif ( isDefined( this.field ) ) {\n\t\t\t\t\t// Check if it supports multiple values, and the value is an array\n\t\t\t\t\tif ( this.attributes.supportsMultipleValues && Array.isArray( value ) ) {\n\t\t\t\t\t\tconst optionsText = '';\n\n\t\t\t\t\t\tresponse = value\n\t\t\t\t\t\t\t.map( ( optionValue ) => {\n\t\t\t\t\t\t\t\treturn this.field.find( `option[value=\"${ optionValue }\"]` ).text();\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t.join( `${ UncannyAutomator.i18n.itemSeparator } ` );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresponse = this.field.find( `option[value=\"${ value }\"]` ).text();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Check if it supports multiple values, and the value is an array\n\t\t\t\t\tif ( this.attributes.supportsMultipleValues && $.isArray( value ) ) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst optionsText = '';\n\n\t\t\t\t\t\t\tresponse = value\n\t\t\t\t\t\t\t\t.map( ( optionValue ) => {\n\t\t\t\t\t\t\t\t\treturn this.getSelectOptionByValue( optionValue ).text;\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t.join( `${ UncannyAutomator.i18n.itemSeparator } ` );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Get option from the options array\n\t\t\t\t\t\t\tresponse = this.getSelectOptionByValue( value ).text;\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t// console.warn( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'text':\n\t\t\tcase 'url':\n\t\t\tcase 'email':\n\t\t\tcase 'int':\n\t\t\tcase 'float':\n\t\t\tcase 'textarea':\n\t\t\t\t// Create DOM element to remove the HTML tags\n\t\t\t\tvalue = $( '<p/>' ).html( value ).text();\n\t\t\t\tbreak;\n\n\t\t\tcase 'checkbox':\n\t\t\t\tif ( value ) {\n\t\t\t\t\tresponse = UncannyAutomator.i18n.trueLabel;\n\t\t\t\t} else {\n\t\t\t\t\tresponse = UncannyAutomator.i18n.falseLabel;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'radio':\n\t\t\t\t// Check if the field DOM element is defined\n\t\t\t\tif ( isDefined( this.field ) ) {\n\t\t\t\t\t// Get checked radio\n\t\t\t\t\tconst $checkedRadio = this.field.find( 'input:checked' );\n\n\t\t\t\t\t// Check if there is a checked radio\n\t\t\t\t\tif ( $checkedRadio.length == 1 ) {\n\t\t\t\t\t\t// Get container\n\t\t\t\t\t\tconst $radioContainer = $checkedRadio.closest( '.form-radio__container' );\n\n\t\t\t\t\t\t// Get text\n\t\t\t\t\t\tresponse = $radioContainer.text().trim();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Get option from the options array\n\t\t\t\t\t\tresponse = this.getSelectOptionByValue( value ).text;\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'date':\n\t\t\t\t// Create DOM element to remove the HTML tags\n\t\t\t\tvalue = $( '<p/>' ).html( value ).text();\n\t\t\t\tbreak;\n\n\t\t\tcase 'time':\n\t\t\t\t// Create DOM element to remove the HTML tags\n\t\t\t\tvalue = $( '<p/>' ).html( value ).text();\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * Returns the readable value\n\t * \n\t * @return {String} The readable value\n\t */\n\tget readableValue() {\n\t\treturn this.getReadableValue();\n\t}\n\n\t/**\n\t * Get the custom value of a select (if there is one)\n\t *\n\t * @since 2.5\n\t * @return string, with the value\n\t */\n\tgetSelectCustomValue() {\n\t\t// Default response\n\t\tlet fieldValue = null;\n\n\t\t// Check if it's a select\n\t\tif (\n\t\t\tthis.attributes.fieldType == 'select' &&\n\t\t\tthis.attributes.supportsCustomValue &&\n\t\t\tthis.getValue() == 'automator_custom_value'\n\t\t) {\n\t\t\t// Check if the child field was created\n\t\t\tif ( isDefined( this.customValueField ) ) {\n\t\t\t\tfieldValue = this.customValueField.getValue();\n\t\t\t} else {\n\t\t\t\t// Try to get it from the meta\n\t\t\t\ttry {\n\t\t\t\t\tfieldValue =\n\t\t\t\t\t\tUncannyAutomator.recipe.items[ this.attributes.itemId ].meta[\n\t\t\t\t\t\t\t`${ this.attributes.optionCode }_custom`\n\t\t\t\t\t\t];\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn fieldValue;\n\t}\n\n\tget selectCustomValue() {\n\t\t// Check if it's a select\n\t\tif ( ! this.type === 'select' ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.getSelectCustomValue();\n\t}\n\n\t/**\n\t * Return the field label\n\t */\n\tget label() {\n\t\treturn this.attributes.label;\n\t}\n\n\t/**\n\t * Get a select option by option value\n\t *\n\t * @param  value\n\t * @since 2.5\n\t * @return array\n\t */\n\tgetSelectOptionByValue( value = '' ) {\n\t\tlet option = null;\n\n\t\t// Get the field options\n\t\tconst options = this.attributes.options;\n\n\t\t// Check if it supports a custom value\n\t\tif ( this.attributes.supportsCustomValue ) {\n\t\t\toptions.push( {\n\t\t\t\tvalue: 'automator_custom_value',\n\t\t\t\ttext: UncannyAutomator.i18n.validation.field.select.customValue,\n\t\t\t} );\n\t\t}\n\n\t\t// Check if the options are defined\n\t\tif ( ! isEmpty( options ) ) {\n\t\t\t// Iterate options and find the value\n\t\t\toptions.forEach( ( selectOption ) => {\n\t\t\t\t// Compare the option value with the value parameter\n\t\t\t\tif ( value == selectOption.value ) {\n\t\t\t\t\toption = selectOption;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn option;\n\t}\n\n\t/**\n\t * Get field's meta value\n\t *\n\t * @since 0.5\n\t * @return {string|int} Value of the field\n\t */\n\n\tgetMetaValue() {\n\t\tlet response;\n\n\t\t// If the item is defined\n\t\tif ( isDefined( UncannyAutomator.recipe.items[ this.attributes.itemId ] ) ) {\n\t\t\tconst metaValue =\n\t\t\t\tUncannyAutomator.recipe.items[ this.attributes.itemId ].meta[ this.attributes.optionCode ];\n\n\t\t\tif ( isDefined( metaValue ) ) {\n\t\t\t\tresponse = metaValue;\n\t\t\t}\n\t\t}\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * Set value\n\t *\n\t * @since 0.4\n\t * @param {string} Value of the field\n\t */\n\n\tsetValue( value, doTrigger = true, options = { updateCodemirror: true } ) {\n\t\t// console.log( this.attributes.label );\n\t\t// console.log( '> setValue: ' + value );\n\n\t\tif ( isDefined( this.field ) ) {\n\t\t\tswitch ( this.type ) {\n\t\t\t\tcase 'select':\n\t\t\t\t\t// Sanitize the value\n\t\t\t\t\tif ( ! isDefined( value ) ) {\n\t\t\t\t\t\tif ( this.attributes.supportsMultipleValues ) {\n\t\t\t\t\t\t\tvalue = [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalue = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get all options\n\t\t\t\t\tconst allOptions = this.field.find( 'option' );\n\n\t\t\t\t\tif ( this.attributes.supportsMultipleValues ) {\n\t\t\t\t\t\t// Unselect all the options\n\t\t\t\t\t\tallOptions.prop( 'selected', false );\n\n\t\t\t\t\t\t// Iterate the selected options\n\t\t\t\t\t\tif ( $.isArray( value ) && ! isEmpty( value ) ) {\n\t\t\t\t\t\t\t// Iterate the values\n\t\t\t\t\t\t\tvalue.forEach( ( optionID ) => {\n\t\t\t\t\t\t\t\t// Get option\n\t\t\t\t\t\t\t\tconst option = this.field.find( `option[value=\"${ optionID }\"]` );\n\n\t\t\t\t\t\t\t\t// Check if option exists\n\t\t\t\t\t\t\t\tif ( option.length > 0 ) {\n\t\t\t\t\t\t\t\t\t// Select option\n\t\t\t\t\t\t\t\t\toption.prop( 'selected', true );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t// Trigger change\n\t\t\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\t\t\tthis.field.trigger( 'change', {\n\t\t\t\t\t\t\t\t\tmanuallySet: false,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Get option\n\t\t\t\t\t\tconst option = this.field.find( `option[value=\"${ value }\"]` );\n\n\t\t\t\t\t\t// Check if option exists\n\t\t\t\t\t\tif ( option.length > 0 ) {\n\t\t\t\t\t\t\t// Unselect all the options\n\t\t\t\t\t\t\tallOptions.prop( 'selected', false );\n\n\t\t\t\t\t\t\t// Select option\n\t\t\t\t\t\t\toption.prop( 'selected', true );\n\n\t\t\t\t\t\t\t// Trigger change\n\t\t\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\t\t\tthis.field.trigger( 'change', {\n\t\t\t\t\t\t\t\t\tmanuallySet: false,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Unselect all the options\n\t\t\t\t\t\t\tallOptions.prop( 'selected', false );\n\n\t\t\t\t\t\t\t// Check if the field supports custom options\n\t\t\t\t\t\t\tif ( this.attributes.supportsCustomValue && ! isEmpty( value ) ) {\n\t\t\t\t\t\t\t\t// Set the value as a custom option\n\t\t\t\t\t\t\t\tthis.setCustomValue( value, false );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Trigger change\n\t\t\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\t\t\tthis.field.trigger( 'change', {\n\t\t\t\t\t\t\t\t\tmanuallySet: false,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'float':\n\t\t\t\t\t// Check if we should try to update the CodeMirror field\n\t\t\t\t\tif (\n\t\t\t\t\t\tisDefined( options.updateCodemirror ) &&\n\t\t\t\t\t\toptions.updateCodemirror &&\n\t\t\t\t\t\tisDefined( this.fieldCM )\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Try to set the value\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// console.log( 'Set the value in Codemirror' );\n\t\t\t\t\t\t\t// Set value using CodeMirror's method\n\t\t\t\t\t\t\t// this will copy the value in the real field\n\t\t\t\t\t\t\tthis.fieldCM.setValue( value );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// console.log( 'Set the value in the real field FALLBACK' );\n\t\t\t\t\t\t\t// Fallback. Set the value in the real field\n\t\t\t\t\t\t\tthis.field.val( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// console.log( 'Set the value in the real field' );\n\t\t\t\t\t\t// Set value\n\t\t\t\t\t\tthis.field.val( value );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Trigger change\n\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\tthis.field.trigger( 'automator:field:change' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'textarea':\n\t\t\t\t\t// Set the value\n\t\t\t\t\tthis.field.val( value );\n\n\t\t\t\t\t// Set the value in the TinyMCE editor too\n\t\t\t\t\tif ( isDefined( this.fieldTinyMCE ) ) {\n\t\t\t\t\t\tthis.fieldTinyMCE.setContent( value );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Check if we should try to update the CodeMirror field\n\t\t\t\t\tif (\n\t\t\t\t\t\tisDefined( options.updateCodemirror ) &&\n\t\t\t\t\t\toptions.updateCodemirror &&\n\t\t\t\t\t\tisDefined( this.fieldCM )\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Try to set the value\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// console.log( 'Set the value in Codemirror' );\n\t\t\t\t\t\t\t// Set value using CodeMirror's method\n\t\t\t\t\t\t\t// this will copy the value in the real field\n\t\t\t\t\t\t\tthis.fieldCM.setValue( value );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// console.log( 'Set the value in the real field FALLBACK' );\n\t\t\t\t\t\t\t// Fallback. Set the value in the real field\n\t\t\t\t\t\t\tthis.field.val( value );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// console.log( 'Set the value in the real field' );\n\t\t\t\t\t\t// Set value\n\t\t\t\t\t\tthis.field.val( value );\n\t\t\t\t\t}\n\n\t\t\t\t\t/*\n\t\t\t\t\t// Check if \"Text\" view is selected\n\t\t\t\t\tif ( this.field.is( ':visible' ) ){\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Insert token\n\t\t\t\t\t\tthis.editor.execCommand( 'mceInsertContent', false, token );\n\t\t\t\t\t}\n\n\n\n\t\t\t\t\t// Set value\n\t\t\t\t\tthis.field.val( value );*/\n\n\t\t\t\t\t// Trigger change\n\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\tthis.field.trigger( 'automator:field:change' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tconst wantsToCheck = value, // Just for readability\n\t\t\t\t\t\tisChecked = this.getValue();\n\n\t\t\t\t\t// If true, check\n\t\t\t\t\tif ( wantsToCheck && ! isChecked ) {\n\t\t\t\t\t\tthis.field.prop( 'checked', true );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! wantsToCheck && isChecked ) {\n\t\t\t\t\t\tthis.field.prop( 'checked', false );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( doTrigger && ( ( wantsToCheck && ! isChecked ) || ( ! wantsToCheck && isChecked ) ) ) {\n\t\t\t\t\t\t// Trigger change\n\t\t\t\t\t\tthis.field.trigger( 'automator:field:change' );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\t// Search for the radio and check it\n\t\t\t\t\tthis.field.filter( `[name=\"${ value }\"]` ).prop( 'checked', true );\n\n\t\t\t\t\t// Trigger change\n\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\t// Trigger change\n\t\t\t\t\t\tthis.field.trigger( 'automator:field:change' );\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'date':\n\t\t\t\t\t// Set value\n\t\t\t\t\tthis.field.val( value );\n\n\t\t\t\t\t// Trigger change\n\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\tthis.field.trigger( 'automator:field:change' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'time':\n\t\t\t\t\t// Set value\n\t\t\t\t\tthis.field.val( value );\n\n\t\t\t\t\t// Trigger change\n\t\t\t\t\tif ( doTrigger ) {\n\t\t\t\t\t\tthis.field.trigger( 'automator:field:change' );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Clear the value\n\t *\n\t * @since 3.0\n\t */\n\n\tclearValue() {\n\t\t// Set an empty value\n\t\tthis.setValue( '', true );\n\n\t\t// Clear the value in the Codemirror instance\n\t\ttry {\n\t\t\tthis.fieldCM.setValue( '' );\n\t\t} catch ( e ) {\n\t\t\t// Continue regardless of error\n\n\t\t\t// Output error if the developer mode is enabled\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.warn( e );\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's a date or time field\n\t\tif ( [ 'date', 'time' ].includes( this.attributes.fieldType ) ) {\n\t\t\t// Try to clear the flatpickr value\n\t\t\ttry {\n\t\t\t\tthis.flatpickrInstance.clear();\n\t\t\t} catch ( e ) {\n\t\t\t\t// Continue regardless of error\n\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Set value of the custom value\n\t *\n\t * @since 2.8.2\n\t */\n\n\tsetCustomValue( value, doTrigger = true ) {\n\t\t// console.log( this.attributes.label );\n\t\t// console.log( '> setCustomValue: ' + value );\n\n\t\t// Check if it's a select and has a customField defined,\n\t\t// if so, add it\n\t\tif ( this.attributes.fieldType == 'select' && isDefined( this.customValueField ) ) {\n\t\t\t// First, select the custom option\n\t\t\tthis.field.val( 'automator_custom_value' );\n\n\t\t\t// Set the value in the custom value field\n\t\t\tthis.customValueField.setValue( value, doTrigger );\n\n\t\t\t// Check if the user wants to trigger the change event\n\t\t\tif ( doTrigger ) {\n\t\t\t\tthis.field.trigger( 'change', {\n\t\t\t\t\tmanuallySet: false,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Check if a select has a selected option\n\t *\n\t * @since 0.5\n\t */\n\n\thasSelectedOption() {\n\t\treturn this.selectHasSelectedOption;\n\t}\n\n\t/**\n\t * Set select options\n\t *\n\t * @since 0.5\n\t * @param {array}\n\t */\n\n\tsetSelectOptions( options, triggerChange = true ) {\n\t\t// Remove current options\n\t\tthis.removeSelectOptions();\n\n\t\t// Sanitize the select options\n\t\ttry {\n\t\t\toptions = options.filter( ( option ) => {\n\t\t\t\treturn isDefined( option.value ) && isDefined( option.text );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\t// Continue regardless of error\n\n\t\t\t// Output error if the developer mode is enabled\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.warn( e );\n\t\t\t}\n\t\t}\n\n\t\tif ( isDefined( this.field ) ) {\n\t\t\t// Get the container where we're going to add the options\n\t\t\tconst $optionsContainer = this.field.find( '.form-element__select-normal-options' );\n\n\t\t\tif ( options.length > 0 ) {\n\t\t\t\t// Remove disabled\n\t\t\t\tthis.field.prop( 'disabled', false );\n\n\t\t\t\t// Get value\n\t\t\t\tconst value = isDefined( this.getValue() ) ? this.getValue() : this.getMetaValue();\n\n\t\t\t\t// Create array to save all options\n\t\t\t\tconst optionsDOM = [];\n\n\t\t\t\t// Create and append options\n\t\t\t\t$.each( options, ( index, option ) => {\n\t\t\t\t\tconst optionDOM = new Option( option.text, option.value, false, false );\n\n\t\t\t\t\t$optionsContainer.append( optionDOM );\n\t\t\t\t\toptionsDOM.push( optionDOM );\n\t\t\t\t} );\n\n\t\t\t\tif ( ! isEmpty( value ) ) {\n\t\t\t\t\t$.each( this.field.find( 'option' ), ( index, option ) => {\n\t\t\t\t\t\tif ( option.value == value ) {\n\t\t\t\t\t\t\t$( option ).prop( 'selected', true );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst $noResults = $(\n\t\t\t\t\tnew Option(\n\t\t\t\t\t\tUncannyAutomator.i18n.noResults,\n\t\t\t\t\t\t'',\n\t\t\t\t\t\t! this.attributes.supportsCustomValue,\n\t\t\t\t\t\t! this.attributes.supportsCustomValue\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\t$noResults.prop( 'disabled', true );\n\n\t\t\t\t$optionsContainer.append( $noResults );\n\n\t\t\t\tif ( ! this.attributes.supportsCustomValue ) {\n\t\t\t\t\t// Disable the select\n\t\t\t\t\tthis.field.prop( 'disabled', true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( triggerChange ) {\n\t\t\t\tthis.field.trigger( 'change' );\n\t\t\t\t// this.field.trigger( 'automator:field:change' );\n\t\t\t}\n\n\t\t\t// Render this select2 again\n\t\t\tthis.rerenderSelect2();\n\t\t}\n\t}\n\n\t/**\n\t * Remove select options\n\t *\n\t * @since 0.5\n\t */\n\n\tremoveSelectOptions() {\n\t\tif ( isDefined( this.field ) ) {\n\t\t\tthis.field.find( '.form-element__select-normal-options' ).empty();\n\t\t}\n\t}\n\n\t/**\n\t * Check if field has loading animation\n\t *\n\t * @since 0.4\n\t * @return {boolean} TRUE if the field has the loading animation\n\t */\n\n\tisLoading() {\n\t\treturn this.formElement.hasClass( 'form-element--loading' );\n\t}\n\n\t/**\n\t * Add loading animation to field\n\t *\n\t * @since 0.4\n\t */\n\n\tstartLoadingAnimation() {\n\t\t// Check if has class\n\t\tconst CSSclass = 'form-element--loading';\n\n\t\tif ( isDefined( this.formElement ) && ! this.formElement.hasClass( CSSclass ) ) {\n\t\t\t// Add class\n\t\t\tthis.formElement.addClass( CSSclass );\n\n\t\t\t// Check if it's a checkbox\n\t\t\tif ( this.type == 'checkbox' && ! isDefined( this.attributes.isToggle ) ) {\n\t\t\t\tthis.fieldContainer.addClass( 'form-checkbox--loading-inline' );\n\t\t\t}\n\n\t\t\t// Trigger\n\t\t\tthis.formElement.trigger( 'automator:field:loading' );\n\t\t}\n\t}\n\n\t/**\n\t * Remove loading animation to field\n\t *\n\t * @since 0.4\n\t */\n\n\tstopLoadingAnimation() {\n\t\t// Check if has class\n\t\tconst CSSclass = 'form-element--loading';\n\n\t\tif ( isDefined( this.formElement ) && this.formElement.hasClass( CSSclass ) ) {\n\t\t\t// Remove class\n\t\t\tthis.formElement.removeClass( CSSclass );\n\n\t\t\t// Remove checkbox class\n\t\t\tthis.fieldContainer.removeClass( 'form-checkbox--loading-inline' );\n\n\t\t\t// Trigger\n\t\t\tthis.formElement.trigger( 'automator:field:loading' );\n\t\t}\n\t}\n\n\t/**\n\t * Init field libraries, like Select2\n\t *\n\t * @since 0.5\n\t */\n\n\tinitLibraries() {\n\t\tswitch ( this.type ) {\n\t\t\tcase 'select':\n\t\t\t\t// Select2\n\t\t\t\tthis.initSelect2( this.field );\n\t\t\t\tbreak;\n\n\t\t\tcase 'text':\n\t\t\tcase 'url':\n\t\t\tcase 'email':\n\t\t\tcase 'int':\n\t\t\tcase 'float':\n\t\t\tcase 'textarea':\n\t\t\t\tbreak;\n\n\t\t\tcase 'date':\n\t\t\tcase 'time':\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Creates the object that select2 expects to render the options after receiving them from an AJAX call\n\t * @param {Array} options The select options\n\t */\n\tparseSelect2Response( options = [] ) {\n\t\tconst groups = [];\n\n\t\t// Add the normal options\n\t\tconst normalOptions = [];\n\t\toptions.forEach( option => normalOptions.push( {\n\t\t\tid: isDefined( option.id ) ? option.id : option.value,\n\t\t\ttext: option.text\n\t\t} ) );\n\n\t\t// Create the group of options\n\t\tgroups.push( {\n\t\t\ttext: '',\n\t\t\tchildren: normalOptions\n\t\t} );\n\n\t\t// Check if we should add the \"Custom value\" option\n\t\tif ( this.attributes.supportsCustomValue ) {\n\t\t\tgroups.push( {\n\t\t\t\ttext: UncannyAutomator.i18n.validation.field.select.otherOptions,\n\t\t\t\tchildren: [ {\n\t\t\t\t\tid: 'automator_custom_value',\n\t\t\t\t\ttext: UncannyAutomator.i18n.validation.field.select.customValue\n\t\t\t\t} ]\n\t\t\t} );\n\t\t}\n\n\t\treturn {\n\t\t\tresults: groups\n\t\t};\n\t}\n\n\t/**\n\t * Select\n\t * Get the select2 settings\n\t *\n\t * @since 2.7.3\n\t */\n\n\tgetSelect2Settings() {\n\t\t// Create function to render the options\n\t\tconst renderHandler = ( data ) => {\n\t\t\tlet template = data.text;\n\n\t\t\t// Check if the ID is defined\n\t\t\tif (\n\t\t\t\t// Make sure the ID is not empty\n\t\t\t\t! isEmpty( data.id ) &&\n\t\t\t\t// Check if we should show the ID\n\t\t\t\tthis.attributes.optionsShowID && \n\t\t\t\t// Make sure it's not the \"Custom value\" option\n\t\t\t\t( data.id !== 'automator_custom_value' && data.id != '-1' )\n\t\t\t) {\n\t\t\t\tconst optionID = `${ data.id }`;\n\n\t\t\t\t// Check if it's a long ID\n\t\t\t\tconst hasLongID = optionID.length > 10;\n\n\t\t\t\t// Add ID\n\t\t\t\ttemplate = `<span class=\"uap-select2-item__meta ${ hasLongID ? 'uap-select2-item__meta--long' : '' }\">(${ sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.postIDPlaceholder,\n\t\t\t\t\toptionID.replace( '-objectkey', '' )\n\t\t\t\t) })</span> ${ template }`;\n\t\t\t}\n\n\t\t\treturn template;\n\t\t};\n\n\t\t// Define select2 settings\n\t\tconst settings = {\n\t\t\ttheme: 'uap-select2',\n\t\t\tlanguage: {\n\t\t\t\tnoResults: function() {\n\t\t\t\t\treturn UncannyAutomator.i18n.noResults;\n\t\t\t\t},\n\t\t\t},\n\t\t\ttemplateResult: renderHandler,\n\t\t\ttemplateSelection: renderHandler,\n\t\t\tescapeMarkup: function( markUp ) {\n\t\t\t\treturn markUp;\n\t\t\t},\n\t\t};\n\n\t\t// Check if we have to load the options using the search field\n\t\tif ( \n\t\t\tisDefined( this.attributes.ajax ) && \n\t\t\tisDefined( this.attributes.ajax.event ) && \n\t\t\tisDefined( this.attributes.ajax.endpoint ) && \n\t\t\tthis.attributes.ajax.event === 'search_options'\n\t\t) {\n\t\t\t// We'll use this to add the selected value, if it's not custom\n\t\t\tconst defaultResults = this.parseSelect2Response( [] );\n\n\t\t\tsettings.searchInputPlaceholder = UncannyAutomator.i18n.search;\n\n\t\t\tsettings.ajax = {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: ajaxurl,\n\n\t\t\t\tcache: true,\n\t\t\t\tdelay: 250,\n\t\t\t\t\n\t\t\t\tdata: ( params ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...{\n\t\t\t\t\t\t\taction: this.attributes.ajax.endpoint,\n\t\t\t\t\t\t\tnonce: UncannyAutomator.nonce,\n\n\t\t\t\t\t\t\tq: params.term,\n        \t\t\t\t\t// page: params.page || 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...this.getAjaxRequestData( {\n\t\t\t\t\t\t\tfieldToListenToCode: this.attributes.optionCode\n\t\t\t\t\t\t} )\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tprocessResults: ( response, params ) => {\n\t\t\t\t\t// Check if this is coming from the data adapter\n\t\t\t\t\tif ( isDefined( response.results ) && ! isDefined( response.success ) ) {\n\t\t\t\t\t\treturn this.parseSelect2Response( response.results );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the call was successful\n\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\treturn this.parseSelect2Response( [] );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the required data is defined\n\t\t\t\t\tif ( isEmpty( response.options ) || ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\treturn this.parseSelect2Response( [] );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Transforms the top-level key of the response object from 'items' to 'results'\n\t\t\t\t\treturn this.parseSelect2Response( response.options ); // Add pagination here if required\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsettings.dataAdapter    = $.fn.select2.amd.require( 'select2/data/extended-ajax' );\n\t\t\tsettings.defaultResults = defaultResults;\n\t\t}\n\n\t\t// Check if we have to add a placeholder\n\t\tif ( this.attributes.hasPlaceholder ) {\n\t\t\t// Add placeholder\n\t\t\tsettings.placeholder = this.attributes.placeholder;\n\t\t}\n\n\t\t// Check if we don't need the search field\n\t\tif ( this.attributes.customClass ) {\n\t\t\tsettings.customClass = this.attributes.customClass;\n\t\t}\n\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Init Select2\n\t *\n\t * @since 0.5\n\t */\n\n\tinitSelect2( $field ) {\n\t\tconst settings = this.getSelect2Settings();\n\n\t\tif ( ! $field.hasClass( 'select2-hidden-accessible' ) ) {\n\t\t\t$field.select2( settings );\n\n\t\t\t$field.on( 'select2:open.uap-select-focus', () => {\n\t\t\t\tdocument.querySelector( '.select2-search__field' ).focus();\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Init Flatpickr\n\t * Check https://flatpickr.js.org/options/\n\t */\n\tinitFlatpickr() {\n\t\t// Check if the field exists\n\t\tif ( ! isDefined( this.field ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $field = this.field;\n\n\t\t// Check if it's a date field\n\t\tif ( ! [ 'date', 'time' ].includes( this.type ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the we already created the instance before\n\t\tthis.destroyFlatPickr();\n\n\t\t// Create a global element to add the calendar node\n\t\tif ( ! isDefined( document.getElementById( 'uap-flatpickr-calendar' ) ) ) {\n\t\t\t$( 'body' ).append( $( `<div id=\"uap-flatpickr-calendar\" class=\"uap uap-flatpickr-calendar\"></div>` ) );\n\t\t}\n\t\tconst container = document.getElementById( 'uap-flatpickr-calendar' );\n\n\t\tlet settings = {\n\t\t\tallowInput: true,\n\n\t\t\tpositionElement: this.$fakeCodemirrorField[ 0 ],\n\n\t\t\taltInput: true,\n\n\t\t\tclickOpens: false,\n\n\t\t\tappendTo: container,\n\n\t\t\tlocale: {\n\t\t\t\tweekdays: {\n\t\t\t\t\tshorthand: [\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.sunday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.monday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.tuesday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.wednesday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.thursday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.friday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.shorthand.saturday,\n\t\t\t\t\t],\n\t\t\t\t\tlonghand: [\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.sunday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.monday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.tuesday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.wednesday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.thursday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.friday,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.weekdays.longhand.saturday,\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tmonths: {\n\t\t\t\t\tshorthand: [\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.january,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.february,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.march,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.april,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.may,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.june,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.july,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.august,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.september,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.october,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.november,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.shorthand.december,\n\t\t\t\t\t],\n\t\t\t\t\tlonghand: [\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.january,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.february,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.march,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.april,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.may,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.june,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.july,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.august,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.september,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.october,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.november,\n\t\t\t\t\t\tUncannyAutomator.i18n.format.date.months.longhand.december,\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\trangeSeparator: ` ${ UncannyAutomator.i18n.format.date.rangeSeparator } `,\n\t\t\t\t// Numeric representation of the day of the week. 0 (for Sunday) through 6 (for Saturday)\n\t\t\t\t// In the translatable string we say that 1 is Sunday and Saturday is 7, so we have to subtract 1\n\t\t\t\tfirstDayOfWeek:\n\t\t\t\t\tparseInt( UncannyAutomator.i18n.format.date.firstDayOfWeek ) >= 1 &&\n\t\t\t\t\tparseInt( UncannyAutomator.i18n.format.date.firstDayOfWeek ) <= 7\n\t\t\t\t\t\t? parseInt( UncannyAutomator.i18n.format.date.firstDayOfWeek ) - 1\n\t\t\t\t\t\t: 0,\n\t\t\t\tweekAbbreviation: ` ${ UncannyAutomator.i18n.format.date.weekAbbreviation } `,\n\t\t\t\tscrollTitle: UncannyAutomator.i18n.scrollToIncrement,\n\t\t\t\ttoggleTitle: UncannyAutomator.i18n.clickToToggle,\n\t\t\t\tamPM: [ UncannyAutomator.i18n.format.date.am, UncannyAutomator.i18n.format.date.pm ],\n\t\t\t\tyearAriaLabel: UncannyAutomator.i18n.format.date.year,\n\t\t\t\tmonthAriaLabel: UncannyAutomator.i18n.format.date.month,\n\t\t\t\thourAriaLabel: UncannyAutomator.i18n.format.date.hour,\n\t\t\t\tminuteAriaLabel: UncannyAutomator.i18n.format.date.minute,\n\t\t\t},\n\n\t\t\tparseDate: ( fieldValue, format ) => {\n\t\t\t\t// Check if it's empty\n\t\t\t\tif ( isEmpty( fieldValue ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Format date only if it doesn't contain tokens\n\t\t\t\tif ( fieldValue.includes( '}}' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Parse the date\n\t\t\t\treturn flatpickr.parseDate( fieldValue, format );\n\t\t\t},\n\n\t\t\terrorHandler: ( error ) => {\n\t\t\t\t// Check if the field value contains a token\n\t\t\t\tif ( this.getValue().includes( '}}' ) ) {\n\t\t\t\t\t// Don't return any errors, the date is valid\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( error );\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonReady: ( selectedDates, dateStr, instance ) => {\n\t\t\t\t// Check if the value of the date field is not equal\n\t\t\t\t// to the value of the Codemirror field. That would mean\n\t\t\t\t// that the date field has a valid value, and that we\n\t\t\t\t// have to format it\n\t\t\t\ttry {\n\t\t\t\t\tconst formatCodemirrorDate = () => {\n\t\t\t\t\t\t// Check if the field value is not a token\n\t\t\t\t\t\tif ( ! this.getValue().includes( '}}' ) ) {\n\t\t\t\t\t\t\t// Check if the date in the field is formatted differently than\n\t\t\t\t\t\t\t// the date in the alternative date field\n\t\t\t\t\t\t\tif ( this.fieldCM.getValue() != instance.altInput.value ) {\n\t\t\t\t\t\t\t\tthis.fieldCM.setValue( instance.altInput.value );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// Check if CodeMirror is ready\n\t\t\t\t\tif ( isDefined( this.fieldCM ) ) {\n\t\t\t\t\t\tformatCodemirrorDate();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.field.on( 'ua-codemirror-ready', () => {\n\t\t\t\t\t\t\tformatCodemirrorDate();\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonChange: ( selectedDates, dateStr, instance ) => {\n\t\t\t\t// Update the Codemirror field\n\t\t\t\ttry {\n\t\t\t\t\tconst setCodemirrorValue = () => {\n\t\t\t\t\t\t// Remove the current value from the Codemirror field,\n\t\t\t\t\t\t// and set the value of the alt date/time field as value\n\t\t\t\t\t\tthis.fieldCM.setValue( instance.altInput.value );\n\t\t\t\t\t};\n\n\t\t\t\t\t// Check if CodeMirror is ready\n\t\t\t\t\tif ( isDefined( this.fieldCM ) ) {\n\t\t\t\t\t\tsetCodemirrorValue();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.field.on( 'ua-codemirror-ready', () => {\n\t\t\t\t\t\t\tsetCodemirrorValue();\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\n\t\t// Settings depending on the field type\n\t\t// https://github.com/flatpickr/flatpickr/blob/master/src/types/options.ts#L19\n\t\tif ( this.attributes.fieldType == 'date' ) {\n\t\t\tsettings = $.extend( settings, {\n\t\t\t\t// https://flatpickr.js.org/formatting/\n\t\t\t\tdateFormat: this.attributes.dateFormat,\n\t\t\t\taltFormat: this.attributes.dateAltFormat,\n\t\t\t} );\n\n\t\t\t// Check if it supports a range\n\t\t\tif ( this.attributes.supportsRange ) {\n\t\t\t\tsettings.mode = 'range';\n\t\t\t}\n\n\t\t\t// Check if it has a min date\n\t\t\tif ( isDefined( this.attributes.minDate ) ) {\n\t\t\t\tsettings.minDate = this.attributes.minDate;\n\t\t\t}\n\n\t\t\t// Check if it has a max date\n\t\t\tif ( isDefined( this.attributes.maxDate ) ) {\n\t\t\t\tsettings.maxDate = this.attributes.maxDate;\n\t\t\t}\n\t\t}\n\n\t\tif ( this.attributes.fieldType == 'time' ) {\n\n\t\t\t// Check if it's using a 12-hour format\n\t\t\tconst is12HourFormat = this.attributes.timeAltFormat.includes( 'K' );\n\n\t\t\tsettings = $.extend( settings, {\n\t\t\t\tenableTime: true,\n\t\t\t\tnoCalendar: true,\n\n\t\t\t\t// https://flatpickr.js.org/formatting/\n\t\t\t\tdateFormat: this.attributes.timeFormat,\n\t\t\t\taltFormat: this.attributes.timeAltFormat,\n\n\t\t\t\t// Check the alternative format (the format from WordPress) is using either `a` or `A` (K in our code, since that's what flatpickr uses)\n\t\t\t\ttime_24hr: ! is12HourFormat,\n\t\t\t} );\n\n\t\t\t// Check if it has a min time\n\t\t\tif ( isDefined( this.attributes.minTime ) ) {\n\t\t\t\tsettings.minTime = this.attributes.minTime;\n\t\t\t}\n\n\t\t\t// Check if it has a max time\n\t\t\tif ( isDefined( this.attributes.manTime ) ) {\n\t\t\t\tsettings.manTime = this.attributes.manTime;\n\t\t\t}\n\t\t}\n\n\t\t// Init flatpickr\n\t\tthis.flatpickrInstance = $field.flatpickr( settings );\n\t}\n\t\n\t/**\n\t * Destroys the flatpickr instance\n\t */\n\tdestroyFlatPickr() {\n\t\t// Check if the we already created the instance before\n\t\tif ( ! isDefined( this.flatpickrInstance ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.flatpickrInstance.destroy();\n\t}\n\n\t/**\n\t * Init CodeMirror\n\t *\n\t * @since 3.0\n\t */\n\n\tinitCodeMirror() {\n\t\t// Check if this isn't already a CodeMirror instance\n\t\tif (\n\t\t\t[ 'text', 'url', 'email', 'int', 'float', 'date', 'time', 'textarea' ].includes( this.attributes.fieldType )\n\t\t) {\n\t\t\t// Check if we already created a CodeMirror for this field\n\t\t\tthis.destroyCodeMirror();\n\n\t\t\tconst initialValue = this.getValue();\n\n\t\t\t// Set options\n\t\t\tlet CodeMirrorOptions = {\n\t\t\t\tlineNumbers: false,\n\n\t\t\t\ttabSize: 4,\n\t\t\t\tvalue: initialValue,\n\t\t\t\t\n\t\t\t\tmode: 'default',\n\t\t\t\tdragDrop: false,\n\t\t\t\tviewportMargin: Infinity,\n\t\t\t\tlineWrapping: true,\n\t\t\t\tautoRefresh: true,\n\n\t\t\t\tdirection: ! isEmpty( UncannyAutomator.isRTL ) && UncannyAutomator.isRTL ? 'rtl' : 'ltr',\n\n\t\t\t\t// Only allow breaklines in textareas\n\t\t\t\tnoNewlines: true,\n\t\t\t\t// Only allow scrollbars in textareas\n\t\t\t\tscrollbarStyle: null,\n\n\t\t\t\treadOnly: this.attributes.isReadOnly,\n\t\t\t};\n\n\t\t\t// Make exceptions for textarea\n\t\t\tif ( this.attributes.fieldType == 'textarea' ) {\n\t\t\t\tCodeMirrorOptions = Object.assign( CodeMirrorOptions, {\n\t\t\t\t\tscrollbarStyle: 'native',\n\t\t\t\t\tnoNewlines: false\n\t\t\t\t} );\n\n\t\t\t\t// If TinyMCE is enabled, show the line numbers\n\t\t\t\tif ( this.attributes.supportsTinyMCE ) {\n\t\t\t\t\tCodeMirrorOptions = Object.assign( CodeMirrorOptions, {\n\t\t\t\t\t\tlineNumbers: true,\n\t\t\t\t\t\tmode: 'htmlmixed',\n\t\t\t\t\t\tverify_html: false,\n\t\t\t\t\t\tinline_styles: true,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Disable tab for all fields except textareas\n\t\t\tif ( this.attributes.fieldType != 'textarea' ) {\n\t\t\t\tCodeMirrorOptions.extraKeys = {\n\t\t\t\t\tTab: () => {\n\t\t\t\t\t\t// Get next field\n\t\t\t\t\t\tconst nextField = this.getNextField();\n\n\t\t\t\t\t\t// Check if there is a next field\n\t\t\t\t\t\tif ( isDefined( nextField ) ) {\n\t\t\t\t\t\t\t// Focus the field\n\t\t\t\t\t\t\tnextField.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// CodeMirror\n\t\t\tthis.fieldCM = CodeMirror( this.$fakeCodemirrorField[ 0 ], CodeMirrorOptions );\n\n\t\t\t// Add the placeholder\n\t\t\tif ( this.attributes.hasPlaceholder ) {\n\t\t\t\tthis.fieldCM.setOption( 'placeholder', this.attributes.placeholder );\n\t\t\t}\n\n\t\t\tthis.fieldCM.on( 'changes', ( event, source ) => {\n\t\t\t\t// Check if the current field is NOT a date or time field\n\t\t\t\tif ( ! [ 'date', 'time' ].includes( this.attributes.fieldType ) ) {\n\t\t\t\t\tthis.setValue( this.fieldCM.getValue(), source[0].origin !== 'setValue', {\n\t\t\t\t\t\tupdateCodemirror: false,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.fieldCM.on( 'focus', () => {\n\t\t\t\t// If it's a date or time field, try to open the calendar\n\t\t\t\tif ( [ 'date', 'time' ].includes( this.attributes.fieldType ) ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Open calendar\n\t\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t\tthis.flatpickrInstance.open();\n\t\t\t\t\t\t}, 50 );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.field.on( 'focus', () => {\n\t\t\t\tthis.fieldCM.focus();\n\t\t\t} );\n\n\t\t\tthis.field.trigger( 'ua-codemirror-ready' );\n\t\t}\n\n\t\tif ( this.attributes.fieldType == 'select' ) {\n\t\t\t// Check if it has a custom value\n\t\t\tif ( isDefined( this.customValueField ) ) {\n\t\t\t\tthis.customValueField.initCodeMirror();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get the field below the current field\n\t *\n\t * @since 3.0\n\t */\n\n\tgetNextField() {\n\t\tlet nextField = null;\n\n\t\t// Check if this field is part of an item\n\t\tif ( isDefined( this.attributes.itemId ) && isDefined( this.attributes.groupId ) ) {\n\t\t\t// Get the group of fields\n\t\t\tconst groupOfFields =\n\t\t\t\tUncannyAutomator.recipe.items[ this.attributes.itemId ].options[ this.attributes.groupId ].fields;\n\n\t\t\t// Check if it's defined and is an array\n\t\t\tif ( isDefined( groupOfFields ) && $.isArray( groupOfFields ) ) {\n\t\t\t\t// Get the position of the current field\n\t\t\t\tconst fieldPosition = groupOfFields.indexOf( this );\n\n\t\t\t\t// Check if we found the field\n\t\t\t\tif ( fieldPosition != -1 ) {\n\t\t\t\t\t// Check if it's NOT the last field\n\t\t\t\t\tif ( fieldPosition != groupOfFields.length - 1 ) {\n\t\t\t\t\t\t// Get the next field\n\t\t\t\t\t\tnextField = groupOfFields[ fieldPosition + 1 ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's the user selector\n\t\tif ( isDefined( this.attributes.itemType ) && this.attributes.itemType == 'user-selector' ) {\n\t\t\t// Get fields\n\t\t\tconst groupOfFields = UncannyAutomator.recipe.userSelector.fields;\n\n\t\t\t// Check if it's defined and is an array\n\t\t\tif ( isDefined( groupOfFields ) && $.isArray( groupOfFields ) ) {\n\t\t\t\t// Get the position of the current field\n\t\t\t\tconst fieldPosition = groupOfFields.indexOf( this );\n\n\t\t\t\t// Check if we found the field\n\t\t\t\tif ( fieldPosition != -1 ) {\n\t\t\t\t\t// Check if it's NOT the last field\n\t\t\t\t\tif ( fieldPosition != groupOfFields.length - 1 ) {\n\t\t\t\t\t\t// Get the next field\n\t\t\t\t\t\tnextField = groupOfFields[ fieldPosition + 1 ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nextField;\n\t}\n\n\t/**\n\t * Focus the current field\n\t *\n\t * @since 3.0\n\t */\n\n\tfocus() {\n\t\tif ( isDefined( this.field ) ) {\n\t\t\tswitch ( this.type ) {\n\t\t\t\tcase 'select':\n\t\t\t\t\t// Try to open the select2 field\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.field.select2( 'focus' );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// Otherwise, just try to focus the normal dropdown\n\t\t\t\t\t\tthis.field.focus();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'url':\n\t\t\t\tcase 'email':\n\t\t\t\tcase 'int':\n\t\t\t\tcase 'float':\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'time':\n\t\t\t\t\t// Check if it's using CodeMirror\n\t\t\t\t\tif ( isDefined( this.fieldCM ) ) {\n\t\t\t\t\t\tthis.fieldCM.focus();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.field.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'textarea':\n\t\t\t\t\t// Check if it's using TinyMCE\n\t\t\t\t\tif ( isDefined( this.fieldTinyMCE ) ) {\n\t\t\t\t\t\t// Check if it's using the \"Text\" tab\n\t\t\t\t\t\tif ( this.field.is( ':visible' ) ) {\n\t\t\t\t\t\t\tthis.field.focus();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// Focus the TinyMCE field\n\t\t\t\t\t\t\t\tthis.fieldTinyMCE.focus();\n\t\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.field.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tthis.field.focus();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\tthis.field.focus();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroy CodeMirror\n\t *\n\t * @since 3.0\n\t */\n\tdestroyCodeMirror() {\n\t\t// Check if we already created a CodeMirror for this field\n\t\tif ( isDefined( this.fieldCM ) ) {\n\t\t\ttry {\n\t\t\t\tconst $field = this.fieldCM.getWrapperElement();\n\t\t\t\t$field.parentNode.removeChild( $field );\n\t\t\t\tthis.fieldCM = null;\n\t\t\t} catch ( e ) {\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Select\n\t * Rerender the dropdown\n\t */\n\n\trerenderSelect2() {\n\t\tconst settings = this.getSelect2Settings();\n\n\t\tif ( ! isEmpty( this.field ) && this.field.hasClass( 'select2-hidden-accessible' ) ) {\n\t\t\tthis.field.select2( 'destroy' ).select2( settings );\n\t\t}\n\t}\n\n\t/**\n\t * Init Token Selector\n\t *\n\t * @since 3.0\n\t */\n\n\tinitTokenSelector() {\n\t\tif ( this.attributes.supportsTokens ) {\n\t\t\t// Check if we already created the token selector\n\t\t\tthis.destroyTokenSelector();\n\n\t\t\t// Create object for the token selector\n\t\t\tconst options = {\n\t\t\t\tunsupportedTokens: this.attributes.unsupportedTokens\n\t\t\t}\n\n\t\t\t// Check if this is an item field\n\t\t\tif ( ! isEmpty( this.attributes.itemId ) ) {\n\t\t\t\toptions.itemID = this.attributes.itemId;\n\t\t\t}\n\n\t\t\tthis.tokenSelector = new TokenSelector( this, options );\n\t\t}\n\n\t\tif ( this.attributes.fieldType == 'select' ) {\n\t\t\t// Check if it has a custom value\n\t\t\tif ( isDefined( this.customValueField ) ) {\n\t\t\t\tthis.customValueField.initTokenSelector();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Destroy the Token selector\n\t *\n\t * @since 3.0\n\t */\n\n\tdestroyTokenSelector() {\n\t\t// Check if we already created the token selector\n\t\tif ( isDefined( this.tokenSelector ) ) {\n\t\t\tthis.tokenSelector.destroy();\n\t\t}\n\t}\n\n\t/**\n\t * Init TinyMCE\n\t * We're going to call this in ItemOptions.js because TinyMCE needs the item in the DOM before changing it\n\t *\n\t * @since 0.5\n\t */\n\n\tinitTinyMCE() {\n\t\tconst $textarea = this.field;\n\n\t\t// TinyMCE\n\t\tif ( isDefined( this.field ) && this.attributes.fieldType == 'textarea' && this.attributes.supportsTinyMCE ) {\n\t\t\t// Get field ID\n\t\t\tconst fieldId = this.field.prop( 'id' );\n\n\t\t\t// Get editor\n\t\t\tlet editor = tinymce.get( fieldId );\n\n\t\t\tif ( isDefined( editor ) ) {\n\t\t\t\twp.editor.remove( fieldId );\n\t\t\t}\n\n\t\t\t// TinyMCE plugins\n\t\t\tconst tinymcePlugins = [ 'charmap', 'colorpicker', 'hr', 'lists', 'paste', 'tabfocus', 'textcolor', 'fullscreen', 'link' ];\n\n\t\t\t// Check if it supports fullpage editing\n\t\t\tif ( this.attributes.supportsFullPageEditing ) {\n\t\t\t\ttinymcePlugins.push( 'fullpage' );\n\t\t\t}\n\n\t\t\t// TinyMCE toolbar\n\t\t\tconst tinymceToolbar = [ 'formatselect', 'bold', 'italic', 'bullist', 'numlist', 'blockquote', 'alignleft', 'aligncenter', 'alignright', 'link', 'unlink', 'wp_more', 'strikethrough', 'hr', 'forecolor', 'pastetext', 'removeformat', 'visualchars', 'outdent', 'indent', 'undo', 'redo' ];\n\n\t\t\t// Define styles\n\t\t\tconst tinyMCEStyles = [\n\t\t\t\taddParametersToURL( UncannyAutomator.assets.global.style, { ver: UncannyAutomator.version } ),\n\t\t\t\taddParametersToURL( UncannyAutomator.assets.recipeBuilder.style, { ver: UncannyAutomator.version } ),\n\t\t\t];\n\n\t\t\t// Try to add WordPress' styles\n\t\t\ttry { \n\t\t\t\ttinyMCEStyles.push( wp.editor.getDefaultSettings().tinymce.content_css );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( `Field: Couldn't load WordPress's custom assets for TinyMCE` );\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TinyMCE config object\n\t\t\tconst tinyOptions = {\n\t\t\t\tmediaButtons: true,\n\t\t\t\ttinymce: {\n\t\t\t\t\tplugins: tinymcePlugins.join( ' ' ),\n\t\t\t\t\ttoolbar1: tinymceToolbar.join( ' ' ),\n\t\t\t\t\theight: '350',\n\t\t\t\t\tcontent_css: tinyMCEStyles.join( ',' ),\n\t\t\t\t},\n\t\t\t\tquicktags: true,\n\t\t\t};\n\n\t\t\t// Init TinyMCE\n\t\t\twp.editor.initialize( fieldId, tinyOptions );\n\n\t\t\t// Get editor\n\t\t\teditor = tinymce.get( fieldId );\n\n\t\t\t// Check what's the current active tab\n\t\t\t// If .hidden is true, then the active tab is \"Text\"\n\t\t\tif ( editor.hidden ) {\n\t\t\t\tthis.fieldContainer.addClass( 'form-textarea--tinymce-text' );\n\t\t\t} else {\n\t\t\t\tthis.fieldContainer.addClass( 'form-textarea--tinymce-visual' );\n\t\t\t}\n\n\t\t\t// Detect changes on the \"Visual\" and \"Text\" tabs\n\t\t\tthis.formElement.find( '.switch-tmce' ).on( 'click', () => {\n\t\t\t\tthis.field.trigger( 'ua-tinymce-activate-visual-view' );\n\n\t\t\t\t// Change class to indicate what's the activate tab\n\t\t\t\tthis.fieldContainer\n\t\t\t\t\t.removeClass( 'form-textarea--tinymce-text' )\n\t\t\t\t\t.addClass( 'form-textarea--tinymce-visual' );\n\t\t\t} );\n\n\t\t\tthis.formElement.find( '.switch-html' ).on( 'click', () => {\n\t\t\t\tthis.field.trigger( 'ua-tinymce-activate-text-view' );\n\n\t\t\t\t// Change class to indicate what's the activate tab\n\t\t\t\tthis.fieldContainer\n\t\t\t\t\t.removeClass( 'form-textarea--tinymce-visual' )\n\t\t\t\t\t.addClass( 'form-textarea--tinymce-text' );\n\n\t\t\t\t// Set the value of the normal field\n\t\t\t\t// But don't trigger the change event\n\t\t\t\ttry {\n\t\t\t\t\tthis.fieldCM.setValue(\n\t\t\t\t\t\teditor.getContent( {\n\t\t\t\t\t\t\tformat: 'raw',\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\tthis.field.val(\n\t\t\t\t\t\teditor.getContent( {\n\t\t\t\t\t\t\tformat: 'raw',\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Refresh the field\n\t\t\t\tthis.fieldCM.refresh();\n\t\t\t} );\n\n\t\t\tthis.fieldTinyMCE = editor;\n\n\t\t\teditor.on( 'init', () => {\n\t\t\t\tthis.field.trigger( 'ua-tinymce-ready' );\n\t\t\t} );\n\t\t}\n\t}\n}\n\nexport default Field;\n\n/**\n * Extends select2 so it supports having pre-defined options in fields using AJAX\n */\n$.fn.select2.amd.define( 'select2/data/extended-ajax', [ './ajax', './tags', '../utils', 'module', 'jquery'], function ( AjaxAdapter, Tags, Utils, module, $ ) {\n\n    function ExtendedAjaxAdapter( $element, options ) {\n        //we need explicitly process minimumInputLength value \n        //to decide should we use AjaxAdapter or return defaultResults,\n        //so it is impossible to use MinimumLength decorator here\n        this.minimumInputLength = options.get( 'minimumInputLength' );\n        this.defaultResults = options.get( 'defaultResults' );\n\n        ExtendedAjaxAdapter.__super__.constructor.call( this, $element, options );\n    }\n\n    Utils.Extend( ExtendedAjaxAdapter, AjaxAdapter );\n\n    //override original query function to support default results\n    var originQuery = AjaxAdapter.prototype.query;\n\n    ExtendedAjaxAdapter.prototype.query = function ( params, callback ) {\n        var defaultResults = ( typeof this.defaultResults == 'function' ) ? this.defaultResults.call( this ) : this.defaultResults;\n        if ( ( defaultResults && defaultResults.length ) && ( ! params.term || params.term.length < this.minimumInputLength ) && ( params._type && params._type == 'query' ) ) {\n            var data = { results: defaultResults };\n            var processedResults = this.processResults( data, params );\n            callback( processedResults );\n        }\n        else  {\n            originQuery.call( this, params, callback );\n        }\n    };\n\n    if ( module.config().tags ) {\n        return Utils.Decorate( ExtendedAjaxAdapter, Tags );\n    } else {\n        return ExtendedAjaxAdapter;\n    }\n });\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Sanitizes the field attributes that come from the backend\n *\n * @param {Object} fieldAttributes Field attributes\n * @return {Object}                 Field attributes\n */\nconst sanitizeFieldAttributes = ( fieldAttributes ) => {\n\t// Deep clone attributes\n\tfieldAttributes = JSON.parse( JSON.stringify( fieldAttributes ) );\n\n\t// Sanitize data\n\tfieldAttributes = sanitizeField( fieldAttributes );\n\n\t// Check if it's a group or repeater field\n\tif ( [ 'group', 'repeater' ].includes( fieldAttributes.fieldType ) ) {\n\t\t// Iterate children\n\t\tfieldAttributes.fields = fieldAttributes.fields.map( ( childChildAttributes ) =>\n\t\t\tObject.assign(\n\t\t\t\tsanitizeField( childChildAttributes ),\n\t\t\t\t{\n\t\t\t\t\t// Inherit the item type to the children\n\t\t\t\t\titemType: fieldAttributes.itemType\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\treturn fieldAttributes;\n};\n\nexport default sanitizeFieldAttributes;\n\n/**\n * Converts the keys of the properties based on JS conventions\n *\n * @param {Object} fieldAttributes Field attributes\n * @return {Object}                 Field attributes\n */\nconst sanitizeField = ( fieldAttributes ) => {\n\t// Convert the name of the PHP properties to JS properties\n\t/* eslint-disable camelcase */ // Disabled because these come from the PHP, where this case is expected\n\tconst properties = {\n\t\trequired: 'isRequired',\n\t\tread_only: 'isReadOnly',\n\t\tsupports_tinymce: 'supportsTinyMCE',\n\t\tsupports_fullpage_editing: 'supportsFullPageEditing',\n\t\tcopy_to_clipboard: 'supportsCopyToClipboard',\n\t\tis_ajax: 'isAjax',\n\t\toption_code: 'optionCode',\n\t\tinput_type: 'fieldType',\n\t\tis_hidden: 'isHidden',\n\t\ttoken_name: 'tokenName',\n\t\tdefault_value: 'defaultValue',\n\t\tcurrent_value: 'currentValue',\n\t\tmax_length: 'maxLength',\n\t\trelevant_tokens: 'customFieldTokens',\n\t\tdate_format: 'dateFormat',\n\t\tdate_alt_format: 'dateAltFormat',\n\t\tsupports_range: 'supportsRange',\n\t\tmin_number: 'minNumber',\n\t\tmax_number: 'maxNumber',\n\t\tmin_date: 'minDate',\n\t\tmax_date: 'maxDate',\n\t\ttime_format: 'timeFormat',\n\t\tsupports_tokens: 'supportsTokens',\n\t\ttime_alt_format: 'timeAltFormat',\n\t\tmin_time: 'minTime',\n\t\tmax_time: 'maxTime',\n\t\thide_actions: 'hideActions',\n\t\tsupports_custom_value: 'supportsCustomValue',\n\t\tsupports_multiple_values: 'supportsMultipleValues',\n\t\tcustom_value_description: 'customValueDescription',\n\t\tfill_values_in: 'targetField',\n\t\tadd_row_button: 'addRowButtonLabel',\n\t\tremove_row_button: 'removeRowButtonLabel',\n\t\titem_type: 'itemType',\n\t\tcan_sort_rows: 'canSortRows',\n\t\tis_toggle: 'isToggle',\n\t\toptions_show_id: 'optionsShowID',\n\t\tajax: 'ajax',\n\t\tlisten_fields: 'listenFields',\n\t\tclear_on_change_fields: 'clearOnChangeFields',\n\t\tshow_label_in_sentence: 'showLabelInSentence',\n\t\tmapping_column: 'mappingColumn'\n\t};\n\t/* eslint-enable camelcase */\n\n\t// Iterate attributes\n\tObject.entries( fieldAttributes ).forEach( ( [ attributeKey, attributeValue ] ) => {\n\t\t// Check if we have to change this attribute\n\t\tif ( ! isDefined( properties[ attributeKey ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Copy the value using the correct attribute key\n\t\tfieldAttributes[ properties[ attributeKey ] ] = attributeValue;\n\n\t\t// Check if it's an object with more properties inside\n\t\ttry {\n\t\t\tif ( typeof attributeValue !== 'object' ) {\n\t\t\t\tthrow Error();\n\t\t\t}\n\n\t\t\tObject.entries( attributeValue ).forEach( ( [ subAttributeKey, subAttributeValue ] ) => {\n\t\t\t\t// Check if we have to change this attribute\n\t\t\t\tif ( ! isDefined( properties[ subAttributeKey ] ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Copy the value using the correct attribute key\n\t\t\t\tfieldAttributes[ properties[ attributeKey ] ][ properties[ subAttributeKey ] ] = subAttributeValue;\n\n\t\t\t\t// Remove old property\n\t\t\t\tdelete fieldAttributes[ properties[ attributeKey ] ][ subAttributeKey ];\n\t\t\t} );\n\t\t} catch ( e ) {}\n\n\t\t// Remove old property\n\t\tif ( attributeKey !== properties[ attributeKey ] ) {\n\t\t\tdelete fieldAttributes[ attributeKey ];\n\t\t}\n\t} );\n\n\treturn fieldAttributes;\n};\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Returns the an integration\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The integration code\n * @return {String}                        The integration icon\n */\nconst getIntegrationByCode = ( { integrationCode } ) => {\n\t// Default response\n\tlet integration = null;\n\n\t// Check if the integration exists\n\tif ( isDefined( UncannyAutomator.integrations[ integrationCode ] ) ) {\n\t\tintegration = UncannyAutomator.integrations[ integrationCode ];\n\t}\n\n\treturn integration;\n};\n\nexport default getIntegrationByCode;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Returns the integration icon\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The integration code\n * @return {String}                        The integration icon\n */\nconst getIntegrationIconURL = ( { integrationCode } ) => {\n\t// Default response\n\tlet imageUrl = '';\n\n\t// Check if the integration exists\n\tif ( isDefined( UncannyAutomator.integrations[ integrationCode ] ) ) {\n\t\tconst integration = UncannyAutomator.integrations[ integrationCode ];\n\n\t\t// Check if the SVG icon is defined\n\t\tif ( isDefined( integration.icon_svg ) ) {\n\t\t\timageUrl = integration.icon_svg;\n\t\t} else if ( isDefined( integration.icon_64 ) ) {\n\t\t\timageUrl = integration.icon_64;\n\t\t}\n\t}\n\n\treturn imageUrl;\n};\n\nexport default getIntegrationIconURL;\n","/**\n * Returns the integration name\n *\n * @param {String} integrationCode The integration code\n * @return {String}                 The integration name\n */\nconst getIntegrationName = ( integrationCode ) => {\n\treturn UncannyAutomator.integrations[ integrationCode ].name;\n}\n\nexport default getIntegrationName;\n","// Import utilities\nconst {\n\tisEmpty,\n\tisDefined\n} = _uo.utility;\n\n/**\n * Returns the list of integrations\n *\n * @param {Object} filters Object with custom filters. Check the filters object below\n * @return {String}         The integrations\n */\nconst getIntegrations = ( filters = {} ) => {\n\t// Check if it has options defined\n\tif ( isEmpty( filters ) ) {\n\t\treturn UncannyAutomator.integrations;\n\t}\n\n\t// Default filters\n\tfilters = Object.assign( {\n\n\t\t/**\n\t\t * True if it MUST have them\n\t\t * false if it MUST NOT have them\n\t\t * null to ignore the property\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\t\ttriggers: null,\n\t\tactions: null,\n\t\tconditions: null,\n\n\t\t/**\n\t\t * Custom callback\n\t\t *\n\t\t * @type {Callback}\n\t\t */\n\t\tcustomFilter: null,\n\n\t}, filters );\n\n\t// Filter conditions\n\tconst filteredConditions = {};\n\n\tObject.entries( UncannyAutomator.integrations ).map( ( [ integrationID, integration ] ) => {\n\t\t// Default value\n\t\tlet shouldAdd = true;\n\n\t\t// Check custom callback\n\t\tif ( isDefined( filters.customFilter ) ) {\n\t\t\tshouldAdd = filters.customFilter( integration );\n\t\t}\n\n\t\t// Check triggers\n\t\tif ( isDefined( filters.triggers ) ) {\n\t\t\t// Check cases\n\t\t\tif (\n\t\t\t\t// Integrations that MUST have triggers, but don't\n\t\t\t\t( filters.triggers && ! integration.items.triggers.hasTriggers )\n\n\t\t\t\t// Integrations that MUST NOT have triggers, but do\n\t\t\t\t|| ( ! filters.triggers && integration.items.triggers.hasTriggers )\n\t\t\t) {\n\t\t\t\tshouldAdd = false;\n\t\t\t}\n\t\t}\n\n\t\t// Check actions\n\t\tif ( isDefined( filters.actions ) ) {\n\t\t\t// Check cases\n\t\t\tif (\n\t\t\t\t// Integrations that MUST have actions, but don't\n\t\t\t\t( filters.actions && ! integration.items.actions.hasActions )\n\n\t\t\t\t// Integrations that MUST NOT have actions, but do\n\t\t\t\t|| ( ! filters.actions && integration.items.actions.hasActions )\n\t\t\t) {\n\t\t\t\tshouldAdd = false;\n\t\t\t}\n\t\t}\n\n\t\t// Check conditions\n\t\tif ( isDefined( filters.conditions ) ) {\n\t\t\t// Check cases\n\t\t\tif (\n\t\t\t\t// Integrations that MUST have conditions, but don't\n\t\t\t\t( filters.conditions && ! integration.conditions.hasConditions )\n\n\t\t\t\t// Integrations that MUST NOT have conditions, but do\n\t\t\t\t|| ( ! filters.conditions && integration.conditions.hasConditions )\n\t\t\t) {\n\t\t\t\tshouldAdd = false;\n\t\t\t}\n\t\t}\n\n\t\t// Add it\n\t\tif ( shouldAdd ) {\n\t\t\tfilteredConditions[ integrationID ] = integration;\n\t\t}\n\t} );\n\n\treturn filteredConditions;\n};\n\nexport default getIntegrations;\n","import $ from 'jquery';\n\nimport {\n\trestCall,\n\tgetGlobalItem,\n\treplaceCurlyBraces,\n\taddUTMParameters\n} from '../common/utilities.js';\n\nimport { getActionsOrder } from '@builder/item/sortability/utilities';\n\n// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport Modal from '../common/modal.js';\n\nimport Triggers from './triggers.js';\nimport Actions  from './actions.js';\n\nimport {\n\tupdateRemoteConditionsMeta\n} from '@builder/item/conditions/utilities';\n\nclass ItemHeaderMenu {\n\t/**\n\t * Create item actions\n\t *\n\t * @since 0.5\n\t *\n\t * @return jQuery DOM element with the item actions\n\t */\n\n\tconstructor( itemType, integrationID, itemCode, itemId ){\n\t\tthis.itemType      = itemType;\n\t\tthis.integrationID = integrationID;\n\t\tthis.itemCode      = itemCode;\n\t\tthis.itemId        = itemId;\n\t\tthis.item          = UncannyAutomator.recipe.items[ itemId ];\n\n\t\treturn this.createItemActions();\n\t}\n\n\tcreateItemActions(){\n\t\t// Create elements\n\t\tlet container     = $( '<div/>', { 'class': 'item-actions' }),\n\t\t\tbtn           = $( '<div/>', { 'class': 'item-actions__btn' }),\n\t\t\tbtnIcon       = $( '<uo-icon/>', { 'id': 'ellipsis-h' }),\n\t\t\tdropdown      = $( '<div/>', { 'class': 'item-actions__dropdown' }),\n\t\t\tdropdownUl    = $( '<ul/>', { 'class': 'item-actions-dropdown__ul' });\n\n\t\tbtn.append( btnIcon );\n\t\tcontainer.append( btn );\n\n\t\t// Delete\n\t\tlet deleteAction  = $( '<li/>', { 'class': 'item-actions-dropdown__action item-actions-dropdown__action--danger' }),\n\t\t\tdeleteText    = $( '<span/>' ).text( UncannyAutomator.i18n.delete );\n\n\t\tdeleteAction.append( deleteText );\n\t\tdropdownUl.append( deleteAction );\n\n\t\t// Check if it's an action\n\t\tif ( this.itemType == 'action' ) {\n\t\t\t// Duplicate\n\t\t\tconst $duplicateAction = document.createElement( 'li' );\n\t\t\t$duplicateAction.classList.add( 'item-actions-dropdown__action' );\n\t\t\t$duplicateAction.innerHTML = `<span>${ UncannyAutomator.i18n.duplicate }</span>`;\n\n\t\t\t// Add button\n\t\t\tdropdownUl.get(0).appendChild( $duplicateAction );\n\n\t\t\t// Listen clicks to the button, add loading animation and do REST call to duplicate the action\n\t\t\t$duplicateAction.addEventListener( 'click', () => {\n\t\t\t\t// Add loading animation\n\t\t\t\t$duplicateAction.classList.add( 'item-actions-dropdown__action--loading' );\n\n\t\t\t\t// Do call and hide\n\t\t\t\trestCall( \n\t\t\t\t\t'duplicate_action', \n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\taction_id: this.itemId\n\t\t\t\t\t}, \n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Update the actions metabox\n\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Remove loading animation\n\t\t\t\t\t\t$duplicateAction.classList.remove( 'item-actions-dropdown__action--loading' );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\t\t\n\t\t// Support\n\t\tif ( isDefined( this.itemType ) && isDefined( this.itemCode ) ) {\n\t\t\tif ( ! isDefined( this.item) || isDefined( this.item ) && ! this.item.isMissing ){\n\t\t\t\tlet globalItemData = getGlobalItem( this.integrationID, this.itemType, this.itemCode );\n\n\t\t\t\tif ( isDefined( globalItemData.support_link ) ){\n\t\t\t\t\tlet utmContent = `support_menu_link-${ this.integrationID }-${ this.integrationID }_${ this.itemCode }-${ this.integrationID }_${ replaceCurlyBraces( globalItemData.select_option_name, '', '' ).toLowerCase().replace( /\\s+|{|}/g, '_' ) }`;\n\n\t\t\t\t\tlet supportAction = $( '<a/>', {\n\t\t\t\t\t\t'href':  addUTMParameters( globalItemData.support_link, {\n\t\t\t\t\t\t\t'medium':  'action_menu',\n\t\t\t\t\t\t\t'content': utmContent\n\t\t\t\t\t\t}),\n\t\t\t\t\t\t'class': 'item-actions-dropdown__action',\n\t\t\t\t\t\t'target': '_blank'\n\t\t\t\t\t}),\n\t\t\t\t\t\tsupportText   = $( '<span/>' ).text( UncannyAutomator.i18n.support );\n\n\t\t\t\t\tsupportAction.append( supportText );\n\t\t\t\t\tdropdownUl.append( supportAction );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdropdown.append( dropdownUl );\n\t\tcontainer.append( dropdown );\n\n\t\t// Listen clicks to the open button\n\t\tbtn.on( 'click', () => {\n\t\t\t// Evaluate if it's open\n\t\t\tconst isOpen = container.hasClass( 'item-actions--open' );\n\n\t\t\t// Check if it's not open\n\t\t\tif ( ! isOpen ){\n\t\t\t\t// Open the dropdown\n\t\t\t\tcontainer.addClass( 'item-actions--open' );\n\n\t\t\t\t// Listen clicks outside the dropdown\n\t\t\t\t$( document ).on( 'mouseup.uap-actions-click-outside', ( event ) => {\n\t\t\t\t\tif ( ! container.is( event.target ) && container.has( event.target ).length === 0 ){\n\t\t\t\t\t\t// Close dropdown\n\t\t\t\t\t\tcontainer.removeClass( 'item-actions--open' );\n\n\t\t\t\t\t\t// Remove event listener to listen clicks outside the dropdown\n\t\t\t\t\t\t$( document ).off( 'mouseup.uap-actions-click-outside' );\n\t\t\t\t\t}\n\t\t\t\t});           \n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Close dropdown\n\t\t\t\tcontainer.removeClass( 'item-actions--open' );\n\n\t\t\t\t// Remove event listener to listen clicks outside the dropdown\n\t\t\t\t$( document ).off( 'mouseup.uap-actions-click-outside' );\n\t\t\t}\n\t\t});\n\n\t\t// Delete\n\t\tdeleteAction.on( 'click', () => {\n\t\t\tif ( isDefined( this.itemId ) && UncannyAutomator.recipe.isLive && UncannyAutomator.recipe.items[ this.itemId ].isLive ){\n\t\t\t\t// Hide dropdown with options\n\t\t\t\tcontainer.removeClass( 'item-actions--open' );\n\n\t\t\t\t// Create modal box\n\t\t\t\t// Read Modal.js comments for more information\n\t\t\t\tlet modal = new Modal({\n\t\t\t\t\ttitle:       UncannyAutomator.i18n.confirmationModal.title,\n\t\t\t\t\twarning:     replaceCurlyBraces( UncannyAutomator.i18n.confirmationModal.deleteWarning, '<strong>', '</strong>' ),\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tcancel:  UncannyAutomator.i18n.cancel,\n\t\t\t\t\t\tconfirm: UncannyAutomator.i18n.confirm,\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmodal.setEvents({\n\t\t\t\t\tafterSetEvents: () => {\n\t\t\t\t\t\tmodal.show();\n\t\t\t\t\t},\n\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\tlet elements        = modal.getElements();\n\t\t\t\t\t\tlet confirmButton   = elements.modal.box.buttons.confirm;\n\n\t\t\t\t\t\t// Add loading class to button\n\t\t\t\t\t\tconfirmButton.addClass( 'uap-btn--loading' ).prop( 'disabled', true );\n\n\t\t\t\t\t\t// Data to be sent\n\t\t\t\t\t\tconst dataToSend = {\n\t\t\t\t\t\t\tID: this.itemId,\n\t\t\t\t\t\t\t// actions_order: getActionsOrder(),\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the action had conditions\n\t\t\t\t\t\tconst actionHadConditions = UncannyAutomator.recipe.items[ this.itemId ].hasConditions;\n\n\t\t\t\t\t\tif ( actionHadConditions ) {\n\t\t\t\t\t\t\t// Remove the action from the conditions group\n\t\t\t\t\t\t\tconst conditionsGroupID = UncannyAutomator.recipe.items[ this.itemId ].conditionsGroupID;\n\n\t\t\t\t\t\t\t// Get the conditions block\n\t\t\t\t\t\t\tUncannyAutomator.recipe.conditions[ conditionsGroupID ].removeAction( this.itemId );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Do call and hide\n\t\t\t\t\t\trestCall( 'delete', dataToSend, () => {\n\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t\t\t// Clear the cache of tokens\n\t\t\t\t\t\t\tUncannyAutomator.cache.tokens = [];\n\n\t\t\t\t\t\t\t// Refresh UI\n\t\t\t\t\t\t\tif ( this.itemType == 'trigger' ){\n\t\t\t\t\t\t\t\tnew Triggers();\n\n\t\t\t\t\t\t\t\t// Check if it's an anonymous recipe\n\t\t\t\t\t\t\t\tif ( UncannyAutomator.recipe.type == 'anonymous' ){\n\t\t\t\t\t\t\t\t\t// Render the Actions metabox again\n\t\t\t\t\t\t\t\t\t// We're doing this because we need to update the user selector\n\t\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif ( this.itemType == 'action' || this.itemType == 'closure' ){\n\t\t\t\t\t\t\t\tif ( actionHadConditions ) {\n\t\t\t\t\t\t\t\t\tupdateRemoteConditionsMeta( {\n\t\t\t\t\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Check if the recipe is still valid, if it isn't then make the recipe draft\n\t\t\t\t\t\t\tif ( ! UncannyAutomator.recipe.isValid ){\n\t\t\t\t\t\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t\t\tconsole.log( ' ERROR-TODO. Couldn\\'t delete the item' );\n\n\t\t\t\t\t\t\t// Refresh UI\n\t\t\t\t\t\t\tif ( this.itemType == 'trigger' ){\n\t\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif ( this.itemType == 'action' || this.itemType == 'closure' ){\n\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tafterHide: function(){\n\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Delete without warning\n\t\t\t\tif ( isDefined( this.itemId ) ){\n\t\t\t\t\t// Set loading to the \"delete\" option\n\t\t\t\t\tdeleteAction.addClass( 'item-actions-dropdown__action--loading' );\n\n\t\t\t\t\t// Data to be sent\n\t\t\t\t\tconst dataToSend = {\n\t\t\t\t\t\tID: this.itemId,\n\t\t\t\t\t\t// actions_order: getActionsOrder()\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the action had conditions\n\t\t\t\t\tconst actionHadConditions = UncannyAutomator.recipe.items[ this.itemId ].hasConditions;\n\n\t\t\t\t\tif ( actionHadConditions ) {\n\t\t\t\t\t\t// Remove the action from the conditions group\n\t\t\t\t\t\tconst conditionsGroupID = UncannyAutomator.recipe.items[ this.itemId ].conditionsGroupID;\n\n\t\t\t\t\t\t// Get the conditions block\n\t\t\t\t\t\tUncannyAutomator.recipe.conditions[ conditionsGroupID ].removeAction( this.itemId );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do the AJAX request to delete it\n\t\t\t\t\trestCall( 'delete', dataToSend, () => {\n\t\t\t\t\t\t// Clear the cache of tokens\n\t\t\t\t\t\tUncannyAutomator.cache.tokens = [];\n\n\t\t\t\t\t\t// Reset UI\n\t\t\t\t\t\tif ( this.itemType == 'trigger' ){\n\t\t\t\t\t\t\tnew Triggers();\n\n\t\t\t\t\t\t\t// Check if it's an anonymous recipe\n\t\t\t\t\t\t\tif ( UncannyAutomator.recipe.type == 'anonymous' ){\n\t\t\t\t\t\t\t\t// Render the Actions metabox again\n\t\t\t\t\t\t\t\t// We're doing this because we need to update the user selector\n\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( this.itemType == 'action' || this.itemType == 'closure' ){\n\t\t\t\t\t\t\tif ( actionHadConditions ) {\n\t\t\t\t\t\t\t\tupdateRemoteConditionsMeta( {\n\t\t\t\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\n\t\t\t\t\t}, () => {\n\t\t\t\t\t\tconsole.log( ' ERROR-TODO. Couldn\\'t delete the item' );\n\n\t\t\t\t\t\t// Reset UI\n\t\t\t\t\t\tif ( this.itemType == 'trigger' ){\n\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( this.itemType == 'action' || this.itemType == 'closure' ){\n\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Reset UI\n\t\t\t\t\tif ( this.itemType == 'trigger' ){\n\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif ( this.itemType == 'action' ){\n\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn container;\n\t}\n}\n\nexport default ItemHeaderMenu;\n","/**!\n * Sortable 1.15.0\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.0\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\n\n\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, _excluded);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\r\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n * @param  {Number} x      X position\r\n * @param  {Number} y      Y position\r\n * @return {HTMLElement}   Element of the first found nearest Sortable\r\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    var threshold = sortable[expando].options.emptyInsertThreshold;\n    if (!threshold || lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    } // Safari ignores further event handling after mousedown\n\n\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // if there is a last element, it is the target\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n\n        target = firstChild;\n        targetRect = getRect(target);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var rect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var spacer = 10;\n  return vertical ? evt.clientX < rect.left - spacer || evt.clientY < rect.top && evt.clientX < rect.right : evt.clientY < rect.top - spacer || evt.clientY < rect.bottom && evt.clientX < rect.left;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed,\n          cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n          cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent,\n          cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl,\n          cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden,\n          cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed,\n          cancel = _ref8.cancel;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = this.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        folding = false; // Do not \"unfold\" after around dragEl if reverted\n\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","import './style.scss';\n\n// Import dependencies and utilities\nimport Sortable from 'sortablejs';\nimport Actions from '@builder/item/actions';\nimport { restCall } from '@builder/common/utilities';\nimport { isAutomatorProActive } from '@builder/utilities';\nimport { getActionsOrder } from '@builder/item/sortability/utilities';\nimport { sanitizeConditionsForMeta, getConditionsGroupById } from '@builder/item/conditions/utilities';\n\n/**\n * Makes the actions and conditions block sortable\n */\nexport default class MakeSortable {\n\t/**\n\t * Used to know if the user is currently dragging actions or conditions blocks\n\t * @type {Boolean}\n\t */\n\tisSorting = false;\n\n\t/* eslint-disable-next-line require-jsdoc */\n\tconstructor() {\n\t\t// Do actions and conditions block sortable\n\t\tthis.createDropzones();\n\t}\n\n\t/**\n\t * Iterates the wrappers that contain sortable nodes and creates instances of `Sortable`\n\t */\n\tcreateDropzones() {\n\t\tthis.dropzones = {\n\t\t\tinstant: [],\n\t\t\tdelayed: [],\n\t\t\tscheduled: []\n\t\t}\n\n\t\tObject.entries( this.dropzonesSelectors.action ).forEach( ( [ actionTypeID, selectors ] ) => {\n\t\t\t// Iterate selectors\n\t\t\tselectors.forEach( ( selector ) => {\n\t\t\t\t// Iterate wrappers\n\t\t\t\tdocument.querySelectorAll( `.${ selector }` ).forEach( ( $wrapper ) => {\n\t\t\t\t\t// Decide if users can sort INSIDE the list\n\t\t\t\t\tconst canSortSiblings = actionTypeID === 'instant' ? true : false;\n\t\t\t\t\t\n\t\t\t\t\t// Save instance\n\t\t\t\t\tthis.dropzones[ actionTypeID ].push(\n\t\t\t\t\t\tnew Sortable(\n\t\t\t\t\t\t\t$wrapper, \n\t\t\t\t\t\t\tObject.assign( this.settings, {\n\t\t\t\t\t\t\t\tsort: canSortSiblings\n\t\t\t\t\t\t\t} ) \n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Enables or disables a dropzone by group ID\n\t * \n\t * @param {String} groupID The group ID (instant/delayed/scheduled)\n\t */\n\tsetDisableStatusDropzone( groupID, status ) {\n\t\tthis.dropzones[ groupID ].forEach( ( SortableInstance ) => {\n\t\t\t// Disable it\n\t\t\tSortableInstance.option( 'disabled', status );\n\t\t} );\n\t}\n\n\t/**\n\t * Disables or enables all dropzones\n\t */\n\tsetDisableStatusAllDropzones( status, { exceptGroupdID } ) {\n\t\tObject.keys( this.dropzones ).forEach( ( groupID ) => {\n\t\t\t// Check if we should ignore this one\n\t\t\tif ( groupID === exceptGroupdID ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setDisableStatusDropzone( groupID, status );\n\t\t} );\n\t}\n\n\t/**\n\t * Handles the data modifications after an action or conditions block are dropped\n\t *\n\t * @param {SortableEvent} event Sortable event\n\t */\n\thandleChanges( event ) {\n\t\t// Prepare the data we'll send in the request\n\t\tconst changes = {\n\t\t\t// Get the new order of the actions\n\t\t\t// As this will be triggered only if either an action node or a group of conditions\n\t\t\t// that contain actions was moved, we don't have to check the object to verify if\n\t\t\t// the index of the IDs changed\n\t\t\torder: getActionsOrder(),\n\n\t\t\t// The conditions groups. We'll get this below\n\t\t\tconditions: null\n\t\t}\n\n\t\t// Send the conditions only if the user is using Pro\n\t\tif ( isAutomatorProActive() ) {\n\t\t\t\t// Check some data we'll need later to decide what to do\n\t\t\t// Check if an item or conditions group was moved\n\t\t\tconst movedNodeName = event.item.classList.contains( 'uap-item' ) ? 'item' : 'conditions-block';\n\n\t\t\t/* eslint-disable no-console */\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\tconsole.log( `Sortability: change detected` );\n\t\t\t\tconsole.log( `Sortability: [actions] The order of the actions has changed` );\n\t\t\t\tconsole.log( changes.order );\n\t\t\t}\n\t\t\t/* eslint-enable no-console */\n\n\t\t\t// Check if the conditions changed\n\t\t\t// For that, start by checking if the user moved an item (action, in this case).\n\t\t\t// If they moved an conditions block, it means the conditions haven't changed.\n\t\t\tif ( movedNodeName === 'item' ) {\n\t\t\t\t// Check if the parent of the moved item changed\n\t\t\t\t// If it didn't change, it means the conditions group didn't change either (if it was inside one)\n\t\t\t\tconst parentNodeChanged = event.to !== event.from;\n\n\t\t\t\tif ( parentNodeChanged ) {\n\t\t\t\t\t// Check if the item was inside a conditions block\n\t\t\t\t\tconst itemInsideConditionsBlock = {\n\t\t\t\t\t\tbefore: event.from.classList.contains( 'uap-conditions-block-items' ),\n\t\t\t\t\t\tafter: event.to.classList.contains( 'uap-conditions-block-items' )\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get the item ID\n\t\t\t\t\tconst itemID = event.item.itemId;\n\n\t\t\t\t\t// If the item was inside a conditions group, we have to remove the action from it\n\t\t\t\t\tif ( itemInsideConditionsBlock.before ) {\n\t\t\t\t\t\t// Get the conditions block ID\n\t\t\t\t\t\tconst conditionsBlockID = event.from.closest( '.uap-conditions-block' ).dataset.id;\n\n\t\t\t\t\t\t// Get the conditions block\n\t\t\t\t\t\tconst conditionsBlock = getConditionsGroupById( { conditionsGroupId: conditionsBlockID } );\n\n\t\t\t\t\t\t// Remove action\n\t\t\t\t\t\tconditionsBlock.removeAction( itemID );\n\n\t\t\t\t\t\t/* eslint-disable no-console */\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\tconsole.log( `Sortability: [conditions] The action (ID: ${ itemID }) was removed from its ex-conditions block (ID: ${ conditionsBlockID })` );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* eslint-enable no-console */\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the item is inside a conditions group now, we have to add the action to it\n\t\t\t\t\tif ( itemInsideConditionsBlock.after ) {\n\t\t\t\t\t\t// Get the conditions block ID\n\t\t\t\t\t\tconst conditionsBlockID = event.to.closest( '.uap-conditions-block' ).dataset.id;\n\n\t\t\t\t\t\t// Get the conditions block\n\t\t\t\t\t\tconst conditionsBlock = getConditionsGroupById( { conditionsGroupId: conditionsBlockID } );\n\n\t\t\t\t\t\t// Add action\n\t\t\t\t\t\tconditionsBlock.addAction( itemID );\n\n\t\t\t\t\t\t/* eslint-disable no-console */\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\tconsole.log( `Sortability: [conditions] The action (ID: ${ itemID }) was added to a conditions block (ID: ${ conditionsBlockID })` );\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* eslint-enable no-console */\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t/* eslint-disable no-console */\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\tconsole.log( `Sortability: [conditions] The parent node of the action didn't change, which either means the action wasn't inside a conditions blocks, or the user moved it to another position inside its current conditions block` );\n\t\t\t\t\t}\n\t\t\t\t\t/* eslint-enable no-console */\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t/* eslint-disable no-console */\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\tconsole.log( `Sortability: [conditions] The node moved was a conditions block, so the conditions haven't changed` );\n\t\t\t\t}\n\t\t\t\t/* eslint-enable no-console */\n\t\t\t}\n\n\t\t\t// Get the conditions object, ready to be saved\n\t\t\tchanges.conditions = sanitizeConditionsForMeta();\n\t\t}\n\n\t\t// Save changes\n\t\tthis.saveChanges( changes );\n\t}\n\n\t/**\n\t * Saves the data using a REST call\n\t *\n\t * @param {Object} changes Object with `.order` and `.conditions`\n\t */\n\tsaveChanges( changes ) {\n\t\t// Prepare data for each call\n\t\tlet endpoint = 'actions_order';\n\n\t\tconst formData = {\n\t\t\t/* eslint-disable-next-line camelcase */\n\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t}\n\n\t\t// If it's pro, also save the conditions\n\t\tif ( isAutomatorProActive() ) {\n\t\t\tendpoint = 'actions_order_and_conditions';\n\t\t\tformData.order = changes.order;\n\t\t\tformData.conditions = JSON.stringify( changes.conditions );\n\t\t} else {\n\t\t\t// In Free, just save the order\n\t\t\t/* eslint-disable-next-line camelcase */\n\t\t\tformData.actions_order = changes.order;\n\t\t}\n\n\t\t// Remove global saving class\n\t\tdocument.body.classList.add( 'uap-sortable-status--saving' );\n\n\t\t// Do REST call\n\t\trestCall(\n\t\t\tendpoint,\n\t\t\tformData,\n\t\t\t( response ) => {\n\t\t\t\t// Remove global dragging class\n\t\t\t\tdocument.body.classList.remove( 'uap-sortable-status--sorting' );\n\n\t\t\t\t// Remove global saving class\n\t\t\t\tdocument.body.classList.remove( 'uap-sortable-status--saving' );\n\n\t\t\t\t// Remove class to the dropzones\n\t\t\t\tdocument.querySelectorAll( '.uap-sortable-dropzone' ).forEach( ( $dropzone ) => {\n\t\t\t\t\t$dropzone.classList.remove( 'uap-sortable-dropzone' );\n\t\t\t\t} );\n\n\t\t\t\t// Render the actions with some delay\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t// Render the actions metabox again\n\t\t\t\t\tnew Actions();\n\t\t\t\t}, 300 );\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Sortable options\n\t *\n\t * @return {Object} The options\n\t */\n\tget settings() {\n\t\treturn {\n\t\t\t// ms, animation speed moving items when sorting, `0`  without animation\n\t\t\tanimation: 300,\n\n\t\t\t// Appends the cloned DOM Element into the Document's Body\n\t\t\tfallbackOnBody: true,\n\n\t\t\t// Threshold of the swap zone\n\t\t\tswapThreshold: 0.5,\n\t\t\t// Threshold of the inverted swap zone (will be set to swapThreshold value by default)\n\t\t\t// Read https://github.com/SortableJS/Sortable/wiki/Swap-Thresholds-and-Direction\n\t\t\tinvertedSwapThreshold: true,\n\n\t\t\t// The direction option is the final option, but the most important. It defines the direction we want to sort in. Think of it as setting the axis of the Sortable to either x or y. If we are using the y axis, we set the option to \"vertical\". If its the x axis, we set the option to \"horizontal\". The direction is needed for Sortable to determine whether the swap zones take up the width of the target, or the height. \n\t\t\tdirection: 'vertical',\n\n\t\t\t// px, distance mouse must be from empty sortable to insert drag element into it\n\t\t\temptyInsertThreshold: 0,\n\n\t\t\t// Class name for the drop placeholder\n\t\t\tghostClass: 'uap-item-drag-ghost',\n\t\t\t// Class name for the chosen item\n\t\t\tchosenClass: 'uap-item-drag-status-chosen', \n\n\t\t\t// Class added to the clone that follows the map\n\t\t\tdragClass: 'uap-item-drag-status-drag-floating',\n\t\t\t// forceFallback: true,\n\n\t\t\t// Drag handle selector within list items\n\t\t\thandle: '.uap-item-drag-handle',\n\n\t\t\t// Specifies which items inside the element should be draggable\n\t\t\tdraggable: '.uap-conditions-block.uap-conditions-block--sortable, .uap-item.uap-item--sortable',\n\n\t\t\t// Triggered when the dragging starts\n\t\t\tonStart: ( event ) => {\n\t\t\t\tthis.isSorting = true;\n\n\t\t\t\t// Get data about the element being dragged\n\t\t\t\tconst elementData = this.getWhatIsBeingDragged( event.item );\n\n\t\t\t\t// Disable all the irrelevant dropzones\n\t\t\t\t// If it's a conditions block, or an instant action, just leave the \"Instant\" dropzones\n\t\t\t\tif ( elementData.is === 'conditions-block' || ( elementData.is === 'action' && elementData.type === 'instant' ) ) {\n\t\t\t\t\tthis.setDisableStatusAllDropzones( true, {\n\t\t\t\t\t\texceptGroupdID: 'instant'\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\t// If we're here, it's because it's either a delayed or scheduled action\n\t\t\t\t\tthis.setDisableStatusAllDropzones( true, {\n\t\t\t\t\t\texceptGroupdID: elementData.type\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// Add a class to style the elements with a delay\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t// Check if the user is still sorting, and compress the layout\n\t\t\t\t\tif ( this.isSorting ) {\n\t\t\t\t\t\t// Add global sorting class\n\t\t\t\t\t\tdocument.body.classList.add( 'uap-sortable-status--sorting' );\n\n\t\t\t\t\t\t// Add classes to the dropzones\n\t\t\t\t\t\tconst dropzones = elementData.is === 'action' ? this.dropzonesSelectors.action[ elementData.type ] : this.dropzonesSelectors[ 'conditions-block' ];\n\n\t\t\t\t\t\tdropzones.forEach( ( dropzoneSelector ) => {\n\t\t\t\t\t\t\t// Get the dropzones. NOTE: This is prepending a dot because all the selectors are classes\n\t\t\t\t\t\t\tconst $dropzones = document.querySelectorAll( `.${ dropzoneSelector }` );\n\n\t\t\t\t\t\t\t// Iterate dropzones\n\t\t\t\t\t\t\t$dropzones.forEach( ( $dropzone ) => {\n\t\t\t\t\t\t\t\t$dropzone.classList.add( 'uap-sortable-dropzone' );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}, 300 );\n\t\t\t},\n\n\t\t\t// Element dragging ended\n\t\t\tonEnd: ( event ) => {\n\t\t\t\tthis.isSorting = false;\n\n\t\t\t\t// Check if it really changed\n\t\t\t\t// We could use .onUpdate AND .onAdd to get the same behavior\n\t\t\t\tconst parentChanged = event.to !== event.from;\n\t\t\t\tconst indexChanged  = event.oldIndex !== event.newIndex; \n\n\t\t\t\tif ( parentChanged || indexChanged ) {\n\t\t\t\t\tthis.handleChanges( event );\n\n\t\t\t\t\t// Stop here, don't update the UI back\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Enable all dropzones again\n\t\t\t\tthis.setDisableStatusAllDropzones( false, {} );\n\n\t\t\t\t// Remove global dragging class\n\t\t\t\tdocument.body.classList.remove( 'uap-sortable-status--sorting' );\n\n\t\t\t\t// Remove class to the dropzones\n\t\t\t\tdocument.querySelectorAll( '.uap-sortable-dropzone' ).forEach( ( $dropzone ) => {\n\t\t\t\t\t$dropzone.classList.remove( 'uap-sortable-dropzone' );\n\t\t\t\t} );\n\t\t\t},\n\n\t\t\t// or { name: \"...\", pull: [true, false, 'clone', array], put: [true, false, array] }\n\t\t\tgroup: {\n\t\t\t\tname: 'nested',\n\t\t\t\t// This callback will prevent Automator from adding conditions groups inside other conditions groups\n\t\t\t\t// This will be invoked every time a sortable node is dragged\n\t\t\t\tpull: ( to, from, $draggedNode ) => {\n\t\t\t\t\t// Get data about the element being dragged\n\t\t\t\t\tconst elementData = this.getWhatIsBeingDragged( $draggedNode );\n\n\t\t\t\t\t// Get the dropzones\n\t\t\t\t\tconst dropzones = elementData.is === 'action' ? this.dropzonesSelectors.action[ elementData.type ] : this.dropzonesSelectors[ 'conditions-block' ];\n\n\t\t\t\t\t// Check if the user is trying to drop this action inside a valid dropzone\n\t\t\t\t\treturn dropzones.some( ( selector ) => {\n\t\t\t\t\t\treturn to.el.classList.contains( selector );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets what's being dragged right now (conditions block, or action)\n\t * \n\t * @param {Node} $node The Node being dragged\n\t * \n\t * @return {String} The element type\n\t */\n\tgetWhatIsBeingDragged( $node ) {\n\t\t// Response\n\t\tconst response = {\n\t\t\tis: 'action'\n\t\t}\n\n\t\t// Check if it's a conditions block\n\t\tif ( $node.classList.contains( 'uap-conditions-block' ) ) {\n\t\t\tresponse.is = 'conditions-block';\n\t\t\t\n\t\t\t// Stop here\n\t\t\treturn response;\n\t\t}\n\n\t\t// Get the action\n\t\tconst action = UncannyAutomator.recipe.items[ $node.dataset.id ];\n\n\t\t// Get the recipe type\n\t\tresponse.type = action.isDelayed ? 'delayed' : ( action.isScheduled ? 'scheduled' : 'instant' );\n\n\t\treturn response;\n\t}\n\n\t/**\n\t * Returns the dropdowns selectors by element type\n\t * \n\t * @return {Object} The dropzones\n\t */\n\tget dropzonesSelectors() {\n\t\treturn {\n\t\t\t'conditions-block': [\n\t\t\t\t'uap-items--actions-instant'\n\t\t\t],\n\t\t\taction: {\n\t\t\t\tinstant: [\n\t\t\t\t\t'uap-conditions-block-items--instant',\n\t\t\t\t\t'uap-items--actions-instant'\n\t\t\t\t],\n\t\t\t\tdelayed: [\n\t\t\t\t\t'uap-conditions-block-items--delayed',\n\t\t\t\t\t'uap-items--actions-delayed'\n\t\t\t\t],\n\t\t\t\tscheduled: [\n\t\t\t\t\t'uap-conditions-block-items--scheduled',\n\t\t\t\t\t'uap-items--actions-scheduled'\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t}\n}\n","import $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport {\n\tuserSelectorObject,\n\trecipeObject,\n\trestCall,\n\tgetDOMElements,\n\taddUTMParameters\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\taddParametersToURL\n} = _uo.utility;\n\nimport Field from '../field';\n\nimport Actions from '../item/actions.js';\n\nimport RecipeNotices from '../recipe/notices.js';\n\nimport Tokens from '../tokens';\n\nclass UserSelector {\n\tconstructor(){\n\t\t// On page load, get current step\n\t\tUncannyAutomator.recipe.userSelector.step = userSelectorObject( 'get-step' );\n\n\t\t// Render\n\t\tthis.render();\n\t}\n\n\trender(){\n\t\t// Create variable to save the content to be added\n\t\tlet $content = ``;\n\n\t\t// Get content depending of the step\n\t\tswitch ( UncannyAutomator.recipe.userSelector.step ){\n\t\t\tcase 'select-source':\n\t\t\t\t// Set validation to false\n\t\t\t\t// We're setting it to false here in case the user already\n\t\t\t\t// has valid values, but wanted to go to the first step\n\t\t\t\t// to change the source\n\t\t\t\tUncannyAutomator.recipe.userSelector.isValid = false;\n\n\t\t\t\t// Validate recipe\n\t\t\t\trecipeObject( 'validate' );\n\n\t\t\t\t// Where the recipe creator select the source of the user.\n\t\t\t\t// The options are \"Existing user\" and \"New user\".\n\t\t\t\t$content = this.getSelectSourceNodes();\n\t\t\t\tbreak;\n\n\t\t\tcase 'set-options':\n\t\t\t\t// Where the recipe creator defines values of the fields\n\t\t\t\t$content = this.getOptionsNodes();\n\t\t\t\tbreak;\n\n\t\t\tcase 'show-sentence':\n\t\t\t\t// Validate recipe\n\t\t\t\trecipeObject( 'validate' );\n\n\t\t\t\t// Set error mode\n\t\t\t\tUncannyAutomator.recipe.errorMode = false;\n\n\t\t\t\t// Show error\n\t\t\t\tnew RecipeNotices();\n\n\t\t\t\t// When the data is complete and valid.\n\t\t\t\t$content = this.getSentenceNodes();\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Get container\n\t\tlet $metabox = getDOMElements( 'metabox', {\n\t\t\ttype: 'action'\n\t\t});\n\n\t\t// Append content\n\t\t$metabox.prepend( $content );\n\t}\n\n\tgetSelectSourceNodes(){\n\t\t// Create elements\n\t\tlet $userSelector = $( `\n\t\t\t<div class=\"user-selector ${ UncannyAutomator.recipe.requiresUserData ? 'user-selector--show' : '' }\">\n\t\t\t</div>\t\n\t\t` );\n\n\t\t// Add header\n\t\t$userSelector.append( this.createItem() );\n\n\t\t// Add content\n\t\t$userSelector.find( '.uap-item-inner-content' ).append( $( `\n\t\t\t<div class=\"item-integrations\">\n\t\t\t\t<div class=\"item-integration user-selector-option user-selector-option--existing-user\" data-source=\"existingUser\">\n\t\t\t\t\t<div class=\"item-integration__logo\"></div>\n\t\t\t\t\t<div class=\"item-integration__name\">\n\t\t\t\t\t\t${ UncannyAutomator.i18n.userSelector.userType.existing }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"item-integration user-selector-option user-selector-option--new-user\" data-source=\"newUser\">\n\t\t\t\t\t<div class=\"item-integration__logo\"></div>\n\t\t\t\t\t<div class=\"item-integration__name\">\n\t\t\t\t\t\t${ UncannyAutomator.i18n.userSelector.userType.new }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t` ) );\n\n\t\t// Get user type boxes\n\t\tlet $userTypeButtons = $userSelector.find( '.user-selector-option' );\n\n\t\t// Bind click on the user type buttons\n\t\t$userTypeButtons.on( 'click', ( event ) => {\n\t\t\t// Get clicked button\n\t\t\tlet $option = $( event.currentTarget );\n\n\t\t\t// Get user type\n\t\t\tlet userSource = $option.data( 'source' );\n\t\t\t\n\t\t\t// Save selected source in main object\n\t\t\tuserSelectorObject( 'set-source', {\n\t\t\t\tsource: userSource\n\t\t\t});\n\n\t\t\t// Define next step\n\t\t\tUncannyAutomator.recipe.userSelector.step = 'set-options';\n\n\t\t\t// Render the actions metabox again\n\t\t\tnew Actions();\n\t\t});\n\n\t\t// Return element\n\t\treturn $userSelector;\n\t}\n\n\tgetOptionsNodes(){\n\t\t// Create elements\n\t\tlet $optionsContainer = $( `\n\t\t\t<div class=\"user-selector ${ UncannyAutomator.recipe.requiresUserData ? 'user-selector--show' : '' }\">\n\t\t\t</div>\n\t\t` );\n\n\t\t// Add header\n\t\t$optionsContainer.prepend( this.createItem() );\n\n\t\t// Add content\n\t\t$optionsContainer.find( '.uap-item-inner-content' ).append( $( `<div class=\"item-options\"></div>` ) );\n\n\t\t// Get options container, we will add the fields there\n\t\tlet $fieldsContainer = $optionsContainer.find( '.item-options' );\n\n\t\t// Add fields\n\t\t$fieldsContainer.append( this.getOptionsFields() );\n\n\t\t// Return node\n\t\treturn $optionsContainer;\n\t}\n\n\tgetOptionsFields(){\n\t\t// Create container\n\t\tconst $container = $( `<div></div>` );\n\n\t\t// Create the fields container\n\t\tlet $fields = $( `<div class=\"item-options__group\"></div>` );\n\n\t\t// Create array to save all the fields\n\t\tlet optionsFields = [];\n\n\t\t// Update fields data object so it's an object and not an array\n\t\tuserSelectorObject( 'update-fields', {\n\t\t\tsource: 'existingUser',\n\t\t\tdata: {}\n\t\t});\n\n\t\tuserSelectorObject( 'update-fields', {\n\t\t\tsource: 'newUser',\n\t\t\tdata: {}\n\t\t});\n\n\t\t// Get WordPress roles, but remove the \"administrator\" one\n\t\tlet roles = UncannyAutomator.recipe.userSelector.resources.roles;\n\t\tdelete roles.administrator;\n\n\t\t// Check what's the source\n\t\tswitch ( UncannyAutomator.recipe.userSelector.source ){\n\t\t\tcase 'existingUser':\n\t\t\t\t// Create group\n\t\t\t\tlet $groupOfFields = $( `<div class=\"user-selector__field-group user-selector__field-group--two-columns\"></div>` );\n\n\t\t\t\t// Create \"Unique field\" field\n\t\t\t\tlet uniqueField = new Field( 'select', {\n\t\t\t\t\titemType: 'user-selector',\n\t\t\t\t\toptionCode: 'uniqueField',\n\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldLabel,\n\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField,\n\t\t\t\t\tisRequired: true,\n\t\t\t\t\toptionsShowID: false,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'email',\n\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionEmail\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'id',\n\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionId\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'username',\n\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionUsername\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\toptionsFields.push( uniqueField );\n\n\t\t\t\t// Create value field\n\t\t\t\tlet valueField = new Field( 'text', {\n\t\t\t\t\titemType: 'user-selector',\n\t\t\t\t\toptionCode: 'uniqueFieldValue',\n\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue,\n\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.existingUser.valueFieldLabel,\n\t\t\t\t\t// placeholder: UncannyAutomator.i18n.userSelector.existingUser.valueFieldPlaceholder,\n\t\t\t\t\tisRequired: true,\n\t\t\t\t\tsupportsTokens: true\n\t\t\t\t});\n\t\t\t\toptionsFields.push( valueField );\n\n\t\t\t\t// Create and add form element\n\t\t\t\tlet $uniqueFieldFormElement = uniqueField.getFormElement();\n\n\t\t\t\t// Init Codemirror\n\t\t\t\t// AFTER we added the elements to the DOM let's call init \n\t\t\t\t// TokenSelector and CodeMirror. We're going to call this in\n\t\t\t\t// ItemOptions.js because the TokenSelector and \n\t\t\t\t// CodeMirror need the item in the DOM before changing it\n\t\t\t\tvalueField.initTokenSelector();\n\t\t\t\tvalueField.initFlatpickr();\n\t\t\t\tvalueField.initCodeMirror();\n\n\t\t\t\t$groupOfFields.append( $uniqueFieldFormElement );\n\n\t\t\t\tlet $valueFieldFormElement = valueField.getFormElement();\n\t\t\t\t$groupOfFields.append( $valueFieldFormElement );\n\n\t\t\t\t// Add elements to the main container\n\t\t\t\t$fields.append( $groupOfFields );\n\n\t\t\t\t// Create field to decide what to do if the user doesn't exist\n\t\t\t\tlet fallbackField = new Field( 'radio', {\n\t\t\t\t\titemType: 'user-selector',\n\t\t\t\t\toptionCode: 'fallback',\n\t\t\t\t\tname: 'user-selector-existing-user-fallback',\n\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldLabel,\n\t\t\t\t\tisRequired: true,\n\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.fallback,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'create-new-user',\n\t\t\t\t\t\t\ttext: UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionCreateUser\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'do-nothing',\n\t\t\t\t\t\t\ttext: UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionDoNothing\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\toptionsFields.push( fallbackField );\n\n\t\t\t\t// Create and add form element\n\t\t\t\tlet $fallbackFieldFormElement = fallbackField.getFormElement();\n\t\t\t\t$fields.append( $fallbackFieldFormElement );\n\n\t\t\t\t// Listen changes\n\t\t\t\t$uniqueFieldFormElement.on( 'automator:field:change', () => {\n\t\t\t\t\t// Get and save value\n\t\t\t\t\tuserSelectorObject( 'update-fields', {\n\t\t\t\t\t\tsource: 'existingUser',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuniqueField: uniqueField.getValue()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t$valueFieldFormElement.on( 'automator:field:change', () => {\n\t\t\t\t\t// Get and save value\n\t\t\t\t\tuserSelectorObject( 'update-fields', {\n\t\t\t\t\t\tsource: 'existingUser',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuniqueFieldValue: valueField.getValue()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// Listen changes\n\t\t\t\t$fallbackFieldFormElement.on( 'automator:field:change', () => {\n\t\t\t\t\t// Get and save value\n\t\t\t\t\tuserSelectorObject( 'update-fields', {\n\t\t\t\t\t\tsource: 'existingUser',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tfallback: fallbackField.getValue()\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Render the actions metabox again\n\t\t\t\t\tnew Actions();\n\t\t\t\t});\n\n\t\t\t\t// Check if we have to add more fields or the do-nothing notice\n\t\t\t\tif ( UncannyAutomator.recipe.userSelector.data.existingUser.fallback == 'do-nothing' ){\n\t\t\t\t\t// Create \"Do nothing\" notice\n\t\t\t\t\tconst $doNothingNotice = $( `\n\t\t\t\t\t\t<div class=\"user-selector__warning\">\n\t\t\t\t\t\t\t${ UncannyAutomator.i18n.userSelector.existingUser.doNothingMessage }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t` );\n\n\t\t\t\t\t$fields.append( $doNothingNotice );\n\t\t\t\t}\n\t\t\t\telse if ( UncannyAutomator.recipe.userSelector.data.existingUser.fallback == 'create-new-user' ){\n\t\t\t\t\t// Create container\n\t\t\t\t\tlet $subOptionsContainer = $( '<div/>', {\n\t\t\t\t\t\t'class': 'item-options'\n\t\t\t\t\t});\n\n\t\t\t\t\t// Create new users fields\n\t\t\t\t\tlet newUserFields = [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\t\toptionCode: 'firstName',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.firstName,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.firstName,\n\t\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\t\toptionCode: 'lastName',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.lastName,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.lastName,\n\t\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\t\toptionCode: 'email',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.email,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.email,\n\t\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\t\toptionCode: 'username',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.username,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.username,\n\t\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\t\toptionCode: 'displayName',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.displayName,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.displayName,\n\t\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\t\toptionCode: 'password',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.existingUser.password,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.password,\n\t\t\t\t\t\t\tdescription: UncannyAutomator.i18n.userSelector.newUser.passwordDescription,\n\t\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\t\tfieldType:  'select',\n\t\t\t\t\t\t\toptionCode: 'role',\n\t\t\t\t\t\t\tcurrentValue: ! isEmpty( UncannyAutomator.recipe.userSelector.data.existingUser.role ) ? UncannyAutomator.recipe.userSelector.data.existingUser.role : 'subscriber',\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.role,\n\t\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\t\tsupportsTokens: false,\n\t\t\t\t\t\t\toptionsShowID: false,\n\t\t\t\t\t\t\toptions: Object.keys( roles ).map( ( key, index ) => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tvalue: key,\n\t\t\t\t\t\t\t\t\ttext:  roles[ key ]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titemType: 'user-selector',\n\t\t\t\t\t\t\tfieldType: 'radio',\n\t\t\t\t\t\t\toptionCode: 'logUserIn',\n\t\t\t\t\t\t\tname: 'logUserIn',\n\t\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.canLogNewUserIn ? ( ! isEmpty( UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn ) ? UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn : 'no' ) : 'no',\n\t\t\t\t\t\t\tisHidden: ! UncannyAutomator.recipe.canLogNewUserIn,\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.logUserIn,\n\t\t\t\t\t\t\tsupportsTokens: false,\n\t\t\t\t\t\t\toptions: [{\n\t\t\t\t\t\t\t\t\tvalue: 'yes',\n\t\t\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.yes\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'no',\n\t\t\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.no\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t];\n\n\t\t\t\t\t// Create fields\n\t\t\t\t\tnewUserFields.forEach(( fieldObject ) => {\n\t\t\t\t\t\t// Create field\n\t\t\t\t\t\tconst field = new Field( fieldObject.fieldType, fieldObject );\n\n\t\t\t\t\t\t// Get container\n\t\t\t\t\t\tlet $fieldFormElement = field.getFormElement();\n\n\t\t\t\t\t\t$subOptionsContainer.append( $fieldFormElement );\n\n\t\t\t\t\t\t// AFTER we added the elements to the DOM let's call init \n\t\t\t\t\t\t// TokenSelector and CodeMirror. We're going to call this in\n\t\t\t\t\t\t// ItemOptions.js because the TokenSelector and \n\t\t\t\t\t\t// CodeMirror need the item in the DOM before changing it\n\t\t\t\t\t\tfield.initTokenSelector();\n\t\t\t\t\t\tfield.initFlatpickr();\n\t\t\t\t\t\tfield.initCodeMirror();\n\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * We don't need this for now, but we could need it in the future\n\t\t\t\t\t\t * \n\n\t\t\t\t\t\t// Listen changes\n\t\t\t\t\t\t$fieldFormElement.on( 'automator:field:change', () => {\n\t\t\t\t\t\t\t// Get ID\n\t\t\t\t\t\t\tconst fieldId = fieldObject.optionCode;\n\n\t\t\t\t\t\t\t// Get value\n\t\t\t\t\t\t\tconst value = field.getValue();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t*/\n\n\t\t\t\t\t\t// Save field\n\t\t\t\t\t\toptionsFields.push( field );\n\t\t\t\t\t});\n\n\t\t\t\t\t// Append container\n\t\t\t\t\t$fields.append( $subOptionsContainer );\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'newUser':\n\t\t\t\t// Create new users fields\n\t\t\t\tlet newUserFields = [\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\toptionCode: 'firstName',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.firstName,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.firstName,\n\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\toptionCode: 'lastName',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.lastName,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.lastName,\n\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\toptionCode: 'email',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.email,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.email,\n\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\toptionCode: 'username',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.username,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.username,\n\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\toptionCode: 'displayName',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.displayName,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.displayName,\n\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'text',\n\t\t\t\t\t\toptionCode: 'password',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.password,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.password,\n\t\t\t\t\t\tdescription: UncannyAutomator.i18n.userSelector.newUser.passwordDescription,\n\t\t\t\t\t\tisRequired: false,\n\t\t\t\t\t\tsupportsTokens: true\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\t\tfieldType:  'select',\n\t\t\t\t\t\toptionCode: 'role',\n\t\t\t\t\t\tcurrentValue: ! isEmpty( UncannyAutomator.recipe.userSelector.data.newUser.role ) ? UncannyAutomator.recipe.userSelector.data.newUser.role : 'subscriber',\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.role,\n\t\t\t\t\t\tisRequired: true,\n\t\t\t\t\t\tsupportsTokens: false,\n\t\t\t\t\t\toptionsShowID: false,\n\t\t\t\t\t\toptions: Object.keys( roles ).map( ( key, index ) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tvalue: key,\n\t\t\t\t\t\t\t\ttext:  roles[ key ]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\titemType: 'user-selector',\n\t\t\t\t\t\tfieldType: 'radio',\n\t\t\t\t\t\toptionCode: 'logUserIn',\n\t\t\t\t\t\tname: 'logUserIn',\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.canLogNewUserIn ? ( ! isEmpty( UncannyAutomator.recipe.userSelector.data.newUser.logUserIn ) ? UncannyAutomator.recipe.userSelector.data.newUser.logUserIn : 'no' ) : 'no',\n\t\t\t\t\t\tisHidden: ! UncannyAutomator.recipe.canLogNewUserIn,\n\t\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.logUserIn,\n\t\t\t\t\t\tsupportsTokens: false,\n\t\t\t\t\t\toptions: [{\n\t\t\t\t\t\t\t\tvalue: 'yes',\n\t\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.yes\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: 'no',\n\t\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.no\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t];\n\n\t\t\t\t// Create fields\n\t\t\t\tnewUserFields.forEach(( fieldObject ) => {\n\t\t\t\t\t// Create field\n\t\t\t\t\tconst field = new Field( fieldObject.fieldType, fieldObject );\n\n\t\t\t\t\t// Get container\n\t\t\t\t\tlet $fieldFormElement = field.getFormElement();\n\n\t\t\t\t\t$fields.append( $fieldFormElement );\n\n\t\t\t\t\t// AFTER we added the elements to the DOM let's call init \n\t\t\t\t\t// TokenSelector and CodeMirror. We're going to call this in\n\t\t\t\t\t// ItemOptions.js because the TokenSelector and \n\t\t\t\t\t// CodeMirror need the item in the DOM before changing it\n\t\t\t\t\tfield.initTokenSelector();\n\t\t\t\t\tfield.initFlatpickr();\n\t\t\t\t\tfield.initCodeMirror();\n\n\t\t\t\t\t// Save field\n\t\t\t\t\toptionsFields.push( field );\n\t\t\t\t});\n\n\t\t\t\t// Create fallback field\n\t\t\t\tlet newUserFallbackField = new Field( 'radio', {\n\t\t\t\t\titemType:   'user-selector',\n\t\t\t\t\toptionCode: 'fallback',\n\t\t\t\t\tname: 'user-selector-new-user-fallback',\n\t\t\t\t\tlabel: UncannyAutomator.i18n.userSelector.newUser.existingUserFieldLabel,\n\t\t\t\t\tisRequired: true,\n\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.fallback,\n\t\t\t\t\toptions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'select-existing-user',\n\t\t\t\t\t\t\ttext: UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionExisting\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'do-nothing',\n\t\t\t\t\t\t\ttext: UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionDoNothing\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\toptionsFields.push( newUserFallbackField );\n\n\t\t\t\t// Add fallback field to the container\n\t\t\t\tlet $newUserfallbackFieldFormElement = newUserFallbackField.getFormElement();\n\t\t\t\t$fields.append( $newUserfallbackFieldFormElement );\n\n\t\t\t\t// Listen changes\n\t\t\t\t$newUserfallbackFieldFormElement.on( 'automator:field:change', () => {\n\t\t\t\t\t// Update the value of all the fields (don't validate them yet)\n\t\t\t\t\tlet fieldsValues = {};\n\n\t\t\t\t\t// Iterate fields\n\t\t\t\t\toptionsFields.forEach(( Field ) => {\n\t\t\t\t\t\t// Save the field using the optionCode as ID and field value as value\n\t\t\t\t\t\tfieldsValues[ Field.getAttributes().optionCode ] = Field.getValue();\n\t\t\t\t\t});\n\n\t\t\t\t\t// Get and save value\n\t\t\t\t\tuserSelectorObject( 'update-fields', {\n\t\t\t\t\t\tsource: 'newUser',\n\t\t\t\t\t\tdata: fieldsValues\n\t\t\t\t\t});\n\n\t\t\t\t\t// Render the actions metabox again\n\t\t\t\t\tnew Actions();\n\t\t\t\t});\n\n\t\t\t\t// Check if we have to add more fields or the do-nothing notice\n\t\t\t\tif ( UncannyAutomator.recipe.userSelector.data.newUser.fallback == 'do-nothing' ){\n\t\t\t\t\t// Create \"Do nothing\" notice\n\t\t\t\t\tconst $doNothingNotice = $( `\n\t\t\t\t\t\t<div class=\"user-selector__warning\">\n\t\t\t\t\t\t\t${ UncannyAutomator.i18n.userSelector.newUser.doNothingMessage }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t` );\n\n\t\t\t\t\t$fields.append( $doNothingNotice );\n\t\t\t\t}\n\t\t\t\telse if ( UncannyAutomator.recipe.userSelector.data.newUser.fallback == 'select-existing-user' ){\n\t\t\t\t\t// Create container\n\t\t\t\t\tlet $subOptionsContainer = $( '<div/>', {\n\t\t\t\t\t\t'class': 'item-options'\n\t\t\t\t\t});\n\n\t\t\t\t\t// Create \"Prioritized Field\" field\n\t\t\t\t\tlet prioritizedField = new Field( 'select', {\n\t\t\t\t\t\titemType:     'user-selector',\n\t\t\t\t\t\toptionCode:   'prioritizedField',\n\t\t\t\t\t\tlabel:        UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldLabel,\n\t\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.userSelector.data.newUser.prioritizedField,\n\t\t\t\t\t\tdefaultValue: 'email',\n\t\t\t\t\t\tdescription:  UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldDescription,\n\t\t\t\t\t\tisRequired:   true,\n\t\t\t\t\t\toptionsShowID: false,\n\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: 'email',\n\t\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.userSelector.newUser.email\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: 'username',\n\t\t\t\t\t\t\t\ttext:  UncannyAutomator.i18n.userSelector.newUser.username\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\toptionsFields.push( prioritizedField );\n\n\t\t\t\t\t// Get field container\n\t\t\t\t\tlet $prioritizedField = prioritizedField.getFormElement();\n\t\t\t\t\t$subOptionsContainer.append( $prioritizedField );\n\n\t\t\t\t\t// Append container\n\t\t\t\t\t$fields.append( $subOptionsContainer );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Save fields\n\t\tUncannyAutomator.recipe.userSelector.fields = optionsFields;\n\n\t\t// Add fields\n\t\t$container.append( $fields );\n\n\t\t// Create and add save and cancel buttons\n\t\tconst $buttonsContainer = $( `<div class=\"item-options__buttons\"></div>` );\n\n\t\t// Save button\n\t\tconst $saveButton = $( `<div class=\"uap-btn uap-btn--primary\">${ UncannyAutomator.i18n.save }</div>` );\n\t\tconst $cancelButton = $( `<div class=\"uap-btn uap-btn--secondary\">${ UncannyAutomator.i18n.cancel }</div>` );\n\n\t\t// Add listeners\n\t\t// On save\n\t\t$saveButton.on( 'click', () => {\n\t\t\t// Validate fields\n\t\t\t// Create default response\n\t\t\tlet areAllFieldsValid = true;\n\n\t\t\t// Create object to get all the fields values\n\t\t\tlet fieldsValues = {}\n\n\t\t\t// Iterate fields and validate them\n\t\t\toptionsFields.forEach(( Field ) => {\n\t\t\t\t// Get field validation\n\t\t\t\tconst isFieldValid = Field.validate().isValid;\n\n\t\t\t\t// Update global validation\n\t\t\t\tareAllFieldsValid = areAllFieldsValid && isFieldValid;\n\n\t\t\t\t// Check if the field is valid\n\t\t\t\tif ( isFieldValid ){\n\t\t\t\t\t// Save value\n\t\t\t\t\tfieldsValues[ Field.getAttributes().optionCode ] = Field.getValue();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Save values\n\t\t\tuserSelectorObject( 'update-fields', {\n\t\t\t\tsource: UncannyAutomator.recipe.userSelector.source,\n\t\t\t\tdata: fieldsValues\n\t\t\t});\n\n\t\t\t// Check if all fields are valid, otherwise\n\t\t\t// do nothing. The .validate() method will\n\t\t\t// render the errors\n\t\t\tif ( areAllFieldsValid ){\n\t\t\t\t// Add loading class to button\n\t\t\t\t$saveButton.addClass( 'uap-btn--primary uap-btn--loading uap-btn--disabled' );\n\n\t\t\t\t// Make request\n\t\t\t\trestCall( 'user-selector', {\n\t\t\t\t\trecipeId: UncannyAutomator.recipe.id,\n\t\t\t\t\tsource: UncannyAutomator.recipe.userSelector.source,\n\t\t\t\t\tdata: UncannyAutomator.recipe.userSelector.data[ UncannyAutomator.recipe.userSelector.source ]\n\t\t\t\t}, ( response ) => {\n\t\t\t\t\t// On success\n\t\t\t\t\t// Set user selector as valid\n\t\t\t\t\tUncannyAutomator.recipe.userSelector.isValid = true;\n\n\t\t\t\t\t// Set step\n\t\t\t\t\tuserSelectorObject( 'set-step', {\n\t\t\t\t\t\tstep: 'show-sentence'\n\t\t\t\t\t});\n\n\t\t\t\t\t// Render actions again\n\t\t\t\t\tnew Actions();\n\t\t\t\t}, ( response ) => {\n\t\t\t\t\t// On error\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// On cancel\n\t\t$cancelButton.on( 'click', () => {\n\t\t\t// Delete fields information\n\t\t\t// userSelectorObject( 'reset-fields' );\n\n\t\t\t// Set step\n\t\t\tuserSelectorObject( 'set-step', {\n\t\t\t\tstep: 'select-source'\n\t\t\t});\n\n\t\t\t// Render actions again\n\t\t\tnew Actions();\n\t\t})\n\n\t\t// Add buttons\n\t\t$buttonsContainer.append( $saveButton );\n\t\t$buttonsContainer.append( $cancelButton );\n\t\t$container.append( $buttonsContainer );\n\n\t\treturn $container;\n\t}\n\n\tgetSentenceNodes(){\n\t\t// Create elements\n\t\tlet $optionsContainer = $( `\n\t\t\t<div class=\"user-selector user-selector--summary ${ UncannyAutomator.recipe.requiresUserData ? 'user-selector--show' : '' }\">\n\t\t\t</div>\n\t\t` );\n\n\t\t// Add header\n\t\t$optionsContainer.prepend( this.createItem() );\n\n\t\t// Add content\n\t\t$optionsContainer.find( '.uap-item-inner-content' ).append( $( `<div class=\"user-selector-summary\"></div>` ) );\n\n\t\t// Get container\n\t\tlet $summaryContainer = $optionsContainer.find( '.user-selector-summary' );\n\n\t\t// Create first row\n\t\tlet $sourceRow = $( `\n\t\t\t<div class=\"user-selector-summary-row\">\n\t\t\t\t<div class=\"user-selector-summary-row__icon\">\n\t\t\t\t\t<uo-icon id=\"atom\"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"user-selector-summary-row__content\"></div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Create token\n\t\tlet $sourceRowToken = $( `\n\t\t\t<div class=\"user-selector-summary-row__token\"></div>\n\t\t` );\n\t\t$sourceRow.find( '.user-selector-summary-row__content' ).append( $sourceRowToken );\n\n\t\t// If the source is \"existingUser\"\n\t\tif ( UncannyAutomator.recipe.userSelector.source == 'existingUser' ){\n\t\t\t// Then add the \"Existing user\" string\n\t\t\t$sourceRowToken.text( UncannyAutomator.i18n.userSelector.userType.existing );\n\t\t}\n\t\t// If it's \"newUser\"\n\t\telse if ( UncannyAutomator.recipe.userSelector.source == 'newUser' ){\n\t\t\t// Then add the \"New user\" string\n\t\t\t$sourceRowToken.text( UncannyAutomator.i18n.userSelector.userType.new );\n\t\t}\n\n\t\t// Listen clicks\n\t\t$sourceRowToken.on( 'click', () => {\n\t\t\t// Go to the first step.\n\t\t\t\n\t\t\t// Delete fields information\n\t\t\t// userSelectorObject( 'reset-fields' );\n\n\t\t\t// Set step\n\t\t\tuserSelectorObject( 'set-step', {\n\t\t\t\tstep: 'select-source'\n\t\t\t});\n\n\t\t\t// Render actions again\n\t\t\tnew Actions();\n\t\t});\n\n\t\t// Add to container\n\t\t$summaryContainer.append( $sourceRow );\n\n\t\t// Create first row\n\t\tlet $dataRow = $( `\n\t\t\t<div class=\"user-selector-summary-row\">\n\t\t\t\t<div class=\"user-selector-summary-row__icon\">\n\t\t\t\t\t<uo-icon id=\"fingerprint\"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"user-selector-summary-row__content\"></div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Create token\n\t\tlet $dataRowSentence;\n\n\t\t// Beautify text in \"x matches y\" by rendering tokens in \"y\"\n\t\tlet uniqueFieldValue = UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue;\n\t\ttry {\n\t\t\t// Render tokens\n\t\t\tuniqueFieldValue = ( new Tokens( 'user-selector' ) ).renderTextWithTokens( uniqueFieldValue ).outerHTML;\n\t\t} catch ( e ){\n\t\t\t// Output error if the developer mode is enabled\n\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.warn( e );\n\t\t\t}\n\t\t}\n\n\t\tif ( UncannyAutomator.recipe.userSelector.source == 'existingUser' ){\n\t\t\t$dataRowSentence = $( `\n\t\t\t\t<div>\n\t\t\t\t${\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.userSelector.summary.matches,\n\t\t\t\t\t\t`<div class=\"user-selector-summary-row__token\">${ UncannyAutomator.i18n.userSelector.summary[ UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField ] }</div>`,\n\t\t\t\t\t\t`<div class=\"user-selector-summary-row__token\">${ uniqueFieldValue }</div>`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t</div>`\n\t\t\t);\n\t\t}\n\t\telse if ( UncannyAutomator.recipe.userSelector.source == 'newUser' ){\n\t\t\t// Beautify text in \"x matches y\" by rendering tokens in \"y\"\n\t\t\tlet uniqueFieldValue = UncannyAutomator.recipe.userSelector.data.newUser.email;\n\t\t\ttry {\n\t\t\t\t// Render tokens\n\t\t\t\tuniqueFieldValue = ( new Tokens( 'user-selector' ) ).renderTextWithTokens( uniqueFieldValue ).outerHTML;\n\t\t\t} catch ( e ){\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$dataRowSentence = $( `\n\t\t\t\t<div>\n\t\t\t\t${\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.userSelector.summary.withEmail,\n\t\t\t\t\t\t`<div class=\"user-selector-summary-row__token\">${ uniqueFieldValue }</div>`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\t$dataRow.find( '.user-selector-summary-row__content' ).append( $dataRowSentence );\n\n\t\t// Listen clicks\n\t\t$dataRowSentence.find( '.user-selector-summary-row__token' ).on( 'click', () => {\n\t\t\t// Go to the second step.\n\t\t\t\n\t\t\t// Set step\n\t\t\tuserSelectorObject( 'set-step', {\n\t\t\t\tstep: 'set-options'\n\t\t\t});\n\n\t\t\t// Render actions again\n\t\t\tnew Actions();\n\t\t});\n\n\t\t// Add data row\n\t\t$summaryContainer.append( $dataRow );\n\n\t\t// Add fallback row\n\t\tlet $fallbackRow = $( `\n\t\t\t<div class=\"user-selector-summary-row\">\n\t\t\t\t<div class=\"user-selector-summary-row__icon\">\n\t\t\t\t\t<uo-icon id=\"directions\"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"user-selector-summary-row__content\"></div>\n\t\t\t</div>\n\t\t` );\n\n\t\tlet otherwiseText = '';\n\n\t\tif ( UncannyAutomator.recipe.userSelector.source == 'existingUser' ){\n\t\t\tif ( UncannyAutomator.recipe.userSelector.data.existingUser.fallback == 'create-new-user' ){\n\t\t\t\totherwiseText = UncannyAutomator.i18n.userSelector.summary.createNewUser;\n\t\t\t}\n\t\t\telse if ( UncannyAutomator.recipe.userSelector.data.existingUser.fallback == 'do-nothing' ){\n\t\t\t\totherwiseText = UncannyAutomator.i18n.userSelector.summary.doNothing;\n\t\t\t}\n\t\t}\n\t\telse if ( UncannyAutomator.recipe.userSelector.source == 'newUser' ){\n\t\t\tif ( UncannyAutomator.recipe.userSelector.data.newUser.fallback == 'select-existing-user' ){\n\t\t\t\totherwiseText = UncannyAutomator.i18n.userSelector.summary.selectExistingUser;\n\t\t\t}\n\t\t\telse if ( UncannyAutomator.recipe.userSelector.data.newUser.fallback == 'do-nothing' ){\n\t\t\t\totherwiseText = UncannyAutomator.i18n.userSelector.summary.doNothing;\n\t\t\t}\n\t\t}\n\n\t\tlet $fallbackRowSentence = $( `\n\t\t\t<div>\n\t\t\t${\n\t\t\t\tsprintf(\n\t\t\t\t\tUncannyAutomator.i18n.userSelector.summary.otherwise,\n\t\t\t\t\t`<div class=\"user-selector-summary-row__token\">${ otherwiseText }</div>`\n\t\t\t\t)\n\t\t\t}\n\t\t\t</div>`\n\t\t);\n\t\t$fallbackRow.find( '.user-selector-summary-row__content' ).append( $fallbackRowSentence );\n\n\t\t// Listen clicks\n\t\t$fallbackRow.find( '.user-selector-summary-row__token' ).on( 'click', () => {\n\t\t\t// Go to the second step.\n\n\t\t\t// Set step\n\t\t\tuserSelectorObject( 'set-step', {\n\t\t\t\tstep: 'set-options'\n\t\t\t});\n\n\t\t\t// Render actions again\n\t\t\tnew Actions();\n\t\t});\n\n\t\t// Add data row\n\t\t$summaryContainer.append( $fallbackRow );\n\n\t\t// Return nodes\n\t\treturn $optionsContainer;\n\t}\n\n\tcreateItem(){\n\t\t// Get the content\n\t\tconst content = {\n\t\t\t// Step title\n\t\t\tstepTitle: UncannyAutomator.recipe.userSelector.step == 'set-options' ? UncannyAutomator.i18n.userSelector.setOptions : UncannyAutomator.i18n.userSelector.sentenceTitle,\n\n\t\t\t// Support URL\n\t\t\tsupportUrl: addUTMParameters(\n\t\t\t\t'https://automatorplugin.com/knowledge-base/anonymous-recipes/#Introducing_the_User_Selector',\n\t\t\t\t{\n                    'medium':  'user_selector',\n                    'content': 'support_menu_link'\n\t\t    \t}\n\t\t    ),\n\t\t}\n\n\t\t// Create template\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'uap-item', 'uap-item--user-selector', 'item', 'item--user-selector' );\n\n\t\t// Add content\n\t\t$template.innerHTML = `\n\t\t\t<div class=\"uap-item-inner\">\n\t\t\t\t<div class=\"uap-item-sidebar\">\n\t\t\t\t\t<ua-builder-integration-icon code=\"UOA\"></ua-builder-integration-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-item-top-header\">\n\t\t\t\t\t<div class=\"uap-item-top-header-left\">\n\t\t\t\t\t\t${ content.stepTitle }\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"uap-item-top-header-right\">\n\t\t\t\t\t\t<uo-dropdown align=\"right\" items-close-dropdown>\n\t\t\t\t\t\t\t<uo-icon id=\"ellipsis-h\" slot=\"button\"></uo-icon>\n\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href=\"${ content.supportUrl }\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t${ UncannyAutomator.i18n.support }\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</uo-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-item-inner-content\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\t// Return output\n\t\treturn $template;\n\t}\n}\n\nexport default UserSelector;\n","// Import utilities\nimport { getDOMElements } from '@builder/common/utilities';\n\n// Load class that creates the grid with integrations\nimport ItemCreatorIntegrations from '@builder/item/integrations-grid';\n\n/**\n * Adds the initial \"Add action\" button (when there aren't actions)\n */\nexport default class ItemInitialAction {\n\t/**\n\t * Renders the item\n\t * \n\t * @return {undefined}\n\t */\n\tconstructor() {\n\t\t// Create template\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'uap-item', 'uap-item--actions-initial' );\n\n\t\t// Add content\n\t\t$template.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t<div class=\"uap-item-inner\">\n\t\t\t\t<div class=\"uap-item-sidebar\">\n\t\t\t\t\t<div class=\"uap-item-icon\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-item-main\">\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclass=\"uap-item-main-initial-action-button uap-spacing-right uap-spacing-right--xsmall\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.action.add }\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t\t<ua-builder-conditions-add-button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.conditions.addFilter }\n\t\t\t\t\t</ua-builder-conditions-add-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Add to the metabox\n\t\tconst $metabox = getDOMElements( 'metabox', {\n\t\t\ttype: 'action',\n\t\t} ).get(0);\n\n\t\t$metabox.appendChild( $template );\n\n\t\t// Add event listener to the button\n\t\t$template.querySelector( '.uap-item-main-initial-action-button' ).addEventListener( 'click', () => {\n\t\t\t// Show the integrations grid\n\t\t\tnew ItemCreatorIntegrations( 'action' );\n\t\t} );\n\t}\n}\n","import $ from 'jquery';\n\nimport {\n\tgetDOMElements,\n\trestCall,\n}                         from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport { getActionsOrder } from '@builder/item/sortability/utilities';\n\nimport ItemHeaderMenu     from './action-menu.js';\nimport ItemHeaderIcon     from './integration-icon.js';\nimport ItemHeaderTag      from './integration-name.js';\nimport ItemHeaderSentence from './sentence.js';\n\nimport Field              from '../field';\n\nimport Actions            from './actions.js';\n\nclass Closures {\n\n\tconstructor( label ){\n\t\t// Create console group\n\t\t// console.group( 'Closures' );\n\n\t\t// Get metabox\n\t\tthis.elements = {\n\t\t\t$metabox: getDOMElements( 'metabox', { type: 'action' })\n\t\t}\n\n\t\t// Create closures. It's important to understand that we're going to create all the available closures, not only those already added to the item\n\t\t// That's why we create a separate file instead of using Item.js\n\t\t$.each( UncannyAutomator.closures, ( key, closure ) => this.createClosure( closure, label ) );\n\n\t\t// Close console group\n\t\t// console.groupEnd();\n\t}\n\n\tcreateClosure( closure, label ){\n\t\t// Variable to check later if this closure already was added to the recipe\n\t\tlet wasAdded = false;\n\n\t\t// Container\n\t\tlet $container = $( `\n\t\t\t<div class=\"metabox__footer metabox__closures\"></div>\n\t\t` );\n\n\t\t// Checkbox attributes. We're going to use this to create our checkbox later.\n\t\tlet checkboxAttributes = {\n\t\t\tlabel:              label,\n\t\t\tformElementClass:   'form-element--nomargin'\n\t\t}\n\n\t\t// Check if this closure already was added to the recipe\n\t\tlet closureInRecipe = this.getClosureByCodeFromItemsObject( closure.code );\n\n\t\tif ( isDefined( closureInRecipe ) ){\n\t\t\twasAdded = true;\n\n\t\t\tcheckboxAttributes.currentValue = true;\n\t\t\tcheckboxAttributes.itemid       = closureInRecipe.id;\n\t\t}\n\n\t\t// Create checkbox\n\t\tlet checkboxField = new Field( 'checkbox', checkboxAttributes ),\n\t\t\t$checkbox      = checkboxField.getFormElement();\n\n\t\t// Bind changes\n\t\t$checkbox.on( 'change', function(){\n\t\t\tlet isChecked = checkboxField.getValue();\n\t\t\tcheckboxField.startLoadingAnimation();\n\n\t\t\t// Check if it's checked\n\t\t\tif ( isChecked ){\n\t\t\t\t// Add item to the recipe\n\t\t\t\trestCall( 'add', {\n\t\t\t\t\trecipePostID: UncannyAutomator.recipe.id,\n\t\t\t\t\taction:       'add-new-closure',\n\t\t\t\t\titem_code:    closure.code,\n\t\t\t\t\tactions_order: getActionsOrder(),\n\t\t\t\t\tdefault_meta: {\n\t\t\t\t\t\tintegration_name: UncannyAutomator.integrations[ closure.integration ].name,\n\t\t\t\t\t\tsentence:         closure.sentence\n\t\t\t\t\t}\n\t\t\t\t}, ( response ) => {\n\t\t\t\t\tnew Actions();\n\n\t\t\t\t\t// Check if the ID of the new item is defined\n\t\t\t\t\tif ( isDefined( response.post_ID ) ){\n\t\t\t\t\t\t// Get item form element\n\t\t\t\t\t\tconst $newItem = getDOMElements( 'item', {\n\t\t\t\t\t\t\tid: response.post_ID\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Get first token and trigger a click\n\t\t\t\t\t\t$newItem.item.find( '.item-title__token:not(.item-title__token--filled)' ).first().trigger( 'click' );\n\t\t\t\t\t}\n\t\t\t\t}, ( response ) => {\n\t\t\t\t\tconsole.log( ' ERROR-TODO. Couldn\\'t add the closure' );\n\n\t\t\t\t\t// Stop the loading animation\n\t\t\t\t\tcheckboxField.stopLoadingAnimation();\n\n\t\t\t\t\t// Change back the value of the checkbox\n\t\t\t\t\tcheckboxField.setValue( false, false );\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\trestCall( 'delete', {\n\t\t\t\t\tID: closureInRecipe.id\n\t\t\t\t}, () => {\n\t\t\t\t\tnew Actions();\n\t\t\t\t}, () => {\n\t\t\t\t\tconsole.log( ' ERROR-TODO. Couldn\\'t delete the closure' );\n\n\t\t\t\t\tnew Actions();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Append checkbox to the container\n\t\t$container.append( $checkbox );\n\n\t\t// Create toggle section\n\t\tlet $toggleContent = $( '<div/>', { 'class': 'uo-toggle uo-toggle--show' });\n\n\t\t// Check if it was already added. In that case show it\n\t\tif ( wasAdded ){\n\t\t\t$toggleContent.addClass( 'uo-toggle--show' );\n\n\t\t\tlet $item = $( '<div/>', {\n\t\t\t\t'class':   'item item--closure item--margintop uap-item uap-item--closure uap-item--margintop',\n\t\t\t\t'data-id': closureInRecipe.id\n\t\t\t});\n\n\t\t\t// Add header\n\t\t\t$item.append( this.createInnerContent(\n\t\t\t\tUncannyAutomator.recipe.items[ closureInRecipe.id ].integrationCode,\n\t\t\t\t'closure',\n\t\t\t\tclosure.code,\n\t\t\t\tclosureInRecipe.id,\n\t\t\t) );\n\n\t\t\t$toggleContent.append( $item );\n\t\t}\n\t\n\t\t$container.append( $toggleContent );\n\n\t\t// Append everything to the metabox\n\t\tthis.elements.$metabox.append( $container );\n\t}\n\n\t/**\n\t * Creates item header\n\t * \n\t * @since 0.5\n\t *\n\t * @param {string}    integrationCode - The integration code\n\t * @param {string}    itemType - The item type: 'trigger', 'action' or 'closure'\n\t * @param {string}    itemCode - The code of the item\n\t * @param {int}       itemId - The ID of the item\n\t */\n\tcreateInnerContent( integrationCode, itemType, itemCode, itemId ){\n\t\t// Get content\n\t\tconst content = {\n\t\t\t// Icon. The integration icon\n\t\t\t$icon: new ItemHeaderIcon( integrationCode ),\n\n\t\t\t// Integration name tag\n\t\t\t$integrationNameTag: new ItemHeaderTag( {\n\t\t\t\tintegrationId: integrationCode\n\t\t\t} ),\n\n\t\t\t// The action menu. The three dots on the upper right corner.\n\t\t\t$actionMenu: new ItemHeaderMenu( itemType, integrationCode, itemCode, itemId ),\n\n\t\t\t// Closure sentence\n\t\t\t$sentence: new ItemHeaderSentence( itemType, integrationCode, itemCode, itemId )\n\t\t}\n\n\t\t// Create wrapper\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'uap-item-inner' );\n\n\t\t// Add template\n\t\t$template.innerHTML = `\n\t\t\t<div class=\"uap-item-sidebar\"></div>\n\t\t\t<div class=\"uap-item-top-header\">\n\t\t\t\t<div class=\"uap-item-top-header-left\"></div>\n\t\t\t\t<div class=\"uap-item-top-header-right\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"uap-item-main\"></div>\n\t\t\t<div class=\"uap-item-inner-content\"></div>\n\t\t`;\n\n\t\t// Icon. The integration icon\n\t\t$template.querySelector( '.uap-item-sidebar' )\n\t\t\t.appendChild( content.$icon );\n\n\t\t// Add integration name tag\n\t\t$template.querySelector( '.uap-item-top-header-left' )\n\t\t\t.appendChild( content.$integrationNameTag );\n\n\t\t// Add action menu\n\t\t$template.querySelector( '.uap-item-top-header-right' )\n\t\t\t.appendChild( content.$actionMenu.get(0) );\n\n\t\t// The sentence of the closure\n\t\t$template.querySelector( '.uap-item-main' )\n\t\t\t.appendChild( content.$sentence.get(0) );\n\n\t\t// Return the content\n\t\treturn $template;\n\t}\n\n\tgetClosureByCodeFromItemsObject( code ){\n\t\tlet theItem;\n\n\t\t$.each( UncannyAutomator.recipe.items, function( itemID, item ){\n\t\t\tif ( item.itemCode == code ){\n\t\t\t\ttheItem = item;\n\t\t\t}\n\t\t})\n\n\t\treturn theItem;\n\t}\n}\n\nexport default Closures;","// Import styles\nimport './style.scss';\n\n// Import utilities\nimport {\n\tgetDOMElements\n} from '@builder/common/utilities';\n\nconst {\n\tconfirm,\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport {\n\tcanManageConditions,\n\tgetConditionsGroupById,\n\tupdateRemoteConditionsMeta\n} from '@builder/item/conditions/utilities';\n\nimport { shouldBeSortable } from '@builder/item/sortability/utilities';\nimport { getActions } from '@builder/item/actions/utilities';\n\nimport ItemConditionsModalList from '@builder/item/conditions/modal-list';\n// import ConditionPill from '@builder/item/conditions/condition-pill';\n\n// Load class that creates the grid with integrations\nimport ItemCreatorIntegrations from '@builder/item/integrations-grid';\n\nimport { sprintf } from '@wordpress/i18n';\nimport Actions from '@builder/item/actions';\n\n/**\n * Creates the visual representation of the conditions\n */\nexport default class ConditionsBlock {\n\t/**\n\t * Checks if the the parameter is valid and invokes the method to render the conditions block\n\t *\n\t * @param {Object} options                   The options\n\t * @param {Object} options.conditionsGroupId The conditions group ID\n\t * @return {undefined}\n\t */\n\tconstructor( { conditionsGroupId } ) {\n\t\t// Save conditions group\n\t\tthis.conditionsGroupID = conditionsGroupId;\n\n\t\t// Check if the conditions group is defined\n\t\tif ( isDefined( this.conditionsGroup ) ) {\n\t\t\t// Create and render block\n\t\t\tthis.#render();\n\t\t}\n\t}\n\n\t/**\n\t * Creates and renders the node of the conditions block\n\t *\n\t * @return {undefined}\n\t */\n\t#render() {\n\t\t// Create template\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'uap-conditions-block' );\n\n\t\t// Check if the block should be sortable\n\t\tif ( shouldBeSortable( { conditionsGroupID: this.conditionsGroupID } ) ) {\n\t\t\t$template.classList.add( 'uap-conditions-block--sortable' );\n\t\t}\n\n\t\t// Add the conditions group ID\n\t\t$template.setAttribute( 'data-id', this.conditionsGroupID );\n\n\t\t// Save block\n\t\tthis.$block = $template;\n\n\t\t// Add inner content\n\t\t$template.insertAdjacentHTML(\n\t\t\t'beforeEnd',\n\t\t\t`\n\t\t\t<div class=\"uap-conditions-block-logic\">\n\t\t\t\t<div class=\"uap-conditions-block-logic-header\">\n\t\t\t\t\t<div class=\"uap-conditions-block-logic-header-mode\" dir=\"auto\"></div>\n\t\t\t\t\t<div class=\"uap-conditions-block-logic-header-dropdown\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-conditions-block-logic-content\"></div>\n\t\t\t\t<div class=\"uap-conditions-block-logic-footer\">\n\t\t\t\t\t<ua-builder-conditions-add-button \n\t\t\t\t\t\tsize=\"extra-small\" \n\t\t\t\t\t\tcondition-group-id=\"${ this.conditionsGroupID }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.conditions.addBtnLabel }\n\t\t\t\t\t</ua-builder-conditions-add-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"uap-conditions-block-actions\">\n\t\t\t\t<div class=\"uap-conditions-block-actions-list\" data-id=\"${ this.conditionsGroupID }\">\n\t\t\t\t\t<div class=\"uap-conditions-block-items uap-conditions-block-items--instant\"></div>\n\t\t\t\t\t<div class=\"uap-conditions-block-items uap-conditions-block-items--delayed\"></div>\n\t\t\t\t\t<div class=\"uap-conditions-block-items uap-conditions-block-items--scheduled\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-conditions-block-actions-footer\"></div>\n\t\t\t</div>\n\t\t`\n\t\t);\n\n\t\t// Check if the user can manage the block\n\t\t// Otherwise, add a class to the block\n\t\tif ( ! canManageConditions() ) {\n\t\t\t// Add class\n\t\t\tthis.$block.classList.add( 'uap-conditions-block--cannot-manage' );\n\n\t\t\t// Disable the block\n\t\t\tthis.$block.setAttribute( 'disabled', '' );\n\t\t}\n\n\t\t// Create the \"Any/all\" select\n\t\tthis.#addModeSelect();\n\n\t\t// Create the \"...\" icon on the top right corner\n\t\tthis.#addDropdown();\n\n\t\t// Add condition pills\n\t\tthis.#addConditionPills();\n\n\t\t// Add the handle to drag the block\n\t\tthis.#maybeAddDragHandler();\n\n\t\t// Add the warning displayed when Pro is not activated\n\t\tthis.#maybeAddRequiresProWarning();\n\n\t\t// Add warning about delayed and scheduled actions\n\t\tthis.#maybeAddDelayedActionsWarning();\n\n\t\t// Add \"Add another action\" button\n\t\tthis.#addAddActionButton();\n\n\t\t/**\n\t\t * Append to the DOM\n\t\t */\n\n\t\t// Append block before the first action\n\t\tthis.#insertBlock();\n\n\t\t// Move actions inside the block\n\t\tthis.#moveActionsInsideBlock();\n\n\t\t// Listen removed actions\n\t\tthis.#listenRemovedActions();\n\n\t\t/**\n\t\t * Save references to some important elements in the main node\n\t\t */\n\n\t\tthis.$block.$actionsWrapper = this.$actionsWrapper;\n\t}\n\n\t/**\n\t * Inserts the node of the block in the DOM\n\t *\n\t * @return {undefined}\n\t */\n\t#insertBlock() {\n\t\t// Output if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log( `${ this.conditionsGroup.id }: Insert block` );\n\t\t}\n\n\t\t// Check if the conditions group has actions\n\t\t// And add it above the first one\n\t\tif ( this.conditionsGroup.hasActions ) {\n\t\t\t// Get the element of the first actions of the conditions\n\t\t\tconst $lowestPriorityAction = getDOMElements( 'item', {\n\t\t\t\tid: this.conditionsGroup.actionWithLowestPriority,\n\t\t\t} ).item.get( 0 );\n\n\t\t\t// Insert block before the action\n\t\t\t$lowestPriorityAction.insertAdjacentElement( 'beforeBegin', this.$block );\n\n\t\t\t// Output if the developer mode is enabled\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log( `${ this.conditionsGroup.id }: The block has actions, so we'll use the position of the first instant action or delayed/scheduled if all are delayed/scheduled` );\n\t\t\t\tconsole.log( $lowestPriorityAction );\n\t\t\t}\n\n\t\t\t// Stop here\n\t\t\treturn true;\n\t\t}\n\n\t\t// If it doesn't have action, check if it has a custom priority\n\t\tif ( ! isEmpty( this.conditionsGroup.priority ) ) {\n\t\t\t// Try to add find the position\n\t\t\tconst actions = getActions( { type: 'instant' } );\n\n\t\t\t// Get the first action that has a HIGHEST priority and add it before that one\n\t\t\tlet targetActionID;\n\n\t\t\tactions.every( ( action ) => {\n\t\t\t\t// Get the priority\n\t\t\t\tconst actionPriority = action.menuOrder;\n\n\t\t\t\tif ( actionPriority > this.conditionsGroup.priority ) {\n\t\t\t\t\t// We found the ID, return it\n\t\t\t\t\ttargetActionID = action.id;\n\t\t\t\t\t\n\t\t\t\t\t// Stop here\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t} );\n\n\t\t\t// Check if the ID is defined. If it's not defined, it means this block has the highest priority, so it should go last\n\t\t\t// The code outside of this condition will handle that\n\t\t\tif ( ! isEmpty( targetActionID ) ) {\n\t\t\t\t// Get the action node\n\t\t\t\tconst $targetAction = getDOMElements( 'item', { id: targetActionID } ).item.get( 0 );\n\n\t\t\t\t// If the action is NOT inside a condition block, render the condition block before the action\n\t\t\t\tif ( ! UncannyAutomator.recipe.items[ targetActionID ].hasConditions ) {\n\t\t\t\t\t// Insert block before the action\n\t\t\t\t\t$targetAction\n\t\t\t\t\t\t.insertAdjacentElement( 'beforeBegin', this.$block );\n\t\t\t\t} else {\n\t\t\t\t\t// If the action IS inside a conditions block, render this block outside its conditions block\n\t\t\t\t\ttry {\n\t\t\t\t\t\t$targetAction.closest( '.uap-conditions-block' )\n\t\t\t\t\t\t\t.insertAdjacentElement( 'beforeBegin', this.$block );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( `${ this.conditionsGroup.id }: Couldn't set the conditions block in the correct position.` );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Insert block before the action\n\t\t\t\t\t\t$targetAction\n\t\t\t\t\t\t\t.insertAdjacentElement( 'beforeBegin', this.$block );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.log( `${ this.conditionsGroup.id }: The block doesn't have actions, but has a custom priority set (${ this.conditionsGroup.priority }). We've used this priority to set it before an action with a higher priority` );\n\t\t\t\t\tconsole.log( $targetAction );\n\t\t\t\t}\n\n\t\t\t\t// Stop here\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Output if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log( `${ this.conditionsGroup.id }: We couldn't find where to add the conditions block, so it will be added first, before instant actions` );\n\t\t}\n\n\t\t// If it doesn't have actions, add it at the bottom\n\t\tconst $instantActionsContainer = getDOMElements( 'itemsContainer', { type: 'action', actionContext: 'instant' } );\n\t\t\n\t\t// Add it at the bottom\n\t\t$instantActionsContainer.insertAdjacentElement( 'beforeEnd', this.$block );\t\n\t}\n\n\t/**\n\t * Creates the \"Any/all\" select\n\t * Consider that the select won't be added if there is only one condition\n\t * The one that contains the \"Run if any of the following conditions are met\"\n\t *\n\t * @return {undefined}\n\t */\n\t#addModeSelect() {\n\t\t// Render different versions of the header based on the number of conditions\n\t\t// Check if there are none or there is only one, render just the text without the select\n\t\tif ( this.conditionsGroup.numberOfConditions <= 1 ) {\n\t\t\t// Add content\n\t\t\tthis.$logicHeaderModeWrapper.insertAdjacentHTML(\n\t\t\t\t'beforeEnd',\n\t\t\t\t`\n\t\t\t\t${ UncannyAutomator.i18n.conditions.runIf }\n\t\t\t`\n\t\t\t);\n\t\t} else if ( this.conditionsGroup.numberOfConditions > 1 ) {\n\t\t\t// If there is more than one, render the select\n\t\t\t// Get the current mode\n\t\t\tconst mode = this.conditionsGroup.mode;\n\n\t\t\t// Wrap text inside the curly brackets inside an span\n\t\t\tconst runIfText = UncannyAutomator.i18n.conditions.runIfAnyFull.replaceAll(\n\t\t\t\t/\\{\\{(.*)\\}\\}/gm,\n\t\t\t\t( fullMatch, content ) => `<span>${ content }</span>`\n\t\t\t);\n\n\t\t\t// Add options\n\t\t\tconst content = sprintf(\n\t\t\t\trunIfText,\n\t\t\t\t`\n\t\t\t\t<uo-select>\n\t\t\t\t\t<uo-select-option\n\t\t\t\t\t\tvalue=\"any\"\n\t\t\t\t\t\ttext=\"${ UncannyAutomator.i18n.conditions.any }\"\n\t\t\t\t\t\t${ mode == 'any' ? 'selected' : '' }\n\t\t\t\t\t></uo-select-option>\n\n\t\t\t\t\t<uo-select-option\n\t\t\t\t\t\tvalue=\"all\"\n\t\t\t\t\t\ttext=\"${ UncannyAutomator.i18n.conditions.all }\"\n\t\t\t\t\t\t${ mode == 'all' ? 'selected' : '' }\n\t\t\t\t\t></uo-select-option>\n\t\t\t\t</uo-select>\n\t\t\t`\n\t\t\t);\n\n\t\t\t// Add content\n\t\t\tthis.$logicHeaderModeWrapper.insertAdjacentHTML( 'beforeEnd', content );\n\n\t\t\t// Handle events in \"any/all\" select\n\t\t\tthis.#handleLogicOperatorSelect();\n\t\t}\n\t}\n\n\t/**\n\t * Creates the \"...\" icon on the top right corner\n\t */\n\t#addDropdown() {\n\t\t// Add the dropdown\n\t\tthis.$logicHeaderDropdownWrapper.innerHTML = `\n\t\t\t<uo-dropdown align=\"right\">\n\t\t\t\t<uo-icon id=\"ellipsis-h\" slot=\"button\"></uo-icon>\n\n\t\t\t\t<ul>\n\t\t\t\t\t<li data-action=\"delete\">\n\t\t\t\t\t\t${ UncannyAutomator.i18n.delete }\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</uo-dropdown>\n\t\t`;\n\n\t\t// Listen clicks to the items\n\t\tthis.$logicHeaderDropdownWrapper\n\t\t\t.querySelector( 'uo-dropdown' )\n\t\t\t.addEventListener( 'automator/dropdown/item-clicked', ( event ) => {\n\t\t\t\t// Get the action\n\t\t\t\t// event.detail.item has the Node of the li, the li has a dataset with the action\n\t\t\t\tconst action = event.detail.item.dataset.action;\n\n\t\t\t\t// Check if the user is trying to delete the conditions group\n\t\t\t\tif ( action == 'delete' ) {\n\t\t\t\t\t// Set loading animation on the item\n\t\t\t\t\tevent.detail.item.setAttribute( 'loading', '' );\n\n\t\t\t\t\t// Delete the conditions group\n\t\t\t\t\tthis.conditionsGroup.destroy();\n\n\t\t\t\t\t// Update data in the database\n\t\t\t\t\tupdateRemoteConditionsMeta( {\n\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\t/**\n\t * Adds the warning displayed when users don't have Pro activated\n\t *\n\t * @return {undefined}\n\t */\n\t#maybeAddRequiresProWarning() {\n\t\t// Check if the user can't manage conditions\n\t\tif ( ! canManageConditions() ) {\n\t\t\t// Create the warning title\n\t\t\t// Get the number of actions to get the singular or plural message\n\t\t\tconst warningTitle =\n\t\t\t\tthis.conditionsGroup.numberOfActions == 1\n\t\t\t\t\t? UncannyAutomator.i18n.conditions.actionWontRun\n\t\t\t\t\t: UncannyAutomator.i18n.conditions.actionsWontRun;\n\n\t\t\t// Create the warning content\n\t\t\t// Get the number of actions to get the singular or plural message\n\t\t\tconst warningContent = this.conditionsGroup.numberOfActions == 1\n\t\t\t\t? UncannyAutomator.i18n.conditions.actionWontRunContent\n\t\t\t\t: UncannyAutomator.i18n.conditions.actionsWontRunContent;\n\n\t\t\t// Insert warning before the actions\n\t\t\tthis.$actionsWrapper.insertAdjacentHTML(\n\t\t\t\t'beforeBegin',\n\t\t\t\t`\n\t\t\t\t<div class=\"uap-conditions-block-warning\">\n\t\t\t\t\t<uo-alert \n\t\t\t\t\t\ttype=\"warning\" \n\t\t\t\t\t\theading=\"${ warningTitle }\" \n\t\t\t\t\t\tno-radius\n\t\t\t\t\t>\n\t\t\t\t\t\t${ sprintf( warningContent, `<strong>${  UncannyAutomator.i18n.uncannyAutomatorPro  }</strong>` ) }\n\t\t\t\t\t</uo-alert>\n\t\t\t\t</div>\n\t\t\t`\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * The order of the conditions might be confusing if users have delayed and scheduled actions inside the conditions block\n\t * Add a warning\n\t */\n\t#maybeAddDelayedActionsWarning() {\n\t\t// If it doesn't have instant actions, there is no point with adding the alert\n\t\tif ( ! this.conditionsGroup.hasInstantActions ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If it HAS instant actions, but doesn't have delayed or scheduled, then there is also no point\n\t\tif ( ! this.conditionsGroup.hasDelayedActions && ! this.conditionsGroup.hasScheduledActions ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// We have to add a warning to avoid confusing users\n\t\tconst $notice = document.createElement( 'uo-alert' );\n\t\t$notice.classList.add( 'uap-conditions-block-actions-order-notice' );\n\t\t$notice.setAttribute( 'size', 'small' );\n\t\t$notice.setAttribute( 'type', 'info' );\n\t\t$notice.setAttribute( 'no-radius', '' );\n\t\t$notice.innerText = UncannyAutomator.i18n.conditions.otherActionsMightRunBefore;\n\n\t\t// Add the notice\n\t\t// At this point we can assume it has instant actions, so add the notice after that wrapper\n\t\tthis.$actionsWrappers.instant.insertAdjacentElement( 'afterEnd', $notice );\n\t}\n\n\t/**\n\t * Handle events in the \"any/all\" select\n\t *\n\t * @return {undefined}\n\t */\n\t#handleLogicOperatorSelect() {\n\t\t// Listen changes on the event\n\t\tthis.$logicOperatorSelect.addEventListener( 'change', () => {\n\t\t\t// Get current value\n\t\t\tconst currentValue = this.$logicOperatorSelect.value;\n\n\t\t\t// Update the conditions group mode\n\t\t\tthis.conditionsGroup.mode = currentValue;\n\n\t\t\t// Update data in the database\n\t\t\tupdateRemoteConditionsMeta( {} );\n\t\t} );\n\t}\n\n\t/**\n\t * Moves the actions inside the block\n\t *\n\t * @return {undefined}\n\t */\n\t#moveActionsInsideBlock() {\n\t\t// Check if it has actions\n\t\tif ( ! this.conditionsGroup.hasActions ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get actions\n\t\tconst actions = {\n\t\t\tinstant: getActions( { type: 'instant', includeOnly: this.conditionsGroup.actions } ),\n\t\t\tdelayed: getActions( { type: 'delayed', includeOnly: this.conditionsGroup.actions } ),\n\t\t\tscheduled: getActions( { type: 'scheduled', includeOnly: this.conditionsGroup.actions } ),\n\t\t} \n\n\t\t// Iterate actions inside this conditions group\n\t\tObject.entries( actions ).forEach( ( [ actionType, items ] ) => {\n\t\t\t// Get wrapper\n\t\t\tconst $wrapper = this.$actionsWrappers[ actionType ];\n\n\t\t\t// Iterate the items\n\t\t\titems.forEach( ( action ) => {\n\t\t\t\t// Get the node of the action\n\t\t\t\tconst $actionNode = getDOMElements( 'item', {\n\t\t\t\t\tid: action.id,\n\t\t\t\t} ).item.get( 0 );\n\n\t\t\t\t// Move it inside the actions wrapper\n\t\t\t\t$wrapper.appendChild( $actionNode );\n\t\t\t} );\n\t\t} );\n\n\t\t// // Remove empty wrappers\n\t\t// Object.values( this.$actionsWrappers ).forEach( ( $wrapper ) => {\n\t\t// \tif ( ! $wrapper.querySelector( '.uap-item' ) ) {\n\t\t// \t\t$wrapper.remove();\n\t\t// \t}\n\t\t// } );\n\t}\n\n\t/**\n\t * Adds condition pills\n\t *\n\t * @return {undefined}\n\t */\n\t#addConditionPills() {\n\t\t// Check if there are conditions\n\t\tif ( this.conditionsGroup.hasConditions ) {\n\t\t\t// Iterate conditions\n\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\tObject.entries( this.conditionsGroup.conditions ).forEach( ( [ conditionId, condition ] ) => {\n\t\t\t\t// Create and add the pill\n\t\t\t\tthis.$conditionPillsWrapper.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t<ua-builder-conditions-pill\n\t\t\t\t\t\tcondition-group-id=\"${ this.conditionsGroupID }\"\n\t\t\t\t\t\tcondition-id=\"${ conditionId }\"\n\t\t\t\t\t></ua-builder-conditions-pill>\n\t\t\t\t` );\n\t\t\t} );\n\t\t} else {\n\t\t\t// Add \"No conditions\" message\n\t\t\tthis.$conditionPillsWrapper.insertAdjacentHTML(\n\t\t\t\t'beforeEnd',\n\t\t\t\t`\n\t\t\t\t<span class=\"uap-conditions-block-logic-content-empty\">\n\t\t\t\t\t${ UncannyAutomator.i18n.conditions.noConditions }\n\t\t\t\t</span>\n\t\t\t`\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Adds a handle for the sortable library\n\t *\n\t * @return {undefined}\n\t */\n\t#maybeAddDragHandler() {\n\t\t// Check if this should be draggable\n\t\tif ( shouldBeSortable( { conditionsGroupID: this.conditionsGroupID } ) ) {\n\t\t\t// Create handler\n\t\t\tconst $handler = document.createElement( 'div' );\n\t\t\t$handler.classList.add( 'uap-item-drag-handle' );\n\n\t\t\t// Add icon\n\t\t\t$handler.innerHTML = `<uo-icon id=\"bars-regular\"></uo-icon>`;\n\n\t\t\t// Add it to the block\n\t\t\tthis.$block.insertAdjacentElement( 'afterBegin', $handler );\n\t\t}\n\t}\n\n\t/**\n\t * Add button to add actions inside the conditions block\n\t *\n\t * @return {undefined}\n\t */\n\t#addAddActionButton() {\n\t\t// Create button\n\t\tthis.$actionsFooterWrapper.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t<uo-button\n\t\t\t\tcolor=\"secondary\"\n\t\t\t\tsize=\"small\"\n\t\t\t>\n\t\t\t\t${ UncannyAutomator.i18n.action.addAnother }\n\t\t\t</uo-button>\n\t\t` );\n\n\t\t// Get button\n\t\tconst $addButton = this.$actionsFooterWrapper.querySelector( 'uo-button' );\n\n\t\t$addButton.addEventListener( 'click', () => {\n\t\t\tnew ItemCreatorIntegrations( 'action', null, {\n\t\t\t\tconditionsGroupID: this.conditionsGroupID\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Listens when actions are removed and asks the user if they want to remove the conditions block\n\t */\n\t#listenRemovedActions() {\n\t\tthis.$block.addEventListener( 'automator/conditions-group/remove-action', ( event ) => {\n\t\t\t// Check if the conditions block is empty\n\t\t\tif ( this.conditionsGroup.hasActions ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// Ask the user if they want to remove the conditions block\n\t\t\tconfirm( {\n\t\t\t\tcloseOnConfirm: false,\n\t\t\t\t\n\t\t\t\theading: UncannyAutomator.i18n.conditions.wantToRemoveConditionsGroup.heading,\n\t\t\t\tcontent: '',\n\t\t\t\tcancelButtonLabel: UncannyAutomator.i18n.conditions.wantToRemoveConditionsGroup.cancelButtonLabel,\n\t\t\t\tconfirmButtonLabel: UncannyAutomator.i18n.conditions.wantToRemoveConditionsGroup.confirmButtonLabel\n\t\t\t} ).then( ( $dialog ) => {\n\t\t\t\t// Get the dialog\n\t\t\t\t$dialog = $dialog.value;\n\n\t\t\t\t// Get confirm button\n\t\t\t\tconst $confirmButton = $dialog.querySelector( '.uap-confirm-btn-primary' ); \n\n\t\t\t\t// Start loading animation\n\t\t\t\t$confirmButton.setAttribute( 'loading', '' );\n\n\t\t\t\t// Delete the conditions group\n\t\t\t\tthis.conditionsGroup.destroy();\n\n\t\t\t\t// Update data in the database\n\t\t\t\tupdateRemoteConditionsMeta( {\n\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t// Close dialog\n\t\t\t\t\t\t$dialog.close();\n\n\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the conditions group\n\t * \n\t * @return {ConditionsGroup} The conditions group of this conditions block\n\t */\n\tget conditionsGroup() {\n\t\treturn getConditionsGroupById( {\n\t\t\tconditionsGroupId: this.conditionsGroupID,\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the node of the button used to add conditions\n\t *\n\t * @return {Node} The button\n\t */\n\tget $addConditionButton() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-add-condition-btn' );\n\t}\n\n\t/**\n\t * Returns the wrapper of the condition pills\n\t *\n\t * @return {Node} The wrapper\n\t */\n\tget $conditionPillsWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-content' );\n\t}\n\n\t/**\n\t * Returns the header of the logic wrapper\n\t *\n\t * @return {Node} The header\n\t */\n\tget $logicHeader() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-header' );\n\t}\n\n\t/**\n\t * Returns the wrapper for the Mode select\n\t *\n\t * @return {Node} The wrapper\n\t */\n\tget $logicHeaderModeWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-header-mode' );\n\t}\n\n\t/**\n\t * Returns the wrapper for the \"...\" icon\n\t *\n\t * @return {Node} The wrapper\n\t */\n\tget $logicHeaderDropdownWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-header-dropdown' );\n\t}\n\n\t/**\n\t * Returns the node of the \"any/all\" select\n\t *\n\t * @return {Node} The select\n\t */\n\tget $logicOperatorSelect() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-header uo-select' );\n\t}\n\n\t/**\n\t * Returns the footer of the logic wrapper\n\t *\n\t * @return {Node} The footer\n\t */\n\tget $logicFooter() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-logic-footer' );\n\t}\n\n\t/**\n\t * Returns the node of the wrapper that contains the actions inside a block\n\t *\n\t * @return {Node} The wrapper\n\t */\n\tget $actionsWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-actions-list' );\n\t}\n\n\t/**\n\t * Returns the wrappers to add the actions\n\t */\n\tget $actionsWrappers() {\n\t\treturn {\n\t\t\tinstant: this.$actionsInstantWrapper,\n\t\t\tdelayed: this.$actionsDelayedWrapper,\n\t\t\tscheduled: this.$actionsScheduledWrapper\n\t\t}\n\t}\n\n\t/**\n\t * Returns the Node of the wrapper of the instant actions\n\t *\n\t * @return {Node} The wrapper\n\t */\n\tget $actionsInstantWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-items--instant' );\n\t}\n\n\t/**\n\t * Returns the Node of the wrapper of the delayed actions\n\t *\n\t * @return {Node} The wrapper\n\t */\n\t get $actionsDelayedWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-items--delayed' );\n\t}\n\n\t/**\n\t * Returns the Node of the wrapper of the scheduled actions\n\t *\n\t * @return {Node} The wrapper\n\t */\n\t get $actionsScheduledWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-items--scheduled' );\n\t}\n\n\t/**\n\t * Returns the node of the wrapper that contains the actions related to the actions\n\t *\n\t * @return {Node} The wrapper\n\t */\n\t get $actionsFooterWrapper() {\n\t\treturn this.$block.querySelector( '.uap-conditions-block-actions-footer' );\n\t}\n}\n","// Import utilities\nimport { recipeHasConditions } from '@builder/item/conditions/utilities';\nimport ConditionsBlock from '@builder/item/conditions/conditions-block';\n\n/**\n * Renders conditions in the actions metabox\n */\nexport default class RenderConditions {\n\t/**\n\t * Checks if the recipe has conditions and renders them\n\t *\n\t * @return {undefined}\n\t */\n\tconstructor() {\n\t\t// Check if the recipe has conditions\n\t\tif ( recipeHasConditions() ) {\n\t\t\t// Render conditions\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\t/**\n\t * Renders the conditions\n\t *\n\t * @return {undefined}\n\t */\n\trender() {\n\t\t// Iterate conditions\n\t\tObject.values( UncannyAutomator.recipe.conditions )\n\t\t\t// Render conditions with actions first, as we need some help from the other conditions blocks\n\t\t\t// to know where to render blocks without actions\n\t\t\t.sort( conditionsGroup => conditionsGroup.actions.length > 0 ? -1 : 1 )\n\t\t\t.forEach( ( conditionsGroup ) => {\n\t\t\t\t// Create block of conditions\n\t\t\t\tnew ConditionsBlock( {\n\t\t\t\t\tconditionsGroupId: conditionsGroup.id,\n\t\t\t\t} );\n\t\t\t} );\n\t}\n}\n","// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tgetURLParameter\n} = _uo.utility;\n\nimport { getDOMElements } from '../common/utilities.js';\nimport { getActions } from '@builder/item/actions/utilities';\nimport { isAutomatorProActive } from '@builder/utilities';\n\nimport MakeSortable from '@builder/item/sortability/make-sortable';\n\nimport UserSelector             from '../user-selector/user-selector.js';\n\nimport MetaboxItems             from '../metabox/items.js';\nimport MetaboxFooter            from '../metabox/footer.js';\n\nimport ItemInitialAction        from './item-initial-action.js';\nimport Closures                 from './closures.js';\nimport ItemCreatorIntegrations  from './integrations-grid.js';\n\nimport RenderConditions from '@builder/item/conditions/render';\n\nexport default class Actions {\n\t/**\n\t * Renders all the actions in the UI\n\t */\n\tconstructor(){\n\t\t// Clear the metabox\n\t\tthis.clearActionsMetabox();\n\n\t\t// Check if we have to create the User Selector\n\t\tif ( UncannyAutomator.recipe.type == 'anonymous' ){\n\t\t\t// Create User Selector\n\t\t\tnew UserSelector();\n\t\t}\n\n\t\t// Check if it has actions\n\t\tif ( ! isEmpty( getActions( {} ) ) || ! isEmpty( UncannyAutomator.recipe.conditions ) ) {\n\t\t\t// Check if it's Pro\n\t\t\tif ( isAutomatorProActive() ) {\n\t\t\t\t// Render delayed, scheduled and filtered actions\n\t\t\t\tthis.renderProUI();\n\t\t\t} else {\n\t\t\t\t// Render simple UI\n\t\t\t\tthis.renderFreeUI();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.renderAddNewAction();\n\t\t}\n\t}\n\n\t/**\n\t * Renders delayed, scheduled and filtered actions\n\t */\n\trenderProUI() {\n\t\t// Get actions\n\t\tconst actions = {\n\t\t\tinstant: getActions( { type: 'instant' } ),\n\t\t\tdelayed: getActions( { type: 'delayed' } ),\n\t\t\tscheduled: getActions( { type: 'scheduled' } )\n\t\t}\n\n\t\t// Check if it has delayed or scheduled actions\n\t\tif ( ! isEmpty( actions.delayed ) || ! isEmpty( actions.scheduled ) ) {\n\t\t\t// Render instant actions\n\t\t\tnew MetaboxItems( 'action', actions.instant, {\n\t\t\t\twrapperClass: 'uap-items--actions-instant'\n\t\t\t} );\n\t\t\t\n\t\t\t// Add Closures\n\t\t\t// Add action button\n\t\t\tnew MetaboxFooter( 'action' );\n\t\t\t\n\t\t\tnew Closures( UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly );\n\t\t\t\n\t\t\t// Render async actions\n\t\t\tnew MetaboxItems( 'action', actions.delayed, {\n\t\t\t\twrapperClass: 'uap-items--actions-delayed'\n\t\t\t} );\n\n\t\t\tnew MetaboxItems( 'action', actions.scheduled, {\n\t\t\t\twrapperClass: 'uap-items--actions-scheduled'\n\t\t\t} );\n\t\t} else {\n\t\t\t// Render non-async actions\n\t\t\tnew MetaboxItems( 'action', actions.instant, {\n\t\t\t\twrapperClass: 'uap-items--actions-instant'\n\t\t\t} );\n\n\t\t\t// Add action button\n\t\t\tnew MetaboxFooter( 'action' );\n\n\t\t\t// Add closures\n\t\t\tnew Closures( UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly );\n\t\t}\n\n\t\t// Render conditions\n\t\tnew RenderConditions();\n\n\t\t// Check if we have to show the integrations on load\n\t\tif ( this.isContinuingIntegrationConnection() ){\n\t\t\t// Check if the user wants to add the new action inside a condition\n\t\t\tconst conditionsGroupID = getURLParameter( null, 'ua_connecting_integration_condition' );\n\t\t\tconst integrationGridAttributes = {}\n\n\t\t\tif ( ! isEmpty( conditionsGroupID ) ) {\n\t\t\t\tintegrationGridAttributes.conditionsGroupID = conditionsGroupID;\n\t\t\t}\n\n\t\t\t// Render the integrations list\n\t\t\tnew ItemCreatorIntegrations( 'action', null, integrationGridAttributes ); \n\t\t}\n\n\t\t// Make the actions and conditions sortable\n\t\tnew MakeSortable();\n\t}\n\n\t/**\n\t * Renders all actions in order. Don't separate them based on filters or delay\n\t */\n\trenderFreeUI() {\n\t\t// Get all actions\n\t\tconst actions = getActions( {} );\n\n\t\tnew MetaboxItems( 'action', actions, {\n\t\t\twrapperClass: 'uap-items--actions-instant'\n\t\t} );\n\n\t\t// Add action button\n\t\tnew MetaboxFooter( 'action' );\n\n\t\t// Check if we have to show the integrations on load\n\t\tif ( this.isContinuingIntegrationConnection() ){\n\t\t\t// Render the integrations list\n\t\t\tnew ItemCreatorIntegrations( 'action' );\n\t\t}\n\n\t\t// Add closures\n\t\tnew Closures( UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly );\n\n\t\t// Make the actions and conditions sortable\n\t\tnew MakeSortable();\n\t}\n\n\t/**\n\t * Renders the first step, where the user only sees one button to add the first action\n\t */\n\trenderAddNewAction() {\n\t\t// Render the first step of the item creator\n\t\tnew ItemInitialAction();\n\n\t\t// Check if we have to show the integrations on load\n\t\tif ( this.isContinuingIntegrationConnection() ){\n\t\t\t// Render the integrations list\n\t\t\tnew ItemCreatorIntegrations( 'action' );\n\t\t}\n\t\t\n\t\t// Add closures\n\t\tnew Closures( UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly );\n\t}\n\n\t/**\n\t * Connect integration\n\t * We'll use this to continue with the process of connecting a premium integration after reloading the page\n\t * \n\t * @return {Boolean} `true` if it should conitnue with the connection process. This will open the dialog.\n\t */\n\tisContinuingIntegrationConnection(){\n\t\treturn getURLParameter( null, 'ua_connecting_integration' ) == 1 && getURLParameter( null, 'ua_connecting_integration_context' ) == 'action';\n\t}\n\n\t/**\n\t * Clears all the content of the actions metabox\n\t */\n\tclearActionsMetabox() {\n\t\t// Get and clear metabox\n\t\tlet $metabox = getDOMElements( 'metabox', { type: 'action' } ).get(0);\n\t\t$metabox.innerHTML = '';\n\t}\n}\n","const { isDefined } = _uo.utility;\nimport { itemsObject } from '@builder/common/utilities';\n\n/**\n * Sorts and filters actions by type\n * \n * @param {Object} options The settings\n * @param {String} options.type The action type: instant, delayed, scheduled\n * @param {String} options.includeOnly An array with actions ID. Only those should be included\n * @param {String} options.exclude An array with actions ID. Only those should be excluded\n * @returns Array with the actions, sorted\n */\nconst getActions = ( { type, includeOnly, exclude } ) => {\n    // Default options\n    const options = {\n        orderBy: 'menuOrder',\n        orderByType: 'int',\n        format: 'array',\n        filter: {\n            itemType: 'action'\n        }\n    }\n\n    // If the type is not defined, invoke this function to return all actions in order\n    if ( ! isDefined( type ) ) {\n        return [\n            ...getActions( { type: 'instant', includeOnly: includeOnly, exclude: exclude } ),\n            ...getActions( { type: 'delayed', includeOnly: includeOnly, exclude: exclude } ),\n            ...getActions( { type: 'scheduled', includeOnly: includeOnly, exclude: exclude } ),\n        ];\n    }\n\n    // Return the different types of actions\n    switch ( type ) {\n        case 'instant':\n            // Return only instant actions\n            options.filter.isScheduled = false;\n            options.filter.isDelayed = false;\n\n            break;\n\n        case 'delayed':\n            // Return only delayed actions\n            options.filter.isScheduled = false;\n            options.filter.isDelayed = true;\n            options.orderBy = 'delayInSeconds';\n\n            break;\n\n        case 'scheduled':\n            // Return only scheduled actions\n            options.filter.isScheduled = true;\n            options.filter.isDelayed = false;\n            options.orderBy = 'scheduleNumber';\n\n            break;\n    }\n\n    // Check if we should include only some specific actions\n    if ( isDefined( includeOnly ) ) {\n        options.includeOnly = includeOnly;\n    } \n\n    // Check if we should include only some specific actions\n    if ( isDefined( exclude ) ) {\n        options.exclude = exclude;\n    }\n\n    return itemsObject( 'get', options );\n}\n\nexport default getActions;\n","const { isDefined } = _uo.utility;\n\nimport { getActions } from '@builder/item/actions/utilities';\n\n/**\n * Returns all the actions that PROBABLY run before a specific action.\n * We say \"probably\" because we're also adding scheduled actions for delayed actions, and\n * delayed actions for scheduled actions, but we're not 100% sure those will be available\n */\nconst getActionsThatRunBefore = ( actionID ) => {\n    // Get the action\n    const action = UncannyAutomator.recipe.items[ actionID ];\n\n    // Check if the action is defined\n    if ( ! isDefined( action ) ) {\n        return [];\n    }\n\n    // Array with all the actions\n    const actions = [];\n\n    // Get all actions in order\n    const instantActions = getActions( { type: 'instant' } );\n\n    // If the action is instant, then return only the actions with a lower priority\n    if ( ! ( action.isDelayed || action.isScheduled ) ) {\n        actions.push(\n            ...instantActions.slice( 0, instantActions.findIndex( action => action.id === actionID ) )\n        );\n    }\n\n    // If it's delayed, push all the scheduled actions, and delayed actions with a lower delay\n    if ( action.isDelayed ) {\n        // Add all instant actions\n        actions.push(\n            ...instantActions\n        );\n\n        // Add all scheduled actions\n        actions.push(\n            ...getActions( { type: 'scheduled' } )\n        );\n\n        // All delayed actions with a lower delay\n        const delayedActions = getActions( { type: 'delayed' } );\n        actions.push(\n            ...delayedActions.slice( 0, delayedActions.findIndex( action => action.id === actionID ) )\n        );\n    }\n\n    // If it's scheduled, push all the delayed actions, and scheduled actions with a lower date\n    if ( action.isScheduled ) {\n        // Add all instant actions\n        actions.push(\n            ...instantActions\n        );\n        \n        // Add all delayed actions\n        actions.push(\n            ...getActions( { type: 'delayed' } )\n        );\n\n        // All scheduled actions with a lower delay\n        const scheduledActions = getActions( { type: 'scheduled' } );\n        actions.push(\n            ...scheduledActions.slice( 0, scheduledActions.findIndex( action => action.id === actionID ) )\n        );\n    }\n\n    return actions;\n}\n\nexport default getActionsThatRunBefore;\n","// Import utilities\nconst {\n\tisEmpty,\n\tisDefined,\n\tgetUniqueID\n} = _uo.utility;\n\nimport {\n\tparseDynamicSentence\n} from '@builder/utilities';\n\nimport {\n\tgetConditionPostData\n} from '@builder/item/conditions/utilities';\n\nimport {\n\tgetIntegrationByCode\n} from '@builder/integrations/utilities';\n\n/**\n * Creates a condition\n */\nexport default class Condition {\n\t// Properties\n\tintegrationCode = '';\n\n\tconditionCode = '';\n\n\t/**\n\t * The value of the fields\n\t *\n\t * @type {Object}\n\t */\n\tfields = {};\n\n\t/**\n\t * This is ONLY used if the condition is missing\n\t *\n\t * @type {Object}\n\t */\n\tbackup = {};\n\n\t/**\n\t * The ConditionsGroup of this condition\n\t *\n\t * @type {ConditionGroup}\n\t */\n\tconditionsGroup;\n\n\t/**\n\t * Creates an unique ID\n\t *\n\t * @param {Object} options Object with options\n\t * @param {String} id String with unique ID to target this conditions block\n\t * \n\t * @return {undefined}\n\t */\n\tconstructor( { id } ) {\n\t\t// Get or create unique ID\n\t\tthis.id = ! isEmpty( id ) ? id : getUniqueID();\n\t}\n\n\t/**\n\t * Checks whether a condition is missing\n\t *\n\t * @return {Boolean} True if it's missing\n\t */\n\tget isMissing() {\n\t\t// Check if the condition is defined in the PHP\n\t\treturn ! isDefined( this.conditionPostData );\n\t}\n\n\t/**\n\t * Returns an object with sanitazed data for the backend\n\t *\n\t * @return {Object} Sanitazed data\n\t */\n\tget formattedForMeta() {\n\t\t// Default response\n\t\tlet conditionForMeta = {};\n\n\t\t/**\n\t\t * The backend expects\n\t\t *\n\t\t * {\n\t\t * \t integration: 'WP', // String with the integration code\n\t\t * \t condition: 'TOKEN_MEETS_CONDITION', // String with the condition code\n\t\t * \t fields: { // Object with the field values\n\t\t * \t   FIELD_ID: 'Field value',\n\t\t * \t   FIELD_ID_2: 'Field value'\n\t\t * \t },\n\t\t * \t backup: { // Object with data used when the condition is missing\n\t\t * \t   nameDynamic: '', // The name of the sentence\n\t\t * \t   integrationName: '', // The name of the integration\n\t\t * \t }\n\t\t * }\n\t\t */\n\t\tconditionForMeta = {\n\t\t\tid: this.id,\n\n\t\t\tintegration: this.integrationCode,\n\t\t\tcondition: this.conditionCode,\n\t\t\tfields: this.fields,\n\n\t\t\t// We will save this just in case the condition gets removed in the future\n\t\t\t// If the condition is missing, DON'T UPDATE the value, otherwise it will get removed\n\t\t\tbackup: this.isMissing ? this.backup : {\n\t\t\t\t// Get the dynamic name of the condition\n\t\t\t\tnameDynamic: this.conditionPostData.dynamic_name,\n\n\t\t\t\t// Integration name\n\t\t\t\tintegrationName: this.integration.name,\n\t\t\t}\n\t\t};\n\n\t\treturn conditionForMeta;\n\t}\n\n\t/**\n\t * Returns the dynamic sentence of the condition with the current values of the fields\n\t *\n\t * @return {Node} A node with the sentence\n\t */\n\tget $dynamicSentence() {\n\t\t// Create node\n\t\tconst $sentence = parseDynamicSentence( {\n\t\t\tdynamicSentence: ! this.isMissing ? this.conditionPostData.dynamic_name : this.backup.nameDynamic,\n\t\t\tfields: this.fields,\n\n\t\t\t// If it's available, pass the ID of the action with the lowest priority as the item ID, so we can know what tokens are available\n\t\t\titemID: this.conditionsGroup.actionWithLowestPriority\n\t\t} );\n\n\t\treturn $sentence;\n\t}\n\n\t/**\n\t * Returns the condition base data\n\t *\n\t * @return {Object} The condition base data\n\t */\n\tget conditionPostData() {\n\t\treturn getConditionPostData( {\n\t\t\tintegrationCode: this.integrationCode,\n\t\t\tconditionCode: this.conditionCode\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the integration of the condition\n\t *\n\t * @return {Integration} The integration\n\t */\n\tget integration() {\n\t\treturn getIntegrationByCode( {\n\t\t\tintegrationCode: this.integrationCode,\n\t\t} );\n\t}\n}\n","// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tgetUniqueID\n} = _uo.utility;\n\nimport Condition from '@builder/item/conditions/condition';\nimport ItemConditionsModalOptions from '@builder/item/conditions/modal-options';\nimport { getConditionsBlockNode } from '@builder/item/conditions/utilities';\nimport { shouldBeSortable } from '@builder/item/sortability/utilities';\n\n/**\n * Creates a conditions group\n */\nexport default class ConditionsGroup {\n\t// Private properties\n\t// Mode. Use .mode\n\t#_mode = 'any';\n\n\t// Actions. Use .actions\n\t#_actions = [];\n\n\t// Conditions. Use .conditions\n\t#_conditions = {};\n\n\t// The priority. Use .priority\n\t#_priority; \n\n\t/**\n\t * Creates an unique ID and adds the condition group to the main object\n\t *\n\t * @param {Object} options Object with options\n\t * @param {String} id String with unique ID to target this conditions block\n\t * @return {undefined}\n\t */\n\tconstructor( { id } ) {\n\t\t// Get or create unique ID\n\t\tthis.id = ! isEmpty( id ) ? id : getUniqueID();\n\n\t\t// Add it to the main object\n\t\tUncannyAutomator.recipe.conditions[ this.id ] = this;\n\t}\n\n\t/**\n\t * Adds a condition\n\t *\n\t * @param {Object} options                 The options\n\t * @param {String} options.conditionID     The unique ID of this condition (tied to the ConditionsBlock)\n\t * @param {String} options.integrationCode The unique code of the integration\n\t * @param {String} options.conditionCode   The unique code of the condition\n\t * @param {Object} options.fields          The fields\n\t * @param {Object} options.backup          The backed up data\n\t * @return {Condition}                     The condition\n\t */\n\taddCondition( { conditionID, integrationCode, conditionCode, fields, backup = {} } ) {\n\t\t// Create condition\n\t\tconst condition = new Condition( { id: conditionID } );\n\n\t\t// Set the integration\n\t\tcondition.integrationCode = integrationCode;\n\n\t\t// Set the condition code\n\t\tcondition.conditionCode = conditionCode;\n\n\t\t// Set the fields data\n\t\tcondition.fields = fields;\n\n\t\t// Set the backed up data\n\t\t// This is ONLY used if the condition is missing\n\t\tcondition.backup = backup;\n\n\t\t// Add the ConditionGroup\n\t\tcondition.conditionsGroup = this;\n\n\t\t// Add condition\n\t\tthis.#_conditions[ condition.id ] = condition;\n\n\t\t// Send event\n\t\tthis.sendEvent( 'automator/conditions-group/add-condition', {\n\t\t\tdetail: {\n\t\t\t\tcondition: condition\n\t\t\t},\n\t\t} );\n\n\t\t// Return the new condition\n\t\treturn condition;\n\t}\n\n\t/**\n\t * Removes a condition\n\t *\n\t * @param {Object} options             The options\n\t * @param {String} options.conditionID The unique ID of the condition (NOT the code, the ID)\n\t * @return {undefined}\n\t */\n\tremoveCondition( { conditionID } ) {\n\t\t// Check if the condition exists\n\t\tif ( ! isDefined( this.conditions[ conditionID ] ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove it\n\t\tdelete this.#_conditions[ conditionID ];\n\n\t\t// Send event\n\t\tthis.sendEvent( 'automator/conditions-group/delete-condition', {\n\t\t\tdetail: {\n\t\t\t\tconditionID: conditionID\n\t\t\t},\n\t\t})\n\t}\n\n\t/**\n\t * Edits a condition\n\t *\n\t * @param {Object} options             The options\n\t * @param {String} options.conditionId The unique ID of the condition (NOT the code, the ID)\n\t * @return {undefined}\n\t */\n\teditCondition( { conditionId } ) {\n\t\t// Create modal to edit condition\n\t\tnew ItemConditionsModalOptions( {\n\t\t\tconditionsGroupId: this.id,\n\t\t\tconditionId: conditionId,\n\t\t\tcomingFrom: 'edit-condition-pill',\n\t\t} );\n\t}\n\n\t/**\n\t * Adds an action to the array of actions of this conditions group\n\t *\n\t * @param {Integer} actionID The action ID\n\t */\n\taddAction( actionID ) {\n\t\t// Get the current list of actions\n\t\tconst actions = this.actions;\n\n\t\t// Check if the current action wasn't already added\n\t\tif ( ! actions.includes( actionID ) ) {\n\t\t\tactions.push( actionID );\n\t\t}\n\n\t\t// Update\n\t\tthis.actions = actions;\n\n\t\t// Send event\n\t\tthis.sendEvent( 'automator/conditions-group/add-action', {\n\t\t\tdetail: {\n\t\t\t\tactionID: actionID\n\t\t\t},\n\t\t} );\n\t}\n\n\t/**\n\t * Removes an action from the array of actions of this conditions group\n\t *\n\t * @param {Integer} actionID The action ID\n\t */\n\tremoveAction( actionID ) {\n\t\t// Check if it has that action\n\t\tif ( ! this.hasAction( actionID ) ) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// Update\n\t\tthis.actions = this.actions.filter( ID => ID != actionID );\n\n\t\t// Send event\n\t\tthis.sendEvent( 'automator/conditions-group/remove-action', {\n\t\t\tdetail: {\n\t\t\t\tactionID: actionID\n\t\t\t},\n\t\t} );\n\t}\n\n\t/**\n\t * Helper to send custom events\n\t * \n\t * @param {String} type A string with the name of the event.\n\t * @param {*} data An object with custom data\n\t * @returns \n\t */\n\tsendEvent( type, data ) {\n\t\t// Check if the block has been rendered\n\t\tif ( ! this.$currentConditionsBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$currentConditionsBlock.dispatchEvent( new CustomEvent( type, data ) );\n\t}\n\n\t/**\n\t * Returns the node of the current conditions block tied to this conditions group\n\t */\n\tget $currentConditionsBlock() {\n\t\treturn getConditionsBlockNode( this.id );\n\t}\n\n\t/**\n\t * Sets the mode\n\t *\n\t * @param {String} mode The mode. Either \"any\" or \"all\"\n\t * @return {undefined}\n\t */\n\tset mode( mode ) {\n\t\t// Check if the mode is valid\n\t\tif ( [ 'all', 'any' ].includes( mode ) ) {\n\t\t\tthis.#_mode = mode;\n\t\t} else {\n\t\t\t// Set default mode\n\t\t\tthis.#_mode = 'any';\n\t\t}\n\t}\n\n\t/**\n\t * Returns the mode\n\t *\n\t * @return {String} The mode\n\t */\n\tget mode() {\n\t\treturn this.#_mode;\n\t}\n\n\t/**\n\t * Adds the actions\n\t *\n\t * @param {Array} actions The actions IDs\n\t * @return {undefined}\n\t */\n\tset actions( actions ) {\n\t\t// Default values\n\t\tthis.#_actions = [];\n\n\t\ttry {\n\t\t\t// Iterate the actions\n\t\t\tactions.forEach( ( actionID ) => {\n\t\t\t\t// Make sure the action ID is an integer\n\t\t\t\tactionID = parseInt( actionID );\n\n\t\t\t\tif ( isNaN( actionID ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check if the action actually exists\n\t\t\t\tif ( ! isDefined( UncannyAutomator.recipe.items[ actionID ] ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Add the action ID\n\t\t\t\tthis.#_actions.push( actionID );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( \"ConditionsGroup: Couldn't set the actions. Make sure the array is valid.\" );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the actions\n\t *\n\t * @return {Array} The IDs\n\t */\n\tget actions() {\n\t\t// Remove actions that no longer exist\n\t\t// Iterate actions\n\t\tthis.#_actions = this.#_actions.filter( ( actionId ) => {\n\t\t\t// Check if the action exists\n\t\t\treturn isDefined( UncannyAutomator.recipe.items[ actionId ] );\n\t\t} );\n\n\t\treturn this.#_actions;\n\t}\n\n\t/**\n\t * Sets the conditions\n\t *\n\t * @param {Array} conditionsList An array with conditions\n\t * @return {undefined}\n\t */\n\tset conditions( conditionsList ) {\n\t\t// Default value\n\t\tthis.#_conditions = {};\n\n\t\ttry {\n\t\t\t// Iterate conditions\n\t\t\tconditionsList.forEach( ( condition ) => {\n\t\t\t\t// Add condition\n\t\t\t\tthis.addCondition( {\n\t\t\t\t\tconditionID: condition.id,\n\t\t\t\t\tintegrationCode: condition.integration,\n\t\t\t\t\tconditionCode: condition.condition,\n\t\t\t\t\tfields: condition.fields,\n\t\t\t\t\tbackup: condition.backup\n\t\t\t\t} );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( \"ConditionsGroup: Couldn't set the conditions. Make sure the array is valid.\" );\n\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the conditions\n\t *\n\t * @return {Array} The conditions\n\t */\n\tget conditions() {\n\t\treturn this.#_conditions;\n\t}\n\n\t/**\n\t * Returns an object with sanitazed data for the backend\n\t *\n\t * @return {Object} Sanitazed data\n\t */\n\tget formattedForMeta() {\n\t\t// Default response\n\t\tlet conditionsGroupForMeta = {};\n\n\t\t/**\n\t\t * The backend expects\n\t\t *\n\t\t * {\n\t\t * \t actions: [], // Array with actions IDs\n\t\t * \t mode: 'any', // String, either \"all\" or \"any\"\n\t\t * \t conditions: [] // Array with conditions\n\t\t * }\n\t\t */\n\t\tconditionsGroupForMeta = {\n\t\t\tid: this.id,\n\t\t\tpriority: this.priority,\n\t\t\tactions: this.actions,\n\t\t\tmode: this.mode,\n\t\t\tconditions: [],\n\t\t};\n\n\t\t// Iterate conditions\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tObject.entries( this.conditions ).forEach( ( [ conditionId, condition ] ) => {\n\t\t\t// Format the condition too\n\t\t\tconditionsGroupForMeta.conditions.push( condition.formattedForMeta );\n\t\t} );\n\n\t\treturn conditionsGroupForMeta;\n\t}\n\n\t/**\n\t * Get the priority. \n\t * If the conditions block has actions, this will be equal to the priority of the first action\n\t * If it doesn't have conditions, it will check if it had a priority set before (before it was empty)\n\t */\n\tget priority() {\n\t\t// Check if it has actions\n\t\tif ( ! this.hasActions ) {\n\t\t\treturn this.#_priority;\n\t\t}\n\n\t\t// Get the lowest priority of the conditions block actions\n\t\tthis.#_priority = UncannyAutomator.recipe.items[ this.actionWithLowestPriority ].menuOrder;\n\n\t\treturn this.#_priority;\n\t}\n\n\t/**\n\t * Manually sets the priority\n\t * \n\t * @param {Integer} value The new priority \n\t */\n\tset priority( value ) {\n\t\tthis.#_priority = value;\n\t}\n\n\t/**\n\t * Returns the ID of the action with the lowest priority\n\t * \n\t * @return {Integer} The ID of the action\n\t */\n\tget actionWithLowestPriority() {\n\t\tlet lowestPriority,\n\t\t    lowestPriorityAction;\n\n\t\t// Get the target actions\n\t\t// This will be used to decide if we should find the lowest priority in all actions, or only the instant ones\n\t\tlet actions = this.hasInstantActions ? this.actionsByType.instant : this.actions;\n\n\t\tactions.forEach( ( actionID ) => {\n\t\t\t// Get the priority\n\t\t\tconst actionPriority = UncannyAutomator.recipe.items[ actionID ].menuOrder;\n\n\t\t\t// Check if is lower than our current lowest priority\n\t\t\t// If the priority is not defined, just use the action priority (we can't compare it to anything else)\n\t\t\t// If it's defined, check if the action priority is less than our current lowest priority\n\t\t\tif ( \n\t\t\t\tisEmpty( lowestPriority ) || ( actionPriority < lowestPriority )\n\t\t\t) {\n\t\t\t\tlowestPriority = actionPriority;\n\t\t\t\tlowestPriorityAction = actionID;\n\n\t\t\t\t// Stop here\n\t\t\t\treturn;\n\t\t\t}\n\t\t} );\n\n\t\treturn lowestPriorityAction;\n\t}\n\n\t/**\n\t * Checks whether the condition group has at least one instant action\n\t * \n\t * @return {Boolean} True if it has instant actions\n\t */\n\tget hasInstantActions() {\n\t\treturn this.actionsByType.instant.length > 0;\n\t}\n\n\t/**\n\t * Checks whether the condition group has at least one delayed action\n\t * \n\t * @return {Boolean} True if it has delayed actions\n\t */\n\tget hasDelayedActions() {\n\t\treturn this.actionsByType.delayed.length > 0;\n\t}\n\n\t/**\n\t * Checks whether the condition group has at least one scheduled action\n\t * \n\t * @return {Boolean} True if it has scheduled actions\n\t */\n\tget hasScheduledActions() {\n\t\treturn this.actionsByType.scheduled.length > 0;\n\t}\n\n\t/**\n\t * Returns an object that groups actions by action type\n\t * \n\t * @return {Object} The recipes, by type\n\t */\n\tget actionsByType() {\n\t\tconst type = {\n\t\t\tinstant: [],\n\t\t\tdelayed: [],\n\t\t\tscheduled: []\n\t\t}\n\n\t\tthis.actions.forEach( ( actionID ) => {\n\t\t\t// Get the action\n\t\t\tconst action = UncannyAutomator.recipe.items[ actionID ];\n\n\t\t\t// Get the type\n\t\t\tif ( action.isScheduled ) {\n\t\t\t\ttype.scheduled.push( actionID );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( action.isDelayed ) {\n\t\t\t\ttype.delayed.push( actionID );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttype.instant.push( actionID );\n\t\t} );\n\n\t\treturn type;\n\t}\n\n\t/**\n\t * Determine if the condition group should be sortable\n\t *\n\t * @return {Boolean} `true` if the conditions group can be sorted\n\t */\n\tget isSortable() {\n\t\treturn shouldBeSortable( {\n\t\t\tconditionsGroupID: this.id\n\t\t} );\n\t}\n\n\t/**\n\t * Checks whether the conditions group has an action\n\t *\n\t * @param {Integer} actionId The action ID\n\t * @return {Boolean}           True if it has it\n\t */\n\thasAction( actionId ) {\n\t\treturn this.actions.includes( actionId );\n\t}\n\n\t/**\n\t * Checks whether this conditions group has a condition\n\t *\n\t * @param {String} conditionId The unique condition ID (hash)\n\t * @return {Boolean}             True if it has it\n\t */\n\thasCondition( conditionId ) {\n\t\treturn isDefined( this.conditions[ conditionId ] );\n\t}\n\n\t/**\n\t * Returns a condition given an ID\n\t *\n\t * @param {String} conditionId The unique condition ID (hash)\n\t * @return {Condition}          The condition\n\t */\n\tgetCondition( conditionId ) {\n\t\treturn this.conditions[ conditionId ];\n\t}\n\n\t/**\n\t * Destroys this ConditionsGroup\n\t *\n\t * @return {undefined}\n\t */\n\tdestroy() {\n\t\tdelete UncannyAutomator.recipe.conditions[ this.id ];\n\t}\n\n\t/**\n\t * Evaluates if the condition has actions\n\t *\n\t * @return {Boolean} True if it has actions\n\t */\n\tget hasActions() {\n\t\treturn ! isEmpty( this.actions );\n\t}\n\n\t/**\n\t * Evaluates if the condition has conditions\n\t *\n\t * @return {Boolean} True if it has conditions\n\t */\n\tget hasConditions() {\n\t\treturn ! isEmpty( this.conditions );\n\t}\n\n\t/**\n\t * Returns the number of actions\n\t *\n\t * @return {Integer} The number of actions\n\t */\n\tget numberOfActions() {\n\t\treturn Object.keys( this.actions ).length;\n\t}\n\n\t/**\n\t * Returns the number of conditions\n\t *\n\t * @return {Integer} The number of conditions\n\t */\n\tget numberOfConditions() {\n\t\treturn Object.keys( this.conditions ).length;\n\t}\n}\n","/**\n * Check if this is an \"Everyone\" recipe that doesn't have user data yet\n *\n * @type {Boolean}\n */\nconst isEveryoneRecipeWithoutUserData = () => {\n\treturn UncannyAutomator.recipe.type == 'anonymous' && ! UncannyAutomator.recipe.requiresUserData;\n}\n\nexport default isEveryoneRecipeWithoutUserData;","import{nothing as t,noChange as i}from\"../lit-html.js\";import{Directive as r,PartType as s,directive as n}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class e extends r{constructor(i){if(super(i),this.it=t,i.type!==s.CHILD)throw Error(this.constructor.directiveName+\"() can only be used in child bindings\")}render(r){if(r===t||null==r)return this._t=void 0,this.it=r;if(r===i)return r;if(\"string\"!=typeof r)throw Error(this.constructor.directiveName+\"() called with a non-string value\");if(r===this.it)return this._t;this.it=r;const s=[r];return s.raw=s,this._t={_$litType$:this.constructor.resultType,strings:s,values:[]}}}e.directiveName=\"unsafeHTML\",e.resultType=1;const o=n(e);export{e as UnsafeHTMLDirective,o as unsafeHTML};\n//# sourceMappingURL=unsafe-html.js.map\n","// Import utilities\nconst {\n\tisString,\n} = _uo.utility;\n\nimport { html, render } from 'lit';\nimport { unsafeHTML } from 'lit/directives/unsafe-html.js';\n\n/**\n * Prompts a dialog to request user data\n *\n * @param {Object} options             The options\n * @param {String} options.summary     The summary\n * @param {String} options.box         The content that requires user data\n * @param {String} options.description The description. Acts as a disclaimer\n * @return {Promise}                    A Promise that resolves after the user adds the user selector\n */\nconst promptSetDataDialog = ( { summary = '', box = '', description = '' } ) => {\n\t// Create the element\n\tconst $wrapper = document.createElement( 'div' );\n\tdocument.body.append( $wrapper );\n\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\trender(\n\t\t\thtml`\n\t\t\t\t<ua-builder-user-selector-set-data-dialog\n\t\t\t\t\t@automator_user-selector_request-data-dialog_confirm_success=${ () => {\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} }\n\n\t\t\t\t\t@automator_user-selector_request-data-dialog_confirm_fail=${ () => {\n\t\t\t\t\t\treject()\n\t\t\t\t\t} }\n\n\t\t\t\t\t@automator_user-selector_request-data-dialog_cancel=${ () => {\n\t\t\t\t\t\treject()\n\t\t\t\t\t} }\n\t\t\t\t>\n\n\t\t\t\t\t<div slot=\"summary\">\n\t\t\t\t\t\t${ isString( summary ) ? unsafeHTML( summary ) : summary }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div slot=\"box\">\n\t\t\t\t\t\t${ isString( box ) ? unsafeHTML( box ) : box }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div slot=\"description\">\n\t\t\t\t\t\t${ isString( description ) ? unsafeHTML( description ) : description }\n\t\t\t\t\t</div>\n\n\t\t\t\t</ua-builder-user-selector-set-data-dialog>\n\t\t\t`,\n\t\t\t$wrapper,\n\t\t\t{ host: this }\n\t\t);\n\n\t} );\n}\n\nexport default promptSetDataDialog;\n","// Import style\nimport './style.scss';\n\n// Import utilities\nimport { html, render } from 'lit';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\n\nimport { parseDynamicSentence } from '@builder/utilities';\nimport { getIntegrations } from '@builder/integrations/utilities';\nimport { getConditionsByIntegration } from '@builder/item/conditions/utilities';\nimport { isEveryoneRecipeWithoutUserData } from '@builder/recipe/utilities';\nimport { promptSetDataDialog } from '@builder/user-selector/utilities';\n\nconst { isDefined } = _uo.utility;\n\n// Import components\nimport ItemConditionsModalOptions from '@builder/item/conditions/modal-options';\n\n/**\n * Creates a modal with the list of conditions\n */\nexport default class ItemConditionsModalList {\n\t/**\n\t * Creates a reference of the dialog\n\t *\n\t * @type {Ref}\n\t */\n\t$dialog = createRef();\n\n\t/**\n\t * Invokes the main methods that create the modal\n\t *\n\t * @param {Object}  options                   The options\n\t * @param {Integer} options.conditionsGroupId The ID of the conditions group\n\t * @param {String}  options.comingFrom        A string that identifies if this modal was created\n\t *                                            using the \"Filter\" button, or the \"+ Add\" button\n\t * @return {undefined}\n\t */\n\tconstructor( { conditionsGroupId, comingFrom } ) {\n\t\t// Save item ID\n\t\tthis.conditionsGroupId = conditionsGroupId;\n\n\t\t// Save \"coming from\"\n\t\t// This will basically tell us if the user created this modal by clicking on the \"Filter\n\t\t// button in actions, or if they clicked on the \"+Add\" button in the conditions block\n\t\tthis.comingFrom = comingFrom;\n\n\t\t// Render\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Renders the dialog with the list\n\t *\n\t * @return {undefined}\n\t */\n\trender() {\n\n\t\trender(\n\t\t\thtml`\n\t\t\t\t<uo-dialog\n\t\t\t\t\theading=\"${ UncannyAutomator.i18n.conditions.condition }\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\topen\n\n\t\t\t\t\t${ ref( this.$dialog ) }\n\t\t\t\t>\n\t\t\t\t\t<div class=\"uap-conditions-list\">\n\t\t\t\t\t\t<uo-accordion\n\t\t\t\t\t\t\tlist-search\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.searchPlaceholder=\"${ UncannyAutomator.i18n.conditions.searchConditions }\"\n\t\t\t\t\t\t\t.noResultsText=\"${ UncannyAutomator.i18n.conditions.noConditionsFound }\"\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t// Lit's repeat. If you need more information, check\n\t\t\t\t\t\t\t\t// https://lit.dev/docs/templates/directives/#repeat\n\t\t\t\t\t\t\t\trepeat(\n\t\t\t\t\t\t\t\t\t// Get integrations with conditions\n\t\t\t\t\t\t\t\t\tthis.integrations,\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\t\t\t\t( [ integrationCode, integration ] ) => integrationCode,\n\t\t\t\t\t\t\t\t\t( [ integrationCode, integration ] ) => html`\n\t\t\t\t\t\t\t\t\t\t<uo-accordion-item\n\t\t\t\t\t\t\t\t\t\t\t?open=${ this.integrationOpenByDefault( integrationCode ) }\n\t\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t\t\t<div slot=\"summary\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"uap-conditions-list-item-integration\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ua-builder-integration-icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode=\"${ integrationCode }\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplain\n\t\t\t\t\t\t\t\t\t\t\t\t\t></ua-builder-integration-icon>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t${ integration.name }\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\t\t\t\t\trepeat(\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Don't show deprecated conditions\n\t\t\t\t\t\t\t\t\t\t\t\t\tgetConditionsByIntegration( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tintegrationCode: integrationCode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilters: { deprecated: false }\n\t\t\t\t\t\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\t\t\t\t\t\t\t\t( condition ) => condition.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t( condition ) => html`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uo-accordion-item-li\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=${ () => {\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Select the condition\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.selectCondition( {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Condition identifiers\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tintegrationCode: integrationCode,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconditionCode: condition.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: condition.name,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trequiresUserData: condition.requires_user\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"uap-conditions-list-item-sentence\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t${ parseDynamicSentence( { dynamicSentence: condition.name } ) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t${ this._templateAddRequiresUserData( { requiresUserData: condition.requires_user } ) }\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</uo-accordion-item-li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t</uo-accordion-item>\n\t\t\t\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t</uo-accordion>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot=\"secondary-action\"\n\t\t\t\t\t\tdialog-action=\"close\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.cancel }\n\t\t\t\t\t</uo-button>\n\t\t\t\t</uo-dialog>\n\t\t\t`,\n\t\t\tthis.$wrapper,\n\t\t\t{ host: this }\n\t\t);\n\n\t}\n\n\t/**\n\t * Creates the modal with the condition options\n\t *\n\t * @param {Object}  options                  The options\n\t * @param {String}  options.integrationCode  The unique code of the integration\n\t * @param {String}  options.conditionCode    The unique code of the condition\n\t * @param {String}  options.name             The condition name\n\t * @param {Boolean} options.requiresUserData True if the condition we're evaluating requires user data\n\t * @return {undefined}\n\t */\n\tasync selectCondition( { integrationCode, conditionCode, name, requiresUserData } ) {\n\t\t// Check if this condition requires user data first\n\t\tif ( requiresUserData && isEveryoneRecipeWithoutUserData() ) {\n\t\t\ttry {\n\t\t\t\t// Request the user to enter the user data\n\t\t\t\tawait promptSetDataDialog( {\n\t\t\t\t\tsummary: UncannyAutomator.i18n.conditions.conditionRequiresUserData,\n\t\t\t\t\tbox: parseDynamicSentence( { dynamicSentence: name } ),\n\t\t\t\t\tdescription: UncannyAutomator.i18n.conditions.conditionRequiresUserDataDescription,\n\t\t\t\t} );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Stop here, go back\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Close the dialog\n\t\tthis.$dialog.value.close();\n\n\t\t// Trigger custom event\n\t\tconst event = new CustomEvent( 'automator/action/conditions/add/select', {\n\t\t\tdetail: {\n\t\t\t\tconditionsGroupId: this.conditionsGroupId,\n\n\t\t\t\t// Condition identifiers\n\t\t\t\tintegrationCode: integrationCode,\n\t\t\t\tconditionCode: conditionCode,\n\t\t\t},\n\t\t} );\n\n\t\t// Dispatch event\n\t\tdocument.dispatchEvent( event );\n\n\t\t// Create modal\n\t\tnew ItemConditionsModalOptions( {\n\t\t\tconditionsGroupId: this.conditionsGroupId,\n\n\t\t\t// Condition identifiers\n\t\t\tintegrationCode: integrationCode,\n\t\t\tconditionCode: conditionCode,\n\n\t\t\t// Set the source\n\t\t\tcomingFrom: this.comingFrom,\n\t\t} );\n\t}\n\n\t/**\n\t * Checks whether an item needs the \"Requires user data\" chip and crates the template\n\t *\n\t * @param {Object}  options                  The options\n\t * @param {Boolean} options.requiresUserData True if the condition we're evaluating requires user data\n\t * @return {TemplateResult} The template with the chip\n\t */\n\t_templateAddRequiresUserData( { requiresUserData } ) {\n\t\t// Check if this we should add the tag\n\t\tif ( requiresUserData && isEveryoneRecipeWithoutUserData() ) {\n\n\t\t\treturn html`\n\t\t\t\t<uo-chip\n\t\t\t\t\tslot=\"chip\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcolor=\"info\"\n\t\t\t\t\tfilled\n\t\t\t\t>\n\t\t\t\t\t${ UncannyAutomator.i18n.conditions.requiresUserData }\n\t\t\t\t</uo-chip>\n\t\t\t`;\n\n\t\t}\n\t}\n\n\t/**\n\t * Determines whether an integration should be open by default\n\t *\n\t * @param {String} integrationCode The unique code of the integration\n\t * @return {Boolean}                True if this integration should be open by default\n\t */\n\tintegrationOpenByDefault( integrationCode ) {\n\t\treturn integrationCode == 'GEN';\n\t}\n\n\t/**\n\t * Returns a sorted list of integrations\n\t *\n\t * @return {Array} The list of integrations\n\t */\n\tget integrations() {\n\t\t// Get the integrations with conditions\n\t\tconst items = Object.entries( getIntegrations( { conditions: true } ) );\n\n\t\t// Get the index of the \"General\" integration\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst index = items.findIndex( ( [ integrationCode, integration ] ) => {\n\t\t\treturn integrationCode == 'GEN';\n\t\t} );\n\n\t\t// Move the \"General\" integration to the first position\n\t\titems.unshift( items.splice( index, 1 )[ 0 ] );\n\n\t\treturn items;\n\t}\n\n\t/**\n\t * The wrapper where we're going to add the dialog\n\t * We're going to use this until the whole UI moves to Lit\n\t *\n\t * @return {Node} A wrapper\n\t */\n\tget $wrapper() {\n\t\t// Check if we already created one\n\t\tif ( ! isDefined( this.#$wrapper ) ) {\n\t\t\t// Create the element\n\t\t\tthis.#$wrapper = document.createElement( 'div' );\n\n\t\t\t// Append it to the DOM\n\t\t\tdocument.body.append( this.#$wrapper );\n\t\t}\n\n\t\t// Return the wrapper\n\t\treturn this.#$wrapper;\n\t}\n\n\t#$wrapper;\n}\n","/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=async(t,s)=>{for await(const i of t)if(!1===await s(i))return};class s{constructor(t){this.Y=t}disconnect(){this.Y=void 0}reconnect(t){this.Y=t}deref(){return this.Y}}class i{constructor(){this.Z=void 0,this.q=void 0}get(){return this.Z}pause(){var t;null!==(t=this.Z)&&void 0!==t||(this.Z=new Promise((t=>this.q=t)))}resume(){var t;null===(t=this.q)||void 0===t||t.call(this),this.Z=this.q=void 0}}export{i as Pauser,s as PseudoWeakRef,t as forAwaitOf};\n//# sourceMappingURL=private-async-helpers.js.map\n","import{noChange as t}from\"../lit-html.js\";import{isPrimitive as s}from\"../directive-helpers.js\";import{AsyncDirective as i}from\"../async-directive.js\";import{PseudoWeakRef as r,Pauser as e}from\"./private-async-helpers.js\";import{directive as o}from\"../directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const n=t=>!s(t)&&\"function\"==typeof t.then;class h extends i{constructor(){super(...arguments),this._$Cwt=1073741823,this._$Cyt=[],this._$CK=new r(this),this._$CX=new e}render(...s){var i;return null!==(i=s.find((t=>!n(t))))&&void 0!==i?i:t}update(s,i){const r=this._$Cyt;let e=r.length;this._$Cyt=i;const o=this._$CK,h=this._$CX;this.isConnected||this.disconnected();for(let t=0;t<i.length&&!(t>this._$Cwt);t++){const s=i[t];if(!n(s))return this._$Cwt=t,s;t<e&&s===r[t]||(this._$Cwt=1073741823,e=0,Promise.resolve(s).then((async t=>{for(;h.get();)await h.get();const i=o.deref();if(void 0!==i){const r=i._$Cyt.indexOf(s);r>-1&&r<i._$Cwt&&(i._$Cwt=r,i.setValue(t))}})))}return t}disconnected(){this._$CK.disconnect(),this._$CX.pause()}reconnected(){this._$CK.reconnect(this),this._$CX.resume()}}const c=o(h);export{h as UntilDirective,c as until};\n//# sourceMappingURL=until.js.map\n","// Import style\nimport './style.scss';\n\n// Import components\nimport Field from '@builder/field';\n\n// Import utilities\nimport { html, render } from 'lit';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\nimport { until } from 'lit/directives/until.js';\n\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport {\n\tgetConditionPostData,\n\tgetConditionsGroupById,\n\tupdateRemoteConditionsMeta,\n\tgetConditionById,\n\tconditionPostDataHasFields,\n\tgetAndSaveConditionFields\n} from '@builder/item/conditions/utilities';\n\nimport { getIntegrationName } from '@builder/integrations/utilities';\n\nimport { parseDynamicSentence } from '@builder/utilities';\nimport Actions from '@builder/item/actions';\n\n/**\n * Creates a modal with the options of the condition\n */\nexport default class ItemConditionsModalOptions {\n\t/**\n\t * Create a reference to the dialog\n\t *\n\t * @type {Ref}\n\t */\n\t$dialog = createRef();\n\n\t/**\n\t * Create a reference to the dialog\n\t *\n\t * @type {Ref}\n\t */\n\t$saveButton = createRef();\n\n\t/**\n\t * Invokes the main methods that create the modal\n\t *\n\t * @param {Object} options                   The options\n\t * @param {String} options.conditionsGroupId The ID of the conditions groups\n\t * @param {String} options.integrationCode   The unique code of the integration\n\t * @param {String} options.conditionCode     The unique code of the condition\n\t * @param {String} options.conditionId       The unique ID of the condition. This is option,\n\t *                                           and you can leave empty to create a new condition.\n\t * @param {String} options.comingFrom        A string that identifies if this modal was created\n\t *                                           using the \"Filter\" button, the \"+ Add\" button, or\n\t *                                           if the user is editing a condition pill\n\t * @return {undefined}\n\t */\n\tconstructor( { conditionsGroupId, integrationCode, conditionCode, conditionId, comingFrom } ) {\n\t\t// Get the conditions group\n\t\tconst conditionsGroup = getConditionsGroupById( {\n\t\t\tconditionsGroupId: conditionsGroupId,\n\t\t} );\n\n\t\t// Check if it's defined\n\t\tif ( isEmpty( conditionsGroup ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Save it\n\t\tthis.conditionsGroup = conditionsGroup;\n\n\t\t// Save \"coming from\"\n\t\t// This will basically tell us if the user created this modal by clicking on the \"Filter\n\t\t// button in actions, if they clicked on the \"+Add\" button in the conditions block, or\n\t\t// if they are editing a condition pill\n\t\tthis.comingFrom = comingFrom;\n\n\t\t// Get condition\n\t\t// If conditionId is defined, then get it from the list of conditions\n\t\tif ( ! isEmpty( conditionId ) ) {\n\t\t\t// Get the data of the condition\n\t\t\tthis.condition = getConditionById( {\n\t\t\t\tconditionsGroupId: conditionsGroupId,\n\t\t\t\tconditionId: conditionId,\n\t\t\t} );\n\n\t\t\t// Get condition code and integration code from condition\n\t\t\tif ( isDefined( this.condition ) ) {\n\t\t\t\t// Save unique identifiers\n\t\t\t\tthis.integrationCode = this.condition.integrationCode;\n\t\t\t\tthis.conditionCode = this.condition.conditionCode;\n\t\t\t}\n\n\t\t\t// Set the modal mode to \"Edit\"\n\t\t\t// This means the user is EDITING the condition, not creating a new one\n\t\t\tthis.modalMode = 'edit';\n\t\t} else {\n\t\t\t// Save unique identifiers\n\t\t\tthis.integrationCode = integrationCode;\n\t\t\tthis.conditionCode = conditionCode;\n\n\t\t\t// Create a new condition\n\t\t\tthis.condition = this.createCondition();\n\n\t\t\t// Set the modal mode to \"Create\"\n\t\t\t// This means the user is CREATING a condition, not editing one\n\t\t\tthis.modalMode = 'create';\n\t\t}\n\n\t\t// Check if the condition exists\n\t\t// Check if the condition post data exists\n\t\tif ( ! isEmpty( this.condition ) && ! isEmpty( this.conditionPostData ) ) {\n\t\t\t// Create the dialog\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\t/**\n\t * Renders the modal\n\t *\n\t * @return {undefined}\n\t */\n\trender() {\n\t\trender(\n\t\t\thtml`\n\t\t\t\t<uo-dialog\n\t\t\t\t\theading=\"${ UncannyAutomator.i18n.conditions.configureTheRule }\"\n\t\t\t\t\tforce-manual-close\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\topen\n\n\t\t\t\t\t${ ref( this.$dialog ) }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"uap-conditions-options\"\n\t\t\t\t\t\tdata-integration=\"${ this.integrationCode }\"\n\t\t\t\t\t\tdata-condition=\"${ this.conditionCode }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${ this._templateHeader }\n\n\t\t\t\t\t\t${ until(\n\t\t\t\t\t\t\tthis._templateFields,\n\t\t\t\t\t\t\tthis._templateFieldsPlaceholder\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot=\"primary-action\"\n\n\t\t\t\t\t\t${ ref( this.$saveButton ) }\n\n\t\t\t\t\t\t@click=${ () => {\n\t\t\t\t\t\t\t// Save options\n\t\t\t\t\t\t\tthis.saveOptions();\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.conditions.saveFilter }\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot=\"secondary-action\"\n\t\t\t\t\t\tdialog-action=\"close\"\n\t\t\t\t\t\tcolor=\"secondary\"\n\n\t\t\t\t\t\t@click=${ () => {\n\t\t\t\t\t\t\t// Remove condition\n\t\t\t\t\t\t\tthis.maybeRemoveCondition();\n\n\t\t\t\t\t\t\t// Maybe delete the conditions group\n\t\t\t\t\t\t\tthis.maybeRemoveConditionsGroup();\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t${ UncannyAutomator.i18n.cancel }\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t</uo-dialog>\n\t\t\t`,\n\t\t\tthis.$wrapper,\n\t\t\t{ host: this }\n\t\t);\n\t}\n\n\t/**\n\t * Returns the header of the template\n\t *\n\t * @return {TemplateResult} The TemplateResult of the header\n\t */\n\tget _templateHeader() {\n\t\treturn html`\n\t\t\t<div class=\"uap-conditions-options-header\">\n\t\t\t\t<div class=\"uap-conditions-options-header-integration\">\n\t\t\t\t\t<ua-builder-integration-icon\n\t\t\t\t\t\tcode=${ this.condition.integrationCode }\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tplain\n\t\t\t\t\t></ua-builder-integration-icon>\n\n\t\t\t\t\t<uo-chip size=\"small\" filled>\n\t\t\t\t\t\t${ getIntegrationName( this.condition.integrationCode ) }\n\t\t\t\t\t</uo-chip>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"uap-conditions-options-header-sentence\">\n\t\t\t\t\t${\n\t\t\t\t\t\tparseDynamicSentence( {\n\t\t\t\t\t\t\tdynamicSentence: this.conditionPostData.dynamic_name,\n\t\t\t\t\t\t\tfields: this.condition.fields,\n\t\t\t\t\t\t\titemID: this.conditionsGroup.actionWithLowestPriority\n\t\t\t\t\t\t} )\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * Returns the fields of the template\n\t *\n\t * @return {TemplateResult} The TemplateResult of the fields\n\t */\n\tget _templateFields() {\n\t\t// We might need to do a REST call to get the fields, so make an async getter\n\t\treturn ( async () => {\n\n\t\t\ttry {\n\n\t\t\t\t// Check whether we have to get the fields of this condition first\n\t\t\t\tif ( ! conditionPostDataHasFields( {\n\t\t\t\t\tintegrationCode: this.integrationCode,\n\t\t\t\t\tconditionCode: this.conditionCode\n\t\t\t\t} ) ) {\n\t\t\t\t\t// Get the fields\n\t\t\t\t\tawait getAndSaveConditionFields( {\n\t\t\t\t\t\tintegrationCode: this.integrationCode,\n\t\t\t\t\t\tconditionCode: this.conditionCode\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// Remove uap class once we move everything to Web Components\n\t\t\t\treturn html`\n\t\t\t\t\t<div class=\"uap uap-conditions-options-fields\">\n\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\trepeat(\n\t\t\t\t\t\t\t\t\t// Get integrations with conditions\n\t\t\t\t\t\t\t\t\tObject.values( this.fields ),\n\t\t\t\t\t\t\t\t\t( field ) => field.id,\n\t\t\t\t\t\t\t\t\t( field ) => html`${ field.$wrapper.get( 0 ) }`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t} catch ( e ) {\n\t\t\t\treturn html`\n\t\t\t\t\t${ UncannyAutomator.i18n.somethingWentWrong }\n\t\t\t\t`;\n\t\t\t}\n\n\t\t} )();\n\t}\n\n\t/**\n\t * Returns a placeholder to show while the fields load\n\t *\n\t * @return {TemplateResult} The TemplateResult of the template\n\t */\n\tget _templateFieldsPlaceholder() {\n\t\treturn html`\n\t\t\t<div class=\"uap-conditions-options-fields-placeholder\">\n\n\t\t\t\t<div>\n\t\t\t\t\t<uo-placeholder width=\"100px\"></uo-placeholder> <uo-placeholder width=\"30px\"></uo-placeholder>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<uo-placeholder height=\"42px\"></uo-placeholder>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<uo-placeholder width=\"40px\"></uo-placeholder> <uo-placeholder width=\"100px\"></uo-placeholder> <uo-placeholder width=\"50px\"></uo-placeholder>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * Saves options\n\t *\n\t * @return {undefined}\n\t */\n\tsaveOptions() {\n\t\t// Check if the fields are valid\n\t\tif ( this.areFieldsValid() ) {\n\t\t\t// Save fields in the condition\n\t\t\tthis.condition.fields = this.getFieldsValues();\n\n\t\t\t// Add loading animation to the button\n\t\t\tthis.$saveButton.value.loading = true;\n\n\t\t\t// Update the data in the server\n\t\t\tupdateRemoteConditionsMeta( {\n\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t// Remove loading animation to the button\n\t\t\t\t\tthis.$saveButton.value.loading = false;\n\n\t\t\t\t\t// Check if the task was successful\n\t\t\t\t\tif ( response.success ) {\n\t\t\t\t\t\t// Close the modal\n\t\t\t\t\t\tthis.$dialog.value.close();\n\t\t\t\t\t}\n\n\t\t\t\t\tnew Actions();\n\t\t\t\t},\n\t\t\t\tonFail: () => {\n\t\t\t\t\t// Remove loading animation to the button\n\t\t\t\t\tthis.$saveButton.value.loading = false;\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Creates the condition and adds it to the conditions group\n\t *\n\t * @return {Condition} The created condition\n\t */\n\tcreateCondition() {\n\t\t// Add the condition\n\t\treturn this.conditionsGroup.addCondition( {\n\t\t\tintegrationCode: this.integrationCode,\n\t\t\tconditionCode: this.conditionCode,\n\t\t\tfields: {},\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the values of all the fields\n\t *\n\t * @return {Object} Object with the values of the fields\n\t */\n\tgetFieldsValues() {\n\t\t// Default response\n\t\tconst values = {};\n\n\t\t// Iterate fields\n\t\tObject.values( this.fields ).forEach( ( field ) => {\n\t\t\t// Get and save the value\n\t\t\tvalues[ field.id ] = field.value;\n\n\t\t\t// If it's a select, get the option text and save it as \"readable\"\n\t\t\tif ( field.type == 'select' ) {\n\t\t\t\t// Get the custom field, if it has one\n\t\t\t\tif ( field.value === 'automator_custom_value' ) {\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tvalues[ `${ field.id }_custom` ] = field.getSelectCustomValue();\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tvalues[ `${ field.id }_readable` ] = values[ `${ field.id }_custom` ];\n\t\t\t\t} else {\n\t\t\t\t\t// Get the option text\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tvalues[ `${ field.id }_readable` ] = field.readableValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Check if we should save the label of the field to use it later in the sentence\n\t\t\t\tif ( field.attributes.showLabelInSentence ) {\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tvalues[ `${ field.id }_label` ] = field.attributes.label;\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\treturn values;\n\t}\n\n\t/**\n\t * Validates the fields\n\t *\n\t * @return {Boolean} True if the fields are valid\n\t */\n\tareFieldsValid() {\n\t\t// Default value\n\t\tlet fieldsAreValid = true;\n\n\t\t// Iterate fields\n\t\tObject.values( this.fields ).forEach( ( field ) => {\n\t\t\t// Validate field\n\t\t\tconst fieldValidation = field.validate();\n\n\t\t\t// Evaluate global validation\n\t\t\tfieldsAreValid = fieldsAreValid && fieldValidation.isValid;\n\t\t} );\n\n\t\treturn fieldsAreValid;\n\t}\n\n\t/**\n\t * Remove the created condition\n\t *\n\t * @return {undefined}\n\t */\n\tmaybeRemoveCondition() {\n\t\t// Check if the user was CREATING the condition\n\t\tif ( this.modalMode == 'create' ) {\n\t\t\t// Remove the condition using the condition ID\n\t\t\tthis.conditionsGroup.removeCondition( {\n\t\t\t\tconditionID: this.condition.id,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the conditions group doesn't have any conditions and removes it\n\t *\n\t * @return {undefined}\n\t */\n\tmaybeRemoveConditionsGroup() {\n\t\t// Check if the user clicked this modal by clicking on the \"Filter\" button in actions\n\t\t// We're deleting the conditions group if they come from the \"Filter\" button in actions because\n\t\t// we don't want to keep the group created after they click on \"Cancel\"\n\t\tif ( this.comingFrom == 'action-filter-button' ) {\n\t\t\t// Check if the conditions groups have conditions\n\t\t\tif ( ! this.conditionsGroup.hasConditions ) {\n\t\t\t\t// Remove it\n\t\t\t\tthis.conditionsGroup.destroy();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The wrapper where we're going to add the dialog\n\t * We're going to use this until the whole UI moves to Lit\n\t *\n\t * @return {Node} A wrapper\n\t */\n\tget $wrapper() {\n\t\t// Check if we already created one\n\t\tif ( ! isDefined( this.#$wrapper ) ) {\n\t\t\t// Create the element\n\t\t\tthis.#$wrapper = document.createElement( 'div' );\n\n\t\t\t// Append it to the DOM\n\t\t\tdocument.body.append( this.#$wrapper );\n\t\t}\n\n\t\t// Return the wrapper\n\t\treturn this.#$wrapper;\n\t}\n\n\t/**\n\t * Returns an object with the condition fields\n\t *\n\t * @return {Object} Object of Field instances\n\t */\n\tget fields() {\n\t\t// Check if we already created the Field instances\n\t\tif ( isDefined( this._fields ) ) {\n\t\t\treturn this._fields;\n\t\t}\n\n\t\t// Check if we already have the condition fields in the post data\n\t\tif ( ! isDefined( this.conditionPostData.fields ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Iterate the fields in the post data\n\t\tthis._fields = {};\n\n\t\tthis.conditionPostData.fields.forEach( ( fieldAttributes ) => {\n\t\t\t// Clone the attributes before doing modifications to them\n\t\t\tconst fieldAttrs = Object.assign( {}, fieldAttributes );\n\n\t\t\t// Set action with lowest priority as the action used to scope the tokens\n\t\t\tfieldAttrs.itemId = this.conditionsGroup.actionWithLowestPriority;\n\n\t\t\t// Check if there is a value to prepopulate this field\n\t\t\tif ( isDefined( this.condition.fields[ fieldAttrs.optionCode ] ) ) {\n\t\t\t\t// Set current value\n\t\t\t\tfieldAttrs.currentValue = this.condition.fields[ fieldAttrs.optionCode ];\n\n\t\t\t\t// Check if it's a custom select\n\t\t\t\tif ( fieldAttrs.currentValue === 'automator_custom_value' ) {\n\t\t\t\t\tfieldAttrs.customValue = this.condition.fields[ `${ fieldAttrs.optionCode }_custom` ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Create field instance\n\t\t\tconst field = new Field( fieldAttrs.fieldType, fieldAttrs );\n\n\t\t\t// Init libraries\n\t\t\t// Remove once fields are web components\n\t\t\t// Do AJAX\n\t\t\tfield.doAJAX();\n\t\t\t// Initilize the token selector\n\t\t\tfield.initTokenSelector();\n\t\t\t// Initilize flatpickr\n\t\t\tfield.initFlatpickr();\n\t\t\t// Initilize CodeMirror\n\t\t\tfield.initCodeMirror();\n\n\t\t\t// Save field instance\n\t\t\tthis._fields[ fieldAttrs.optionCode ] = field;\n\t\t} );\n\n\t\treturn this._fields;\n\t}\n\n\t/**\n\t * Returns the condition post data\n\t *\n\t * @return {Object} Object with useful data about the condition (like sentence and fields)\n\t */\n\tget conditionPostData() {\n\t\treturn getConditionPostData( {\n\t\t\tintegrationCode: this.integrationCode,\n\t\t\tconditionCode: this.conditionCode,\n\t\t} );\n\t}\n\n\t#$wrapper;\n}\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport { sanitizeFieldAttributes } from '@builder/field/utilities';\n\n/**\n * Modifies the UncannyAutomator.integrations object to add the conditions to an integration\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The integration code\n * @return {undefined}\n */\nconst addConditionsToIntegrations = ( { integrationCode } ) => {\n\tconst conditions = {\n\t\tavailable: {},\n\t\thasConditions: false\n\t};\n\n\t// Check if the conditions are loaded\n\tif ( isDefined( UncannyAutomator.actionsConditions ) ) {\n\t\t// Get available conditions\n\t\t// Check if this integration has available conditions\n\t\tif ( isDefined( UncannyAutomator.actionsConditions[ integrationCode ] ) ) {\n\t\t\t// Retrieve conditions\n\t\t\tconditions.available = UncannyAutomator.actionsConditions[ integrationCode ];\n\n\t\t\t// Sanitize field data\n\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\tObject.entries( conditions.available ).forEach( ( [ conditionCode, conditionData ] ) => {\n\t\t\t\t// Iterate fields\n\t\t\t\tif ( isDefined( conditions.available[ conditionCode ].fields ) ) {\n\t\t\t\t\tconditions.available[ conditionCode ].fields = conditions.available[ conditionCode ].fields.map(\n\t\t\t\t\t\t( fieldAttributes ) => {\n\t\t\t\t\t\t\t// Add the item type\n\t\t\t\t\t\t\tfieldAttributes.itemType = 'condition';\n\n\t\t\t\t\t\t\t// Add the integration ID\n\t\t\t\t\t\t\tfieldAttributes.integrationId = integrationCode;\n\n\t\t\t\t\t\t\t// Sanitize and return the attributes\n\t\t\t\t\t\t\treturn sanitizeFieldAttributes( fieldAttributes );\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// The integration has conditions, update the flag\n\t\t\tconditions.hasConditions = true;\n\t\t}\n\t}\n\n\t// Add conditions to the main object\n\tUncannyAutomator.integrations[ integrationCode ].conditions = conditions;\n};\n\nexport default addConditionsToIntegrations;\n","const { isDefined } = _uo.utility;\n\n/**\n * Checks whether an action should have the \"Filter\" button\n * \n * @param {Integer} actionID The action ID\n * @returns {Boolean} TRUE if we should add the filter button\n */\nconst canActionHaveFilterButton = ( actionID ) => {\n    // Get the action\n    const action = UncannyAutomator.recipe.items[ actionID ];\n\n    // Check if the action exists\n    if ( ! isDefined( action ) ) {\n        return false;\n    }\n\n    // Check if it's an action\n    if ( action.itemType !== 'action' ) {\n        return false;\n    }\n\n    // Check if it doesn't have conditions already\n    if ( action.hasConditions ) {\n        return false;\n    }\n\n    // Check if the action is missing\n    if ( action.isMissing ) {\n        return false;\n    }\n\n    return true;\n}\n\nexport default canActionHaveFilterButton;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Determines if the user can manage conditions\n *\n * @return {Boolean} True if the user can manage conditions\n */\nconst canManageConditions = () => {\n\treturn isDefined( UncannyAutomator.wp ) && UncannyAutomator.wp;\n};\n\nexport default canManageConditions;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n// Import utilities\nimport { getConditionPostData } from './';\n\n/**\n * Checks whether a condition has its fields already defined\n * This will be used to determine if we should do an AJAX call to get them\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The unique code of the integration\n * @param {String} options.conditionCode   The unique code of the condition\n * @return {Boolean}                       TRUE if it has fields\n */\nconst conditionPostDataHasFields = ( { integrationCode, conditionCode } ) => {\n\t// Get the condition post data\n\tconst conditionPostData = getConditionPostData( { integrationCode, conditionCode } );\n\n\treturn isDefined( conditionPostData.fields );\n}\n\nexport default conditionPostDataHasFields;\n","// Import utilities\nimport { itemsObject } from '@builder/common/utilities';\nimport { recipeHasConditions } from '@builder/item/conditions/utilities';\n\n/**\n * Adds a property to all actions to easily recognize that they have actions\n *\n * @return {undefined}\n */\nconst flagActionsWithConditions = () => {\n\t// Check if the recipe has conditions\n\tif ( recipeHasConditions() ) {\n\t\t// Get recipe actions\n\t\tconst actions = itemsObject( 'get', {\n\t\t\tfilter: {\n\t\t\t\titemType: 'action',\n\t\t\t},\n\t\t} );\n\n\t\t// Add the default flag to all actions\n\t\t// The default flag is false\n\t\tfor ( const actionId in actions ) {\n\t\t\t// Add flag\n\t\t\tUncannyAutomator.recipe.items[ actionId ].hasConditions = false;\n\t\t}\n\n\t\t// Iterate conditions to see which ones have conditions\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tObject.entries( UncannyAutomator.recipe.conditions ).forEach( ( [ conditionsGroupID, conditionsGroup ] ) => {\n\t\t\t// Iterate actions\n\t\t\tconditionsGroup.actions.forEach( ( actionId ) => {\n\t\t\t\t// Add property to the action to flag that has conditions\n\t\t\t\tUncannyAutomator.recipe.items[ actionId ].hasConditions = true;\n\t\t\t\tUncannyAutomator.recipe.items[ actionId ].conditionsGroupID = conditionsGroupID;\n\t\t\t} );\n\t\t} );\n\t}\n};\n\nexport default flagActionsWithConditions;\n","// Import utilities\nimport { itemsObject } from '@builder/common/utilities';\n\nconst {\n\tisEmpty\n} = _uo.utility;\n\nimport {\n\trecipeHasConditions,\n\tgetConditionsByActionId\n} from '@builder/item/conditions/utilities';\n\n/**\n * Returns an object with the actions with conditions\n *\n * @return {Object} The actions with conditions\n */\nconst getActionsWithConditions = () => {\n\t// Default response\n\tconst actionsWithConditions = {};\n\n\t// Check if there are conditions\n\tif ( recipeHasConditions() ) {\n\t\t// Get all actions\n\t\tconst allActions = itemsObject( 'get', {\n\t\t\tfilter: {\n\t\t\t\titemType: 'action',\n\t\t\t},\n\t\t} );\n\n\t\t// Iterate all actions\n\t\tObject.entries( allActions ).forEach( ( [ actionId, action ] ) => {\n\t\t\t// Get the conditions of this action\n\t\t\tconst conditions = getConditionsByActionId( {\n\t\t\t\tactionId: actionId,\n\t\t\t} );\n\n\t\t\t// Check if it has conditions\n\t\t\tif ( ! isEmpty( conditions ) ) {\n\t\t\t\t// Add both the action and the condition\n\t\t\t\tactionsWithConditions[ actionId ] = {\n\t\t\t\t\tconditionsGroup: conditions,\n\t\t\t\t\taction: action,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn actionsWithConditions;\n};\n\nexport default getActionsWithConditions;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport { updateConditionPostData } from './';\nimport { sanitizeFieldAttributes } from '@builder/field/utilities';\nimport { restCall } from '@builder/common/utilities';\n\n/**\n * Does a REST call to get the fields of a condition\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The unique code of the integration\n * @param {String} options.conditionCode   The unique code of the condition\n * @return {Promise}                       TRUE if it was successful\n */\nconst getAndSaveConditionFields = ( { integrationCode, conditionCode } ) => {\n\treturn new Promise( ( resolve, reject ) => {\n\n\t\t// Do REST call to get the fields\n\t\trestCall(\n\t\t\t'actions_conditions_fields',\n\n\t\t\t// Data\n\t\t\t{\n\t\t\t\tintegration: integrationCode,\n\t\t\t\tcode: conditionCode\n\t\t\t},\n\n\t\t\t// On success\n\t\t\t( response ) => {\n\t\t\t\t// Check if the fields are defined\n\t\t\t\tif ( ! response.success || ! isDefined( response.fields ) ) {\n\t\t\t\t\treturn reject( new Error( UncannyAutomator.i18n.conditions.errorCouldNotGetFields ) );\n\t\t\t\t}\n\n\t\t\t\t// Parse fields\n\t\t\t\tconst fields = response.fields.map( ( fieldAttributes ) => {\n\t\t\t\t\t// Add the item type\n\t\t\t\t\tfieldAttributes.itemType = 'condition';\n\n\t\t\t\t\t// Add the integration ID\n\t\t\t\t\tfieldAttributes.integrationId = integrationCode;\n\n\t\t\t\t\t// Sanitize and return the attributes\n\t\t\t\t\treturn sanitizeFieldAttributes( fieldAttributes );\n\t\t\t\t} );\n\n\t\t\t\t// Update the condition post data\n\t\t\t\tupdateConditionPostData( {\n\t\t\t\t\tintegrationCode: integrationCode,\n\t\t\t\t\tconditionCode: conditionCode,\n\t\t\t\t\tupdates: {\n\t\t\t\t\t\tfields: fields\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Check if it was successful\n\t\t\t\treturn resolve( fields );\n\t\t\t},\n\n\t\t\t// On fail\n\t\t\t() => {\n\t\t\t\treturn reject( new Error( UncannyAutomator.i18n.conditions.errorCouldNotGetFields ) );\n\t\t\t},\n\n\t\t\t// Options\n\t\t\t{\n\t\t\t\trequiresRecipesObject: false,\n\t\t\t\trenderUI: false,\n\t\t\t}\n\t\t);\n\n\t} );\n}\n\nexport default getAndSaveConditionFields;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport { getConditionsGroupById } from '@builder/item/conditions/utilities';\n\n/**\n * Returns the data of a condition using the condition ID\n *\n * @param {Object} options                   The options\n * @param {String} options.conditionsGroupId The unique ID of the conditions group\n * @param {String} options.conditionId       The unique ID of the condition\n * @return {Condition}                       The condition\n */\nconst getConditionById = ( { conditionsGroupId, conditionId } ) => {\n\t// Default response\n\tlet condition = null;\n\n\t// Get the ConditionsGroup\n\tconst conditionsGroup = getConditionsGroupById( {\n\t\tconditionsGroupId: conditionsGroupId,\n\t} );\n\n\t// Check if it's defined\n\tif ( isDefined( conditionsGroup ) ) {\n\t\t// Look for the condition\n\t\tif ( conditionsGroup.hasCondition( conditionId ) ) {\n\t\t\tcondition = conditionsGroup.getCondition( conditionId );\n\t\t}\n\t}\n\n\treturn condition;\n};\n\nexport default getConditionById;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Given a group code and connection code, checks if a connection exists\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The unique code of the integration\n * @param {String} options.conditionCode   The unique code of the condition\n * @return {Object}                        The condition data\n */\nconst getConditionPostData = ( { integrationCode, conditionCode } ) => {\n\tlet condition;\n\n\t// Check if the integration exists\n\tif ( isDefined( UncannyAutomator.integrations[ integrationCode ] ) ) {\n\t\t// Get available conditions\n\t\tconst availableConditions = UncannyAutomator.integrations[ integrationCode ].conditions.available;\n\n\t\t// Check if the condition exists\n\t\tif ( isDefined( availableConditions[ conditionCode ] ) ) {\n\t\t\t// Retrieve condition\n\t\t\tcondition = availableConditions[ conditionCode ];\n\t\t}\n\t}\n\n\treturn condition;\n};\n\nexport default getConditionPostData;\n","/**\n * Returns the node of the conditions block\n * \n * @param {String} conditionsBlockID The unique ID of the conditions block\n * @returns {Node} The node of the conditions block\n */\nconst getConditionsBlockNode = ( conditionsBlockID ) => {\n    return document.querySelector( `.uap-conditions-block[data-id=\"${ conditionsBlockID }\"]` );\n}\n\nexport default getConditionsBlockNode;\n","// Import utilities\nconst {\n\tisEmpty,\n\tisDefined\n} = _uo.utility;\n\nimport { sortArrayOfObjectsAlphabetically } from '@builder/common/utilities';\n\n/**\n * Returns the list of conditions of a specific integration\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The integration code\n * @param {Object} options.filters         Filters to be applied to the object. Check the filters object below.\n * @return {Object}                        The conditions\n */\nconst getConditionsByIntegration = ( { integrationCode, filters = {} } ) => {\n\t// Check if the integration code is defined\n\tif ( isEmpty( integrationCode ) ) {\n\t\treturn {};\n\t}\n\n\t// Check if the integration has conditions at all\n\tif ( ! UncannyAutomator.integrations[ integrationCode ].conditions.hasConditions ) {\n\t\treturn {};\n\t}\n\n\t// Default filters\n\tfilters = Object.assign( {\n\n\t\t/**\n\t\t * True if it MUST be true\n\t\t * false if it MUST be false\n\t\t * null to ignore the property\n\t\t *\n\t\t * @type {Boolean}\n\t\t */\n\t\tdeprecated: null,\n\n\t\t/**\n\t\t * Custom callback\n\t\t *\n\t\t * @type {Callback}\n\t\t */\n\t\tcustomFilter: null,\n\n\t}, filters );\n\n\tlet conditions = {};\n\n\t// Iterate all conditions\n\tObject.entries( UncannyAutomator.integrations[ integrationCode ].conditions.available ).forEach( ( [ conditionCode, condition ] ) => {\n\t\t// Default value\n\t\tlet shouldAdd = true;\n\n\t\t// Check custom callback\n\t\tif ( isDefined( filters.customFilter ) ) {\n\t\t\tshouldAdd = filters.customFilter( condition );\n\t\t}\n\n\t\t// Check if we should return only deprecated or non-deprecated conditions\n\t\tif ( isDefined( filters.deprecated ) ) {\n\t\t\t// If the \"deprecated\" property has been defined in the condition, compare it to the filter\n\t\t\t// Otherwise, asume this is NOT deprecated. \"deprecated\" will be defined most of the times,\n\t\t\t// unless they are using an old version of Automator Pro\n\t\t\tconst isDeprecated = isDefined( condition.deprecated ) ? condition.deprecated : false;\n\t\t\tshouldAdd = filters.deprecated === isDeprecated;\n\t\t}\n\n\t\t// Add it\n\t\tif ( shouldAdd ) {\n\t\t\t// Add ID\n\t\t\tcondition.id = conditionCode;\n\n\t\t\t// Add condition\n\t\t\tconditions[ conditionCode ] = condition;\n\t\t}\n\t} );\n\n\t// Convert to array and sort\n\tconditions = sortArrayOfObjectsAlphabetically( Object.values( conditions ), 'name' );\n\n\treturn conditions;\n}\n\nexport default getConditionsByIntegration;\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport { recipeHasConditions } from '@builder/item/conditions/utilities';\n\n/**\n * Returns a conditions group given an ID\n *\n * @param {Object} options                   The options\n * @param {String} options.conditionsGroupId The ID of the conditions group\n * @return {ConditionsGroup}                 The conditions group\n */\nconst getConditionsGroupById = ( { conditionsGroupId } ) => {\n\t// Default response\n\tlet conditionsGroup = null;\n\n\t// Check if the recipe has conditions\n\tif ( recipeHasConditions() ) {\n\t\t// Check if the conditions group exists\n\t\tif ( isDefined( UncannyAutomator.recipe.conditions[ conditionsGroupId ] ) ) {\n\t\t\t// Found it. Save it\n\t\t\tconditionsGroup = UncannyAutomator.recipe.conditions[ conditionsGroupId ];\n\t\t}\n\t}\n\n\treturn conditionsGroup;\n};\n\nexport default getConditionsGroupById;\n","// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport ConditionsGroup from '@builder/item/conditions/conditions-group';\nimport { updateRemoteConditionsMeta } from '@builder/item/conditions/utilities';\nimport Actions from '@builder/item/actions';\n\n/**\n * Parses the conditions saved in the recipe meta and saves sanitazed data in the Uncanny Automator object\n *\n * @param {Object} recipe The recipe data, unsanitazed\n * @return {undefined}\n */\nconst parseConditionsInMeta = ( recipe ) => {\n\t// Create the empty object\n\tUncannyAutomator.recipe.conditions = {};\n\n\t// Check if the recipe object has conditions\n\tif ( ! isDefined( recipe.actions_conditions ) ) {\n\t\treturn;\n\t}\n\t\n\t// Check if it's empty\n\tif ( isEmpty( recipe.actions_conditions ) ) {\n\t\treturn;\n\t}\n\n\t// Check if the conditions blocks are outdated and don't include the ID\n\tlet conditionsAreOutdated = false;\n\n\t// Try to parse it\n\ttry {\n\t\t// Parse conditions\n\t\tconst conditionsInMeta = JSON.parse( recipe.actions_conditions );\n\n\t\t// Create the conditions group\n\t\tconditionsInMeta.forEach( ( group ) => {\n\t\t\t// Check if the group ID is defined\n\t\t\t// If it's not, then this conditions block is outdated and we have to update it\n\t\t\tconditionsAreOutdated = conditionsAreOutdated || isEmpty( group.id );\n\n\t\t\t// Make sure it has conditions before adding it\n\t\t\t// We don't render conditions blocks without conditions\n\t\t\tif ( isEmpty( group.conditions ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Add it to the main object\n\t\t\tconst conditionsGroup = new ConditionsGroup( { id: group.id } );\n\n\t\t\t// Add the priority\n\t\t\tconditionsGroup.priority = group.priority;\n\n\t\t\t// Add the mode\n\t\t\tconditionsGroup.mode = group.mode;\n\n\t\t\t// Add the actions\n\t\t\tconditionsGroup.actions = group.actions;\n\n\t\t\t// Add the conditions\n\t\t\tconditionsGroup.conditions = group.conditions;\n\t\t} );\n\t} catch ( e ) {\n\t\t// Continue regardless of error\n\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.error(\n\t\t\t\t// eslint-disable-next-line max-len\n\t\t\t\t\"Conditions: Automator failed to parse the conditions saved in the meta. Make sure you're saving a valid JSON.\"\n\t\t\t);\n\t\t}\n\t}\n\n\t// Check if the conditions blocks are outdated and don't include the ID\n\tif ( conditionsAreOutdated ) {\n\t\tupdateRemoteConditionsMeta( {\n\t\t\tonSuccess: () => {\n\t\t\t\tnew Actions();\n\t\t\t}\n\t\t} );\n\t}\n};\n\nexport default parseConditionsInMeta;\n","// Import utilities\nconst {\n\tisEmpty\n} = _uo.utility;\n\n/**\n * Checks whether the recipe has conditions\n *\n * @return {Boolean} True if the recipe has conditions\n */\nconst recipeHasConditions = () => {\n\treturn ! isEmpty( UncannyAutomator.recipe.conditions );\n};\n\nexport default recipeHasConditions;\n","// Import utilities\nimport { recipeHasConditions } from '@builder/item/conditions/utilities';\n\n/**\n * Returns an array with the conditions in the recipe using the format expected by the backend\n *\n * @return {Array} The conditions\n */\nconst sanitizeConditionsForMeta = () => {\n\t// Default return\n\tconst conditions = [];\n\n\t// Check if there are conditions in the recipe\n\tif ( recipeHasConditions() ) {\n\t\t// Iterate conditions\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tObject.entries( UncannyAutomator.recipe.conditions ).forEach( ( [ conditionsGroupId, conditionsGroup ] ) => {\n\t\t\tif (\n\t\t\t\t// DON'T save group of conditions without conditions\n\t\t\t\tconditionsGroup.hasConditions\n\t\t\t) {\n\t\t\t\t// Add the sanitized data\n\t\t\t\tconditions.push( conditionsGroup.formattedForMeta );\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn conditions;\n};\n\nexport default sanitizeConditionsForMeta;\n","/**\n * Updates the post data of the condition\n *\n * @param {Object} options                 The options\n * @param {String} options.integrationCode The unique code of the integration\n * @param {String} options.conditionCode   The unique code of the condition\n * @param {Object} options.updates         The properties to update\n * @return {undefined}\n */\nconst updateConditionPostData = ( { integrationCode, conditionCode, updates = {} } ) => {\n\t// Update the data\n\t/* eslint-disable-next-line max-len */\n\tUncannyAutomator.integrations[ integrationCode ].conditions.available[ conditionCode ] = Object.assign( UncannyAutomator.integrations[ integrationCode ].conditions.available[ conditionCode ], updates );\n}\n\nexport default updateConditionPostData;\n","// Import utilities\nimport {\n\trestCall\n} from '@builder/common/utilities';\n\n// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport {\n\tisAutomatorProActive\n} from '@builder/utilities';\n\nimport { sanitizeConditionsForMeta } from '@builder/item/conditions/utilities';\n\nimport Actions from '@builder/item/actions';\n\n/**\n * Updates the conditions saved in the recipe meta\n *\n * @param {Object}   options           The options\n * @param {Callback} options.onSuccess The callback invoked if the task is successful\n * @param {Callback} options.onFail    The callback invoked if the task is not successful\n * @return {undefined}\n */\nconst updateRemoteConditionsMeta = ( { onSuccess, onFail } ) => {\n\t// Update only if Pro is active\n\tif ( ! isAutomatorProActive() ) {\n\t\treturn;\n\t}\n\n\t// Get conditions\n\tconst conditions = sanitizeConditionsForMeta();\n\n\t// Do REST call\n\trestCall(\n\t\t// Endpoint\n\t\t'actions_conditions_update',\n\n\t\t// Data\n\t\t{\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tactions_conditions: JSON.stringify( conditions ),\n\t\t},\n\n\t\t// On success\n\t\t( response ) => {\n\t\t\t// Check if the task was successful\n\t\t\tif ( response.success ) {\n\t\t\t\t// Check if the onSuccess callback is defined\n\t\t\t\tif ( isDefined( onSuccess ) ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Clear the cache of tokens\n\t\t\t\t\t\tUncannyAutomator.cache.tokens = [];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Invoke onSuccess callback\n\t\t\t\t\t\tonSuccess( response );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( \"updateRemoteConditionsMeta: Couldn't execute the onSuccess callback.\" );\n\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// On fail\n\t\t() => {\n\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.error(\n\t\t\t\t\t\"updateRemoteConditionsMeta: Couldn't update remote conditions meta. UI might be outdated.\"\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Check if the onFail callback is defined\n\t\t\tif ( isDefined( onFail ) ) {\n\t\t\t\ttry {\n\t\t\t\t\t// Invoke onFail callback\n\t\t\t\t\tonFail();\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( \"updateRemoteConditionsMeta: Couldn't execute the onFail callback.\" );\n\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t);\n};\n\nexport default updateRemoteConditionsMeta;\n","import $ from 'jquery';\n\n// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nclass ItemHeaderIcon {\n\tconstructor( integrationCode ){\n\t\tthis.integrationCode = integrationCode;\n\n\t\treturn this.createItemIcon();\n\t}\n\n\t/**\n\t * Create item icon\n\t *\n\t * @since 0.5\n\t *\n\t * @return {object}   HTML with the item icon\n\t */\n\n\tcreateItemIcon(){\n\t\tconst $icon = document.createElement( 'div' );\n\t\t$icon.classList.add( 'uap-item-icon' );\n\n\t\tif ( isDefined( UncannyAutomator.integrations[ this.integrationCode ] ) ){\n\t\t\t// Get integration by integrationCode\n\t\t\tlet integration = UncannyAutomator.integrations[ this.integrationCode ];\n\n\t\t\t// Check if it has a svg image\n\t\t\tif ( isDefined( integration.icon_svg ) ){\n\t\t\t\t$icon.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t<img src=\"${ integration.icon_svg }\" alt=\"${ integration.name }\">\n\t\t\t\t` );\n\t\t\t} else if ( isDefined( integration.icon_32 ) && isDefined( integration.icon_64 ) ){\n\t\t\t\t// Check if it has a png image\n\t\t\t\t$icon.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t\t<img \n\t\t\t\t\t\tsrc=\"${ integration.icon_32 }\"  \n\t\t\t\t\t\talt=\"${ integration.name }\"\n\t\t\t\t\t>\n\t\t\t\t` );\n\t\t\t}\n\t\t} \n\n\t\t// Return element\n\t\treturn $icon;\n\t}\n}\n\nexport default ItemHeaderIcon;","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Creates a tag that contains the name of the current integration\n */\nexport default class ItemHeaderTag {\n\t/**\n\t * Saves the parameters as properties, create the Node of the tag, and returns it\n\t *\n\t * @param {Object} options                       The options\n\t * @param {String} options.integrationId         The integration ID\n\t * @param {String} options.customIntegrationName The name of the integration. Useful if the integration name is not defined\n\t * @return {Node}                                 The tag's Node\n\t */\n\tconstructor( { integrationId, customIntegrationName } ) {\n\t\t// Save the integration ID\n\t\tthis.integrationId = integrationId;\n\n\t\t// Save the custom integration name. This will most likely be undefined. It's ok\n\t\tthis.customIntegrationName = customIntegrationName;\n\n\t\t// Create the node\n\t\tthis.createItemTag();\n\n\t\t// Return the tag\n\t\treturn this.$tag;\n\t}\n\n\t/**\n\t * Creates the tag with the name of the integration\n\t *\n\t * @return {undefined}\n\t */\n\tcreateItemTag() {\n\t\t// Get integration by integrationId\n\t\tconst integration = UncannyAutomator.integrations[ this.integrationId ];\n\n\t\t// Create container\n\t\tconst $tag = document.createElement( 'div' );\n\t\t$tag.classList.add( 'uap-item-tag' );\n\n\t\t// Add content\n\t\t$tag.innerText = isDefined( integration ) ? integration.name : this.customIntegrationName;\n\n\t\t// Save tag\n\t\tthis.$tag = $tag;\n\t}\n}\n","import $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport {\n\tgetItemsByIntegration,\n\tgetDOMElements,\n\trestCall,\n\treplaceCurlyBraces,\n\taddUTMParameters,\n\topenInNewTab,\n\trecipeSetRequiresUser\n} from '../common/utilities.js';\n\nimport { getActionsOrder } from '@builder/item/sortability/utilities';\n\nimport { getConditionsGroupById, updateRemoteConditionsMeta } from '@builder/item/conditions/utilities';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\taddParametersToURL\n} = _uo.utility;\n\nimport Modal          from '../common/modal.js';\n\nimport ItemCreatorIntegrations from './integrations-grid.js';\nimport ItemHeaderMenu          from './action-menu.js';\nimport ItemHeaderIcon          from './integration-icon.js';\nimport ItemHeaderTag           from './integration-name.js';\nimport Triggers \t           from './triggers.js';\nimport Actions \t\t           from './actions.js';\n\nclass ItemCreatorTaskSelector {\n\tconstructor( itemType, integrationID, $currentItem, attributes = {} ){\n\t\tthis.itemType \t\t= itemType;\n\t\tthis.integrationID \t= integrationID;\n\t\tthis.$currentItem \t= $currentItem;\n\t\tthis.attributes     = attributes;\n\n\t\t// By this step, remove the URL parameters added\n\t\t// while connecting a premium integration\n\t\tthis.removeConnectingIntegrationsParameters();\n\n\t\t// Render DOM elements\n\t\tthis.render();\n\t}\n\n\trender(){\n\t\t// Get content\n\t\tconst content = {\n\t\t\t// The section title. Either \"Select a trigger\" or \"Select an action\"\n\t\t\ttitle: this.itemType == 'trigger' ? UncannyAutomator.i18n.trigger.select : UncannyAutomator.i18n.action.select,\n\n\t\t\t// Icon. The integration icon\n\t\t\t$icon: new ItemHeaderIcon( this.integrationID ),\n\n\t\t\t// Integration name tag\n\t\t\t$integrationNameTag: new ItemHeaderTag( {\n\t\t\t\tintegrationId: this.integrationID,\n\t\t\t} ),\n\n\t\t\t// The action menu. The three dots on the upper right corner.\n\t\t\t$actionMenu: new ItemHeaderMenu( this.itemType )\n\t\t}\n\n\t\t// Create container\n\t\tconst $container = document.createElement( 'div' );\n\t\t$container.classList.add( 'uap-items', 'uap-items--create-new' );\n\n\t\t// Create item\n\t\tconst $item = document.createElement( 'div' );\n\t\t$item.classList.add( 'uap-item', 'uap-item--create-new' );\n\t\t$container.appendChild( $item );\n\n\t\t// Add data useful for the JS\n\t\t$item.setAttribute( 'data-integration', this.integrationID );\n\n\t\t// Save it as a property\n\t\tthis.$item = $item;\n\n\t\t// Add content\n\t\t$item.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t<div class=\"uap-item-inner\">\n\t\t\t\t<div class=\"uap-item-sidebar\"></div>\n\t\t\t\t<div class=\"uap-item-top-header\">\n\t\t\t\t\t<div class=\"uap-item-top-header-left\"></div>\n\t\t\t\t\t<div class=\"uap-item-top-header-right\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-item-inner-content\"></div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Icon. The integration icon\n\t\t$item.querySelector( '.uap-item-sidebar' )\n\t\t\t.appendChild( content.$icon );\n\n\t\t// Add integration name tag\n\t\t$item.querySelector( '.uap-item-top-header-left' )\n\t\t\t.appendChild( content.$integrationNameTag );\n\n\t\t// Add action menu\n\t\t$item.querySelector( '.uap-item-top-header-right' )\n\t\t\t.appendChild( content.$actionMenu.get(0) );\n\n\t\t// Add inner content\n\t\t$item.querySelector( '.uap-item-inner-content' )\n\t\t\t.appendChild( this.createItemsList().get(0) );\n\n\t\t// Replace the current item with the new content\n\t\tthis.$currentItem\n\t\t\t.replaceWith( $container );\n\t}\n\n\tcreateItemsList(){\n\t\tlet items, searchPlaceholder, unlockItems;\n\n\t\t// Get data depending on the item type\n\t\tif ( this.itemType == 'trigger' ){\n\t\t\titems \t           = getItemsByIntegration( this.integrationID, 'triggers' );\n\t\t\tsearchPlaceholder  = UncannyAutomator.i18n.trigger.search;\n\t\t\tunlockItems        = UncannyAutomator.i18n.proOnly.unlockTriggers;\n\t\t}\n\t\telse if ( this.itemType == 'action' ){\n\t\t\titems              = getItemsByIntegration( this.integrationID, 'actions' );\n\t\t\tsearchPlaceholder  = UncannyAutomator.i18n.action.search;\n\t\t\tunlockItems        = UncannyAutomator.i18n.proOnly.unlockActions;\n\t\t}\n\n\t\t// Create the main container\n\t\tconst $container   = $( `\n\t\t\t<div class=\"item-options item-options--nopadding item-options--noborder\">\n\t\t\t\t<div class=\"form-element\">\n\t\t\t\t\t<div class=\"item__task-selector\">\n\t\t\t\t\t\t<div class=\"item-task-selector__search\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"item-task-selector__search-input\"\n\t\t\t\t\t\t\t\tplaceholder=\"${ searchPlaceholder }\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"item-task-selector__options\">\n\t\t\t\t\t\t\t<div class=\"item-task-selector-options__group item-task-selector-options__group--available\"></div>\n\t\t\t\t\t\t\t<div class=\"item-task-selector-options__group item-task-selector-options__group--unavailable\">\n\t\t\t\t\t\t\t\t<div class=\"item-task-selector-options__group-items\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide\">\n\t\t\t\t\t\t\t\t${ UncannyAutomator.i18n.noResults }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Get important elements\n\t\tconst $taskSelector     = $container.find( '.item__task-selector' ),\n\t\t\t  $searchField      = $container.find( '.item-task-selector__search-input' ),\n\t\t\t  $itemsList        = {\n\t\t\t\tcontainer: $container.find( '.item-task-selector__options' ),\n\t\t\t\tavailable: $container.find( '.item-task-selector-options__group--available' ),\n\t\t\t\tunavailable: {\n\t\t\t\t\tcontainer: $container.find( '.item-task-selector-options__group--unavailable' ),\n\t\t\t\t\tlist:      $container.find( '.item-task-selector-options__group-items' )\n\t\t\t\t},\n\t\t\t\tnoResults: $container.find( '.item-task-selector__option--no-results' )\n\t\t\t  };\n\n\t\t// Check if it has available items\n\t\tif ( items.hasAvailableItems ){\n\t\t\t// Sort available items\n\t\t\t// Move the ones that require user data to the bottom if the user has Automator free\n\t\t\t// and this is an anonymous recipe\n\t\t\tif (\n\t\t\t\t// Check if WP is ready\n\t\t\t\t( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp )\n\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\t&& UncannyAutomator.recipe.type == 'anonymous'\n\t\t\t){\n\t\t\t\tconst itemsThatRequireUserData     = [],\n\t\t\t\t\t  itemsThatDontRequireUserData = [];\n\n\t\t\t\titems.available.forEach(( item ) => {\n\t\t\t\t\tif ( item.requires_user ){\n\t\t\t\t\t\titemsThatRequireUserData.push( item );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\titemsThatDontRequireUserData.push( item );\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\titems.available = [ ...itemsThatDontRequireUserData, ...itemsThatRequireUserData ];\n\t\t\t}\n\n\t\t\t// Append available items to the list container\n\t\t\t$itemsList.available.append( items.available.map(( item ) => {\n\t\t\t\t// Check if it's a Pro item\n\t\t\t\tconst isPro = item.is_pro;\n\n\t\t\t\t// Check if the user can't add this action to this recipe\n\t\t\t\t// This happens if the action requires user data, but the user has Automator free\n\t\t\t\tconst cannotAddRequiresUserData = (\n\t\t\t\t\t// Check if WP is ready\n\t\t\t\t\t( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp )\n\t\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\t\t&& UncannyAutomator.recipe.type == 'anonymous'\n\t\t\t\t\t// Check if the action requires user data\n\t\t\t\t\t&& item.requires_user\n\t\t\t\t);\n\n\t\t\t\t// Create container\n\t\t\t\tconst $item = $( `\n\t\t\t\t\t<div class=\"item-task-selector__option ${ isPro ? 'item-task-selector__option--pro' : '' } ${ item.requires_user ? 'item-task-selector__option--requires-user' : '' } ${ cannotAddRequiresUserData ? 'item-task-selector__option-cannot-add' : '' }\"\n\t\t\t\t\t\tdata-search=\"${ item.select_option_name.toLowerCase().replace( /\\s+|{|}/g, '' ) }\">\n\t\t\t\t\t\t<div class=\"item-task-selector__option-sentence\" dir=\"auto\">\n\t\t\t\t\t\t\t${ cannotAddRequiresUserData ? '<uo-icon id=\"lock\"></uo-icon>' : '' }\n\t\t\t\t\t\t\t${ replaceCurlyBraces( item.select_option_name, '<span class=\"item-task-selector__option-variable\">', '</span>' ) } ${ isPro ? `<span class=\"item-task-selector-option__badge\">${ UncannyAutomator.i18n.proOnly.pro }</span>` : '' }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"item-task-selector__option-properties\">\n\t\t\t\t\t\t\t${ UncannyAutomator.recipe.type == 'anonymous' && ! UncannyAutomator.recipe.requiresUserData && item.requires_user ? `<span class=\"item-task-selector-option__requires-user\">${ UncannyAutomator.i18n.needsUserData }</span>` : '' }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t` );\n\n\t\t\t\t// Listen clicks on the container\n\t\t\t\t$item.on( 'click', () => {\n\t\t\t\t\t// Add loading class to the parent container\n\t\t\t\t\t$taskSelector.addClass( 'item__task-selector--loading' );\n\n\t\t\t\t\t// Add loading class to the container\n\t\t\t\t\t$item.addClass( 'item-task-selector__option--loading' );\n\n\t\t\t\t\t// Get the correct request code\n\t\t\t\t\tconst restRequestCode = [ 'trigger', 'action' ].includes( this.itemType ) ? `add-new-${ this.itemType }` : '';\n\t\t\t\t\t\n\t\t\t\t\t// Save the value of the fields with default values\n\t\t\t\t\t// in the item meta\n\t\t\t\t\tlet defaultMeta = {}\n\t\t\t\t\t$.each( item.options, ( index, option ) => {\n\t\t\t\t\t\tif ( isDefined( option.default_value ) ){\n\t\t\t\t\t\t\tdefaultMeta[ option.option_code ] = option.default_value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Check if the trigger is an anonymous trigger\n\t\t\t\t\tif ( item.type == 'anonymous' ){\n\t\t\t\t\t\t// Save the \"can_log_in_new_user\" value\n\t\t\t\t\t\tdefaultMeta.can_log_in_new_user = isDefined( item.can_log_in_new_user ) ? item.can_log_in_new_user : true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Do REST call to add the item\n\t\t\t\t\tconst addItemREST = ( onSuccess, onFail ) => {\n\t\t\t\t\t\trestCall( 'add', {\n\t\t\t\t\t\t\trecipePostID: UncannyAutomator.recipe.id,\n\t\t\t\t\t\t\taction:       restRequestCode,\n\t\t\t\t\t\t\titem_code:    item.code,\n\t\t\t\t\t\t\tactions_order: getActionsOrder( true ),\n\t\t\t\t\t\t\tdefault_meta: $.extend( {}, defaultMeta, {\n\t\t\t\t\t\t\t\tintegration_name: UncannyAutomator.integrations[ this.integrationID ].name,\n\t\t\t\t\t\t\t\tsentence: \t\t  item.sentence\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, ( response ) => {\n\t\t\t\t\t\t\t// Clear the tokens cache\n\t\t\t\t\t\t\tUncannyAutomator.cache.tokens = [];\n\n\t\t\t\t\t\t\t// Check if this is an action that we should add inside a conditions block\n\t\t\t\t\t\t\tif ( this.itemType === 'action' && ! isEmpty( this.attributes.conditionsGroupID ) ) {\n\t\t\t\t\t\t\t\t// Get the conditions block\n\t\t\t\t\t\t\t\tconst conditionsBlock = getConditionsGroupById( { conditionsGroupId: this.attributes.conditionsGroupID } );\n\n\t\t\t\t\t\t\t\t// Add action\n\t\t\t\t\t\t\t\tconditionsBlock.addAction( response.post_ID );\n\n\t\t\t\t\t\t\t\t// Update data in the database\n\t\t\t\t\t\t\t\tupdateRemoteConditionsMeta( {\n\t\t\t\t\t\t\t\t\tonSuccess: () => {\n\t\t\t\t\t\t\t\t\t\tnew Actions();\n\n\t\t\t\t\t\t\t\t\t\t// Check if the ID of the new item is defined\n\t\t\t\t\t\t\t\t\t\tthis.openFirstGroupsOfFields( response.post_ID );\n\n\t\t\t\t\t\t\t\t\t\t// Check if the user defined a custom callback\n\t\t\t\t\t\t\t\t\t\tif ( isDefined( onSuccess ) ){\n\t\t\t\t\t\t\t\t\t\t\tonSuccess( response );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t// Stop here\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Render both metaboxes again\n\t\t\t\t\t\t\t// This will close the options panel if it's opened\n\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t\tnew Actions();\n\n\t\t\t\t\t\t\t// Check if the ID of the new item is defined\n\t\t\t\t\t\t\tthis.openFirstGroupsOfFields( response.post_ID );\n\n\t\t\t\t\t\t\t// Check if the user defined a custom callback\n\t\t\t\t\t\t\tif ( isDefined( onSuccess ) ){\n\t\t\t\t\t\t\t\tonSuccess( response );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, ( response ) => {\n\t\t\t\t\t\t\tconsole.log( 'ERROR-TODO. Couldn\\'t add the item' );\n\n\t\t\t\t\t\t\t// Remove loading class to the parent container\n\t\t\t\t\t\t\t$taskSelector.removeClass( 'item__task-selector--loading' );\n\n\t\t\t\t\t\t\t// Remove loading class to the container\n\t\t\t\t\t\t\t$item.removeClass( 'item-task-selector__option--loading' );\n\n\t\t\t\t\t\t\t// Check if it's an invalid action\n\t\t\t\t\t\t\tif ( response.success == false ){\n\t\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Check if the user defined a custom callback\n\t\t\t\t\t\t\tif ( isDefined( onFail ) ){\n\t\t\t\t\t\t\t\tonFail( response );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t// Check if we have to show a modal to set a user before adding the item\n\t\t\t\t\tif ( \n\t\t\t\t\t\t// Check if the item that the user wants to add is an action\n\t\t\t\t\t\tthis.itemType == 'action'\n\t\t\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\t\t\t&& UncannyAutomator.recipe.type == 'anonymous' \n\t\t\t\t\t\t// Check if the recipe currently DOES NOT need user data\n\t\t\t\t\t\t// Otherwise, don't show the modal as the user already knows\n\t\t\t\t\t\t// the recipe needs user data\n\t\t\t\t\t\t&& ! UncannyAutomator.recipe.requiresUserData\n\t\t\t\t\t\t// Check if the action the user is trying to add requires user data\n\t\t\t\t\t\t&& item.requires_user\n\t\t\t\t\t){\n\t\t\t\t\t\t// Create modal\n\t\t\t\t\t\tlet modal;\n\n\t\t\t\t\t\t// Remove loading class to the parent container\n\t\t\t\t\t\t$taskSelector.removeClass( 'item__task-selector--loading' );\n\n\t\t\t\t\t\t// Remove loading class to the container\n\t\t\t\t\t\t$item.removeClass( 'item-task-selector__option--loading' );\n\n\t\t\t\t\t\t// Check if WP is ready\n\t\t\t\t\t\tif ( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp ){\n\t\t\t\t\t\t\tmodal = new Modal({\n\t\t\t\t\t\t\t\ttitle:   `${ UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title } <span class=\"needs-user-data-modal-pro-badge\">${ UncannyAutomator.i18n.proOnly.pro }</span>`,\n\t\t\t\t\t\t\t\tcontent: `\n\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal__title\">${ UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.mustRunOnUser }</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal__sentence\">\n\t\t\t\t\t\t\t\t\t\t\t${ replaceCurlyBraces( item.select_option_name, '<span>', '</span>' ) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal__disclaimer\">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"description\">${ sprintf( UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.description, UncannyAutomator.i18n.uncannyAutomatorPro ) } <a href=\"${ addUTMParameters( 'https://automatorplugin.com/pricing/', { 'medium': 'select_an_item', 'campaign': 'update_to_pro', 'content': 'requires_user_data',\n\t\t\t\t\t\t\t\t\t\t\t}) }\" target=\"_blank\">${ UncannyAutomator.i18n.upgradeNow } <uo-icon id=\"external-link\"></uo-icon></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"description\">${ UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.upgradeLater } <a href=\"${ addUTMParameters( 'https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types', { 'medium': 'select_an_item', 'content': 'requires_user_data-learn-more',\n\t\t\t\t\t\t\t\t\t\t\t}) }\" target=\"_blank\">${ UncannyAutomator.i18n.learnMore } <uo-icon id=\"external-link\"></uo-icon></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\t\tcancel:  UncannyAutomator.i18n.cancel,\n\t\t\t\t\t\t\t\t\tconfirm: UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.confirmButton,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tsize: 'large'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tmodal.setEvents({\n\t\t\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\t\t\t// Close and destroy modal\n\t\t\t\t\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t\t\t\t\t// Open link in new tab\n\t\t\t\t\t\t\t\t\topenInNewTab( addUTMParameters( 'https://automatorplugin.com/pricing/', { 'medium': 'select_an_item', 'campaign': 'update_to_pro', 'content': 'requires_user_data',\n\t\t\t\t\t\t\t\t\t\t\t}) );\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\t\t\t// Close and destroy modal\n\t\t\t\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Check if we should set the recipe to draft when the user adds the action\n\t\t\t\t\t\t\t// We're doing this because the user will need to fill the User Selector\n\t\t\t\t\t\t\tconst actionWillSetRecipeToDraft = UncannyAutomator.recipe.isLive;\n\n\t\t\t\t\t\t\tmodal = new Modal({\n\t\t\t\t\t\t\t\ttitle:   `${ UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title } <span class=\"needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray\">${ UncannyAutomator.i18n.proOnly.pro }</span>`,\n\t\t\t\t\t\t\t\tcontent: `\n\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal__title\">${ UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.mustRunOnUser }</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal__sentence\">\n\t\t\t\t\t\t\t\t\t\t\t${ replaceCurlyBraces( item.select_option_name, '<span>', '</span>' ) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"needs-user-data-modal__disclaimer\">\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"description\">${ UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.description }</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\t\tcancel:  UncannyAutomator.i18n.cancel,\n\t\t\t\t\t\t\t\t\tconfirm: UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.confirmButton,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\tsize: 'large'\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tmodal.setEvents({\n\t\t\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\t\t\tlet modalElements = modal.getElements();\n\n\t\t\t\t\t\t\t\t\t// Add loading class to button\n\t\t\t\t\t\t\t\t\tmodalElements.modal.box.buttons.confirm.addClass( 'uap-btn--loading' ).prop( 'disabled', true );\n\n\t\t\t\t\t\t\t\t\t// Do an AJAX call to set the global recipe requires user\n\t\t\t\t\t\t\t\t\trecipeSetRequiresUser(\n\t\t\t\t\t\t\t\t\t\t// Set to true (requires user)\n\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t// On success\n\t\t\t\t\t\t\t\t\t\t( response ) => {\n\t\t\t\t\t\t\t\t\t\t\t// Do the request\n\t\t\t\t\t\t\t\t\t\t\taddItemREST(() => {\n\t\t\t\t\t\t\t\t\t\t\t\t// On success, close and destroy the modal\n\t\t\t\t\t\t\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\t\t\t\t// On fail\n\t\t\t\t\t\t\t\t\t\t\t\t// Remove loading class to button\n\t\t\t\t\t\t\t\t\t\t\t\tmodalElements.modal.box.buttons.confirm.removeClass( 'uap-btn--loading' ).prop( 'disabled', false );\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t// On fail\n\t\t\t\t\t\t\t\t\t\t( response ) => {\n\t\t\t\t\t\t\t\t\t\t\t// Remove loading class to button\n\t\t\t\t\t\t\t\t\t\t\tmodalElements.modal.box.buttons.confirm.removeClass( 'uap-btn--loading' ).prop( 'disabled', false );\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t// Do a call to set the recipe to draft\n\t\t\t\t\t\t\t\t\tif ( actionWillSetRecipeToDraft ){\n\t\t\t\t\t\t\t\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\t\t\t// Close and destroy modal\n\t\t\t\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Do the request\n\t\t\t\t\t\taddItemREST();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// Return the\n\t\t\t\treturn $item;\n\t\t\t}));\n\t\t}\n\t\telse {\n\t\t\t// Remove the available items container\n\t\t\t$itemsList.available.remove();\n\t\t}\n\n\t\t// Check if it has unavailable items\n\t\tif ( items.hasUnavailableItems ){\n\t\t\t// Append unavailable items to the list container\n\t\t\t$itemsList.unavailable.list.append( items.unavailable.map(( item ) => {\n\n\t\t\t\t// Create the UTM medium\n\t\t\t\tconst utm_medium = `unavailable_item-${ this.integrationID }-${ this.integrationID }_${ replaceCurlyBraces( item.name, '', '' ).toLowerCase().replace( /\\s+|{|}/g, '_' ) }`;\n\n\t\t\t\t// Get the integration name\n\t\t\t\tconst integrationName = isDefined( UncannyAutomator.integrations[ this.integrationID ] ) ? UncannyAutomator.integrations[ this.integrationID ].name : '';\n\n\t\t\t\tconst upgradeToProURL = addParametersToURL(\n\t\t\t\t\taddUTMParameters( 'https://automatorplugin.com/pricing/', {\n\t\t\t\t\t\t'medium':   'select_an_item',\n\t\t\t\t\t\t'campaign': 'update_to_pro',\n\t\t\t\t\t\t'content':  utm_medium,\n\t\t\t\t\t} ),\n\t\t\t\t\t{\n\t\t\t\t\t\tuap_bpro_context: this.itemType, // \"trigger\" | \"action\"\n\t\t\t\t\t\tuap_bpro_integration_id: this.integrationID, // unique ID, ex. WC\n\t\t\t\t\t\tuap_bpro_integration_name: integrationName, // ex. WooCommerce\n\t\t\t\t\t\tuap_bpro_item: item.name\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Create container\n\t\t\t\tconst $item = $( `\n\t\t\t\t\t<a href=\"${ upgradeToProURL }\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tclass=\"item-task-selector__option item-task-selector__option--pro\"\n\t\t\t\t\t\tdata-search=\"${ item.name.toLowerCase().replace( /\\s+|{|}/g, '' ) }\">\n\t\t\t\t\t\t<div class=\"item-task-selector__option-sentence\" dir=\"auto\">\n\t\t\t\t\t\t\t<uo-icon id=\"lock\"></uo-icon>\n\t\t\t\t\t\t\t${ replaceCurlyBraces( item.name, '<span class=\"item-task-selector__option-variable\">', '</span>' ) }\n\t\t\t\t\t\t\t<span class=\"item-task-selector-option__badge\">${ UncannyAutomator.i18n.proOnly.pro }</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t` );\n\n\t\t\t\treturn $item;\n\t\t\t}));\n\t\t}\n\t\telse {\n\t\t\t// Remove the unavailable items container\n\t\t\t$itemsList.unavailable.container.remove();\n\t\t}\n\n\t\t// Get the list of items\n\t\tconst $items = $itemsList.container.find( '.item-task-selector__option:not(.item-task-selector__option--no-results)' );\n\n\t\t// Listen changes on the search field\n\t\t$searchField.on( 'input', () => {\n\t\t\t// Get the current value\n\t\t\tconst query = $searchField.val().toLowerCase().replace( /\\s+|{|}/g, '' );\n\n\t\t\t// Reset before searching\n\t\t\t$items.removeClass( 'item-task-selector__option--show item-task-selector__option--hide' );\n\n\t\t\t// Create variable to evaluate later if there were results\n\t\t\tlet hasResults = true;\n\n\t\t\t// Check if the query is not empty\n\t\t\tif ( ! isEmpty( query ) ){\n\t\t\t\t// If value it isn't empty then we have to check if there are going to be results, so false by default\n\t\t\t\thasResults = false;\n\n\t\t\t\t$.each( $items, ( index, item ) => {\n\t\t\t\t\tlet $item = $( item ),\n\t\t\t\t\t\ttext  = $item.data( 'search' );\n\n\t\t\t\t\tif ( text.search( query ) !== -1 ){\n\t\t\t\t\t\t$item.addClass( 'item-task-selector__option--show' );\n\n\t\t\t\t\t\t// At least one result, so true\n\t\t\t\t\t\thasResults = true;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t$item.addClass( 'item-task-selector__option--hide' );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Show and hide noResults\n\t\t\t$itemsList.noResults.removeClass( 'item-task-selector__option--hide item-task-selector__option--show' );\n\n\t\t\tif ( ! hasResults ){\n\t\t\t\t$itemsList.noResults.addClass( 'item-task-selector__option--show' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$itemsList.noResults.addClass( 'item-task-selector__option--hide' )\n\t\t\t}\n\t\t});\n\n\t\t// Append \"Cancel\" button\n\t\t$container.append( this.createCancelButton() );\n\n\t\treturn $container;\n\t}\n\n\topenFirstGroupsOfFields( itemID ) {\n\t\t// Check if the ID of the new item is defined\n\t\tif ( isDefined( itemID ) ){\n\t\t\t// Get item form element\n\t\t\tconst $newItem = getDOMElements( 'item', {\n\t\t\t\tid: itemID\n\t\t\t});\n\n\t\t\t// Determine if the item is already valid\n\t\t\t// This will be true only if the new item doesn't have\n\t\t\t// options, or all the options have a default value\n\t\t\tconst isValid = UncannyAutomator.recipe.items[ itemID ].isValid;\n\n\t\t\t// Check if it's valid\n\t\t\tif ( isValid ){\n\t\t\t\t// Check if the recipe is NOT live\n\t\t\t\tif ( ! UncannyAutomator.recipe.isLive ){\n\t\t\t\t\t// Set the item to live\n\t\t\t\t\t$newItem.item\n\t\t\t\t\t\t.find( '.item-status input[type=\"checkbox\"]' )\n\t\t\t\t\t\t.prop( 'checked', true )\n\t\t\t\t\t\t.trigger( 'change' );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Get first token and trigger a click\n\t\t\t\t// This will open the first group of options\n\t\t\t\t$newItem.item\n\t\t\t\t\t.find( '.item-title__token:not(.item-title__token--filled)' )\n\t\t\t\t\t.first()\n\t\t\t\t\t.trigger( 'click' );\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateCancelButton(){\n\n\t\tlet $cancelButton = document.createElement( 'uo-button' );\n\t\t$cancelButton.setAttribute( 'color', 'secondary' );\n\t\t$cancelButton.innerText = UncannyAutomator.i18n.cancel;\n\n\t\t$cancelButton.addEventListener( 'click', () => {\n\t\t\tnew ItemCreatorIntegrations( this.itemType, this.$item, this.attributes );\n\t\t});\n\n\t\treturn $cancelButton;\n\t}\n\n\tremoveConnectingIntegrationsParameters(){\n\t\t// If the user is seeing this screen it's because the modal is closed,\n\t\t// or because the user already connected the integration\n\t\taddParametersToURL( window.location.href, {\n\t\t\tua_connecting_integration:    '',\n\t\t\tua_connecting_integration_id: '',\n\t\t\tua_connecting_integration_context: '',\n\t\t\tua_connecting_integration_condition: '',\n\t\t}, {\n\t\t\tsetAsURL: true,\n\t\t\trefresh: false\n\t\t});\n\t}\n}\n\nexport default ItemCreatorTaskSelector;\n","import $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport {\n\tsortArrayOfObjectsAlphabetically,\n\taddUTMParameters,\n\tgetDOMElements,\n\tgetIntegrationIcon,\n\tfilterDeprecatedItems,\n\topenCenteredWindow\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tgetURLParameter,\n\taddParametersToURL\n} = _uo.utility;\n\nimport Modal                   from '../common/modal.js';\n\nimport ItemHeaderMenu          from './action-menu.js';\nimport ItemCreatorTaskSelector from './items-list.js';\n\nclass ItemCreatorIntegrations {\n\tconstructor( itemType, $currentItem, attributes = {} ){\n\t\tthis.itemType     = itemType;\n\t\tthis.$currentItem = $currentItem;\n\t\tthis.attributes   = attributes;\n\t\tthis.integrations = [];\n\n\t\t// Render DOM elements\n\t\tthis.render();\n\n\t\t// Handle URL parameters to continue process of connecting an integration\n\t\tthis.handleContinueIntegrationConnection();\n\t}\n\n\trender(){\n\t\t// Get content\n\t\tconst content = {\n\t\t\t// The action menu. The three dots on the upper right corner.\n\t\t\t$actionMenu: new ItemHeaderMenu( this.itemType )\n\t\t}\n\n\t\t// Create content\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'uap-item' );\n\n\t\t// Save item as a property\n\t\tthis.$item = $template;\n\n\t\t// Add content\n\t\t$template.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t<div class=\"uap-item-inner\">\n\t\t\t\t<div class=\"uap-item-sidebar\">\n\t\t\t\t\t<div class=\"uap-item-icon\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-item-top-header\">\n\t\t\t\t\t<div class=\"uap-item-top-header-left\">\n\t\t\t\t\t\t${ UncannyAutomator.i18n.integration.select }\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"uap-item-top-header-right\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"uap-item-inner-content\"></div>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Add action menu\n\t\t$template.querySelector( '.uap-item-top-header-right' )\n\t\t\t.appendChild( content.$actionMenu.get(0) );\n\n\t\t// Add integrations grid\n\t\t$template.querySelector( '.uap-item-inner-content' )\n\t\t\t.appendChild( this.createIntegrations().get(0) );\n\n\t\t// Append footer. Usually this has the \"Discover more integrations\"\n\t\t$template.querySelector( '.uap-item-inner-content' )\n\t\t\t.appendChild( this.createFooter() );\n\n\t\t/**\n\t\t * Add the element to the DOM\n\t\t * Check if the item already exists in the DOM. If that's the case, we will _replace_ the node\n\t\t */\n\t\tif ( isDefined( this.$currentItem ) ){\n\t\t\t// Empty container\n\t\t\tthis.$currentItem.replaceWith( $template );\n\t\t} else {\n\t\t\t// Check if it's inside a conditions block\n\t\t\tif ( ! isEmpty( this.attributes.conditionsGroupID ) && isDefined( UncannyAutomator.recipe.conditions[ this.attributes.conditionsGroupID ] ) ) {\n\t\t\t\t// Get the conditions block\n\t\t\t\tconst $conditionsBlock = UncannyAutomator.recipe.conditions[ this.attributes.conditionsGroupID ].$currentConditionsBlock;\n\t\t\t\t\n\t\t\t\tif ( $conditionsBlock ) {\n\t\t\t\t\t// Add it at the bottom of the actions wrapper\n\t\t\t\t\t$conditionsBlock.$actionsWrapper.append( $template );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Get last item and append next to it\n\t\t\t\tconst $lastItem = getDOMElements( 'lastItem', {\n\t\t\t\t\ttype: this.itemType\n\t\t\t\t}).get(0);\n\n\t\t\t\tif ( this.itemType == 'trigger' ) {\n\t\t\t\t\t// Check if there is a last item\n\t\t\t\t\tif ( isDefined( $lastItem ) ) {\n\t\t\t\t\t\t// Insert after the last item\n\t\t\t\t\t\t$lastItem.insertAdjacentElement( 'afterEnd', $template );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Otherwise append the item to the metabox\n\t\t\t\t\t\tlet $metabox = getDOMElements( 'metabox', {\n\t\t\t\t\t\t\ttype: this.itemType\n\t\t\t\t\t\t}).get(0);\n\n\t\t\t\t\t\t$metabox.appendChild( $template );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif ( this.itemType == 'action' ) {\n\t\t\t\t\t// Check if there is at least one item\n\t\t\t\t\tlet items = getDOMElements( 'items', {\n\t\t\t\t\t\ttype: this.itemType\n\t\t\t\t\t});\n\n\t\t\t\t\t// Get the metabox\n\t\t\t\t\tlet $metabox = getDOMElements( 'metabox', {\n\t\t\t\t\t\ttype: this.itemType\n\t\t\t\t\t}).get(0);\n\n\t\t\t\t\tif ( items.length > 0 ){\n\t\t\t\t\t\t// Insert before the \"Add action\" button\n\t\t\t\t\t\t$metabox.querySelector( '.add-action-btn' )\n\t\t\t\t\t\t\t.insertAdjacentElement( 'beforeBegin', $template );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst $initialAction = $metabox.querySelector( '.uap-item--actions-initial' );\n\n\t\t\t\t\t\tif ( $initialAction ) {\n\t\t\t\t\t\t\t// Remove the initial \"Add action\" button\n\t\t\t\t\t\t\t$metabox.querySelector( '.uap-item--actions-initial' )\n\t\t\t\t\t\t\t\t.replaceWith( $template );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If it doesn't have the initial action, add it above the \"Add new action\"\n\t\t\t\t\t\t\t$metabox.querySelector( '.metabox__footer.add-action-btn' )\n\t\t\t\t\t\t\t\t.insertAdjacentElement( 'beforeBegin', $template );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateIntegrations(){\n\t\tlet container    = $( '<div/>', { 'class': 'item-integrations' });\n\n\t\t// Get non empty integrations\n\t\tthis.filterByNonEmptyIntegrations( this.itemType );\n\n\t\t// Order integrations\n\t\tthis.sortIntegrations(); \n\n\t\t// Iterate integrations\n\t\tthis.integrations.forEach(( integration ) => {\n\t\t\t// Get integration ID\n\t\t\tconst integrationID = integration.id;\n\n\t\t\t// Create integration element\n\t\t\tlet integrationElement = this.createIntegration( integrationID, integration );\n\n\t\t\t// Create default action on click\n\t\t\tlet onClick = () => {\n\t\t\t\tnew ItemCreatorTaskSelector( this.itemType, integrationID, this.$item, this.attributes );\n\t\t\t}\n\n\t\t\t// Before what's going to happen on click\n\t\t\t// Check if it's an API integration\n\t\t\tif ( isDefined( integration.connected ) ){\n\t\t\t\t// Get current step and change the callback accordingly\n\t\t\t\tswitch ( this.integrationModalCurrentStep( integration ) ){\n\t\t\t\t\t// Step 1\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tonClick = () => {\n\t\t\t\t\t\t\t// Set the URL parameters\n\t\t\t\t\t\t\tconst urlParameters = {\n\t\t\t\t\t\t\t\tua_connecting_integration: 1,\n\t\t\t\t\t\t\t\tua_connecting_integration_id: integrationID,\n\t\t\t\t\t\t\t\tua_connecting_integration_context: this.itemType\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Check if it's inside a conditions block\n\t\t\t\t\t\t\tif ( isDefined( this.attributes.conditionsGroupID ) ) {\n\t\t\t\t\t\t\t\turlParameters.ua_connecting_integration_condition = this.attributes.conditionsGroupID;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Set parameter to show the modal again in case the user reloads the page\n\t\t\t\t\t\t\taddParametersToURL( window.location.href, urlParameters, {\n\t\t\t\t\t\t\t\tsetAsURL: true,\n\t\t\t\t\t\t\t\trefresh: false\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Show the modal to connect the integration\n\t\t\t\t\t\t\tthis.connectIntegrationModal( integrationID, integration, {\n\t\t\t\t\t\t\t\tcurrentStep: 1\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t// Step 2\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\t// -> Send to the settings page of the integration\n\t\t\t\t\t\tonClick = () => {\n\t\t\t\t\t\t\t// Set the URL parameters\n\t\t\t\t\t\t\tconst urlParameters = {\n\t\t\t\t\t\t\t\tua_connecting_integration: 1,\n\t\t\t\t\t\t\t\tua_connecting_integration_id: integrationID,\n\t\t\t\t\t\t\t\tua_connecting_integration_context: this.itemType\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Check if it's inside a conditions block\n\t\t\t\t\t\t\tif ( isDefined( this.attributes.conditionsGroupID ) ) {\n\t\t\t\t\t\t\t\turlParameters.ua_connecting_integration_condition = this.attributes.conditionsGroupID;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Set parameter to show the modal again in case the user reloads the page\n\t\t\t\t\t\t\taddParametersToURL( window.location.href, urlParameters, {\n\t\t\t\t\t\t\t\tsetAsURL: true,\n\t\t\t\t\t\t\t\trefresh: false\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t// Show the modal to connect the integration\n\t\t\t\t\t\t\tthis.connectIntegrationModal( integrationID, integration, {\n\t\t\t\t\t\t\t\tcurrentStep: 2\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t// Step 3\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\t// Do nothing, leave the original callback,\n\t\t\t\t\t\t// which will just show the list of actions\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Bind\n\t\t\tintegrationElement.on( 'click', () => {\n\t\t\t\tonClick();\n\t\t\t});\n\n\t\t\t// Append\n\t\t\tcontainer.append( integrationElement );\n\t\t});\n\n\t\t// Return jQuery element\n\t\treturn container;\n\t}\n\n\tconnectIntegrationModal( integrationID, integration, options = {} ){\n\t\t// Extend the options\n\t\toptions = Object.assign({\n\t\t\tcurrentStep: 1\n\t\t}, options );\n\n\t\t// Connect API url\n\t\tconst connectApiUrl = addParametersToURL( UncannyAutomator.connectApiUrl, {\n\t\t\tredirect_url: addParametersToURL( UncannyAutomator.dashboardUrl, {\n\t\t\t\tua_close_window: 1\n\t\t\t})\n\t\t});\n\n\t\t// Check what should be the first step\n\t\tlet modalFirstStep = '';\n\n\t\t// Check if wp is ready\n\t\tif ( isDefined( UncannyAutomator.wp ) && UncannyAutomator.wp ){\n\t\t\tmodalFirstStep = `\n\t\t\t\t<div class=\"connect-integration-modal-step ${ options.currentStep > 1 ? 'connect-integration-modal-step--completed' : '' }\">\n\t\t\t\t\t<div class=\"connect-integration-modal-step__icon\">\n\t\t\t\t\t\t<uo-icon id=\"check-circle\"></uo-icon>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class=\"connect-integration-modal-step__description\">\n\t\t\t\t\t\t<div class=\"connect-integration-modal-step__description-main\">\n\t\t\t\t\t\t\t<strong>1.</strong> ${ sprintf( UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1Pro, UncannyAutomator.i18n.uncannyAutomatorPro ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"connect-integration-modal-step__action\">\n\t\t\t\t\t\t<a id=\"connect-integration-modal-activate-license\" class=\"connect-integration-modal-step__action-anchor\">\n\t\t\t\t\t\t\t${ UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.activate } <uo-icon id=\"arrow-circle-right\"></uo-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse {\n\t\t\tmodalFirstStep = `\n\t\t\t\t<div class=\"connect-integration-modal-step ${ options.currentStep > 1 ? 'connect-integration-modal-step--completed' : '' }\">\n\t\t\t\t\t<div class=\"connect-integration-modal-step__icon\">\n\t\t\t\t\t\t<uo-icon id=\"smile-plus\"></uo-icon>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class=\"connect-integration-modal-step__description\">\n\t\t\t\t\t\t<div class=\"connect-integration-modal-step__description-main\">\n\t\t\t\t\t\t\t<strong>1.</strong> ${ sprintf( UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1, UncannyAutomator.i18n.uncannyAutomator ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"connect-integration-modal-step__action\">\n\t\t\t\t\t\t<a id=\"connect-integration-modal-sign-up\" class=\"connect-integration-modal-step__action-anchor\">\n\t\t\t\t\t\t\t${ UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.signUp } <uo-icon id=\"arrow-circle-right\"></uo-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\t// Create modal\n\t\tconst modal = new Modal({\n\t\t\ttitle:   `${ UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectIntegration }`,\n\t\t\tcontent: `\n\t\t\t\t<div class=\"connect-integration-modal\">\n\t\t\t\t\t<div class=\"connect-integration-modal-steps__counter\">\n\t\t\t\t\t\t${ sprintf( UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.stepCounter, ( options.currentStep - 1 ), '2' ) }\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"connect-integration-modal-steps\">\n\t\t\t\t\t\t<div class=\"connect-integration-modal-steps__list\">\n\t\t\t\t\t\t\t${ modalFirstStep }\n\t\t\t\t\t\t\t<div class=\"connect-integration-modal-step ${ options.currentStep > 2 ? 'connect-integration-modal-step--completed' : '' } ${ options.currentStep == 1 ? 'connect-integration-modal-step--previous-not-completed' : '' }\">\n\t\t\t\t\t\t\t\t<div class=\"connect-integration-modal-step__icon\">\n\t\t\t\t\t\t\t\t\t<uo-icon id=\"plug\"></uo-icon>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class=\"connect-integration-modal-step__description\">\n\t\t\t\t\t\t\t\t\t<div class=\"connect-integration-modal-step__description-main\">\n\t\t\t\t\t\t\t\t\t\t<strong>2.</strong> ${\n\t\t\t\t\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t\t\t\t\tUncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step2,\n\t\t\t\t\t\t\t\t\t\t\t\t'<span class=\"connect-integration-modal-step-integration-name\">' + getIntegrationIcon( integrationID ).node.outerHTML + integration.name + '</span>', \n\t\t\t\t\t\t\t\t\t\t\t\tUncannyAutomator.i18n.uncannyAutomator\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"connect-integration-modal-step__action\">\n\t\t\t\t\t\t\t\t\t<span ${ options.currentStep == 1 ? 'uap-tooltip=\"' + UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.completePrevious + '\"' : '' }>\n\t\t\t\t\t\t\t\t\t\t<a id=\"connect-integration-modal-connect-account\" class=\"connect-integration-modal-step__action-anchor\">\n\t\t\t\t\t\t\t\t\t\t\t${ UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectAccount } <uo-icon id=\"arrow-circle-right\"></uo-icon>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tbuttons: {\n\t\t\t\tcancel:  UncannyAutomator.i18n.cancel,\n\t\t\t\tconfirm: null\n\t\t\t}\n\t\t}, {\n\t\t\tsize: 'extra-large'\n\t\t});\n\n\t\tmodal.setEvents({\n\t\t\tonCancel: () => {\n\t\t\t\t// Close and destroy modal\n\t\t\t\tmodal.destroy();\n\n\t\t\t\t// Remove the parameters that force the modal to be visible on load\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\taddParametersToURL( window.location.href, {\n\t\t\t\t\t\tua_connecting_integration:    '',\n\t\t\t\t\t\tua_connecting_integration_id: '',\n\t\t\t\t\t\tua_connecting_integration_context: '',\n\t\t\t\t\t\tua_connecting_integration_condition: '',\n\t\t\t\t\t}, {\n\t\t\t\t\t\tsetAsURL: true,\n\t\t\t\t\t\trefresh: false\n\t\t\t\t\t});\n\t\t\t\t}, 10 );\n\t\t\t},\n\t\t});\n\n\t\t// Add actions to the step buttons\n\t\tmodal.getElements().modal.container.find( '#connect-integration-modal-sign-up' )\n\t\t\t.on( 'click', ( event ) => {\n\t\t\t\t// Prevent default behavior\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// Add loading animation\n\t\t\t\tevent.currentTarget.classList\n\t\t\t\t\t.add( 'connect-integration-modal-step__action-anchor--loading' );\n\n\t\t\t\t// Open URL on a new window\n\t\t\t\tconst newWindow = openCenteredWindow({\n\t\t\t\t\turl:   connectApiUrl,\n\t\t\t\t\tw:     550,\n\t\t\t\t\th:     600,\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t// Add actions to the step buttons\n\t\tmodal.getElements().modal.container.find( '#connect-integration-modal-activate-license' )\n\t\t\t.on( 'click', ( event ) => {\n\t\t\t\t// Prevent default behavior\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\t// Add loading animation\n\t\t\t\tevent.currentTarget.classList\n\t\t\t\t\t.add( 'connect-integration-modal-step__action-anchor--loading' );\n\n\t\t\t\t// Open URL on a new window\n\t\t\t\tconst newWindow = openCenteredWindow({\n\t\t\t\t\turl:   UncannyAutomator.licenseUrl,\n\t\t\t\t\tw:     550,\n\t\t\t\t\th:     600,\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t// Check if the current step is the second step\n\t\tif ( options.currentStep == 2 ){\n\t\t\tmodal.getElements().modal.container.find( '#connect-integration-modal-connect-account' )\n\t\t\t\t.on( 'click', ( event ) => {\n\t\t\t\t\t// Prevent default behavior\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t// Add loading animation\n\t\t\t\t\tevent.currentTarget.classList\n\t\t\t\t\t\t.add( 'connect-integration-modal-step__action-anchor--loading' );\n\n\t\t\t\t\t// Open URL on a new window\n\t\t\t\t\tconst newWindow = openCenteredWindow({\n\t\t\t\t\t\turl:   addParametersToURL( integration.settings_url, {\n\t\t\t\t\t\t\tautomator_minimal: 1,\n\t\t\t\t\t\t\tautomator_hide_settings_tabs: 1\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tw:     550,\n\t\t\t\t\t\th:     600,\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}            \n\t}\n\n\thandleContinueIntegrationConnection(){\n\t\t// Check if the parameter is defined on page load\n\t\tif (\n\t\t\tgetURLParameter( null, 'ua_connecting_integration' ) == 1\n\t\t\t&& getURLParameter( null, 'ua_connecting_integration_context' ) == this.itemType\n\t\t){\n\t\t\t// Get the integration code\n\t\t\tconst integrationID = getURLParameter( null, 'ua_connecting_integration_id' );\n\n\t\t\t// Check if it's defined\n\t\t\tif ( ! isEmpty( integrationID ) ){\n\t\t\t\t// Get the integration data\n\t\t\t\tconst integration = UncannyAutomator.integrations[ integrationID ];\n\n\t\t\t\t// Check if the integration exists\n\t\t\t\tif ( isDefined( integration ) ){\n\t\t\t\t\t// Evaluate if we should show the modal\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Integration is an API integration\n\t\t\t\t\t\tisDefined( integration.connected )\n\t\t\t\t\t){\n\t\t\t\t\t\t// Get current step and render content accordingly\n\t\t\t\t\t\tswitch ( this.integrationModalCurrentStep( integration ) ){\n\t\t\t\t\t\t\t// Step 1\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\t// Show the modal to connect the integration\n\t\t\t\t\t\t\t\t// 1st step not completed\n\t\t\t\t\t\t\t\tthis.connectIntegrationModal( integrationID, integration, {\n\t\t\t\t\t\t\t\t\tcurrentStep: 1\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t// Step 2\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t// Show the modal to connect the integration\n\t\t\t\t\t\t\t\tthis.connectIntegrationModal( integrationID, integration, {\n\t\t\t\t\t\t\t\t\tcurrentStep: 2\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t// Step 3\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t// Get the attributes for the item list\n\t\t\t\t\t\t\t\tconst itemListAttributes = {}\n\n\t\t\t\t\t\t\t\t// Check if it's inside a conditions block\n\t\t\t\t\t\t\t\tconst conditionsGroupID = getURLParameter( null, 'ua_connecting_integration_condition' );\n\t\t\t\t\t\t\t\tif ( ! isEmpty( conditionsGroupID ) ) {\n\t\t\t\t\t\t\t\t\titemListAttributes.conditionsGroupID = conditionsGroupID;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Go to the list of items\n\t\t\t\t\t\t\t\tnew ItemCreatorTaskSelector( this.itemType, integrationID, this.$item, itemListAttributes );\n\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateIntegration( integrationID, integration ){\n\t\tlet container   = $( '<div/>', { 'class': 'item-integration' }),\n\t\t\tlogo        = $( '<div/>', { 'class': 'item-integration__logo' }),\n\t\t\tname        = $( '<div/>', { 'class': 'item-integration__name' });\n\n\t\t// Check if it's a Pro only integration\n\t\tif ( integration.isProOnly ){\n\t\t\t// Add a class to identify it\n\t\t\tcontainer.addClass( 'item-integration--pro' );\n\n\t\t\t// Add PRO tag\n\t\t\tcontainer.append( $( `\n\t\t\t\t<div class=\"item-integration__badge\">${ UncannyAutomator.i18n.proOnly.pro }</div>\n\t\t\t` ) );\n\t\t}\n\t\t\n\t\t// Check if the integration is not available\n\t\tif ( ! integration.isAvailable ){\n\t\t\t// Add a class to identify it\n\t\t\tcontainer.addClass( 'item-integration--unavailable item-integration--unavailable-requires-pro' );\n\n\t\t\t// Add tooltip\n\t\t\tcontainer.attr( 'uap-tooltip', sprintf( UncannyAutomator.i18n.proOnly.requiresPro, UncannyAutomator.i18n.uncannyAutomatorPro ) );\n\t\t}\n\t\telse {\n\t\t\t// Check if it's an API integration\n\t\t\tif ( isDefined( integration.connected ) ){\n\t\t\t\t// Check if the user connected an automatorplugin.com account\n\t\t\t\tif ( UncannyAutomator.hasAccountConnected ){\n\t\t\t\t\t// Check if the current action is not available because the\n\t\t\t\t\t// user didn't connect an account to it\n\t\t\t\t\tif ( ! integration.connected ){\n\t\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\t\tcontainer.addClass( 'item-integration--unavailable item-integration--unavailable-integration-not-connected' );\n\n\t\t\t\t\t\t// Add tooltip\n\t\t\t\t\t\tcontainer.attr( 'uap-tooltip', sprintf( UncannyAutomator.i18n.apiIntegrations.integrationNotConnected, integration.name ) );\n\n\t\t\t\t\t\t// Add tag\n\t\t\t\t\t\tcontainer.append( $( `\n\t\t\t\t\t\t\t<div class=\"item-integration__badge item-integration__badge--warning\">${ UncannyAutomator.i18n.apiIntegrations.notConnected }</div>\n\t\t\t\t\t\t` ) );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\t\tcontainer.addClass( 'item-integration--available' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\tcontainer.addClass( 'item-integration--unavailable item-integration--unavailable-ap-account-not-connected' );\n\n\t\t\t\t\t// Add tooltip\n\t\t\t\t\tcontainer.attr( 'uap-tooltip', sprintf( UncannyAutomator.i18n.apiIntegrations.integrationNotConnected, integration.name ) );\n\n\t\t\t\t\t// Add tag\n\t\t\t\t\tcontainer.append( $( `\n\t\t\t\t\t\t<div class=\"item-integration__badge item-integration__badge--warning\">${ UncannyAutomator.i18n.apiIntegrations.notConnected }</div>\n\t\t\t\t\t` ) );\n\t\t\t\t} \n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Check if we're rendering this in the actions metabox\n\t\t\t\t// We're checking this because actions need some exceptions\n\t\t\t\tif ( this.itemType == 'action' ){\n\t\t\t\t\t// Check if the integration might have actions that are not available\n\t\t\t\t\t// because they require user data\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Check if WP is ready\n\t\t\t\t\t\t( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp )\n\t\t\t\t\t\t// Check if the recipe is anonymous\n\t\t\t\t\t\t&& UncannyAutomator.recipe.type == 'anonymous'\n\t\t\t\t\t){\n\t\t\t\t\t\t// Check if it has actions that DON'T require user data\n\t\t\t\t\t\tconst actionsThatDontRequireUserData = integration.items.actions.available.filter(( action ) => {\n\t\t\t\t\t\t\treturn action.requires_user == false;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif ( actionsThatDontRequireUserData.length == 0 ){\n\t\t\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\t\t\tcontainer.addClass( 'item-integration--unavailable item-integration--unavailable-requires-user-data' );\n\n\t\t\t\t\t\t\t// Add tooltip\n\t\t\t\t\t\t\tcontainer.attr( 'uap-tooltip', UncannyAutomator.i18n.apiIntegrations.allActionsRequireUserData );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\t\t\tcontainer.addClass( 'item-integration--available' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\t\tcontainer.addClass( 'item-integration--available' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Add a class to identify it\n\t\t\t\t\tcontainer.addClass( 'item-integration--available' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Create the variable where we're going to save the logo\n\t\tlet $logoImg;\n\n\t\t// Check if it has a svg image\n\t\tif ( isDefined( integration.icon_svg ) ){\n\t\t\t$logoImg = $( `<img src=\"${ integration.icon_svg }\" alt=\"${ integration.name }\">` );\n\t\t}\n\t\t// Check if it has a png image\n\t\telse if ( isDefined( integration.icon_32 ) && isDefined( integration.icon_64 ) ){\n\t\t\t$logoImg = $( `<img src=\"${ integration.icon_32 }\" alt=\"${ integration.name }\">` );\n\t\t}\n\n\t\t// TO-DO\n\t\t// Improve UI/UX\n\t\t// Set integration name\n\t\tname.text( integration.name );\n\n\t\t// Append\n\t\tlogo.append( $logoImg );\n\t\tcontainer.append( logo );\n\t\tcontainer.append( name );\n\n\t\t// Return jQuery element\n\t\treturn container;\n\t}\n\n\t/**\n\t * Creates the section footer\n\t * \n\t * @return {Node} The footer\n\t */\n\tcreateFooter(){\n\t\t// Get the content\n\t\tconst content = {\n\t\t\ttext: ''\n\t\t}\n\n\t\t// Check if the current recipe is anonymous\n\t\tif ( UncannyAutomator.recipe.type == 'anonymous' ) {\n\t\t\tcontent.text = UncannyAutomator.i18n.integration.dontSeeTrigger;\n\t\t} else {\n\t\t\t// Create \"Learn more\" URL\n\t\t\tconst learnMoreURL = addUTMParameters( 'https://automatorplugin.com/integrations/', {\n\t\t\t\tmedium:  'select_an_integration',\n\t\t\t\tcontent: 'discover_more_integrations'\n\t\t\t});\n\n\t\t\tcontent.text = `${ UncannyAutomator.i18n.integration.discoverMore } <a href=\"${ learnMoreURL }\" target=\"_blank\">${ UncannyAutomator.i18n.learnMore } <uo-icon id=\"external-link\"></uo-icon></a>`;\n\t\t}\n\n\t\t// Create template\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'item-content__description' );\n\t\t$template.setAttribute( 'dir', 'auto' );\n\n\t\t// Add content\n\t\t$template.innerHTML = content.text;\n\n\t\t// Return template\n\t\treturn $template;\n\t}\n\n\tfilterByNonEmptyIntegrations( itemType ){\n\t\t// Check if it's a valid item type\n\t\tif ( [ 'trigger', 'action' ].includes( itemType ) ){\n\t\t\t// Get the integrations\n\t\t\tconst integrations = $.extend( true, {}, UncannyAutomator.integrations );\n\n\t\t\t// Iterate each integration\n\t\t\tObject.entries( integrations ).forEach(([ integrationID, integration ]) => {\n\t\t\t\t// Evaluate if it has the requested items by item type\n\t\t\t\tlet hasItems = false;\n\t\t\t\t// Also evaluate if it has available items\n\t\t\t\tlet isProOnly = false;\n\t\t\t\t// Also evaluate if it has available items\n\t\t\t\tlet isAvailable = false;\n\n\t\t\t\t// Remove deprecated items\n\t\t\t\tlet items;\n\n\t\t\t\tif ( itemType == 'trigger' ){\n\t\t\t\t\t// Get items\n\t\t\t\t\titems       = filterDeprecatedItems( integration.items.triggers );\n\n\t\t\t\t\thasItems    = items.hasTriggers;\n\t\t\t\t\tisAvailable = items.hasAvailableItems;\n\t\t\t\t\tisProOnly   = items.allItemsArePro;\n\t\t\t\t}\n\t\t\t\telse if ( itemType == 'action' ){\n\t\t\t\t\t// Get items\n\t\t\t\t\titems       = filterDeprecatedItems( integration.items.actions );\n\n\t\t\t\t\thasItems    = items.hasActions;\n\t\t\t\t\tisAvailable = items.hasAvailableItems;\n\t\t\t\t\tisProOnly   = items.allItemsArePro;\n\t\t\t\t}\n\n\t\t\t\t// Check if it has the requested items by item type\n\t\t\t\tif ( hasItems ){\n\t\t\t\t\t// Add integration to the list of integrations\n\t\t\t\t\tthis.integrations.push( $.extend({}, integration, {\n\t\t\t\t\t\tid:          integrationID,\n\t\t\t\t\t\tisAvailable: isAvailable,\n\t\t\t\t\t\tisProOnly:   isProOnly\n\t\t\t\t\t}) );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Sorts integrations alphabetically and by connection status\n\t * \n\t * @return {undefined}\n\t */\n\tsortIntegrations(){\n\t\t// Once sorted alphabetically, show connected integrations first\n\t\tconst integrations = {\n\t\t\tcanUse: [],\n\t\t\tcanNotUse: []\n\t\t}\n\n\t\tthis.integrations.forEach( ( integration ) => {\n\t\t\t// If it's not connected, or not available, it's not ready for use yet\n\t\t\tif ( ( isDefined( integration.connected ) && ! integration.connected ) || ! integration.isAvailable ) {\n\t\t\t\tintegrations.canNotUse.push( integration );\n\t\t\t} else {\n\t\t\t\tintegrations.canUse.push( integration );\n\t\t\t}\n\t\t} );\n\n\t\t// Sort alphabetically\n\t\tintegrations.canUse = sortArrayOfObjectsAlphabetically( integrations.canUse, 'name' );\n\t\tintegrations.canNotUse = sortArrayOfObjectsAlphabetically( integrations.canNotUse, 'name' );\n\n\t\t// Merge both groups\n\t\tthis.integrations = [ ...integrations.canUse, ...integrations.canNotUse ];\n\t}\n\n\t/**\n\t * Validate what's the current step when connecting a premium integration\n\t *\n\t * Step 1. Connect ap.com account, or validate license\n\t * Step 2. Connect integration account\n\t * Step 3. Integration connected\n\t *\n\t *\n\t * @param  {Object}  integration  An object from this.integrations with the integration data\n\t * @return {Integer}              The current step\n\t */\n\tintegrationModalCurrentStep( integration = {} ){\n\t\tlet step;\n\n\t\tif (\n\t\t\t// Condition #1\n\t\t\t// User has Automator free\n\t\t\t// + ap.com account not connected\n\t\t\t(\n\t\t\t\t// Check if the user has Automator Free\n\t\t\t\t(\n\t\t\t\t\t! isDefined( UncannyAutomator.wp ) \n\t\t\t\t\t|| isDefined( UncannyAutomator.wp ) && ! UncannyAutomator.wp\n\t\t\t\t) \n\t\t\t\t&& \n\t\t\t\t// Check if the ap.com account is NOT connected\n\t\t\t\t! UncannyAutomator.hasAccountConnected\n\t\t\t)\n\t\t\t||\n\t\t\t// Condition #2\n\t\t\t// User has Automator Pro\n\t\t\t// + ap.com account not connected\n\t\t\t// + Pro license not valid\n\t\t\t(\n\t\t\t\t// Check if the user has Automator Pro\n\t\t\t\t(\n\t\t\t\t\tisDefined( UncannyAutomator.wp ) && UncannyAutomator.wp\n\t\t\t\t)\n\t\t\t\t&& \n\t\t\t\t// Check if the ap.com account is NOT connected\n\t\t\t\t! UncannyAutomator.hasAccountConnected\n\t\t\t\t&&\n\t\t\t\t// Check if the Pro license is not valid\n\t\t\t\t! UncannyAutomator.hasValidProLicense\n\t\t\t)\n\t\t){\n\t\t\t// Then, this is the first step\n\t\t\t// The user has to connect an ap.com account or validate the license\n\t\t\tstep = 1;\n\t\t}\n\t\telse if (\n\t\t\t// Condition #1\n\t\t\t// User has Automator free\n\t\t\t// + ap.com account connected\n\t\t\t(\n\t\t\t\t// Check if the user has Automator Free\n\t\t\t\t(\n\t\t\t\t\t! isDefined( UncannyAutomator.wp ) \n\t\t\t\t\t|| isDefined( UncannyAutomator.wp ) && ! UncannyAutomator.wp\n\t\t\t\t) \n\t\t\t\t&& \n\t\t\t\t// Check if the ap.com account is connected\n\t\t\t\tUncannyAutomator.hasAccountConnected\n\t\t\t)\n\t\t\t||\n\t\t\t// Condition #2\n\t\t\t// User has Automator Pro\n\t\t\t// + ap.com account connected OR pro license valid\n\t\t\t(\n\t\t\t\t// Check if the user has Automator Pro\n\t\t\t\t(\n\t\t\t\t\tisDefined( UncannyAutomator.wp ) && UncannyAutomator.wp\n\t\t\t\t)\n\t\t\t\t&& \n\t\t\t\t(\n\t\t\t\t\t// Check if the ap.com account is connected\n\t\t\t\t\tUncannyAutomator.hasAccountConnected\n\t\t\t\t\t||\n\t\t\t\t\t// Check if the Pro license is valid\n\t\t\t\t\tUncannyAutomator.hasValidProLicense\n\t\t\t\t)\n\t\t\t)\n\t\t){\n\t\t\t// Check if the premium integration still doesn't have an account connected\n\t\t\tif ( ! integration.connected ){\n\t\t\t\t// Then, this is the second step\n\t\t\t\t// The user has to connect the integration\n\t\t\t\tstep = 2;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Then, this is the third step\n\t\t\t\t// Everything needed is ready\n\t\t\t\tstep = 3;\n\t\t\t}\n\t\t}\n\n\t\treturn step;\n\t}\n}\n\nexport default ItemCreatorIntegrations;","import $ from 'jquery';\n\nimport {\n\tgetDOMElements,\n\trestCall,\n\tparseStringWithTokens,\n\tgetCurrentFieldsValues\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport Modal    from '../common/modal.js';\nimport Markdown from '../common/markdown.js';\n\nimport {\n\tvalidateItemFields,\n} from '../validation/validation.js';\n\nimport Triggers from './triggers.js';\nimport Actions  from './actions.js';\n\nclass ItemOptions {\n\tconstructor( itemId, optionId ){\n\t\tthis.itemId   = itemId;\n\t\tthis.optionId = optionId;\n\t\tthis.item \t  = UncannyAutomator.recipe.items[ itemId ];\n\n\t\t// Array to save the Field objects\n\t\tthis.fields   = this.item.options[ this.optionId ].fields;\n\t\t// Array to save the buttons\n\t\tthis.buttons  = this.item.options[ this.optionId ].buttons;\n\n\t\tthis.create();\n\n\t\t// AFTER we added the elements to the DOM let's call init \n\t\t// TokenSelector, TinyMCE and CodeMirror. We're going to call this in\n\t\t// ItemOptions.js because the TokenSelector, TinyMCE and \n\t\t// CodeMirror need the item in the DOM before changing it\n\t\t// Select2 and the URL checker are called in Field.js\n\t\tthis.initTokenSelector();\n\t\tthis.initTinyMCE();\n\t\tthis.initFlatpickr();\n\t\tthis.initCodeMirror();\n\n\t\t// Dispatch custom event when everything is rendered\n\t\tdocument.dispatchEvent(\n\t\t\tnew CustomEvent(\n\t\t\t\t'automator/item/options/open',\n\t\t\t\t{\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\titemId: this.itemId,\n\t\t\t\t\t\tlibrariesReady: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n\n\tcreate(){\n\t\t// Container\n\t\tlet container = getDOMElements( 'item', {\n\t\t\tid: this.itemId\n\t\t}).contentContainer;\n\n\t\tlet itemOptions\t= $( '<div/>', { 'class': 'item-options' });\n\n\t\t// Buttons. We have to create these before the fields, but append after\n\t\tlet buttons = this.createButtons();\n\n\t\t// Fields\n\t\tlet fields = this.createFields();\n\t\tthis.fieldsContainer = fields;\n\t\titemOptions.append( fields );\n\n\t\t// Check if we have to inject custom HTML\n\t\tif ( isDefined( this.item.customHTML ) ) {\n\t\t\ttry {\n\t\t\t\t// Try to modify the content to insert item data\n\t\t\t\ttry {\n\t\t\t\t\tthis.item.customHTML = this.item.customHTML.replaceAll( '{{item_id}}', this.itemId );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\tconsole.log( e );\n\t\t\t\t}\n\n\t\t\t\t// Inject custom HTML\n\t\t\t\titemOptions.get(0)\n\t\t\t\t\t.insertAdjacentHTML( 'beforeEnd', this.item.customHTML );\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.log( e );\n\t\t\t}\n\t\t}\n\n\t\t// Create notices container\n\t\tlet noticeContainer  = $( '<div/>', { 'class': 'item-options__notices' });\n\t\tthis.noticeContainer = noticeContainer;\n\t\titemOptions.append( noticeContainer );\n\n\t\t// Append buttons\n\t\titemOptions.append( buttons );\n\n\t\t// Append to the item\n\t\tcontainer.html( itemOptions );\n\t}\n\n\tcreateFields(){\n\t\tlet container = $( '<div/>', { 'class': 'item-options__group' });\n\n\t\t// Create fields\n\t\t$.each( this.fields, ( index, field ) => {\n\t\t\t// Get field type\n\t\t\tlet fieldType = field.getAttributes().fieldType;\n\n\t\t\t// Check if it's a repeater\n\t\t\tif ( fieldType == 'repeater' ){\n\t\t\t\t// Create the fields again first (to avoid showing unsaved changed)\n\t\t\t\tfield.createFields();\n\t\t\t}\n\n\t\t\t// Append the form element to the DOM\n\t\t\tfield.createFormElement();\n\t\t\tcontainer.append( field.getFormElement() );\n\n\t\t\t// Bind submit on Enter (for all except groups and textareas)\n\t\t\tif ( ! [ 'textarea', 'group', 'repeater' ].includes( fieldType ) ){\n\t\t\t\t// Get field element and bind 'keyup'\n\t\t\t\tfield.getField().on( 'keyup', ( event ) => {\n\t\t\t\t\t// Check if it's an enter\n\t\t\t\t\tif ( event.keyCode == 13 ){\n\t\t\t\t\t\t// Trigger a click on the Save Button\n\t\t\t\t\t\tthis.saveButton.trigger( 'click' );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t// Check if it's a group\n\t\t\telse if ( fieldType == 'group' ){\n\t\t\t\t// Iterate fields\n\t\t\t\tfield.fields.forEach(( field ) => {\n\t\t\t\t\t// Get the field type\n\t\t\t\t\tconst fieldType = field.getAttributes().fieldType;\n\n\t\t\t\t\t// Check if it's not a textarea\n\t\t\t\t\tif ( fieldType !== 'textarea' ){\n\t\t\t\t\t\t// Get field element and bind 'keyup'\n\t\t\t\t\t\tfield.getField().on( 'keyup', ( event ) => {\n\t\t\t\t\t\t\t// Check if it's an enter\n\t\t\t\t\t\t\tif ( event.keyCode == 13 ){\n\t\t\t\t\t\t\t\t// Trigger a click on the Save Button\n\t\t\t\t\t\t\t\tthis.saveButton.trigger( 'click' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if ( fieldType == 'repeater' ){\n\t\t\t\t// Iterate rows\n\t\t\t\tfield.fieldRows.forEach(( row, index ) => {\n\t\t\t\t\t// Iterate each row\n\t\t\t\t\trow.forEach(( Field, index ) => {\n\t\t\t\t\t\t// Get field element and bind 'keyup'\n\t\t\t\t\t\tField.getField().on( 'keyup', ( event ) => {\n\t\t\t\t\t\t\t// Check if it's an enter\n\t\t\t\t\t\t\tif ( event.keyCode == 13 ){\n\t\t\t\t\t\t\t\t// Trigger a click on the Save Button\n\t\t\t\t\t\t\t\tthis.saveButton.trigger( 'click' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn container;\n\t}\n\n\tcreateButtons(){\n\t\t// Buttons\n\t\tlet container \t  \t = $( '<div/>', { 'class': 'item-options__buttons' });\n\n\t\t// Actions buttons\n\t\tlet automatorButtons = $( '<div/>', { 'class': 'item-options__uo-buttons' }),\n\t\t\tdeveloperButtons = $( '<div/>', { 'class': 'item-options__developer-buttons' });\n\n\t\tlet saveButton \t  \t = $( '<div/>', { 'class': 'uap-btn uap-btn--primary' }),\n\t\t\tcancelButton  \t = $( '<div/>', { 'class': 'uap-btn uap-btn--secondary' }).text( UncannyAutomator.i18n.cancel );\n\n\t\tif ( this.item.itemType == 'trigger' ){\n\t\t\tsaveButton.text( UncannyAutomator.i18n.save );\n\t\t}\n\n\t\tif ( this.item.itemType == 'action' ){\n\t\t\tsaveButton.text( UncannyAutomator.i18n.save );\n\t\t}\n\n\t\tif ( this.item.itemType == 'closure' ){\n\t\t\tsaveButton.text( UncannyAutomator.i18n.save );\n\t\t}\n\n\t\tthis.saveButton = saveButton;\n\n\t\tautomatorButtons.append( saveButton );\n\t\tautomatorButtons.append( cancelButton );\n\n\t\t// Check developer defined buttons\n\t\t$.each( this.buttons, ( index, button ) => {\n\t\t\t// Create button\n\t\t\tconst $buttonElement = $( '<div/>', { 'class': 'uap-btn' }).text( button.text );\n\n\t\t\t// Check if we have to add a custom class to the button\n\t\t\tif ( isDefined( button.css_classes ) ){\n\t\t\t\t// Add classes\n\t\t\t\t$buttonElement.addClass( button.css_classes );\n\t\t\t}\n\n\t\t\t// Check if it has a defined onClick function\n\t\t\tlet doOnClick = () => {};\n\t\t\tif ( isDefined( button.on_click ) ){\n\t\t\t\t// Try to overwrite empty function\n\t\t\t\ttry {\n\t\t\t\t\t// Try to convert the string to function, but first remove the <script> tags and trim the string\n\t\t\t\t\tdoOnClick = eval( `(${ button.on_click.replace( '<script>', '' ).replace( '</script>', '' ).trim() })` ); \n\t\t\t\t} catch ( e ){\n\t\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\tconsole.warn( button.on_click );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Listen clicks on the button\n\t\t\t$buttonElement.on( 'click', () => {\n\t\t\t\t// Invoke callback\n\t\t\t\tdoOnClick(\n\t\t\t\t\t// button\n\t\t\t\t\t$buttonElement,\n\t\t\t\t\t// data\n\t\t\t\t\t{\n\t\t\t\t\t\titem:      this.item,\n\t\t\t\t\t\tvalues:    getCurrentFieldsValues( { itemID: this.itemId } ),\n\t\t\t\t\t},\n\t\t\t\t\t// modules\n\t\t\t\t\t(function(){\n\t\t\t\t\t\t// Get required modules\n\t\t\t\t\t\tlet modules = {};\n\n\t\t\t\t\t\t// Check if the developer wants custom modules\n\t\t\t\t\t\tif ( isDefined( button.modules ) ){\n\t\t\t\t\t\t\t// Check if we have to add the modal module\n\t\t\t\t\t\t\tif ( button.modules.includes( 'modal' ) ){\n\t\t\t\t\t\t\t\t// Include modal\n\t\t\t\t\t\t\t\tmodules.Modal = Modal;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( button.modules.includes( 'markdown' ) ){\n\t\t\t\t\t\t\t\t// Include Markdown\n\t\t\t\t\t\t\t\tmodules.Markdown = Markdown;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Return modules\n\t\t\t\t\t\treturn modules;\n\t\t\t\t\t})()\n\t\t\t\t);\n\t\t\t});\n\n\t\t\t// Add button to the container\n\t\t\tdeveloperButtons.append( $buttonElement );\n\t\t});\n\n\t\tcontainer.append( automatorButtons );\n\t\tcontainer.append( developerButtons );\n\n\t\tsaveButton.on( 'click', () => {\n\t\t\t// Verify form\n\t\t\tlet formValidation = validateItemFields( this.fieldsContainer );\n\n\t\t\t// Check if it's valid\n\t\t\tif ( formValidation.isValid ){\n\t\t\t\t// Disable button and show loading animation\n\t\t\t\tsaveButton.addClass( 'uap-btn--loading uap-btn--disabled' );\n\n\t\t\t\t// The REST call wants:\n\t\t\t\t// - The item ID\n\t\t\t\t// - The option code (the one from the token, the main one)\n\t\t\t\t// - The value. If there is more than one then a serialized object\n\t\t\t\tlet itemId \t\t= this.itemId,\n\t\t\t\t\toptionCode \t= this.optionId,\n\t\t\t\t\toptionValue = this.getOptionValue();\n\n\t\t\t\t// Get a temporary item sentence\n\t\t\t\t// This must use values that are not yet saved in the meta of the item\n\t\t\t\tconst itemSentence = parseStringWithTokens( this.item, this.item.meta.sentence, $.extend({}, this.item.meta, getCurrentFieldsValues( { itemID: this.itemId } ) ) );\n\n\t\t\t\t// Get the item sentence HTML\n\t\t\t\tlet itemSentenceHTML;\n\t\t\t\ttry {\n\t\t\t\t\titemSentenceHTML = itemSentence.html.get(0).outerHTML;\n\t\t\t\t} catch ( e ){\n\t\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Get item form element\n\t\t\t\tconst $item = getDOMElements( 'item', {\n\t\t\t\t\tid: this.item.id\n\t\t\t\t}).item.get(0);\n\n\t\t\t\trestCall( 'update', {\n\t\t\t\t\titemId:       itemId,\n\t\t\t\t\toptionCode:   optionCode,\n\t\t\t\t\toptionValue:  optionValue,\n\t\t\t\t\tsentence_human_readable: itemSentence.brackets,\n\t\t\t\t\tsentence_human_readable_html: itemSentenceHTML,\n\n\t\t\t\t\toptions: this.options\n\t\t\t\t}, ( response ) => {\n\t\t\t\t\t// Clear the cache of tokens\n\t\t\t\t\tUncannyAutomator.cache.tokens = [];\n\t\t\t\t\t\n\t\t\t\t\t// Trigger \"saved\" on all item fields\n\t\t\t\t\tthis.fields.forEach(( Field ) => {\n\t\t\t\t\t\tField.getFormElement().trigger( 'saved' );\n\t\t\t\t\t});\n\n\t\t\t\t\t// Check if the item is valid\n\t\t\t\t\tconst itemIsValid = UncannyAutomator.recipe.items[ this.item.id ].isValid;\n\n\t\t\t\t\t// Check if we should render the UI right away, if if we should update the status first\n\t\t\t\t\t// Check if the item is valid\n\t\t\t\t\tif ( itemIsValid ) {\n\t\t\t\t\t\tif ( \n\t\t\t\t\t\t\t// Check if the recipe is NOT live yet\n\t\t\t\t\t\t\t( ! UncannyAutomator.recipe.isLive ) &&\n\t\t\t\t\t\t\t// Check if the item isn't already live\n\t\t\t\t\t\t\t( ! this.item.isLive )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tconst $statusToggle = $item.querySelector( '.uap-item-status input[type=\"checkbox\"]' );\n\n\t\t\t\t\t\t\t\t// Make it live\n\t\t\t\t\t\t\t\t$statusToggle.checked = true;\n\t\t\t\t\t\t\t\t$statusToggle.dispatchEvent( new Event( 'change' ) );\n\t\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Render the UI\n\t\t\t\t\t\t\t\tif ( this.item.itemType == 'trigger' ){\n\t\t\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t\t\t}\n\t\t\t\n\t\t\t\t\t\t\t\tif ( this.item.itemType == 'action' || this.item.itemType == 'closure' ){\n\t\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Render the UI\n\t\t\t\t\t\t\tif ( this.item.itemType == 'trigger' ){\n\t\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t\tif ( this.item.itemType == 'action' || this.item.itemType == 'closure' ){\n\t\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Render the UI\n\t\t\t\t\t\tif ( this.item.itemType == 'trigger' ){\n\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif ( this.item.itemType == 'action' || this.item.itemType == 'closure' ){\n\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Get item form element\n\t\t\t\t\t\tconst $newItem = getDOMElements( 'item', {\n\t\t\t\t\t\t\tid: this.item.id\n\t\t\t\t\t\t}).item.get(0);\n\n\t\t\t\t\t\t// Open the first non valid group of fields\n\t\t\t\t\t\tconst $options = $newItem.querySelectorAll( '.item-title__token:not(.item-title__token--filled)' );\n\t\t\t\t\t\tif ( isDefined( $options[0] ) ) {\n\t\t\t\t\t\t\t$options[0].click();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, ( response ) => {\n\t\t\t\t\t// Reset UI\n\t\t\t\t\tif ( this.item.itemType == 'trigger' ){\n\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.item.itemType == 'action' || this.item.itemType == 'closure' ){\n\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Try to open the options again\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Get the item elements\n\t\t\t\t\t\tgetDOMElements( 'item', {\n\t\t\t\t\t\t\tid: this.itemId\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// Get the main container\n\t\t\t\t\t\t.item\n\t\t\t\t\t\t// Find the token in the sentence\n\t\t\t\t\t\t.find( `.item-title__token[data-options-id=\"${ optionCode }\"]` )\n\t\t\t\t\t\t// Trigger a click\n\t\t\t\t\t\t.trigger( 'click' ); \n\t\t\t\t\t} catch ( e ){\n\t\t\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Handle the cancel button\n\t\tcancelButton.on( 'click', () => {\n\t\t\t// Remove the options\n\t\t\tgetDOMElements( 'item', { id: this.itemId }).contentContainer\n\t\t\t\t.html( '' );\n\n\t\t\t// Get item\n\t\t\tconst $item = getDOMElements( 'item', { id: this.item.id } ).item;\n\n\t\t\t// Remove open classes\n\t\t\t$item.removeClass( 'uap-item--open' );\n\t\t\t$item.find( '.item-title__token--open' )\n\t\t\t\t.removeClass( 'item-title__token--open' );\n\t\t\t\t\n\t\t\t// Get item form element\n\t\t\t$item.trigger( 'automator:item:open', false );\n\n\t\t\t// Dispatch custom event when everything is rendered\n\t\t\tdocument.dispatchEvent(\n\t\t\t\tnew CustomEvent(\n\t\t\t\t\t'automator/item/options/close',\n\t\t\t\t\t{\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\titemId: this.itemId,\n\t\t\t\t\t\t\ttriggeredBy: 'cancel-button'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t});\n\n\t\treturn container;\n\t}\n\n\tinitTokenSelector(){\n\t\t$.each( this.fields, ( index, field ) => {\n\t\t\t// Get the field type\n\t\t\tfield.initTokenSelector();\t\t\n\t\t});\n\t}\n\n\tinitTinyMCE(){\n\t\t$.each( this.fields, ( index, field ) => {\n\t\t\t// Get the field type\n\t\t\tif ( field.getAttributes().fieldType == 'textarea' ){\n\t\t\t\t// TinyMCE will be initialized only if it's a textarea and supportsTinyMCE is true\n\t\t\t\tfield.initTinyMCE();\n\t\t\t}\t\t\t\n\t\t});\n\t}\n\n\tinitCodeMirror(){\n\t\t$.each( this.fields, ( index, field ) => {\n\t\t\t// Get the field type\n\t\t\tfield.initCodeMirror();\n\t\t});\n\t}\n\n\t/**\n\t * Init flatpickr in all date & time fields\n\t */\n\tinitFlatpickr(){\n\t\t$.each( this.fields, ( index, field ) => {\n\t\t\t// Get the field type\n\t\t\tfield.initFlatpickr();\n\t\t});\n\t}\n\n\t/**\n\t * Creates the object that will be sent to the backend to save the fields\n\t * \n\t * @return {Object} The options data, including options group ID and the fields values\n\t */\n\tget options() {\n\t\tconst fields = {};\n\n\t\tthis.fields.forEach( field => {\n\t\t\tconst fieldAttributes = field.getAttributes();\n\n\t\t\t// Get basic field data\n\t\t\tconst fieldSummary = {\n\t\t\t\ttype:  fieldAttributes.fieldType,\n\t\t\t\tvalue: field.getValue()\n\t\t\t}\n\n\t\t\tif ( fieldSummary.type === 'select' ) {\n\t\t\t\t// Check if it supports multiple values\n\t\t\t\tfieldSummary[ 'supports_multiple_values' ] = fieldAttributes.supportsMultipleValues;\n\t\t\t\tfieldSummary[ 'supports_custom_value' ] = fieldAttributes.supportsCustomValue;\n\n\t\t\t\t// Check if it has a custom value\n\t\t\t\tif ( fieldSummary.value === 'automator_custom_value' ) {\n\t\t\t\t\tfieldSummary[ 'custom_value' ] = field.getSelectCustomValue();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( fieldSummary.type === 'select' || fieldSummary.type === 'radio' ) {\n\t\t\t\t// Save readable value\n\t\t\t\tif ( fieldSummary.value !== 'automator_custom_value' ) {\n\t\t\t\t\tfieldSummary[ 'value_readable' ] = field.getReadableValue();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( fieldSummary.type === 'textarea' ) {\n\t\t\t\t// Check if it supports HTML\n\t\t\t\tfieldSummary[ 'supports_tinymce' ] = fieldAttributes.supportsTinyMCE;\n\t\t\t}\n\n\t\t\tfields[ fieldAttributes.optionCode ] = fieldSummary;\n\t\t} );\n\n\t\treturn {\n\t\t\tgroupCode: this.optionId,\n\t\t\tfields: fields\n\t\t};\n\t}\n\n\t/**\n\t * Returns the data that has to be saved in the trigger/action meta\n\t */\n\tgetOptionValue(){\n\t\tlet response = {},\n\t\t\thasSelect = false,\n\t\t\thasRepeater = false;\n\n\t\t$.each( this.fields, ( index, field ) => {\n\t\t\tlet id \t  = field.getAttributes().optionCode,\n\t\t\t\tvalue = field.getValue();\n\n\t\t\tif ( [ 'select', 'radio' ].includes( field.getAttributes().fieldType ) ){\n\t\t\t\t// Has select\n\t\t\t\thasSelect = true;\n\n\t\t\t\t// Check if it's a multiselect\n\t\t\t\t// Then save the value as a JSON string, don't save it\n\t\t\t\t// as an array\n\t\t\t\tif ( field.getAttributes().supportsMultipleValues ){\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvalue = JSON.stringify( value );\n\t\t\t\t\t} catch ( e ){\n\t\t\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Save readable value\n\t\t\t\tresponse[ `${ id }_readable` ] = field.getReadableValue();\n\n\t\t\t\t// Check if we have to save the custom value (only for selects)\n\t\t\t\tconst customValue = field.getSelectCustomValue();\n\t\t\t\tif ( value == 'automator_custom_value' ){\n\t\t\t\t\tresponse[ `${ id }_custom` ] = customValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ( field.getAttributes().fieldType == 'repeater' ){\n\t\t\t\t// Has repeater\n\t\t\t\thasRepeater = true;\n\t\t\t\t\n\t\t\t\t// Convert data to a JSON string\n\t\t\t\tvalue = JSON.stringify( value );\n\t\t\t}\n\n\t\t\tresponse[ id ] = value;\n\t\t});\n\n\t\tif ( ! hasRepeater && ! hasSelect && Object.keys( response ).length == 1 ){\n\t\t\t// One field\n\t\t\tresponse = response[ Object.keys( response )[ 0 ] ];\n\t\t}\n\n\t\treturn response;\n\t}\n}\n\nexport default ItemOptions;","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Determines if the user can schedule an action or add delay\n *\n * @return {Boolean} True if the user can schedule an action or add delay\n */\nconst canManageSchedule = () => {\n\treturn isDefined( UncannyAutomator.wp ) && UncannyAutomator.wp;\n};\n\nexport default canManageSchedule;\n","const { isEmpty } = _uo.utility;\n\n/**\n * Converts a date into an integer to sort actions\n * If this gets more complex in the future, use momentjs.\n * At the moment this is pretty easy and straightforward, so it doesn't make sense to add another dependency just to perform this task.\n * \n * @param {String} date The date, in Y-m-d\n * @param {String} time The time, in h:i A\n * \n * @return {Integer} The date represented by a number\n */\nconst convertDateToSortableInteger = ( date, time ) => {\n    // Check if the date and time are defined\n    if ( isEmpty( date) || isEmpty( time ) ) {\n        return;\n    } \n\n    // Remove the dashes from the date\n    const dateAsNumber = parseInt( date.replaceAll( '-', '' ) );\n\n    // Remove the AM/PM from the time\n    const timeJustNumbers = parseInt( time.replace( /\\D/g, '' ) ); \n    const timeAsNumber = time.includes( 'PM' ) ? timeJustNumbers + 1200 : timeJustNumbers;\n\n    // Check if both the date and time are numbers\n    if ( isNaN( dateAsNumber ) || isNaN( timeAsNumber ) ) {\n        return;\n    }\n\n    return ( dateAsNumber + timeAsNumber );\n} \n\nexport default convertDateToSortableInteger;\n","const { isDefined } = _uo.utility;\n\n/**\n * Converts data like \"10 minutes\" into 600\n * @param {Integer|String} amount The amount of time\n * @param {String}         unit The unit of time\n * \n * @return {Integer} The time in seconds\n */\nconst convertDelayToSeconds = ( amount, unit ) => {\n    // Check if the amount is a number\n    amount = parseInt( amount );\n\n    if ( isNaN( amount ) ) {\n        return;\n    }\n\n    // Define multipliers\n    const multipliers = {\n        'seconds': 1,\n        'minutes': 60,\n        'hours':   3600,\n        'days':    86400,\n        'years':   31536000\n    }\n\n    // Check if the unit is valid\n    if ( ! isDefined( multipliers[ unit ] ) ) {\n        return;\n    }\n\n    return amount * multipliers[ unit ];\n}\n\nexport default convertDelayToSeconds;\n","// Import utilities\nimport { itemsObject } from '@builder/common/utilities';\nimport { convertDelayToSeconds, convertDateToSortableInteger } from '@builder/item/schedule/utilities';\nconst { isDefined } = _uo.utility;\n\n/**\n * Adds a property to all actions to easily recognize that they have actions\n *\n * @return {undefined}\n */\nconst flagActionsScheduled = () => {\n\t// Get recipe actions\n\tconst actions = itemsObject( 'get', {\n\t\tfilter: {\n\t\t\titemType: 'action',\n\t\t},\n\t} );\n\n\t// Add the default flag to all actions\n\t// The default flag is false\n\tfor ( const actionId in actions ) {\n\t\tconst actionMeta = UncannyAutomator.recipe.items[ actionId ].meta;\n\n\t\t// Check if it has the meta that only scheduled/delayed actions have\n\t\tUncannyAutomator.recipe.items[ actionId ].isScheduled = isDefined( actionMeta[ 'async_mode' ] ) && actionMeta[ 'async_mode' ] == 'schedule';\n\t\tUncannyAutomator.recipe.items[ actionId ].isDelayed = isDefined( actionMeta[ 'async_mode' ] ) && actionMeta[ 'async_mode' ] == 'delay';\n\n\t\t// Add data to make these actions sortable\n\t\tif ( UncannyAutomator.recipe.items[ actionId ].isScheduled ) {\n\t\t\tUncannyAutomator.recipe.items[ actionId ].scheduleNumber = convertDateToSortableInteger( actionMeta[ 'async_schedule_date' ], actionMeta[ 'async_schedule_time' ] );\n\t\t}\n\n\t\tif ( UncannyAutomator.recipe.items[ actionId ].isDelayed ) {\n\t\t\tUncannyAutomator.recipe.items[ actionId ].delayInSeconds = convertDelayToSeconds( actionMeta[ 'async_delay_number' ], actionMeta[ 'async_delay_unit' ] );\n\t\t}\n\t}\n};\n\nexport default flagActionsScheduled;\n","import $ from 'jquery';\n\nimport {\n\trestCall,\n\tgetGlobalItem,\n\tgetDOMElements,\n\tparseStringWithTokens,\n\treplaceCurlyBraces\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport Modal       from '../common/modal.js';\n\nimport Field       from '../field';\n\nimport ItemOptions from './options.js';\nimport Triggers    from './triggers.js';\nimport Actions     from './actions.js';\n\nimport {\n\tvalidateItem\n} from '../validation/validation';\n\nimport RecipeNotices from '../recipe/notices';\n\nclass ItemHeaderSentence {\n\tconstructor( itemType, integrationID, itemCode, itemId ){\n\t\tthis.itemType = itemType;\n\t\tthis.integrationID = integrationID;\n\t\tthis.itemCode = itemCode;\n\t\tthis.itemId   = itemId;\n\t\tthis.item     = UncannyAutomator.recipe.items[ itemId ];\n\n\t\treturn this.createItemSentence( itemType, itemCode, itemId );\n\t}\n\n\t/**\n\t * Create item sentence + status toggle\n\t * \n\t * @since 0.5     \n\t *\n\t * @return {object}   jQuery DOM object with the item sentence + status toggle\n\t */\n\n\tcreateItemSentence( itemType, itemCode, itemId ){\n\t\t// Get information about the global item\n\t\tlet globalItem = getGlobalItem( this.integrationID, itemType, itemCode );\n\t\tthis.globalItem = globalItem;\n\n\t\t// Get sentence\n\t\tlet itemSentence;\n\n\t\tif ( ! this.item.isMissing ){\n\t\t\titemSentence = getGlobalItem( this.integrationID, this.item.itemType, this.item.itemCode ).sentence;\n\t\t}\n\t\telse {\n\t\t\titemSentence = this.item.sentence;\n\t\t}\n\n\t\titemSentence = parseStringWithTokens(\n\t\t\tthis.item,\n\t\t\titemSentence,\n\t\t\tUncannyAutomator.recipe.items[ this.itemId ].meta,\n\t\t\ttrue\n\t\t);\n\n\t\tif ( ! this.item.isMissing ){\n\t\t\t// Listen clicks on tokens\n\t\t\titemSentence.elements.token.on( 'click', ( event ) => {\n\t\t\t\t// Get token element\n\t\t\t\tconst $token = $( event.currentTarget );\n\n\t\t\t\t// Remove \"open\" class from al items\n\t\t\t\titemSentence.elements.token.removeClass( 'item-title__token--open' );\n\t\t\t\t// Add \"open\" class to the clicked token\n\t\t\t\t$token.addClass( 'item-title__token--open' );\n\n\t\t\t\t// Add \"open\" class to the item\n\t\t\t\tconst $item = $token.parents( '.uap-item' );\n\t\t\t\t$item.addClass( 'uap-item--open' );\n\t\t\t\t\n\t\t\t\t/**\n\t\t\t\t * @deprecated\n\t\t\t\t */\n\t\t\t\t$item.trigger( 'automator:item:open', true );\n\n\t\t\t\t// Get options ID\n\t\t\t\tlet optionsID = $token.data( 'options-id' );\n\n\t\t\t\t// Get option group\n\t\t\t\tlet optionGroupDOM = getDOMElements( 'optionGroup', {\n\t\t\t\t\titemID:  itemId,\n\t\t\t\t\tgroupID: optionsID,\n\t\t\t\t});\n\n\t\t\t\t// Create and show\n\t\t\t\tnew ItemOptions( itemId, optionsID );\n\t\t\t});\n\t\t}\n\t\t\t\n\t\t// Create DOM elements\n\t\tlet container = $( '<div/>', { 'class': 'item-title__describe-container' }),\n\t\t\tstatus    = $( '<div/>', { 'class': 'uap-item-status item-status' });\n\n\t\tcontainer.append( itemSentence.html.addClass( 'item-title__describe' ).attr( 'dir', 'auto' ) );\n\n\t\t// Create toggle. We're using Field. Read Field.js comments for more information\n\t\tvar itemToggle = new Field( 'checkbox', {\n\t\t\tcolor: 'green',\n\t\t\talign: 'right',\n\t\t\ttoggle: {\n\t\t\t\ton:  UncannyAutomator.i18n.status.liveRecipeItem,\n\t\t\t\toff: UncannyAutomator.i18n.status.draftRecipeItem,\n\t\t\t},\n\t\t\tcurrentValue: UncannyAutomator.recipe.items[ itemId ].isLive\n\t\t});\n\n\t\tlet itemStatusToggle = itemToggle.getFormElement();\n\t\t\tstatus.append( itemStatusToggle );\n\t\t\tcontainer.append( status );\n\n\t\tif ( ! this.item.isMissing ){\n\t\t\titemStatusToggle.on( 'automator:field:change', function(){\n\t\t\t\tlet makeLive = itemToggle.getValue();\n\t\t\t\tvar isValidItem = true; // True by default, will change to false is it's invalid\n\n\t\t\t\t// Check if the user wants to make it live\n\t\t\t\tif ( makeLive ){\n\t\t\t\t\t// Validate\n\t\t\t\t\tlet validation = validateItem( itemId );\n\t\t\t\t\tisValidItem = validation.isValid; \n\t\t\t\t}\n\n\t\t\t\t// Do AJAX\n\t\t\t\t// Show loading animation\n\t\t\t\titemToggle.startLoadingAnimation();\n\n\t\t\t\tif ( isValidItem ){\n\t\t\t\t\t// Set post status\n\t\t\t\t\tlet post_status = makeLive ? 'publish' : 'draft';\n\n\t\t\t\t\t// Check if they want to make an item draft in a live recipe\n\t\t\t\t\tif ( ! makeLive && UncannyAutomator.recipe.isLive ){\n\t\t\t\t\t\t// Create modal box\n\t\t\t\t\t\t// Read Modal.js comments for more information\n\t\t\t\t\t\tlet modal = new Modal({\n\t\t\t\t\t\t\ttitle:       UncannyAutomator.i18n.confirmationModal.title,\n\t\t\t\t\t\t\twarning:     replaceCurlyBraces( UncannyAutomator.i18n.confirmationModal.statusWarning, '<strong>', '</strong>' ),\n\t\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\t\tcancel:  UncannyAutomator.i18n.cancel,\n\t\t\t\t\t\t\t\tconfirm: UncannyAutomator.i18n.confirm,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tmodal.setEvents({\n\t\t\t\t\t\t\tafterSetEvents: function(){\n\t\t\t\t\t\t\t\tmodal.show();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonConfirm: function(){\n\t\t\t\t\t\t\t\tlet elements        = modal.getElements();\n\t\t\t\t\t\t\t\tlet confirmButton   = elements.modal.box.buttons.confirm;\n\n\t\t\t\t\t\t\t\t// Add loading class to button\n\t\t\t\t\t\t\t\tconfirmButton.addClass( 'uap-btn--loading' ).prop( 'disabled', true );\n\n\t\t\t\t\t\t\t\t// Start loading animation on toggle\n\t\t\t\t\t\t\t\titemToggle.startLoadingAnimation();\n\n\t\t\t\t\t\t\t\t// Get the item sentence HTML\n\t\t\t\t\t\t\t\tlet itemSentenceHTML;\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\titemSentenceHTML = itemSentence.html.get(0).outerHTML;\n\t\t\t\t\t\t\t\t} catch ( e ){\n\t\t\t\t\t\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\trestCall( 'change_post_status', {\n\t\t\t\t\t\t\t\t\tpost_ID:      itemId,\n\t\t\t\t\t\t\t\t\tpost_status:  post_status,\n\t\t\t\t\t\t\t\t\tsentence_human_readable: itemSentence.brackets,\n\t\t\t\t\t\t\t\t\tsentence_human_readable_html: itemSentenceHTML\n\t\t\t\t\t\t\t\t}, function(){\n\t\t\t\t\t\t\t\t\t// On success\n\t\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t\t\t\t\t// Refresh UI\n\t\t\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t\t\t\tnew Actions();\n\n\t\t\t\t\t\t\t\t\t// Show error\n\t\t\t\t\t\t\t\t\tnew RecipeNotices();\n\n\t\t\t\t\t\t\t\t\t// Check if the recipe is still valid, if it isn't then make the recipe draft\n\t\t\t\t\t\t\t\t\tif ( ! UncannyAutomator.recipe.isValid ){\n\t\t\t\t\t\t\t\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, function(){\n\t\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t\t\t\t\t// Remove loading animation, data didn't change\n\t\t\t\t\t\t\t\t\titemToggle.stopLoadingAnimation();\n\n\t\t\t\t\t\t\t\t\t// Revert user change\n\t\t\t\t\t\t\t\t\titemToggle.setValue( ! makeLive, false );\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonCancel: function(){\n\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t\t\t\t\t// Revert user change\n\t\t\t\t\t\t\t\titemToggle.setValue( ! makeLive, false );\n\n\t\t\t\t\t\t\t\t// Stop loading animation in the toggle\n\t\t\t\t\t\t\t\titemToggle.stopLoadingAnimation();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tafterHide: function(){\n\t\t\t\t\t\t\t\tmodal.destroy();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Get the item sentence HTML\n\t\t\t\t\t\tlet itemSentenceHTML;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\titemSentenceHTML = itemSentence.html.get(0).outerHTML;\n\t\t\t\t\t\t} catch ( e ){\n\t\t\t\t\t\t\t// Continue regardless of error\n\t\t\n\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t// Is valid, make live\n\t\t\t\t\t\trestCall( 'change_post_status', {\n\t\t\t\t\t\t\tpost_ID:      itemId,\n\t\t\t\t\t\t\tpost_status:  post_status,\n\t\t\t\t\t\t\tsentence_human_readable: itemSentence.brackets,\n\t\t\t\t\t\t\tsentence_human_readable_html: itemSentenceHTML\n\t\t\t\t\t\t}, function(){\n\t\t\t\t\t\t\t// On sucess\n\t\t\t\t\t\t\t// Update object\n\n\t\t\t\t\t\t\t// Refresh UI\n\t\t\t\t\t\t\t// Render the UI\n\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\tnew Triggers();\n\n\t\t\t\t\t\t\t// Show error\n\t\t\t\t\t\t\tnew RecipeNotices();\n\t\t\t\t\t\t}, function(){\n\t\t\t\t\t\t\t// Remove loading animation, data didn't change\n\t\t\t\t\t\t\titemToggle.stopLoadingAnimation();\n\n\t\t\t\t\t\t\t// Revert user change\n\t\t\t\t\t\t\titemToggle.setValue( ! makeLive, false );\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// JS won't take more than some milliseconds to do this, so we're going to wait one second just for the user to understand what's happening\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t// Remove loading animation\n\t\t\t\t\t\titemToggle.stopLoadingAnimation();\n\n\t\t\t\t\t\t// Revert user change\n\t\t\t\t\t\titemToggle.setValue( false, false );\n\t\t\t\t\t}, 1000 );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn container;\n\t}\n}\n\nexport default ItemHeaderSentence;\n","// Import utilities\nimport { getDOMElements } from '@builder/common/utilities';\nconst { isDefined } = _uo.utility;\n\n/**\n * Returns the order of the actions.\n * This uses the DOM element to get the order\n *\n * @param {Boolean} includeNewActions Used to decide whether we should include the position of new actions (that don't exist yet)\n * @return {Array} The order of the actions. The elements are IDs\n */\nconst getActionsOrder = ( includeNewActions = false ) => {\n\t// Default response\n\tconst instantActionsOrder = [],\n\t      delayedScheduledActionsOrder = [];\n\n\t// Get the actions metabox\n\tconst $actionsMetabox = getDOMElements( 'metabox', {\n\t\ttype: 'action',\n\t} ).get( 0 );\n\n\t// Get actions\n\tconst $actions = $actionsMetabox.querySelectorAll( '.uap-item:not(.uap-item--closure)' );\n\t// Iterate them and get the order\n\t$actions.forEach( ( $action ) => {\n\t\t// Get the action ID\n\t\tconst actionID = isDefined( $action.itemId ) ? $action.itemId : 'new_action';\n\n\t\t// Check if the action exists\n\t\tif ( ! includeNewActions && actionID === 'new_action' ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If it's delayed or scheduled, add it on a separated array\n\t\tif ( \n\t\t\tisDefined( UncannyAutomator.recipe.items[ actionID ] ) && \n\t\t\t( UncannyAutomator.recipe.items[ actionID ].isScheduled || UncannyAutomator.recipe.items[ actionID ].isDelayed )\n\t\t) {\n\t\t\tdelayedScheduledActionsOrder.push( actionID );\n\t\t}\n\n\t\t// Normal actions, and \"new_action\" go into the \"instant actions\" array\n\t\tinstantActionsOrder.push( actionID );\n\t} );\n\n\t// Return both, but the instant actions first\n\treturn [ ...instantActionsOrder, ...delayedScheduledActionsOrder ];\n};\n\nexport default getActionsOrder;\n","// Import utilities\nimport { getConditionsGroupById } from '@builder/item/conditions/utilities';\nimport { itemsObject } from '@builder/common/utilities';\nconst { isEmpty } = _uo.utility;\n\n/**\n * Checks whether actions should be sortable\n *\n * @param {Object} options The options\n * @param {String} options.conditionsGroupID The condition group ID\n * @param {Integer} options.actionID The action ID\n *\n * @return {Boolean} `true` if they should be sortable\n */\nconst shouldBeSortable = ( { conditionsGroupID, actionID } ) => {\n\t// Check if either the conditions group ID or action ID are defined\n\tif ( isEmpty( conditionsGroupID ) && isEmpty( actionID ) ) {\n\t\t// Check if debugging mode is enabled\n\t\t// eslint-disable-next-line no-lonely-if\n\t\tif ( UncannyAutomatorBackend.debugging.enabled ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( `Item/sortability: Define a \\`conditionsGroupID\\` or \\`actionID\\`.` );\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// Make sure that if the actionID is defined, it's actually an action\n\tif ( ! isEmpty( actionID ) && UncannyAutomator.recipe.items[ actionID ].itemType !== 'action' ) {\n\t\treturn;\n\t}\n\n\t// Check if it's a conditions group\n\tif (\n\t\t! isEmpty( conditionsGroupID )\n\t) {\n\t\t// Find conditions group by ID\n\t\tconst conditionsGroup = getConditionsGroupById( {\n\t\t\tconditionsGroupId: conditionsGroupID,\n\t\t} );\n\t\t\n\t\t// If all its actions are delayed or scheduled, it shouldn't be sortable\n\t\tif ( conditionsGroup.hasActions && ! conditionsGroup.hasInstantActions ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// // Get information we're going to need\n\tconst quantitySortableActions = Object.values( itemsObject( 'get', {\n\t\tfilter: {\n\t\t\titemType: 'action',\n\t\t\t// isScheduled: false,\n\t\t\t// isDelayed: false,\n\t\t\tisMissing: false,\n\t\t}\n\t} ) ).length;\n\n\tconst quantityConditionsGroups = Object.values( UncannyAutomator.recipe.conditions ).length;\n\n\t// This will be sortable if there are at least two items that can be sorted\n\treturn ( quantitySortableActions + quantityConditionsGroups ) > 1;\n};\n\nexport default shouldBeSortable;\n","// Import utilities\nimport { itemsObject } from '@builder/common/utilities';\nimport { shouldBeSortable } from '@builder/item/sortability/utilities';\n\n/**\n * Adds a property to all actions to easily recognize that they have actions\n *\n * @return {undefined}\n */\nconst flagActionsSortable = () => {\n\t// Get recipe actions\n\tconst actions = itemsObject( 'get', {\n\t\tfilter: { itemType: 'action' },\n\t} );\n\n\t// Add the default flag to all actions\n\t// The default flag is false\n\tfor ( const actionID in actions ) {\n\t\t// Check if it has the meta that only scheduled/delayed actions have\n\t\tUncannyAutomator.recipe.items[ actionID ].isSortable = shouldBeSortable( { actionID: actionID } );\n\t}\n};\n\nexport default flagActionsSortable;\n","import {\n\titemsObject,\n\tgetDOMElements\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tgetURLParameter\n} = _uo.utility;\n\nimport ItemCreatorIntegrations  from './integrations-grid.js';\n\nimport MetaboxItems             from '../metabox/items.js';\nimport MetaboxFooter            from '../metabox/footer.js';\n\nclass Triggers {\n\tconstructor(){\n\t\t// Create console group\n\t\t// console.group( 'Triggers' );\n\n\t\t// Get and clear metabox\n\t\tlet metabox = getDOMElements( 'metabox', { type: 'trigger' } ).get(0);\n\t\tmetabox.innerHTML = '';\n\n\t\t// Get recipe triggers\n\t\tlet triggers = itemsObject( 'get', {\n\t\t\tfilter: { itemType: 'trigger' },\n\t\t\tformat: 'array',\n\t\t});\n\n\t\t// Insert the and/or selector\n\t\tmetabox.insertAdjacentHTML( 'afterBegin', `<ua-builder-triggers-and-or-selector></ua-builder-triggers-and-or-selector>` );\n\n\t\t// Check if it has triggers\n\t\tif ( ! isEmpty( triggers ) ){\n\t\t\t// Render items\n\t\t\tnew MetaboxItems( 'trigger', triggers, false );\n\n\t\t\t// Create metabox footer\n\t\t\tnew MetaboxFooter( 'trigger' );\n\n\t\t\t// Check if we have to show the integrations on load\n\t\t\tif ( this.isContinuingIntegrationConnection() ){\n\t\t\t\t// Render the integrations list\n\t\t\t\tnew ItemCreatorIntegrations( 'trigger' );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tnew ItemCreatorIntegrations( 'trigger' );\n\n\t\t\t// Create metabox footer\n\t\t\tnew MetaboxFooter( 'trigger' );\n\t\t}\n\n\t\t// Close console group\n\t\t// console.groupEnd();\n\t}\n\n\tisContinuingIntegrationConnection(){\n\t\treturn getURLParameter( null, 'ua_connecting_integration' ) == 1 && getURLParameter( null, 'ua_connecting_integration_context' ) == 'trigger';\n\t}\n}\n\nexport default Triggers;","import $ from 'jquery';\n\nimport {\n\titemsObject,\n\tgetDOMElements,\n\taddUTMParameters\n} from '../common/utilities';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport ItemCreatorIntegrations from '../item/integrations-grid.js';\nimport Triggers                from '../item/triggers';\nimport Actions                 from '../item/actions';\n\nimport MetaboxItems            from './items';\n\nclass MetaboxFooter {\n\n\tconstructor( itemType ){\n\t\tthis.itemType = itemType;\n\n\t\tif ( this.shouldCreateMetaboxFooter() ){\n\t\t\tthis.createFooter();\n\t\t}\n\t}\n\n\tshouldCreateMetaboxFooter(){\n\t\t// Check if we should create the metabox\n\t\t// For the triggers we're going to create it always,\n\t\t// but for the actions we're going to create only if there is at least one action\n\n\t\tlet create = false;\n\n\t\tif ( this.itemType == 'trigger' ){\n\t\t\t// Get triggers\n\t\t\tlet recipeActions = itemsObject( 'get', {\n\t\t\t\tfilter: {\n\t\t\t\t\titemType: 'trigger'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Check if has triggers\n\t\t\tlet hasTriggers = ! isEmpty( recipeActions );\n\n\t\t\t// Create metabox if hasTriggers\n\t\t\tif ( ( hasTriggers || ( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp ) ) || UncannyAutomator.recipe.type == 'anonymous' ){\n\t\t\t\tcreate = true;\n\t\t\t}\n\t\t}\n\n\t\tif ( this.itemType == 'action' ){\n\t\t\t// Get actions\n\t\t\tlet recipeActions = itemsObject( 'get', {\n\t\t\t\tfilter: {\n\t\t\t\t\titemType: 'action'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Check if has actions\n\t\t\tlet hasActions = ! isEmpty( recipeActions );\n\n\t\t\t// Create metabox if hasActions\n\t\t\tif ( hasActions || ! isEmpty( UncannyAutomator.recipe.conditions ) ){\n\t\t\t\tcreate = true;\n\t\t\t}\n\t\t}\n\n\t\treturn create;\n\t}\n\n\tcreateFooter(){\n\t\t// Create error container\n\t\tlet container  = $( '<div/>', { 'class': 'metabox__footer' });\n\n\t\t// \"Add another\" button\n\t\tconst $addAnother = document.createElement( 'uo-button' );\n\t\t$addAnother.setAttribute( 'color', 'secondary' );\n\n\t\t// Add button, but don't add it in the triggers metabox for anonymous recipes\n\t\tif ( this.itemType == 'action' || ( this.itemType == 'trigger' && UncannyAutomator.recipe.type == 'user' ) ){\n\t\t\t// Append \"Add another\" button\n\t\t\tcontainer.append( $addAnother );\n\t\t}\n\n\t\tif ( this.itemType == 'trigger' ){\n\t\t\t// Do only for \"user\" recipes\n\t\t\tif ( UncannyAutomator.recipe.type == 'user' ){\n\t\t\t\t// Set text to the \"Add Another\" button\n\t\t\t\t$addAnother.innerText = UncannyAutomator.i18n.trigger.addAnother;\n\t\t\t}\n\n\t\t\t// Do only for \"anonymous\" recipes\n\t\t\tif ( UncannyAutomator.recipe.type == 'anonymous' ){\n\t\t\t\t// Create and append anonymous notice\n\t\t\t\tlet $anonymousNotice = this.createAnonymousNotice();\n\t\t\t\tcontainer.append( $anonymousNotice );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.itemType == 'action' ){\n\t\t\t// Set text to the \"Add Another\" button\n\t\t\t$addAnother.innerText = UncannyAutomator.i18n.action.addAnother;\n\t\t\tcontainer.addClass('add-action-btn');\n\t\t}\n\n\t\t// Add button to add filter\n\t\tif ( this.itemType == 'action' ){\n\t\t\tcontainer.get(0).insertAdjacentHTML( 'beforeEnd', `\n\t\t\t\t<ua-builder-conditions-add-button>\n\t\t\t\t\t${ UncannyAutomator.i18n.conditions.addFilter }\n\t\t\t\t</ua-builder-conditions-add-button>\n\t\t\t` );\n\t\t}\n\n\t\t// Bind button\n\t\tif ( ( this.itemType == 'trigger' && UncannyAutomator.recipe.type == 'user' ) || this.itemType == 'action' ){\n\t\t\t// Listen clicks to the \"Add another\" button\n\t\t\t$addAnother.addEventListener( 'click', () => {\n\t\t\t\t// Close any open conditions actions\n\t\t\t\tnew Actions();\n\n\t\t\t\t// Multiple triggers are only allowed in the pro version\n\t\t\t\t// So we're only doing this for actions\n\t\t\t\tnew ItemCreatorIntegrations( this.itemType );\n\t\t\t} );\n\t\t}\n\n\t\t// Append to the metabox\n\t\tlet metabox = getDOMElements( 'metabox', {\n\t\t\ttype: this.itemType\n\t\t})\n\n\t\tmetabox.append( container );\n\t}\n\n\tcreateAnonymousNotice(){\n\t\tlet $notice = $( `\n\t\t\t<div class=\"description\">\n\t\t\t\t${ UncannyAutomator.i18n.recipeType.everyoneOnlyOneTrigger } <a href=\"${ addUTMParameters( 'https://automatorplugin.com/knowledge-base/managing-triggers/', {\n\t\t\t\t\t\t'medium':  'anonymous_recipe_one_trigger',\n\t\t\t\t\t\t'content': 'learn_more'\n\t\t\t\t\t}) }\" target=\"_blank\">${ UncannyAutomator.i18n.learnMore } <uo-icon id=\"external-link\"></uo-icon></a>\n\t\t\t</div>\n\t\t` );\n\n\t\treturn $notice;\n\t}\n}\n\nexport default MetaboxFooter;","import $ from 'jquery';\n\n// Import utilities and components\nconst { addParametersToURL } = _uo.utility;\nimport { openInNewTab, addUTMParameters, restCall } from '@builder/common/utilities';\nimport { isAutomatorProActive } from '@builder/utilities';\n\n// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\nimport { canManageSchedule } from '@builder/item/schedule/utilities';\n\nimport Field from '../field';\n\nimport Modal from '../common/modal.js';\n\nimport Actions from './actions.js';\n\nclass ItemHeaderAsync {\n\tbuttonContainer;\n\n\tbutton;\n\n\tbuttonIcon;\n\n\tremoveButton;\n\n\tasyncModeField;\n\n\tasyncModeHTML;\n\n\tdelayNumberField;\n\n\tdelayNumberHTML;\n\n\tdelayUnitField;\n\n\tdelayUnitHTML;\n\n\tscheduleDateField;\n\n\tscheduleDateHTML;\n\n\tscheduleTimeField;\n\n\tscheduleTimeHTML;\n\n\tscheduleNoticeHTML;\n\n\tmodal;\n\n\t/**\n\t * Create item actions\n\t *\n\t * @since 0.5\n\t * @return jQuery DOM element with the item actions\n\t */\n\n\tconstructor( itemType, integrationID, itemCode, itemId ) {\n\t\tthis.itemType = itemType;\n\t\tthis.integrationID = integrationID;\n\t\tthis.itemCode = itemCode;\n\t\tthis.itemId = itemId;\n\t\tthis.item = UncannyAutomator.recipe.items[ itemId ];\n\t\tthis.asyncMode = this.item.meta.async_mode;\n\n\t\tif ( UncannyAutomator.proVersion.startsWith( '2' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.createAsyncButton();\n\t}\n\n\thasSchedule() {\n\t\tif ( ! this.asyncMode ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( this.asyncMode == 'delay' ) {\n\t\t\treturn this.item.meta.async_delay_number && this.item.meta.async_delay_unit;\n\t\t}\n\n\t\tif ( this.asyncMode == 'schedule' ) {\n\t\t\treturn this.item.meta.async_schedule_time && this.item.meta.async_schedule_date;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetButtonText() {\n\t\tif ( this.hasSchedule() ) {\n\t\t\tlet text = UncannyAutomator.i18n.action.asyncActions[ this.asyncMode ];\n\t\t\ttext += ' ';\n\n\t\t\tif ( isAutomatorProActive() ) {\n\t\t\t\ttext += `${ this.item.meta.async_sentence }`;\n\t\t\t} else {\n\t\t\t\ttext += `<strike>${ this.item.meta.async_sentence }</strike>`;\n\t\t\t}\n\n\t\t\treturn text;\n\t\t}\n\t\t\n\t\treturn UncannyAutomator.i18n.action.asyncActions.delay;\n\t}\n\n\tcreateAsyncButton() {\n\t\t// Create wrapper\n\t\tthis.buttonContainer = document.createElement( 'div' );\n\t\tthis.buttonContainer.classList.add( 'item-async' );\n\n\t\t// Create button\n\t\tthis.buttonContainer.innerHTML = `\n\t\t\t<uo-button\n\t\t\t\tsize=\"extra-small\"\n\t\t\t\tcolor=\"secondary\"\n\t\t\t>\n\t\t\t\t<uo-icon id=\"clock\"></uo-icon> ${ this.getButtonText() }\n\t\t\t</uo-button>\n\t\t`;\n\n\t\tthis.buttonContainer = $( this.buttonContainer );\n\t\tthis.button = this.buttonContainer.find( 'uo-button' );\n\n\t\tif ( canManageSchedule() ) { \n\n\t\t\tif ( this.hasSchedule() ) {\n\t\t\t\tthis.createRemoveButton();\n\t\t\t}\n\n\t\t\t// Listen clicks to the open button\n\t\t\tthis.button.on( 'click', () => {\n\t\t\t\tif ( ! this.buttonContainer.hasClass( 'disabled' ) ) {\n\t\t\t\t\tthis.showModal();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tthis.buttonContainer.on( 'automator:asyncButton:maybeDisable', ( e, disable ) => {\n\t\t\t\tconst buttonContainer = $( e.currentTarget );\n\n\t\t\t\tif ( disable ) {\n\t\t\t\t\tbuttonContainer.attr( 'uap-tooltip', UncannyAutomator.i18n.action.asyncActions.pleaseSave );\n\n\t\t\t\t\tthis.button.prop( 'disabled', true );\n\t\t\t\t} else {\n\t\t\t\t\tthis.button.prop( 'disabled', false );\n\t\t\t\t\tbuttonContainer.removeAttr( 'uap-tooltip', false );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} else {\n\t\t\t// Disable the button\n\t\t\tthis.button.get(0)\n\t\t\t\t.setAttribute( 'disabled', '' );\n\n\t\t\t// Add tooltip\n\t\t\tthis.buttonContainer.get(0)\n\t\t\t\t.setAttribute( 'uap-tooltip', UncannyAutomator.i18n.action.asyncActions.unlockSchedule );\n\n\t\t\t// Open link on click\n\t\t\tthis.buttonContainer.get(0).addEventListener( 'click', () => {\n\t\t\t\t// Open URL on a new tab\n\t\t\t\topenInNewTab(\n\t\t\t\t\taddParametersToURL(\n\t\t\t\t\t\t// Add UTM parameters\n\t\t\t\t\t\taddUTMParameters( 'https://automatorplugin.com/pricing/', {\n\t\t\t\t\t\t\tmedium: 'recipe_creator',\n\t\t\t\t\t\t\tcontent: 'action_disabled_schedule_button',\n\t\t\t\t\t\t} ),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuap_bpro_context: 'delay'\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\tthis.$button = this.buttonContainer.get(0);\n\t}\n\n\tenable() {\n\t\tthis.button.removeAttr( 'uap-tooltip' );\n\t\tthis.button.removeAttr( 'disabled' );\n\t}\n\n\tcreateRemoveButton() {\n\t\tthis.removeButton = $( '<span/>', { class: 'async-remove' } );\n\t\tthis.removeButtonIcon = $( '<uo-icon/>', { id: 'times' } );\n\n\t\tthis.removeButton.text( UncannyAutomator.i18n.action.asyncActions.remove );\n\t\tthis.removeButton.on( 'click', () => {\n\t\t\tthis.removeSchedule();\n\t\t} );\n\t\tthis.removeButton.prepend( this.removeButtonIcon );\n\t\tthis.buttonContainer.append( this.removeButton );\n\t}\n\n\tcreateModalContent() {\n\t\t// Create the content for the modal\n\t\tconst modalContent = $( `<div/>`, { class: 'async-action-modal' } );\n\n\t\tthis.asyncModeHTML = this.createAsyncModeHTML();\n\n\t\tthis.asyncModeHTML.find( '.form-radio__container:first' ).after( this.createDelayOptions() );\n\t\tthis.asyncModeHTML.find( '.form-radio__container:last' ).after( this.createScheduleOptions() );\n\n\t\tthis.attachModeChangeEvent();\n\n\t\t// Add the field\n\t\tmodalContent.append( this.asyncModeHTML );\n\n\t\tif ( this.hasSchedule() ) {\n\t\t\tconst modalNoticeHTML = $( '<div/>', { class: 'async-notice async-notice__blue' } );\n\t\t\tconst modalNoticeIcon = $( '<uo-icon/>', { id: 'exclamation-triangle' } );\n\t\t\tmodalNoticeHTML.append( modalNoticeIcon );\n\t\t\tmodalNoticeHTML.append( UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice2 );\n\t\t\tmodalContent.append( modalNoticeHTML );\n\t\t}\n\n\t\treturn modalContent;\n\t}\n\n\tshowModal() {\n\t\tlet confirmButtonText = UncannyAutomator.i18n.action.asyncActions.modal.confirm;\n\n\t\tif ( this.hasSchedule() && this.asyncMode == 'schedule' ) {\n\t\t\tconfirmButtonText = UncannyAutomator.i18n.action.asyncActions.schedule;\n\t\t}\n\n\t\t// Show a modal\n\t\tthis.modal = new Modal(\n\t\t\t{\n\t\t\t\ttitle: UncannyAutomator.i18n.action.asyncActions.modal.title,\n\t\t\t\tcontent: this.createModalContent(),\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel: UncannyAutomator.i18n.cancel,\n\t\t\t\t\tconfirm: confirmButtonText,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsize: 'large',\n\t\t\t\tcustomClass: 'async-action',\n\t\t\t}\n\t\t);\n\n\t\tthis.modalEvents();\n\t}\n\n\tmodalEvents() {\n\t\tthis.modal.setEvents( {\n\t\t\tafterSetEvents: () => {\n\t\t\t\tthis.modal.show();\n\t\t\t},\n\t\t\tonConfirm: () => {\n\t\t\t\tthis.submitModal();\n\t\t\t},\n\t\t\tafterHide: () => {\n\t\t\t\tthis.modal.destroy();\n\t\t\t},\n\t\t} );\n\t}\n\n\tsubmitModal() {\n\t\tconst elements = this.modal.getElements();\n\t\tconst confirmButton = elements.modal.box.buttons.confirm;\n\n\t\t// Add loading class to button\n\t\tconfirmButton.addClass( 'uap-btn--loading' ).prop( 'disabled', true );\n\n\t\tif ( ! this.validateForm().isValid ) {\n\t\t\tconfirmButton.removeClass( 'uap-btn--loading' ).prop( 'disabled', false );\n\t\t\treturn;\n\t\t}\n\n\t\tconst asyncMode = this.asyncModeField.getValue();\n\t\tconst delayNumber = this.delayNumberField.getValue();\n\t\tconst delayUnit = this.delayUnitField.getValue();\n\t\tconst scheduleTime = this.scheduleTimeField.getValue();\n\t\tconst scheduleDate = this.scheduleDateField.getValue();\n\n\t\tlet sentence;\n\n\t\tif ( asyncMode == 'delay' ) {\n\t\t\tsentence = this.delaySentence();\n\t\t} else {\n\t\t\tsentence = this.scheduleSentence();\n\t\t}\n\n\t\tthis.saveSchedule( asyncMode, delayNumber, delayUnit, scheduleTime, scheduleDate, sentence );\n\t}\n\n\tdelaySeconds() {\n\t\tconst delayUnit = this.delayUnitField.getValue();\n\t\tconst delayNumber = this.delayNumberField.getValue();\n\t\tlet multiplier;\n\n\t\tswitch ( delayUnit ) {\n\t\t\tcase 'seconds':\n\t\t\t\tmultiplier = 1;\n\t\t\t\tbreak;\n\t\t\tcase 'minutes':\n\t\t\t\tmultiplier = 60;\n\t\t\t\tbreak;\n\t\t\tcase 'hours':\n\t\t\t\tmultiplier = 60 * 60;\n\t\t\t\tbreak;\n\t\t\tcase 'days':\n\t\t\t\tmultiplier = 60 * 60 * 24;\n\t\t\t\tbreak;\n\t\t\tcase 'years':\n\t\t\t\tmultiplier = 60 * 60 * 24 * 365;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmultiplier = 1;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn delayNumber * multiplier;\n\t}\n\n\tdelaySentence() {\n\t\tlet unit = this.delayUnitField.getValue();\n\n\t\tif ( this.delayNumberField.getValue() == 1 ) {\n\t\t\tunit = unit.slice( 0, -1 );\n\t\t}\n\n\t\treturn `${ this.delayNumberField.getValue() } ${ UncannyAutomator.i18n.action.asyncActions.modal[\n\t\t\tunit\n\t\t].toLowerCase() }`;\n\t}\n\n\tscheduleSeconds() {\n\t\treturn Date.parse( `${ this.scheduleDateField.getValue() } ${ this.scheduleTimeField.getValue() }` );\n\t}\n\n\tscheduleSentence() {\n\t\treturn `${ this.scheduleDateField.getValue() } @ ${ this.scheduleTimeField.getValue() }`;\n\t}\n\n\tsaveSchedule(\n\t\tasyncMode,\n\t\tdelayNumber = null,\n\t\tdelayUnit = null,\n\t\tscheduleTime = null,\n\t\tscheduleDate = null,\n\t\tsentence = null\n\t) {\n\t\t// Do call and hide\n\t\trestCall(\n\t\t\t'schedule_action',\n\t\t\t{\n\t\t\t\trecipeId: UncannyAutomator.recipe.id,\n\t\t\t\tactionId: this.itemId,\n\t\t\t\tasyncMode: asyncMode,\n\t\t\t\tdelayNumber: delayNumber,\n\t\t\t\tdelayUnit: delayUnit,\n\t\t\t\tscheduleTime: scheduleTime,\n\t\t\t\tscheduleDate: scheduleDate,\n\t\t\t\tscheduleSentence: sentence,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// Destroy modal\n\t\t\t\tthis.modal.destroy();\n\n\t\t\t\t// Clear the cache of tokens\n\t\t\t\tUncannyAutomator.cache.tokens = [];\n\n\t\t\t\tnew Actions();\n\n\t\t\t\t// Check if the recipe is still valid, if it isn't then make the recipe draft\n\t\t\t\tif ( ! UncannyAutomator.recipe.isValid ) {\n\t\t\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// Destroy modal\n\t\t\t\tthis.modal.destroy();\n\n\t\t\t\tconsole.log( \" ERROR-TODO. Couldn't schedule the item\" );\n\n\t\t\t\tnew Actions();\n\t\t\t}\n\t\t);\n\t}\n\n\tremoveSchedule() {\n\t\t// Do call and hide\n\t\trestCall(\n\t\t\t'remove_schedule',\n\t\t\t{\n\t\t\t\trecipeId: UncannyAutomator.recipe.id,\n\t\t\t\tactionId: this.itemId,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// Clear the cache of tokens\n\t\t\t\tUncannyAutomator.cache.tokens = [];\n\n\t\t\t\tnew Actions();\n\n\t\t\t\t// Check if the recipe is still valid, if it isn't then make the recipe draft\n\t\t\t\tif ( ! UncannyAutomator.recipe.isValid ) {\n\t\t\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconsole.log( \" ERROR-TODO. Couldn't schedule the item\" );\n\n\t\t\t\tnew Actions();\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateTimeZone() {\n\t\tconst timeZoneLink = $( '<a/>', {\n\t\t\thref: UncannyAutomator.i18n.action.asyncActions.modal.timezoneLink,\n\t\t\ttarget: '_blank',\n\t\t} );\n\n\t\tconst timeZoneHelpIcon = $( '<uo-icon/>', { id: 'question-circle' } );\n\n\t\tconst timeZoneDesc = $( '<span/>', { class: 'schedule-fields__description' } ).html(\n\t\t\t`<strong>${ UncannyAutomator.i18n.action.asyncActions.modal.timezone }</strong>: ${ UncannyAutomator.i18n.action.asyncActions.modal.timezoneString }`\n\t\t);\n\n\t\ttimeZoneLink.append( timeZoneHelpIcon );\n\n\t\ttimeZoneDesc.append( timeZoneLink );\n\n\t\treturn timeZoneDesc;\n\t}\n\n\tcreateAsyncModeHTML() {\n\t\t// Create the radio field\n\t\tthis.asyncModeField = new Field( 'radio', {\n\t\t\titemType: 'action',\n\t\t\toptionCode: 'schedule_type',\n\t\t\tname: 'schedule-type',\n\t\t\tisRequired: true,\n\t\t\tcurrentValue: this.asyncMode ? this.asyncMode : 'delay',\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tvalue: 'delay',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.delay,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 'schedule',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.schedule,\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\treturn this.asyncModeField.createFormElement().addClass( 'schedule-type-radio' );\n\t}\n\n\tattachModeChangeEvent() {\n\t\t// Attach an event and change the confirm button text according to selection\n\t\tthis.asyncModeHTML.on( 'automator:field:change', () => {\n\t\t\tconst selectedAsyncMode = this.asyncModeField.getValue();\n\t\t\tlet text, showNotice;\n\n\t\t\tif ( selectedAsyncMode == 'schedule' ) {\n\t\t\t\ttext = UncannyAutomator.i18n.action.asyncActions.schedule;\n\t\t\t} else {\n\t\t\t\ttext = UncannyAutomator.i18n.action.asyncActions.modal.confirm;\n\t\t\t}\n\n\t\t\tif ( ! this.hasSchedule() ) {\n\t\t\t\tif ( selectedAsyncMode == 'schedule' ) {\n\t\t\t\t\tthis.scheduleNoticeHTML.removeClass( 'hidden' );\n\t\t\t\t} else {\n\t\t\t\t\tthis.scheduleNoticeHTML.addClass( 'hidden' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.modal.elements.modal.box.buttons.confirm.text( text );\n\t\t} );\n\t}\n\n\tcreateScheduleOptions() {\n\t\tconst scheduleOptions = $( `<div/>`, { class: 'schedule-options' } );\n\n\t\tconst scheduleDesc = $( '<span/>', { class: 'async-mode__description' } ).text(\n\t\t\tUncannyAutomator.i18n.action.asyncActions.modal.scheduleDesc\n\t\t);\n\n\t\tconst scheduleFields = $( '<div/>', { class: 'schedule-fields' } );\n\n\t\tif ( ! this.hasSchedule() ) {\n\t\t\tthis.scheduleNoticeHTML = $( '<div/>', { class: 'schedule-notice hidden' } );\n\t\t\tthis.scheduleNoticeHTML.text( UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice1 );\n\n\t\t\tthis.scheduleNoticeHTML.addClass( 'schedule-notice__yellow' );\n\t\t}\n\n\t\tscheduleOptions.append( scheduleDesc );\n\n\t\tscheduleFields.append( this.createScheduleDateHTML() );\n\n\t\tscheduleFields.append( this.createScheduleTimeHTML() );\n\n\t\tscheduleOptions.append( scheduleFields );\n\n\t\tscheduleOptions.append( this.createTimeZone() );\n\n\t\tscheduleOptions.append( this.scheduleNoticeHTML );\n\n\t\treturn scheduleOptions;\n\t}\n\n\tcreateDelayOptions() {\n\t\tconst delayOptions = $( `<div/>`, { class: 'delay-options' } );\n\n\t\tconst delayDesc = $( '<span/>', { class: 'async-mode__description' } ).text(\n\t\t\tUncannyAutomator.i18n.action.asyncActions.modal.delayDesc\n\t\t);\n\n\t\tconst delayFields = $( '<div/>', { class: 'delay-fields' } );\n\n\t\tthis.delayNumberHTML = this.createDelayNumberHTML();\n\n\t\tthis.delayUnitHTML = this.createDelayUnitHTML();\n\n\t\tconst delayFieldsDesc = $( '<span/>', { class: 'delay-fields__description' } ).text(\n\t\t\tUncannyAutomator.i18n.action.asyncActions.modal.after\n\t\t);\n\n\t\tdelayFields.append( this.delayNumberHTML );\n\n\t\tdelayFields.append( this.delayUnitHTML );\n\n\t\tdelayFields.append( delayFieldsDesc );\n\n\t\tdelayOptions.append( delayDesc );\n\n\t\tdelayOptions.append( delayFields );\n\n\t\treturn delayOptions;\n\t}\n\n\tcreateDelayNumberHTML() {\n\t\tthis.delayNumberField = new Field(\n\t\t\t'int',\n\t\t\t{\n\t\t\t\titemType: 'action',\n\t\t\t\toptionCode: 'delay-number',\n\t\t\t\tisRequired: true,\n\t\t\t\tplaceholder: '10',\n\t\t\t\tsupportsTokens: false,\n\t\t\t\tcurrentValue: this.item.meta.async_delay_number ? this.item.meta.async_delay_number : '',\n\t\t\t},\n\t\t\ttrue,\n\t\t\tthis.validateDelayNumber\n\t\t);\n\n\t\t// Create form element\n\t\tconst $delayNumberField = this.delayNumberField.createFormElement();\n\n\t\t$delayNumberField.addClass( 'delay-fields__number' );\n\n\t\t// Init Codemirror\n\t\tthis.delayNumberField.initCodeMirror();\n\n\t\treturn $delayNumberField;\n\t}\n\n\tcreateDelayUnitHTML() {\n\t\tthis.delayUnitField = new Field( 'select', {\n\t\t\titemType: 'action',\n\t\t\toptionCode: 'delay-unit',\n\t\t\tcurrentValue: this.item.meta.async_delay_unit ? this.item.meta.async_delay_unit : 'minutes',\n\t\t\tcustomClass: 'hide-this',\n\t\t\tsupportsCustomValue: false,\n\t\t\toptionsShowID: false,\n\t\t\tisRequired: true,\n\t\t\toptions: [\n\t\t\t\t{\n\t\t\t\t\tvalue: 'seconds',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.modal.seconds,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 'minutes',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.modal.minutes,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 'hours',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.modal.hours,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 'days',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.modal.days,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: 'years',\n\t\t\t\t\ttext: UncannyAutomator.i18n.action.asyncActions.modal.years,\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\treturn this.delayUnitField.createFormElement().addClass( 'delay-fields__unit' );\n\t}\n\n\tcreateScheduleDateHTML() {\n\t\t// Create value field\n\t\tthis.scheduleDateField = new Field( 'date', {\n\t\t\titemType: 'action',\n\t\t\toptionCode: 'schedule-date',\n\t\t\tisRequired: true,\n\t\t\tplaceholder: UncannyAutomator.i18n.action.asyncActions.modal.today,\n\t\t\tsupportsTokens: false,\n\t\t\tcurrentValue: this.item.meta.async_schedule_date ? this.item.meta.async_schedule_date : '',\n\t\t\tplaceholder: UncannyAutomator.i18n.format.date.selectDate,\n\t\t} );\n\n\t\t// Create form element\n\t\tconst $scheduleDateField = this.scheduleDateField.createFormElement();\n\n\t\t$scheduleDateField.addClass( 'schedule-fields__date' );\n\n\t\t// Init Codemirror\n\t\tthis.scheduleDateField.initFlatpickr();\n\t\tthis.scheduleDateField.initCodeMirror();\n\n\t\treturn $scheduleDateField;\n\t}\n\n\tcreateScheduleTimeHTML() {\n\t\t// Create value field\n\t\tthis.scheduleTimeField = new Field( 'time', {\n\t\t\titemType: 'action',\n\t\t\toptionCode: 'schedule-time',\n\t\t\tisRequired: true,\n\t\t\tsupportsTokens: false,\n\t\t\tcurrentValue: this.item.meta.async_schedule_time ? this.item.meta.async_schedule_time : '',\n\t\t\tplaceholder: UncannyAutomator.i18n.format.date.selectTime,\n\t\t} );\n\n\t\t// Create form element\n\t\tconst $scheduleTimeField = this.scheduleTimeField.createFormElement();\n\n\t\t$scheduleTimeField.addClass( 'schedule-fields__time' );\n\n\t\t// Init Codemirror\n\t\tthis.scheduleTimeField.initFlatpickr();\n\t\tthis.scheduleTimeField.initCodeMirror();\n\n\t\treturn $scheduleTimeField;\n\t}\n\n\tvalidateForm() {\n\t\tconst asyncMode = this.asyncModeField.getValue();\n\n\t\tlet validSchedule;\n\n\t\tswitch ( asyncMode ) {\n\t\t\tcase 'schedule':\n\t\t\t\tvalidSchedule = this.validateScheduleFields();\n\t\t\t\tbreak;\n\t\t\tcase 'delay':\n\t\t\t\tvalidSchedule = this.delayNumberField.validate();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvalidSchedule = {\n\t\t\t\t\tisValid: false,\n\t\t\t\t\tmessage: UncannyAutomator.i18n.action.asyncActions.modal.validation.unsupported,\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( ! validSchedule.isValid ) {\n\t\t\treturn validSchedule;\n\t\t}\n\n\t\treturn { isValid: true };\n\t}\n\n\tvalidateScheduleFields() {\n\t\tlet validSchedule = this.scheduleDateField.validate();\n\n\t\tif ( validSchedule.isValid ) {\n\t\t\tvalidSchedule = this.scheduleTimeField.validate();\n\t\t}\n\n\t\treturn validSchedule;\n\t}\n\n\tvalidateDelayNumber( value, simulate_int ) {\n\t\tif ( value < 1 ) {\n\t\t\treturn {\n\t\t\t\tisValid: false,\n\t\t\t\tmessage: UncannyAutomator.i18n.action.asyncActions.modal.validation.positiveNumber,\n\t\t\t};\n\t\t}\n\n\t\treturn { isValid: true };\n\t}\n\n\tshouldAddButton() {\n\t\treturn (\n\t\t\t// Check if it's an action\n\t\t\tthis.itemType == 'action' &&\n\t\t\t// The action is not missing\n\t\t\t! this.item.isMissing\n\t\t);\n\t}\n}\n\nexport default ItemHeaderAsync;\n","import $ from 'jquery';\n\nimport {\n\tgetDOMElements\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport ItemHeaderMenu     from '../item/action-menu.js';\nimport ItemHeaderIcon     from '../item/integration-icon.js';\nimport ItemHeaderTag      from '../item/integration-name.js';\nimport ItemHeaderAsync    from '../item/button-schedule.js';\nimport ItemHeaderSentence from '../item/sentence.js';\n\n// Import \"Filter\" button\nimport { canActionHaveFilterButton } from '@builder/item/conditions/utilities';\nimport { shouldBeSortable } from '@builder/item/sortability/utilities';\n\nclass MetaboxItems {\n\tconstructor( itemType, items, options = {} ){\n\t\t// Get the parent element for the items\n\t\tconst $metabox = getDOMElements( 'metabox', {\n\t\t\ttype: itemType\n\t\t}).get(0);\n\n\t\t// Create wrapper for the items\n\t\tconst $items = document.createElement( 'div' );\n\t\t$items.classList.add( 'uap-items' );\n\n\t\t// Check if we should add a custom class to the wrapper\n\t\tif ( isDefined( options.wrapperClass ) ) {\n\t\t\t$items.classList.add( options.wrapperClass );\n\t\t}\n\n\t\t$metabox.appendChild( $items );\n\n\t\t// Otherwise, simply add the items\n\t\titems.forEach( ( item ) => {\n\t\t\t// Append item\n\t\t\t$items.append( this.createItem( item.id ) );\n\t\t} );\t\n\t}\n\n\tcreateItem( itemId ){\n\t\t// Get item data\n\t\tlet item = UncannyAutomator.recipe.items[ itemId ];\n\n\t\t// Create container\n\t\tlet container = $( '<div/>', {\n\t\t\t'class':   'uap-item item',\n\t\t\t'data-id': itemId\n\t\t});\n\n\t\t// Add data for devs to add custom CSS\n\t\tcontainer[0].setAttribute( 'data-integration', item.integrationCode );\n\t\tcontainer[0].setAttribute( 'data-item', item.itemCode );\n\n\t\t// Add property to the element\n\t\tcontainer[0].itemId = itemId;\n\n\t\tif ( item.isMissing ){\n\t\t\tcontainer.addClass( 'item--missing' );\n\t\t}\n\n\t\t// Check if it's sortable\n\t\tif ( isDefined( item.isSortable ) && item.isSortable ) {\n\t\t\tcontainer.get(0).classList.add( 'uap-item--sortable' );\n\t\t} \n\n\t\tif ( ! isEmpty( item.meta.async_mode ) ){\n\t\t\tif ( item.meta.async_mode === 'delay' ) {\n\t\t\t\tcontainer.get(0).classList.add( 'uap-item--delayed' );\n\t\t\t} else {\n\t\t\t\tcontainer.get(0).classList.add( 'uap-item--scheduled' );\n\t\t\t}\n\t\t} else {\n\t\t\tcontainer.get(0).classList.add( 'uap-item--instant' );\n\t\t}\n\n\t\t// Replace tokens in the CSS\n\t\tif ( ! isEmpty( item.inlineCss ) ){\n\t\t\titem.inlineCss = item.inlineCss.replace( /{{item_id}}/g, itemId );\n\n\t\t\t// Add inline inlineCss\n\t\t\tcontainer.prepend( item.inlineCss );\n\t\t}\n\n\t\t// Create header\n\t\tlet header = this.createInner( itemId );\n\n\t\tlet notice = this.createNotice( item );\n\n\t\tcontainer.append( header );\n\t\tcontainer.append( notice );\n\n\t\tcontainer.on( 'automator:item:open', (e, open) => {\n\t\t\tlet asyncButtons = container.find('.item-async');\n\t\t\t$( asyncButtons[0] ).trigger( 'automator:asyncButton:maybeDisable', open );           \n\t\t})\n\n\t\treturn container.get(0);\n\t}\n\n\t/**\n\t * Creates item header\n\t * \n\t * @since 0.5\n\t *\n\t * @param {string}    integrationCode - The integration code\n\t * @param {string}    itemType - The item type: 'trigger', 'action' or 'closure'\n\t * @param {string}    itemCode - The code of the item\n\t * @param {int}       itemId - The ID of the item\n\t */\n\tcreateInner( itemId ){\n\t\t// Get item data\n\t\tconst item = UncannyAutomator.recipe.items[ itemId ];\n\n\t\t// If the item is missing, override the integrationCode\n\t\tconst integrationCode = item.isMissing ? null : item.integrationCode;\n\n\t\t// Get content\n\t\tconst content = {\n\t\t\t// The sentence of the trigger/action/closure\n\t\t\t$sentence: new ItemHeaderSentence( item.itemType, integrationCode, item.itemCode, itemId ),\n\n\t\t\t// Icon. The integration icon\n\t\t\t$icon: new ItemHeaderIcon( integrationCode ),\n\n\t\t\t// Integration name tag\n\t\t\t$integrationNameTag: new ItemHeaderTag( {\n\t\t\t\tintegrationId: integrationCode,\n\t\t\t\tcustomIntegrationName: item.integrationName\n\t\t\t} ),\n\n\t\t\t// The action menu. The three dots on the upper right corner.\n\t\t\t$actionMenu: new ItemHeaderMenu( item.itemType, integrationCode, item.itemCode, itemId ),\n\t\t\t\n\t\t\t// Buttons. These are added next to the action menu\n\t\t\tbuttons: []\n\t\t}\n\n\t\tif ( canActionHaveFilterButton( itemId ) ) {\n\t\t\t// Create button\n\t\t\tconst $filterButton = document.createElement( 'div' );\n\t\t\t$filterButton.classList.add( 'uap-item-button' );\n\t\t\t$filterButton.innerHTML = `\n\t\t\t\t<ua-builder-conditions-add-button \n\t\t\t\t\tsize=\"extra-small\" \n\t\t\t\t\taction-id=\"${ itemId }\"\n\t\t\t\t>\n\t\t\t\t\t<uo-icon id=\"code-merge\"></uo-icon> ${ UncannyAutomator.i18n.conditions.filter }\n\t\t\t\t</ua-builder-conditions-add-button>\n\t\t\t`;\n\n\t\t\t// Add the button\n\t\t\tcontent.buttons.push( $filterButton );\n\t\t}\n\n\t\t// Create \"Schedule\" button\n\t\tconst scheduleButton = new ItemHeaderAsync( item.itemType, integrationCode, item.itemCode, itemId );\n\n\t\t// Check if we have to add the button\n\t\tif ( scheduleButton.shouldAddButton() ) {\n\t\t\t// Add the button\n\t\t\tcontent.buttons.push( scheduleButton.$button );\n\t\t}\n\n\t\t// Create content\n\t\tconst $template = document.createElement( 'div' );\n\t\t$template.classList.add( 'uap-item-inner' );\n\n\t\t// Add content\n\t\t$template.insertAdjacentHTML( 'beforeEnd', `\n\t\t\t<div class=\"uap-item-sidebar\"></div>\n\t\t\t<div class=\"uap-item-top-header\">\n\t\t\t\t<div class=\"uap-item-top-header-left\"></div>\n\t\t\t\t<div class=\"uap-item-top-header-right\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"uap-item-main\"></div>\n\t\t\t<div class=\"uap-item-inner-content\"></div>\n\t\t` );\n\n\t\t// Maybe add the drag and drop handler\n\t\t// Check if this should be draggable\n\t\tif ( shouldBeSortable( { actionID: item.id } ) ) {\n\t\t\t// Create handler\n\t\t\tconst $handler = document.createElement( 'div' );\n\t\t\t$handler.classList.add( 'uap-item-drag-handle' );\n\n\t\t\t// Add icon\n\t\t\t$handler.innerHTML = `<uo-icon id=\"bars-regular\"></uo-icon>`;\n\n\t\t\t// Add it to the block\n\t\t\t$template.insertAdjacentElement( 'afterBegin', $handler );\n\t\t}\n\n\t\t// Icon. The integration icon\n\t\t$template.querySelector( '.uap-item-sidebar' )\n\t\t\t.appendChild( content.$icon );\n\n\t\t// Add integration name tag\n\t\t$template.querySelector( '.uap-item-top-header-left' )\n\t\t\t.appendChild( content.$integrationNameTag );\n\n\t\t// Add action menu\n\t\t$template.querySelector( '.uap-item-top-header-right' )\n\t\t\t.appendChild( content.$actionMenu.get(0) );\n\n\t\t// The sentence of the trigger/action/closure\n\t\t$template.querySelector( '.uap-item-main' )\n\t\t\t.appendChild( content.$sentence.get(0) );\n\n\t\t// Add buttons\n\t\tcontent.buttons.forEach( ( $button ) => {\n\t\t\t// Append the button\n\t\t\t$template.querySelector( '.uap-item-top-header-right' )\n\t\t\t\t.appendChild( $button );\n\t\t} );\n\n\t\t// Check if we have to add the item ID\n\t\tif ( isDefined( item.shouldShowItemId ) && item.shouldShowItemId ) {\n\t\t\t// Add item ID\n\t\t\t$template.querySelector( '.uap-item-top-header-left' )\n\t\t\t\t.appendChild( this.$createItemID( itemId ) );\n\t\t}\n\n\t\treturn $template;\n\t}\n\n\t/**\n\t * Create item notice\n\t *\n\t * @since 0.6\n\t *\n\t */\n\n\tcreateNotice( item ){\n\t\tlet container;\n\n\t\tif ( item.isMissing ){\n\t\t\tcontainer = $( '<uo-alert/>', {\n\t\t\t\ttype: 'warning'\n\t\t\t});\n\t\t\t\n\t\t\tcontainer.text( UncannyAutomator.i18n.itemMissing );\n\t\t}\n\n\t\treturn container;\n\t}\n\n\t/**\n\t * Returns an element that contains the item ID\n\t * \n\t * @return {Node} The element with the item ID\n\t */\n\t$createItemID( itemId = '' ) {\n\t\t// Create the wrapper\n\t\tconst $wrapper = document.createElement( 'div' );\n\t\t$wrapper.classList.add( 'uap-item-id' );\n\n\t\t// Add the ID\n\t\t$wrapper.innerText = sprintf( '#%1$s', itemId );\n\n\t\treturn $wrapper;\n\t}\n}\n\nexport default MetaboxItems;","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport { addUTMParameters, restCall } from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisEmpty\n} = _uo.utility;\n\nimport RecipeNotices from '../recipe/notices.js';\n\nimport Field from '../field';\n\nimport Triggers from '@builder/item/triggers';\nimport Actions from '@builder/item/actions';\n\nclass Publish {\n\tconstructor() {\n\t\t// Get metabox element\n\t\tthis.elements = {\n\t\t\tmetabox: $( '#uo-automator-publish-metabox' ),\n\t\t\ttimesPerUser: {\n\t\t\t\teditLink: null,\n\t\t\t\thiddenBox: null,\n\t\t\t\tsaveButton: null,\n\t\t\t\tcancelButton: null,\n\t\t\t\tendPoint: 'recipe_completions_allowed',\n\t\t\t},\n\t\t\ttimesPerRecipe: {\n\t\t\t\teditLink: null,\n\t\t\t\thiddenBox: null,\n\t\t\t\tsaveButton: null,\n\t\t\t\tcancelButton: null,\n\t\t\t\tendPoint: 'recipe_max_completions_allowed',\n\t\t\t},\n\t\t\ttoggle: null,\n\t\t};\n\n\t\t// Create new metabox\n\t\tthis.createMetabox();\n\t}\n\n\tcreateMetabox() {\n\t\tconst container = $( '<div/>', { id: 'uap-publish-metabox' } ),\n\t\t\tcontent = $( '<div/>', { class: 'metabox__content' } ),\n\t\t\tfooter = $( '<div/>', { class: 'metabox__footer' } );\n\n\t\t// Check if we have to add the times per user row\n\t\tif ( UncannyAutomator.recipe.type != 'anonymous' ) {\n\t\t\t// Times per user row\n\t\t\tconst timesRow = $( '<div/>', { class: 'publish-row' } ),\n\t\t\t\ttimesRowVisible = $( '<div/>', { class: 'publish-row__visible' } ),\n\t\t\t\ttimesRowIconBox = $( '<span/>', { class: 'publish-row__icon' } ),\n\t\t\t\ttimesRowIcon = $( '<uo-icon/>', { id: 'repeat' } ),\n\t\t\t\ttimesRowName = $( '<span/>', { class: 'publish-row__name' } ).text(\n\t\t\t\t\tUncannyAutomator.i18n.publish.timesPerUser\n\t\t\t\t);\n\n\t\t\t// Change value of numbers of times from -1 to empty\n\t\t\tUncannyAutomator.recipe.publish.timesPerUser =\n\t\t\t\tUncannyAutomator.recipe.publish.timesPerUser == -1 ? '' : UncannyAutomator.recipe.publish.timesPerUser;\n\t\t\tconst timesValue = isEmpty( UncannyAutomator.recipe.publish.timesPerUser )\n\t\t\t\t? UncannyAutomator.i18n.publish.unlimited\n\t\t\t\t: UncannyAutomator.recipe.publish.timesPerUser;\n\n\t\t\tconst timesRowValue = $( '<span/>', { class: 'publish-row__value' } ).text( timesValue ),\n\t\t\t\ttimesRowEdit = $( '<span/>', { class: 'publish-row__edit' } ).text( UncannyAutomator.i18n.edit ),\n\t\t\t\ttimesRowHidden = $( '<div/>', { class: 'publish-row__hidden' } ),\n\t\t\t\ttimesRowHiddenBox = $( '<div/>', { class: 'publish-row__settings' } );\n\n\t\t\tthis.elements.timesPerUser.editLink = timesRowEdit;\n\t\t\tthis.elements.timesPerUser.hiddenBox = timesRowHidden;\n\n\t\t\tconst timesRowField = new Field(\n\t\t\t\t'int',\n\t\t\t\t{\n\t\t\t\t\tcurrentValue: UncannyAutomator.recipe.publish.timesPerUser,\n\t\t\t\t\tdescription: UncannyAutomator.i18n.publish.leaveEmpty,\n\t\t\t\t\tplaceholder: UncannyAutomator.i18n.publish.unlimited,\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t\t( value ) => {\n\t\t\t\t\t// Custom validation function\n\t\t\t\t\t// Create response object\n\t\t\t\t\tconst response = {\n\t\t\t\t\t\tisValid: false,\n\t\t\t\t\t\tmessage: '',\n\t\t\t\t\t};\n\n\t\t\t\t\t// Check if the number is 1 or bigger\n\t\t\t\t\tif ( value >= 1 ) {\n\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresponse.message = UncannyAutomator.i18n.publish.oneOrBigger;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Return response\n\t\t\t\t\treturn response;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.timesField = timesRowField;\n\n\t\t\tconst timesRowButtons = $( '<div/>', { class: 'publish-row__buttons' } ),\n\t\t\t\ttimesRowSaveBtn = $( '<div/>', { class: 'uap-btn uap-btn--primary' } ).text(\n\t\t\t\t\tUncannyAutomator.i18n.save\n\t\t\t\t),\n\t\t\t\ttimesRowCancelBtn = $( '<div/>', { class: 'uap-btn uap-btn--secondary' } ).text(\n\t\t\t\t\tUncannyAutomator.i18n.cancel\n\t\t\t\t);\n\n\t\t\tthis.elements.timesPerUser.saveButton = timesRowSaveBtn;\n\t\t\tthis.elements.timesPerUser.cancelButton = timesRowCancelBtn;\n\n\t\t\ttimesRowButtons.append( timesRowSaveBtn );\n\t\t\ttimesRowButtons.append( timesRowCancelBtn );\n\n\t\t\ttimesRowHiddenBox.append( timesRowField.getFormElement() );\n\t\t\ttimesRowHiddenBox.append( timesRowButtons );\n\t\t\ttimesRowHidden.append( timesRowHiddenBox );\n\n\t\t\ttimesRowIconBox.append( timesRowIcon );\n\t\t\ttimesRowVisible.append( timesRowIconBox );\n\t\t\ttimesRowVisible.append( timesRowName );\n\t\t\ttimesRowVisible.append( timesRowValue );\n\t\t\ttimesRowVisible.append( timesRowEdit );\n\n\t\t\ttimesRow.append( timesRowVisible );\n\t\t\ttimesRow.append( timesRowHidden );\n\n\t\t\tcontent.append( timesRow );\n\t\t}\n\n\t\tconst timesPerRecipe = this.timesPerRecipe();\n\t\tcontent.append( timesPerRecipe );\n\n\t\t// Recipe type\n\t\tconst recipeTypeRow = $( '<div/>', { class: 'publish-row' } ),\n\t\t\trecipeTypeRowVisible = $( '<div/>', { class: 'publish-row__visible' } ),\n\t\t\trecipeTypeRowIconBox = $( '<span/>', { class: 'publish-row__icon' } ),\n\t\t\trecipeTypeRowIcon = $( '<uo-icon/>', { id: 'user' } ),\n\t\t\trecipeTypeRowName = $( '<span/>', { class: 'publish-row__name' } ).text(\n\t\t\t\tUncannyAutomator.i18n.publish.recipeType\n\t\t\t),\n\t\t\trecipeTypeRowValue = $( '<span/>', { class: 'publish-row__value' } ),\n\t\t\trecipeTypeLearnMore = $( `\n\t\t\t\t<a href=\"${ addUTMParameters( 'https://automatorplugin.com/knowledge-base/creating-a-recipe/', {\n\t\t\t\t\tmedium: 'publish_metabox',\n\t\t\t\t\tcontent: 'recipe_type_question_icon',\n\t\t\t\t} ) }\" class=\"publish-row__learn-more\" target=\"_blank\"><uo-icon id=\"question-circle\"></uo-icon></a>\n\t\t\t` );\n\n\t\tif ( UncannyAutomator.recipe.type == 'user' ) {\n\t\t\trecipeTypeRowValue.text( UncannyAutomator.i18n.recipeType.userRecipeName );\n\t\t}\n\n\t\tif ( UncannyAutomator.recipe.type == 'anonymous' ) {\n\t\t\trecipeTypeRowValue.text( UncannyAutomator.i18n.recipeType.everyoneRecipeName );\n\t\t}\n\n\t\trecipeTypeRowIconBox.append( recipeTypeRowIcon );\n\t\trecipeTypeRowVisible.append( recipeTypeRowIconBox );\n\t\trecipeTypeRowVisible.append( recipeTypeRowName );\n\t\trecipeTypeRowVisible.append( recipeTypeRowValue );\n\t\trecipeTypeRowVisible.append( recipeTypeLearnMore );\n\t\trecipeTypeRow.append( recipeTypeRowVisible );\n\n\t\tcontent.append( recipeTypeRow );\n\n\t\t// Created on row\n\t\tconst createdRow = $( '<div/>', { class: 'publish-row' } ),\n\t\t\tcreatedRowVisible = $( '<div/>', { class: 'publish-row__visible' } ),\n\t\t\tcreatedRowIconBox = $( '<span/>', { class: 'publish-row__icon' } ),\n\t\t\tcreatedRowIcon = $( '<uo-icon/>', { id: 'calendar' } ),\n\t\t\tcreatedRowName = $( '<span/>', { class: 'publish-row__name' } ).text(\n\t\t\t\tUncannyAutomator.i18n.publish.createdOn\n\t\t\t),\n\t\t\tcreatedRowValue = $( '<span/>', { class: 'publish-row__value' } ).text(\n\t\t\t\tUncannyAutomator.recipe.publish.createdOn\n\t\t\t);\n\n\t\tcreatedRowIconBox.append( createdRowIcon );\n\t\tcreatedRowVisible.append( createdRowIconBox );\n\t\tcreatedRowVisible.append( createdRowName );\n\t\tcreatedRowVisible.append( createdRowValue );\n\t\tcreatedRow.append( createdRowVisible );\n\n\t\tcontent.append( createdRow );\n\n\t\t// Recipe runs row\n\t\tlet recipeRunTimeVal = UncannyAutomator.recipe.publish.recipeRunTimes;\n\t\tlet recipeRunTimeUrlVal = $( '<a/>', {\n\t\t\tclass: 'publish-row__recipe-runs',\n\t\t\ttarget: '_blank',\n\t\t\thref: UncannyAutomator.recipe.publish.recipeRunTimesUrl.replace( /&amp;/g, '&' ),\n\t\t} ).text( UncannyAutomator.recipe.publish.recipeRunTimesViewLogs );\n\n\t\tconst recipeRunTimesRow = $( '<div/>', { class: 'publish-row' } ),\n\t\t\trecipeRunTimesRowVisible = $( '<div/>', { class: 'publish-row__visible' } ),\n\t\t\trecipeRunTimesRowIconBox = $( '<span/>', { class: 'publish-row__icon' } ),\n\t\t\trecipeRunTimesRowIcon = $( '<uo-icon/>', { id: 'repeat' } ),\n\t\t\trecipeRunTimesRowName = $( '<span/>', { class: 'publish-row__name' } ).text(\n\t\t\t\tUncannyAutomator.i18n.publish.recipeRunTimes\n\t\t\t);\n\n\n\t\trecipeRunTimesRowIconBox.append( recipeRunTimesRowIcon );\n\t\trecipeRunTimesRowVisible.append( recipeRunTimesRowIconBox );\n\t\trecipeRunTimesRowVisible.append( recipeRunTimesRowName );\n\t\trecipeRunTimesRowVisible.append( $( '<span/>', { class: 'publish-row__value' } ).text( recipeRunTimeVal ) );\n\t\tif( recipeRunTimeVal > 0 ){\n\t\t\trecipeRunTimesRowVisible.append( recipeRunTimeUrlVal );\n\t\t}\n\t\trecipeRunTimesRow.append( recipeRunTimesRowVisible );\n\n\t\tcontent.append( recipeRunTimesRow );\n\n\t\t// Copy/Duplicate Recipe\n\t\tconst copyRecipeRow = $( '<div/>', { class: 'publish-row' } ),\n\t\t\tcopyRecipeRowVisible = $( '<div/>', { class: 'publish-row__visible' } ),\n\t\t\tcopyRecipeRowName = $( '<a/>', {\n\t\t\t\tclass: 'publish-row__copy-to-draft button button-secondary',\n\t\t\t\thref: UncannyAutomator.recipe.publish.copyToDraft.replace( /&amp;/g, '&' ),\n\t\t\t} ).text( UncannyAutomator.i18n.publish.copyRecipe );\n\n\t\tcopyRecipeRowVisible.append( copyRecipeRowName );\n\t\tcopyRecipeRow.append( copyRecipeRowVisible );\n\n\t\tcontent.append( copyRecipeRow );\n\n\t\tconst footerRow = $( '<div/>', { class: 'publish-footer__row uap-clear' } ),\n\t\t\tfooterRowLeft = $( '<div/>', { class: 'publish-footer__left' } ),\n\t\t\tfooterMoveToDraft = $( '<a/>', {\n\t\t\t\tclass: 'publish-footer__move-to-draft',\n\t\t\t\thref: UncannyAutomator.recipe.publish.moveToTrash.replace( /&amp;/g, '&' ),\n\t\t\t} ).text( UncannyAutomator.i18n.proOnly.moveToTrash ),\n\t\t\tfooterRowRight = $( '<div/>', { class: 'publish-footer__right' } );\n\n\t\tconst recipeStatusToggle = new Field( 'checkbox', {\n\t\t\tcolor: 'gutenberg',\n\t\t\talign: 'right',\n\t\t\ttoggle: {\n\t\t\t\ton: UncannyAutomator.i18n.status.liveRecipe,\n\t\t\t\toff: UncannyAutomator.i18n.status.draftRecipe,\n\t\t\t},\n\t\t\tcurrentValue: UncannyAutomator.recipe.isLive,\n\t\t} );\n\n\t\t// Save toggle Field in main object\n\t\tUncannyAutomator.recipe.publish.statusToggle = recipeStatusToggle;\n\n\t\tconst recipeStatusToggleDOM = recipeStatusToggle.getFormElement();\n\t\tthis.recipeStatusToggle = recipeStatusToggle;\n\n\t\tthis.elements.toggle = recipeStatusToggleDOM;\n\n\t\tfooterRowLeft.append( footerMoveToDraft );\n\t\tfooterRowRight.append( recipeStatusToggleDOM );\n\t\tfooterRow.append( footerRowLeft );\n\t\tfooterRow.append( footerRowRight );\n\n\t\tfooter.append( footerRow );\n\n\t\t// Append main elements to the metabox\n\t\tcontainer.append( content );\n\t\tcontainer.append( footer );\n\n\t\t// Render metabox\n\t\tthis.elements.metabox.html( container );\n\n\t\t// Render errors\n\t\tnew RecipeNotices();\n\n\t\t// Bind\n\t\tthis.bind();\n\n\t\t// Validate status\n\t\tthis.validateStatus();\n\t}\n\n\ttimesPerRecipe() {\n\t\t// Times per recipe row\n\t\tconst timesRecipeRow = $( '<div/>', { class: 'publish-row' } ),\n\t\t\ttimesRecipeRowVisible = $( '<div/>', { class: 'publish-row__visible' } ),\n\t\t\ttimesRecipeRowIconBox = $( '<span/>', { class: 'publish-row__icon' } ),\n\t\t\ttimesRecipeRowIcon = $( '<uo-icon/>', { id: 'hashtag' } ),\n\t\t\ttimesRecipeRowName = $( '<span/>', { class: 'publish-row__name' } ).text(\n\t\t\t\tUncannyAutomator.i18n.publish.timesPerRecipe\n\t\t\t);\n\n\t\t// Change value of numbers of times from -1 to empty\n\t\tUncannyAutomator.recipe.publish.timesPerRecipe =\n\t\t\tUncannyAutomator.recipe.publish.timesPerRecipe == -1 ? '' : UncannyAutomator.recipe.publish.timesPerRecipe;\n\t\tconst timesRecipeValue = isEmpty( UncannyAutomator.recipe.publish.timesPerRecipe )\n\t\t\t? UncannyAutomator.i18n.publish.unlimited\n\t\t\t: UncannyAutomator.recipe.publish.timesPerRecipe;\n\n\t\tconst timesRecipeRowValue = $( '<span/>', { class: 'publish-row__value' } ).text( timesRecipeValue ),\n\t\t\ttimesRecipeRowEdit = $( '<span/>', { class: 'publish-row__edit' } ).text( UncannyAutomator.i18n.edit ),\n\t\t\ttimesRecipeRowHidden = $( '<div/>', { class: 'publish-row__hidden' } ),\n\t\t\ttimesRecipeRowHiddenBox = $( '<div/>', { class: 'publish-row__settings' } );\n\n\t\tthis.elements.timesPerRecipe.editLink = timesRecipeRowEdit;\n\t\tthis.elements.timesPerRecipe.hiddenBox = timesRecipeRowHidden;\n\n\t\tconst timesRecipeRowField = new Field(\n\t\t\t'int',\n\t\t\t{\n\t\t\t\tcurrentValue: UncannyAutomator.recipe.publish.timesPerRecipe,\n\t\t\t\tdescription: UncannyAutomator.i18n.publish.leaveEmpty,\n\t\t\t\tplaceholder: UncannyAutomator.i18n.publish.unlimited,\n\t\t\t},\n\t\t\ttrue,\n\t\t\t( value ) => {\n\t\t\t\t// Custom validation function\n\t\t\t\t// Create response object\n\t\t\t\tconst response = {\n\t\t\t\t\tisValid: false,\n\t\t\t\t\tmessage: '',\n\t\t\t\t};\n\n\t\t\t\t// Check if the number is 1 or bigger\n\t\t\t\tif ( value >= 1 ) {\n\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t} else {\n\t\t\t\t\tresponse.message = UncannyAutomator.i18n.publish.oneOrBigger;\n\t\t\t\t}\n\n\t\t\t\t// Return response\n\t\t\t\treturn response;\n\t\t\t}\n\t\t);\n\n\t\tthis.timesRecipeField = timesRecipeRowField;\n\n\t\tconst timesRecipeRowButtons = $( '<div/>', { class: 'publish-row__buttons' } ),\n\t\t\ttimesRecipeRowSaveBtn = $( '<div/>', { class: 'uap-btn uap-btn--primary' } ).text(\n\t\t\t\tUncannyAutomator.i18n.save\n\t\t\t),\n\t\t\ttimesRecipeRowCancelBtn = $( '<div/>', { class: 'uap-btn uap-btn--secondary' } ).text(\n\t\t\t\tUncannyAutomator.i18n.cancel\n\t\t\t);\n\n\t\tthis.elements.timesPerRecipe.saveButton = timesRecipeRowSaveBtn;\n\t\tthis.elements.timesPerRecipe.cancelButton = timesRecipeRowCancelBtn;\n\n\t\ttimesRecipeRowButtons.append( timesRecipeRowSaveBtn );\n\t\ttimesRecipeRowButtons.append( timesRecipeRowCancelBtn );\n\n\t\ttimesRecipeRowHiddenBox.append( timesRecipeRowField.getFormElement() );\n\t\ttimesRecipeRowHiddenBox.append( timesRecipeRowButtons );\n\t\ttimesRecipeRowHidden.append( timesRecipeRowHiddenBox );\n\n\t\ttimesRecipeRowIconBox.append( timesRecipeRowIcon );\n\t\ttimesRecipeRowVisible.append( timesRecipeRowIconBox );\n\t\ttimesRecipeRowVisible.append( timesRecipeRowName );\n\t\ttimesRecipeRowVisible.append( timesRecipeRowValue );\n\t\ttimesRecipeRowVisible.append( timesRecipeRowEdit );\n\n\t\ttimesRecipeRow.append( timesRecipeRowVisible );\n\t\ttimesRecipeRow.append( timesRecipeRowHidden );\n\n\t\treturn timesRecipeRow;\n\t}\n\n\tvalidateStatus() {\n\t\t// We're going to use this method to check if the recipe is live but it's invalid\n\t\tif ( UncannyAutomator.recipe.isLive && ! UncannyAutomator.recipe.isValid ) {\n\t\t\t// Make Draft\n\t\t\tUncannyAutomator.recipe.publish.statusToggle.setValue( false );\n\t\t}\n\t}\n\n\tvalidateTimesPerFields( $element, $fieldValue, $timeField ) {\n\t\t// Times per user, click on \"Edit\"\n\t\t$element.editLink.on( 'click', () => {\n\t\t\t// Slide toggle\n\t\t\t$element.hiddenBox.slideToggle( 300 );\n\t\t} );\n\n\t\t// Times per user, click on \"Cancel\"\n\t\t$element.cancelButton.on( 'click', () => {\n\t\t\t// Slide toggle\n\t\t\t$element.hiddenBox.slideToggle( 300, () => {\n\t\t\t\t// Reset UI\n\t\t\t\tnew Publish();\n\t\t\t} );\n\t\t} );\n\n\t\t// Timer per user, click on \"Save\"\n\t\t$element.saveButton.on( 'click', () => {\n\t\t\t// Validate input\n\t\t\tconst validation = $timeField.validate();\n\n\t\t\t// Check if it's valid. Otherwise do nothing. Field.js will show an error\n\t\t\tif ( validation.isValid ) {\n\t\t\t\t// Add loading class to save button\n\t\t\t\t$element.saveButton.addClass( 'uap-btn--loading uap-btn--disabled' );\n\n\t\t\t\t// Get value. We have to check if it's empty and change it to -1\n\t\t\t\tlet numberOfTimes = $timeField.getValue();\n\n\t\t\t\tif ( isEmpty( numberOfTimes ) ) {\n\t\t\t\t\tnumberOfTimes = -1;\n\t\t\t\t}\n\n\t\t\t\trestCall(\n\t\t\t\t\t$element.endPoint,\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\tpost_ID: UncannyAutomator.recipe.id,\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\trecipe_completions_allowed: numberOfTimes,\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Update JS object\n\t\t\t\t\t\tif ( $element.endPoint == 'recipe_completions_allowed' ) {\n\t\t\t\t\t\t\tUncannyAutomator.recipe.publish.timesPerUser = numberOfTimes;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUncannyAutomator.recipe.publish.timesPerRecipe = numberOfTimes;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// $fieldValue = numberOfTimes;\n\t\t\t\t\t\t// Slide toggle fields container and refresh the Publish UI\n\t\t\t\t\t\t$element.hiddenBox.slideToggle( 300, () => {\n\t\t\t\t\t\t\t// Reset UI\n\t\t\t\t\t\t\tnew Publish();\n\t\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( \"Couldn't save times per user\" );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Revert changes\n\t\t\t\t\t\t$timeField.setValue( $fieldValue );\n\n\t\t\t\t\t\t// Remove the loading class to save button\n\t\t\t\t\t\t$element.saveButton.removeClass( 'uap-btn--loading uap-btn--disabled' );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\t// Get field element and bind 'keyup'\n\t\t$timeField.getField().on( 'keyup', ( event ) => {\n\t\t\t// Check if it's an enter\n\t\t\tif ( event.keyCode == 13 ) {\n\t\t\t\t// Trigger a click on the Save Button\n\t\t\t\t$element.saveButton.trigger( 'click' );\n\t\t\t}\n\t\t} );\n\t}\n\n\tbind() {\n\t\t// Check if we have to add the event listeners to the \"times per user\" row\n\t\tif ( UncannyAutomator.recipe.type != 'anonymous' ) {\n\t\t\t// Times per user, click on \"Edit\"\n\t\t\tthis.validateTimesPerFields(\n\t\t\t\tthis.elements.timesPerUser,\n\t\t\t\tUncannyAutomator.recipe.publish.timesPerUser,\n\t\t\t\tthis.timesField\n\t\t\t);\n\t\t}\n\n\t\t// Validate Recipe max times\n\t\tthis.validateTimesPerFields(\n\t\t\tthis.elements.timesPerRecipe,\n\t\t\tUncannyAutomator.recipe.publish.timesPerRecipe,\n\t\t\tthis.timesRecipeField\n\t\t);\n\t\t// Status change\n\t\tthis.elements.toggle.on( 'automator:field:change', () => {\n\t\t\t// Set loading status\n\t\t\tthis.recipeStatusToggle.startLoadingAnimation();\n\n\t\t\t// Set post status\n\t\t\tconst makeLive = this.recipeStatusToggle.getValue(),\n\t\t\t\tpostStatus = makeLive ? 'publish' : 'draft';\n\n\t\t\t// Check if can make it live\n\t\t\t// const recipeTriggers = itemsObject( 'get', {\n\t\t\t// \t\tfilter: {\n\t\t\t// \t\t\titemType: 'trigger',\n\t\t\t// \t\t},\n\t\t\t// \t} );\n\n\t\t\tconst canMakeLive = true;\n\n\t\t\t// Check if the user is trying to make the recipe live\n\t\t\tif ( canMakeLive && ( ! makeLive || ( makeLive && UncannyAutomator.recipe.isValid ) ) ) {\n\t\t\t\trestCall(\n\t\t\t\t\t'change_post_status',\n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\tpost_ID: UncannyAutomator.recipe.id,\n\t\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\t\tpost_status: postStatus,\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Update main object\n\t\t\t\t\t\tUncannyAutomator.recipe.isLive = makeLive;\n\n\t\t\t\t\t\t// Reset the UI\n\t\t\t\t\t\tnew Publish();\n\t\t\t\t\t\tnew Actions();\n\t\t\t\t\t\tnew Triggers();\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error( \"Couldn't set the recipe status\" );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Revert user change\n\t\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t\t// Stop loading animation\n\t\t\t\t\t\t\tthis.recipeStatusToggle.stopLoadingAnimation();\n\n\t\t\t\t\t\t\t// Revert value\n\t\t\t\t\t\t\tthis.recipeStatusToggle.setValue( false, false );\n\t\t\t\t\t\t}, 1000 );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tif ( ! canMakeLive ) {\n\t\t\t\t\t// Set error message\n\t\t\t\t\tUncannyAutomator.recipe.message.error = sprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.proOnly.proToPublish,\n\t\t\t\t\t\tUncannyAutomator.i18n.uncannyAutomatorPro,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// Set error mode\n\t\t\t\tUncannyAutomator.recipe.errorMode = true;\n\n\t\t\t\t// Show error\n\t\t\t\tnew RecipeNotices();\n\n\t\t\t\t// Revert user change\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t// Stop loading animation\n\t\t\t\t\tthis.recipeStatusToggle.stopLoadingAnimation();\n\n\t\t\t\t\t// Revert value\n\t\t\t\t\tthis.recipeStatusToggle.setValue( false, false );\n\t\t\t\t}, 1000 );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nexport default Publish;\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\n// Import utilities\nconst {\n\tisEmpty\n} = _uo.utility;\n\nclass RecipeNotices {\n\tconstructor() {\n\t\t// Get main element\n\t\tthis.elements = {\n\t\t\tcontainer: $( '#uo-uap-notices' ),\n\t\t};\n\n\t\t// Check if the container exists\n\t\t// If not, then create it\n\t\tif ( this.elements.container.length == 0 ) {\n\t\t\tthis.createContainer();\n\t\t\tthis.elements.container = $( '#uo-uap-notices' );\n\t\t}\n\n\t\t// Empty the container\n\t\tthis.emptyContainer();\n\n\t\t// Create warning\n\t\tthis.createWarning();\n\n\t\t// Check if error mode is enabled\n\t\tif ( UncannyAutomator.recipe.errorMode ) {\n\t\t\t// Create error\n\t\t\tthis.createError();\n\t\t}\n\t}\n\n\temptyContainer() {\n\t\tthis.elements.container.empty();\n\t}\n\n\tcreateContainer() {\n\t\t/* Create notice containers */\n\t\tconst noticeContainer = $( '<div/>', { id: 'uo-uap-notices', class: 'uap' } );\n\t\t$( '#uap-publish-metabox' ).prepend( noticeContainer );\n\t}\n\n\tcreateError() {\n\t\t// Check if we have to create the notice\n\t\tif ( ! isEmpty( UncannyAutomator.recipe.message.error ) ) {\n\t\t\t// Create error container\n\t\t\tconst notice = $( '<div/>', { class: 'uo-notice uo-notice--error' } ).text(\n\t\t\t\tUncannyAutomator.recipe.message.error\n\t\t\t);\n\n\t\t\tthis.elements.container.append( notice );\n\t\t}\n\t}\n\n\tcreateWarning() {\n\t\t// Check if we have to create the notice\n\t\tif ( ! isEmpty( UncannyAutomator.recipe.message.warning ) ) {\n\t\t\tconst notice = $( '<div/>', { class: 'uo-notice uo-notice--warning' } ).text(\n\t\t\t\tUncannyAutomator.recipe.message.warning\n\t\t\t);\n\n\t\t\tthis.elements.container.append( notice );\n\t\t}\n\t}\n}\n\nexport default RecipeNotices;\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport {\n\titemsObject,\n\tgetGlobalItem,\n\tparseStringWithTokens,\n\taddUTMParameters,\n} from '../common/utilities.js';\n\nimport { getIntegrationIconURL } from '@builder/integrations/utilities';\n\nimport { getActions, getActionsThatRunBefore } from '@builder/item/actions/utilities';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty,\n\tisObject,\n\tsupportsRegExLookbehind\n} = _uo.utility;\n\nimport Modal from '../common/modal';\n\nimport Field from '../field';\n\n/**\n * Parses tokens in strings\n */\nexport default class Tokens {\n\t/**\n\t * Saves useful data in the instance, and creates all the tokens for a given field\n\t *\n\t * @param {String} itemType  The item type (trigger/action/user-selector)\n\t * @param {String} fieldType The field type\n\t * @param {Object} options   Optional options\n\t * @return {undefined}\n\t */\n\tconstructor( itemType, fieldType = 'text', options = {} ) {\n\t\t// Save data\n\t\tthis.saveData( itemType, fieldType, options );\n\n\t\t// Get data\n\t\tthis.getData();\n\t}\n\n\t/**\n\t * Saves useful data in the token instance\n\t *\n\t * @param {String} itemType  The item type (trigger/action/user-selector)\n\t * @param {String} fieldType The field type\n\t * @param {Object} options   Optional options\n\t * @return {undefined}\n\t */\n\tsaveData( itemType, fieldType, options ) {\n\t\tthis.itemType = itemType;\n\t\tthis.fieldType = fieldType;\n\n\t\tthis.options = Object.assign(\n\t\t\t{\n\t\t\t\tincludeGroupName: true,\n\t\t\t\tincludeGroupIcon: true,\n\t\t\t\tincludeGroupTokens: true,\n\t\t\t\tunsupportedTokens: [],\n\t\t\t},\n\t\t\toptions\n\t\t);\n\n\t\tthis.tokensRegEx = new RegExp( /\\{\\{(.*?)\\}\\}/gm );\n\n\t\tif ( supportsRegExLookbehind() ) {\n\t\t\t// Exclude tokens inside HTML attributes\n\t\t\t// <a href=\"{{a}}\">{{b}}</a> will return only {{b}}\n\t\t\t// Uses lookbehind https://caniuse.com/js-regexp-lookbehind\n\t\t\tthis.tokensRegExNoAttributes = new RegExp( '(?<=[^\\=\"])\\{\\{(.*?)\\}\\}(?<=[^\\\"])', 'gm' );\n\t\t} else {\n\t\t\t// Fallback for basic browsers, like Safari\n\t\t\tthis.tokensRegExNoAttributes = new RegExp( /[^\\=\"]\\{\\{(.*?)\\}\\}[^\\\"]/gm );\n\t\t}\n\n\t\tthis.tokensThatRequireUser = [];\n\t}\n\n\t/**\n\t * Saves all the tokens available in the .tokens property\n\t *\n\t * @return {undefined}\n\t */\n\tgetData() {\n\t\t// Get all tokens\n\t\tthis.tokens = this.getAllTokens();\n\t}\n\n\t/**\n\t * Gets all the tokens that can be used for a given item.\n\t * These are also going to be filtered by fieldType\n\t *\n\t * @return {Array} Groups of tokens\n\t */\n\tgetAllTokens() {\n\t\tlet tokensList = [];\n\n\t\t// Get the common tokens\n\t\tconst commonTokens = this.getCommonTokens();\n\t\t// Add tokens to the main array\n\t\tif ( commonTokens.tokens.length > 0 ) {\n\t\t\ttokensList.push( commonTokens );\n\t\t}\n\n\t\t// Get the date tokens\n\t\tconst dateTokens = this.getDateTokens();\n\t\tif ( dateTokens.tokens.length > 0 ) {\n\t\t\ttokensList.push( dateTokens );\n\t\t}\n\n\t\t// Get the advanced tokens\n\t\tconst advancedTokens = this.getAdvancedTokens();\n\t\t// Add tokens to the main array\n\t\tif ( advancedTokens.tokens.length > 0 ) {\n\t\t\ttokensList.push( advancedTokens );\n\t\t}\n\n\t\t// Get the formula tokens\n\t\tconst formulaTokens = this.getFormulaTokens();\n\t\t// Add tokens to the main array\n\t\tif ( formulaTokens.tokens.length > 0 ) {\n\t\t\ttokensList.push( formulaTokens );\n\t\t}\n\n\t\t// Get the triggers tokens\n\t\tconst triggersTokens = this.getTriggersTokens();\n\t\t// Add tokens to the main array\n\t\ttokensList = [ ...tokensList, ...triggersTokens ];\n\n\t\t// Add action tokens only to actions and the closure\n\t\tif ( ! [ 'trigger', 'user-selector' ].includes( this.itemType ) ) {\n\t\t\t// Get the action tokens\n\t\t\tconst actionsTokens = this.getActionsTokens();\n\t\t\t// Add tokens to the main array\n\t\t\ttokensList = [ ...tokensList, ...actionsTokens ];\n\t\t}\n\n\t\treturn tokensList;\n\t}\n\n\t/**\n\t * Filters tokens removing the unsupported ones.\n\t * Unsupported tokens are defined using the \"unsupportedTokens\" property\n\t *\n\t * @param {Array} tokens The tokens\n\t * @return {Array}         The tokens, filtered\n\t */\n\tfilterUnsupportedTokens( tokens = [] ) {\n\t\t// Check if there are unsupported tokens\n\t\tif ( ! isEmpty( this.options.unsupportedTokens ) ) {\n\t\t\t// Filter them\n\t\t\ttokens = tokens.filter( ( token ) => {\n\t\t\t\treturn ! this.options.unsupportedTokens.includes( token.id );\n\t\t\t} );\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n\t/**\n\t * Get all the common tokens that can be used a given item\n\t * These tokens are independent of the items in the recipe\n\t * They are hardcoded, and vary depending on the characteristics\n\t * of the recipe itself (for example, if the recipe is anon or logged-in)\n\t * These are also going to be filtered by the fieldType\n\t *\n\t * @return {Object} Group of tokens\n\t */\n\tgetCommonTokens() {\n\t\t// Create common tokens\n\t\tconst commonTokens = {\n\t\t\tid: 'common',\n\t\t};\n\n\t\t// Add the name\n\t\tif ( this.options.includeGroupName ) {\n\t\t\tcommonTokens.name = UncannyAutomator.i18n.tokens.global.common;\n\t\t}\n\n\t\t// Add the icon\n\t\tif ( this.options.includeGroupIcon ) {\n\t\t\tcommonTokens.icon = $( `\n\t\t\t\t<uo-icon id=\"bolt\"></uo-icon>\n\t\t\t` );\n\t\t}\n\n\t\t// Add the tokens\n\t\tif ( this.options.includeGroupTokens ) {\n\t\t\tcommonTokens.tokens = [];\n\n\t\t\t// Check if it's a field in a trigger or user-selector section,\n\t\t\t// in an anonymous recipe then don't add user related tokens\n\t\t\tif (\n\t\t\t\t! (\n\t\t\t\t\tUncannyAutomator.recipe.type == 'anonymous' &&\n\t\t\t\t\t( this.itemType == 'trigger' || this.itemType == 'user-selector' )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// Add user related tokens\n\t\t\t\tcommonTokens.tokens.push(\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_id',\n\t\t\t\t\t\ttype: 'int',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userID,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_username',\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userUsername,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_firstname',\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userFirstName,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_lastname',\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userLastName,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_email',\n\t\t\t\t\t\ttype: 'email',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userEmail,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_displayname',\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userDisplay,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'user_role',\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userRole,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} ),\n\t\t\t\t\tnew Token( {\n\t\t\t\t\t\tid: 'reset_pass_link',\n\t\t\t\t\t\ttype: 'url',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.userResetPassLink,\n\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t} )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add other common tokens\n\t\t\tcommonTokens.tokens.push(\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'admin_email',\n\t\t\t\t\ttype: 'email',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.adminEmail,\n\t\t\t\t} ),\n\t\t\t);\n\n\t\t\t// Current blog id\n\t\t\tif ( UncannyAutomator.isMultisite && ( isDefined( UncannyAutomator.wp ) && UncannyAutomator.wp ) ) {\n\t\t\t\t// Current blog id\n\t\t\t\tcommonTokens.tokens.push(\n\t\t\t\t\tnew Token({\n\t\t\t\t\t\tid: 'current_blog_id',\n\t\t\t\t\t\ttype: 'int',\n\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.currentBlogId,\n\t\t\t\t\t\tcacheable: true,\n\t\t\t\t\t\trequiresUser: false,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Add other common tokens\n\t\t\tcommonTokens.tokens.push(\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'site_name',\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tname: UncannyAutomator.isMultisite ? UncannyAutomator.i18n.tokens.global.currentSiteName : UncannyAutomator.i18n.tokens.global.siteName,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'site_tagline',\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tname: UncannyAutomator.isMultisite ? UncannyAutomator.i18n.tokens.global.currentSiteTagline : UncannyAutomator.i18n.tokens.global.siteTagline,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'site_url',\n\t\t\t\t\ttype: 'url',\n\t\t\t\t\tname: UncannyAutomator.isMultisite ? UncannyAutomator.i18n.tokens.global.currentSiteUrl : UncannyAutomator.i18n.tokens.global.siteUrl,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'recipe_name',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.recipeName,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'recipe_id',\n\t\t\t\t\ttype: 'int',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.recipeId,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'user_ip_address',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.user_ip_address,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'user_reset_pass_url',\n\t\t\t\t   name: UncannyAutomator.i18n.tokens.global.user_reset_pass_url,\n\t\t\t\t} ),\n\t\t\t);\n\t\t}\n\n\t\t// Filter tokens\n\t\tcommonTokens.tokens = this.filterUnsupportedTokens( commonTokens.tokens );\n\n\t\t// Check what tokens require user data\n\t\tcommonTokens.tokens.forEach( ( token ) => {\n\t\t\t// Check if it requires user data\n\t\t\tif ( token.requiresUser ) {\n\t\t\t\tthis.tokensThatRequireUser.push( token.id );\n\t\t\t}\n\t\t} );\n\n\t\treturn commonTokens;\n\t}\n\n\t/**\n\t * Get all the advanced tokens that can be used a given item\n\t * These tokens are independent of the items in the recipe\n\t * They are hardcoded, and vary depending on the characteristics\n\t * of the recipe itself (for example, if the recipe is anon or logged-in)\n\t * These are also going to be filtered by the fieldType\n\t *\n\t * @since 3.0\n\t * @return {Object} Group of tokens\n\t */\n\tgetAdvancedTokens() {\n\t\t// Create common tokens\n\t\tconst advancedTokens = {\n\t\t\tid: 'advanced',\n\t\t\ttokens: [],\n\t\t};\n\n\t\t// Add the name\n\t\tif ( this.options.includeGroupName ) {\n\t\t\tadvancedTokens.name = UncannyAutomator.i18n.tokens.global.advanced;\n\t\t}\n\n\t\t// Add the icon\n\t\tif ( this.options.includeGroupIcon ) {\n\t\t\tadvancedTokens.icon = $( `\n\t\t\t\t<uo-icon id=\"bolt\"></uo-icon>\n\t\t\t` );\n\t\t}\n\n\t\t// Add the tokens\n\t\tif ( this.options.includeGroupTokens ) {\n\t\t\t// Add the Post Meta token\n\t\t\tadvancedTokens.tokens.push(\n\t\t\t\tnew PostMetaToken( {\n\t\t\t\t\t// The context of this token\n\t\t\t\t\t// We're going to use this to filter the tokens available in the fields\n\t\t\t\t\t// on the modal of this token\n\t\t\t\t\tcontext: this.itemType,\n\t\t\t\t} )\n\t\t\t);\n\n\t\t\t// Check if it's a field in a trigger or user-selector section,\n\t\t\t// in an anonymous recipe then don't add user related tokens\n\t\t\tif (\n\t\t\t\t! (\n\t\t\t\t\tUncannyAutomator.recipe.type == 'anonymous' &&\n\t\t\t\t\t( this.itemType == 'trigger' || this.itemType == 'user-selector' )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// Add the User Meta token\n\t\t\t\tadvancedTokens.tokens.push(\n\t\t\t\t\tnew UserMetaToken( {\n\t\t\t\t\t\t// The context of this token\n\t\t\t\t\t\t// We're going to use this to filter the tokens available in the fields\n\t\t\t\t\t\t// on the modal of this token\n\t\t\t\t\t\tcontext: this.itemType,\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tif ( isDefined( UncannyAutomator.wp ) && UncannyAutomator.wp === '1' ) {\n\t\t\t\t\tadvancedTokens.tokens.push(\n\t\t\t\t\t\tnew Token( {\n\t\t\t\t\t\t\tid: 'AUTOLOGINLINK',\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.autoLoginLink,\n\t\t\t\t\t\t\tcacheable: true,\n\t\t\t\t\t\t\trequiresUser: true,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Recipe Run # (total)\n\t\t\tadvancedTokens.tokens.push(\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'recipe_total_run',\n\t\t\t\t\ttype: 'int',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.recipeTotalRunToken,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\trequiresUser: false,\n\t\t\t\t} )\n\t\t\t);\n\n\t\t\t// Recipe Run # (current user)\n\t\t\tadvancedTokens.tokens.push(\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'recipe_run',\n\t\t\t\t\ttype: 'int',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.recipeRunToken,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\trequiresUser: false,\n\t\t\t\t} )\n\t\t\t);\n\n\t\t\t// Filter tokens\n\t\t\t// advancedTokens.tokens = this.filterTokensByType( advancedTokens.tokens, this.fieldType );\n\t\t}\n\n\t\t// Filter tokens\n\t\tadvancedTokens.tokens = this.filterUnsupportedTokens( advancedTokens.tokens );\n\n\t\t// Check what tokens require user data\n\t\tadvancedTokens.tokens.forEach( ( token ) => {\n\t\t\t// Check if it requires user data\n\t\t\tif ( token.requiresUser ) {\n\t\t\t\tthis.tokensThatRequireUser.push( token.id );\n\t\t\t}\n\t\t} );\n\n\t\treturn advancedTokens;\n\t}\n\n\t/**\n\t * Returns all date related core tokens\n\t * \n\t * @return {Object} Group of tokens\n\t */\n\tgetDateTokens() {\n\t\t// Create common tokens\n\t\tconst dateTokens = {\n\t\t\tid: 'date',\n\t\t\ttokens: [],\n\t\t};\n\n\t\t// Add the name\n\t\tif ( this.options.includeGroupName ) {\n\t\t\tdateTokens.name = UncannyAutomator.i18n.tokens.global.date;\n\t\t}\n\n\t\t// Add the icon\n\t\tif ( this.options.includeGroupIcon ) {\n\t\t\tdateTokens.icon = $( `\n\t\t\t\t<uo-icon id=\"calendar\"></uo-icon>\n\t\t\t` );\n\t\t}\n\n\t\t// Add the tokens\n\t\tif ( this.options.includeGroupTokens ) {\n\t\t\tdateTokens.tokens.push(\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'current_date',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.currentDate,\n\t\t\t\t\ttype: 'date'\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'current_time',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.currentTime,\n\t\t\t\t\ttype: 'time'\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'current_date_and_time',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.currentDateAndTime,\n\t\t\t\t\ttype: 'date'\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'current_unix_timestamp',\n\t\t\t\t\ttype: 'int',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.current_unix_timestamp,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\trequiresUser: false,\n\t\t\t\t} ),\n\t\t\t\tnew Token( {\n\t\t\t\t\tid: 'currentdate_unix_timestamp',\n\t\t\t\t\ttype: 'int',\n\t\t\t\t\tname: UncannyAutomator.i18n.tokens.global.currentdate_unix_timestamp,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\trequiresUser: false,\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\n\t\t// Filter tokens\n\t\tdateTokens.tokens = this.filterUnsupportedTokens( dateTokens.tokens );\n\n\t\t// Check what tokens require user data\n\t\tdateTokens.tokens.forEach( ( token ) => {\n\t\t\tif ( token.requiresUser ) {\n\t\t\t\tthis.tokensThatRequireUser.push( token.id );\n\t\t\t}\n\t\t} );\n\n\t\treturn dateTokens;\n\t}\n\n\t/**\n\t * Returns the available formula tokens\n\t */\n\tgetFormulaTokens() {\n\t\t// Create common tokens\n\t\tconst formulaTokens = {\n\t\t\tid: 'formulas',\n\t\t\ttokens: [],\n\t\t};\n\n\t\t// Add the name\n\t\tif ( this.options.includeGroupName ) {\n\t\t\tformulaTokens.name = UncannyAutomator.i18n.tokens.global.formulas;\n\t\t}\n\n\t\t// Add the icon\n\t\tif ( this.options.includeGroupIcon ) {\n\t\t\tformulaTokens.icon = $( `\n\t\t\t\t<uo-icon id=\"code\"></uo-icon>\n\t\t\t` );\n\t\t}\n\n\t\t// Add the tokens\n\t\tif ( this.options.includeGroupTokens ) {\n\t\t\t// Add the Post Meta token\n\t\t\tformulaTokens.tokens.push(\n\t\t\t\tnew CalculationToken( {\n\t\t\t\t\t// The context of this token\n\t\t\t\t\t// We're going to use this to filter the tokens available in the fields\n\t\t\t\t\t// on the modal of this token\n\t\t\t\t\tcontext: this.itemType,\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\n\t\t// Filter tokens\n\t\tformulaTokens.tokens = this.filterUnsupportedTokens( formulaTokens.tokens );\n\n\t\t// Check what tokens require user data\n\t\tformulaTokens.tokens.forEach( ( token ) => {\n\t\t\t// Check if it requires user data\n\t\t\tif ( token.requiresUser ) {\n\t\t\t\tthis.tokensThatRequireUser.push( token.id );\n\t\t\t}\n\t\t} );\n\n\t\treturn formulaTokens;\n\t}\n\n\t/**\n\t * Returns the tokens of all triggers\n\t *\n\t * @since 3.0\n\t * @return {Array} Array with multiple groups of tokens\n\t */\n\tgetTriggersTokens() {\n\t\tconst itemsTokens = [];\n\n\t\tconst items = $.extend(\n\t\t\t{},\n\t\t\titems,\n\t\t\titemsObject( 'get', {\n\t\t\t\tfilter: {\n\t\t\t\t\titemType: 'trigger',\n\t\t\t\t},\n\t\t\t} )\n\t\t);\n\n\t\t// Iterate items\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tObject.entries( items ).forEach( ( [ itemID, item ] ) => {\n\t\t\t// Get the item tokens\n\t\t\tconst itemTokens = this.getItemTokens( item );\n\n\t\t\t// Check if it has tokens\n\t\t\tif ( itemTokens.tokens.length > 0 || ! this.options.includeGroupTokens ) {\n\t\t\t\titemsTokens.push( itemTokens );\n\t\t\t}\n\t\t} );\n\n\t\treturn itemsTokens;\n\t}\n\n\t/**\n\t * Returns the tokens from the actions. If there is an item ID defined, it will filter tokens \n\t * so it returns only those available for that particular action\n\t * \n\t * @return {Array} with multiple group of tokens\n\t */\n\tgetActionsTokens() {\n\t\t// The tokens groups\n\t\tconst tokenGroups = [];\n\n\t\t// Get the actions\n\t\tlet actions;\n\t\t// Check if there is an item ID defined, and the item is an action\n\t\tif ( \n\t\t\t[ 'condition', 'action' ].includes( this.itemType ) && \n\t\t\t! isEmpty( this.options.itemID )\t\n\t\t) {\n\t\t\tactions = getActionsThatRunBefore( this.options.itemID );\n\t\t} else {\n\t\t\t// Get all\n\t\t\tactions = getActions( {} );\n\t\t}\n\n\t\t// Iterate actions\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tObject.entries( actions ).forEach( ( [ actionID, action ] ) => {\n\t\t\t// Get the item tokens\n\t\t\tconst actionTokens = this.getItemTokens( action );\n\n\t\t\t// Check if it has tokens\n\t\t\tif ( actionTokens.tokens.length > 0 || ! this.options.includeGroupTokens ) {\n\t\t\t\ttokenGroups.push( actionTokens );\n\t\t\t}\n\t\t} );\n\t\t\n\t\treturn tokenGroups;\n\t}\n\n\t/**\n\t * Get all the tokens generated by a given item\n\t * The tokens added by this method can be divided into two groups:\n\t * - Automatic tokens: These are created using the fields of\n\t *   the trigger/action. For example, if the item has a dropdown\n\t *   to select a page, with the label \"Page\", then this method will\n\t *   create a text token called \"Page\".\n\t * - Custom dynamic tokens: These are created dynamically with PHP.\n\t *   For example, a trigger that lets you select a Gravity Form would\n\t *   have the fields as tokens.\n\t *\n\t * @param {Object} item The item\n\t * @return {Object}       Group of tokens\n\t */\n\tgetItemTokens( item ) {\n\t\t// Create the tokens group\n\t\tconst tokensGroup = {\n\t\t\tid: item.itemCode,\n\t\t\tintegrationId: item.integrationCode,\n\t\t\titemID: item.id,\n\t\t\titemType: item.itemType,\n\t\t};\n\n\t\t// Add the name\n\t\tif ( this.options.includeGroupName ) {\n\t\t\t// Get the name of the groups of tokens\n\t\t\t// For this, we will use the item sentence\n\t\t\tlet itemSentence = item.sentence;\n\t\t\tif ( ! item.isMissing ) {\n\t\t\t\titemSentence = getGlobalItem( item.integrationCode, item.itemType, item.itemCode ).sentence;\n\t\t\t}\n\n\t\t\t// Get or create the parsed item sentence\n\t\t\ttokensGroup.name = parseStringWithTokens(\n\t\t\t\titem,\n\t\t\t\titemSentence,\n\t\t\t\tUncannyAutomator.recipe.items[ item.id ].meta\n\t\t\t).html;\n\t\t}\n\n\t\t// Add the icon\n\t\tif ( this.options.includeGroupIcon ) {\n\t\t\t// Create the icon\n\t\t\tlet $icon = $( `<img src=\"${ getIntegrationIconURL( { integrationCode: item.integrationCode } ) }\">` );\n\n\t\t\t// Add the icon\n\t\t\ttokensGroup.icon = $icon;\n\t\t}\n\n\t\t// Add the tokens\n\t\tif ( this.options.includeGroupTokens ) {\n\t\t\tlet itemTokens = [];\n\n\t\t\t// FIELD tokens\n\t\t\t// Create tokens using the fields\n\t\t\t// Iterate the groups of options\n\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\tObject.entries( item.options ).forEach( ( [ optionsGroupID, optionsGroup ] ) => {\n\t\t\t\t// Iterate each field\n\t\t\t\toptionsGroup.fields.forEach( ( optionField ) => {\n\t\t\t\t\t// Get the field attributes\n\t\t\t\t\tconst fieldAttributes = optionField.getAttributes();\n\n\t\t\t\t\t// Check the field type\n\t\t\t\t\t// Check if it's a repeater field\n\t\t\t\t\t// Check the field type\n\t\t\t\t\tif ( fieldAttributes.fieldType == 'repeater' ) {\n\t\t\t\t\t\t// Iterate the rows\n\t\t\t\t\t\toptionField.fieldRows.forEach( ( row, index ) => {\n\t\t\t\t\t\t\t// Get the row index\n\t\t\t\t\t\t\tconst rowIndex = index;\n\n\t\t\t\t\t\t\t// Iterate the row fields\n\t\t\t\t\t\t\trow.forEach( ( childField ) => {\n\t\t\t\t\t\t\t\t// Add field\n\t\t\t\t\t\t\t\titemTokens.push( {\n\t\t\t\t\t\t\t\t\t// Create the token\n\t\t\t\t\t\t\t\t\tid: this.getItemTokenID( {\n\t\t\t\t\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\t\t\t\t\ttokenParentCode: item.itemCode,\n\t\t\t\t\t\t\t\t\t\t// REPEATER_FIELD_ID | ROW_INDEX | FIELD_ID\n\t\t\t\t\t\t\t\t\t\ttokenCode: `${\n\t\t\t\t\t\t\t\t\t\t\tfieldAttributes.optionCode\n\t\t\t\t\t\t\t\t\t\t}|${ rowIndex }|${ childField.getAttributes().optionCode }`,\n\t\t\t\t\t\t\t\t\t\tisField: true,\n\t\t\t\t\t\t\t\t\t} ),\n\n\t\t\t\t\t\t\t\t\t// childField name:\n\t\t\t\t\t\t\t\t\t// REPEATER_FIELD_NAME - \"Row\" ROW_INDEX - FIELD_NAME\n\t\t\t\t\t\t\t\t\tname: `${ fieldAttributes.tokenName } - ${ sprintf(\n\t\t\t\t\t\t\t\t\t\tUncannyAutomator.i18n.rowNumber,\n\t\t\t\t\t\t\t\t\t\t( rowIndex + 1 )\n\t\t\t\t\t\t\t\t\t) } - ${ childField.getAttributes().tokenName }`,\n\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\tchildField.getAttributes().fieldType == 'select' ||\n\t\t\t\t\t\t\t\t\t\tchildField.getAttributes().fieldType == 'textarea'\n\t\t\t\t\t\t\t\t\t\t\t? 'text'\n\t\t\t\t\t\t\t\t\t\t\t: childField.getAttributes().fieldType,\n\t\t\t\t\t\t\t\t\tvalue: childField.getValue(),\n\t\t\t\t\t\t\t\t\tfieldId: childField.getAttributes().optionCode,\n\t\t\t\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Check if it has custom field tokens, also called \"relevant tokens\"\n\t\t\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tisDefined( fieldAttributes.customFieldTokens ) &&\n\t\t\t\t\t\t\tisObject( fieldAttributes.customFieldTokens )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Iterate the relevant tokens\n\t\t\t\t\t\t\tObject.entries( fieldAttributes.customFieldTokens ).forEach( ( [ tokenId, tokenName ] ) => {\n\t\t\t\t\t\t\t\t// Get the token type of the \"relevant tokens\"\n\t\t\t\t\t\t\t\tlet tokenType = ( fieldAttributes.fieldType == 'select' || fieldAttributes.fieldType == 'textarea' ) ? 'text' : fieldAttributes.fieldType;\n\n\t\t\t\t\t\t\t\t// Check if we have to override the token type based on the token ID\n\t\t\t\t\t\t\t\tif ( tokenId.endsWith( '_ID' ) ) {\n\t\t\t\t\t\t\t\t\ttokenType = 'int';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( tokenId.endsWith( '_DATE' ) ) {\n\t\t\t\t\t\t\t\t\ttokenType = 'date';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( tokenId.endsWith( '_TIME' ) ) {\n\t\t\t\t\t\t\t\t\ttokenType = 'time';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( tokenId.endsWith( '_URL' ) ) {\n\t\t\t\t\t\t\t\t\ttokenType = 'url';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( tokenId.endsWith( '_EMAIL' ) ) {\n\t\t\t\t\t\t\t\t\ttokenType = 'email';\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\titemTokens.push( {\n\t\t\t\t\t\t\t\t\tid: this.getItemTokenID( {\n\t\t\t\t\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\t\t\t\t\ttokenParentCode: item.itemCode,\n\t\t\t\t\t\t\t\t\t\ttokenCode: tokenId,\n\t\t\t\t\t\t\t\t\t\tisField: true,\n\t\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\t\tname: tokenName,\n\t\t\t\t\t\t\t\t\ttype: tokenType,\n\t\t\t\t\t\t\t\t\tvalue: optionField.getValue(),\n\t\t\t\t\t\t\t\t\tfieldId: fieldAttributes.optionCode,\n\t\t\t\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\t\t\t\tcacheable: true,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Create a token using the field label\n\t\t\t\t\t\t\titemTokens.push( {\n\t\t\t\t\t\t\t\tid: this.getItemTokenID( {\n\t\t\t\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\t\t\t\ttokenParentCode: item.itemCode,\n\t\t\t\t\t\t\t\t\ttokenCode: fieldAttributes.optionCode,\n\t\t\t\t\t\t\t\t\tisField: true,\n\t\t\t\t\t\t\t\t} ),\n\t\t\t\t\t\t\t\tname: fieldAttributes.tokenName,\n\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\tfieldAttributes.fieldType == 'select' || fieldAttributes.fieldType == 'textarea'\n\t\t\t\t\t\t\t\t\t\t? 'text'\n\t\t\t\t\t\t\t\t\t\t: fieldAttributes.fieldType,\n\t\t\t\t\t\t\t\tvalue: optionField.getValue(),\n\t\t\t\t\t\t\t\tfieldId: fieldAttributes.optionCode,\n\t\t\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\t\t\tcacheable: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Custom ITEM tokens\n\t\t\t// These are dynamic tokens, for example, the fields of a form\n\t\t\titem.tokens.forEach( ( token ) => {\n\t\t\t\titemTokens.push( {\n\t\t\t\t\tid: this.getItemTokenID( {\n\t\t\t\t\t\titemType: item.itemType,\n\t\t\t\t\t\titemID: item.id,\n\t\t\t\t\t\ttokenParentCode: isDefined( token.tokenParent ) ? token.tokenParent : token.tokenIdentifier,\n\t\t\t\t\t\ttokenCode: token.tokenId,\n\t\t\t\t\t\tisField: false,\n\t\t\t\t\t} ),\n\t\t\t\t\tname: token.tokenName,\n\t\t\t\t\ttype: isDefined( token.tokenType ) ? token.tokenType : 'text',\n\t\t\t\t\titemID: item.id,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Add the tokens to the group\n\t\t\ttokensGroup.tokens = itemTokens;\n\n\t\t\t// Filter tokens\n\t\t\ttokensGroup.tokens = this.filterUnsupportedTokens( tokensGroup.tokens );\n\n\t\t\t// Filter tokens using a custom function (if it has one)\n\t\t\tif ( ! isEmpty( item.filterTokens ) ) {\n\t\t\t\t// Try to overwrite empty function\n\t\t\t\ttry {\n\t\t\t\t\t// Try to convert the string to function, but first remove the <script> tags and trim the string\n\t\t\t\t\t// eslint-disable-next-line no-eval\n\t\t\t\t\tconst filterTokens = eval(\n\t\t\t\t\t\t`(${ item.filterTokens.replace( '<script>', '' ).replace( '</script>', '' ).trim() })`\n\t\t\t\t\t);\n\n\t\t\t\t\t// Filter the tokens\n\t\t\t\t\titemTokens = filterTokens( tokensGroup, item );\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Continue regardless of error\n\n\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.log( item.filterTokens );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Filter tokens with the global filter\n\t\t\t// This will filter the tokens by type\n\t\t\t/*\n\t\t\ttokensGroup.tokens = this.filterTokensByType(\n\t\t\t\ttokensGroup.tokens,\n\t\t\t\tthis.fieldType\n\t\t\t);\n\t\t\t*/\n\t\t}\n\n\t\t// Add the group of tokens\n\t\treturn tokensGroup;\n\t}\n\n\t/**\n\t * Filters the tokens based on the field type\n\t *\n\t * @param {Array} tokens The tokens to be filtered\n\t * @return {Array} tokens The tokens, filtered\n\t */\n\tfilterTokensByType( tokens ) {\n\t\t// Check if the field type is defined\n\t\t// Otherwise, don't filter the tokens\n\t\tif ( isDefined( this.fieldType ) ) {\n\t\t\t// Check if it's NOT a text, textarea or url field\n\t\t\t// We don't have to filter tokens for those\n\t\t\tif ( ! [ 'text', 'textarea', 'url' ].includes( this.fieldType ) ) {\n\t\t\t\t// Iterate the tokens\n\t\t\t\ttokens = tokens.filter( ( token ) => {\n\t\t\t\t\t// Get the token type\n\t\t\t\t\tlet tokenType = token.type;\n\n\t\t\t\t\t// Check if the field is a \"float\" field. In that case,\n\t\t\t\t\t// promote all the \"int\" tokens to \"float\". All integers\n\t\t\t\t\t// are floats\n\t\t\t\t\tif ( this.fieldType == 'float' && tokenType == 'int' ) {\n\t\t\t\t\t\ttokenType = 'float';\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if the token type matches the field type\n\t\t\t\t\treturn this.fieldType == tokenType;\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn tokens;\n\t}\n\n\t/**\n\t * Creates a DOM node with the token data\n\t *\n\t * @param {String} tokenID A token ID\n\t * @return {Node}           The token node\n\t */\n\tcreateTokenDOMNode( tokenID ) {\n\t\t// Default response\n\t\tlet $tokenNode = null;\n\n\t\t// Get more information about the token\n\t\tconst token = this.getTokenDataByID( tokenID );\n\n\t\t// Check if the token is valid\n\t\tif ( isDefined( token ) ) {\n\t\t\t// Check if we already created this element\n\t\t\tif ( isDefined( UncannyAutomator.cache.tokens[ token.id ] ) ) {\n\t\t\t\t$tokenNode = UncannyAutomator.cache.tokens[ token.id ];\n\t\t\t} else {\n\t\t\t\t// Create the token node\n\t\t\t\t// VanillaJS because of the performance, this might be heavy\n\t\t\t\t$tokenNode = document.createElement( 'span' );\n\t\t\t\t$tokenNode.classList.add( 'uap-token' );\n\n\t\t\t\t// Create icon\n\t\t\t\tconst $tokenIcon = document.createElement( 'span' );\n\t\t\t\t$tokenIcon.classList.add( 'uap-token__icon' );\n\t\t\t\t$tokenIcon.appendChild( token.group.icon[ 0 ].cloneNode() );\n\n\t\t\t\t// Insert the icon\n\t\t\t\t$tokenNode.appendChild( $tokenIcon );\n\n\t\t\t\t// Insert the name\n\t\t\t\tconst $tokenName = document.createElement( 'span' );\n\t\t\t\t$tokenName.classList.add( 'uap-token__name' );\n\t\t\t\t$tokenName.innerHTML = token.name;\n\t\t\t\t$tokenNode.appendChild( $tokenName );\n\n\t\t\t\t// Check if this is a item token\n\t\t\t\tif ( isDefined( token.itemID ) ) {\n\t\t\t\t\t// Save the token action\n\t\t\t\t\tconst tokenAction = UncannyAutomator.recipe.items[ token.itemID ];\n\n\t\t\t\t\t// Check if we have to add the item ID\n\t\t\t\t\tif ( tokenAction.shouldShowItemId ) {\n\t\t\t\t\t\t$tokenName.insertAdjacentHTML( 'afterBegin', `<span class=\"uap-token__id\">${ sprintf( '#%s: ', token.itemID ) }</span>` );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if it's an action\n\t\t\t\t\tif ( tokenAction.itemType === 'action' ) {\n\t\t\t\t\t\t$tokenNode.classList.add( 'uap-token--action' );\n\n\t\t\t\t\t\tconst $flags = document.createElement( 'span' );\n\t\t\t\t\t\t$flags.classList.add( 'uap-token__flags' );\n\n\t\t\t\t\t\t// Check if the action is inside a condition block\n\t\t\t\t\t\tif ( tokenAction.hasConditions ) {\n\t\t\t\t\t\t\t$tokenNode.classList.add( 'uap-token--action-conditions', 'uap-token--warning' );\n\n\t\t\t\t\t\t\t$flags.insertAdjacentHTML( \n\t\t\t\t\t\t\t\t'beforeEnd', \n\t\t\t\t\t\t\t\t`<uo-icon id=\"code-merge\" slot=\"target\"></uo-icon>` \n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if this is being added to a field\n\t\t\t\t\t\tif ( \n\t\t\t\t\t\t\tisDefined( this.Field ) &&\n\t\t\t\t\t\t\tisDefined( this.Field.attributes.itemId ) &&\n\t\t\t\t\t\t\tisDefined( UncannyAutomator.recipe.items[ this.Field.attributes.itemId ] )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.destinationItemID = this.Field.attributes.itemId;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the destination is an action\n\t\t\t\t\t\tif ( isDefined( this.destinationItemID ) &&\n\t\t\t\t\t\t\tisDefined( UncannyAutomator.recipe.items[ this.destinationItemID ] ) &&\n\t\t\t\t\t\t\tUncannyAutomator.recipe.items[ this.destinationItemID].itemType === 'action'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Save the destination action\n\t\t\t\t\t\t\tconst destinationItem = UncannyAutomator.recipe.items[ this.destinationItemID ];\n\n\t\t\t\t\t\t\t// Check if the action where the token is coming from is scheduled, BUT THE DESTINATION action is not\n\t\t\t\t\t\t\t// This means the token MIGHT not be available\n\t\t\t\t\t\t\tif ( tokenAction.isScheduled && ! destinationItem.isScheduled ) {\n\t\t\t\t\t\t\t\t$tokenNode.classList.add( 'uap-token--action-scheduled', 'uap-token--warning' );\n\n\t\t\t\t\t\t\t\t$flags.insertAdjacentHTML( \n\t\t\t\t\t\t\t\t\t'beforeEnd', \n\t\t\t\t\t\t\t\t\t`<uo-icon id=\"clock\" slot=\"target\"></uo-icon>` \n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( tokenAction.isDelayed && ! destinationItem.isDelayed ) {\n\t\t\t\t\t\t\t\t$tokenNode.classList.add( 'uap-token--action-delayed', 'uap-token--warning' );\n\n\t\t\t\t\t\t\t\t$flags.insertAdjacentHTML( \n\t\t\t\t\t\t\t\t\t'beforeEnd', \n\t\t\t\t\t\t\t\t\t`<uo-icon id=\"clock\" slot=\"target\"></uo-icon>` \n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$tokenNode.append( $flags );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Check if we can save the token in the cache\n\t\t\t\tif ( token.cacheable ) {\n\t\t\t\t\t// Save node in the cache\n\t\t\t\t\tUncannyAutomator.cache.tokens[ token.id ] = $tokenNode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Clone the node\n\t\t\t$tokenNode = $tokenNode.cloneNode( true );\n\t\t} else {\n\t\t\t// Create the token node\n\t\t\t// VanillaJS because of the performance, this might be heavy\n\t\t\t$tokenNode = document.createElement( 'span' );\n\t\t\t$tokenNode.classList.add( 'uap-token', 'uap-token--invalid' );\n\n\t\t\t// Insert the icon\n\t\t\tconst $tokenIcon = document.createElement( 'uo-icon' );\n\t\t\t$tokenIcon.setAttribute( 'id', 'exclamation-triangle' );\n\t\t\t$tokenNode.appendChild( $tokenIcon );\n\n\t\t\t// Insert the name\n\t\t\tconst $tokenName = document.createElement( 'span' );\n\t\t\t$tokenName.classList.add( 'uap-token__name' );\n\t\t\t$tokenName.innerHTML = tokenID;\n\t\t\t$tokenNode.appendChild( $tokenName );\n\t\t}\n\n\t\treturn $tokenNode;\n\t}\n\n\t/**\n\t * Returns more data about a token by just using the token ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {Object}        The token data\n\t */\n\tgetTokenDataByID( tokenID = '' ) {\n\t\t// Default response\n\t\tlet token = null;\n\n\t\t// Check if the tokenID is not empty\n\t\tif ( ! isEmpty( tokenID ) ) {\n\t\t\t// Iterate the groups of tokens\n\t\t\tthis.tokens.some( ( tokensGroup ) => {\n\t\t\t\t// Get the token using the tokenID\n\t\t\t\ttoken = tokensGroup.tokens.reduce( ( locatedToken, currentToken ) => {\n\t\t\t\t\tif ( isDefined( currentToken.is ) ) {\n\t\t\t\t\t\treturn currentToken.is( tokenID ) ? currentToken : locatedToken;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn currentToken.id == tokenID ? currentToken : locatedToken;\n\t\t\t\t\t}\n\t\t\t\t}, null );\n\n\t\t\t\t// Check if we found a token\n\t\t\t\tif ( isDefined( token ) ) {\n\t\t\t\t\t// Check if it has a variation generator\n\t\t\t\t\tif ( isDefined( token ) && isDefined( token.getVariation ) ) {\n\t\t\t\t\t\ttoken = token.getVariation( tokenID );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add more data to the token\n\t\t\t\t\ttoken.group = {\n\t\t\t\t\t\tid: tokensGroup.id,\n\t\t\t\t\t\tname: tokensGroup.name,\n\t\t\t\t\t\ticon: tokensGroup.icon,\n\t\t\t\t\t};\n\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn token;\n\t}\n\n\t/**\n\t * Render tokens in text\n\t *\n\t * @param {String} textWithTokens The text\n\t * @param {Object} options        Optional options\n\t * @return {Node}                  Node with the text with rendered tokens\n\t */\n\trenderTextWithTokens( textWithTokens, options = {} ) {\n\t\t// Get the options\n\t\toptions = Object.assign(\n\t\t\t{\n\t\t\t\ttemplate: '',\n\t\t\t\tparseTokensInAttributes: true,\n\t\t\t\treturnString: false\n\t\t\t},\n\t\t\toptions\n\t\t);\n\n\t\t// Check if there is a destination item ID\n\t\tif ( isDefined( options.itemID ) ) {\n\t\t\tthis.destinationItemID = options.itemID;\n\t\t}\n\n\t\t// Check if it has a template\n\t\tconst hasTemplate = ! isEmpty( options.template );\n\t\t\n\t\t// Create callback\n\t\tconst replaceTokensCallback = ( fullMatch, token ) => {\n\t\t\t// Get token node\n\t\t\tconst $token = this.createTokenDOMNode( token );\n\n\t\t\t// Get the token node HTML\n\t\t\tlet tokenHTML = $token.outerHTML;\n\n\t\t\t// Check if we have to add a wrapper to it\n\t\t\tif ( hasTemplate ) {\n\t\t\t\t// Add the variable data to the template\n\t\t\t\ttokenHTML = sprintf( options.template, tokenHTML, token );\n\t\t\t}\n\n\t\t\t// Replace the content with the HTML of the token node\n\t\t\t// Verify that we're only replacing the content inside {{}},\n\t\t\t// and that we're not removing any other characters\n\t\t\treturn fullMatch.replace( `{{${ token }}}`, tokenHTML );\n\t\t};\n\n\t\t// Replace the tokens in the text with tokens\n\t\ttextWithTokens = textWithTokens.replace(\n\t\t\t// Get the correct regex\n\t\t\toptions.parseTokensInAttributes ? this.tokensRegEx : this.tokensRegExNoAttributes,\n\t\t\t// Replace the content\n\t\t\treplaceTokensCallback\n\t\t);\n\n\t\t// Check if we have to return just the string\n\t\tif ( options.returnString ) {\n\t\t\treturn textWithTokens;\n\t\t}\n\n\t\t// Check if we have to return a node\n\t\tif ( ! options.returnString ) {\n\t\t\t// Create the container\n\t\t\tconst $container = document.createElement( 'span' );\n\t\t\t$container.classList.add( 'uap-text-with-tokens' );\n\n\t\t\t// Add the text, now with the tokens rendered, to the container\n\t\t\t$container.innerHTML = textWithTokens;\n\n\t\t\treturn $container;\n\t\t}\n\t}\n\n\t/**\n\t * Generates the token ID\n\t */\n\tgetItemTokenID( { itemType, itemID, tokenParentCode, tokenCode, isField = false } ) {\n\t\tlet tokenID = '';\n\n\t\tswitch ( itemType ) {\n\t\t\tcase 'trigger':\n\t\t\t\ttokenID = `${ itemID }:${ tokenParentCode }:${ tokenCode }`;\n\t\t\t\tbreak;\n\n\t\t\tcase 'action':\n\t\t\t\t// Get prefix\n\t\t\t\tconst tokenPrefix = isField ? 'ACTION_FIELD' : 'ACTION_META';\n\n\t\t\t\ttokenID = `${ tokenPrefix }:${ itemID }:${ tokenParentCode }:${ tokenCode }`;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn tokenID;\n\t}\n}\n\n/**\n * Creates a single token\n */\nclass Token {\n\t/**\n\t * Saves data in the instance\n\t *\n\t * @param {Object}  options              The options\n\t * @param {String}  options.id           The token ID\n\t * @param {String}  options.type         The token type (similar to the field type, with some exceptions)\n\t * @param {String}  options.name         The token name\n\t * @param {Boolean} options.cacheable    Whether Automator should cache the token node\n\t * @param {Boolean} options.requiresUser Whether the token requires user data to be used\n\t * @return {undefined}\n\t */\n\tconstructor( { id, type = 'text', name, cacheable = true, requiresUser = false } ) {\n\t\t// Save data\n\t\tthis.id = id;\n\t\tthis.type = type;\n\t\tthis.name = name;\n\t\tthis.cacheable = cacheable;\n\t\tthis.requiresUser = requiresUser;\n\t}\n\n\t/**\n\t * Returns true if the passed token ID matches the ID of the token instance\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {Boolean}         True if tokenID matches the token ID\n\t */\n\tis( tokenID ) {\n\t\treturn tokenID == this.id;\n\t}\n}\n\n/**\n * Creates the Post Meta token, which shows a modal before being added\n */\nclass PostMetaToken extends Token {\n\t/**\n\t * Creates the Post Meta token\n\t *\n\t * @param {Object} options            The options\n\t * @param {String} options.customID   The custom ID. Don't define one unless you have to.\n\t * @param {String} options.customName The custom name. Don't define one unless you have to.\n\t * @param {String} options.context    The context. Define this one. 'trigger', 'action', or 'user-selector', depending on where you're using the token\n\t * @return {undefined}\n\t */\n\tconstructor( { customID, customName, context = 'trigger' } ) {\n\t\tsuper( {\n\t\t\tid: isDefined( customID ) ? customID : 'POSTMETA:POSTID:KEY',\n\t\t\tname: isDefined( customName ) ? customName : UncannyAutomator.i18n.tokens.global.postMetaKey,\n\t\t\ttype: 'text',\n\t\t\tcacheable: false,\n\t\t\trequiresUser: false,\n\t\t} );\n\n\t\t// Save context\n\t\tthis.context = context;\n\t}\n\n\t/**\n\t * Returns the default token ID\n\t *\n\t * @return {String} The default token ID\n\t */\n\tget unmodifiedID() {\n\t\treturn 'POSTMETA:POSTID:KEY';\n\t}\n\n\t/**\n\t * Get the name of the token when it doesn't have data\n\t *\n\t * @return {String} The default name\n\t */\n\tget defaultName() {\n\t\treturn UncannyAutomator.i18n.tokens.global.postMetaKey;\n\t}\n\n\t/**\n\t * Callback invoked before adding the token to the field\n\t *\n\t * @param {Callback} addTokenToField Callback invoked after validating fields\n\t * @return {undefined}\n\t */\n\tbeforeAdded( addTokenToField ) {\n\t\t// Create the content for the modal\n\t\tconst $modalContent = $( `<div></div>` );\n\n\t\t// Post field \"Learn more\" URL\n\t\tconst tokenPostFieldLearnMore = addUTMParameters( 'https://automatorplugin.com/knowledge-base/post-meta-tokens/', {\n\t\t\tmedium: 'add_token',\n\t\t\tcontent: 'post_meta_post_id_learn_more',\n\t\t} );\n\n\t\t// Create the \"Post\" field\n\t\tconst tokenPostField = new Field( 'int', {\n\t\t\titemType: this.context,\n\t\t\toptionCode: 'token__postMetaPostField',\n\t\t\tlabel: UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldLabel,\n\t\t\tdescription: sprintf(\n\t\t\t\tUncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldDescription,\n\t\t\t\t`<a href=\"${ tokenPostFieldLearnMore }\" target=\"_blank\">${ UncannyAutomator.i18n.learnMore } <uo-icon id=\"external-link\"></uo-icon></a>`\n\t\t\t),\n\t\t\tisRequired: true,\n\t\t\tsupportsTokens: true,\n\t\t\tunsupportedTokens: [ 'USERMETA:KEY', 'POSTMETA:POSTID:KEY' ],\n\t\t} );\n\n\t\t// Add the field\n\t\t$modalContent.append( tokenPostField.createFormElement() );\n\n\t\t// Create the \"Key\" field\n\t\tconst tokenKeyField = new Field( 'text', {\n\t\t\titemType: this.context,\n\t\t\toptionCode: 'token__postMetaKeyField',\n\t\t\tlabel: UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldLabel,\n\t\t\tdescription: UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldDescription,\n\t\t\tisRequired: true,\n\t\t\tsupportsTokens: true,\n\t\t\tunsupportedTokens: [ 'USERMETA:KEY', 'POSTMETA:POSTID:KEY' ],\n\t\t} );\n\n\t\t// Add the field\n\t\t$modalContent.append( tokenKeyField.createFormElement() );\n\n\t\t// AFTER we added the elements to the DOM let's call init\n\t\t// TokenSelector and CodeMirror. We're going to call this in\n\t\t// ItemOptions.js because the TokenSelector and\n\t\t// CodeMirror need the item in the DOM before changing it\n\t\ttokenPostField.initTokenSelector();\n\t\ttokenPostField.initCodeMirror();\n\t\ttokenKeyField.initTokenSelector();\n\t\ttokenKeyField.initCodeMirror();\n\n\t\t// Show a modal\n\t\tconst modal = new Modal(\n\t\t\t{\n\t\t\t\ttitle: UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.title,\n\t\t\t\tcontent: $modalContent,\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel: UncannyAutomator.i18n.cancel,\n\t\t\t\t\tconfirm: UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.confirmButton,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsize: 'extra-large',\n\t\t\t\tallowContentOverflow: true,\n\t\t\t}\n\t\t);\n\n\t\tmodal.setEvents( {\n\t\t\tafterSetEvents: () => {\n\t\t\t\tmodal.show();\n\t\t\t},\n\t\t\tonConfirm: () => {\n\t\t\t\t// Validate the field\n\t\t\t\tconst postValidation = tokenPostField.validate(),\n\t\t\t\t\tkeyValidation = tokenKeyField.validate();\n\n\t\t\t\t// Check if the fields are valid\n\t\t\t\tif ( postValidation.isValid && keyValidation.isValid ) {\n\t\t\t\t\t// Get the values\n\t\t\t\t\tconst postMetaPost = tokenPostField.getValue(),\n\t\t\t\t\t\tpostMetaKey = tokenKeyField.getValue();\n\n\t\t\t\t\t// Clone the token data, don't modify the original\n\t\t\t\t\tconst postMetaToken = $.extend( true, {}, this );\n\n\t\t\t\t\t// Espace tokens characters from field values\n\t\t\t\t\t// Check if it's using tokens, and replace the reserved characters to prevent validation issues.\n\t\t\t\t\tconst postMetaPostEscaped = postMetaPost\n\t\t\t\t\t\t.replaceAll( '{', '[' )\n\t\t\t\t\t\t.replaceAll( '}', ']' )\n\t\t\t\t\t\t.replaceAll( ':', ';' );\n\n\t\t\t\t\tconst postMetaKeyEscaped = postMetaKey\n\t\t\t\t\t\t.replaceAll( '{', '[' )\n\t\t\t\t\t\t.replaceAll( '}', ']' )\n\t\t\t\t\t\t.replaceAll( ':', ';' );\n\n\t\t\t\t\t// Change ID of the token\n\t\t\t\t\tpostMetaToken.id = postMetaToken.id\n\t\t\t\t\t\t// Replace POSTID with the value of the \"Post\" field\n\t\t\t\t\t\t.replace( 'POSTID', postMetaPostEscaped )\n\t\t\t\t\t\t// Replace KEY with the value of the \"Meta key\" field\n\t\t\t\t\t\t.replace( 'KEY', postMetaKeyEscaped );\n\n\t\t\t\t\t// Create the token name\n\t\t\t\t\tlet tokenName = sprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,\n\t\t\t\t\t\tpostMetaPostEscaped,\n\t\t\t\t\t\tpostMetaKeyEscaped\n\t\t\t\t\t);\n\n\t\t\t\t\t// Check if one of the fields have tokens\n\t\t\t\t\tif ( postMetaPost.includes( '{{' ) || postMetaKey.includes( '{{' ) ) {\n\t\t\t\t\t\t// Try to parse tokens inside the token (beta, catch possible errors and add fallback)\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Parse tokens\n\t\t\t\t\t\t\tconst tokensInFields = new Tokens( 'action' );\n\n\t\t\t\t\t\t\t// Visually parse tokens in the \"Post ID\" and \"Meta key\" fields\n\t\t\t\t\t\t\tconst postMetaPostNode = tokensInFields.renderTextWithTokens( postMetaPost ),\n\t\t\t\t\t\t\t\tpostMetaKeyNode = tokensInFields.renderTextWithTokens( postMetaKey );\n\n\t\t\t\t\t\t\t// Create the token name\n\t\t\t\t\t\t\ttokenName = sprintf(\n\t\t\t\t\t\t\t\tUncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,\n\t\t\t\t\t\t\t\tpostMetaPostNode.outerHTML,\n\t\t\t\t\t\t\t\tpostMetaKeyNode.outerHTML,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Change name of the token\n\t\t\t\t\tpostMetaToken.name = tokenName;\n\n\t\t\t\t\t// Destroy the modal\n\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t// Invoke the callback\n\t\t\t\t\taddTokenToField( postMetaToken );\n\t\t\t\t}\n\t\t\t},\n\t\t\tafterHide: () => {\n\t\t\t\tmodal.destroy();\n\t\t\t},\n\t\t} );\n\t}\n\n\t/**\n\t * Generates the dynamic token name based on the data in the token ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {String}         The token name, given the data in the ID\n\t */\n\tgetDynamicTokenName( tokenID ) {\n\t\t// Get the parts of the token\n\t\t// eslint-disable-next-line no-unused-vars, @wordpress/no-unused-vars-before-return\n\t\tconst [ postMetaBase, postMetaPost, postMetaKey ] = tokenID.split( ':' );\n\n\t\t// Create the token name\n\t\tlet tokenName = sprintf(\n\t\t\tUncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,\n\t\t\tpostMetaPost,\n\t\t\tpostMetaKey,\n\t\t);\n\n\t\t// Check if one of the fields have tokens\n\t\tif ( postMetaPost.includes( '[[' ) || postMetaKey.includes( '[[' ) ) {\n\t\t\t// Try to parse tokens inside the token (beta, catch possible errors and add fallback)\n\t\t\ttry {\n\t\t\t\t// Parse tokens\n\t\t\t\tconst tokensInFields = new Tokens( 'action' );\n\n\t\t\t\t// Visually parse tokens in the \"Post ID\" and \"Meta key\" fields\n\t\t\t\tconst postMetaPostNode = tokensInFields.renderTextWithTokens(\n\t\t\t\t\t\tpostMetaPost.replaceAll( '[', '{' ).replaceAll( ']', '}' ).replaceAll( ';', ':' )\n\t\t\t\t\t),\n\t\t\t\t\tpostMetaKeyNode = tokensInFields.renderTextWithTokens(\n\t\t\t\t\t\tpostMetaKey.replaceAll( '[', '{' ).replaceAll( ']', '}' ).replaceAll( ';', ':' )\n\t\t\t\t\t);\n\n\t\t\t\t// Create the token name\n\t\t\t\ttokenName = sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,\n\t\t\t\t\tpostMetaPostNode.outerHTML,\n\t\t\t\t\tpostMetaKeyNode.outerHTML,\n\t\t\t\t);\n\t\t\t} catch ( e ) {\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn tokenName;\n\t}\n\n\t/**\n\t * Returns true if the current token has the passed ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {Boolean} True if the passed ID matches the ID of the current token\n\t */\n\tis( tokenID ) {\n\t\treturn tokenID.startsWith( 'POSTMETA:' );\n\t}\n\n\t/**\n\t * Returns a variation of this token given a token ID with custom data\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {PostMetaToken} The Post Meta token, with custom data\n\t */\n\tgetVariation( tokenID ) {\n\t\t// Create a new instance of this class\n\t\tconst variation = new PostMetaToken( {\n\t\t\tcustomID: tokenID,\n\t\t\tcustomName: this.getDynamicTokenName( tokenID ),\n\t\t\tcontext: this.context,\n\t\t} );\n\n\t\treturn variation;\n\t}\n}\n\n/**\n * Creates the User Meta token, which shows a modal before being added\n */\nclass UserMetaToken extends Token {\n\t/**\n\t * Creates the User Meta token\n\t *\n\t * @param {Object} options            The options\n\t * @param {String} options.customID   The custom ID. Don't define one unless you have to.\n\t * @param {String} options.customName The custom name. Don't define one unless you have to.\n\t * @param {String} options.context    The context. Define this one. 'trigger', 'action', or 'user-selector', depending on where you're using the token\n\t * @return {undefined}\n\t */\n\tconstructor( { customID, customName, context = 'trigger' } ) {\n\t\tsuper( {\n\t\t\tid: isDefined( customID ) ? customID : 'USERMETA:KEY',\n\t\t\tname: isDefined( customName ) ? customName : UncannyAutomator.i18n.tokens.global.userMetaKey,\n\t\t\ttype: 'text',\n\t\t\tcacheable: false,\n\t\t\trequiresUser: true,\n\t\t} );\n\n\t\tthis.context = context;\n\t}\n\n\t/**\n\t * Callback invoked before adding the token to the field\n\t *\n\t * @param {Callback} addTokenToField Callback invoked after validating fields\n\t * @return {undefined}\n\t */\n\tbeforeAdded( addTokenToField ) {\n\t\t// Create the content for the modal\n\t\tconst $modalContent = $( `<div></div>` );\n\n\t\t// Create the field\n\t\tconst metaKeyField = new Field( 'text', {\n\t\t\toptionCode: 'token__metaKeyField',\n\t\t\tlabel: UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKey,\n\t\t\tdescription: UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKeyDescription,\n\t\t\tisRequired: true,\n\t\t} );\n\n\t\t// Add the field\n\t\t$modalContent.append( metaKeyField.createFormElement() );\n\n\t\t// Show a modal\n\t\tconst modal = new Modal( {\n\t\t\ttitle: UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.title,\n\t\t\tcontent: $modalContent,\n\t\t\tbuttons: {\n\t\t\t\tcancel: UncannyAutomator.i18n.cancel,\n\t\t\t\tconfirm: UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.confirmButton,\n\t\t\t},\n\t\t} );\n\n\t\tmodal.setEvents( {\n\t\t\tafterSetEvents: () => {\n\t\t\t\tmodal.show();\n\t\t\t},\n\t\t\tonConfirm: () => {\n\t\t\t\t// Validate the field\n\t\t\t\tconst fieldValidation = metaKeyField.validate();\n\n\t\t\t\t// Get the field value\n\t\t\t\tconst fieldValue = metaKeyField.getValue();\n\n\t\t\t\t// Check if the field is valid\n\t\t\t\tif ( fieldValidation.isValid ) {\n\t\t\t\t\t// Clone the token, don't modify the original\n\t\t\t\t\tconst userMetaToken = $.extend( true, {}, this );\n\n\t\t\t\t\t// Change ID of the token\n\t\t\t\t\tuserMetaToken.id = userMetaToken.id.replace( 'KEY', fieldValue );\n\n\t\t\t\t\t// Change name of the token\n\t\t\t\t\tuserMetaToken.name = sprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,\n\t\t\t\t\t\tfieldValue,\n\t\t\t\t\t);\n\n\t\t\t\t\t// Destroy the modal\n\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t// Invoke the callback\n\t\t\t\t\taddTokenToField( userMetaToken );\n\t\t\t\t}\n\t\t\t},\n\t\t\tafterHide: () => {\n\t\t\t\tmodal.destroy();\n\t\t\t},\n\t\t} );\n\t}\n\n\t/**\n\t * Generates the dynamic token name based on the data in the token ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {String}         The token name, given the data in the ID\n\t */\n\tgetDynamicTokenName( tokenID ) {\n\t\t// Get the key the user wants to get\n\t\tconst key = tokenID.replace( 'USERMETA:', '' );\n\n\t\t// Create token name\n\t\tconst tokenName = sprintf( UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate, key );\n\n\t\treturn tokenName;\n\t}\n\n\t/**\n\t * Returns true if the current token has the passed ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {Boolean}          True if the passed ID matches the ID of the current token\n\t */\n\tis( tokenID ) {\n\t\treturn tokenID.startsWith( 'USERMETA:' );\n\t}\n\n\t/**\n\t * Returns a variation of this token given a token ID with custom data\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {UserMetaToken}          The User Meta token, with custom data\n\t */\n\tgetVariation( tokenID ) {\n\t\t// Create a new instance of this class\n\t\tconst variation = new UserMetaToken( {\n\t\t\tcustomID: tokenID,\n\t\t\tcustomName: this.getDynamicTokenName( tokenID ),\n\t\t\tcontext: this.context,\n\t\t} );\n\n\t\treturn variation;\n\t}\n}\n\n/**\n * Creates the Calculation token, which shows a modal before being added\n */\n class CalculationToken extends Token {\n\t/**\n\t * Creates the Post Meta token\n\t *\n\t * @param {Object} options            The options\n\t * @param {String} options.customID   The custom ID. Don't define one unless you have to.\n\t * @param {String} options.customName The custom name. Don't define one unless you have to.\n\t * @param {String} options.context    The context. Define this one. 'trigger', 'action', or 'user-selector', depending on where you're using the token\n\t * @return {undefined}\n\t */\n\tconstructor( { customID, customName, context = 'trigger' } ) {\n\t\tsuper( {\n\t\t\tid: isDefined( customID ) ? customID : 'CALCULATION:FORMULA',\n\t\t\tname: isDefined( customName ) ? customName : UncannyAutomator.i18n.tokens.global.calculation,\n\t\t\ttype: 'text',\n\t\t\tcacheable: false,\n\t\t\trequiresUser: false,\n\t\t} );\n\n\t\t// Save context\n\t\tthis.context = context;\n\t}\n\n\t/**\n\t * Returns the default token ID\n\t *\n\t * @return {String} The default token ID\n\t */\n\tget unmodifiedID() {\n\t\treturn 'CALCULATION:FORMULA';\n\t}\n\n\t/**\n\t * Get the name of the token when it doesn't have data\n\t *\n\t * @return {String} The default name\n\t */\n\tget defaultName() {\n\t\treturn UncannyAutomator.i18n.tokens.global.calculation;\n\t}\n\n\t/**\n\t * Callback invoked before adding the token to the field\n\t *\n\t * @param {Callback} addTokenToField Callback invoked after validating fields\n\t * @return {undefined}\n\t */\n\tbeforeAdded( addTokenToField ) {\n\t\t// Create the content for the modal\n\t\tconst $modalContent = $( `<div></div>` );\n\n\t\t// Formula field \"Learn more\" URL\n\t\tconst tokenFormulaFieldLearnMore = addUTMParameters( 'https://automatorplugin.com/knowledge-base/calculation-tokens/', {\n\t\t\tmedium: 'add_token',\n\t\t\tcontent: 'post_meta_calculation_learn_more',\n\t\t} );\n\n\t\t// Create the \"Formula\" field\n\t\tconst formulaField = new Field( 'text', {\n\t\t\titemType: this.context,\n\t\t\toptionCode: 'token__calculationFormulaField',\n\t\t\tlabel: UncannyAutomator.i18n.tokens.specialTokens.calculation.modal.formulaFieldLabel,\n\t\t\tdescription: sprintf(\n\t\t\t\tUncannyAutomator.i18n.tokens.specialTokens.calculation.modal.formulaFieldDescription,\n\t\t\t\t`<a href=\"${ tokenFormulaFieldLearnMore }\" target=\"_blank\">${ UncannyAutomator.i18n.learnMore } <uo-icon id=\"external-link\"></uo-icon></a>`\n\t\t\t),\n\t\t\tisRequired: true,\n\t\t\tsupportsTokens: true,\n\t\t\tunsupportedTokens: [ 'CALCULATION:FORMULA' ],\n\t\t} );\n\n\t\t// Add the field\n\t\t$modalContent.append( formulaField.createFormElement() );\n\n\t\t// AFTER we added the elements to the DOM let's call init\n\t\t// TokenSelector and CodeMirror. We're going to call this in\n\t\t// ItemOptions.js because the TokenSelector and\n\t\t// CodeMirror need the item in the DOM before changing it\n\t\tformulaField.initTokenSelector();\n\t\tformulaField.initCodeMirror();\n\n\t\t// Show a modal\n\t\tconst modal = new Modal(\n\t\t\t{\n\t\t\t\ttitle: UncannyAutomator.i18n.tokens.specialTokens.calculation.modal.title,\n\t\t\t\tcontent: $modalContent,\n\t\t\t\tbuttons: {\n\t\t\t\t\tcancel: UncannyAutomator.i18n.cancel,\n\t\t\t\t\tconfirm: UncannyAutomator.i18n.tokens.specialTokens.calculation.modal.confirmButton,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsize: 'extra-large',\n\t\t\t\tallowContentOverflow: true,\n\t\t\t}\n\t\t);\n\n\t\tmodal.setEvents( {\n\t\t\tafterSetEvents: () => {\n\t\t\t\tmodal.show();\n\t\t\t},\n\t\t\tonConfirm: () => {\n\t\t\t\t// Validate the field\n\t\t\t\tconst formulaValidation = formulaField.validate();\n\n\t\t\t\t// Check if the fields are valid\n\t\t\t\tif ( formulaValidation.isValid ) {\n\t\t\t\t\t// Get the values\n\t\t\t\t\tconst calucaltionFormula = formulaField.getValue();\n\n\t\t\t\t\t// Clone the token data, don't modify the original\n\t\t\t\t\tconst calculationToken = $.extend( true, {}, this );\n\n\t\t\t\t\t// Espace tokens characters from field values\n\t\t\t\t\t// Check if it's using tokens, and replace the reserved characters to prevent validation issues.\n\t\t\t\t\tconst calculationFormulaEscaped = calucaltionFormula\n\t\t\t\t\t\t.replaceAll( '{', '' )\n\t\t\t\t\t\t.replaceAll( '}', '' )\n\t\t\t\t\t\t.replaceAll( ':', '' );\n\n\t\t\t\t\t// Change ID of the token\n\t\t\t\t\tcalculationToken.id = calculationToken.id\n\t\t\t\t\t\t.replace( 'FORMULA', calculationFormulaEscaped );\n\n\t\t\t\t\t// Create the token name\n\t\t\t\t\tlet tokenName = sprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.tokens.global.calculationTemplate,\n\t\t\t\t\t\tcalculationFormulaEscaped\n\t\t\t\t\t);\n\n\t\t\t\t\t// Check if one of the fields have tokens\n\t\t\t\t\tif ( calucaltionFormula.includes( '{{' ) ) {\n\t\t\t\t\t\t// Try to parse tokens inside the token (beta, catch possible errors and add fallback)\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Parse tokens\n\t\t\t\t\t\t\tconst tokensInFields = new Tokens( 'action' );\n\n\t\t\t\t\t\t\t// Visually parse tokens in the \"Post ID\" and \"Meta key\" fields\n\t\t\t\t\t\t\tconst calucaltionFormulaNode = tokensInFields.renderTextWithTokens( calucaltionFormula );\n\n\t\t\t\t\t\t\t// Create the token name\n\t\t\t\t\t\t\ttokenName = sprintf(\n\t\t\t\t\t\t\t\tUncannyAutomator.i18n.tokens.global.calculationTemplate,\n\t\t\t\t\t\t\t\tcalucaltionFormulaNode.outerHTML\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\t\tconsole.warn( e );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Change name of the token\n\t\t\t\t\tcalculationToken.name = tokenName;\n\n\t\t\t\t\t// Destroy the modal\n\t\t\t\t\tmodal.destroy();\n\n\t\t\t\t\t// Invoke the callback\n\t\t\t\t\taddTokenToField( calculationToken );\n\t\t\t\t}\n\t\t\t},\n\t\t\tafterHide: () => {\n\t\t\t\tmodal.destroy();\n\t\t\t},\n\t\t} );\n\t}\n\n\t/**\n\t * Generates the dynamic token name based on the data in the token ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {String}         The token name, given the data in the ID\n\t */\n\tgetDynamicTokenName( tokenID ) {\n\t\t// Get the parts of the token\n\t\t// eslint-disable-next-line no-unused-vars, @wordpress/no-unused-vars-before-return\n\t\tconst [ calculationBase, calcaultionFormula ] = tokenID.split( ':' );\n\n\t\t// Create the token name\n\t\tlet tokenName = sprintf(\n\t\t\tUncannyAutomator.i18n.tokens.global.calculationTemplate,\n\t\t\tcalcaultionFormula\n\t\t);\n\n\t\t// Check if one of the fields have tokens\n\t\tif ( calcaultionFormula.includes( '' ) ) {\n\t\t\t// Try to parse tokens inside the token (beta, catch possible errors and add fallback)\n\t\t\ttry {\n\t\t\t\t// Parse tokens\n\t\t\t\tconst tokensInFields = new Tokens( 'action' );\n\n\t\t\t\t// Visually parse tokens in the \"Post ID\" and \"Meta key\" fields\n\t\t\t\tconst calculationFormulaNode = tokensInFields.renderTextWithTokens(\n\t\t\t\t\t\tcalcaultionFormula.replaceAll( '', '{{' ).replaceAll( '', '}}' ).replaceAll( '', ':' )\n\t\t\t\t\t);\n\n\t\t\t\t// Create the token name\n\t\t\t\ttokenName = sprintf(\n\t\t\t\t\tUncannyAutomator.i18n.tokens.global.calculationTemplate,\n\t\t\t\t\tcalculationFormulaNode.outerHTML\n\t\t\t\t);\n\t\t\t} catch ( e ) {\n\t\t\t\t// Output error if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn( e );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn tokenName;\n\t}\n\n\t/**\n\t * Returns true if the current token has the passed ID\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {Boolean} True if the passed ID matches the ID of the current token\n\t */\n\tis( tokenID ) {\n\t\treturn tokenID.startsWith( 'CALCULATION:' );\n\t}\n\n\t/**\n\t * Returns a variation of this token given a token ID with custom data\n\t *\n\t * @param {String} tokenID The token ID\n\t * @return {PostMetaToken} The Post Meta token, with custom data\n\t */\n\tgetVariation( tokenID ) {\n\t\t// Create a new instance of this class\n\t\tconst variation = new CalculationToken( {\n\t\t\tcustomID: tokenID,\n\t\t\tcustomName: this.getDynamicTokenName( tokenID ),\n\t\t\tcontext: this.context,\n\t\t} );\n\n\t\treturn variation;\n\t}\n}\n","// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Checks whether the user has Pro or not\n *\n * @return {Boolean} True if it has Automator Pro\n */\nconst isAutomatorProActive = () => {\n\treturn isDefined( UncannyAutomator.wp ) && UncannyAutomator.wp;\n}\n\nexport default isAutomatorProActive;\n","// Import style\nimport './style.scss';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport Tokens from '@builder/tokens';\n\n/**\n * Parses a dynamic sentence to add real data\n * Algorithm:\n *\n * Given a string with curly brackets (hereafter, the dynamic pill), like:\n * \"The user passed {{a quiz:QUIZ}}\"\n *\n * 1. Look for all the dynamic pill using a regular expression. Iterate them and replace\n *    them with <span>. Add data-field with the field ID, and use the default text of\n *    the dynamic pill as innerText.\n * 2. Iterate the fields (paramater) and replace the dynamic pills with the values.\n * 3. Add wrapper around text nodes (plain parts)\n *\n * @param {Object} options                 The options\n * @param {String} options.dynamicSentence The dynamic sentence\n * @param {Object} options.fields          The fields\n * @param {Object} options.itemID          The ID of the action where we're parsing these tokens\n * @return {Node}                          The node with the dynamic sentence\n */\nconst parseDynamicSentence = ( { dynamicSentence = '', fields = {}, itemID } ) => {\n\t// Create wrapper\n\tconst $wrapper = document.createElement( 'span' );\n\t$wrapper.classList.add( 'uap-dynamic-sentence' );\n\t$wrapper.setAttribute( 'dir', 'auto' );\n\n\t// Regex to get the dynamic pills\n\tconst pillsRegex = new RegExp( /\\{\\{(.*?)(?:\\:(.*?)(?:\\:(.*?))?)?\\}\\}/gm );\n\n\t// Create instance of Tokens. We will use it to parse tokens in the dynamic sentence\n\tconst tokens = new Tokens();\n\n\t/**\n\t * 1. Look for all the dynamic pills using a regular expression. Iterate them and\n\t * replace them with <span>s. Add data-field with the field ID, and use the default\n\t * text of the dynamic pill as innerText.\n\t *\n\t * @param {String} match          The full match. Ex: {{a quiz:QUIZ:ALL_FIELDS}}\n\t * @param {String} defaultText    The default text, used if there isn't a field. Ex: \"a quiz\"\n\t * @param {String} fieldId        The field ID. Ex: QUIZ\n\t * @param {String} [fieldGroupId] The field group ID. OPTIONAL. Ex: ALL_FIELDS\n\t * @return {String}                The <span> with the dynamic pill data\n\t */\n\tdynamicSentence = dynamicSentence.replaceAll( pillsRegex, ( match, defaultText, fieldId, fieldGroupId ) => {\n\t\t// Create dynamic pill\n\t\t// Even though we will return a string, it helps to the readability of the code\n\t\tconst $dynamicPill = document.createElement( 'span' );\n\n\t\t// Add \"filled class\"\n\t\t$dynamicPill.classList.add( 'uap-dynamic-sentence-pill' );\n\n\t\t// Add the default text as content\n\t\t$dynamicPill.innerText = defaultText;\n\n\t\t// Check if has a field ID\n\t\tif ( ! isEmpty( fieldId ) ) {\n\t\t\t// Add the field ID\n\t\t\t$dynamicPill.setAttribute( 'data-field', fieldId );\n\t\t}\n\n\t\t// Check if it has a field group ID\n\t\tif ( ! isEmpty( fieldGroupId ) ) {\n\t\t\t// Add the field group ID\n\t\t\t$dynamicPill.setAttribute( 'data-field-group', fieldGroupId );\n\t\t}\n\n\t\t// Return the Node as string\n\t\treturn $dynamicPill.outerHTML;\n\t} );\n\n\t// Add it to the wrapper\n\t$wrapper.innerHTML = dynamicSentence;\n\n\t/**\n\t * 2. Iterate the fields (paramater) and replace the dynamic pills with the values.\n\t *\n\t * @param {String}      fieldId    The field ID\n\t * @param {String|Node} fieldValue The field value\n\t * @return {undefined}\n\t */\n\tObject.entries( fields ).forEach( ( [ fieldId, fieldValue ] ) => {\n\t\t// Find the dynamic pill using the field ID\n\t\tconst $dynamicPill = $wrapper.querySelector( `span[data-field=\"${ fieldId }\"]` );\n\n\t\t// Check if there is a \"readable\" field value available\n\t\t// This is used for selects. The field value is the \"value\", while the\n\t\t// readable value is the option \"text\"\n\t\tif ( isDefined( fields[ `${ fieldId }_readable` ] ) ) {\n\t\t\t// Override the field value\n\t\t\tfieldValue = fields[ `${ fieldId }_readable` ];\n\t\t}\n\n\t\t// Check if the pill exists\n\t\tif ( isDefined( $dynamicPill ) ) {\n\t\t\t// Empty content\n\t\t\t$dynamicPill.innerText = '';\n\n\t\t\t// Check if we have to add the label\n\t\t\tif ( isDefined( fields[ `${ fieldId }_label` ] ) ) {\n\t\t\t\t$dynamicPill.insertAdjacentHTML( 'afterBegin', `<span class=\"uap-dynamic-sentence-pill-label\">${ fields[ `${ fieldId }_label` ] }: </span>` );\n\t\t\t}\n\n\t\t\t// Add \"filled class\"\n\t\t\t$dynamicPill.classList.add( 'uap-dynamic-sentence-pill--filled' );\n\n\t\t\t// Replace the content with the field value\n\t\t\t// First, try to add it as a Node\n\t\t\ttry {\n\t\t\t\t// Add element\n\t\t\t\t$dynamicPill.appendChild( fieldValue );\n\t\t\t} catch ( e ) {\n\t\t\t\t// Verify that the field value is not empty\n\t\t\t\tif ( ! isEmpty( fieldValue ) ) {\n\t\t\t\t\t// If it fails, it's probably because this is a string\n\t\t\t\t\t// Add it as string, but try to parse the tokens (if there is any)\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Parse tokens. This will return a Node\n\t\t\t\t\t\tconst $stringWithTokens = tokens.renderTextWithTokens( fieldValue, {\n\t\t\t\t\t\t\titemID: itemID\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Append string with tokens\n\t\t\t\t\t\t$dynamicPill.appendChild( $stringWithTokens );\n\t\t\t\t\t} catch ( ex ) {\n\t\t\t\t\t\t// Well, that also failed :) Let's just add it as a plain string\n\t\t\t\t\t\t$dynamicPill.insertAdjacentHTML( 'beforeEnd', fieldValue );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Add text to let the user know the string was added, but it's just empty\n\t\t\t\t\t$dynamicPill.insertAdjacentHTML( 'beforeEnd', `<em class=\"uap-empty-value\">${ UncannyAutomator.i18n.emptyValue }</em>` );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} );\n\n\t/**\n\t * 3. Add wrapper around plain text\n\t */\n\t$wrapper.childNodes.forEach( ( $sentencePart ) => {\n\t\t// Check if it's a text node\n\t\tif ( $sentencePart.nodeType !== Node.TEXT_NODE ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Create wrapper\n\t\tconst $plainWrapper = document.createElement( 'span' );\n\t\t$plainWrapper.classList.add( 'uap-dynamic-sentence-plain' );\n\n\t\t// Insert plainWrapper before the text node\n\t\t$wrapper.insertBefore( $plainWrapper, $sentencePart );\n\n\t\t// Wrap the text node\n\t\t$plainWrapper.appendChild( $sentencePart );\n\t} );\n\n\treturn $wrapper;\n};\n\nexport default parseDynamicSentence;\n","import $ from 'jquery';\n\nimport {\n\titemsObject,\n\tisString,\n\tinArray,\n\tgetDOMElements,\n\trestCall\n} from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined,\n\tisEmpty\n} = _uo.utility;\n\nimport {\n\tfieldTypes as validFieldTypes\n} from '@builder/config/valid-data';\n\nimport Publish from '../publish/publish.js';\n\nimport Tokens from '../tokens';\n\n/**\n * Validate form using the global object UncannyAutomator.recipe, which contains\n * all the recipe items \n *\n * @since 0.3\n *\n * @return {object}\n * @return {boolean}  response.canSubmit - TRUE if the recipe is valid\n */\n\nexport function validateRecipe(){\n\t// Set response object\n\tlet response = {\n\t\tcanSubmit: UncannyAutomator.recipe.isValid\n\t}\n\t\n\t// Check if the recipe is not valid\n\tif ( ! UncannyAutomator.recipe.isValid ){\n\n\t\t// Enable error mode\n\t\t// UncannyAutomator.recipe.errorMode = true;\n\n\t\t// Iterate each item\n\t\t$.each( UncannyAutomator.recipe.items, function( itemID, itemData ){\n\n\t\t\t// Validate each item\n\t\t\tvalidateItem( itemID );\n\t\t});\n\t}\n\n\treturn response;\n}\n\n/**\n * Validate item using the itemID\n *\n * @since 0.4\n *\n * @param  {int} \t  itemID - ID of the item\n * @param  {object}   [$item] - jQuery object of the item. Necessary only if itemID is undefined\n *\n * @return {object}\n * @return {boolean}  response.isValid - TRUE if the item is valid\n */\n\nexport function validateItem( itemID, $item = null ){\n\t// Create response object\n\tlet response = {\n\t\tisValid: false\n\t}\n\n\t// Check if the itemID is defined\n\tif ( isDefined( itemID ) ){\n\t\t// Get item\n\t\tlet item = UncannyAutomator.recipe.items[ itemID ];\n\n\t\t// Check if the item exists, otherwise do nothing, isValid will be false (because of the default value)\n\t\tif ( ! item.isMissing && ! isEmpty( item ) ){\n\t\t\t// Save result\n\t\t\tresponse.isValid = item.isValid;\n\n\t\t\t// Check if this item is invalid\n\t\t\tif ( ! item.isValid ){\n\n\t\t\t\t// Get DOM element of the item\n\t\t\t\tlet itemElement = getDOMElements( 'item', {\n\t\t\t\t\tid: itemID\n\t\t\t\t}).item;\n\n\t\t\t\t// Add CSS class to it\n\t\t\t\titemElement.addClass( 'item--error' );\n\n\t\t\t\t// Iterate each group of fields\n\t\t\t\t$.each( item.options, function( optionsGroupID, optionsGroupData ){\n\n\t\t\t\t\t// Check if a group of fields is invalid\n\t\t\t\t\tif ( ! optionsGroupData.isValid ){\n\n\t\t\t\t\t\t// Get DOM elements of the container with all the fields\n\t\t\t\t\t\tlet optionsGroupElements = getDOMElements( 'optionGroup', {\n\t\t\t\t\t\t\titemID: \titemID,\n\t\t\t\t\t\t\tgroupID: \toptionsGroupID\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Add error classes\n\t\t\t\t\t\toptionsGroupElements.tokenInSentence.addClass( 'item-title__token--error item-title__token--error-shake' );\n\t\t\t\t\t\toptionsGroupElements.fieldsContainer.addClass( 'item-options__group--error' );\n\t\t\t\t\t\toptionsGroupElements.optionsContainer.addClass( 'item-options--error' );\n\n\t\t\t\t\t\t// Remove \"shake\" class from tokenInSentence so the element can shake if the user clicks again\n\t\t\t\t\t\tsetTimeout( function(){\n\t\t\t\t\t\t\toptionsGroupElements.tokenInSentence.removeClass( 'item-title__variable--error-shake' );\n\t\t\t\t\t\t}, 1000 );\n\n\t\t\t\t\t\t// Show errors in the UI for each invalid field\n\t\t\t\t\t\tif ( isDefined( optionsGroupElements.optionsContainer ) ){\n\n\t\t\t\t\t\t\t// Validate the form of the group of fields. Check validateItemFields comments for more information.\n\t\t\t\t\t\t\tvalidateItemFields( optionsGroupElements.optionsContainer );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\t// ID is not defined, the item doesn't have an ID yet\n\t\tresponse.isValid = false;\n\n\t\t// Check if $item is defined \n\t\tif ( ! isEmpty( $item ) ){\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\tconsole.error( 'Neither itemID nor the $item are defined. One of them must be defined.' );\t\n\t\t}\n\t}\n\n\t// Return response\n\treturn response;\n}\n\n/**\n * Validate form using a DOM element that contains the fields\n * \n * @since 0.1\n *\n * @param {object}\t form - jQuery DOM element that contains the fields\n *\n * @return {object}\n * @return {boolean}  response.isValid - TRUE if the form is valid\n */\n\nexport function validateItemFields( form, validateChildren = false ){\n\t// Create response object\n\tlet response = {\n\t\tisValid: false\n\t}\n\n\t// Get all fields, input, textareas and selects\n\tlet fields = form.find( `\n\t\tinput.form-element__input[data-is-child-field=\"${ validateChildren ? 'true' : 'false' }\"],\n\t\ttextarea.form-element__textarea[data-is-child-field=\"${ validateChildren ? 'true' : 'false' }\"],\n\t\tselect.form-element__select[data-is-child-field=\"${ validateChildren ? 'true' : 'false' }\"],\n\t\t.form-checkbox input,\n\t\t.form-radio` );\n\n\t// Set the variable that will be used to decide if the form is valid or not\n\t// It's true by default, but it will changed to false if at least one field has an error\n\tlet isFormValid = true;\n\n\t// Go through all fields\n\tfields.each(function(){\n\t\t// Save $(this) jQuery element (from the each loop) in the field variable\n\t\t// form-element__input, form-element__textarea or form-element__select\n\t\tlet field = $( this );\n\n\t\t// Get field type\n\t\tlet fieldType = field.data( 'type' );\n\n\t\t// Define field data\n\t\tlet fieldData = {}\n\n\t\t// Check if it's a radio\n\t\tif ( field.hasClass( 'form-radio' ) ){\n\t\t\t// Overwrite field type\n\t\t\tfieldType = 'radio';\n\n\t\t\t// Get one of the radios\n\t\t\tlet radioInput     = field.find( 'input' ).first();\n\n\t\t\t// Get value of the selected radio (if there is any)\n\t\t\tlet selectedRadio  = field.find( 'input:checked' ),\n\t\t\t\tradioValue     = selectedRadio.length > 0 ? selectedRadio.val() : '';\n\n\t\t\t// Create object with the data that will be used in the verification process\n\t\t\tfieldData = {\n\t\t\t\tfield_type: \t\t 'radio',\n\t\t\t\tvalue: \t\t\t\t radioValue,\n\t\t\t\tattributes: {\n\t\t\t\t\tsupportsTokens:  radioInput.data( 'supportstokens' ),\n\t\t\t\t\trequired: \t\t radioInput.data( 'required' ),\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Check if it's a select\n\t\telse if ( field.hasClass( 'form-element__select' ) ){\n\t\t\tfieldData = {\n\t\t\t\tfield_type: \t\t 'select',\n\t\t\t\tvalue: \t\t\t\t field.val(),\n\t\t\t\tattributes: {\n\t\t\t\t\tsupportsTokens:      field.data( 'supportstokens' ),\n\t\t\t\t\trequired: \t\t     field.data( 'required' ),\n\t\t\t\t\tsupportsCustomValue: field.data( 'supports-custom-value' ),\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// Create object with the data that will be used in the verification process\n\t\t\tfieldData = {\n\t\t\t\tfield_type: \t\t field.data( 'type' ),\n\t\t\t\tvalue: \t\t\t\t field.val(),\n\t\t\t\tattributes: {\n\t\t\t\t\tsupportsTokens:  field.data( 'supportstokens' ),\n\t\t\t\t\trequired: \t\t field.data( 'required' ),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if it's a textarea, and check if it supports full-page editing\n\t\t\tif ( fieldData.field_type === 'textarea' ) {\n\t\t\t\tfieldData.attributes.supportsFullPageEditing = field.data( 'supportsfullpageediting' );\n\t\t\t}\n\n\t\t\t// Check if it's an int or float and has a min/max number defined\n\t\t\tif ( [ 'int', 'float' ].includes( fieldData.field_type ) ) {\n\t\t\t\tif ( ! isEmpty( field.data( 'min' ) ) && ! isNaN( parseFloat( field.data( 'min' ) ) ) ) {\n\t\t\t\t\tfieldData.attributes.minNumber = parseFloat( field.data( 'min' ) );\n\t\t\t\t}\n\n\t\t\t\tif ( ! isEmpty( field.data( 'max' ) ) && ! isNaN( parseFloat( field.data( 'max' ) ) ) ) {\n\t\t\t\t\tfieldData.attributes.maxNumber = parseFloat( field.data( 'max' ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's a checkbox and overwrite the value\n\t\tif ( fieldData.field_type == 'checkbox' ){\n\t\t\tfieldData.value = field.is( ':checked' );\n\t\t}\n\n\t\t// Check if the field is required, the value is undefined but has a default value in the settings\n\t\t/*\n\t\tif ( fieldData.attributes.required && ! isDefined( fieldData.value ) && isDefined( fieldData.defaultValue ) ){\n\t\t\t// Set default value as value\n\t\t\tfieldData.value = fieldData.attributes.defaultValue;\n\t\t}\n\t\t*/\n\n\t\t// Validate form. Read validateField comments for more information\n\t\tlet fieldValidation = validateField( field, fieldData.field_type, fieldData.value, fieldData.attributes );\n\n\t\t// Check if the field is invalid\n\t\tif ( ! fieldValidation.isValid ){\n\t\t\tisFormValid = false;\n\n\t\t\t// Add error class to form container\n\t\t\tform.addClass( 'item-options--error' );\n\t\t}\n\t});\n\n\tresponse.isValid = isFormValid;\n\n\treturn response;\n}\n\n/**\n * Validates the value of a field.\n * Supports all field types\n *\n * Only supports one token. The object is prepared to support more than one, we only have to remove the if statement\n * that checks the number of tokens per string. This functionality will be change in another version\n *\n * @since 0.1\n *\n * @param {object} \t\tfield - jQuery object of the field used to add CSS classes. Use null if you just want to get the validation response\n * @param {string} \t\tfieldType - A valid field type\n * @param {string} \t\tvalue - The value of the field.\n * @param {object}   \tattributes - Object with some of the field attributes\n * @param {boolean} \tattributes.supportsTokens - TRUE if the field should support tokens\n * @param {boolean} \tattributes.required - TRUE if the field is required\n * @param {object} \t\t[customValidationFunction] Just in case you want to add a custom validation function. Must return an object with two properties { isValid: {boolean}, message: {string} }\n *\n * @return {object}\n * @return {boolean} \tresponse.isValid - TRUE if the field is valid\n * @return {string}  \tresponse.message - Message showing the reason the field is invalid\n */\n\nexport function validateField( field, fieldType, value, attributes = { supportsTokens: false, required: false, supportsFullPageEditing: false }, customValidationFunction ){\n\t// Create response object\n\tlet response = {\n\t\tisValid: false,\n\t\tmessage: '',\n\t}\n\n\t// Define valid field types\n\tlet fieldTypes = validFieldTypes;\n\n\t// Set messages\n\tlet messages = {\n\t\tselect: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.select.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.select.invalid,\n\t\t},\n\t\ttext: {\n\t\t\tempty:   UncannyAutomator.i18n.validation.field.text.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.text.invalid,\n\t\t},\n\t\ttextarea: {\n\t\t\tempty:   UncannyAutomator.i18n.validation.field.textarea.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.textarea.invalid,\n\t\t},\n\t\tint: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.int.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.int.invalid,\n\t\t\tmultipleTokens: UncannyAutomator.i18n.validation.field.int.multipleTokens,\n\t\t\tminValue: UncannyAutomator.i18n.validation.field.int.minValue,\n\t\t\tmaxValue: UncannyAutomator.i18n.validation.field.int.maxValue,\n\t\t},\n\t\tfloat: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.float.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.float.invalid,\n\t\t\tmultipleTokens: UncannyAutomator.i18n.validation.field.float.multipleTokens,\n\t\t\tminValue: UncannyAutomator.i18n.validation.field.float.minValue,\n\t\t\tmaxValue: UncannyAutomator.i18n.validation.field.float.maxValue,\n\t\t},\n\t\temail: {\n\t\t\tempty:   UncannyAutomator.i18n.validation.field.email.empty,\n\t\t\tsingle:  {\n\t\t\t\tinvalid: UncannyAutomator.i18n.validation.field.email.single.invalid,\n\t\t\t\tmultipleTokens: UncannyAutomator.i18n.validation.field.email.single.multipleTokens,\n\t\t\t},\n\t\t\tmultiple: {\n\t\t\t\tinvalid: UncannyAutomator.i18n.validation.field.email.multiple.invalid,\n\t\t\t\tmultipleTokens: UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens,\n\t\t\t}\t\n\t\t},\n\t\turl: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.url.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.url.invalid,\n\t\t},\n\t\tcheckbox: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.checkbox.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.checkbox.invalid,\n\t\t},\n\t\tradio: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.radio.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.radio.invalid,\n\t\t},\n\t\tdate: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.date.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.date.invalid,\n\t\t},\n\t\ttime: {\n\t\t\tempty: \t UncannyAutomator.i18n.validation.field.time.empty,\n\t\t\tinvalid: UncannyAutomator.i18n.validation.field.time.invalid,\n\t\t},\n\t\tinvalidType: UncannyAutomator.i18n.validation.field.invalidType,\n\t}\n\n\t// Fix TinyMCE issue, where adding content dynamically doesn't update the textarea value\n\ttry {\n\t\tif ( fieldType == 'textarea' && ! isEmpty( field ) && field.is( ':not(:visible)' ) ){\n\t\t\tlet $formElement = field.closest( '.form-element' );\n\n\t\t\t$formElement.find( '.switch-html' )\n\t\t\t\t.trigger( 'click' );\n\n\t\t\tvalue = field.val();\n\n\t\t\t$formElement.find( '.switch-tmce' )\n\t\t\t\t.trigger( 'click' );\n\n\t\t}\n\t} catch ( e ){\n\t\t// Continue regardless of error\n\t\t\n\t\t// Output error if the developer mode is enabled\n\t\tif ( UncannyAutomator.dev.developerMode ){\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn( e );\n\t\t}\n\t}\n\n\t// Check if it's a valid field type\n\tif ( inArray( fieldType, fieldTypes ) ){\n\t\t// Check if it's a checkbox and sanitaze the current value\n\t\tif ( fieldType == 'checkbox' && ! isEmpty( value ) ){\n\t\t\t// Check if the value is \"true\" or \"false\"\n\t\t\tif ( [ 'true', 'false' ].includes( value ) ){\n\t\t\t\t// Make it a boolean\n\t\t\t\tvalue = value == 'true' ? true : false;\n\t\t\t}\n\t\t}\n\n\t\t// Check if it's a required field and it's empty.\n\t\t// Show \"empty\" error\n\t\tif ( attributes.required && ( isEmpty( value ) || fieldType == 'checkbox' && value === false ) ){\n\t\t\tresponse.message = messages[ fieldType ].empty;\n\t\t}\n\t\t// Check if it isn't a required field and it's empty.\n\t\t// We don't have to validate it\n\t\telse if ( ! attributes.required && isEmpty( value ) ){\n\t\t\tresponse.isValid = true;\n\t\t}\n\t\t// The field has a value\n\t\telse if ( value != '' ){\n\t\t\t// This variable will be used multiple times in the following code. Let's define it here.\n\t\t\tlet tokensInString;\n\n\t\t\t// Check what's our field type.\n\t\t\tswitch ( fieldType ){\n\n\t\t\t\tcase 'select':\n\t\t\t\t\tresponse.isValid = true; \n\n\t\t\t\t\t// Check if the value is a custom value, if so, validate it\n\t\t\t\t\tif ( attributes.supportsCustomValue && value == 'automator_custom_value' ){\n\t\t\t\t\t\t// Get the child field\n\t\t\t\t\t\tconst $childrenFields = field.closest( '.form-element' ).find( '.form-element-children' );\n\n\t\t\t\t\t\t// Check if we found it\n\t\t\t\t\t\tif ( $childrenFields.length == 1 ){\n\t\t\t\t\t\t\t// Validate it and pass the result to the parent\n\t\t\t\t\t\t\tresponse.isValid = validateItemFields( $childrenFields, true ).isValid;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( response.isValid && isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'text':\n\t\t\t\tcase 'textarea':\n\t\t\t\t\tresponse.isValid = true;\n\n\t\t\t\t\t// If it's a 1. [required] 2. [textarea] that 3. [suppors full-page editing], make sure it really has content\n\t\t\t\t\t// Because the field adds an HTML structure by default that makes it impossible for the JS to detect if it's empty\n\t\t\t\t\tif (\n\t\t\t\t\t\t// 1. [required]\n\t\t\t\t\t\tattributes.required &&\n\t\t\t\t\t\t// 2. [textarea]\n\t\t\t\t\t\tfieldType === 'textarea' &&\n\t\t\t\t\t\t// 3. [supports full-page editing]\n\t\t\t\t\t\tattributes.supportsFullPageEditing\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Create a temporary element where we're going to add the value, to then remove the HTML\n\t\t\t\t\t\tconst $tempWrapper = document.createElement( 'div' );\n\t\t\t\t\t\t$tempWrapper.innerHTML = value;\n\n\t\t\t\t\t\t// Get the field value, without HTML and spaces\n\t\t\t\t\t\tconst fieldValueNoHTML = $tempWrapper.innerText.trim();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( isEmpty( fieldValueNoHTML ) ) {\n\t\t\t\t\t\t\tresponse.isValid = false;\n\t\t\t\t\t\t\tresponse.message = messages[ fieldType ].empty;\n\n\t\t\t\t\t\t\t// Stop here\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'int':\n\t\t\t\t\t// Regular expression to check if it's a valid int number\n\t\t\t\t\t// https://regex101.com/r/Gz3RvN/4\n\t\t\t\t\tlet int_regex = new RegExp(/^([+-]?[1-9]\\d*|0)$/gm);\n\n\t\t\t\t\t// Get tokens. Read getTokensFromString comments for more information\n\t\t\t\t\ttokensInString = getTokensFromString( value );\n\n\t\t\t\t\t// Create variable to simulate int (replace tokens)\n\t\t\t\t\tlet simulate_int;\n\n\t\t\t\t\t// Check if the string has tokens (and if it should support them)\n\t\t\t\t\tif ( attributes.supportsTokens && tokensInString.hasTokens ){\n\t\t\t\t\t\t// Check if the string has only one token. As we said before, this can be easily changed in future versions\n\t\t\t\t\t\tif ( tokensInString.tokens.length == 1 ){\n\t\t\t\t\t\t\t// If it has ONE token, and the field support it, then let's just make the data valid\n\t\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// We only support one token for now. Show multiple tokens error.\n\t\t\t\t\t\t\tresponse.message = messages.int.multipleTokens;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Doesn't have tokens, so we only have to perform the regular expression test\n\t\t\t\t\t\tif ( int_regex.test( value ) ){\n\t\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Show \"invalid\" message\n\t\t\t\t\t\t\tresponse.message = messages.int.invalid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Convert the value to integer\n\t\t\t\t\t\tvalue = parseInt( value );\n\n\t\t\t\t\t\t// Determine if a minimum value has been defined, and if so, determine if the value is less than the minimum\n\t\t\t\t\t\tif ( ! isEmpty( attributes.minNumber ) && value < parseFloat( attributes.minNumber ) ) {\n\t\t\t\t\t\t\tresponse.isValid = false;\n\t\t\t\t\t\t\tresponse.message = sprintf( messages.int.minValue, attributes.minNumber );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Determine if a maximum value has been defined, and if so, determine if the value is more than the maximum\n\t\t\t\t\t\tif ( ! isEmpty( attributes.maxNumber ) && value > parseFloat( attributes.maxNumber ) ) {\n\t\t\t\t\t\t\tresponse.isValid = false;\n\t\t\t\t\t\t\tresponse.message = sprintf( messages.int.maxValue, attributes.maxNumber );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Custom validation. Check if it's valid, if it isn't then do nothing\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( response.isValid && isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value, simulate_int );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'float':\n\t\t\t\t\t// Regular expression to check if it's a valid float number\n\t\t\t\t\t// https://regex101.com/r/KDLmre/2/\n\t\t\t\t\tlet float_regex = new RegExp(/^[+-]?((\\d+(\\.|\\,)?\\d*)|(\\.\\d+))$/gm);\n\n\t\t\t\t\t// Get tokens. Read getTokensFromString comments for more information\n\t\t\t\t\ttokensInString = getTokensFromString( value );\n\n\t\t\t\t\t// Create variable to simulate the float (replace tokens)\n\t\t\t\t\tlet simulate_float;\n\n\t\t\t\t\t// Check if the string has tokens (and if it should support them)\n\t\t\t\t\tif ( attributes.supportsTokens && tokensInString.hasTokens ){\n\t\t\t\t\t\t// Check if the string has only one token. As we said before, this can be easily changed in future versions\n\t\t\t\t\t\tif ( tokensInString.tokens.length == 1 ){\n\t\t\t\t\t\t\t// If it has ONE token, and the field support it, then let's just make the data valid\n\t\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// We only support one token for now. Show multiple tokens error.\n\t\t\t\t\t\t\tresponse.message = messages.float.multipleTokens;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Doesn't have tokens, so we only have to perform the regular expression test\n\t\t\t\t\t\tif ( float_regex.test( value ) ){\n\t\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Show \"invalid\" message\n\t\t\t\t\t\t\tresponse.message = messages.float.invalid;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvalue = parseFloat( value );\n\n\t\t\t\t\t\t// Determine if a minimum value has been defined, and if so, determine if the value is less than the minimum\n\t\t\t\t\t\tif ( ! isEmpty( attributes.minNumber ) && value < parseFloat( attributes.minNumber ) ) {\n\t\t\t\t\t\t\tresponse.isValid = false;\n\t\t\t\t\t\t\tresponse.message = sprintf( messages.int.minValue, attributes.minNumber );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Determine if a maximum value has been defined, and if so, determine if the value is more than the maximum\n\t\t\t\t\t\tif ( ! isEmpty( attributes.maxNumber ) && value > parseFloat( attributes.maxNumber ) ) {\n\t\t\t\t\t\t\tresponse.isValid = false;\n\t\t\t\t\t\t\tresponse.message = sprintf( messages.int.maxValue, attributes.maxNumber );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Custom validation. Check if it's valid, if it isn't then do nothing\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( response.isValid && isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value, simulate_float );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'email':\n\t\t\t\t\t// Regular expression to check if it's a valid email address\n\t\t\t\t\t// https://regex101.com/r/ThUWEz/1/\n\t\t\t\t\tlet email_regex = new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/);\n\n\t\t\t\t\t// Create array with all the emails we have to validate\n\t\t\t\t\t// We're going to check if the user is trying to validate more than one searching for a comma in the input value\n\t\t\t\t\t// In that case, we're going to split the value and get an array with emails, otherwise we're going to create an array with one element: the input value\n\t\t\t\t\t// Doing that we can use the same code for both cases\n\t\t\t\t\tlet emails = [];\n\n\t\t\t\t\t// Check if the user wants to validate multiple emails\n\t\t\t\t\tif ( value.includes( ',' ) ){\n\t\t\t\t\t\temails = value.split( ',' );\n\n\t\t\t\t\t\t// Remove whitespace from both sides of each email, just in case the user wrote \", \" or \" ,\" instead of \",\"\n\t\t\t\t\t\t$.each( emails, function( index, email ){\n\t\t\t\t\t\t\temails[ index ] = email.trim();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Add value, but remove whitespace from both sides before\n\t\t\t\t\t\temails.push( value.trim() );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Get tokens. Read getTokensFromString comments for more information\n\t\t\t\t\ttokensInString = getTokensFromString( value );\n\n\t\t\t\t\t// Create variable to simulate the email (replace tokens)\n\t\t\t\t\tlet simulate_email;\n\t\t\t\t\t\n\t\t\t\t\t// We're going to use this variable to validate all the emails in a loop. TRUE by default, FALSE if at least one of them fails.\n\t\t\t\t\tlet allEmailsAreValid = true;\n\n\t\t\t\t\t// Create variable used to know if there is more than one email\n\t\t\t\t\tlet hasMultipleEmails = emails.length > 1;\n\n\t\t\t\t\t// Check if the string has tokens\n\t\t\t\t\tif ( attributes.supportsTokens && tokensInString.hasTokens ){\n\t\t\t\t\t\t// Create variable to check if the error was due to multiple variables\n\t\t\t\t\t\tlet hasMultipleVariables = false;\n\n\t\t\t\t\t\t// Iterate each email\n\t\t\t\t\t\t$.each( emails, function( index, email ){\n\t\t\t\t\t\t\t// Get tokens from this specific email\n\t\t\t\t\t\t\ttokensInString = getTokensFromString( email );\n\n\t\t\t\t\t\t\t// Check if the string has only one token. As we said before, this can be easily changed in future versions\n\t\t\t\t\t\t\tif ( tokensInString.tokens.length <= 1 ){\n\t\t\t\t\t\t\t\t// If it has ONE token, and the field support it, then let's just make the data valid\n\t\t\t\t\t\t\t\t// In this case, we have to do nothing\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Change value of hasMultipleVariables. We're going to use this to show a \"Multiple Tokens\" error\n\t\t\t\t\t\t\t\thasMultipleVariables = true;\n\n\t\t\t\t\t\t\t\t// Return false, we don't have to continue checking\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Check result of iteration\n\t\t\t\t\t\tif ( allEmailsAreValid && ! hasMultipleVariables ){\n\t\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif ( hasMultipleVariables ){\n\t\t\t\t\t\t\t\t// We only support one token for now. Show multiple tokens error.\n\t\t\t\t\t\t\t\tif ( hasMultipleEmails ){\n\t\t\t\t\t\t\t\t\tresponse.message = messages.email.multiple.multipleTokens;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tresponse.message = messages.email.single.multipleTokens;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Show \"invalid\" message\n\t\t\t\t\t\t\t\tif ( hasMultipleEmails ){\n\t\t\t\t\t\t\t\t\tresponse.message = messages.email.multiple.invalid;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tresponse.message = messages.email.single.invalid;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Doesn't have tokens, so we only have to perform the regular expression test in each email\n\t\t\t\t\t\t$.each( emails, function( index, email ){\n\t\t\t\t\t\t\t// Do regex\n\t\t\t\t\t\t\tif ( ! email_regex.test( email ) ){\n\t\t\t\t\t\t\t\t// If one is valid, all are invalid\n\t\t\t\t\t\t\t\tallEmailsAreValid = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// Check result of iteration\n\t\t\t\t\t\tif ( allEmailsAreValid ){\n\t\t\t\t\t\t\tresponse.isValid = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t// Show \"invalid\" message\n\t\t\t\t\t\t\tif ( hasMultipleEmails ){\n\t\t\t\t\t\t\t\tresponse.message = messages.email.multiple.invalid;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tresponse.message = messages.email.single.invalid;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Custom validation. Check if it's valid, if it isn't then do nothing\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( response.isValid && isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value, simulate_email );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'url':\n\t\t\t\t\t// Make the URL valid\n\t\t\t\t\tresponse.isValid = true;\n\n\t\t\t\t\t// Custom validation. Check if it's valid, if it isn't then do nothing\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( response.isValid && isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\tresponse.isValid = true;\n\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\t\tresponse.isValid = true;\n\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t\n\t\t\t\t// TODO validation\n\t\t\t\tcase 'date':\n\t\t\t\t\tresponse.isValid = true;\n\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO validation\n\t\t\t\tcase 'time':\n\t\t\t\t\tresponse.isValid = true;\n\n\t\t\t\t\t// Check if we have to do a custom validation\n\t\t\t\t\tif ( isDefined( customValidationFunction ) ){\n\t\t\t\t\t\t// Do custom validation\n\t\t\t\t\t\tlet customValidation = customValidationFunction( value );\n\t\t\t\t\t\t// Check if it's valid\n\t\t\t\t\t\tresponse.isValid = customValidation.isValid;\n\n\t\t\t\t\t\t// If it isn't then add message\n\t\t\t\t\t\tif ( ! customValidation.isValid ){\n\t\t\t\t\t\t\tresponse.message = customValidation.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// The field type doesn't match\n\t\t\t\t\tresponse.isValid = false;\n\t\t\t\t\tresponse.message = '';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\tresponse.message = messages[ 'invalidType' ];\n\t}\n\n\t// Add CSS classes to elements showing or hiding the error state\n\t// .form-element will have form-element--success or form-element--error classes\n\t// The message will be shown in the .form-element__error element\n\tif ( ! isEmpty( field ) ){\n\t\tlet $container = field.closest( '.form-element' );\n\t\tlet $error_container = $container.find( '.form-element__error' ).filter(function(){\n\t\t\treturn $( this ).closest( '.form-element' ).is( $container );\n\t\t});\n\n\t\tif ( ! response.isValid ){\n\t\t\t$container.removeClass( 'form-element--success' );\n\t\t\t$container.addClass( 'form-element--error' );\n\t\t}\n\t\telse {\n\t\t\t$container.removeClass( 'form-element--error' );\n\t\t\t$container.addClass( 'form-element--success' );\n\t\t}\n\n\t\tif ( response.message != '' ){\n\t\t\t$error_container.addClass( 'form-element__error--show' );\n\t\t\t$error_container.text( response.message );\n\t\t}\n\t\telse {\n\t\t\t$error_container.removeClass( 'form-element__error--show' );\n\t\t\t$error_container.text('');\n\t\t}\n\n\t}\n\n\treturn response;\n}\n\n/**\n * Get all the valid tokens from a string.\n * It compares the tokens in the string with the valid tokens in the system and only returns the valid ones.\n * Ex: \"Lorem ipsum {{valid_token}} dolor {{invalid_token}}\" returns tokens = [ 'valid_token' ]\n *\n * @since 0.1\n *\n * @param  {string} \tstring - A normal string with tokens (or not, response.tokens will return an empty array, that's all)\n *\n * @return {object}\n * @return {boolean} \tresponse.hasTokens - TRUE if there is at least one token\n * @return {array} \t\tresponse.tokens - Array with all the tokens on the string\n */\n\nexport function getTokensFromString( string ){\n\t// Create response object\n\tlet response = {\n\t\thasTokens: false,\n\t\ttokens: [],\n\t};\n\n\t// Regex to find text between double curly brackets\n\t// https://regex101.com/r/TecqPq/1\n\tlet regex = new RegExp(/\\{\\{(.*?)\\}\\}/gm);\n\t\n\t// Get all valid tokens. Read getTokens comments for more information\n\tlet allTokens = new Tokens( null, null, {\n\t\tincludeGroupName: false,\n\t\tincludeGroupIcon: false,\n\t}).tokens;\n\n\t// Check if the string attribute is defined\n\tif ( isDefined( string ) ){\n\t\t// Check if the string attribute is empty, in that case just ignore it\n\t\tif ( ! isEmpty( string ) ){\n\t\t\t// Check if the token is a string, if not, convert it\n\t\t\tif ( ! isString( string ) ){\n\t\t\t\tstring = string.toString();\n\t\t\t}\n\n\t\t\t// Create array that will store the tokens\n\t\t\tlet tokens = [];\n\n\t\t\t// Perform the regex check.\n\t\t\tlet match;\n\t\t\twhile ( ( match = regex.exec( string ) ) !== null ){\n\t\t\t\tlet matchedToken = match[ 1 ];\n\n\t\t\t\t// Check if the token is defined in the main tokens object, if it's is then it's a valid token and we have to add it to the tokens array\n\t\t\t\t$.each( allTokens, ( index, tokenGroup ) => {\n\t\t\t\t\t$.each( tokenGroup.tokens, ( index, token ) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif ( token.is( matchedToken ) ) {\n\t\t\t\t\t\t\t\ttokens.push( token );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\tif ( matchedToken == token.id ){\n\t\t\t\t\t\t\t\ttokens.push( token );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tresponse.tokens = tokens;\n\n\t\t\t// Check if the string has at least one token\n\t\t\tif ( response.tokens.length > 0 ){\n\t\t\t\tresponse.hasTokens = true;\n\t\t\t}\n\t\t}\n\t}\n\telse {\n\t\t// Show error in the console\n\t\tconsole.error( 'Undefined string attribute' );\n\t}\n\n\treturn response;\n}\n\n/**\n * Replace tokens in a string with dummy valid values to check if it's valid.\n * This is a simple way to validate if strings like {{site_url}} is a valid URL.\n * There is going to be another validation in the backend before doing actions\n * Ex: {{site_url}}/relative_path gets converted to https://example.com/relative_path\n *\n * @since 0.1\n *\n * @param  {string} string - A normal string with tokens (or not, the returned string will be the same, that's all)\n *\n * @return {string}\tThe new string with dummy data\n */\n\nexport function replaceTokensInString( string ){\n\t// Create variable that will hold the new string\n\t// The default value is the original string. We are going to check if the string has tokens,\n\t// and if it doesn't then we just return the same original string\n\tlet output = string;\n\n\t// Get tokens. Read getTokensFromString comments for more information\n\tlet tokensInString = getTokensFromString( string );\n\n\t// Check if this string has tokens\n\tif ( tokensInString.hasTokens ){\n\n\t\t// Iterate through each token\n\t\t$.each( tokensInString.tokens, function( index, token ){\n\t\t\t// Remember that each token has a token group id and a token id\n\t\t\t// For example, in {{WORDPRESS_1:order_id}} WORDPRESS_1 is the token group id and order_id is the token id\n\t\t\t// We have the token group id and the token id in different object properties, and we need to create the original (complete) token string again\n\n\t\t\t// Escape regex characters\n\t\t\tlet regexCondition = token.id.replace( /[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&' );\n\n\t\t\t// Create tokenCode variable, this will store the first part (token group id)\n\t\t\tregexCondition = `{{${ regexCondition }}}`;\n\n\t\t\t// Create regular expression to find all appearances of the token in the string\n\t\t\t// https://regex101.com/r/AWKmKp/1\n\t\t\tlet regex = new RegExp( regexCondition, 'g' );\n\n\t\t\t// Use regex to replace all appaerences with a dummy value\n\t\t\toutput = output.replace( regex, function( full_match, group ){\n\t\t\t\t// Get dummy value using the fieldType. Read getExampleValueByFieldType comments for more information\n\n\t\t\t\treturn getExampleValueByFieldType( token.type );\n\t\t\t});\n\t\t});\n\t}\n\n\treturn output;\n}\n\n/**\n * Get a dummy value given a fieldType\n * This function is useful for validation functions. We don't know in the recipe creating process if a token will store a correct value,\n * but we can use the token type to check if an email, url, int, float or other field type values are valid when they include a token.\n * For example, using this function we can know that {{site_url}}/profile/?user_id={{user_id}} is a valid url\n * \n * @since 0.1\n * \n * @param {string} \tfieldType - A valid field type\n *\n * @return {string} A valid dummy value for that field type\n */\n\nexport function getExampleValueByFieldType( fieldType ){\n\tlet value = '';\n\n\tswitch( fieldType ){\n\n\t\tcase 'select':\n\t\t\tvalue = 'option';\n\t\t\tbreak;\n\n\t\tcase 'text':\n\t\t\tvalue = 'lorem-ipsum';\n\t\t\tbreak;\n\n\t\tcase 'textarea':\n\t\t\tvalue = '<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum finibus eros nunc, et posuere libero posuere a. Nam viverra mattis finibus. Aenean purus lorem, mollis vel ullamcorper ac</p>';\n\t\t\tbreak;\n\n\t\tcase 'int':\n\t\t\tvalue = 1;\n\t\t\tbreak;\n\n\t\tcase 'float':\n\t\t\tvalue = 1.1;\n\t\t\tbreak;\n\n\t\tcase 'url':\n\t\t\tvalue = 'https://example.com';\n\t\t\tbreak;\n\n\t\tcase 'email':\n\t\t\tvalue = 'example@example.com';\n\t\t\tbreak;\n\n\t\tcase 'checkbox':\n\t\t\tvalue = true;\n\t\t\tbreak;\n\n\t\tcase 'radio':\n\t\t\tvalue = 'option';\n\t\t\tbreak;\n\n\t\tcase 'date':\n\t\t\tvalue = '2021-12-31';\n\t\t\tbreak;\n\n\t\tcase '':\n\t\t\tvalue = '01:00 PM';\n\t\t\tbreak;\n\t}\n\n\treturn value;\n}\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":host{display:block}.icon{display:flex;align-items:center;justify-content:center;position:relative}.icon img{object-fit:contain;object-position:center}.icon:not([plain]){background:#fff;border-radius:50%;border:1px solid var(--uap-field-border-color);box-shadow:var(--uap-box-shadow-small)}.icon:not([plain])[size=xsmall]{width:16px;height:16px}.icon:not([plain])[size=xsmall] img{width:12px;height:12px}.icon:not([plain]):not([size]),.icon:not([plain])[size=regular]{width:45px;height:45px}.icon:not([plain]):not([size]) img,.icon:not([plain])[size=regular] img{width:24px;height:24px}.icon[plain][size=xsmall]{width:16px;height:16px}.icon[plain][size=xsmall] img{width:16px;height:16px}.icon[plain]:not([size]),.icon[plain][size=regular]{width:45px;height:45px}.icon[plain]:not([size]) img,.icon[plain][size=regular] img{width:45px;height:45px}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":host{display:inline-block}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":host{display:block}.pill{padding:12px 0;position:relative;width:100%;display:flex;gap:10px;align-items:center;border-top:1px solid var(--uap-border-color-gray)}:host(:last-child) .pill{border-bottom:1px solid var(--uap-border-color-gray)}.pill-logo{flex:0 0 auto}.pill-sentence{flex:1 1 auto}.pill-actions{flex:0 0 auto;opacity:0;transition:opacity 150ms ease-in-out;display:inline-flex}.pill:hover .pill-actions,.pill--force-visible-actions .pill-actions{opacity:1}:host-context(.rtl) .pill-actions{padding-left:0;padding-right:15px}.pill-actions uo-button{--uap-button-style-custom-background: transparent}.pill-actions-remove{--uap-button-style-custom-color: var(--uap-color-red);--uap-button-style-custom-hover-color: var(--uap-color-red)}.pill--missing{background:var(--uap-alert-warning-background);margin-left:calc(var(--uap-builder-metabox-padding)*-1);margin-right:calc(var(--uap-builder-metabox-padding)*-1);padding-left:var(--uap-builder-metabox-padding);padding-right:var(--uap-builder-metabox-padding);--uap-alert-xsmall-padding: 0}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@keyframes placeHolderShimmer{0%{opacity:1}100%{opacity:.5}}:host{display:block}.header{padding:var(--uap-builder-metabox-padding) var(--uap-builder-metabox-padding) calc(var(--uap-builder-metabox-padding)/2) var(--uap-builder-metabox-padding);font-size:14px;font-weight:600;display:flex;align-items:center;gap:15px}.header-title{color:#000}.header-logic{flex:1 1 auto;display:flex;align-items:center;gap:6px}.header-logic-description{color:var(--uap-font-color-secondary-less-important)}:host-context(.rtl) .header-logic{justify-content:flex-end}.header-loading{position:relative;color:var(--uap-font-color);width:1em;height:1em;font-size:.9em;margin-left:4px}.header-loading::before{font-size:1em;font-family:\\\"Uncanny Automator Icons\\\" !important;speak:none;font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:var(--uap-icon-loading);color:var(--uap-font-color);position:absolute;top:50%;left:50%;animation:u5d7eiw-rotate 2s linear infinite}@keyframes u5d7eiw-rotate{from{transform:translate(-50%, -50%) rotate(0deg)}to{transform:translate(-50%, -50%) rotate(360deg)}}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":host{display:block}.set-data-dialog{display:flex;flex-direction:column;gap:15px}.set-data-dialog-box{font-size:var(--uap-font-size--body-small);line-height:var(--uap-line-height--body-small);border:1px solid var(--uap-field-border-color);border-radius:var(--uap-border-radius);padding:10px 15px}.set-data-dialog-description{font-size:var(--uap-font-size--body-xsmall);line-height:var(--uap-line-height--body-xsmall);color:var(--uap-font-color-secondary)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (i) {\n  return i[1];\n};","\"use strict\";\nif (typeof Object.assign !== \"function\") {\n    Object.assign = function (target) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!target) {\n            throw TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var _loop_1 = function (source) {\n            if (source) {\n                Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n            }\n        };\n        for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n            var source = args_1[_a];\n            _loop_1(source);\n        }\n        return target;\n    };\n}\n","/*\n * HTML5Sortable package\n * https://github.com/lukasoppermann/html5sortable\n *\n * Maintained by Lukas Oppermann <lukas@vea.re>\n *\n * Released under the MIT license.\n */\n'use strict';\n\n/**\n * Get or set data on element\n * @param {HTMLElement} element\n * @param {string} key\n * @param {any} value\n * @return {*}\n */\nfunction addData(element, key, value) {\n    if (value === undefined) {\n        return element && element.h5s && element.h5s.data && element.h5s.data[key];\n    }\n    else {\n        element.h5s = element.h5s || {};\n        element.h5s.data = element.h5s.data || {};\n        element.h5s.data[key] = value;\n    }\n}\n/**\n * Remove data from element\n * @param {HTMLElement} element\n */\nfunction removeData(element) {\n    if (element.h5s) {\n        delete element.h5s.data;\n    }\n}\n\n/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {NodeList|HTMLCollection|Array} nodes\n * @param {String} selector\n * @returns {Array}\n */\nvar filter = (function (nodes, selector) {\n    if (!(nodes instanceof NodeList || nodes instanceof HTMLCollection || nodes instanceof Array)) {\n        throw new Error('You must provide a nodeList/HTMLCollection/Array of elements to be filtered.');\n    }\n    if (typeof selector !== 'string') {\n        return Array.from(nodes);\n    }\n    return Array.from(nodes).filter(function (item) { return item.nodeType === 1 && item.matches(selector); });\n});\n\n/* eslint-env browser */\n/* eslint-disable no-use-before-define */\nvar stores = new Map();\n/* eslint-enable no-use-before-define */\n/**\n * Stores data & configurations per Sortable\n * @param {Object} config\n */\nvar Store = /** @class */ (function () {\n    function Store() {\n        this._config = new Map(); // eslint-disable-line no-undef\n        this._placeholder = undefined; // eslint-disable-line no-undef\n        this._data = new Map(); // eslint-disable-line no-undef\n    }\n    Object.defineProperty(Store.prototype, \"config\", {\n        /**\n         * get the configuration map of a class instance\n         * @method config\n         * @return {object}\n         */\n        get: function () {\n            // transform Map to object\n            var config = {};\n            this._config.forEach(function (value, key) {\n                config[key] = value;\n            });\n            // return object\n            return config;\n        },\n        /**\n         * set the configuration of a class instance\n         * @method config\n         * @param {object} config object of configurations\n         */\n        set: function (config) {\n            if (typeof config !== 'object') {\n                throw new Error('You must provide a valid configuration object to the config setter.');\n            }\n            // combine config with default\n            var mergedConfig = Object.assign({}, config);\n            // add config to map\n            this._config = new Map(Object.entries(mergedConfig));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * set individual configuration of a class instance\n     * @method setConfig\n     * @param  key valid configuration key\n     * @param  value any value\n     * @return void\n     */\n    Store.prototype.setConfig = function (key, value) {\n        if (!this._config.has(key)) {\n            throw new Error(\"Trying to set invalid configuration item: \" + key);\n        }\n        // set config\n        this._config.set(key, value);\n    };\n    /**\n     * get an individual configuration of a class instance\n     * @method getConfig\n     * @param  key valid configuration key\n     * @return any configuration value\n     */\n    Store.prototype.getConfig = function (key) {\n        if (!this._config.has(key)) {\n            throw new Error(\"Invalid configuration item requested: \" + key);\n        }\n        return this._config.get(key);\n    };\n    Object.defineProperty(Store.prototype, \"placeholder\", {\n        /**\n         * get the placeholder for a class instance\n         * @method placeholder\n         * @return {HTMLElement|null}\n         */\n        get: function () {\n            return this._placeholder;\n        },\n        /**\n         * set the placeholder for a class instance\n         * @method placeholder\n         * @param {HTMLElement} placeholder\n         * @return {void}\n         */\n        set: function (placeholder) {\n            if (!(placeholder instanceof HTMLElement) && placeholder !== null) {\n                throw new Error('A placeholder must be an html element or null.');\n            }\n            this._placeholder = placeholder;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * set an data entry\n     * @method setData\n     * @param {string} key\n     * @param {any} value\n     * @return {void}\n     */\n    Store.prototype.setData = function (key, value) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        this._data.set(key, value);\n    };\n    /**\n     * get an data entry\n     * @method getData\n     * @param {string} key an existing key\n     * @return {any}\n     */\n    Store.prototype.getData = function (key) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        return this._data.get(key);\n    };\n    /**\n     * delete an data entry\n     * @method deleteData\n     * @param {string} key an existing key\n     * @return {boolean}\n     */\n    Store.prototype.deleteData = function (key) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        return this._data.delete(key);\n    };\n    return Store;\n}());\n/**\n * @param {HTMLElement} sortableElement\n * @returns {Class: Store}\n */\nvar store = (function (sortableElement) {\n    // if sortableElement is wrong type\n    if (!(sortableElement instanceof HTMLElement)) {\n        throw new Error('Please provide a sortable to the store function.');\n    }\n    // create new instance if not avilable\n    if (!stores.has(sortableElement)) {\n        stores.set(sortableElement, new Store());\n    }\n    // return instance\n    return stores.get(sortableElement);\n});\n\n/**\n * @param {Array|HTMLElement} element\n * @param {Function} callback\n * @param {string} event\n */\nfunction addEventListener(element, eventName, callback) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            addEventListener(element[i], eventName, callback);\n        }\n        return;\n    }\n    element.addEventListener(eventName, callback);\n    store(element).setData(\"event\" + eventName, callback);\n}\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} eventName\n */\nfunction removeEventListener(element, eventName) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            removeEventListener(element[i], eventName);\n        }\n        return;\n    }\n    element.removeEventListener(eventName, store(element).getData(\"event\" + eventName));\n    store(element).deleteData(\"event\" + eventName);\n}\n\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction addAttribute(element, attribute, value) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            addAttribute(element[i], attribute, value);\n        }\n        return;\n    }\n    element.setAttribute(attribute, value);\n}\n/**\n * @param {Array|HTMLElement} element\n * @param {string} attribute\n */\nfunction removeAttribute(element, attribute) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            removeAttribute(element[i], attribute);\n        }\n        return;\n    }\n    element.removeAttribute(attribute);\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {Object}\n */\nvar offset = (function (element) {\n    if (!element.parentElement || element.getClientRects().length === 0) {\n        throw new Error('target element must be part of the dom');\n    }\n    var rect = element.getClientRects()[0];\n    return {\n        left: rect.left + window.pageXOffset,\n        right: rect.right + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n});\n\n/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {Function} func to debounce\n * @param {number} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nvar debounce = (function (func, wait) {\n    if (wait === void 0) { wait = 0; }\n    var timeout;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            func.apply(void 0, args);\n        }, wait);\n    };\n});\n\n/* eslint-env browser */\n/**\n * Get position of the element relatively to its sibling elements\n * @param {HTMLElement} element\n * @returns {number}\n */\nvar getIndex = (function (element, elementList) {\n    if (!(element instanceof HTMLElement) || !(elementList instanceof NodeList || elementList instanceof HTMLCollection || elementList instanceof Array)) {\n        throw new Error('You must provide an element and a list of elements.');\n    }\n    return Array.from(elementList).indexOf(element);\n});\n\n/* eslint-env browser */\n/**\n * Test whether element is in DOM\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nvar isInDom = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('Element is not a node element.');\n    }\n    return element.parentNode !== null;\n});\n\n/* eslint-env browser */\n/**\n * Insert node before or after target\n * @param {HTMLElement} referenceNode - reference element\n * @param {HTMLElement} newElement - element to be inserted\n * @param {String} position - insert before or after reference element\n */\nvar insertNode = function (referenceNode, newElement, position) {\n    if (!(referenceNode instanceof HTMLElement) || !(referenceNode.parentElement instanceof HTMLElement)) {\n        throw new Error('target and element must be a node');\n    }\n    referenceNode.parentElement.insertBefore(newElement, (position === 'before' ? referenceNode : referenceNode.nextElementSibling));\n};\n/**\n * Insert before target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nvar insertBefore = function (target, element) { return insertNode(target, element, 'before'); };\n/**\n * Insert after target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nvar insertAfter = function (target, element) { return insertNode(target, element, 'after'); };\n\n/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {HTMLElement} sortableContainer\n * @param {Function} customSerializer\n * @returns {Array}\n */\nvar serialize = (function (sortableContainer, customItemSerializer, customContainerSerializer) {\n    if (customItemSerializer === void 0) { customItemSerializer = function (serializedItem, sortableContainer) { return serializedItem; }; }\n    if (customContainerSerializer === void 0) { customContainerSerializer = function (serializedContainer) { return serializedContainer; }; }\n    // check for valid sortableContainer\n    if (!(sortableContainer instanceof HTMLElement) || !sortableContainer.isSortable === true) {\n        throw new Error('You need to provide a sortableContainer to be serialized.');\n    }\n    // check for valid serializers\n    if (typeof customItemSerializer !== 'function' || typeof customContainerSerializer !== 'function') {\n        throw new Error('You need to provide a valid serializer for items and the container.');\n    }\n    // get options\n    var options = addData(sortableContainer, 'opts');\n    var item = options.items;\n    // serialize container\n    var items = filter(sortableContainer.children, item);\n    var serializedItems = items.map(function (item) {\n        return {\n            parent: sortableContainer,\n            node: item,\n            html: item.outerHTML,\n            index: getIndex(item, items)\n        };\n    });\n    // serialize container\n    var container = {\n        node: sortableContainer,\n        itemCount: serializedItems.length\n    };\n    return {\n        container: customContainerSerializer(container),\n        items: serializedItems.map(function (item) { return customItemSerializer(item, sortableContainer); })\n    };\n});\n\n/* eslint-env browser */\n/**\n * create a placeholder element\n * @param {HTMLElement} sortableElement a single sortable\n * @param {string|undefined} placeholder a string representing an html element\n * @param {string} placeholderClasses a string representing the classes that should be added to the placeholder\n */\nvar makePlaceholder = (function (sortableElement, placeholder, placeholderClass) {\n    var _a;\n    if (placeholderClass === void 0) { placeholderClass = 'sortable-placeholder'; }\n    if (!(sortableElement instanceof HTMLElement)) {\n        throw new Error('You must provide a valid element as a sortable.');\n    }\n    // if placeholder is not an element\n    if (!(placeholder instanceof HTMLElement) && placeholder !== undefined) {\n        throw new Error('You must provide a valid element as a placeholder or set ot to undefined.');\n    }\n    // if no placeholder element is given\n    if (placeholder === undefined) {\n        if (['UL', 'OL'].includes(sortableElement.tagName)) {\n            placeholder = document.createElement('li');\n        }\n        else if (['TABLE', 'TBODY'].includes(sortableElement.tagName)) {\n            placeholder = document.createElement('tr');\n            // set colspan to always all rows, otherwise the item can only be dropped in first column\n            placeholder.innerHTML = '<td colspan=\"100\"></td>';\n        }\n        else {\n            placeholder = document.createElement('div');\n        }\n    }\n    // add classes to placeholder\n    if (typeof placeholderClass === 'string') {\n        (_a = placeholder.classList).add.apply(_a, placeholderClass.split(' '));\n    }\n    return placeholder;\n});\n\n/* eslint-env browser */\n/**\n * Get height of an element including padding\n * @param {HTMLElement} element an dom element\n */\nvar getElementHeight = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('You must provide a valid dom element');\n    }\n    // get calculated style of element\n    var style = window.getComputedStyle(element);\n    // get only height if element has box-sizing: border-box specified\n    if (style.getPropertyValue('box-sizing') === 'border-box') {\n        return parseInt(style.getPropertyValue('height'), 10);\n    }\n    // pick applicable properties, convert to int and reduce by adding\n    return ['height', 'padding-top', 'padding-bottom']\n        .map(function (key) {\n        var int = parseInt(style.getPropertyValue(key), 10);\n        return isNaN(int) ? 0 : int;\n    })\n        .reduce(function (sum, value) { return sum + value; });\n});\n\n/* eslint-env browser */\n/**\n * Get width of an element including padding\n * @param {HTMLElement} element an dom element\n */\nvar getElementWidth = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('You must provide a valid dom element');\n    }\n    // get calculated style of element\n    var style = window.getComputedStyle(element);\n    // pick applicable properties, convert to int and reduce by adding\n    return ['width', 'padding-left', 'padding-right']\n        .map(function (key) {\n        var int = parseInt(style.getPropertyValue(key), 10);\n        return isNaN(int) ? 0 : int;\n    })\n        .reduce(function (sum, value) { return sum + value; });\n});\n\n/* eslint-env browser */\n/**\n * get handle or return item\n * @param {Array<HTMLElement>} items\n * @param {string} selector\n */\nvar getHandles = (function (items, selector) {\n    if (!(items instanceof Array)) {\n        throw new Error('You must provide a Array of HTMLElements to be filtered.');\n    }\n    if (typeof selector !== 'string') {\n        return items;\n    }\n    return items\n        // remove items without handle from array\n        .filter(function (item) {\n        return item.querySelector(selector) instanceof HTMLElement ||\n            (item.shadowRoot && item.shadowRoot.querySelector(selector) instanceof HTMLElement);\n    })\n        // replace item with handle in array\n        .map(function (item) {\n        return item.querySelector(selector) || (item.shadowRoot && item.shadowRoot.querySelector(selector));\n    });\n});\n\n/**\n * @param {Event} event\n * @returns {HTMLElement}\n */\nvar getEventTarget = (function (event) {\n    return (event.composedPath && event.composedPath()[0]) || event.target;\n});\n\n/* eslint-env browser */\n/**\n * defaultDragImage returns the current item as dragged image\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {object} elementOffset - an object with the offsets top, left, right & bottom\n * @param {Event} event - the original drag event object\n * @return {object} with element, posX and posY properties\n */\nvar defaultDragImage = function (draggedElement, elementOffset, event) {\n    return {\n        element: draggedElement,\n        posX: event.pageX - elementOffset.left,\n        posY: event.pageY - elementOffset.top\n    };\n};\n/**\n * attaches an element as the drag image to an event\n * @param {Event} event - the original drag event object\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {Function} customDragImage - function to create a custom dragImage\n * @return void\n */\nvar setDragImage = (function (event, draggedElement, customDragImage) {\n    // check if event is provided\n    if (!(event instanceof Event)) {\n        throw new Error('setDragImage requires a DragEvent as the first argument.');\n    }\n    // check if draggedElement is provided\n    if (!(draggedElement instanceof HTMLElement)) {\n        throw new Error('setDragImage requires the dragged element as the second argument.');\n    }\n    // set default function of none provided\n    if (!customDragImage) {\n        customDragImage = defaultDragImage;\n    }\n    // check if setDragImage method is available\n    if (event.dataTransfer && event.dataTransfer.setDragImage) {\n        // get the elements offset\n        var elementOffset = offset(draggedElement);\n        // get the dragImage\n        var dragImage = customDragImage(draggedElement, elementOffset, event);\n        // check if custom function returns correct values\n        if (!(dragImage.element instanceof HTMLElement) || typeof dragImage.posX !== 'number' || typeof dragImage.posY !== 'number') {\n            throw new Error('The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].');\n        }\n        // needs to be set for HTML5 drag & drop to work\n        event.dataTransfer.effectAllowed = 'copyMove';\n        // Firefox requires it to use the event target's id for the data\n        event.dataTransfer.setData('text/plain', getEventTarget(event).id);\n        // set the drag image on the event\n        event.dataTransfer.setDragImage(dragImage.element, dragImage.posX, dragImage.posY);\n    }\n});\n\n/**\n * Check if curList accepts items from destList\n * @param {sortable} destination the container an item is move to\n * @param {sortable} origin the container an item comes from\n */\nvar listsConnected = (function (destination, origin) {\n    // check if valid sortable\n    if (destination.isSortable === true) {\n        var acceptFrom = store(destination).getConfig('acceptFrom');\n        // check if acceptFrom is valid\n        if (acceptFrom !== null && acceptFrom !== false && typeof acceptFrom !== 'string') {\n            throw new Error('HTML5Sortable: Wrong argument, \"acceptFrom\" must be \"null\", \"false\", or a valid selector string.');\n        }\n        if (acceptFrom !== null) {\n            return acceptFrom !== false && acceptFrom.split(',').filter(function (sel) {\n                return sel.length > 0 && origin.matches(sel);\n            }).length > 0;\n        }\n        // drop in same list\n        if (destination === origin) {\n            return true;\n        }\n        // check if lists are connected with connectWith\n        if (store(destination).getConfig('connectWith') !== undefined && store(destination).getConfig('connectWith') !== null) {\n            return store(destination).getConfig('connectWith') === store(origin).getConfig('connectWith');\n        }\n    }\n    return false;\n});\n\n/**\n * default configurations\n */\nvar defaultConfiguration = {\n    items: null,\n    // deprecated\n    connectWith: null,\n    // deprecated\n    disableIEFix: null,\n    acceptFrom: null,\n    copy: false,\n    placeholder: null,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging',\n    hoverClass: false,\n    dropTargetContainerClass: false,\n    debounce: 0,\n    throttleTime: 100,\n    maxItems: 0,\n    itemSerializer: undefined,\n    containerSerializer: undefined,\n    customDragImage: null,\n    orientation: 'vertical'\n};\n\n/**\n * make sure a function is only called once within the given amount of time\n * @param {Function} fn the function to throttle\n * @param {number} threshold time limit for throttling\n */\n// must use function to keep this context\nfunction throttle (fn, threshold) {\n    var _this = this;\n    if (threshold === void 0) { threshold = 250; }\n    // check function\n    if (typeof fn !== 'function') {\n        throw new Error('You must provide a function as the first argument for throttle.');\n    }\n    // check threshold\n    if (typeof threshold !== 'number') {\n        throw new Error('You must provide a number as the second argument for throttle.');\n    }\n    var lastEventTimestamp = null;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var now = Date.now();\n        if (lastEventTimestamp === null || now - lastEventTimestamp >= threshold) {\n            lastEventTimestamp = now;\n            fn.apply(_this, args);\n        }\n    };\n}\n\n/* eslint-env browser */\n/**\n * enable or disable hoverClass on mouseenter/leave if container Items\n * @param {sortable} sortableContainer a valid sortableContainer\n * @param {boolean} enable enable or disable event\n */\nvar enableHoverClass = (function (sortableContainer, enable) {\n    if (typeof store(sortableContainer).getConfig('hoverClass') === 'string') {\n        var hoverClasses_1 = store(sortableContainer).getConfig('hoverClass').split(' ');\n        // add class on hover\n        if (enable === true) {\n            addEventListener(sortableContainer, 'mousemove', throttle(function (event) {\n                // check of no mouse button was pressed when mousemove started == no drag\n                if (event.buttons === 0) {\n                    filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(function (item) {\n                        var _a, _b;\n                        if (item === event.target || item.contains(event.target)) {\n                            (_a = item.classList).add.apply(_a, hoverClasses_1);\n                        }\n                        else {\n                            (_b = item.classList).remove.apply(_b, hoverClasses_1);\n                        }\n                    });\n                }\n            }, store(sortableContainer).getConfig('throttleTime')));\n            // remove class on leave\n            addEventListener(sortableContainer, 'mouseleave', function () {\n                filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(function (item) {\n                    var _a;\n                    (_a = item.classList).remove.apply(_a, hoverClasses_1);\n                });\n            });\n            // remove events\n        }\n        else {\n            removeEventListener(sortableContainer, 'mousemove');\n            removeEventListener(sortableContainer, 'mouseleave');\n        }\n    }\n});\n\n/* eslint-env browser */\n/*\n * variables global to the plugin\n */\nvar dragging;\nvar draggingHeight;\nvar draggingWidth;\n/*\n * Keeps track of the initialy selected list, where 'dragstart' event was triggered\n * It allows us to move the data in between individual Sortable List instances\n */\n// Origin List - data from before any item was changed\nvar originContainer;\nvar originIndex;\nvar originElementIndex;\nvar originItemsBeforeUpdate;\n// Previous Sortable Container - we dispatch as sortenter event when a\n// dragged item enters a sortableContainer for the first time\nvar previousContainer;\n// Destination List - data from before any item was changed\nvar destinationItemsBeforeUpdate;\n/**\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nvar removeItemEvents = function (items) {\n    removeEventListener(items, 'dragstart');\n    removeEventListener(items, 'dragend');\n    removeEventListener(items, 'dragover');\n    removeEventListener(items, 'dragenter');\n    removeEventListener(items, 'drop');\n    removeEventListener(items, 'mouseenter');\n    removeEventListener(items, 'mouseleave');\n};\n// Remove container events\nvar removeContainerEvents = function (originContainer, previousContainer) {\n    if (originContainer) {\n        removeEventListener(originContainer, 'dragleave');\n    }\n    if (previousContainer && (previousContainer !== originContainer)) {\n        removeEventListener(previousContainer, 'dragleave');\n    }\n};\n/**\n * getDragging returns the current element to drag or\n * a copy of the element.\n * Is Copy Active for sortable\n * @param {HTMLElement} draggedItem - the item that the user drags\n * @param {HTMLElement} sortable a single sortable\n */\nvar getDragging = function (draggedItem, sortable) {\n    var ditem = draggedItem;\n    if (store(sortable).getConfig('copy') === true) {\n        ditem = draggedItem.cloneNode(true);\n        addAttribute(ditem, 'aria-copied', 'true');\n        draggedItem.parentElement.appendChild(ditem);\n        ditem.style.display = 'none';\n        ditem.oldDisplay = draggedItem.style.display;\n    }\n    return ditem;\n};\n/**\n * Remove data from sortable\n * @param {HTMLElement} sortable a single sortable\n */\nvar removeSortableData = function (sortable) {\n    removeData(sortable);\n    removeAttribute(sortable, 'aria-dropeffect');\n};\n/**\n * Remove data from items\n * @param {Array<HTMLElement>|HTMLElement} items\n */\nvar removeItemData = function (items) {\n    removeAttribute(items, 'aria-grabbed');\n    removeAttribute(items, 'aria-copied');\n    removeAttribute(items, 'draggable');\n    removeAttribute(items, 'role');\n};\n/**\n * find sortable from element. travels up parent element until found or null.\n * @param {HTMLElement} element a single sortable\n * @param {Event} event - the current event. We need to pass it to be able to\n * find Sortable whith shadowRoot (document fragment has no parent)\n */\nfunction findSortable(element, event) {\n    if (event.composedPath) {\n        return event.composedPath().find(function (el) { return el.isSortable; });\n    }\n    while (element.isSortable !== true) {\n        element = element.parentElement;\n    }\n    return element;\n}\n/**\n * Dragging event is on the sortable element. finds the top child that\n * contains the element.\n * @param {HTMLElement} sortableElement a single sortable\n * @param {HTMLElement} element is that being dragged\n */\nfunction findDragElement(sortableElement, element) {\n    var options = addData(sortableElement, 'opts');\n    var items = filter(sortableElement.children, options.items);\n    var itemlist = items.filter(function (ele) {\n        return ele.contains(element) || (ele.shadowRoot && ele.shadowRoot.contains(element));\n    });\n    return itemlist.length > 0 ? itemlist[0] : element;\n}\n/**\n * Destroy the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar destroySortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts') || {};\n    var items = filter(sortableElement.children, opts.items);\n    var handles = getHandles(items, opts.handle);\n    // disable adding hover class\n    enableHoverClass(sortableElement, false);\n    // remove event handlers & data from sortable\n    removeEventListener(sortableElement, 'dragover');\n    removeEventListener(sortableElement, 'dragenter');\n    removeEventListener(sortableElement, 'dragstart');\n    removeEventListener(sortableElement, 'dragend');\n    removeEventListener(sortableElement, 'drop');\n    // remove event data from sortable\n    removeSortableData(sortableElement);\n    // remove event handlers & data from items\n    removeEventListener(handles, 'mousedown');\n    removeItemEvents(items);\n    removeItemData(items);\n    removeContainerEvents(originContainer, previousContainer);\n    // clear sortable flag\n    sortableElement.isSortable = false;\n};\n/**\n * Enable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar enableSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = filter(sortableElement.children, opts.items);\n    var handles = getHandles(items, opts.handle);\n    addAttribute(sortableElement, 'aria-dropeffect', 'move');\n    addData(sortableElement, '_disabled', 'false');\n    addAttribute(handles, 'draggable', 'true');\n    // enable hover class\n    enableHoverClass(sortableElement, true);\n    // @todo: remove this fix\n    // IE FIX for ghost\n    // can be disabled as it has the side effect that other events\n    // (e.g. click) will be ignored\n    if (opts.disableIEFix === false) {\n        var spanEl = (document || window.document).createElement('span');\n        if (typeof spanEl.dragDrop === 'function') {\n            addEventListener(handles, 'mousedown', function () {\n                if (items.indexOf(this) !== -1) {\n                    this.dragDrop();\n                }\n                else {\n                    var parent = this.parentElement;\n                    while (items.indexOf(parent) === -1) {\n                        parent = parent.parentElement;\n                    }\n                    parent.dragDrop();\n                }\n            });\n        }\n    }\n};\n/**\n * Disable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar disableSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = filter(sortableElement.children, opts.items);\n    var handles = getHandles(items, opts.handle);\n    addAttribute(sortableElement, 'aria-dropeffect', 'none');\n    addData(sortableElement, '_disabled', 'true');\n    addAttribute(handles, 'draggable', 'false');\n    removeEventListener(handles, 'mousedown');\n    enableHoverClass(sortableElement, false);\n};\n/**\n * Reload the sortable\n * @param {HTMLElement} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nvar reloadSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = filter(sortableElement.children, opts.items);\n    var handles = getHandles(items, opts.handle);\n    addData(sortableElement, '_disabled', 'false');\n    // remove event handlers from items\n    removeItemEvents(items);\n    removeContainerEvents(originContainer, previousContainer);\n    removeEventListener(handles, 'mousedown');\n    // remove event handlers from sortable\n    removeEventListener(sortableElement, 'dragover');\n    removeEventListener(sortableElement, 'dragenter');\n    removeEventListener(sortableElement, 'drop');\n};\n/**\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nfunction sortable(sortableElements, options) {\n    // get method string to see if a method is called\n    var method = String(options);\n    options = options || {};\n    // check if the user provided a selector instead of an element\n    if (typeof sortableElements === 'string') {\n        sortableElements = document.querySelectorAll(sortableElements);\n    }\n    // if the user provided an element, return it in an array to keep the return value consistant\n    if (sortableElements instanceof HTMLElement) {\n        sortableElements = [sortableElements];\n    }\n    sortableElements = Array.prototype.slice.call(sortableElements);\n    if (/serialize/.test(method)) {\n        return sortableElements.map(function (sortableContainer) {\n            var opts = addData(sortableContainer, 'opts');\n            return serialize(sortableContainer, opts.itemSerializer, opts.containerSerializer);\n        });\n    }\n    sortableElements.forEach(function (sortableElement) {\n        if (/enable|disable|destroy/.test(method)) {\n            return sortable[method](sortableElement);\n        }\n        // log deprecation\n        ['connectWith', 'disableIEFix'].forEach(function (configKey) {\n            if (Object.prototype.hasOwnProperty.call(options, configKey) && options[configKey] !== null) {\n                console.warn(\"HTML5Sortable: You are using the deprecated configuration \\\"\" + configKey + \"\\\". This will be removed in an upcoming version, make sure to migrate to the new options when updating.\");\n            }\n        });\n        // merge options with default options\n        options = Object.assign({}, defaultConfiguration, store(sortableElement).config, options);\n        // init data store for sortable\n        store(sortableElement).config = options;\n        // set options on sortable\n        addData(sortableElement, 'opts', options);\n        // property to define as sortable\n        sortableElement.isSortable = true;\n        // reset sortable\n        reloadSortable(sortableElement);\n        // initialize\n        var listItems = filter(sortableElement.children, options.items);\n        // create element if user defined a placeholder element as a string\n        var customPlaceholder;\n        if (options.placeholder !== null && options.placeholder !== undefined) {\n            var tempContainer = document.createElement(sortableElement.tagName);\n            if (options.placeholder instanceof HTMLElement) {\n                tempContainer.appendChild(options.placeholder);\n            }\n            else {\n                tempContainer.innerHTML = options.placeholder;\n            }\n            customPlaceholder = tempContainer.children[0];\n        }\n        // add placeholder\n        store(sortableElement).placeholder = makePlaceholder(sortableElement, customPlaceholder, options.placeholderClass);\n        addData(sortableElement, 'items', options.items);\n        if (options.acceptFrom) {\n            addData(sortableElement, 'acceptFrom', options.acceptFrom);\n        }\n        else if (options.connectWith) {\n            addData(sortableElement, 'connectWith', options.connectWith);\n        }\n        enableSortable(sortableElement);\n        addAttribute(listItems, 'role', 'option');\n        addAttribute(listItems, 'aria-grabbed', 'false');\n        /*\n         Handle drag events on draggable items\n         Handle is set at the sortableElement level as it will bubble up\n         from the item\n         */\n        addEventListener(sortableElement, 'dragstart', function (e) {\n            // ignore dragstart events\n            var target = getEventTarget(e);\n            if (target.isSortable === true) {\n                return;\n            }\n            e.stopImmediatePropagation();\n            if ((options.handle && !target.matches(options.handle)) || target.getAttribute('draggable') === 'false') {\n                return;\n            }\n            var sortableContainer = findSortable(target, e);\n            var dragItem = findDragElement(sortableContainer, target);\n            // grab values\n            originItemsBeforeUpdate = filter(sortableContainer.children, options.items);\n            originIndex = originItemsBeforeUpdate.indexOf(dragItem);\n            originElementIndex = getIndex(dragItem, sortableContainer.children);\n            originContainer = sortableContainer;\n            // add transparent clone or other ghost to cursor\n            setDragImage(e, dragItem, options.customDragImage);\n            // cache selsection & add attr for dragging\n            draggingHeight = getElementHeight(dragItem);\n            draggingWidth = getElementWidth(dragItem);\n            dragItem.classList.add(options.draggingClass);\n            dragging = getDragging(dragItem, sortableContainer);\n            addAttribute(dragging, 'aria-grabbed', 'true');\n            // dispatch sortstart event on each element in group\n            sortableContainer.dispatchEvent(new CustomEvent('sortstart', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging,\n                    originalTarget: target\n                }\n            }));\n        });\n        /*\n         We are capturing targetSortable before modifications with 'dragenter' event\n        */\n        addEventListener(sortableElement, 'dragenter', function (e) {\n            var target = getEventTarget(e);\n            var sortableContainer = findSortable(target, e);\n            if (sortableContainer && sortableContainer !== previousContainer) {\n                destinationItemsBeforeUpdate = filter(sortableContainer.children, addData(sortableContainer, 'items'))\n                    .filter(function (item) { return item !== store(sortableElement).placeholder; });\n                if (options.dropTargetContainerClass) {\n                    sortableContainer.classList.add(options.dropTargetContainerClass);\n                }\n                sortableContainer.dispatchEvent(new CustomEvent('sortenter', {\n                    detail: {\n                        origin: {\n                            elementIndex: originElementIndex,\n                            index: originIndex,\n                            container: originContainer\n                        },\n                        destination: {\n                            container: sortableContainer,\n                            itemsBeforeUpdate: destinationItemsBeforeUpdate\n                        },\n                        item: dragging,\n                        originalTarget: target\n                    }\n                }));\n                addEventListener(sortableContainer, 'dragleave', function (e) {\n                    // TODO: rename outTarget to be more self-explanatory\n                    // e.fromElement for very old browsers, similar to relatedTarget\n                    var outTarget = e.relatedTarget || e.fromElement;\n                    if (!e.currentTarget.contains(outTarget)) {\n                        if (options.dropTargetContainerClass) {\n                            sortableContainer.classList.remove(options.dropTargetContainerClass);\n                        }\n                        sortableContainer.dispatchEvent(new CustomEvent('sortleave', {\n                            detail: {\n                                origin: {\n                                    elementIndex: originElementIndex,\n                                    index: originIndex,\n                                    container: sortableContainer\n                                },\n                                item: dragging,\n                                originalTarget: target\n                            }\n                        }));\n                    }\n                });\n            }\n            previousContainer = sortableContainer;\n        });\n        /*\n         * Dragend Event - https://developer.mozilla.org/en-US/docs/Web/Events/dragend\n         * Fires each time dragEvent end, or ESC pressed\n         * We are using it to clean up any draggable elements and placeholders\n         */\n        addEventListener(sortableElement, 'dragend', function (e) {\n            if (!dragging) {\n                return;\n            }\n            dragging.classList.remove(options.draggingClass);\n            addAttribute(dragging, 'aria-grabbed', 'false');\n            if (dragging.getAttribute('aria-copied') === 'true' && addData(dragging, 'dropped') !== 'true') {\n                dragging.remove();\n            }\n            if (dragging.oldDisplay !== undefined) {\n                dragging.style.display = dragging.oldDisplay;\n                delete dragging.oldDisplay;\n            }\n            var visiblePlaceholder = Array.from(stores.values()).map(function (data) { return data.placeholder; })\n                .filter(function (placeholder) { return placeholder instanceof HTMLElement; })\n                .filter(isInDom)[0];\n            if (visiblePlaceholder) {\n                visiblePlaceholder.remove();\n            }\n            // dispatch sortstart event on each element in group\n            sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging\n                }\n            }));\n            previousContainer = null;\n            dragging = null;\n            draggingHeight = null;\n            draggingWidth = null;\n        });\n        /*\n         * Drop Event - https://developer.mozilla.org/en-US/docs/Web/Events/drop\n         * Fires when valid drop target area is hit\n         */\n        addEventListener(sortableElement, 'drop', function (e) {\n            if (!listsConnected(sortableElement, dragging.parentElement)) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            addData(dragging, 'dropped', 'true');\n            // get the one placeholder that is currently visible\n            var visiblePlaceholder = Array.from(stores.values()).map(function (data) {\n                return data.placeholder;\n            })\n                // filter only HTMLElements\n                .filter(function (placeholder) { return placeholder instanceof HTMLElement; })\n                // only elements in DOM\n                .filter(isInDom)[0];\n            if (visiblePlaceholder) {\n                visiblePlaceholder.replaceWith(dragging);\n                // to avoid flickering restoring element display immediately after replacing placeholder\n                if (dragging.oldDisplay !== undefined) {\n                    dragging.style.display = dragging.oldDisplay;\n                    delete dragging.oldDisplay;\n                }\n            }\n            else {\n                // set the dropped value to 'false' to delete copied dragging at the time of 'dragend'\n                addData(dragging, 'dropped', 'false');\n                return;\n            }\n            /*\n             * Fires Custom Event - 'sortstop'\n             */\n            sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging\n                }\n            }));\n            var placeholder = store(sortableElement).placeholder;\n            var originItems = filter(originContainer.children, options.items)\n                .filter(function (item) { return item !== placeholder; });\n            var destinationContainer = this.isSortable === true ? this : this.parentElement;\n            var destinationItems = filter(destinationContainer.children, addData(destinationContainer, 'items'))\n                .filter(function (item) { return item !== placeholder; });\n            var destinationElementIndex = getIndex(dragging, Array.from(dragging.parentElement.children)\n                .filter(function (item) { return item !== placeholder; }));\n            var destinationIndex = getIndex(dragging, destinationItems);\n            if (options.dropTargetContainerClass) {\n                destinationContainer.classList.remove(options.dropTargetContainerClass);\n            }\n            /*\n             * When a list item changed container lists or index within a list\n             * Fires Custom Event - 'sortupdate'\n             */\n            if (originElementIndex !== destinationElementIndex || originContainer !== destinationContainer) {\n                sortableElement.dispatchEvent(new CustomEvent('sortupdate', {\n                    detail: {\n                        origin: {\n                            elementIndex: originElementIndex,\n                            index: originIndex,\n                            container: originContainer,\n                            itemsBeforeUpdate: originItemsBeforeUpdate,\n                            items: originItems\n                        },\n                        destination: {\n                            index: destinationIndex,\n                            elementIndex: destinationElementIndex,\n                            container: destinationContainer,\n                            itemsBeforeUpdate: destinationItemsBeforeUpdate,\n                            items: destinationItems\n                        },\n                        item: dragging\n                    }\n                }));\n            }\n        });\n        var debouncedDragOverEnter = debounce(function (sortableElement, element, pageX, pageY) {\n            if (!dragging) {\n                return;\n            }\n            // set placeholder height if forcePlaceholderSize option is set\n            if (options.forcePlaceholderSize) {\n                store(sortableElement).placeholder.style.height = draggingHeight + 'px';\n                store(sortableElement).placeholder.style.width = draggingWidth + 'px';\n            }\n            // if element the draggedItem is dragged onto is within the array of all elements in list\n            // (not only items, but also disabled, etc.)\n            if (Array.from(sortableElement.children).indexOf(element) > -1) {\n                var thisHeight = getElementHeight(element);\n                var thisWidth = getElementWidth(element);\n                var placeholderIndex = getIndex(store(sortableElement).placeholder, element.parentElement.children);\n                var thisIndex = getIndex(element, element.parentElement.children);\n                // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n                if (thisHeight > draggingHeight || thisWidth > draggingWidth) {\n                    // Dead zone?\n                    var deadZoneVertical = thisHeight - draggingHeight;\n                    var deadZoneHorizontal = thisWidth - draggingWidth;\n                    var offsetTop = offset(element).top;\n                    var offsetLeft = offset(element).left;\n                    if (placeholderIndex < thisIndex &&\n                        ((options.orientation === 'vertical' && pageY < offsetTop) ||\n                            (options.orientation === 'horizontal' && pageX < offsetLeft))) {\n                        return;\n                    }\n                    if (placeholderIndex > thisIndex &&\n                        ((options.orientation === 'vertical' && pageY > offsetTop + thisHeight - deadZoneVertical) ||\n                            (options.orientation === 'horizontal' && pageX > offsetLeft + thisWidth - deadZoneHorizontal))) {\n                        return;\n                    }\n                }\n                if (dragging.oldDisplay === undefined) {\n                    dragging.oldDisplay = dragging.style.display;\n                }\n                if (dragging.style.display !== 'none') {\n                    dragging.style.display = 'none';\n                }\n                // To avoid flicker, determine where to position the placeholder\n                // based on where the mouse pointer is relative to the elements\n                // vertical center.\n                var placeAfter = false;\n                try {\n                    var elementMiddleVertical = offset(element).top + element.offsetHeight / 2;\n                    var elementMiddleHorizontal = offset(element).left + element.offsetWidth / 2;\n                    placeAfter = (options.orientation === 'vertical' && (pageY >= elementMiddleVertical)) ||\n                        (options.orientation === 'horizontal' && (pageX >= elementMiddleHorizontal));\n                }\n                catch (e) {\n                    placeAfter = placeholderIndex < thisIndex;\n                }\n                if (placeAfter) {\n                    insertAfter(element, store(sortableElement).placeholder);\n                }\n                else {\n                    insertBefore(element, store(sortableElement).placeholder);\n                }\n                // get placeholders from all stores & remove all but current one\n                Array.from(stores.values())\n                    // remove empty values\n                    .filter(function (data) { return data.placeholder !== undefined; })\n                    // foreach placeholder in array if outside of current sorableContainer -> remove from DOM\n                    .forEach(function (data) {\n                    if (data.placeholder !== store(sortableElement).placeholder) {\n                        data.placeholder.remove();\n                    }\n                });\n            }\n            else {\n                // get all placeholders from store\n                var placeholders = Array.from(stores.values())\n                    .filter(function (data) { return data.placeholder !== undefined; })\n                    .map(function (data) {\n                    return data.placeholder;\n                });\n                // check if element is not in placeholders\n                if (placeholders.indexOf(element) === -1 && sortableElement === element && !filter(element.children, options.items).length) {\n                    placeholders.forEach(function (element) { return element.remove(); });\n                    element.appendChild(store(sortableElement).placeholder);\n                }\n            }\n        }, options.debounce);\n        // Handle dragover and dragenter events on draggable items\n        var onDragOverEnter = function (e) {\n            var element = e.target;\n            var sortableElement = element.isSortable === true ? element : findSortable(element, e);\n            element = findDragElement(sortableElement, element);\n            if (!dragging || !listsConnected(sortableElement, dragging.parentElement) || addData(sortableElement, '_disabled') === 'true') {\n                return;\n            }\n            var options = addData(sortableElement, 'opts');\n            if (parseInt(options.maxItems) && filter(sortableElement.children, addData(sortableElement, 'items')).length > parseInt(options.maxItems) && dragging.parentElement !== sortableElement) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            e.dataTransfer.dropEffect = store(sortableElement).getConfig('copy') === true ? 'copy' : 'move';\n            debouncedDragOverEnter(sortableElement, element, e.pageX, e.pageY);\n        };\n        addEventListener(listItems.concat(sortableElement), 'dragover', onDragOverEnter);\n        addEventListener(listItems.concat(sortableElement), 'dragenter', onDragOverEnter);\n    });\n    return sortableElements;\n}\nsortable.destroy = function (sortableElement) {\n    destroySortable(sortableElement);\n};\nsortable.enable = function (sortableElement) {\n    enableSortable(sortableElement);\n};\nsortable.disable = function (sortableElement) {\n    disableSortable(sortableElement);\n};\n/* START.TESTS_ONLY */\nsortable.__testing = {\n    // add internal methods here for testing purposes\n    data: addData,\n    removeItemEvents: removeItemEvents,\n    removeItemData: removeItemData,\n    removeSortableData: removeSortableData,\n    removeContainerEvents: removeContainerEvents\n};\n\nmodule.exports = sortable;\n","/**\n * Memize options object.\n *\n * @typedef MemizeOptions\n *\n * @property {number} [maxSize] Maximum size of the cache.\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef MemizeCacheNode\n *\n * @property {?MemizeCacheNode|undefined} [prev] Previous node.\n * @property {?MemizeCacheNode|undefined} [next] Next node.\n * @property {Array<*>}                   args   Function arguments for cache\n *                                               entry.\n * @property {*}                          val    Function result.\n */\n\n/**\n * Properties of the enhanced function for controlling cache.\n *\n * @typedef MemizeMemoizedFunction\n *\n * @property {()=>void} clear Clear the cache.\n */\n\n/**\n * Accepts a function to be memoized, and returns a new memoized function, with\n * optional options.\n *\n * @template {Function} F\n *\n * @param {F}             fn        Function to memoize.\n * @param {MemizeOptions} [options] Options object.\n *\n * @return {F & MemizeMemoizedFunction} Memoized function.\n */\nfunction memize( fn, options ) {\n\tvar size = 0;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar head;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar tail;\n\n\toptions = options || {};\n\n\tfunction memoized( /* ...args */ ) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs, i;\n\n\t\tsearchCache: while ( node ) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif ( node.args.length !== arguments.length ) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( node.args[ i ] !== arguments[ i ] ) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif ( node !== head ) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif ( node === tail ) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\t/** @type {MemizeCacheNode} */ ( node.prev ).next = node.next;\n\t\t\t\tif ( node.next ) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {MemizeCacheNode} */ ( head ).prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply( null, args ),\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif ( head ) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif ( size === /** @type {MemizeOptions} */ ( options ).maxSize ) {\n\t\t\ttail = /** @type {MemizeCacheNode} */ ( tail ).prev;\n\t\t\t/** @type {MemizeCacheNode} */ ( tail ).next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function() {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\tif ( process.env.NODE_ENV === 'test' ) {\n\t\t// Cache is not exposed in the public API, but used in tests to ensure\n\t\t// expected list progression\n\t\tmemoized.getCache = function() {\n\t\t\treturn [ head, tail, size ];\n\t\t};\n\t}\n\n\t// Ignore reason: There's not a clear solution to create an intersection of\n\t// the function with additional properties, where the goal is to retain the\n\t// function signature of the incoming argument and add control properties\n\t// on the return value.\n\n\t// @ts-ignore\n\treturn memoized;\n}\n\nmodule.exports = memize;\n","/*!\n * Select2 4.1.0-rc.0\n * https://select2.github.io\n *\n * Released under the MIT license\n * https://github.com/select2/select2/blob/master/LICENSE.md\n */\n;(function (factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(['jquery'], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    // Node/CommonJS\n    module.exports = function (root, jQuery) {\n      if (jQuery === undefined) {\n        // require('jQuery') returns a factory that requires window to\n        // build a jQuery instance, we normalize how we use modules\n        // that require this pattern but the window provided is a noop\n        // if it's defined (how jquery works)\n        if (typeof window !== 'undefined') {\n          jQuery = require('jquery');\n        }\n        else {\n          jQuery = require('jquery')(root);\n        }\n      }\n      factory(jQuery);\n      return jQuery;\n    };\n  } else {\n    // Browser globals\n    factory(jQuery);\n  }\n} (function (jQuery) {\n  // This is needed so we can catch the AMD loader configuration and use it\n  // The inner file should be wrapped (by `banner.start.js`) in a function that\n  // returns the AMD loader references.\n  var S2 =(function () {\n  // Restore the Select2 AMD loader so it can be used\n  // Needed mostly in the language files, where the loader is not inserted\n  if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {\n    var S2 = jQuery.fn.select2.amd;\n  }\nvar S2;(function () { if (!S2 || !S2.requirejs) {\nif (!S2) { S2 = {}; } else { require = S2; }\n/**\n * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.\n * Released under MIT license, http://github.com/requirejs/almond/LICENSE\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name) {\n            name = name.split('/');\n            lastIndex = name.length - 1;\n\n            // If wanting node ID compatibility, strip .js from end\n            // of IDs. Have to do this here, and not in nameToUrl\n            // because node allows either .js or non .js to map\n            // to same file.\n            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n            }\n\n            // Starts with a '.' so need the baseName\n            if (name[0].charAt(0) === '.' && baseParts) {\n                //Convert baseName to array, and lop off the last part,\n                //so that . matches that 'directory' and not name of the baseName's\n                //module. For instance, baseName of 'one/two/three', maps to\n                //'one/two/three.js', but we want the directory, 'one/two' for\n                //this normalization.\n                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\n                name = normalizedBaseParts.concat(name);\n            }\n\n            //start trimDots\n            for (i = 0; i < name.length; i++) {\n                part = name[i];\n                if (part === '.') {\n                    name.splice(i, 1);\n                    i -= 1;\n                } else if (part === '..') {\n                    // If at the start, or previous value is still ..,\n                    // keep them so that when converted to a path it may\n                    // still work when converted to a path, even though\n                    // as an ID it is less than ideal. In larger point\n                    // releases, may be better to just kick out an error.\n                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {\n                        continue;\n                    } else if (i > 0) {\n                        name.splice(i - 1, 2);\n                        i -= 2;\n                    }\n                }\n            }\n            //end trimDots\n\n            name = name.join('/');\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    //Creates a parts array for a relName where first part is plugin ID,\n    //second part is resource ID. Assumes relName has already been normalized.\n    function makeRelParts(relName) {\n        return relName ? splitPrefix(relName) : [];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relParts) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0],\n            relResourceName = relParts[1];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relResourceName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relResourceName));\n            } else {\n                name = normalize(name, relResourceName);\n            }\n        } else {\n            name = normalize(name, relResourceName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i, relParts,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n        relParts = makeRelParts(relName);\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relParts);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, makeRelParts(callback)).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\nS2.requirejs = requirejs;S2.require = require;S2.define = define;\n}\n}());\nS2.define(\"almond\", function(){});\n\n/* global jQuery:false, $:false */\nS2.define('jquery',[],function () {\n  var _$ = jQuery || $;\n\n  if (_$ == null && console && console.error) {\n    console.error(\n      'Select2: An instance of jQuery or a jQuery-compatible library was not ' +\n      'found. Make sure that you are including jQuery before Select2 on your ' +\n      'web page.'\n    );\n  }\n\n  return _$;\n});\n\nS2.define('select2/utils',[\n  'jquery'\n], function ($) {\n  var Utils = {};\n\n  Utils.Extend = function (ChildClass, SuperClass) {\n    var __hasProp = {}.hasOwnProperty;\n\n    function BaseConstructor () {\n      this.constructor = ChildClass;\n    }\n\n    for (var key in SuperClass) {\n      if (__hasProp.call(SuperClass, key)) {\n        ChildClass[key] = SuperClass[key];\n      }\n    }\n\n    BaseConstructor.prototype = SuperClass.prototype;\n    ChildClass.prototype = new BaseConstructor();\n    ChildClass.__super__ = SuperClass.prototype;\n\n    return ChildClass;\n  };\n\n  function getMethods (theClass) {\n    var proto = theClass.prototype;\n\n    var methods = [];\n\n    for (var methodName in proto) {\n      var m = proto[methodName];\n\n      if (typeof m !== 'function') {\n        continue;\n      }\n\n      if (methodName === 'constructor') {\n        continue;\n      }\n\n      methods.push(methodName);\n    }\n\n    return methods;\n  }\n\n  Utils.Decorate = function (SuperClass, DecoratorClass) {\n    var decoratedMethods = getMethods(DecoratorClass);\n    var superMethods = getMethods(SuperClass);\n\n    function DecoratedClass () {\n      var unshift = Array.prototype.unshift;\n\n      var argCount = DecoratorClass.prototype.constructor.length;\n\n      var calledConstructor = SuperClass.prototype.constructor;\n\n      if (argCount > 0) {\n        unshift.call(arguments, SuperClass.prototype.constructor);\n\n        calledConstructor = DecoratorClass.prototype.constructor;\n      }\n\n      calledConstructor.apply(this, arguments);\n    }\n\n    DecoratorClass.displayName = SuperClass.displayName;\n\n    function ctr () {\n      this.constructor = DecoratedClass;\n    }\n\n    DecoratedClass.prototype = new ctr();\n\n    for (var m = 0; m < superMethods.length; m++) {\n      var superMethod = superMethods[m];\n\n      DecoratedClass.prototype[superMethod] =\n        SuperClass.prototype[superMethod];\n    }\n\n    var calledMethod = function (methodName) {\n      // Stub out the original method if it's not decorating an actual method\n      var originalMethod = function () {};\n\n      if (methodName in DecoratedClass.prototype) {\n        originalMethod = DecoratedClass.prototype[methodName];\n      }\n\n      var decoratedMethod = DecoratorClass.prototype[methodName];\n\n      return function () {\n        var unshift = Array.prototype.unshift;\n\n        unshift.call(arguments, originalMethod);\n\n        return decoratedMethod.apply(this, arguments);\n      };\n    };\n\n    for (var d = 0; d < decoratedMethods.length; d++) {\n      var decoratedMethod = decoratedMethods[d];\n\n      DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);\n    }\n\n    return DecoratedClass;\n  };\n\n  var Observable = function () {\n    this.listeners = {};\n  };\n\n  Observable.prototype.on = function (event, callback) {\n    this.listeners = this.listeners || {};\n\n    if (event in this.listeners) {\n      this.listeners[event].push(callback);\n    } else {\n      this.listeners[event] = [callback];\n    }\n  };\n\n  Observable.prototype.trigger = function (event) {\n    var slice = Array.prototype.slice;\n    var params = slice.call(arguments, 1);\n\n    this.listeners = this.listeners || {};\n\n    // Params should always come in as an array\n    if (params == null) {\n      params = [];\n    }\n\n    // If there are no arguments to the event, use a temporary object\n    if (params.length === 0) {\n      params.push({});\n    }\n\n    // Set the `_type` of the first object to the event\n    params[0]._type = event;\n\n    if (event in this.listeners) {\n      this.invoke(this.listeners[event], slice.call(arguments, 1));\n    }\n\n    if ('*' in this.listeners) {\n      this.invoke(this.listeners['*'], arguments);\n    }\n  };\n\n  Observable.prototype.invoke = function (listeners, params) {\n    for (var i = 0, len = listeners.length; i < len; i++) {\n      listeners[i].apply(this, params);\n    }\n  };\n\n  Utils.Observable = Observable;\n\n  Utils.generateChars = function (length) {\n    var chars = '';\n\n    for (var i = 0; i < length; i++) {\n      var randomChar = Math.floor(Math.random() * 36);\n      chars += randomChar.toString(36);\n    }\n\n    return chars;\n  };\n\n  Utils.bind = function (func, context) {\n    return function () {\n      func.apply(context, arguments);\n    };\n  };\n\n  Utils._convertData = function (data) {\n    for (var originalKey in data) {\n      var keys = originalKey.split('-');\n\n      var dataLevel = data;\n\n      if (keys.length === 1) {\n        continue;\n      }\n\n      for (var k = 0; k < keys.length; k++) {\n        var key = keys[k];\n\n        // Lowercase the first letter\n        // By default, dash-separated becomes camelCase\n        key = key.substring(0, 1).toLowerCase() + key.substring(1);\n\n        if (!(key in dataLevel)) {\n          dataLevel[key] = {};\n        }\n\n        if (k == keys.length - 1) {\n          dataLevel[key] = data[originalKey];\n        }\n\n        dataLevel = dataLevel[key];\n      }\n\n      delete data[originalKey];\n    }\n\n    return data;\n  };\n\n  Utils.hasScroll = function (index, el) {\n    // Adapted from the function created by @ShadowScripter\n    // and adapted by @BillBarry on the Stack Exchange Code Review website.\n    // The original code can be found at\n    // http://codereview.stackexchange.com/q/13338\n    // and was designed to be used with the Sizzle selector engine.\n\n    var $el = $(el);\n    var overflowX = el.style.overflowX;\n    var overflowY = el.style.overflowY;\n\n    //Check both x and y declarations\n    if (overflowX === overflowY &&\n        (overflowY === 'hidden' || overflowY === 'visible')) {\n      return false;\n    }\n\n    if (overflowX === 'scroll' || overflowY === 'scroll') {\n      return true;\n    }\n\n    return ($el.innerHeight() < el.scrollHeight ||\n      $el.innerWidth() < el.scrollWidth);\n  };\n\n  Utils.escapeMarkup = function (markup) {\n    var replaceMap = {\n      '\\\\': '&#92;',\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '/': '&#47;'\n    };\n\n    // Do not try to escape the markup if it's not a string\n    if (typeof markup !== 'string') {\n      return markup;\n    }\n\n    return String(markup).replace(/[&<>\"'\\/\\\\]/g, function (match) {\n      return replaceMap[match];\n    });\n  };\n\n  // Cache objects in Utils.__cache instead of $.data (see #4346)\n  Utils.__cache = {};\n\n  var id = 0;\n  Utils.GetUniqueElementId = function (element) {\n    // Get a unique element Id. If element has no id,\n    // creates a new unique number, stores it in the id\n    // attribute and returns the new id with a prefix.\n    // If an id already exists, it simply returns it with a prefix.\n\n    var select2Id = element.getAttribute('data-select2-id');\n\n    if (select2Id != null) {\n      return select2Id;\n    }\n\n    // If element has id, use it.\n    if (element.id) {\n      select2Id = 'select2-data-' + element.id;\n    } else {\n      select2Id = 'select2-data-' + (++id).toString() +\n        '-' + Utils.generateChars(4);\n    }\n\n    element.setAttribute('data-select2-id', select2Id);\n\n    return select2Id;\n  };\n\n  Utils.StoreData = function (element, name, value) {\n    // Stores an item in the cache for a specified element.\n    // name is the cache key.\n    var id = Utils.GetUniqueElementId(element);\n    if (!Utils.__cache[id]) {\n      Utils.__cache[id] = {};\n    }\n\n    Utils.__cache[id][name] = value;\n  };\n\n  Utils.GetData = function (element, name) {\n    // Retrieves a value from the cache by its key (name)\n    // name is optional. If no name specified, return\n    // all cache items for the specified element.\n    // and for a specified element.\n    var id = Utils.GetUniqueElementId(element);\n    if (name) {\n      if (Utils.__cache[id]) {\n        if (Utils.__cache[id][name] != null) {\n          return Utils.__cache[id][name];\n        }\n        return $(element).data(name); // Fallback to HTML5 data attribs.\n      }\n      return $(element).data(name); // Fallback to HTML5 data attribs.\n    } else {\n      return Utils.__cache[id];\n    }\n  };\n\n  Utils.RemoveData = function (element) {\n    // Removes all cached items for a specified element.\n    var id = Utils.GetUniqueElementId(element);\n    if (Utils.__cache[id] != null) {\n      delete Utils.__cache[id];\n    }\n\n    element.removeAttribute('data-select2-id');\n  };\n\n  Utils.copyNonInternalCssClasses = function (dest, src) {\n    var classes;\n\n    var destinationClasses = dest.getAttribute('class').trim().split(/\\s+/);\n\n    destinationClasses = destinationClasses.filter(function (clazz) {\n      // Save all Select2 classes\n      return clazz.indexOf('select2-') === 0;\n    });\n\n    var sourceClasses = src.getAttribute('class').trim().split(/\\s+/);\n\n    sourceClasses = sourceClasses.filter(function (clazz) {\n      // Only copy non-Select2 classes\n      return clazz.indexOf('select2-') !== 0;\n    });\n\n    var replacements = destinationClasses.concat(sourceClasses);\n\n    dest.setAttribute('class', replacements.join(' '));\n  };\n\n  return Utils;\n});\n\nS2.define('select2/results',[\n  'jquery',\n  './utils'\n], function ($, Utils) {\n  function Results ($element, options, dataAdapter) {\n    this.$element = $element;\n    this.data = dataAdapter;\n    this.options = options;\n\n    Results.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(Results, Utils.Observable);\n\n  Results.prototype.render = function () {\n    var $results = $(\n      '<ul class=\"select2-results__options\" role=\"listbox\"></ul>'\n    );\n\n    if (this.options.get('multiple')) {\n      $results.attr('aria-multiselectable', 'true');\n    }\n\n    this.$results = $results;\n\n    return $results;\n  };\n\n  Results.prototype.clear = function () {\n    this.$results.empty();\n  };\n\n  Results.prototype.displayMessage = function (params) {\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    this.clear();\n    this.hideLoading();\n\n    var $message = $(\n      '<li role=\"alert\" aria-live=\"assertive\"' +\n      ' class=\"select2-results__option\"></li>'\n    );\n\n    var message = this.options.get('translations').get(params.message);\n\n    $message.append(\n      escapeMarkup(\n        message(params.args)\n      )\n    );\n\n    $message[0].className += ' select2-results__message';\n\n    this.$results.append($message);\n  };\n\n  Results.prototype.hideMessages = function () {\n    this.$results.find('.select2-results__message').remove();\n  };\n\n  Results.prototype.append = function (data) {\n    this.hideLoading();\n\n    var $options = [];\n\n    if (data.results == null || data.results.length === 0) {\n      if (this.$results.children().length === 0) {\n        this.trigger('results:message', {\n          message: 'noResults'\n        });\n      }\n\n      return;\n    }\n\n    data.results = this.sort(data.results);\n\n    for (var d = 0; d < data.results.length; d++) {\n      var item = data.results[d];\n\n      var $option = this.option(item);\n\n      $options.push($option);\n    }\n\n    this.$results.append($options);\n  };\n\n  Results.prototype.position = function ($results, $dropdown) {\n    var $resultsContainer = $dropdown.find('.select2-results');\n    $resultsContainer.append($results);\n  };\n\n  Results.prototype.sort = function (data) {\n    var sorter = this.options.get('sorter');\n\n    return sorter(data);\n  };\n\n  Results.prototype.highlightFirstItem = function () {\n    var $options = this.$results\n      .find('.select2-results__option--selectable');\n\n    var $selected = $options.filter('.select2-results__option--selected');\n\n    // Check if there are any selected options\n    if ($selected.length > 0) {\n      // If there are selected options, highlight the first\n      $selected.first().trigger('mouseenter');\n    } else {\n      // If there are no selected options, highlight the first option\n      // in the dropdown\n      $options.first().trigger('mouseenter');\n    }\n\n    this.ensureHighlightVisible();\n  };\n\n  Results.prototype.setClasses = function () {\n    var self = this;\n\n    this.data.current(function (selected) {\n      var selectedIds = selected.map(function (s) {\n        return s.id.toString();\n      });\n\n      var $options = self.$results\n        .find('.select2-results__option--selectable');\n\n      $options.each(function () {\n        var $option = $(this);\n\n        var item = Utils.GetData(this, 'data');\n\n        // id needs to be converted to a string when comparing\n        var id = '' + item.id;\n\n        if ((item.element != null && item.element.selected) ||\n            (item.element == null && selectedIds.indexOf(id) > -1)) {\n          this.classList.add('select2-results__option--selected');\n          $option.attr('aria-selected', 'true');\n        } else {\n          this.classList.remove('select2-results__option--selected');\n          $option.attr('aria-selected', 'false');\n        }\n      });\n\n    });\n  };\n\n  Results.prototype.showLoading = function (params) {\n    this.hideLoading();\n\n    var loadingMore = this.options.get('translations').get('searching');\n\n    var loading = {\n      disabled: true,\n      loading: true,\n      text: loadingMore(params)\n    };\n    var $loading = this.option(loading);\n    $loading.className += ' loading-results';\n\n    this.$results.prepend($loading);\n  };\n\n  Results.prototype.hideLoading = function () {\n    this.$results.find('.loading-results').remove();\n  };\n\n  Results.prototype.option = function (data) {\n    var option = document.createElement('li');\n    option.classList.add('select2-results__option');\n    option.classList.add('select2-results__option--selectable');\n\n    var attrs = {\n      'role': 'option'\n    };\n\n    var matches = window.Element.prototype.matches ||\n      window.Element.prototype.msMatchesSelector ||\n      window.Element.prototype.webkitMatchesSelector;\n\n    if ((data.element != null && matches.call(data.element, ':disabled')) ||\n        (data.element == null && data.disabled)) {\n      attrs['aria-disabled'] = 'true';\n\n      option.classList.remove('select2-results__option--selectable');\n      option.classList.add('select2-results__option--disabled');\n    }\n\n    if (data.id == null) {\n      option.classList.remove('select2-results__option--selectable');\n    }\n\n    if (data._resultId != null) {\n      option.id = data._resultId;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    if (data.children) {\n      attrs.role = 'group';\n      attrs['aria-label'] = data.text;\n\n      option.classList.remove('select2-results__option--selectable');\n      option.classList.add('select2-results__option--group');\n    }\n\n    for (var attr in attrs) {\n      var val = attrs[attr];\n\n      option.setAttribute(attr, val);\n    }\n\n    if (data.children) {\n      var $option = $(option);\n\n      var label = document.createElement('strong');\n      label.className = 'select2-results__group';\n\n      this.template(data, label);\n\n      var $children = [];\n\n      for (var c = 0; c < data.children.length; c++) {\n        var child = data.children[c];\n\n        var $child = this.option(child);\n\n        $children.push($child);\n      }\n\n      var $childrenContainer = $('<ul></ul>', {\n        'class': 'select2-results__options select2-results__options--nested',\n        'role': 'none'\n      });\n\n      $childrenContainer.append($children);\n\n      $option.append(label);\n      $option.append($childrenContainer);\n    } else {\n      this.template(data, option);\n    }\n\n    Utils.StoreData(option, 'data', data);\n\n    return option;\n  };\n\n  Results.prototype.bind = function (container, $container) {\n    var self = this;\n\n    var id = container.id + '-results';\n\n    this.$results.attr('id', id);\n\n    container.on('results:all', function (params) {\n      self.clear();\n      self.append(params.data);\n\n      if (container.isOpen()) {\n        self.setClasses();\n        self.highlightFirstItem();\n      }\n    });\n\n    container.on('results:append', function (params) {\n      self.append(params.data);\n\n      if (container.isOpen()) {\n        self.setClasses();\n      }\n    });\n\n    container.on('query', function (params) {\n      self.hideMessages();\n      self.showLoading(params);\n    });\n\n    container.on('select', function () {\n      if (!container.isOpen()) {\n        return;\n      }\n\n      self.setClasses();\n\n      if (self.options.get('scrollAfterSelect')) {\n        self.highlightFirstItem();\n      }\n    });\n\n    container.on('unselect', function () {\n      if (!container.isOpen()) {\n        return;\n      }\n\n      self.setClasses();\n\n      if (self.options.get('scrollAfterSelect')) {\n        self.highlightFirstItem();\n      }\n    });\n\n    container.on('open', function () {\n      // When the dropdown is open, aria-expended=\"true\"\n      self.$results.attr('aria-expanded', 'true');\n      self.$results.attr('aria-hidden', 'false');\n\n      self.setClasses();\n      self.ensureHighlightVisible();\n    });\n\n    container.on('close', function () {\n      // When the dropdown is closed, aria-expended=\"false\"\n      self.$results.attr('aria-expanded', 'false');\n      self.$results.attr('aria-hidden', 'true');\n      self.$results.removeAttr('aria-activedescendant');\n    });\n\n    container.on('results:toggle', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      if ($highlighted.length === 0) {\n        return;\n      }\n\n      $highlighted.trigger('mouseup');\n    });\n\n    container.on('results:select', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      if ($highlighted.length === 0) {\n        return;\n      }\n\n      var data = Utils.GetData($highlighted[0], 'data');\n\n      if ($highlighted.hasClass('select2-results__option--selected')) {\n        self.trigger('close', {});\n      } else {\n        self.trigger('select', {\n          data: data\n        });\n      }\n    });\n\n    container.on('results:previous', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      var $options = self.$results.find('.select2-results__option--selectable');\n\n      var currentIndex = $options.index($highlighted);\n\n      // If we are already at the top, don't move further\n      // If no options, currentIndex will be -1\n      if (currentIndex <= 0) {\n        return;\n      }\n\n      var nextIndex = currentIndex - 1;\n\n      // If none are highlighted, highlight the first\n      if ($highlighted.length === 0) {\n        nextIndex = 0;\n      }\n\n      var $next = $options.eq(nextIndex);\n\n      $next.trigger('mouseenter');\n\n      var currentOffset = self.$results.offset().top;\n      var nextTop = $next.offset().top;\n      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\n\n      if (nextIndex === 0) {\n        self.$results.scrollTop(0);\n      } else if (nextTop - currentOffset < 0) {\n        self.$results.scrollTop(nextOffset);\n      }\n    });\n\n    container.on('results:next', function () {\n      var $highlighted = self.getHighlightedResults();\n\n      var $options = self.$results.find('.select2-results__option--selectable');\n\n      var currentIndex = $options.index($highlighted);\n\n      var nextIndex = currentIndex + 1;\n\n      // If we are at the last option, stay there\n      if (nextIndex >= $options.length) {\n        return;\n      }\n\n      var $next = $options.eq(nextIndex);\n\n      $next.trigger('mouseenter');\n\n      var currentOffset = self.$results.offset().top +\n        self.$results.outerHeight(false);\n      var nextBottom = $next.offset().top + $next.outerHeight(false);\n      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\n\n      if (nextIndex === 0) {\n        self.$results.scrollTop(0);\n      } else if (nextBottom > currentOffset) {\n        self.$results.scrollTop(nextOffset);\n      }\n    });\n\n    container.on('results:focus', function (params) {\n      params.element[0].classList.add('select2-results__option--highlighted');\n      params.element[0].setAttribute('aria-selected', 'true');\n    });\n\n    container.on('results:message', function (params) {\n      self.displayMessage(params);\n    });\n\n    if ($.fn.mousewheel) {\n      this.$results.on('mousewheel', function (e) {\n        var top = self.$results.scrollTop();\n\n        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\n\n        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\n        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\n\n        if (isAtTop) {\n          self.$results.scrollTop(0);\n\n          e.preventDefault();\n          e.stopPropagation();\n        } else if (isAtBottom) {\n          self.$results.scrollTop(\n            self.$results.get(0).scrollHeight - self.$results.height()\n          );\n\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      });\n    }\n\n    this.$results.on('mouseup', '.select2-results__option--selectable',\n      function (evt) {\n      var $this = $(this);\n\n      var data = Utils.GetData(this, 'data');\n\n      if ($this.hasClass('select2-results__option--selected')) {\n        if (self.options.get('multiple')) {\n          self.trigger('unselect', {\n            originalEvent: evt,\n            data: data\n          });\n        } else {\n          self.trigger('close', {});\n        }\n\n        return;\n      }\n\n      self.trigger('select', {\n        originalEvent: evt,\n        data: data\n      });\n    });\n\n    this.$results.on('mouseenter', '.select2-results__option--selectable',\n      function (evt) {\n      var data = Utils.GetData(this, 'data');\n\n      self.getHighlightedResults()\n          .removeClass('select2-results__option--highlighted')\n          .attr('aria-selected', 'false');\n\n      self.trigger('results:focus', {\n        data: data,\n        element: $(this)\n      });\n    });\n  };\n\n  Results.prototype.getHighlightedResults = function () {\n    var $highlighted = this.$results\n    .find('.select2-results__option--highlighted');\n\n    return $highlighted;\n  };\n\n  Results.prototype.destroy = function () {\n    this.$results.remove();\n  };\n\n  Results.prototype.ensureHighlightVisible = function () {\n    var $highlighted = this.getHighlightedResults();\n\n    if ($highlighted.length === 0) {\n      return;\n    }\n\n    var $options = this.$results.find('.select2-results__option--selectable');\n\n    var currentIndex = $options.index($highlighted);\n\n    var currentOffset = this.$results.offset().top;\n    var nextTop = $highlighted.offset().top;\n    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\n\n    var offsetDelta = nextTop - currentOffset;\n    nextOffset -= $highlighted.outerHeight(false) * 2;\n\n    if (currentIndex <= 2) {\n      this.$results.scrollTop(0);\n    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\n      this.$results.scrollTop(nextOffset);\n    }\n  };\n\n  Results.prototype.template = function (result, container) {\n    var template = this.options.get('templateResult');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    var content = template(result, container);\n\n    if (content == null) {\n      container.style.display = 'none';\n    } else if (typeof content === 'string') {\n      container.innerHTML = escapeMarkup(content);\n    } else {\n      $(container).append(content);\n    }\n  };\n\n  return Results;\n});\n\nS2.define('select2/keys',[\n\n], function () {\n  var KEYS = {\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    SHIFT: 16,\n    CTRL: 17,\n    ALT: 18,\n    ESC: 27,\n    SPACE: 32,\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    END: 35,\n    HOME: 36,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    DELETE: 46\n  };\n\n  return KEYS;\n});\n\nS2.define('select2/selection/base',[\n  'jquery',\n  '../utils',\n  '../keys'\n], function ($, Utils, KEYS) {\n  function BaseSelection ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    BaseSelection.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(BaseSelection, Utils.Observable);\n\n  BaseSelection.prototype.render = function () {\n    var $selection = $(\n      '<span class=\"select2-selection\" role=\"combobox\" ' +\n      ' aria-haspopup=\"true\" aria-expanded=\"false\">' +\n      '</span>'\n    );\n\n    this._tabindex = 0;\n\n    if (Utils.GetData(this.$element[0], 'old-tabindex') != null) {\n      this._tabindex = Utils.GetData(this.$element[0], 'old-tabindex');\n    } else if (this.$element.attr('tabindex') != null) {\n      this._tabindex = this.$element.attr('tabindex');\n    }\n\n    $selection.attr('title', this.$element.attr('title'));\n    $selection.attr('tabindex', this._tabindex);\n    $selection.attr('aria-disabled', 'false');\n\n    this.$selection = $selection;\n\n    return $selection;\n  };\n\n  BaseSelection.prototype.bind = function (container, $container) {\n    var self = this;\n\n    var resultsId = container.id + '-results';\n\n    this.container = container;\n\n    this.$selection.on('focus', function (evt) {\n      self.trigger('focus', evt);\n    });\n\n    this.$selection.on('blur', function (evt) {\n      self._handleBlur(evt);\n    });\n\n    this.$selection.on('keydown', function (evt) {\n      self.trigger('keypress', evt);\n\n      if (evt.which === KEYS.SPACE) {\n        evt.preventDefault();\n      }\n    });\n\n    container.on('results:focus', function (params) {\n      self.$selection.attr('aria-activedescendant', params.data._resultId);\n    });\n\n    container.on('selection:update', function (params) {\n      self.update(params.data);\n    });\n\n    container.on('open', function () {\n      // When the dropdown is open, aria-expanded=\"true\"\n      self.$selection.attr('aria-expanded', 'true');\n      self.$selection.attr('aria-owns', resultsId);\n\n      self._attachCloseHandler(container);\n    });\n\n    container.on('close', function () {\n      // When the dropdown is closed, aria-expanded=\"false\"\n      self.$selection.attr('aria-expanded', 'false');\n      self.$selection.removeAttr('aria-activedescendant');\n      self.$selection.removeAttr('aria-owns');\n\n      self.$selection.trigger('focus');\n\n      self._detachCloseHandler(container);\n    });\n\n    container.on('enable', function () {\n      self.$selection.attr('tabindex', self._tabindex);\n      self.$selection.attr('aria-disabled', 'false');\n    });\n\n    container.on('disable', function () {\n      self.$selection.attr('tabindex', '-1');\n      self.$selection.attr('aria-disabled', 'true');\n    });\n  };\n\n  BaseSelection.prototype._handleBlur = function (evt) {\n    var self = this;\n\n    // This needs to be delayed as the active element is the body when the tab\n    // key is pressed, possibly along with others.\n    window.setTimeout(function () {\n      // Don't trigger `blur` if the focus is still in the selection\n      if (\n        (document.activeElement == self.$selection[0]) ||\n        ($.contains(self.$selection[0], document.activeElement))\n      ) {\n        return;\n      }\n\n      self.trigger('blur', evt);\n    }, 1);\n  };\n\n  BaseSelection.prototype._attachCloseHandler = function (container) {\n\n    $(document.body).on('mousedown.select2.' + container.id, function (e) {\n      var $target = $(e.target);\n\n      var $select = $target.closest('.select2');\n\n      var $all = $('.select2.select2-container--open');\n\n      $all.each(function () {\n        if (this == $select[0]) {\n          return;\n        }\n\n        var $element = Utils.GetData(this, 'element');\n\n        $element.select2('close');\n      });\n    });\n  };\n\n  BaseSelection.prototype._detachCloseHandler = function (container) {\n    $(document.body).off('mousedown.select2.' + container.id);\n  };\n\n  BaseSelection.prototype.position = function ($selection, $container) {\n    var $selectionContainer = $container.find('.selection');\n    $selectionContainer.append($selection);\n  };\n\n  BaseSelection.prototype.destroy = function () {\n    this._detachCloseHandler(this.container);\n  };\n\n  BaseSelection.prototype.update = function (data) {\n    throw new Error('The `update` method must be defined in child classes.');\n  };\n\n  /**\n   * Helper method to abstract the \"enabled\" (not \"disabled\") state of this\n   * object.\n   *\n   * @return {true} if the instance is not disabled.\n   * @return {false} if the instance is disabled.\n   */\n  BaseSelection.prototype.isEnabled = function () {\n    return !this.isDisabled();\n  };\n\n  /**\n   * Helper method to abstract the \"disabled\" state of this object.\n   *\n   * @return {true} if the disabled option is true.\n   * @return {false} if the disabled option is false.\n   */\n  BaseSelection.prototype.isDisabled = function () {\n    return this.options.get('disabled');\n  };\n\n  return BaseSelection;\n});\n\nS2.define('select2/selection/single',[\n  'jquery',\n  './base',\n  '../utils',\n  '../keys'\n], function ($, BaseSelection, Utils, KEYS) {\n  function SingleSelection () {\n    SingleSelection.__super__.constructor.apply(this, arguments);\n  }\n\n  Utils.Extend(SingleSelection, BaseSelection);\n\n  SingleSelection.prototype.render = function () {\n    var $selection = SingleSelection.__super__.render.call(this);\n\n    $selection[0].classList.add('select2-selection--single');\n\n    $selection.html(\n      '<span class=\"select2-selection__rendered\"></span>' +\n      '<span class=\"select2-selection__arrow\" role=\"presentation\">' +\n        '<b role=\"presentation\"></b>' +\n      '</span>'\n    );\n\n    return $selection;\n  };\n\n  SingleSelection.prototype.bind = function (container, $container) {\n    var self = this;\n\n    SingleSelection.__super__.bind.apply(this, arguments);\n\n    var id = container.id + '-container';\n\n    this.$selection.find('.select2-selection__rendered')\n      .attr('id', id)\n      .attr('role', 'textbox')\n      .attr('aria-readonly', 'true');\n    this.$selection.attr('aria-labelledby', id);\n    this.$selection.attr('aria-controls', id);\n\n    this.$selection.on('mousedown', function (evt) {\n      // Only respond to left clicks\n      if (evt.which !== 1) {\n        return;\n      }\n\n      self.trigger('toggle', {\n        originalEvent: evt\n      });\n    });\n\n    this.$selection.on('focus', function (evt) {\n      // User focuses on the container\n    });\n\n    this.$selection.on('blur', function (evt) {\n      // User exits the container\n    });\n\n    container.on('focus', function (evt) {\n      if (!container.isOpen()) {\n        self.$selection.trigger('focus');\n      }\n    });\n  };\n\n  SingleSelection.prototype.clear = function () {\n    var $rendered = this.$selection.find('.select2-selection__rendered');\n    $rendered.empty();\n    $rendered.removeAttr('title'); // clear tooltip on empty\n  };\n\n  SingleSelection.prototype.display = function (data, container) {\n    var template = this.options.get('templateSelection');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    return escapeMarkup(template(data, container));\n  };\n\n  SingleSelection.prototype.selectionContainer = function () {\n    return $('<span></span>');\n  };\n\n  SingleSelection.prototype.update = function (data) {\n    if (data.length === 0) {\n      this.clear();\n      return;\n    }\n\n    var selection = data[0];\n\n    var $rendered = this.$selection.find('.select2-selection__rendered');\n    var formatted = this.display(selection, $rendered);\n\n    $rendered.empty().append(formatted);\n\n    var title = selection.title || selection.text;\n\n    if (title) {\n      $rendered.attr('title', title);\n    } else {\n      $rendered.removeAttr('title');\n    }\n  };\n\n  return SingleSelection;\n});\n\nS2.define('select2/selection/multiple',[\n  'jquery',\n  './base',\n  '../utils'\n], function ($, BaseSelection, Utils) {\n  function MultipleSelection ($element, options) {\n    MultipleSelection.__super__.constructor.apply(this, arguments);\n  }\n\n  Utils.Extend(MultipleSelection, BaseSelection);\n\n  MultipleSelection.prototype.render = function () {\n    var $selection = MultipleSelection.__super__.render.call(this);\n\n    $selection[0].classList.add('select2-selection--multiple');\n\n    $selection.html(\n      '<ul class=\"select2-selection__rendered\"></ul>'\n    );\n\n    return $selection;\n  };\n\n  MultipleSelection.prototype.bind = function (container, $container) {\n    var self = this;\n\n    MultipleSelection.__super__.bind.apply(this, arguments);\n\n    var id = container.id + '-container';\n    this.$selection.find('.select2-selection__rendered').attr('id', id);\n\n    this.$selection.on('click', function (evt) {\n      self.trigger('toggle', {\n        originalEvent: evt\n      });\n    });\n\n    this.$selection.on(\n      'click',\n      '.select2-selection__choice__remove',\n      function (evt) {\n        // Ignore the event if it is disabled\n        if (self.isDisabled()) {\n          return;\n        }\n\n        var $remove = $(this);\n        var $selection = $remove.parent();\n\n        var data = Utils.GetData($selection[0], 'data');\n\n        self.trigger('unselect', {\n          originalEvent: evt,\n          data: data\n        });\n      }\n    );\n\n    this.$selection.on(\n      'keydown',\n      '.select2-selection__choice__remove',\n      function (evt) {\n        // Ignore the event if it is disabled\n        if (self.isDisabled()) {\n          return;\n        }\n\n        evt.stopPropagation();\n      }\n    );\n  };\n\n  MultipleSelection.prototype.clear = function () {\n    var $rendered = this.$selection.find('.select2-selection__rendered');\n    $rendered.empty();\n    $rendered.removeAttr('title');\n  };\n\n  MultipleSelection.prototype.display = function (data, container) {\n    var template = this.options.get('templateSelection');\n    var escapeMarkup = this.options.get('escapeMarkup');\n\n    return escapeMarkup(template(data, container));\n  };\n\n  MultipleSelection.prototype.selectionContainer = function () {\n    var $container = $(\n      '<li class=\"select2-selection__choice\">' +\n        '<button type=\"button\" class=\"select2-selection__choice__remove\" ' +\n        'tabindex=\"-1\">' +\n          '<span aria-hidden=\"true\">&times;</span>' +\n        '</button>' +\n        '<span class=\"select2-selection__choice__display\"></span>' +\n      '</li>'\n    );\n\n    return $container;\n  };\n\n  MultipleSelection.prototype.update = function (data) {\n    this.clear();\n\n    if (data.length === 0) {\n      return;\n    }\n\n    var $selections = [];\n\n    var selectionIdPrefix = this.$selection.find('.select2-selection__rendered')\n      .attr('id') + '-choice-';\n\n    for (var d = 0; d < data.length; d++) {\n      var selection = data[d];\n\n      var $selection = this.selectionContainer();\n      var formatted = this.display(selection, $selection);\n\n      var selectionId = selectionIdPrefix + Utils.generateChars(4) + '-';\n\n      if (selection.id) {\n        selectionId += selection.id;\n      } else {\n        selectionId += Utils.generateChars(4);\n      }\n\n      $selection.find('.select2-selection__choice__display')\n        .append(formatted)\n        .attr('id', selectionId);\n\n      var title = selection.title || selection.text;\n\n      if (title) {\n        $selection.attr('title', title);\n      }\n\n      var removeItem = this.options.get('translations').get('removeItem');\n\n      var $remove = $selection.find('.select2-selection__choice__remove');\n\n      $remove.attr('title', removeItem());\n      $remove.attr('aria-label', removeItem());\n      $remove.attr('aria-describedby', selectionId);\n\n      Utils.StoreData($selection[0], 'data', selection);\n\n      $selections.push($selection);\n    }\n\n    var $rendered = this.$selection.find('.select2-selection__rendered');\n\n    $rendered.append($selections);\n  };\n\n  return MultipleSelection;\n});\n\nS2.define('select2/selection/placeholder',[\n\n], function () {\n  function Placeholder (decorated, $element, options) {\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\n\n    decorated.call(this, $element, options);\n  }\n\n  Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {\n    if (typeof placeholder === 'string') {\n      placeholder = {\n        id: '',\n        text: placeholder\n      };\n    }\n\n    return placeholder;\n  };\n\n  Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {\n    var $placeholder = this.selectionContainer();\n\n    $placeholder.html(this.display(placeholder));\n    $placeholder[0].classList.add('select2-selection__placeholder');\n    $placeholder[0].classList.remove('select2-selection__choice');\n\n    var placeholderTitle = placeholder.title ||\n      placeholder.text ||\n      $placeholder.text();\n\n    this.$selection.find('.select2-selection__rendered').attr(\n      'title',\n      placeholderTitle\n    );\n\n    return $placeholder;\n  };\n\n  Placeholder.prototype.update = function (decorated, data) {\n    var singlePlaceholder = (\n      data.length == 1 && data[0].id != this.placeholder.id\n    );\n    var multipleSelections = data.length > 1;\n\n    if (multipleSelections || singlePlaceholder) {\n      return decorated.call(this, data);\n    }\n\n    this.clear();\n\n    var $placeholder = this.createPlaceholder(this.placeholder);\n\n    this.$selection.find('.select2-selection__rendered').append($placeholder);\n  };\n\n  return Placeholder;\n});\n\nS2.define('select2/selection/allowClear',[\n  'jquery',\n  '../keys',\n  '../utils'\n], function ($, KEYS, Utils) {\n  function AllowClear () { }\n\n  AllowClear.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    if (this.placeholder == null) {\n      if (this.options.get('debug') && window.console && console.error) {\n        console.error(\n          'Select2: The `allowClear` option should be used in combination ' +\n          'with the `placeholder` option.'\n        );\n      }\n    }\n\n    this.$selection.on('mousedown', '.select2-selection__clear',\n      function (evt) {\n        self._handleClear(evt);\n    });\n\n    container.on('keypress', function (evt) {\n      self._handleKeyboardClear(evt, container);\n    });\n  };\n\n  AllowClear.prototype._handleClear = function (_, evt) {\n    // Ignore the event if it is disabled\n    if (this.isDisabled()) {\n      return;\n    }\n\n    var $clear = this.$selection.find('.select2-selection__clear');\n\n    // Ignore the event if nothing has been selected\n    if ($clear.length === 0) {\n      return;\n    }\n\n    evt.stopPropagation();\n\n    var data = Utils.GetData($clear[0], 'data');\n\n    var previousVal = this.$element.val();\n    this.$element.val(this.placeholder.id);\n\n    var unselectData = {\n      data: data\n    };\n    this.trigger('clear', unselectData);\n    if (unselectData.prevented) {\n      this.$element.val(previousVal);\n      return;\n    }\n\n    for (var d = 0; d < data.length; d++) {\n      unselectData = {\n        data: data[d]\n      };\n\n      // Trigger the `unselect` event, so people can prevent it from being\n      // cleared.\n      this.trigger('unselect', unselectData);\n\n      // If the event was prevented, don't clear it out.\n      if (unselectData.prevented) {\n        this.$element.val(previousVal);\n        return;\n      }\n    }\n\n    this.$element.trigger('input').trigger('change');\n\n    this.trigger('toggle', {});\n  };\n\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\n    if (container.isOpen()) {\n      return;\n    }\n\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\n      this._handleClear(evt);\n    }\n  };\n\n  AllowClear.prototype.update = function (decorated, data) {\n    decorated.call(this, data);\n\n    this.$selection.find('.select2-selection__clear').remove();\n    this.$selection[0].classList.remove('select2-selection--clearable');\n\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\n        data.length === 0) {\n      return;\n    }\n\n    var selectionId = this.$selection.find('.select2-selection__rendered')\n      .attr('id');\n\n    var removeAll = this.options.get('translations').get('removeAllItems');\n\n    var $remove = $(\n      '<button type=\"button\" class=\"select2-selection__clear\" tabindex=\"-1\">' +\n        '<span aria-hidden=\"true\">&times;</span>' +\n      '</button>'\n    );\n    $remove.attr('title', removeAll());\n    $remove.attr('aria-label', removeAll());\n    $remove.attr('aria-describedby', selectionId);\n    Utils.StoreData($remove[0], 'data', data);\n\n    this.$selection.prepend($remove);\n    this.$selection[0].classList.add('select2-selection--clearable');\n  };\n\n  return AllowClear;\n});\n\nS2.define('select2/selection/search',[\n  'jquery',\n  '../utils',\n  '../keys'\n], function ($, Utils, KEYS) {\n  function Search (decorated, $element, options) {\n    decorated.call(this, $element, options);\n  }\n\n  Search.prototype.render = function (decorated) {\n    var searchLabel = this.options.get('translations').get('search');\n    var $search = $(\n      '<span class=\"select2-search select2-search--inline\">' +\n        '<textarea class=\"select2-search__field\"'+\n        ' type=\"search\" tabindex=\"-1\"' +\n        ' autocorrect=\"off\" autocapitalize=\"none\"' +\n        ' spellcheck=\"false\" role=\"searchbox\" aria-autocomplete=\"list\" >' +\n        '</textarea>' +\n      '</span>'\n    );\n\n    this.$searchContainer = $search;\n    this.$search = $search.find('textarea');\n\n    this.$search.prop('autocomplete', this.options.get('autocomplete'));\n    this.$search.attr('aria-label', searchLabel());\n\n    var $rendered = decorated.call(this);\n\n    this._transferTabIndex();\n    $rendered.append(this.$searchContainer);\n\n    return $rendered;\n  };\n\n  Search.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    var resultsId = container.id + '-results';\n    var selectionId = container.id + '-container';\n\n    decorated.call(this, container, $container);\n\n    self.$search.attr('aria-describedby', selectionId);\n\n    container.on('open', function () {\n      self.$search.attr('aria-controls', resultsId);\n      self.$search.trigger('focus');\n    });\n\n    container.on('close', function () {\n      self.$search.val('');\n      self.resizeSearch();\n      self.$search.removeAttr('aria-controls');\n      self.$search.removeAttr('aria-activedescendant');\n      self.$search.trigger('focus');\n    });\n\n    container.on('enable', function () {\n      self.$search.prop('disabled', false);\n\n      self._transferTabIndex();\n    });\n\n    container.on('disable', function () {\n      self.$search.prop('disabled', true);\n    });\n\n    container.on('focus', function (evt) {\n      self.$search.trigger('focus');\n    });\n\n    container.on('results:focus', function (params) {\n      if (params.data._resultId) {\n        self.$search.attr('aria-activedescendant', params.data._resultId);\n      } else {\n        self.$search.removeAttr('aria-activedescendant');\n      }\n    });\n\n    this.$selection.on('focusin', '.select2-search--inline', function (evt) {\n      self.trigger('focus', evt);\n    });\n\n    this.$selection.on('focusout', '.select2-search--inline', function (evt) {\n      self._handleBlur(evt);\n    });\n\n    this.$selection.on('keydown', '.select2-search--inline', function (evt) {\n      evt.stopPropagation();\n\n      self.trigger('keypress', evt);\n\n      self._keyUpPrevented = evt.isDefaultPrevented();\n\n      var key = evt.which;\n\n      if (key === KEYS.BACKSPACE && self.$search.val() === '') {\n        var $previousChoice = self.$selection\n          .find('.select2-selection__choice').last();\n\n        if ($previousChoice.length > 0) {\n          var item = Utils.GetData($previousChoice[0], 'data');\n\n          self.searchRemoveChoice(item);\n\n          evt.preventDefault();\n        }\n      }\n    });\n\n    this.$selection.on('click', '.select2-search--inline', function (evt) {\n      if (self.$search.val()) {\n        evt.stopPropagation();\n      }\n    });\n\n    // Try to detect the IE version should the `documentMode` property that\n    // is stored on the document. This is only implemented in IE and is\n    // slightly cleaner than doing a user agent check.\n    // This property is not available in Edge, but Edge also doesn't have\n    // this bug.\n    var msie = document.documentMode;\n    var disableInputEvents = msie && msie <= 11;\n\n    // Workaround for browsers which do not support the `input` event\n    // This will prevent double-triggering of events for browsers which support\n    // both the `keyup` and `input` events.\n    this.$selection.on(\n      'input.searchcheck',\n      '.select2-search--inline',\n      function (evt) {\n        // IE will trigger the `input` event when a placeholder is used on a\n        // search box. To get around this issue, we are forced to ignore all\n        // `input` events in IE and keep using `keyup`.\n        if (disableInputEvents) {\n          self.$selection.off('input.search input.searchcheck');\n          return;\n        }\n\n        // Unbind the duplicated `keyup` event\n        self.$selection.off('keyup.search');\n      }\n    );\n\n    this.$selection.on(\n      'keyup.search input.search',\n      '.select2-search--inline',\n      function (evt) {\n        // IE will trigger the `input` event when a placeholder is used on a\n        // search box. To get around this issue, we are forced to ignore all\n        // `input` events in IE and keep using `keyup`.\n        if (disableInputEvents && evt.type === 'input') {\n          self.$selection.off('input.search input.searchcheck');\n          return;\n        }\n\n        var key = evt.which;\n\n        // We can freely ignore events from modifier keys\n        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {\n          return;\n        }\n\n        // Tabbing will be handled during the `keydown` phase\n        if (key == KEYS.TAB) {\n          return;\n        }\n\n        self.handleSearch(evt);\n      }\n    );\n  };\n\n  /**\n   * This method will transfer the tabindex attribute from the rendered\n   * selection to the search box. This allows for the search box to be used as\n   * the primary focus instead of the selection container.\n   *\n   * @private\n   */\n  Search.prototype._transferTabIndex = function (decorated) {\n    this.$search.attr('tabindex', this.$selection.attr('tabindex'));\n    this.$selection.attr('tabindex', '-1');\n  };\n\n  Search.prototype.createPlaceholder = function (decorated, placeholder) {\n    this.$search.attr('placeholder', placeholder.text);\n  };\n\n  Search.prototype.update = function (decorated, data) {\n    var searchHadFocus = this.$search[0] == document.activeElement;\n\n    this.$search.attr('placeholder', '');\n\n    decorated.call(this, data);\n\n    this.resizeSearch();\n    if (searchHadFocus) {\n      this.$search.trigger('focus');\n    }\n  };\n\n  Search.prototype.handleSearch = function () {\n    this.resizeSearch();\n\n    if (!this._keyUpPrevented) {\n      var input = this.$search.val();\n\n      this.trigger('query', {\n        term: input\n      });\n    }\n\n    this._keyUpPrevented = false;\n  };\n\n  Search.prototype.searchRemoveChoice = function (decorated, item) {\n    this.trigger('unselect', {\n      data: item\n    });\n\n    this.$search.val(item.text);\n    this.handleSearch();\n  };\n\n  Search.prototype.resizeSearch = function () {\n    this.$search.css('width', '25px');\n\n    var width = '100%';\n\n    if (this.$search.attr('placeholder') === '') {\n      var minimumWidth = this.$search.val().length + 1;\n\n      width = (minimumWidth * 0.75) + 'em';\n    }\n\n    this.$search.css('width', width);\n  };\n\n  return Search;\n});\n\nS2.define('select2/selection/selectionCss',[\n  '../utils'\n], function (Utils) {\n  function SelectionCSS () { }\n\n  SelectionCSS.prototype.render = function (decorated) {\n    var $selection = decorated.call(this);\n\n    var selectionCssClass = this.options.get('selectionCssClass') || '';\n\n    if (selectionCssClass.indexOf(':all:') !== -1) {\n      selectionCssClass = selectionCssClass.replace(':all:', '');\n\n      Utils.copyNonInternalCssClasses($selection[0], this.$element[0]);\n    }\n\n    $selection.addClass(selectionCssClass);\n\n    return $selection;\n  };\n\n  return SelectionCSS;\n});\n\nS2.define('select2/selection/eventRelay',[\n  'jquery'\n], function ($) {\n  function EventRelay () { }\n\n  EventRelay.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n    var relayEvents = [\n      'open', 'opening',\n      'close', 'closing',\n      'select', 'selecting',\n      'unselect', 'unselecting',\n      'clear', 'clearing'\n    ];\n\n    var preventableEvents = [\n      'opening', 'closing', 'selecting', 'unselecting', 'clearing'\n    ];\n\n    decorated.call(this, container, $container);\n\n    container.on('*', function (name, params) {\n      // Ignore events that should not be relayed\n      if (relayEvents.indexOf(name) === -1) {\n        return;\n      }\n\n      // The parameters should always be an object\n      params = params || {};\n\n      // Generate the jQuery event for the Select2 event\n      var evt = $.Event('select2:' + name, {\n        params: params\n      });\n\n      self.$element.trigger(evt);\n\n      // Only handle preventable events if it was one\n      if (preventableEvents.indexOf(name) === -1) {\n        return;\n      }\n\n      params.prevented = evt.isDefaultPrevented();\n    });\n  };\n\n  return EventRelay;\n});\n\nS2.define('select2/translation',[\n  'jquery',\n  'require'\n], function ($, require) {\n  function Translation (dict) {\n    this.dict = dict || {};\n  }\n\n  Translation.prototype.all = function () {\n    return this.dict;\n  };\n\n  Translation.prototype.get = function (key) {\n    return this.dict[key];\n  };\n\n  Translation.prototype.extend = function (translation) {\n    this.dict = $.extend({}, translation.all(), this.dict);\n  };\n\n  // Static functions\n\n  Translation._cache = {};\n\n  Translation.loadPath = function (path) {\n    if (!(path in Translation._cache)) {\n      var translations = require(path);\n\n      Translation._cache[path] = translations;\n    }\n\n    return new Translation(Translation._cache[path]);\n  };\n\n  return Translation;\n});\n\nS2.define('select2/diacritics',[\n\n], function () {\n  var diacritics = {\n    '\\u24B6': 'A',\n    '\\uFF21': 'A',\n    '\\u00C0': 'A',\n    '\\u00C1': 'A',\n    '\\u00C2': 'A',\n    '\\u1EA6': 'A',\n    '\\u1EA4': 'A',\n    '\\u1EAA': 'A',\n    '\\u1EA8': 'A',\n    '\\u00C3': 'A',\n    '\\u0100': 'A',\n    '\\u0102': 'A',\n    '\\u1EB0': 'A',\n    '\\u1EAE': 'A',\n    '\\u1EB4': 'A',\n    '\\u1EB2': 'A',\n    '\\u0226': 'A',\n    '\\u01E0': 'A',\n    '\\u00C4': 'A',\n    '\\u01DE': 'A',\n    '\\u1EA2': 'A',\n    '\\u00C5': 'A',\n    '\\u01FA': 'A',\n    '\\u01CD': 'A',\n    '\\u0200': 'A',\n    '\\u0202': 'A',\n    '\\u1EA0': 'A',\n    '\\u1EAC': 'A',\n    '\\u1EB6': 'A',\n    '\\u1E00': 'A',\n    '\\u0104': 'A',\n    '\\u023A': 'A',\n    '\\u2C6F': 'A',\n    '\\uA732': 'AA',\n    '\\u00C6': 'AE',\n    '\\u01FC': 'AE',\n    '\\u01E2': 'AE',\n    '\\uA734': 'AO',\n    '\\uA736': 'AU',\n    '\\uA738': 'AV',\n    '\\uA73A': 'AV',\n    '\\uA73C': 'AY',\n    '\\u24B7': 'B',\n    '\\uFF22': 'B',\n    '\\u1E02': 'B',\n    '\\u1E04': 'B',\n    '\\u1E06': 'B',\n    '\\u0243': 'B',\n    '\\u0182': 'B',\n    '\\u0181': 'B',\n    '\\u24B8': 'C',\n    '\\uFF23': 'C',\n    '\\u0106': 'C',\n    '\\u0108': 'C',\n    '\\u010A': 'C',\n    '\\u010C': 'C',\n    '\\u00C7': 'C',\n    '\\u1E08': 'C',\n    '\\u0187': 'C',\n    '\\u023B': 'C',\n    '\\uA73E': 'C',\n    '\\u24B9': 'D',\n    '\\uFF24': 'D',\n    '\\u1E0A': 'D',\n    '\\u010E': 'D',\n    '\\u1E0C': 'D',\n    '\\u1E10': 'D',\n    '\\u1E12': 'D',\n    '\\u1E0E': 'D',\n    '\\u0110': 'D',\n    '\\u018B': 'D',\n    '\\u018A': 'D',\n    '\\u0189': 'D',\n    '\\uA779': 'D',\n    '\\u01F1': 'DZ',\n    '\\u01C4': 'DZ',\n    '\\u01F2': 'Dz',\n    '\\u01C5': 'Dz',\n    '\\u24BA': 'E',\n    '\\uFF25': 'E',\n    '\\u00C8': 'E',\n    '\\u00C9': 'E',\n    '\\u00CA': 'E',\n    '\\u1EC0': 'E',\n    '\\u1EBE': 'E',\n    '\\u1EC4': 'E',\n    '\\u1EC2': 'E',\n    '\\u1EBC': 'E',\n    '\\u0112': 'E',\n    '\\u1E14': 'E',\n    '\\u1E16': 'E',\n    '\\u0114': 'E',\n    '\\u0116': 'E',\n    '\\u00CB': 'E',\n    '\\u1EBA': 'E',\n    '\\u011A': 'E',\n    '\\u0204': 'E',\n    '\\u0206': 'E',\n    '\\u1EB8': 'E',\n    '\\u1EC6': 'E',\n    '\\u0228': 'E',\n    '\\u1E1C': 'E',\n    '\\u0118': 'E',\n    '\\u1E18': 'E',\n    '\\u1E1A': 'E',\n    '\\u0190': 'E',\n    '\\u018E': 'E',\n    '\\u24BB': 'F',\n    '\\uFF26': 'F',\n    '\\u1E1E': 'F',\n    '\\u0191': 'F',\n    '\\uA77B': 'F',\n    '\\u24BC': 'G',\n    '\\uFF27': 'G',\n    '\\u01F4': 'G',\n    '\\u011C': 'G',\n    '\\u1E20': 'G',\n    '\\u011E': 'G',\n    '\\u0120': 'G',\n    '\\u01E6': 'G',\n    '\\u0122': 'G',\n    '\\u01E4': 'G',\n    '\\u0193': 'G',\n    '\\uA7A0': 'G',\n    '\\uA77D': 'G',\n    '\\uA77E': 'G',\n    '\\u24BD': 'H',\n    '\\uFF28': 'H',\n    '\\u0124': 'H',\n    '\\u1E22': 'H',\n    '\\u1E26': 'H',\n    '\\u021E': 'H',\n    '\\u1E24': 'H',\n    '\\u1E28': 'H',\n    '\\u1E2A': 'H',\n    '\\u0126': 'H',\n    '\\u2C67': 'H',\n    '\\u2C75': 'H',\n    '\\uA78D': 'H',\n    '\\u24BE': 'I',\n    '\\uFF29': 'I',\n    '\\u00CC': 'I',\n    '\\u00CD': 'I',\n    '\\u00CE': 'I',\n    '\\u0128': 'I',\n    '\\u012A': 'I',\n    '\\u012C': 'I',\n    '\\u0130': 'I',\n    '\\u00CF': 'I',\n    '\\u1E2E': 'I',\n    '\\u1EC8': 'I',\n    '\\u01CF': 'I',\n    '\\u0208': 'I',\n    '\\u020A': 'I',\n    '\\u1ECA': 'I',\n    '\\u012E': 'I',\n    '\\u1E2C': 'I',\n    '\\u0197': 'I',\n    '\\u24BF': 'J',\n    '\\uFF2A': 'J',\n    '\\u0134': 'J',\n    '\\u0248': 'J',\n    '\\u24C0': 'K',\n    '\\uFF2B': 'K',\n    '\\u1E30': 'K',\n    '\\u01E8': 'K',\n    '\\u1E32': 'K',\n    '\\u0136': 'K',\n    '\\u1E34': 'K',\n    '\\u0198': 'K',\n    '\\u2C69': 'K',\n    '\\uA740': 'K',\n    '\\uA742': 'K',\n    '\\uA744': 'K',\n    '\\uA7A2': 'K',\n    '\\u24C1': 'L',\n    '\\uFF2C': 'L',\n    '\\u013F': 'L',\n    '\\u0139': 'L',\n    '\\u013D': 'L',\n    '\\u1E36': 'L',\n    '\\u1E38': 'L',\n    '\\u013B': 'L',\n    '\\u1E3C': 'L',\n    '\\u1E3A': 'L',\n    '\\u0141': 'L',\n    '\\u023D': 'L',\n    '\\u2C62': 'L',\n    '\\u2C60': 'L',\n    '\\uA748': 'L',\n    '\\uA746': 'L',\n    '\\uA780': 'L',\n    '\\u01C7': 'LJ',\n    '\\u01C8': 'Lj',\n    '\\u24C2': 'M',\n    '\\uFF2D': 'M',\n    '\\u1E3E': 'M',\n    '\\u1E40': 'M',\n    '\\u1E42': 'M',\n    '\\u2C6E': 'M',\n    '\\u019C': 'M',\n    '\\u24C3': 'N',\n    '\\uFF2E': 'N',\n    '\\u01F8': 'N',\n    '\\u0143': 'N',\n    '\\u00D1': 'N',\n    '\\u1E44': 'N',\n    '\\u0147': 'N',\n    '\\u1E46': 'N',\n    '\\u0145': 'N',\n    '\\u1E4A': 'N',\n    '\\u1E48': 'N',\n    '\\u0220': 'N',\n    '\\u019D': 'N',\n    '\\uA790': 'N',\n    '\\uA7A4': 'N',\n    '\\u01CA': 'NJ',\n    '\\u01CB': 'Nj',\n    '\\u24C4': 'O',\n    '\\uFF2F': 'O',\n    '\\u00D2': 'O',\n    '\\u00D3': 'O',\n    '\\u00D4': 'O',\n    '\\u1ED2': 'O',\n    '\\u1ED0': 'O',\n    '\\u1ED6': 'O',\n    '\\u1ED4': 'O',\n    '\\u00D5': 'O',\n    '\\u1E4C': 'O',\n    '\\u022C': 'O',\n    '\\u1E4E': 'O',\n    '\\u014C': 'O',\n    '\\u1E50': 'O',\n    '\\u1E52': 'O',\n    '\\u014E': 'O',\n    '\\u022E': 'O',\n    '\\u0230': 'O',\n    '\\u00D6': 'O',\n    '\\u022A': 'O',\n    '\\u1ECE': 'O',\n    '\\u0150': 'O',\n    '\\u01D1': 'O',\n    '\\u020C': 'O',\n    '\\u020E': 'O',\n    '\\u01A0': 'O',\n    '\\u1EDC': 'O',\n    '\\u1EDA': 'O',\n    '\\u1EE0': 'O',\n    '\\u1EDE': 'O',\n    '\\u1EE2': 'O',\n    '\\u1ECC': 'O',\n    '\\u1ED8': 'O',\n    '\\u01EA': 'O',\n    '\\u01EC': 'O',\n    '\\u00D8': 'O',\n    '\\u01FE': 'O',\n    '\\u0186': 'O',\n    '\\u019F': 'O',\n    '\\uA74A': 'O',\n    '\\uA74C': 'O',\n    '\\u0152': 'OE',\n    '\\u01A2': 'OI',\n    '\\uA74E': 'OO',\n    '\\u0222': 'OU',\n    '\\u24C5': 'P',\n    '\\uFF30': 'P',\n    '\\u1E54': 'P',\n    '\\u1E56': 'P',\n    '\\u01A4': 'P',\n    '\\u2C63': 'P',\n    '\\uA750': 'P',\n    '\\uA752': 'P',\n    '\\uA754': 'P',\n    '\\u24C6': 'Q',\n    '\\uFF31': 'Q',\n    '\\uA756': 'Q',\n    '\\uA758': 'Q',\n    '\\u024A': 'Q',\n    '\\u24C7': 'R',\n    '\\uFF32': 'R',\n    '\\u0154': 'R',\n    '\\u1E58': 'R',\n    '\\u0158': 'R',\n    '\\u0210': 'R',\n    '\\u0212': 'R',\n    '\\u1E5A': 'R',\n    '\\u1E5C': 'R',\n    '\\u0156': 'R',\n    '\\u1E5E': 'R',\n    '\\u024C': 'R',\n    '\\u2C64': 'R',\n    '\\uA75A': 'R',\n    '\\uA7A6': 'R',\n    '\\uA782': 'R',\n    '\\u24C8': 'S',\n    '\\uFF33': 'S',\n    '\\u1E9E': 'S',\n    '\\u015A': 'S',\n    '\\u1E64': 'S',\n    '\\u015C': 'S',\n    '\\u1E60': 'S',\n    '\\u0160': 'S',\n    '\\u1E66': 'S',\n    '\\u1E62': 'S',\n    '\\u1E68': 'S',\n    '\\u0218': 'S',\n    '\\u015E': 'S',\n    '\\u2C7E': 'S',\n    '\\uA7A8': 'S',\n    '\\uA784': 'S',\n    '\\u24C9': 'T',\n    '\\uFF34': 'T',\n    '\\u1E6A': 'T',\n    '\\u0164': 'T',\n    '\\u1E6C': 'T',\n    '\\u021A': 'T',\n    '\\u0162': 'T',\n    '\\u1E70': 'T',\n    '\\u1E6E': 'T',\n    '\\u0166': 'T',\n    '\\u01AC': 'T',\n    '\\u01AE': 'T',\n    '\\u023E': 'T',\n    '\\uA786': 'T',\n    '\\uA728': 'TZ',\n    '\\u24CA': 'U',\n    '\\uFF35': 'U',\n    '\\u00D9': 'U',\n    '\\u00DA': 'U',\n    '\\u00DB': 'U',\n    '\\u0168': 'U',\n    '\\u1E78': 'U',\n    '\\u016A': 'U',\n    '\\u1E7A': 'U',\n    '\\u016C': 'U',\n    '\\u00DC': 'U',\n    '\\u01DB': 'U',\n    '\\u01D7': 'U',\n    '\\u01D5': 'U',\n    '\\u01D9': 'U',\n    '\\u1EE6': 'U',\n    '\\u016E': 'U',\n    '\\u0170': 'U',\n    '\\u01D3': 'U',\n    '\\u0214': 'U',\n    '\\u0216': 'U',\n    '\\u01AF': 'U',\n    '\\u1EEA': 'U',\n    '\\u1EE8': 'U',\n    '\\u1EEE': 'U',\n    '\\u1EEC': 'U',\n    '\\u1EF0': 'U',\n    '\\u1EE4': 'U',\n    '\\u1E72': 'U',\n    '\\u0172': 'U',\n    '\\u1E76': 'U',\n    '\\u1E74': 'U',\n    '\\u0244': 'U',\n    '\\u24CB': 'V',\n    '\\uFF36': 'V',\n    '\\u1E7C': 'V',\n    '\\u1E7E': 'V',\n    '\\u01B2': 'V',\n    '\\uA75E': 'V',\n    '\\u0245': 'V',\n    '\\uA760': 'VY',\n    '\\u24CC': 'W',\n    '\\uFF37': 'W',\n    '\\u1E80': 'W',\n    '\\u1E82': 'W',\n    '\\u0174': 'W',\n    '\\u1E86': 'W',\n    '\\u1E84': 'W',\n    '\\u1E88': 'W',\n    '\\u2C72': 'W',\n    '\\u24CD': 'X',\n    '\\uFF38': 'X',\n    '\\u1E8A': 'X',\n    '\\u1E8C': 'X',\n    '\\u24CE': 'Y',\n    '\\uFF39': 'Y',\n    '\\u1EF2': 'Y',\n    '\\u00DD': 'Y',\n    '\\u0176': 'Y',\n    '\\u1EF8': 'Y',\n    '\\u0232': 'Y',\n    '\\u1E8E': 'Y',\n    '\\u0178': 'Y',\n    '\\u1EF6': 'Y',\n    '\\u1EF4': 'Y',\n    '\\u01B3': 'Y',\n    '\\u024E': 'Y',\n    '\\u1EFE': 'Y',\n    '\\u24CF': 'Z',\n    '\\uFF3A': 'Z',\n    '\\u0179': 'Z',\n    '\\u1E90': 'Z',\n    '\\u017B': 'Z',\n    '\\u017D': 'Z',\n    '\\u1E92': 'Z',\n    '\\u1E94': 'Z',\n    '\\u01B5': 'Z',\n    '\\u0224': 'Z',\n    '\\u2C7F': 'Z',\n    '\\u2C6B': 'Z',\n    '\\uA762': 'Z',\n    '\\u24D0': 'a',\n    '\\uFF41': 'a',\n    '\\u1E9A': 'a',\n    '\\u00E0': 'a',\n    '\\u00E1': 'a',\n    '\\u00E2': 'a',\n    '\\u1EA7': 'a',\n    '\\u1EA5': 'a',\n    '\\u1EAB': 'a',\n    '\\u1EA9': 'a',\n    '\\u00E3': 'a',\n    '\\u0101': 'a',\n    '\\u0103': 'a',\n    '\\u1EB1': 'a',\n    '\\u1EAF': 'a',\n    '\\u1EB5': 'a',\n    '\\u1EB3': 'a',\n    '\\u0227': 'a',\n    '\\u01E1': 'a',\n    '\\u00E4': 'a',\n    '\\u01DF': 'a',\n    '\\u1EA3': 'a',\n    '\\u00E5': 'a',\n    '\\u01FB': 'a',\n    '\\u01CE': 'a',\n    '\\u0201': 'a',\n    '\\u0203': 'a',\n    '\\u1EA1': 'a',\n    '\\u1EAD': 'a',\n    '\\u1EB7': 'a',\n    '\\u1E01': 'a',\n    '\\u0105': 'a',\n    '\\u2C65': 'a',\n    '\\u0250': 'a',\n    '\\uA733': 'aa',\n    '\\u00E6': 'ae',\n    '\\u01FD': 'ae',\n    '\\u01E3': 'ae',\n    '\\uA735': 'ao',\n    '\\uA737': 'au',\n    '\\uA739': 'av',\n    '\\uA73B': 'av',\n    '\\uA73D': 'ay',\n    '\\u24D1': 'b',\n    '\\uFF42': 'b',\n    '\\u1E03': 'b',\n    '\\u1E05': 'b',\n    '\\u1E07': 'b',\n    '\\u0180': 'b',\n    '\\u0183': 'b',\n    '\\u0253': 'b',\n    '\\u24D2': 'c',\n    '\\uFF43': 'c',\n    '\\u0107': 'c',\n    '\\u0109': 'c',\n    '\\u010B': 'c',\n    '\\u010D': 'c',\n    '\\u00E7': 'c',\n    '\\u1E09': 'c',\n    '\\u0188': 'c',\n    '\\u023C': 'c',\n    '\\uA73F': 'c',\n    '\\u2184': 'c',\n    '\\u24D3': 'd',\n    '\\uFF44': 'd',\n    '\\u1E0B': 'd',\n    '\\u010F': 'd',\n    '\\u1E0D': 'd',\n    '\\u1E11': 'd',\n    '\\u1E13': 'd',\n    '\\u1E0F': 'd',\n    '\\u0111': 'd',\n    '\\u018C': 'd',\n    '\\u0256': 'd',\n    '\\u0257': 'd',\n    '\\uA77A': 'd',\n    '\\u01F3': 'dz',\n    '\\u01C6': 'dz',\n    '\\u24D4': 'e',\n    '\\uFF45': 'e',\n    '\\u00E8': 'e',\n    '\\u00E9': 'e',\n    '\\u00EA': 'e',\n    '\\u1EC1': 'e',\n    '\\u1EBF': 'e',\n    '\\u1EC5': 'e',\n    '\\u1EC3': 'e',\n    '\\u1EBD': 'e',\n    '\\u0113': 'e',\n    '\\u1E15': 'e',\n    '\\u1E17': 'e',\n    '\\u0115': 'e',\n    '\\u0117': 'e',\n    '\\u00EB': 'e',\n    '\\u1EBB': 'e',\n    '\\u011B': 'e',\n    '\\u0205': 'e',\n    '\\u0207': 'e',\n    '\\u1EB9': 'e',\n    '\\u1EC7': 'e',\n    '\\u0229': 'e',\n    '\\u1E1D': 'e',\n    '\\u0119': 'e',\n    '\\u1E19': 'e',\n    '\\u1E1B': 'e',\n    '\\u0247': 'e',\n    '\\u025B': 'e',\n    '\\u01DD': 'e',\n    '\\u24D5': 'f',\n    '\\uFF46': 'f',\n    '\\u1E1F': 'f',\n    '\\u0192': 'f',\n    '\\uA77C': 'f',\n    '\\u24D6': 'g',\n    '\\uFF47': 'g',\n    '\\u01F5': 'g',\n    '\\u011D': 'g',\n    '\\u1E21': 'g',\n    '\\u011F': 'g',\n    '\\u0121': 'g',\n    '\\u01E7': 'g',\n    '\\u0123': 'g',\n    '\\u01E5': 'g',\n    '\\u0260': 'g',\n    '\\uA7A1': 'g',\n    '\\u1D79': 'g',\n    '\\uA77F': 'g',\n    '\\u24D7': 'h',\n    '\\uFF48': 'h',\n    '\\u0125': 'h',\n    '\\u1E23': 'h',\n    '\\u1E27': 'h',\n    '\\u021F': 'h',\n    '\\u1E25': 'h',\n    '\\u1E29': 'h',\n    '\\u1E2B': 'h',\n    '\\u1E96': 'h',\n    '\\u0127': 'h',\n    '\\u2C68': 'h',\n    '\\u2C76': 'h',\n    '\\u0265': 'h',\n    '\\u0195': 'hv',\n    '\\u24D8': 'i',\n    '\\uFF49': 'i',\n    '\\u00EC': 'i',\n    '\\u00ED': 'i',\n    '\\u00EE': 'i',\n    '\\u0129': 'i',\n    '\\u012B': 'i',\n    '\\u012D': 'i',\n    '\\u00EF': 'i',\n    '\\u1E2F': 'i',\n    '\\u1EC9': 'i',\n    '\\u01D0': 'i',\n    '\\u0209': 'i',\n    '\\u020B': 'i',\n    '\\u1ECB': 'i',\n    '\\u012F': 'i',\n    '\\u1E2D': 'i',\n    '\\u0268': 'i',\n    '\\u0131': 'i',\n    '\\u24D9': 'j',\n    '\\uFF4A': 'j',\n    '\\u0135': 'j',\n    '\\u01F0': 'j',\n    '\\u0249': 'j',\n    '\\u24DA': 'k',\n    '\\uFF4B': 'k',\n    '\\u1E31': 'k',\n    '\\u01E9': 'k',\n    '\\u1E33': 'k',\n    '\\u0137': 'k',\n    '\\u1E35': 'k',\n    '\\u0199': 'k',\n    '\\u2C6A': 'k',\n    '\\uA741': 'k',\n    '\\uA743': 'k',\n    '\\uA745': 'k',\n    '\\uA7A3': 'k',\n    '\\u24DB': 'l',\n    '\\uFF4C': 'l',\n    '\\u0140': 'l',\n    '\\u013A': 'l',\n    '\\u013E': 'l',\n    '\\u1E37': 'l',\n    '\\u1E39': 'l',\n    '\\u013C': 'l',\n    '\\u1E3D': 'l',\n    '\\u1E3B': 'l',\n    '\\u017F': 'l',\n    '\\u0142': 'l',\n    '\\u019A': 'l',\n    '\\u026B': 'l',\n    '\\u2C61': 'l',\n    '\\uA749': 'l',\n    '\\uA781': 'l',\n    '\\uA747': 'l',\n    '\\u01C9': 'lj',\n    '\\u24DC': 'm',\n    '\\uFF4D': 'm',\n    '\\u1E3F': 'm',\n    '\\u1E41': 'm',\n    '\\u1E43': 'm',\n    '\\u0271': 'm',\n    '\\u026F': 'm',\n    '\\u24DD': 'n',\n    '\\uFF4E': 'n',\n    '\\u01F9': 'n',\n    '\\u0144': 'n',\n    '\\u00F1': 'n',\n    '\\u1E45': 'n',\n    '\\u0148': 'n',\n    '\\u1E47': 'n',\n    '\\u0146': 'n',\n    '\\u1E4B': 'n',\n    '\\u1E49': 'n',\n    '\\u019E': 'n',\n    '\\u0272': 'n',\n    '\\u0149': 'n',\n    '\\uA791': 'n',\n    '\\uA7A5': 'n',\n    '\\u01CC': 'nj',\n    '\\u24DE': 'o',\n    '\\uFF4F': 'o',\n    '\\u00F2': 'o',\n    '\\u00F3': 'o',\n    '\\u00F4': 'o',\n    '\\u1ED3': 'o',\n    '\\u1ED1': 'o',\n    '\\u1ED7': 'o',\n    '\\u1ED5': 'o',\n    '\\u00F5': 'o',\n    '\\u1E4D': 'o',\n    '\\u022D': 'o',\n    '\\u1E4F': 'o',\n    '\\u014D': 'o',\n    '\\u1E51': 'o',\n    '\\u1E53': 'o',\n    '\\u014F': 'o',\n    '\\u022F': 'o',\n    '\\u0231': 'o',\n    '\\u00F6': 'o',\n    '\\u022B': 'o',\n    '\\u1ECF': 'o',\n    '\\u0151': 'o',\n    '\\u01D2': 'o',\n    '\\u020D': 'o',\n    '\\u020F': 'o',\n    '\\u01A1': 'o',\n    '\\u1EDD': 'o',\n    '\\u1EDB': 'o',\n    '\\u1EE1': 'o',\n    '\\u1EDF': 'o',\n    '\\u1EE3': 'o',\n    '\\u1ECD': 'o',\n    '\\u1ED9': 'o',\n    '\\u01EB': 'o',\n    '\\u01ED': 'o',\n    '\\u00F8': 'o',\n    '\\u01FF': 'o',\n    '\\u0254': 'o',\n    '\\uA74B': 'o',\n    '\\uA74D': 'o',\n    '\\u0275': 'o',\n    '\\u0153': 'oe',\n    '\\u01A3': 'oi',\n    '\\u0223': 'ou',\n    '\\uA74F': 'oo',\n    '\\u24DF': 'p',\n    '\\uFF50': 'p',\n    '\\u1E55': 'p',\n    '\\u1E57': 'p',\n    '\\u01A5': 'p',\n    '\\u1D7D': 'p',\n    '\\uA751': 'p',\n    '\\uA753': 'p',\n    '\\uA755': 'p',\n    '\\u24E0': 'q',\n    '\\uFF51': 'q',\n    '\\u024B': 'q',\n    '\\uA757': 'q',\n    '\\uA759': 'q',\n    '\\u24E1': 'r',\n    '\\uFF52': 'r',\n    '\\u0155': 'r',\n    '\\u1E59': 'r',\n    '\\u0159': 'r',\n    '\\u0211': 'r',\n    '\\u0213': 'r',\n    '\\u1E5B': 'r',\n    '\\u1E5D': 'r',\n    '\\u0157': 'r',\n    '\\u1E5F': 'r',\n    '\\u024D': 'r',\n    '\\u027D': 'r',\n    '\\uA75B': 'r',\n    '\\uA7A7': 'r',\n    '\\uA783': 'r',\n    '\\u24E2': 's',\n    '\\uFF53': 's',\n    '\\u00DF': 's',\n    '\\u015B': 's',\n    '\\u1E65': 's',\n    '\\u015D': 's',\n    '\\u1E61': 's',\n    '\\u0161': 's',\n    '\\u1E67': 's',\n    '\\u1E63': 's',\n    '\\u1E69': 's',\n    '\\u0219': 's',\n    '\\u015F': 's',\n    '\\u023F': 's',\n    '\\uA7A9': 's',\n    '\\uA785': 's',\n    '\\u1E9B': 's',\n    '\\u24E3': 't',\n    '\\uFF54': 't',\n    '\\u1E6B': 't',\n    '\\u1E97': 't',\n    '\\u0165': 't',\n    '\\u1E6D': 't',\n    '\\u021B': 't',\n    '\\u0163': 't',\n    '\\u1E71': 't',\n    '\\u1E6F': 't',\n    '\\u0167': 't',\n    '\\u01AD': 't',\n    '\\u0288': 't',\n    '\\u2C66': 't',\n    '\\uA787': 't',\n    '\\uA729': 'tz',\n    '\\u24E4': 'u',\n    '\\uFF55': 'u',\n    '\\u00F9': 'u',\n    '\\u00FA': 'u',\n    '\\u00FB': 'u',\n    '\\u0169': 'u',\n    '\\u1E79': 'u',\n    '\\u016B': 'u',\n    '\\u1E7B': 'u',\n    '\\u016D': 'u',\n    '\\u00FC': 'u',\n    '\\u01DC': 'u',\n    '\\u01D8': 'u',\n    '\\u01D6': 'u',\n    '\\u01DA': 'u',\n    '\\u1EE7': 'u',\n    '\\u016F': 'u',\n    '\\u0171': 'u',\n    '\\u01D4': 'u',\n    '\\u0215': 'u',\n    '\\u0217': 'u',\n    '\\u01B0': 'u',\n    '\\u1EEB': 'u',\n    '\\u1EE9': 'u',\n    '\\u1EEF': 'u',\n    '\\u1EED': 'u',\n    '\\u1EF1': 'u',\n    '\\u1EE5': 'u',\n    '\\u1E73': 'u',\n    '\\u0173': 'u',\n    '\\u1E77': 'u',\n    '\\u1E75': 'u',\n    '\\u0289': 'u',\n    '\\u24E5': 'v',\n    '\\uFF56': 'v',\n    '\\u1E7D': 'v',\n    '\\u1E7F': 'v',\n    '\\u028B': 'v',\n    '\\uA75F': 'v',\n    '\\u028C': 'v',\n    '\\uA761': 'vy',\n    '\\u24E6': 'w',\n    '\\uFF57': 'w',\n    '\\u1E81': 'w',\n    '\\u1E83': 'w',\n    '\\u0175': 'w',\n    '\\u1E87': 'w',\n    '\\u1E85': 'w',\n    '\\u1E98': 'w',\n    '\\u1E89': 'w',\n    '\\u2C73': 'w',\n    '\\u24E7': 'x',\n    '\\uFF58': 'x',\n    '\\u1E8B': 'x',\n    '\\u1E8D': 'x',\n    '\\u24E8': 'y',\n    '\\uFF59': 'y',\n    '\\u1EF3': 'y',\n    '\\u00FD': 'y',\n    '\\u0177': 'y',\n    '\\u1EF9': 'y',\n    '\\u0233': 'y',\n    '\\u1E8F': 'y',\n    '\\u00FF': 'y',\n    '\\u1EF7': 'y',\n    '\\u1E99': 'y',\n    '\\u1EF5': 'y',\n    '\\u01B4': 'y',\n    '\\u024F': 'y',\n    '\\u1EFF': 'y',\n    '\\u24E9': 'z',\n    '\\uFF5A': 'z',\n    '\\u017A': 'z',\n    '\\u1E91': 'z',\n    '\\u017C': 'z',\n    '\\u017E': 'z',\n    '\\u1E93': 'z',\n    '\\u1E95': 'z',\n    '\\u01B6': 'z',\n    '\\u0225': 'z',\n    '\\u0240': 'z',\n    '\\u2C6C': 'z',\n    '\\uA763': 'z',\n    '\\u0386': '\\u0391',\n    '\\u0388': '\\u0395',\n    '\\u0389': '\\u0397',\n    '\\u038A': '\\u0399',\n    '\\u03AA': '\\u0399',\n    '\\u038C': '\\u039F',\n    '\\u038E': '\\u03A5',\n    '\\u03AB': '\\u03A5',\n    '\\u038F': '\\u03A9',\n    '\\u03AC': '\\u03B1',\n    '\\u03AD': '\\u03B5',\n    '\\u03AE': '\\u03B7',\n    '\\u03AF': '\\u03B9',\n    '\\u03CA': '\\u03B9',\n    '\\u0390': '\\u03B9',\n    '\\u03CC': '\\u03BF',\n    '\\u03CD': '\\u03C5',\n    '\\u03CB': '\\u03C5',\n    '\\u03B0': '\\u03C5',\n    '\\u03CE': '\\u03C9',\n    '\\u03C2': '\\u03C3',\n    '\\u2019': '\\''\n  };\n\n  return diacritics;\n});\n\nS2.define('select2/data/base',[\n  '../utils'\n], function (Utils) {\n  function BaseAdapter ($element, options) {\n    BaseAdapter.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(BaseAdapter, Utils.Observable);\n\n  BaseAdapter.prototype.current = function (callback) {\n    throw new Error('The `current` method must be defined in child classes.');\n  };\n\n  BaseAdapter.prototype.query = function (params, callback) {\n    throw new Error('The `query` method must be defined in child classes.');\n  };\n\n  BaseAdapter.prototype.bind = function (container, $container) {\n    // Can be implemented in subclasses\n  };\n\n  BaseAdapter.prototype.destroy = function () {\n    // Can be implemented in subclasses\n  };\n\n  BaseAdapter.prototype.generateResultId = function (container, data) {\n    var id = container.id + '-result-';\n\n    id += Utils.generateChars(4);\n\n    if (data.id != null) {\n      id += '-' + data.id.toString();\n    } else {\n      id += '-' + Utils.generateChars(4);\n    }\n    return id;\n  };\n\n  return BaseAdapter;\n});\n\nS2.define('select2/data/select',[\n  './base',\n  '../utils',\n  'jquery'\n], function (BaseAdapter, Utils, $) {\n  function SelectAdapter ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    SelectAdapter.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(SelectAdapter, BaseAdapter);\n\n  SelectAdapter.prototype.current = function (callback) {\n    var self = this;\n\n    var data = Array.prototype.map.call(\n      this.$element[0].querySelectorAll(':checked'),\n      function (selectedElement) {\n        return self.item($(selectedElement));\n      }\n    );\n\n    callback(data);\n  };\n\n  SelectAdapter.prototype.select = function (data) {\n    var self = this;\n\n    data.selected = true;\n\n    // If data.element is a DOM node, use it instead\n    if (\n      data.element != null && data.element.tagName.toLowerCase() === 'option'\n    ) {\n      data.element.selected = true;\n\n      this.$element.trigger('input').trigger('change');\n\n      return;\n    }\n\n    if (this.$element.prop('multiple')) {\n      this.current(function (currentData) {\n        var val = [];\n\n        data = [data];\n        data.push.apply(data, currentData);\n\n        for (var d = 0; d < data.length; d++) {\n          var id = data[d].id;\n\n          if (val.indexOf(id) === -1) {\n            val.push(id);\n          }\n        }\n\n        self.$element.val(val);\n        self.$element.trigger('input').trigger('change');\n      });\n    } else {\n      var val = data.id;\n\n      this.$element.val(val);\n      this.$element.trigger('input').trigger('change');\n    }\n  };\n\n  SelectAdapter.prototype.unselect = function (data) {\n    var self = this;\n\n    if (!this.$element.prop('multiple')) {\n      return;\n    }\n\n    data.selected = false;\n\n    if (\n      data.element != null &&\n      data.element.tagName.toLowerCase() === 'option'\n    ) {\n      data.element.selected = false;\n\n      this.$element.trigger('input').trigger('change');\n\n      return;\n    }\n\n    this.current(function (currentData) {\n      var val = [];\n\n      for (var d = 0; d < currentData.length; d++) {\n        var id = currentData[d].id;\n\n        if (id !== data.id && val.indexOf(id) === -1) {\n          val.push(id);\n        }\n      }\n\n      self.$element.val(val);\n\n      self.$element.trigger('input').trigger('change');\n    });\n  };\n\n  SelectAdapter.prototype.bind = function (container, $container) {\n    var self = this;\n\n    this.container = container;\n\n    container.on('select', function (params) {\n      self.select(params.data);\n    });\n\n    container.on('unselect', function (params) {\n      self.unselect(params.data);\n    });\n  };\n\n  SelectAdapter.prototype.destroy = function () {\n    // Remove anything added to child elements\n    this.$element.find('*').each(function () {\n      // Remove any custom data set by Select2\n      Utils.RemoveData(this);\n    });\n  };\n\n  SelectAdapter.prototype.query = function (params, callback) {\n    var data = [];\n    var self = this;\n\n    var $options = this.$element.children();\n\n    $options.each(function () {\n      if (\n        this.tagName.toLowerCase() !== 'option' &&\n        this.tagName.toLowerCase() !== 'optgroup'\n      ) {\n        return;\n      }\n\n      var $option = $(this);\n\n      var option = self.item($option);\n\n      var matches = self.matches(params, option);\n\n      if (matches !== null) {\n        data.push(matches);\n      }\n    });\n\n    callback({\n      results: data\n    });\n  };\n\n  SelectAdapter.prototype.addOptions = function ($options) {\n    this.$element.append($options);\n  };\n\n  SelectAdapter.prototype.option = function (data) {\n    var option;\n\n    if (data.children) {\n      option = document.createElement('optgroup');\n      option.label = data.text;\n    } else {\n      option = document.createElement('option');\n\n      if (option.textContent !== undefined) {\n        option.textContent = data.text;\n      } else {\n        option.innerText = data.text;\n      }\n    }\n\n    if (data.id !== undefined) {\n      option.value = data.id;\n    }\n\n    if (data.disabled) {\n      option.disabled = true;\n    }\n\n    if (data.selected) {\n      option.selected = true;\n    }\n\n    if (data.title) {\n      option.title = data.title;\n    }\n\n    var normalizedData = this._normalizeItem(data);\n    normalizedData.element = option;\n\n    // Override the option's data with the combined data\n    Utils.StoreData(option, 'data', normalizedData);\n\n    return $(option);\n  };\n\n  SelectAdapter.prototype.item = function ($option) {\n    var data = {};\n\n    data = Utils.GetData($option[0], 'data');\n\n    if (data != null) {\n      return data;\n    }\n\n    var option = $option[0];\n\n    if (option.tagName.toLowerCase() === 'option') {\n      data = {\n        id: $option.val(),\n        text: $option.text(),\n        disabled: $option.prop('disabled'),\n        selected: $option.prop('selected'),\n        title: $option.prop('title')\n      };\n    } else if (option.tagName.toLowerCase() === 'optgroup') {\n      data = {\n        text: $option.prop('label'),\n        children: [],\n        title: $option.prop('title')\n      };\n\n      var $children = $option.children('option');\n      var children = [];\n\n      for (var c = 0; c < $children.length; c++) {\n        var $child = $($children[c]);\n\n        var child = this.item($child);\n\n        children.push(child);\n      }\n\n      data.children = children;\n    }\n\n    data = this._normalizeItem(data);\n    data.element = $option[0];\n\n    Utils.StoreData($option[0], 'data', data);\n\n    return data;\n  };\n\n  SelectAdapter.prototype._normalizeItem = function (item) {\n    if (item !== Object(item)) {\n      item = {\n        id: item,\n        text: item\n      };\n    }\n\n    item = $.extend({}, {\n      text: ''\n    }, item);\n\n    var defaults = {\n      selected: false,\n      disabled: false\n    };\n\n    if (item.id != null) {\n      item.id = item.id.toString();\n    }\n\n    if (item.text != null) {\n      item.text = item.text.toString();\n    }\n\n    if (item._resultId == null && item.id && this.container != null) {\n      item._resultId = this.generateResultId(this.container, item);\n    }\n\n    return $.extend({}, defaults, item);\n  };\n\n  SelectAdapter.prototype.matches = function (params, data) {\n    var matcher = this.options.get('matcher');\n\n    return matcher(params, data);\n  };\n\n  return SelectAdapter;\n});\n\nS2.define('select2/data/array',[\n  './select',\n  '../utils',\n  'jquery'\n], function (SelectAdapter, Utils, $) {\n  function ArrayAdapter ($element, options) {\n    this._dataToConvert = options.get('data') || [];\n\n    ArrayAdapter.__super__.constructor.call(this, $element, options);\n  }\n\n  Utils.Extend(ArrayAdapter, SelectAdapter);\n\n  ArrayAdapter.prototype.bind = function (container, $container) {\n    ArrayAdapter.__super__.bind.call(this, container, $container);\n\n    this.addOptions(this.convertToOptions(this._dataToConvert));\n  };\n\n  ArrayAdapter.prototype.select = function (data) {\n    var $option = this.$element.find('option').filter(function (i, elm) {\n      return elm.value == data.id.toString();\n    });\n\n    if ($option.length === 0) {\n      $option = this.option(data);\n\n      this.addOptions($option);\n    }\n\n    ArrayAdapter.__super__.select.call(this, data);\n  };\n\n  ArrayAdapter.prototype.convertToOptions = function (data) {\n    var self = this;\n\n    var $existing = this.$element.find('option');\n    var existingIds = $existing.map(function () {\n      return self.item($(this)).id;\n    }).get();\n\n    var $options = [];\n\n    // Filter out all items except for the one passed in the argument\n    function onlyItem (item) {\n      return function () {\n        return $(this).val() == item.id;\n      };\n    }\n\n    for (var d = 0; d < data.length; d++) {\n      var item = this._normalizeItem(data[d]);\n\n      // Skip items which were pre-loaded, only merge the data\n      if (existingIds.indexOf(item.id) >= 0) {\n        var $existingOption = $existing.filter(onlyItem(item));\n\n        var existingData = this.item($existingOption);\n        var newData = $.extend(true, {}, item, existingData);\n\n        var $newOption = this.option(newData);\n\n        $existingOption.replaceWith($newOption);\n\n        continue;\n      }\n\n      var $option = this.option(item);\n\n      if (item.children) {\n        var $children = this.convertToOptions(item.children);\n\n        $option.append($children);\n      }\n\n      $options.push($option);\n    }\n\n    return $options;\n  };\n\n  return ArrayAdapter;\n});\n\nS2.define('select2/data/ajax',[\n  './array',\n  '../utils',\n  'jquery'\n], function (ArrayAdapter, Utils, $) {\n  function AjaxAdapter ($element, options) {\n    this.ajaxOptions = this._applyDefaults(options.get('ajax'));\n\n    if (this.ajaxOptions.processResults != null) {\n      this.processResults = this.ajaxOptions.processResults;\n    }\n\n    AjaxAdapter.__super__.constructor.call(this, $element, options);\n  }\n\n  Utils.Extend(AjaxAdapter, ArrayAdapter);\n\n  AjaxAdapter.prototype._applyDefaults = function (options) {\n    var defaults = {\n      data: function (params) {\n        return $.extend({}, params, {\n          q: params.term\n        });\n      },\n      transport: function (params, success, failure) {\n        var $request = $.ajax(params);\n\n        $request.then(success);\n        $request.fail(failure);\n\n        return $request;\n      }\n    };\n\n    return $.extend({}, defaults, options, true);\n  };\n\n  AjaxAdapter.prototype.processResults = function (results) {\n    return results;\n  };\n\n  AjaxAdapter.prototype.query = function (params, callback) {\n    var matches = [];\n    var self = this;\n\n    if (this._request != null) {\n      // JSONP requests cannot always be aborted\n      if (typeof this._request.abort === 'function') {\n        this._request.abort();\n      }\n\n      this._request = null;\n    }\n\n    var options = $.extend({\n      type: 'GET'\n    }, this.ajaxOptions);\n\n    if (typeof options.url === 'function') {\n      options.url = options.url.call(this.$element, params);\n    }\n\n    if (typeof options.data === 'function') {\n      options.data = options.data.call(this.$element, params);\n    }\n\n    function request () {\n      var $request = options.transport(options, function (data) {\n        var results = self.processResults(data, params);\n\n        if (self.options.get('debug') && window.console && console.error) {\n          // Check to make sure that the response included a `results` key.\n          if (!results || !results.results || !Array.isArray(results.results)) {\n            console.error(\n              'Select2: The AJAX results did not return an array in the ' +\n              '`results` key of the response.'\n            );\n          }\n        }\n\n        callback(results);\n      }, function () {\n        // Attempt to detect if a request was aborted\n        // Only works if the transport exposes a status property\n        if ('status' in $request &&\n            ($request.status === 0 || $request.status === '0')) {\n          return;\n        }\n\n        self.trigger('results:message', {\n          message: 'errorLoading'\n        });\n      });\n\n      self._request = $request;\n    }\n\n    if (this.ajaxOptions.delay && params.term != null) {\n      if (this._queryTimeout) {\n        window.clearTimeout(this._queryTimeout);\n      }\n\n      this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);\n    } else {\n      request();\n    }\n  };\n\n  return AjaxAdapter;\n});\n\nS2.define('select2/data/tags',[\n  'jquery'\n], function ($) {\n  function Tags (decorated, $element, options) {\n    var tags = options.get('tags');\n\n    var createTag = options.get('createTag');\n\n    if (createTag !== undefined) {\n      this.createTag = createTag;\n    }\n\n    var insertTag = options.get('insertTag');\n\n    if (insertTag !== undefined) {\n        this.insertTag = insertTag;\n    }\n\n    decorated.call(this, $element, options);\n\n    if (Array.isArray(tags)) {\n      for (var t = 0; t < tags.length; t++) {\n        var tag = tags[t];\n        var item = this._normalizeItem(tag);\n\n        var $option = this.option(item);\n\n        this.$element.append($option);\n      }\n    }\n  }\n\n  Tags.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    this._removeOldTags();\n\n    if (params.term == null || params.page != null) {\n      decorated.call(this, params, callback);\n      return;\n    }\n\n    function wrapper (obj, child) {\n      var data = obj.results;\n\n      for (var i = 0; i < data.length; i++) {\n        var option = data[i];\n\n        var checkChildren = (\n          option.children != null &&\n          !wrapper({\n            results: option.children\n          }, true)\n        );\n\n        var optionText = (option.text || '').toUpperCase();\n        var paramsTerm = (params.term || '').toUpperCase();\n\n        var checkText = optionText === paramsTerm;\n\n        if (checkText || checkChildren) {\n          if (child) {\n            return false;\n          }\n\n          obj.data = data;\n          callback(obj);\n\n          return;\n        }\n      }\n\n      if (child) {\n        return true;\n      }\n\n      var tag = self.createTag(params);\n\n      if (tag != null) {\n        var $option = self.option(tag);\n        $option.attr('data-select2-tag', 'true');\n\n        self.addOptions([$option]);\n\n        self.insertTag(data, tag);\n      }\n\n      obj.results = data;\n\n      callback(obj);\n    }\n\n    decorated.call(this, params, wrapper);\n  };\n\n  Tags.prototype.createTag = function (decorated, params) {\n    if (params.term == null) {\n      return null;\n    }\n\n    var term = params.term.trim();\n\n    if (term === '') {\n      return null;\n    }\n\n    return {\n      id: term,\n      text: term\n    };\n  };\n\n  Tags.prototype.insertTag = function (_, data, tag) {\n    data.unshift(tag);\n  };\n\n  Tags.prototype._removeOldTags = function (_) {\n    var $options = this.$element.find('option[data-select2-tag]');\n\n    $options.each(function () {\n      if (this.selected) {\n        return;\n      }\n\n      $(this).remove();\n    });\n  };\n\n  return Tags;\n});\n\nS2.define('select2/data/tokenizer',[\n  'jquery'\n], function ($) {\n  function Tokenizer (decorated, $element, options) {\n    var tokenizer = options.get('tokenizer');\n\n    if (tokenizer !== undefined) {\n      this.tokenizer = tokenizer;\n    }\n\n    decorated.call(this, $element, options);\n  }\n\n  Tokenizer.prototype.bind = function (decorated, container, $container) {\n    decorated.call(this, container, $container);\n\n    this.$search =  container.dropdown.$search || container.selection.$search ||\n      $container.find('.select2-search__field');\n  };\n\n  Tokenizer.prototype.query = function (decorated, params, callback) {\n    var self = this;\n\n    function createAndSelect (data) {\n      // Normalize the data object so we can use it for checks\n      var item = self._normalizeItem(data);\n\n      // Check if the data object already exists as a tag\n      // Select it if it doesn't\n      var $existingOptions = self.$element.find('option').filter(function () {\n        return $(this).val() === item.id;\n      });\n\n      // If an existing option wasn't found for it, create the option\n      if (!$existingOptions.length) {\n        var $option = self.option(item);\n        $option.attr('data-select2-tag', true);\n\n        self._removeOldTags();\n        self.addOptions([$option]);\n      }\n\n      // Select the item, now that we know there is an option for it\n      select(item);\n    }\n\n    function select (data) {\n      self.trigger('select', {\n        data: data\n      });\n    }\n\n    params.term = params.term || '';\n\n    var tokenData = this.tokenizer(params, this.options, createAndSelect);\n\n    if (tokenData.term !== params.term) {\n      // Replace the search term if we have the search box\n      if (this.$search.length) {\n        this.$search.val(tokenData.term);\n        this.$search.trigger('focus');\n      }\n\n      params.term = tokenData.term;\n    }\n\n    decorated.call(this, params, callback);\n  };\n\n  Tokenizer.prototype.tokenizer = function (_, params, options, callback) {\n    var separators = options.get('tokenSeparators') || [];\n    var term = params.term;\n    var i = 0;\n\n    var createTag = this.createTag || function (params) {\n      return {\n        id: params.term,\n        text: params.term\n      };\n    };\n\n    while (i < term.length) {\n      var termChar = term[i];\n\n      if (separators.indexOf(termChar) === -1) {\n        i++;\n\n        continue;\n      }\n\n      var part = term.substr(0, i);\n      var partParams = $.extend({}, params, {\n        term: part\n      });\n\n      var data = createTag(partParams);\n\n      if (data == null) {\n        i++;\n        continue;\n      }\n\n      callback(data);\n\n      // Reset the term to not include the tokenized portion\n      term = term.substr(i + 1) || '';\n      i = 0;\n    }\n\n    return {\n      term: term\n    };\n  };\n\n  return Tokenizer;\n});\n\nS2.define('select2/data/minimumInputLength',[\n\n], function () {\n  function MinimumInputLength (decorated, $e, options) {\n    this.minimumInputLength = options.get('minimumInputLength');\n\n    decorated.call(this, $e, options);\n  }\n\n  MinimumInputLength.prototype.query = function (decorated, params, callback) {\n    params.term = params.term || '';\n\n    if (params.term.length < this.minimumInputLength) {\n      this.trigger('results:message', {\n        message: 'inputTooShort',\n        args: {\n          minimum: this.minimumInputLength,\n          input: params.term,\n          params: params\n        }\n      });\n\n      return;\n    }\n\n    decorated.call(this, params, callback);\n  };\n\n  return MinimumInputLength;\n});\n\nS2.define('select2/data/maximumInputLength',[\n\n], function () {\n  function MaximumInputLength (decorated, $e, options) {\n    this.maximumInputLength = options.get('maximumInputLength');\n\n    decorated.call(this, $e, options);\n  }\n\n  MaximumInputLength.prototype.query = function (decorated, params, callback) {\n    params.term = params.term || '';\n\n    if (this.maximumInputLength > 0 &&\n        params.term.length > this.maximumInputLength) {\n      this.trigger('results:message', {\n        message: 'inputTooLong',\n        args: {\n          maximum: this.maximumInputLength,\n          input: params.term,\n          params: params\n        }\n      });\n\n      return;\n    }\n\n    decorated.call(this, params, callback);\n  };\n\n  return MaximumInputLength;\n});\n\nS2.define('select2/data/maximumSelectionLength',[\n\n], function (){\n  function MaximumSelectionLength (decorated, $e, options) {\n    this.maximumSelectionLength = options.get('maximumSelectionLength');\n\n    decorated.call(this, $e, options);\n  }\n\n  MaximumSelectionLength.prototype.bind =\n    function (decorated, container, $container) {\n      var self = this;\n\n      decorated.call(this, container, $container);\n\n      container.on('select', function () {\n        self._checkIfMaximumSelected();\n      });\n  };\n\n  MaximumSelectionLength.prototype.query =\n    function (decorated, params, callback) {\n      var self = this;\n\n      this._checkIfMaximumSelected(function () {\n        decorated.call(self, params, callback);\n      });\n  };\n\n  MaximumSelectionLength.prototype._checkIfMaximumSelected =\n    function (_, successCallback) {\n      var self = this;\n\n      this.current(function (currentData) {\n        var count = currentData != null ? currentData.length : 0;\n        if (self.maximumSelectionLength > 0 &&\n          count >= self.maximumSelectionLength) {\n          self.trigger('results:message', {\n            message: 'maximumSelected',\n            args: {\n              maximum: self.maximumSelectionLength\n            }\n          });\n          return;\n        }\n\n        if (successCallback) {\n          successCallback();\n        }\n      });\n  };\n\n  return MaximumSelectionLength;\n});\n\nS2.define('select2/dropdown',[\n  'jquery',\n  './utils'\n], function ($, Utils) {\n  function Dropdown ($element, options) {\n    this.$element = $element;\n    this.options = options;\n\n    Dropdown.__super__.constructor.call(this);\n  }\n\n  Utils.Extend(Dropdown, Utils.Observable);\n\n  Dropdown.prototype.render = function () {\n    var $dropdown = $(\n      '<span class=\"select2-dropdown\">' +\n        '<span class=\"select2-results\"></span>' +\n      '</span>'\n    );\n\n    $dropdown.attr('dir', this.options.get('dir'));\n\n    this.$dropdown = $dropdown;\n\n    return $dropdown;\n  };\n\n  Dropdown.prototype.bind = function () {\n    // Should be implemented in subclasses\n  };\n\n  Dropdown.prototype.position = function ($dropdown, $container) {\n    // Should be implemented in subclasses\n  };\n\n  Dropdown.prototype.destroy = function () {\n    // Remove the dropdown from the DOM\n    this.$dropdown.remove();\n  };\n\n  return Dropdown;\n});\n\nS2.define('select2/dropdown/search',[\n  'jquery'\n], function ($) {\n  function Search () { }\n\n  Search.prototype.render = function (decorated) {\n    var $rendered = decorated.call(this);\n    var searchLabel = this.options.get('translations').get('search');\n\n    var $search = $(\n      '<span class=\"select2-search select2-search--dropdown\">' +\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\n        ' autocorrect=\"off\" autocapitalize=\"none\"' +\n        ' spellcheck=\"false\" role=\"searchbox\" aria-autocomplete=\"list\" />' +\n      '</span>'\n    );\n\n    this.$searchContainer = $search;\n    this.$search = $search.find('input');\n\n    this.$search.prop('autocomplete', this.options.get('autocomplete'));\n    this.$search.attr('aria-label', searchLabel());\n\n    $rendered.prepend($search);\n\n    return $rendered;\n  };\n\n  Search.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    var resultsId = container.id + '-results';\n\n    decorated.call(this, container, $container);\n\n    this.$search.on('keydown', function (evt) {\n      self.trigger('keypress', evt);\n\n      self._keyUpPrevented = evt.isDefaultPrevented();\n    });\n\n    // Workaround for browsers which do not support the `input` event\n    // This will prevent double-triggering of events for browsers which support\n    // both the `keyup` and `input` events.\n    this.$search.on('input', function (evt) {\n      // Unbind the duplicated `keyup` event\n      $(this).off('keyup');\n    });\n\n    this.$search.on('keyup input', function (evt) {\n      self.handleSearch(evt);\n    });\n\n    container.on('open', function () {\n      self.$search.attr('tabindex', 0);\n      self.$search.attr('aria-controls', resultsId);\n\n      self.$search.trigger('focus');\n\n      window.setTimeout(function () {\n        self.$search.trigger('focus');\n      }, 0);\n    });\n\n    container.on('close', function () {\n      self.$search.attr('tabindex', -1);\n      self.$search.removeAttr('aria-controls');\n      self.$search.removeAttr('aria-activedescendant');\n\n      self.$search.val('');\n      self.$search.trigger('blur');\n    });\n\n    container.on('focus', function () {\n      if (!container.isOpen()) {\n        self.$search.trigger('focus');\n      }\n    });\n\n    container.on('results:all', function (params) {\n      if (params.query.term == null || params.query.term === '') {\n        var showSearch = self.showSearch(params);\n\n        if (showSearch) {\n          self.$searchContainer[0].classList.remove('select2-search--hide');\n        } else {\n          self.$searchContainer[0].classList.add('select2-search--hide');\n        }\n      }\n    });\n\n    container.on('results:focus', function (params) {\n      if (params.data._resultId) {\n        self.$search.attr('aria-activedescendant', params.data._resultId);\n      } else {\n        self.$search.removeAttr('aria-activedescendant');\n      }\n    });\n  };\n\n  Search.prototype.handleSearch = function (evt) {\n    if (!this._keyUpPrevented) {\n      var input = this.$search.val();\n\n      this.trigger('query', {\n        term: input\n      });\n    }\n\n    this._keyUpPrevented = false;\n  };\n\n  Search.prototype.showSearch = function (_, params) {\n    return true;\n  };\n\n  return Search;\n});\n\nS2.define('select2/dropdown/hidePlaceholder',[\n\n], function () {\n  function HidePlaceholder (decorated, $element, options, dataAdapter) {\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\n\n    decorated.call(this, $element, options, dataAdapter);\n  }\n\n  HidePlaceholder.prototype.append = function (decorated, data) {\n    data.results = this.removePlaceholder(data.results);\n\n    decorated.call(this, data);\n  };\n\n  HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {\n    if (typeof placeholder === 'string') {\n      placeholder = {\n        id: '',\n        text: placeholder\n      };\n    }\n\n    return placeholder;\n  };\n\n  HidePlaceholder.prototype.removePlaceholder = function (_, data) {\n    var modifiedData = data.slice(0);\n\n    for (var d = data.length - 1; d >= 0; d--) {\n      var item = data[d];\n\n      if (this.placeholder.id === item.id) {\n        modifiedData.splice(d, 1);\n      }\n    }\n\n    return modifiedData;\n  };\n\n  return HidePlaceholder;\n});\n\nS2.define('select2/dropdown/infiniteScroll',[\n  'jquery'\n], function ($) {\n  function InfiniteScroll (decorated, $element, options, dataAdapter) {\n    this.lastParams = {};\n\n    decorated.call(this, $element, options, dataAdapter);\n\n    this.$loadingMore = this.createLoadingMore();\n    this.loading = false;\n  }\n\n  InfiniteScroll.prototype.append = function (decorated, data) {\n    this.$loadingMore.remove();\n    this.loading = false;\n\n    decorated.call(this, data);\n\n    if (this.showLoadingMore(data)) {\n      this.$results.append(this.$loadingMore);\n      this.loadMoreIfNeeded();\n    }\n  };\n\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('query', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n\n    container.on('query:append', function (params) {\n      self.lastParams = params;\n      self.loading = true;\n    });\n\n    this.$results.on('scroll', this.loadMoreIfNeeded.bind(this));\n  };\n\n  InfiniteScroll.prototype.loadMoreIfNeeded = function () {\n    var isLoadMoreVisible = $.contains(\n      document.documentElement,\n      this.$loadingMore[0]\n    );\n\n    if (this.loading || !isLoadMoreVisible) {\n      return;\n    }\n\n    var currentOffset = this.$results.offset().top +\n      this.$results.outerHeight(false);\n    var loadingMoreOffset = this.$loadingMore.offset().top +\n      this.$loadingMore.outerHeight(false);\n\n    if (currentOffset + 50 >= loadingMoreOffset) {\n      this.loadMore();\n    }\n  };\n\n  InfiniteScroll.prototype.loadMore = function () {\n    this.loading = true;\n\n    var params = $.extend({}, {page: 1}, this.lastParams);\n\n    params.page++;\n\n    this.trigger('query:append', params);\n  };\n\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\n    return data.pagination && data.pagination.more;\n  };\n\n  InfiniteScroll.prototype.createLoadingMore = function () {\n    var $option = $(\n      '<li ' +\n      'class=\"select2-results__option select2-results__option--load-more\"' +\n      'role=\"option\" aria-disabled=\"true\"></li>'\n    );\n\n    var message = this.options.get('translations').get('loadingMore');\n\n    $option.html(message(this.lastParams));\n\n    return $option;\n  };\n\n  return InfiniteScroll;\n});\n\nS2.define('select2/dropdown/attachBody',[\n  'jquery',\n  '../utils'\n], function ($, Utils) {\n  function AttachBody (decorated, $element, options) {\n    this.$dropdownParent = $(options.get('dropdownParent') || document.body);\n\n    decorated.call(this, $element, options);\n  }\n\n  AttachBody.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('open', function () {\n      self._showDropdown();\n      self._attachPositioningHandler(container);\n\n      // Must bind after the results handlers to ensure correct sizing\n      self._bindContainerResultHandlers(container);\n    });\n\n    container.on('close', function () {\n      self._hideDropdown();\n      self._detachPositioningHandler(container);\n    });\n\n    this.$dropdownContainer.on('mousedown', function (evt) {\n      evt.stopPropagation();\n    });\n  };\n\n  AttachBody.prototype.destroy = function (decorated) {\n    decorated.call(this);\n\n    this.$dropdownContainer.remove();\n  };\n\n  AttachBody.prototype.position = function (decorated, $dropdown, $container) {\n    // Clone all of the container classes\n    $dropdown.attr('class', $container.attr('class'));\n\n    $dropdown[0].classList.remove('select2');\n    $dropdown[0].classList.add('select2-container--open');\n\n    $dropdown.css({\n      position: 'absolute',\n      top: -999999\n    });\n\n    this.$container = $container;\n  };\n\n  AttachBody.prototype.render = function (decorated) {\n    var $container = $('<span></span>');\n\n    var $dropdown = decorated.call(this);\n    $container.append($dropdown);\n\n    this.$dropdownContainer = $container;\n\n    return $container;\n  };\n\n  AttachBody.prototype._hideDropdown = function (decorated) {\n    this.$dropdownContainer.detach();\n  };\n\n  AttachBody.prototype._bindContainerResultHandlers =\n      function (decorated, container) {\n\n    // These should only be bound once\n    if (this._containerResultsHandlersBound) {\n      return;\n    }\n\n    var self = this;\n\n    container.on('results:all', function () {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n\n    container.on('results:append', function () {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n\n    container.on('results:message', function () {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n\n    container.on('select', function () {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n\n    container.on('unselect', function () {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n\n    this._containerResultsHandlersBound = true;\n  };\n\n  AttachBody.prototype._attachPositioningHandler =\n      function (decorated, container) {\n    var self = this;\n\n    var scrollEvent = 'scroll.select2.' + container.id;\n    var resizeEvent = 'resize.select2.' + container.id;\n    var orientationEvent = 'orientationchange.select2.' + container.id;\n\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\n    $watchers.each(function () {\n      Utils.StoreData(this, 'select2-scroll-position', {\n        x: $(this).scrollLeft(),\n        y: $(this).scrollTop()\n      });\n    });\n\n    $watchers.on(scrollEvent, function (ev) {\n      var position = Utils.GetData(this, 'select2-scroll-position');\n      $(this).scrollTop(position.y);\n    });\n\n    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,\n      function (e) {\n      self._positionDropdown();\n      self._resizeDropdown();\n    });\n  };\n\n  AttachBody.prototype._detachPositioningHandler =\n      function (decorated, container) {\n    var scrollEvent = 'scroll.select2.' + container.id;\n    var resizeEvent = 'resize.select2.' + container.id;\n    var orientationEvent = 'orientationchange.select2.' + container.id;\n\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\n    $watchers.off(scrollEvent);\n\n    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);\n  };\n\n  AttachBody.prototype._positionDropdown = function () {\n    var $window = $(window);\n\n    var isCurrentlyAbove = this.$dropdown[0].classList\n      .contains('select2-dropdown--above');\n    var isCurrentlyBelow = this.$dropdown[0].classList\n      .contains('select2-dropdown--below');\n\n    var newDirection = null;\n\n    var offset = this.$container.offset();\n\n    offset.bottom = offset.top + this.$container.outerHeight(false);\n\n    var container = {\n      height: this.$container.outerHeight(false)\n    };\n\n    container.top = offset.top;\n    container.bottom = offset.top + container.height;\n\n    var dropdown = {\n      height: this.$dropdown.outerHeight(false)\n    };\n\n    var viewport = {\n      top: $window.scrollTop(),\n      bottom: $window.scrollTop() + $window.height()\n    };\n\n    var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);\n    var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);\n\n    var css = {\n      left: offset.left,\n      top: container.bottom\n    };\n\n    // Determine what the parent element is to use for calculating the offset\n    var $offsetParent = this.$dropdownParent;\n\n    // For statically positioned elements, we need to get the element\n    // that is determining the offset\n    if ($offsetParent.css('position') === 'static') {\n      $offsetParent = $offsetParent.offsetParent();\n    }\n\n    var parentOffset = {\n      top: 0,\n      left: 0\n    };\n\n    if (\n      $.contains(document.body, $offsetParent[0]) ||\n      $offsetParent[0].isConnected\n      ) {\n      parentOffset = $offsetParent.offset();\n    }\n\n    css.top -= parentOffset.top;\n    css.left -= parentOffset.left;\n\n    if (!isCurrentlyAbove && !isCurrentlyBelow) {\n      newDirection = 'below';\n    }\n\n    if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\n      newDirection = 'above';\n    } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\n      newDirection = 'below';\n    }\n\n    if (newDirection == 'above' ||\n      (isCurrentlyAbove && newDirection !== 'below')) {\n      css.top = container.top - parentOffset.top - dropdown.height;\n    }\n\n    if (newDirection != null) {\n      this.$dropdown[0].classList.remove('select2-dropdown--below');\n      this.$dropdown[0].classList.remove('select2-dropdown--above');\n      this.$dropdown[0].classList.add('select2-dropdown--' + newDirection);\n\n      this.$container[0].classList.remove('select2-container--below');\n      this.$container[0].classList.remove('select2-container--above');\n      this.$container[0].classList.add('select2-container--' + newDirection);\n    }\n\n    this.$dropdownContainer.css(css);\n  };\n\n  AttachBody.prototype._resizeDropdown = function () {\n    var css = {\n      width: this.$container.outerWidth(false) + 'px'\n    };\n\n    if (this.options.get('dropdownAutoWidth')) {\n      css.minWidth = css.width;\n      css.position = 'relative';\n      css.width = 'auto';\n    }\n\n    this.$dropdown.css(css);\n  };\n\n  AttachBody.prototype._showDropdown = function (decorated) {\n    this.$dropdownContainer.appendTo(this.$dropdownParent);\n\n    this._positionDropdown();\n    this._resizeDropdown();\n  };\n\n  return AttachBody;\n});\n\nS2.define('select2/dropdown/minimumResultsForSearch',[\n\n], function () {\n  function countResults (data) {\n    var count = 0;\n\n    for (var d = 0; d < data.length; d++) {\n      var item = data[d];\n\n      if (item.children) {\n        count += countResults(item.children);\n      } else {\n        count++;\n      }\n    }\n\n    return count;\n  }\n\n  function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {\n    this.minimumResultsForSearch = options.get('minimumResultsForSearch');\n\n    if (this.minimumResultsForSearch < 0) {\n      this.minimumResultsForSearch = Infinity;\n    }\n\n    decorated.call(this, $element, options, dataAdapter);\n  }\n\n  MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {\n    if (countResults(params.data.results) < this.minimumResultsForSearch) {\n      return false;\n    }\n\n    return decorated.call(this, params);\n  };\n\n  return MinimumResultsForSearch;\n});\n\nS2.define('select2/dropdown/selectOnClose',[\n  '../utils'\n], function (Utils) {\n  function SelectOnClose () { }\n\n  SelectOnClose.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('close', function (params) {\n      self._handleSelectOnClose(params);\n    });\n  };\n\n  SelectOnClose.prototype._handleSelectOnClose = function (_, params) {\n    if (params && params.originalSelect2Event != null) {\n      var event = params.originalSelect2Event;\n\n      // Don't select an item if the close event was triggered from a select or\n      // unselect event\n      if (event._type === 'select' || event._type === 'unselect') {\n        return;\n      }\n    }\n\n    var $highlightedResults = this.getHighlightedResults();\n\n    // Only select highlighted results\n    if ($highlightedResults.length < 1) {\n      return;\n    }\n\n    var data = Utils.GetData($highlightedResults[0], 'data');\n\n    // Don't re-select already selected resulte\n    if (\n      (data.element != null && data.element.selected) ||\n      (data.element == null && data.selected)\n    ) {\n      return;\n    }\n\n    this.trigger('select', {\n        data: data\n    });\n  };\n\n  return SelectOnClose;\n});\n\nS2.define('select2/dropdown/closeOnSelect',[\n\n], function () {\n  function CloseOnSelect () { }\n\n  CloseOnSelect.prototype.bind = function (decorated, container, $container) {\n    var self = this;\n\n    decorated.call(this, container, $container);\n\n    container.on('select', function (evt) {\n      self._selectTriggered(evt);\n    });\n\n    container.on('unselect', function (evt) {\n      self._selectTriggered(evt);\n    });\n  };\n\n  CloseOnSelect.prototype._selectTriggered = function (_, evt) {\n    var originalEvent = evt.originalEvent;\n\n    // Don't close if the control key is being held\n    if (originalEvent && (originalEvent.ctrlKey || originalEvent.metaKey)) {\n      return;\n    }\n\n    this.trigger('close', {\n      originalEvent: originalEvent,\n      originalSelect2Event: evt\n    });\n  };\n\n  return CloseOnSelect;\n});\n\nS2.define('select2/dropdown/dropdownCss',[\n  '../utils'\n], function (Utils) {\n  function DropdownCSS () { }\n\n  DropdownCSS.prototype.render = function (decorated) {\n    var $dropdown = decorated.call(this);\n\n    var dropdownCssClass = this.options.get('dropdownCssClass') || '';\n\n    if (dropdownCssClass.indexOf(':all:') !== -1) {\n      dropdownCssClass = dropdownCssClass.replace(':all:', '');\n\n      Utils.copyNonInternalCssClasses($dropdown[0], this.$element[0]);\n    }\n\n    $dropdown.addClass(dropdownCssClass);\n\n    return $dropdown;\n  };\n\n  return DropdownCSS;\n});\n\nS2.define('select2/dropdown/tagsSearchHighlight',[\n  '../utils'\n], function (Utils) {\n  function TagsSearchHighlight () { }\n\n  TagsSearchHighlight.prototype.highlightFirstItem = function (decorated) {\n    var $options = this.$results\n    .find(\n      '.select2-results__option--selectable' +\n      ':not(.select2-results__option--selected)'\n    );\n\n    if ($options.length > 0) {\n      var $firstOption = $options.first();\n      var data = Utils.GetData($firstOption[0], 'data');\n      var firstElement = data.element;\n\n      if (firstElement && firstElement.getAttribute) {\n        if (firstElement.getAttribute('data-select2-tag') === 'true') {\n          $firstOption.trigger('mouseenter');\n\n          return;\n        }\n      }\n    }\n\n    decorated.call(this);\n  };\n\n  return TagsSearchHighlight;\n});\n\nS2.define('select2/i18n/en',[],function () {\n  // English\n  return {\n    errorLoading: function () {\n      return 'The results could not be loaded.';\n    },\n    inputTooLong: function (args) {\n      var overChars = args.input.length - args.maximum;\n\n      var message = 'Please delete ' + overChars + ' character';\n\n      if (overChars != 1) {\n        message += 's';\n      }\n\n      return message;\n    },\n    inputTooShort: function (args) {\n      var remainingChars = args.minimum - args.input.length;\n\n      var message = 'Please enter ' + remainingChars + ' or more characters';\n\n      return message;\n    },\n    loadingMore: function () {\n      return 'Loading more results';\n    },\n    maximumSelected: function (args) {\n      var message = 'You can only select ' + args.maximum + ' item';\n\n      if (args.maximum != 1) {\n        message += 's';\n      }\n\n      return message;\n    },\n    noResults: function () {\n      return 'No results found';\n    },\n    searching: function () {\n      return 'Searching';\n    },\n    removeAllItems: function () {\n      return 'Remove all items';\n    },\n    removeItem: function () {\n      return 'Remove item';\n    },\n    search: function() {\n      return 'Search';\n    }\n  };\n});\n\nS2.define('select2/defaults',[\n  'jquery',\n\n  './results',\n\n  './selection/single',\n  './selection/multiple',\n  './selection/placeholder',\n  './selection/allowClear',\n  './selection/search',\n  './selection/selectionCss',\n  './selection/eventRelay',\n\n  './utils',\n  './translation',\n  './diacritics',\n\n  './data/select',\n  './data/array',\n  './data/ajax',\n  './data/tags',\n  './data/tokenizer',\n  './data/minimumInputLength',\n  './data/maximumInputLength',\n  './data/maximumSelectionLength',\n\n  './dropdown',\n  './dropdown/search',\n  './dropdown/hidePlaceholder',\n  './dropdown/infiniteScroll',\n  './dropdown/attachBody',\n  './dropdown/minimumResultsForSearch',\n  './dropdown/selectOnClose',\n  './dropdown/closeOnSelect',\n  './dropdown/dropdownCss',\n  './dropdown/tagsSearchHighlight',\n\n  './i18n/en'\n], function ($,\n\n             ResultsList,\n\n             SingleSelection, MultipleSelection, Placeholder, AllowClear,\n             SelectionSearch, SelectionCSS, EventRelay,\n\n             Utils, Translation, DIACRITICS,\n\n             SelectData, ArrayData, AjaxData, Tags, Tokenizer,\n             MinimumInputLength, MaximumInputLength, MaximumSelectionLength,\n\n             Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,\n             AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,\n             DropdownCSS, TagsSearchHighlight,\n\n             EnglishTranslation) {\n  function Defaults () {\n    this.reset();\n  }\n\n  Defaults.prototype.apply = function (options) {\n    options = $.extend(true, {}, this.defaults, options);\n\n    if (options.dataAdapter == null) {\n      if (options.ajax != null) {\n        options.dataAdapter = AjaxData;\n      } else if (options.data != null) {\n        options.dataAdapter = ArrayData;\n      } else {\n        options.dataAdapter = SelectData;\n      }\n\n      if (options.minimumInputLength > 0) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          MinimumInputLength\n        );\n      }\n\n      if (options.maximumInputLength > 0) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          MaximumInputLength\n        );\n      }\n\n      if (options.maximumSelectionLength > 0) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          MaximumSelectionLength\n        );\n      }\n\n      if (options.tags) {\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\n      }\n\n      if (options.tokenSeparators != null || options.tokenizer != null) {\n        options.dataAdapter = Utils.Decorate(\n          options.dataAdapter,\n          Tokenizer\n        );\n      }\n    }\n\n    if (options.resultsAdapter == null) {\n      options.resultsAdapter = ResultsList;\n\n      if (options.ajax != null) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          InfiniteScroll\n        );\n      }\n\n      if (options.placeholder != null) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          HidePlaceholder\n        );\n      }\n\n      if (options.selectOnClose) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          SelectOnClose\n        );\n      }\n\n      if (options.tags) {\n        options.resultsAdapter = Utils.Decorate(\n          options.resultsAdapter,\n          TagsSearchHighlight\n        );\n      }\n    }\n\n    if (options.dropdownAdapter == null) {\n      if (options.multiple) {\n        options.dropdownAdapter = Dropdown;\n      } else {\n        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);\n\n        options.dropdownAdapter = SearchableDropdown;\n      }\n\n      if (options.minimumResultsForSearch !== 0) {\n        options.dropdownAdapter = Utils.Decorate(\n          options.dropdownAdapter,\n          MinimumResultsForSearch\n        );\n      }\n\n      if (options.closeOnSelect) {\n        options.dropdownAdapter = Utils.Decorate(\n          options.dropdownAdapter,\n          CloseOnSelect\n        );\n      }\n\n      if (options.dropdownCssClass != null) {\n        options.dropdownAdapter = Utils.Decorate(\n          options.dropdownAdapter,\n          DropdownCSS\n        );\n      }\n\n      options.dropdownAdapter = Utils.Decorate(\n        options.dropdownAdapter,\n        AttachBody\n      );\n    }\n\n    if (options.selectionAdapter == null) {\n      if (options.multiple) {\n        options.selectionAdapter = MultipleSelection;\n      } else {\n        options.selectionAdapter = SingleSelection;\n      }\n\n      // Add the placeholder mixin if a placeholder was specified\n      if (options.placeholder != null) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          Placeholder\n        );\n      }\n\n      if (options.allowClear) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          AllowClear\n        );\n      }\n\n      if (options.multiple) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          SelectionSearch\n        );\n      }\n\n      if (options.selectionCssClass != null) {\n        options.selectionAdapter = Utils.Decorate(\n          options.selectionAdapter,\n          SelectionCSS\n        );\n      }\n\n      options.selectionAdapter = Utils.Decorate(\n        options.selectionAdapter,\n        EventRelay\n      );\n    }\n\n    // If the defaults were not previously applied from an element, it is\n    // possible for the language option to have not been resolved\n    options.language = this._resolveLanguage(options.language);\n\n    // Always fall back to English since it will always be complete\n    options.language.push('en');\n\n    var uniqueLanguages = [];\n\n    for (var l = 0; l < options.language.length; l++) {\n      var language = options.language[l];\n\n      if (uniqueLanguages.indexOf(language) === -1) {\n        uniqueLanguages.push(language);\n      }\n    }\n\n    options.language = uniqueLanguages;\n\n    options.translations = this._processTranslations(\n      options.language,\n      options.debug\n    );\n\n    return options;\n  };\n\n  Defaults.prototype.reset = function () {\n    function stripDiacritics (text) {\n      // Used 'uni range + named function' from http://jsperf.com/diacritics/18\n      function match(a) {\n        return DIACRITICS[a] || a;\n      }\n\n      return text.replace(/[^\\u0000-\\u007E]/g, match);\n    }\n\n    function matcher (params, data) {\n      // Always return the object if there is nothing to compare\n      if (params.term == null || params.term.trim() === '') {\n        return data;\n      }\n\n      // Do a recursive check for options with children\n      if (data.children && data.children.length > 0) {\n        // Clone the data object if there are children\n        // This is required as we modify the object to remove any non-matches\n        var match = $.extend(true, {}, data);\n\n        // Check each child of the option\n        for (var c = data.children.length - 1; c >= 0; c--) {\n          var child = data.children[c];\n\n          var matches = matcher(params, child);\n\n          // If there wasn't a match, remove the object in the array\n          if (matches == null) {\n            match.children.splice(c, 1);\n          }\n        }\n\n        // If any children matched, return the new object\n        if (match.children.length > 0) {\n          return match;\n        }\n\n        // If there were no matching children, check just the plain object\n        return matcher(params, match);\n      }\n\n      var original = stripDiacritics(data.text).toUpperCase();\n      var term = stripDiacritics(params.term).toUpperCase();\n\n      // Check if the text contains the term\n      if (original.indexOf(term) > -1) {\n        return data;\n      }\n\n      // If it doesn't contain the term, don't return anything\n      return null;\n    }\n\n    this.defaults = {\n      amdLanguageBase: './i18n/',\n      autocomplete: 'off',\n      closeOnSelect: true,\n      debug: false,\n      dropdownAutoWidth: false,\n      escapeMarkup: Utils.escapeMarkup,\n      language: {},\n      matcher: matcher,\n      minimumInputLength: 0,\n      maximumInputLength: 0,\n      maximumSelectionLength: 0,\n      minimumResultsForSearch: 0,\n      selectOnClose: false,\n      scrollAfterSelect: false,\n      sorter: function (data) {\n        return data;\n      },\n      templateResult: function (result) {\n        return result.text;\n      },\n      templateSelection: function (selection) {\n        return selection.text;\n      },\n      theme: 'default',\n      width: 'resolve'\n    };\n  };\n\n  Defaults.prototype.applyFromElement = function (options, $element) {\n    var optionLanguage = options.language;\n    var defaultLanguage = this.defaults.language;\n    var elementLanguage = $element.prop('lang');\n    var parentLanguage = $element.closest('[lang]').prop('lang');\n\n    var languages = Array.prototype.concat.call(\n      this._resolveLanguage(elementLanguage),\n      this._resolveLanguage(optionLanguage),\n      this._resolveLanguage(defaultLanguage),\n      this._resolveLanguage(parentLanguage)\n    );\n\n    options.language = languages;\n\n    return options;\n  };\n\n  Defaults.prototype._resolveLanguage = function (language) {\n    if (!language) {\n      return [];\n    }\n\n    if ($.isEmptyObject(language)) {\n      return [];\n    }\n\n    if ($.isPlainObject(language)) {\n      return [language];\n    }\n\n    var languages;\n\n    if (!Array.isArray(language)) {\n      languages = [language];\n    } else {\n      languages = language;\n    }\n\n    var resolvedLanguages = [];\n\n    for (var l = 0; l < languages.length; l++) {\n      resolvedLanguages.push(languages[l]);\n\n      if (typeof languages[l] === 'string' && languages[l].indexOf('-') > 0) {\n        // Extract the region information if it is included\n        var languageParts = languages[l].split('-');\n        var baseLanguage = languageParts[0];\n\n        resolvedLanguages.push(baseLanguage);\n      }\n    }\n\n    return resolvedLanguages;\n  };\n\n  Defaults.prototype._processTranslations = function (languages, debug) {\n    var translations = new Translation();\n\n    for (var l = 0; l < languages.length; l++) {\n      var languageData = new Translation();\n\n      var language = languages[l];\n\n      if (typeof language === 'string') {\n        try {\n          // Try to load it with the original name\n          languageData = Translation.loadPath(language);\n        } catch (e) {\n          try {\n            // If we couldn't load it, check if it wasn't the full path\n            language = this.defaults.amdLanguageBase + language;\n            languageData = Translation.loadPath(language);\n          } catch (ex) {\n            // The translation could not be loaded at all. Sometimes this is\n            // because of a configuration problem, other times this can be\n            // because of how Select2 helps load all possible translation files\n            if (debug && window.console && console.warn) {\n              console.warn(\n                'Select2: The language file for \"' + language + '\" could ' +\n                'not be automatically loaded. A fallback will be used instead.'\n              );\n            }\n          }\n        }\n      } else if ($.isPlainObject(language)) {\n        languageData = new Translation(language);\n      } else {\n        languageData = language;\n      }\n\n      translations.extend(languageData);\n    }\n\n    return translations;\n  };\n\n  Defaults.prototype.set = function (key, value) {\n    var camelKey = $.camelCase(key);\n\n    var data = {};\n    data[camelKey] = value;\n\n    var convertedData = Utils._convertData(data);\n\n    $.extend(true, this.defaults, convertedData);\n  };\n\n  var defaults = new Defaults();\n\n  return defaults;\n});\n\nS2.define('select2/options',[\n  'jquery',\n  './defaults',\n  './utils'\n], function ($, Defaults, Utils) {\n  function Options (options, $element) {\n    this.options = options;\n\n    if ($element != null) {\n      this.fromElement($element);\n    }\n\n    if ($element != null) {\n      this.options = Defaults.applyFromElement(this.options, $element);\n    }\n\n    this.options = Defaults.apply(this.options);\n  }\n\n  Options.prototype.fromElement = function ($e) {\n    var excludedData = ['select2'];\n\n    if (this.options.multiple == null) {\n      this.options.multiple = $e.prop('multiple');\n    }\n\n    if (this.options.disabled == null) {\n      this.options.disabled = $e.prop('disabled');\n    }\n\n    if (this.options.autocomplete == null && $e.prop('autocomplete')) {\n      this.options.autocomplete = $e.prop('autocomplete');\n    }\n\n    if (this.options.dir == null) {\n      if ($e.prop('dir')) {\n        this.options.dir = $e.prop('dir');\n      } else if ($e.closest('[dir]').prop('dir')) {\n        this.options.dir = $e.closest('[dir]').prop('dir');\n      } else {\n        this.options.dir = 'ltr';\n      }\n    }\n\n    $e.prop('disabled', this.options.disabled);\n    $e.prop('multiple', this.options.multiple);\n\n    if (Utils.GetData($e[0], 'select2Tags')) {\n      if (this.options.debug && window.console && console.warn) {\n        console.warn(\n          'Select2: The `data-select2-tags` attribute has been changed to ' +\n          'use the `data-data` and `data-tags=\"true\"` attributes and will be ' +\n          'removed in future versions of Select2.'\n        );\n      }\n\n      Utils.StoreData($e[0], 'data', Utils.GetData($e[0], 'select2Tags'));\n      Utils.StoreData($e[0], 'tags', true);\n    }\n\n    if (Utils.GetData($e[0], 'ajaxUrl')) {\n      if (this.options.debug && window.console && console.warn) {\n        console.warn(\n          'Select2: The `data-ajax-url` attribute has been changed to ' +\n          '`data-ajax--url` and support for the old attribute will be removed' +\n          ' in future versions of Select2.'\n        );\n      }\n\n      $e.attr('ajax--url', Utils.GetData($e[0], 'ajaxUrl'));\n      Utils.StoreData($e[0], 'ajax-Url', Utils.GetData($e[0], 'ajaxUrl'));\n    }\n\n    var dataset = {};\n\n    function upperCaseLetter(_, letter) {\n      return letter.toUpperCase();\n    }\n\n    // Pre-load all of the attributes which are prefixed with `data-`\n    for (var attr = 0; attr < $e[0].attributes.length; attr++) {\n      var attributeName = $e[0].attributes[attr].name;\n      var prefix = 'data-';\n\n      if (attributeName.substr(0, prefix.length) == prefix) {\n        // Get the contents of the attribute after `data-`\n        var dataName = attributeName.substring(prefix.length);\n\n        // Get the data contents from the consistent source\n        // This is more than likely the jQuery data helper\n        var dataValue = Utils.GetData($e[0], dataName);\n\n        // camelCase the attribute name to match the spec\n        var camelDataName = dataName.replace(/-([a-z])/g, upperCaseLetter);\n\n        // Store the data attribute contents into the dataset since\n        dataset[camelDataName] = dataValue;\n      }\n    }\n\n    // Prefer the element's `dataset` attribute if it exists\n    // jQuery 1.x does not correctly handle data attributes with multiple dashes\n    if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {\n      dataset = $.extend(true, {}, $e[0].dataset, dataset);\n    }\n\n    // Prefer our internal data cache if it exists\n    var data = $.extend(true, {}, Utils.GetData($e[0]), dataset);\n\n    data = Utils._convertData(data);\n\n    for (var key in data) {\n      if (excludedData.indexOf(key) > -1) {\n        continue;\n      }\n\n      if ($.isPlainObject(this.options[key])) {\n        $.extend(this.options[key], data[key]);\n      } else {\n        this.options[key] = data[key];\n      }\n    }\n\n    return this;\n  };\n\n  Options.prototype.get = function (key) {\n    return this.options[key];\n  };\n\n  Options.prototype.set = function (key, val) {\n    this.options[key] = val;\n  };\n\n  return Options;\n});\n\nS2.define('select2/core',[\n  'jquery',\n  './options',\n  './utils',\n  './keys'\n], function ($, Options, Utils, KEYS) {\n  var Select2 = function ($element, options) {\n    if (Utils.GetData($element[0], 'select2') != null) {\n      Utils.GetData($element[0], 'select2').destroy();\n    }\n\n    this.$element = $element;\n\n    this.id = this._generateId($element);\n\n    options = options || {};\n\n    this.options = new Options(options, $element);\n\n    Select2.__super__.constructor.call(this);\n\n    // Set up the tabindex\n\n    var tabindex = $element.attr('tabindex') || 0;\n    Utils.StoreData($element[0], 'old-tabindex', tabindex);\n    $element.attr('tabindex', '-1');\n\n    // Set up containers and adapters\n\n    var DataAdapter = this.options.get('dataAdapter');\n    this.dataAdapter = new DataAdapter($element, this.options);\n\n    var $container = this.render();\n\n    this._placeContainer($container);\n\n    var SelectionAdapter = this.options.get('selectionAdapter');\n    this.selection = new SelectionAdapter($element, this.options);\n    this.$selection = this.selection.render();\n\n    this.selection.position(this.$selection, $container);\n\n    var DropdownAdapter = this.options.get('dropdownAdapter');\n    this.dropdown = new DropdownAdapter($element, this.options);\n    this.$dropdown = this.dropdown.render();\n\n    this.dropdown.position(this.$dropdown, $container);\n\n    var ResultsAdapter = this.options.get('resultsAdapter');\n    this.results = new ResultsAdapter($element, this.options, this.dataAdapter);\n    this.$results = this.results.render();\n\n    this.results.position(this.$results, this.$dropdown);\n\n    // Bind events\n\n    var self = this;\n\n    // Bind the container to all of the adapters\n    this._bindAdapters();\n\n    // Register any DOM event handlers\n    this._registerDomEvents();\n\n    // Register any internal event handlers\n    this._registerDataEvents();\n    this._registerSelectionEvents();\n    this._registerDropdownEvents();\n    this._registerResultsEvents();\n    this._registerEvents();\n\n    // Set the initial state\n    this.dataAdapter.current(function (initialData) {\n      self.trigger('selection:update', {\n        data: initialData\n      });\n    });\n\n    // Hide the original select\n    $element[0].classList.add('select2-hidden-accessible');\n    $element.attr('aria-hidden', 'true');\n\n    // Synchronize any monitored attributes\n    this._syncAttributes();\n\n    Utils.StoreData($element[0], 'select2', this);\n\n    // Ensure backwards compatibility with $element.data('select2').\n    $element.data('select2', this);\n  };\n\n  Utils.Extend(Select2, Utils.Observable);\n\n  Select2.prototype._generateId = function ($element) {\n    var id = '';\n\n    if ($element.attr('id') != null) {\n      id = $element.attr('id');\n    } else if ($element.attr('name') != null) {\n      id = $element.attr('name') + '-' + Utils.generateChars(2);\n    } else {\n      id = Utils.generateChars(4);\n    }\n\n    id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\n    id = 'select2-' + id;\n\n    return id;\n  };\n\n  Select2.prototype._placeContainer = function ($container) {\n    $container.insertAfter(this.$element);\n\n    var width = this._resolveWidth(this.$element, this.options.get('width'));\n\n    if (width != null) {\n      $container.css('width', width);\n    }\n  };\n\n  Select2.prototype._resolveWidth = function ($element, method) {\n    var WIDTH = /^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;\n\n    if (method == 'resolve') {\n      var styleWidth = this._resolveWidth($element, 'style');\n\n      if (styleWidth != null) {\n        return styleWidth;\n      }\n\n      return this._resolveWidth($element, 'element');\n    }\n\n    if (method == 'element') {\n      var elementWidth = $element.outerWidth(false);\n\n      if (elementWidth <= 0) {\n        return 'auto';\n      }\n\n      return elementWidth + 'px';\n    }\n\n    if (method == 'style') {\n      var style = $element.attr('style');\n\n      if (typeof(style) !== 'string') {\n        return null;\n      }\n\n      var attrs = style.split(';');\n\n      for (var i = 0, l = attrs.length; i < l; i = i + 1) {\n        var attr = attrs[i].replace(/\\s/g, '');\n        var matches = attr.match(WIDTH);\n\n        if (matches !== null && matches.length >= 1) {\n          return matches[1];\n        }\n      }\n\n      return null;\n    }\n\n    if (method == 'computedstyle') {\n      var computedStyle = window.getComputedStyle($element[0]);\n\n      return computedStyle.width;\n    }\n\n    return method;\n  };\n\n  Select2.prototype._bindAdapters = function () {\n    this.dataAdapter.bind(this, this.$container);\n    this.selection.bind(this, this.$container);\n\n    this.dropdown.bind(this, this.$container);\n    this.results.bind(this, this.$container);\n  };\n\n  Select2.prototype._registerDomEvents = function () {\n    var self = this;\n\n    this.$element.on('change.select2', function () {\n      self.dataAdapter.current(function (data) {\n        self.trigger('selection:update', {\n          data: data\n        });\n      });\n    });\n\n    this.$element.on('focus.select2', function (evt) {\n      self.trigger('focus', evt);\n    });\n\n    this._syncA = Utils.bind(this._syncAttributes, this);\n    this._syncS = Utils.bind(this._syncSubtree, this);\n\n    this._observer = new window.MutationObserver(function (mutations) {\n      self._syncA();\n      self._syncS(mutations);\n    });\n    this._observer.observe(this.$element[0], {\n      attributes: true,\n      childList: true,\n      subtree: false\n    });\n  };\n\n  Select2.prototype._registerDataEvents = function () {\n    var self = this;\n\n    this.dataAdapter.on('*', function (name, params) {\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerSelectionEvents = function () {\n    var self = this;\n    var nonRelayEvents = ['toggle', 'focus'];\n\n    this.selection.on('toggle', function () {\n      self.toggleDropdown();\n    });\n\n    this.selection.on('focus', function (params) {\n      self.focus(params);\n    });\n\n    this.selection.on('*', function (name, params) {\n      if (nonRelayEvents.indexOf(name) !== -1) {\n        return;\n      }\n\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerDropdownEvents = function () {\n    var self = this;\n\n    this.dropdown.on('*', function (name, params) {\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerResultsEvents = function () {\n    var self = this;\n\n    this.results.on('*', function (name, params) {\n      self.trigger(name, params);\n    });\n  };\n\n  Select2.prototype._registerEvents = function () {\n    var self = this;\n\n    this.on('open', function () {\n      self.$container[0].classList.add('select2-container--open');\n    });\n\n    this.on('close', function () {\n      self.$container[0].classList.remove('select2-container--open');\n    });\n\n    this.on('enable', function () {\n      self.$container[0].classList.remove('select2-container--disabled');\n    });\n\n    this.on('disable', function () {\n      self.$container[0].classList.add('select2-container--disabled');\n    });\n\n    this.on('blur', function () {\n      self.$container[0].classList.remove('select2-container--focus');\n    });\n\n    this.on('query', function (params) {\n      if (!self.isOpen()) {\n        self.trigger('open', {});\n      }\n\n      this.dataAdapter.query(params, function (data) {\n        self.trigger('results:all', {\n          data: data,\n          query: params\n        });\n      });\n    });\n\n    this.on('query:append', function (params) {\n      this.dataAdapter.query(params, function (data) {\n        self.trigger('results:append', {\n          data: data,\n          query: params\n        });\n      });\n    });\n\n    this.on('keypress', function (evt) {\n      var key = evt.which;\n\n      if (self.isOpen()) {\n        if (key === KEYS.ESC || (key === KEYS.UP && evt.altKey)) {\n          self.close(evt);\n\n          evt.preventDefault();\n        } else if (key === KEYS.ENTER || key === KEYS.TAB) {\n          self.trigger('results:select', {});\n\n          evt.preventDefault();\n        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {\n          self.trigger('results:toggle', {});\n\n          evt.preventDefault();\n        } else if (key === KEYS.UP) {\n          self.trigger('results:previous', {});\n\n          evt.preventDefault();\n        } else if (key === KEYS.DOWN) {\n          self.trigger('results:next', {});\n\n          evt.preventDefault();\n        }\n      } else {\n        if (key === KEYS.ENTER || key === KEYS.SPACE ||\n            (key === KEYS.DOWN && evt.altKey)) {\n          self.open();\n\n          evt.preventDefault();\n        }\n      }\n    });\n  };\n\n  Select2.prototype._syncAttributes = function () {\n    this.options.set('disabled', this.$element.prop('disabled'));\n\n    if (this.isDisabled()) {\n      if (this.isOpen()) {\n        this.close();\n      }\n\n      this.trigger('disable', {});\n    } else {\n      this.trigger('enable', {});\n    }\n  };\n\n  Select2.prototype._isChangeMutation = function (mutations) {\n    var self = this;\n\n    if (mutations.addedNodes && mutations.addedNodes.length > 0) {\n      for (var n = 0; n < mutations.addedNodes.length; n++) {\n        var node = mutations.addedNodes[n];\n\n        if (node.selected) {\n          return true;\n        }\n      }\n    } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {\n      return true;\n    } else if (Array.isArray(mutations)) {\n      return mutations.some(function (mutation) {\n        return self._isChangeMutation(mutation);\n      });\n    }\n\n    return false;\n  };\n\n  Select2.prototype._syncSubtree = function (mutations) {\n    var changed = this._isChangeMutation(mutations);\n    var self = this;\n\n    // Only re-pull the data if we think there is a change\n    if (changed) {\n      this.dataAdapter.current(function (currentData) {\n        self.trigger('selection:update', {\n          data: currentData\n        });\n      });\n    }\n  };\n\n  /**\n   * Override the trigger method to automatically trigger pre-events when\n   * there are events that can be prevented.\n   */\n  Select2.prototype.trigger = function (name, args) {\n    var actualTrigger = Select2.__super__.trigger;\n    var preTriggerMap = {\n      'open': 'opening',\n      'close': 'closing',\n      'select': 'selecting',\n      'unselect': 'unselecting',\n      'clear': 'clearing'\n    };\n\n    if (args === undefined) {\n      args = {};\n    }\n\n    if (name in preTriggerMap) {\n      var preTriggerName = preTriggerMap[name];\n      var preTriggerArgs = {\n        prevented: false,\n        name: name,\n        args: args\n      };\n\n      actualTrigger.call(this, preTriggerName, preTriggerArgs);\n\n      if (preTriggerArgs.prevented) {\n        args.prevented = true;\n\n        return;\n      }\n    }\n\n    actualTrigger.call(this, name, args);\n  };\n\n  Select2.prototype.toggleDropdown = function () {\n    if (this.isDisabled()) {\n      return;\n    }\n\n    if (this.isOpen()) {\n      this.close();\n    } else {\n      this.open();\n    }\n  };\n\n  Select2.prototype.open = function () {\n    if (this.isOpen()) {\n      return;\n    }\n\n    if (this.isDisabled()) {\n      return;\n    }\n\n    this.trigger('query', {});\n  };\n\n  Select2.prototype.close = function (evt) {\n    if (!this.isOpen()) {\n      return;\n    }\n\n    this.trigger('close', { originalEvent : evt });\n  };\n\n  /**\n   * Helper method to abstract the \"enabled\" (not \"disabled\") state of this\n   * object.\n   *\n   * @return {true} if the instance is not disabled.\n   * @return {false} if the instance is disabled.\n   */\n  Select2.prototype.isEnabled = function () {\n    return !this.isDisabled();\n  };\n\n  /**\n   * Helper method to abstract the \"disabled\" state of this object.\n   *\n   * @return {true} if the disabled option is true.\n   * @return {false} if the disabled option is false.\n   */\n  Select2.prototype.isDisabled = function () {\n    return this.options.get('disabled');\n  };\n\n  Select2.prototype.isOpen = function () {\n    return this.$container[0].classList.contains('select2-container--open');\n  };\n\n  Select2.prototype.hasFocus = function () {\n    return this.$container[0].classList.contains('select2-container--focus');\n  };\n\n  Select2.prototype.focus = function (data) {\n    // No need to re-trigger focus events if we are already focused\n    if (this.hasFocus()) {\n      return;\n    }\n\n    this.$container[0].classList.add('select2-container--focus');\n    this.trigger('focus', {});\n  };\n\n  Select2.prototype.enable = function (args) {\n    if (this.options.get('debug') && window.console && console.warn) {\n      console.warn(\n        'Select2: The `select2(\"enable\")` method has been deprecated and will' +\n        ' be removed in later Select2 versions. Use $element.prop(\"disabled\")' +\n        ' instead.'\n      );\n    }\n\n    if (args == null || args.length === 0) {\n      args = [true];\n    }\n\n    var disabled = !args[0];\n\n    this.$element.prop('disabled', disabled);\n  };\n\n  Select2.prototype.data = function () {\n    if (this.options.get('debug') &&\n        arguments.length > 0 && window.console && console.warn) {\n      console.warn(\n        'Select2: Data can no longer be set using `select2(\"data\")`. You ' +\n        'should consider setting the value instead using `$element.val()`.'\n      );\n    }\n\n    var data = [];\n\n    this.dataAdapter.current(function (currentData) {\n      data = currentData;\n    });\n\n    return data;\n  };\n\n  Select2.prototype.val = function (args) {\n    if (this.options.get('debug') && window.console && console.warn) {\n      console.warn(\n        'Select2: The `select2(\"val\")` method has been deprecated and will be' +\n        ' removed in later Select2 versions. Use $element.val() instead.'\n      );\n    }\n\n    if (args == null || args.length === 0) {\n      return this.$element.val();\n    }\n\n    var newVal = args[0];\n\n    if (Array.isArray(newVal)) {\n      newVal = newVal.map(function (obj) {\n        return obj.toString();\n      });\n    }\n\n    this.$element.val(newVal).trigger('input').trigger('change');\n  };\n\n  Select2.prototype.destroy = function () {\n    Utils.RemoveData(this.$container[0]);\n    this.$container.remove();\n\n    this._observer.disconnect();\n    this._observer = null;\n\n    this._syncA = null;\n    this._syncS = null;\n\n    this.$element.off('.select2');\n    this.$element.attr('tabindex',\n    Utils.GetData(this.$element[0], 'old-tabindex'));\n\n    this.$element[0].classList.remove('select2-hidden-accessible');\n    this.$element.attr('aria-hidden', 'false');\n    Utils.RemoveData(this.$element[0]);\n    this.$element.removeData('select2');\n\n    this.dataAdapter.destroy();\n    this.selection.destroy();\n    this.dropdown.destroy();\n    this.results.destroy();\n\n    this.dataAdapter = null;\n    this.selection = null;\n    this.dropdown = null;\n    this.results = null;\n  };\n\n  Select2.prototype.render = function () {\n    var $container = $(\n      '<span class=\"select2 select2-container\">' +\n        '<span class=\"selection\"></span>' +\n        '<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>' +\n      '</span>'\n    );\n\n    $container.attr('dir', this.options.get('dir'));\n\n    this.$container = $container;\n\n    this.$container[0].classList\n      .add('select2-container--' + this.options.get('theme'));\n\n    Utils.StoreData($container[0], 'element', this.$element);\n\n    return $container;\n  };\n\n  return Select2;\n});\n\nS2.define('jquery-mousewheel',[\n  'jquery'\n], function ($) {\n  // Used to shim jQuery.mousewheel for non-full builds.\n  return $;\n});\n\nS2.define('jquery.select2',[\n  'jquery',\n  'jquery-mousewheel',\n\n  './select2/core',\n  './select2/defaults',\n  './select2/utils'\n], function ($, _, Select2, Defaults, Utils) {\n  if ($.fn.select2 == null) {\n    // All methods that should return the element\n    var thisMethods = ['open', 'close', 'destroy'];\n\n    $.fn.select2 = function (options) {\n      options = options || {};\n\n      if (typeof options === 'object') {\n        this.each(function () {\n          var instanceOptions = $.extend(true, {}, options);\n\n          var instance = new Select2($(this), instanceOptions);\n        });\n\n        return this;\n      } else if (typeof options === 'string') {\n        var ret;\n        var args = Array.prototype.slice.call(arguments, 1);\n\n        this.each(function () {\n          var instance = Utils.GetData(this, 'select2');\n\n          if (instance == null && window.console && console.error) {\n            console.error(\n              'The select2(\\'' + options + '\\') method was called on an ' +\n              'element that is not using Select2.'\n            );\n          }\n\n          ret = instance[options].apply(instance, args);\n        });\n\n        // Check if we should be returning `this`\n        if (thisMethods.indexOf(options) > -1) {\n          return this;\n        }\n\n        return ret;\n      } else {\n        throw new Error('Invalid arguments for Select2: ' + options);\n      }\n    };\n  }\n\n  if ($.fn.select2.defaults == null) {\n    $.fn.select2.defaults = Defaults;\n  }\n\n  return Select2;\n});\n\n  // Return the AMD loader configuration so it can be used outside of this file\n  return {\n    define: S2.define,\n    require: S2.require\n  };\n}());\n\n  // Autoload the jQuery bindings\n  // We know that all of the modules exist above this, so we're safe\n  var select2 = S2.require('jquery.select2');\n\n  // Hold the AMD module references on the jQuery function that was just loaded\n  // This allows Select2 to use the internal loader outside of this file, such\n  // as in the language files.\n  jQuery.fn.select2.amd = S2;\n\n  // Return the Select2 instance for anyone who is importing it.\n  return select2;\n}));\n","/* global window, exports, define */\n\n!function() {\n    'use strict'\n\n    var re = {\n        not_string: /[^s]/,\n        not_bool: /[^t]/,\n        not_type: /[^T]/,\n        not_primitive: /[^v]/,\n        number: /[diefg]/,\n        numeric_arg: /[bcdiefguxX]/,\n        json: /[j]/,\n        not_json: /[^j]/,\n        text: /^[^\\x25]+/,\n        modulo: /^\\x25{2}/,\n        placeholder: /^\\x25(?:([1-9]\\d*)\\$|\\(([^)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-gijostTuvxX])/,\n        key: /^([a-z_][a-z_\\d]*)/i,\n        key_access: /^\\.([a-z_][a-z_\\d]*)/i,\n        index_access: /^\\[(\\d+)\\]/,\n        sign: /^[+-]/\n    }\n\n    function sprintf(key) {\n        // `arguments` is not an array, but should be fine for this call\n        return sprintf_format(sprintf_parse(key), arguments)\n    }\n\n    function vsprintf(fmt, argv) {\n        return sprintf.apply(null, [fmt].concat(argv || []))\n    }\n\n    function sprintf_format(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, arg, output = '', i, k, ph, pad, pad_character, pad_length, is_positive, sign\n        for (i = 0; i < tree_length; i++) {\n            if (typeof parse_tree[i] === 'string') {\n                output += parse_tree[i]\n            }\n            else if (typeof parse_tree[i] === 'object') {\n                ph = parse_tree[i] // convenience purposes only\n                if (ph.keys) { // keyword argument\n                    arg = argv[cursor]\n                    for (k = 0; k < ph.keys.length; k++) {\n                        if (arg == undefined) {\n                            throw new Error(sprintf('[sprintf] Cannot access property \"%s\" of undefined value \"%s\"', ph.keys[k], ph.keys[k-1]))\n                        }\n                        arg = arg[ph.keys[k]]\n                    }\n                }\n                else if (ph.param_no) { // positional argument (explicit)\n                    arg = argv[ph.param_no]\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++]\n                }\n\n                if (re.not_type.test(ph.type) && re.not_primitive.test(ph.type) && arg instanceof Function) {\n                    arg = arg()\n                }\n\n                if (re.numeric_arg.test(ph.type) && (typeof arg !== 'number' && isNaN(arg))) {\n                    throw new TypeError(sprintf('[sprintf] expecting number but found %T', arg))\n                }\n\n                if (re.number.test(ph.type)) {\n                    is_positive = arg >= 0\n                }\n\n                switch (ph.type) {\n                    case 'b':\n                        arg = parseInt(arg, 10).toString(2)\n                        break\n                    case 'c':\n                        arg = String.fromCharCode(parseInt(arg, 10))\n                        break\n                    case 'd':\n                    case 'i':\n                        arg = parseInt(arg, 10)\n                        break\n                    case 'j':\n                        arg = JSON.stringify(arg, null, ph.width ? parseInt(ph.width) : 0)\n                        break\n                    case 'e':\n                        arg = ph.precision ? parseFloat(arg).toExponential(ph.precision) : parseFloat(arg).toExponential()\n                        break\n                    case 'f':\n                        arg = ph.precision ? parseFloat(arg).toFixed(ph.precision) : parseFloat(arg)\n                        break\n                    case 'g':\n                        arg = ph.precision ? String(Number(arg.toPrecision(ph.precision))) : parseFloat(arg)\n                        break\n                    case 'o':\n                        arg = (parseInt(arg, 10) >>> 0).toString(8)\n                        break\n                    case 's':\n                        arg = String(arg)\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 't':\n                        arg = String(!!arg)\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'T':\n                        arg = Object.prototype.toString.call(arg).slice(8, -1).toLowerCase()\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'u':\n                        arg = parseInt(arg, 10) >>> 0\n                        break\n                    case 'v':\n                        arg = arg.valueOf()\n                        arg = (ph.precision ? arg.substring(0, ph.precision) : arg)\n                        break\n                    case 'x':\n                        arg = (parseInt(arg, 10) >>> 0).toString(16)\n                        break\n                    case 'X':\n                        arg = (parseInt(arg, 10) >>> 0).toString(16).toUpperCase()\n                        break\n                }\n                if (re.json.test(ph.type)) {\n                    output += arg\n                }\n                else {\n                    if (re.number.test(ph.type) && (!is_positive || ph.sign)) {\n                        sign = is_positive ? '+' : '-'\n                        arg = arg.toString().replace(re.sign, '')\n                    }\n                    else {\n                        sign = ''\n                    }\n                    pad_character = ph.pad_char ? ph.pad_char === '0' ? '0' : ph.pad_char.charAt(1) : ' '\n                    pad_length = ph.width - (sign + arg).length\n                    pad = ph.width ? (pad_length > 0 ? pad_character.repeat(pad_length) : '') : ''\n                    output += ph.align ? sign + arg + pad : (pad_character === '0' ? sign + pad + arg : pad + sign + arg)\n                }\n            }\n        }\n        return output\n    }\n\n    var sprintf_cache = Object.create(null)\n\n    function sprintf_parse(fmt) {\n        if (sprintf_cache[fmt]) {\n            return sprintf_cache[fmt]\n        }\n\n        var _fmt = fmt, match, parse_tree = [], arg_names = 0\n        while (_fmt) {\n            if ((match = re.text.exec(_fmt)) !== null) {\n                parse_tree.push(match[0])\n            }\n            else if ((match = re.modulo.exec(_fmt)) !== null) {\n                parse_tree.push('%')\n            }\n            else if ((match = re.placeholder.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1\n                    var field_list = [], replacement_field = match[2], field_match = []\n                    if ((field_match = re.key.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1])\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\n                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1])\n                            }\n                            else if ((field_match = re.index_access.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1])\n                            }\n                            else {\n                                throw new SyntaxError('[sprintf] failed to parse named argument key')\n                            }\n                        }\n                    }\n                    else {\n                        throw new SyntaxError('[sprintf] failed to parse named argument key')\n                    }\n                    match[2] = field_list\n                }\n                else {\n                    arg_names |= 2\n                }\n                if (arg_names === 3) {\n                    throw new Error('[sprintf] mixing positional and named placeholders is not (yet) supported')\n                }\n\n                parse_tree.push(\n                    {\n                        placeholder: match[0],\n                        param_no:    match[1],\n                        keys:        match[2],\n                        sign:        match[3],\n                        pad_char:    match[4],\n                        align:       match[5],\n                        width:       match[6],\n                        precision:   match[7],\n                        type:        match[8]\n                    }\n                )\n            }\n            else {\n                throw new SyntaxError('[sprintf] unexpected placeholder')\n            }\n            _fmt = _fmt.substring(match[0].length)\n        }\n        return sprintf_cache[fmt] = parse_tree\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    /* eslint-disable quote-props */\n    if (typeof exports !== 'undefined') {\n        exports['sprintf'] = sprintf\n        exports['vsprintf'] = vsprintf\n    }\n    if (typeof window !== 'undefined') {\n        window['sprintf'] = sprintf\n        window['vsprintf'] = vsprintf\n\n        if (typeof define === 'function' && define['amd']) {\n            define(function() {\n                return {\n                    'sprintf': sprintf,\n                    'vsprintf': vsprintf\n                }\n            })\n        }\n    }\n    /* eslint-enable quote-props */\n}(); // eslint-disable-line\n","\n        var result = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./web-component-style.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./web-component-style.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./web-component-style.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./web-component-style.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[1].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./web-component-style.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","module.exports = jQuery;","import{isSingleExpression as i}from\"./directive-helpers.js\";import{Directive as t,PartType as e}from\"./directive.js\";export{Directive,PartType,directive}from\"./directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=(i,t)=>{var e,o;const r=i._$AN;if(void 0===r)return!1;for(const i of r)null===(o=(e=i)._$AO)||void 0===o||o.call(e,t,!1),s(i,t);return!0},o=i=>{let t,e;do{if(void 0===(t=i._$AM))break;e=t._$AN,e.delete(i),i=t}while(0===(null==e?void 0:e.size))},r=i=>{for(let t;t=i._$AM;i=t){let e=t._$AN;if(void 0===e)t._$AN=e=new Set;else if(e.has(i))break;e.add(i),l(t)}};function n(i){void 0!==this._$AN?(o(this),this._$AM=i,r(this)):this._$AM=i}function h(i,t=!1,e=0){const r=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size)if(t)if(Array.isArray(r))for(let i=e;i<r.length;i++)s(r[i],!1),o(r[i]);else null!=r&&(s(r,!1),o(r));else s(this,i)}const l=i=>{var t,s,o,r;i.type==e.CHILD&&(null!==(t=(o=i)._$AP)&&void 0!==t||(o._$AP=h),null!==(s=(r=i)._$AQ)&&void 0!==s||(r._$AQ=n))};class c extends t{constructor(){super(...arguments),this._$AN=void 0}_$AT(i,t,e){super._$AT(i,t,e),r(this),this.isConnected=i._$AU}_$AO(i,t=!0){var e,r;i!==this.isConnected&&(this.isConnected=i,i?null===(e=this.reconnected)||void 0===e||e.call(this):null===(r=this.disconnected)||void 0===r||r.call(this)),t&&(s(this,i),o(this))}setValue(t){if(i(this._$Ct))this._$Ct._$AI(t,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=t,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}export{c as AsyncDirective};\n//# sourceMappingURL=async-directive.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{H:l}=o,t=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,i={HTML:1,SVG:2},n=(o,l)=>void 0===l?void 0!==(null==o?void 0:o._$litType$):(null==o?void 0:o._$litType$)===l,d=o=>void 0!==(null==o?void 0:o._$litDirective$),v=o=>null==o?void 0:o._$litDirective$,e=o=>void 0===o.strings,c=()=>document.createComment(\"\"),r=(o,t,i)=>{var n;const d=o._$AA.parentNode,v=void 0===t?o._$AB:t._$AA;if(void 0===i){const t=d.insertBefore(c(),v),n=d.insertBefore(c(),v);i=new l(t,n,o,o.options)}else{const l=i._$AB.nextSibling,t=i._$AM,e=t!==o;if(e){let l;null===(n=i._$AQ)||void 0===n||n.call(i,o),i._$AM=o,void 0!==i._$AP&&(l=o._$AU)!==t._$AU&&i._$AP(l)}if(l!==v||e){let o=i._$AA;for(;o!==l;){const l=o.nextSibling;d.insertBefore(o,v),o=l}}}return i},u=(o,l,t=o)=>(o._$AI(l,t),o),f={},s=(o,l=f)=>o._$AH=l,m=o=>o._$AH,p=o=>{var l;null===(l=o._$AP)||void 0===l||l.call(o,!1,!0);let t=o._$AA;const i=o._$AB.nextSibling;for(;t!==i;){const o=t.nextSibling;t.remove(),t=o}},a=o=>{o._$AR()};export{i as TemplateResultType,a as clearPart,m as getCommittedValue,v as getDirectiveClass,r as insertPart,d as isDirectiveResult,t as isPrimitive,e as isSingleExpression,n as isTemplateResult,p as removePart,u as setChildPartValue,s as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nvar t;const i=window,s=i.trustedTypes,e=s?s.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,o=`lit$${(Math.random()+\"\").slice(9)}$`,n=\"?\"+o,l=`<${n}>`,h=document,r=(t=\"\")=>h.createComment(t),d=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,u=Array.isArray,c=t=>u(t)||\"function\"==typeof(null==t?void 0:t[Symbol.iterator]),v=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,a=/-->/g,f=/>/g,_=RegExp(\">|[ \\t\\n\\f\\r](?:([^\\\\s\\\"'>=/]+)([ \\t\\n\\f\\r]*=[ \\t\\n\\f\\r]*(?:[^ \\t\\n\\f\\r\\\"'`<>=]|(\\\"|')|))|$)\",\"g\"),m=/'/g,p=/\"/g,$=/^(?:script|style|textarea|title)$/i,g=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),y=g(1),w=g(2),x=Symbol.for(\"lit-noChange\"),b=Symbol.for(\"lit-nothing\"),T=new WeakMap,A=(t,i,s)=>{var e,o;const n=null!==(e=null==s?void 0:s.renderBefore)&&void 0!==e?e:i;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==s?void 0:s.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new S(i.insertBefore(r(),t),t,void 0,null!=s?s:{})}return l._$AI(t),l},E=h.createTreeWalker(h,129,null,!1),C=(t,i)=>{const s=t.length-1,n=[];let h,r=2===i?\"<svg>\":\"\",d=v;for(let i=0;i<s;i++){const s=t[i];let e,u,c=-1,g=0;for(;g<s.length&&(d.lastIndex=g,u=d.exec(s),null!==u);)g=d.lastIndex,d===v?\"!--\"===u[1]?d=a:void 0!==u[1]?d=f:void 0!==u[2]?($.test(u[2])&&(h=RegExp(\"</\"+u[2],\"g\")),d=_):void 0!==u[3]&&(d=_):d===_?\">\"===u[0]?(d=null!=h?h:v,c=-1):void 0===u[1]?c=-2:(c=d.lastIndex-u[2].length,e=u[1],d=void 0===u[3]?_:'\"'===u[3]?p:m):d===p||d===m?d=_:d===a||d===f?d=v:(d=_,h=void 0);const y=d===_&&t[i+1].startsWith(\"/>\")?\" \":\"\";r+=d===v?s+l:c>=0?(n.push(e),s.slice(0,c)+\"$lit$\"+s.slice(c)+o+y):s+o+(-2===c?(n.push(void 0),i):y)}const u=r+(t[s]||\"<?>\")+(2===i?\"</svg>\":\"\");if(!Array.isArray(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return[void 0!==e?e.createHTML(u):u,n]};class P{constructor({strings:t,_$litType$:i},e){let l;this.parts=[];let h=0,d=0;const u=t.length-1,c=this.parts,[v,a]=C(t,i);if(this.el=P.createElement(v,e),E.currentNode=this.el.content,2===i){const t=this.el.content,i=t.firstChild;i.remove(),t.append(...i.childNodes)}for(;null!==(l=E.nextNode())&&c.length<u;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const i of l.getAttributeNames())if(i.endsWith(\"$lit$\")||i.startsWith(o)){const s=a[d++];if(t.push(i),void 0!==s){const t=l.getAttribute(s.toLowerCase()+\"$lit$\").split(o),i=/([.?@])?(.*)/.exec(s);c.push({type:1,index:h,name:i[2],strings:t,ctor:\".\"===i[1]?R:\"?\"===i[1]?H:\"@\"===i[1]?I:M})}else c.push({type:6,index:h})}for(const i of t)l.removeAttribute(i)}if($.test(l.tagName)){const t=l.textContent.split(o),i=t.length-1;if(i>0){l.textContent=s?s.emptyScript:\"\";for(let s=0;s<i;s++)l.append(t[s],r()),E.nextNode(),c.push({type:2,index:++h});l.append(t[i],r())}}}else if(8===l.nodeType)if(l.data===n)c.push({type:2,index:h});else{let t=-1;for(;-1!==(t=l.data.indexOf(o,t+1));)c.push({type:7,index:h}),t+=o.length-1}h++}}static createElement(t,i){const s=h.createElement(\"template\");return s.innerHTML=t,s}}function V(t,i,s=t,e){var o,n,l,h;if(i===x)return i;let r=void 0!==e?null===(o=s._$Cl)||void 0===o?void 0:o[e]:s._$Cu;const u=d(i)?void 0:i._$litDirective$;return(null==r?void 0:r.constructor)!==u&&(null===(n=null==r?void 0:r._$AO)||void 0===n||n.call(r,!1),void 0===u?r=void 0:(r=new u(t),r._$AT(t,s,e)),void 0!==e?(null!==(l=(h=s)._$Cl)&&void 0!==l?l:h._$Cl=[])[e]=r:s._$Cu=r),void 0!==r&&(i=V(t,r._$AS(t,i.values),r,e)),i}class N{constructor(t,i){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var i;const{el:{content:s},parts:e}=this._$AD,o=(null!==(i=null==t?void 0:t.creationScope)&&void 0!==i?i:h).importNode(s,!0);E.currentNode=o;let n=E.nextNode(),l=0,r=0,d=e[0];for(;void 0!==d;){if(l===d.index){let i;2===d.type?i=new S(n,n.nextSibling,this,t):1===d.type?i=new d.ctor(n,d.name,d.strings,this,t):6===d.type&&(i=new L(n,this,t)),this.v.push(i),d=e[++r]}l!==(null==d?void 0:d.index)&&(n=E.nextNode(),l++)}return o}m(t){let i=0;for(const s of this.v)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class S{constructor(t,i,s,e){var o;this.type=2,this._$AH=b,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$C_=null===(o=null==e?void 0:e.isConnected)||void 0===o||o}get _$AU(){var t,i;return null!==(i=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==i?i:this._$C_}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=V(this,t,i),d(t)?t===b||null==t||\"\"===t?(this._$AH!==b&&this._$AR(),this._$AH=b):t!==this._$AH&&t!==x&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):c(t)?this.O(t):this.$(t)}S(t,i=this._$AB){return this._$AA.parentNode.insertBefore(t,i)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==b&&d(this._$AH)?this._$AA.nextSibling.data=t:this.k(h.createTextNode(t)),this._$AH=t}T(t){var i;const{values:s,_$litType$:e}=t,o=\"number\"==typeof e?this._$AC(t):(void 0===e.el&&(e.el=P.createElement(e.h,this.options)),e);if((null===(i=this._$AH)||void 0===i?void 0:i._$AD)===o)this._$AH.m(s);else{const t=new N(o,this),i=t.p(this.options);t.m(s),this.k(i),this._$AH=t}}_$AC(t){let i=T.get(t.strings);return void 0===i&&T.set(t.strings,i=new P(t)),i}O(t){u(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const o of t)e===i.length?i.push(s=new S(this.S(r()),this.S(r()),this,this.options)):s=i[e],s._$AI(o),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){var s;for(null===(s=this._$AP)||void 0===s||s.call(this,!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var i;void 0===this._$AM&&(this._$C_=t,null===(i=this._$AP)||void 0===i||i.call(this,t))}}class M{constructor(t,i,s,e,o){this.type=1,this._$AH=b,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=o,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=b}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,i=this,s,e){const o=this.strings;let n=!1;if(void 0===o)t=V(this,t,i,0),n=!d(t)||t!==this._$AH&&t!==x,n&&(this._$AH=t);else{const e=t;let l,h;for(t=o[0],l=0;l<o.length-1;l++)h=V(this,e[s+l],i,l),h===x&&(h=this._$AH[l]),n||(n=!d(h)||h!==this._$AH[l]),h===b?t=b:t!==b&&(t+=(null!=h?h:\"\")+o[l+1]),this._$AH[l]=h}n&&!e&&this.P(t)}P(t){t===b?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class R extends M{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===b?void 0:t}}const k=s?s.emptyScript:\"\";class H extends M{constructor(){super(...arguments),this.type=4}P(t){t&&t!==b?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends M{constructor(t,i,s,e,o){super(t,i,s,e,o),this.type=5}_$AI(t,i=this){var s;if((t=null!==(s=V(this,t,i,0))&&void 0!==s?s:b)===x)return;const e=this._$AH,o=t===b&&e!==b||t.capture!==e.capture||t.once!==e.once||t.passive!==e.passive,n=t!==b&&(e===b||o);o&&this.element.removeEventListener(this.name,this,e),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var i,s;\"function\"==typeof this._$AH?this._$AH.call(null!==(s=null===(i=this.options)||void 0===i?void 0:i.host)&&void 0!==s?s:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){V(this,t)}}const z={A:\"$lit$\",M:o,C:n,L:1,R:C,D:N,V:c,I:V,H:S,N:M,U:H,B:I,F:R,W:L},Z=i.litHtmlPolyfillSupport;null==Z||Z(P,S),(null!==(t=i.litHtmlVersions)&&void 0!==t?t:i.litHtmlVersions=[]).push(\"2.3.1\");export{z as _$LH,y as html,x as noChange,b as nothing,A as render,w as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{nothing as i}from\"../lit-html.js\";import{AsyncDirective as t}from\"../async-directive.js\";import{directive as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=()=>new o;class o{}const h=new WeakMap,n=s(class extends t{render(t){return i}update(t,[s]){var e;const o=s!==this.Y;return o&&void 0!==this.Y&&this.rt(void 0),(o||this.lt!==this.dt)&&(this.Y=s,this.ct=null===(e=t.options)||void 0===e?void 0:e.host,this.rt(this.dt=t.element)),i}rt(i){var t;if(\"function\"==typeof this.Y){const s=null!==(t=this.ct)&&void 0!==t?t:globalThis;let e=h.get(s);void 0===e&&(e=new WeakMap,h.set(s,e)),void 0!==e.get(this.Y)&&this.Y.call(this.ct,void 0),e.set(this.Y,i),void 0!==i&&this.Y.call(this.ct,i)}else this.Y.value=i}get lt(){var i,t,s;return\"function\"==typeof this.Y?null===(t=h.get(null!==(i=this.ct)&&void 0!==i?i:globalThis))||void 0===t?void 0:t.get(this.Y):null===(s=this.Y)||void 0===s?void 0:s.value}disconnected(){this.lt===this.dt&&this.rt(void 0)}reconnected(){this.rt(this.dt)}});export{e as createRef,n as ref};\n//# sourceMappingURL=ref.js.map\n","import{noChange as e}from\"../lit-html.js\";import{directive as s,Directive as t,PartType as r}from\"../directive.js\";import{getCommittedValue as l,setChildPartValue as o,insertPart as i,removePart as n,setCommittedValue as f}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst u=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error(\"repeat() can only be used in text expressions\")}ht(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let i=0;for(const s of e)l[i]=r?r(s,i):i,o[i]=t(s,i),i++;return{values:o,keys:l}}render(e,s,t){return this.ht(e,s,t).values}update(s,[t,r,c]){var d;const a=l(s),{values:p,keys:v}=this.ht(t,r,c);if(!Array.isArray(a))return this.ut=v,p;const h=null!==(d=this.ut)&&void 0!==d?d:this.ut=[],m=[];let y,x,j=0,k=a.length-1,w=0,A=p.length-1;for(;j<=k&&w<=A;)if(null===a[j])j++;else if(null===a[k])k--;else if(h[j]===v[w])m[w]=o(a[j],p[w]),j++,w++;else if(h[k]===v[A])m[A]=o(a[k],p[A]),k--,A--;else if(h[j]===v[A])m[A]=o(a[j],p[A]),i(s,m[A+1],a[j]),j++,A--;else if(h[k]===v[w])m[w]=o(a[k],p[w]),i(s,a[j],a[k]),k--,w++;else if(void 0===y&&(y=u(v,w,A),x=u(h,j,k)),y.has(h[j]))if(y.has(h[k])){const e=x.get(v[w]),t=void 0!==e?a[e]:null;if(null===t){const e=i(s,a[j]);o(e,p[w]),m[w]=e}else m[w]=o(t,p[w]),i(s,a[j],t),a[e]=null;w++}else n(a[k]),k--;else n(a[j]),j++;for(;w<=A;){const e=i(s,m[A+1]);o(e,p[w]),m[w++]=e}for(;j<=k;){const e=a[j++];null!==e&&n(e)}return this.ut=v,f(s,m),e}});export{c as repeat};\n//# sourceMappingURL=repeat.js.map\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=window,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),n=new WeakMap;class o{constructor(t,e,n){if(this._$cssResult$=!0,n!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=n.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&n.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new o(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,s,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[n+1]),t[0]);return new o(n,t,s)},S=(s,n)=>{e?s.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((e=>{const n=document.createElement(\"style\"),o=t.litNonce;void 0!==o&&n.setAttribute(\"nonce\",o),n.textContent=e.cssText,s.appendChild(n)}))},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{o as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as i}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var s;const e=window,r=e.trustedTypes,h=r?r.emptyScript:\"\",o=e.reactiveElementPolyfillSupport,n={toAttribute(t,i){switch(i){case Boolean:t=t?h:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,i){let s=t;switch(i){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},a=(t,i)=>i!==t&&(i==i||t==t),l={attribute:!0,type:String,converter:n,reflect:!1,hasChanged:a};class d extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var i;null!==(i=this.h)&&void 0!==i||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((i,s)=>{const e=this._$Ep(s,i);void 0!==e&&(this._$Ev.set(e,s),t.push(e))})),t}static createProperty(t,i=l){if(i.state&&(i.attribute=!1),this.finalize(),this.elementProperties.set(t,i),!i.noAccessor&&!this.prototype.hasOwnProperty(t)){const s=\"symbol\"==typeof t?Symbol():\"__\"+t,e=this.getPropertyDescriptor(t,s,i);void 0!==e&&Object.defineProperty(this.prototype,t,e)}}static getPropertyDescriptor(t,i,s){return{get(){return this[i]},set(e){const r=this[t];this[i]=e,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,i=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of i)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(i){const s=[];if(Array.isArray(i)){const e=new Set(i.flat(1/0).reverse());for(const i of e)s.unshift(t(i))}else void 0!==i&&s.push(t(i));return s}static _$Ep(t,i){const s=i.attribute;return!1===s?void 0:\"string\"==typeof s?s:\"string\"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var i,s;(null!==(i=this._$ES)&&void 0!==i?i:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var i;null===(i=this._$ES)||void 0===i||i.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,i)=>{this.hasOwnProperty(i)&&(this._$Ei.set(i,this[i]),delete this[i])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return i(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostConnected)||void 0===i?void 0:i.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostDisconnected)||void 0===i?void 0:i.call(t)}))}attributeChangedCallback(t,i,s){this._$AK(t,s)}_$EO(t,i,s=l){var e;const r=this.constructor._$Ep(t,s);if(void 0!==r&&!0===s.reflect){const h=(void 0!==(null===(e=s.converter)||void 0===e?void 0:e.toAttribute)?s.converter:n).toAttribute(i,s.type);this._$El=t,null==h?this.removeAttribute(r):this.setAttribute(r,h),this._$El=null}}_$AK(t,i){var s;const e=this.constructor,r=e._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=e.getPropertyOptions(r),h=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(s=t.converter)||void 0===s?void 0:s.fromAttribute)?t.converter:n;this._$El=r,this[r]=h.fromAttribute(i,t.type),this._$El=null}}requestUpdate(t,i,s){let e=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||a)(this[t],i)?(this._$AL.has(t)||this._$AL.set(t,i),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):e=!1),!this.isUpdatePending&&e&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,i)=>this[i]=t)),this._$Ei=void 0);let i=!1;const s=this._$AL;try{i=this.shouldUpdate(s),i?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var i;return null===(i=t.hostUpdate)||void 0===i?void 0:i.call(t)})),this.update(s)):this._$Ek()}catch(t){throw i=!1,this._$Ek(),t}i&&this._$AE(s)}willUpdate(t){}_$AE(t){var i;null===(i=this._$ES)||void 0===i||i.forEach((t=>{var i;return null===(i=t.hostUpdated)||void 0===i?void 0:i.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,i)=>this._$EO(i,this[i],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}d.finalized=!0,d.elementProperties=new Map,d.elementStyles=[],d.shadowRootOptions={mode:\"open\"},null==o||o({ReactiveElement:d}),(null!==(s=e.reactiveElementVersions)&&void 0!==s?s:e.reactiveElementVersions=[]).push(\"1.4.1\");export{d as ReactiveElement,n as defaultConverter,a as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as i}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var l,o;const r=t;class s extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const i=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=e(i,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return i}}s.finalized=!0,s._$litElement$=!0,null===(l=globalThis.litElementHydrateSupport)||void 0===l||l.call(globalThis,{LitElement:s});const n=globalThis.litElementPolyfillSupport;null==n||n({LitElement:s});const h={_$AK:(t,e,i)=>{t._$AK(e,i)},_$AL:t=>t._$AL};(null!==(o=globalThis.litElementVersions)&&void 0!==o?o:globalThis.litElementVersions=[]).push(\"3.2.0\");export{s as LitElement,r as UpdatingElement,h as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=e=>n=>\"function\"==typeof n?((e,n)=>(customElements.define(e,n),n))(e,n):((e,n)=>{const{kind:t,elements:s}=n;return{kind:t,elements:s,finisher(n){customElements.define(e,n)}}})(e,n);export{e as customElement};\n//# sourceMappingURL=custom-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst i=(i,e)=>\"method\"===e.kind&&e.descriptor&&!(\"value\"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i)}}:{kind:\"field\",key:Symbol(),placement:\"own\",descriptor:{},originalKey:e.key,initializer(){\"function\"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,i)}};function e(e){return(n,t)=>void 0!==t?((i,e,n)=>{e.constructor.createProperty(n,i)})(e,n,t):i(e,n)}export{e as property};\n//# sourceMappingURL=property.js.map\n","import{property as r}from\"./property.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function t(t){return r({...t,state:!0})}export{t as state};\n//# sourceMappingURL=state.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */function i(i,n){return o({descriptor:o=>{const t={get(){var o,n;return null!==(n=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(n){const n=\"symbol\"==typeof o?Symbol():\"__\"+o;t.get=function(){var o,t;return void 0===this[n]&&(this[n]=null!==(t=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==t?t:null),this[n]}}return t}})}export{i as query};\n//# sourceMappingURL=query.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst e=(e,t,o)=>{Object.defineProperty(t,o,e)},t=(e,t)=>({kind:\"method\",placement:\"prototype\",key:t.key,descriptor:e}),o=({finisher:e,descriptor:t})=>(o,n)=>{var r;if(void 0===n){const n=null!==(r=o.originalKey)&&void 0!==r?r:o.key,i=null!=t?{kind:\"method\",placement:\"prototype\",key:n,descriptor:t(o.key)}:{...o,key:n};return null!=e&&(i.finisher=function(t){e(t,n)}),i}{const r=o.constructor;void 0!==t&&Object.defineProperty(o,n,t(n)),null==e||e(r,n)}};export{o as decorateProperty,e as legacyPrototypeMethod,t as standardPrototypeMethod};\n//# sourceMappingURL=base.js.map\n","import{decorateProperty as o}from\"./base.js\";\n/**\n * @license\n * Copyright 2021 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */var n;const e=null!=(null===(n=window.HTMLSlotElement)||void 0===n?void 0:n.prototype.assignedElements)?(o,n)=>o.assignedElements(n):(o,n)=>o.assignedNodes(n).filter((o=>o.nodeType===Node.ELEMENT_NODE));function l(n){const{slot:l,selector:t}=null!=n?n:{};return o({descriptor:o=>({get(){var o;const r=\"slot\"+(l?`[name=${l}]`:\":not([name])\"),i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(r),s=null!=i?e(i,n):[];return t?s.filter((o=>o.matches(t))):s},enumerable:!0,configurable:!0})})}export{l as queryAssignedElements};\n//# sourceMappingURL=query-assigned-elements.js.map\n","import{nothing as t}from\"../lit-html.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const l=l=>null!=l?l:t;export{l as ifDefined};\n//# sourceMappingURL=if-defined.js.map\n","/**\n * Builder > Integration > Icon\n * <ua-builder-integration-icon>\n */\n\n// Import dependencies\nimport { unsafeCSS, css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\nimport { getIntegrationIconURL } from '@builder/integrations/utilities';\n\n// Import style for web component\nconst styles = require( './web-component-style.scss' );\n\n// eslint-disable-next-line require-jsdoc\n@customElement( 'ua-builder-integration-icon' )\nexport class IntegrationIcon extends LitElement {\n\t// Define style\n\tstatic styles = css`${ unsafeCSS( styles ) }`;\n\n\t// Properties\n\t@property( { type: String } ) code;\n\n\t@property( { type: String } ) size = 'regular';\n\n\t@property( { type: Boolean } ) plain;\n\n\t// eslint-disable-next-line require-jsdoc, no-useless-constructor\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t// eslint-disable-next-line require-jsdoc\n\trender() {\n\t\treturn html`\n\t\t\t<div \n\t\t\t\tclass=\"icon\"\n\t\t\t\tsize=${ this.size }\n\t\t\t\tplain=${ ifDefined( this.plain ) }\n\t\t\t>\n\t\t\t\t<img src=\"${ getIntegrationIconURL( { integrationCode: this.code } ) }\">\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","/**\n * Builder > Triggers > And/or selector\n * <ua-builder-triggers-and-or-selector>\n */\n\n// Import dependencies\nimport { getTriggers } from '@builder/item/triggers/utilities';\nimport { restCall } from '@builder/common/utilities';\nimport { unsafeCSS, css, html, LitElement } from 'lit';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { customElement, state } from 'lit/decorators.js';\n\n// Import style for web component\nconst styles = require( './web-component-style.scss' );\n\n// eslint-disable-next-line require-jsdoc\n@customElement( 'ua-builder-triggers-and-or-selector' )\nexport class TriggersAndOrSelector extends LitElement {\n\t// Define style\n\tstatic styles = css`${ unsafeCSS( styles ) }`;\n\n    // Update the component every time the logic changes\n    @state() logic = UncannyAutomator.recipe.triggersLogic;\n    @state() isSavingData = false;\n\n\t// eslint-disable-next-line require-jsdoc\n\trender() {\n        if ( getTriggers().length >= 2 ) {\n            return this.templateMultipleTriggers;\n        }\n\n        return this.templateDefault;\n\t}\n\n    /**\n     * Renders the template used when there are no triggers or there is only one\n     * \n     * @return {TemplateResult} The template\n     */\n    get templateDefault() {\n        return html`\n            <div class=\"header\">\n                <div class=\"header-title\">${ UncannyAutomator.i18n.trigger.singularName }</div>\n            </div>\n        `;\n    }\n\n    /**\n     * Renders the template used when there are multiple triggers\n     * \n     * @return {TemplateResult} The template\n     */\n    get templateMultipleTriggers() {\n        // Create the dropdown\n        const $dropdown = html`\n            <uo-select\n                @change=${ ( event ) => {\n                    this.logic = event.target.value;\n\n                    // Save the data\n                    this.saveData();\n                } }\n            >\n                ${ repeat(\n                    Object.entries( this.options ),\n                    // eslint-disable-next-line no-unused-vars\n                    ( [ value, text ] ) => value,\n                    ( [ value, text ] ) => html`\n                        <uo-select-option\n                            value=\"${ value }\"\n                            text=\"${ text }\"\n                            ?selected=${ this.logic === value }\n                        ></uo-select-option> \n                    `\n                ) }\n            </uo-select>\n        `;\n\n        return html`\n            <div class=\"header\">\n                <div class=\"header-title\">${ UncannyAutomator.i18n.trigger.name }</div>\n                <div class=\"header-logic\" dir=\"auto\">\n                    <span class=\"header-logic-title\">\n                        ${ UncannyAutomator.i18n.trigger.logic.runWhen }\n                    </span>\n\n                    <span class=\"header-logic-dropdown\">\n                        ${ $dropdown }\n                    </span>\n\n                    <span class=\"header-logic-description\">\n                        ${ this.logic === 'any' ? UncannyAutomator.i18n.trigger.logic.runWhenAny : UncannyAutomator.i18n.trigger.logic.runWhenAll }\n                    </span>\n\n                    ${ this.isSavingData ? html`<span class=\"header-loading\"></span>` : '' }\n                </div>\n            </div>\n        `;\n    }\n\n    /**\n     * Performs a REST call to save the selected\n     */\n    saveData() {\n        // Start loading animation\n        this.isSavingData = true;\n\n        restCall(\n            'triggers_change_logic',\n            {\n                recipe_id: UncannyAutomator.recipe.id,\n                trigger_logic: this.logic\n            }, ( response ) => {\n                this.isSavingData = false;\n\n                if ( ! response.success ) {\n                    location.reload();\n                    return;\n                }\n\n                // TODO: Add SnackBar\n            }, () => {\n                this.isSavingData = false;\n\n                location.reload();\n            },\n            {\n                requiresRecipesObject: false,\n                renderUI: false,\n            }\n        );\n    }\n\n    /**\n     * Returns the options for the dropdown\n     * \n     * @returns {Object} where the keys are the option values\n     */\n    get options() {\n        return {\n            any: UncannyAutomator.i18n.trigger.logic.any,\n            all: UncannyAutomator.i18n.trigger.logic.all,\n        }\n    }\n}\n","import { itemsObject } from '@builder/common/utilities';\n\n/**\n * Returns all the triggers in the recipe \n * \n * @returns {Array} with triggers\n */\nconst getTriggers = () => {\n    return itemsObject( 'get', {\n        filter: { itemType: 'trigger' },\n        format: 'array',\n    });\n}\n\nexport default getTriggers;\n","/**\n * Builder > Conditions > Add button\n * <ua-builder-conditions-add-button>\n */\n\n// Import light DOM CSS\nimport './style.scss';\n\n// Import dependencies\nconst { isEmpty, isDefined, addParametersToURL } = _uo.utility;\nimport { unsafeCSS, css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { ifDefined } from 'lit/directives/if-defined.js';\n\n// Import utilities and components\nimport { openInNewTab, addUTMParameters } from '@builder/common/utilities';\nimport { getConditionsGroupById } from '@builder/item/conditions/utilities';\nimport { canManageConditions } from '@builder/item/conditions/utilities';\nimport ConditionsGroup from '@builder/item/conditions/conditions-group';\nimport ItemConditionsModalList from '@builder/item/conditions/modal-list';\n\n// Import style for web component\nconst styles = require( './web-component-style.scss' );\n\n// eslint-disable-next-line require-jsdoc\n@customElement( 'ua-builder-conditions-add-button' )\nexport class ConditionAddButton extends LitElement {\n\t// Define style\n\tstatic styles = css`${ unsafeCSS( styles ) }`;\n\n\t/**\n\t * Properties\n\t */\n\n\t// optional. If this is defined, the item will be added to the conditions block\n\t@property( { type: String, attribute: 'action-id' } ) actionID; \n\t// optional. If this is defined, the condition will be added to that conditions group instead of creating another\n\t@property( { type: String, attribute: 'condition-group-id' } ) conditionsGroupID;\n\n\t// optional. The size of the button\n\t@property( { type: String } ) size; \n\t@property( { type: Boolean, reactive: true } ) isActionOpen = false;\n\n\t// eslint-disable-next-line require-jsdoc, no-useless-constructor\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t// eslint-disable-next-line require-jsdoc\n\trender() {\n\t\tif ( ! canManageConditions() ) {\n\t\t\treturn this.renderDisabledButton();\n\t\t}\n\n\t\treturn this.renderEnabledButton();\n\t}\n\n\t// eslint-disable-next-line require-jsdoc\n\tconnectedCallback() {\n\t\tsuper.connectedCallback();\n\n\t\t// Disable the button when the item's options is opened\n\t\tthis.disableWhenUserEditsAction();\n\t}\n\n\t// eslint-disable-next-line require-jsdoc\n\tdisconnectedCallback() {\n\t\tsuper.disconnectedCallback();\n\n\t\t// Remove the event listeners\n\t\tdocument.removeEventListener( 'automator/item/options/open', this.callbackOptionsOpen );\n\t\tdocument.removeEventListener( 'automator/item/options/close', this.callbackOptionsClose );\n\t}\n\n\t/**\n\t * Renders the button when it's enabled\n\t * \n\t * @return {TemplateResult} The button\n\t */\n\trenderEnabledButton() {\n\t\t// Check if this button is on an action, and the action's options are opened\n\t\tif ( this.isActionOpen ) {\n\t\t\treturn html`\n\t\t\t\t<uo-tooltip>\n\t\t\t\t\t${ UncannyAutomator.i18n.conditions.pleaseSaveActionFirst }\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tsize=${ ifDefined( this.size ) }\n\t\t\t\t\t\tdisabled\n\n\t\t\t\t\t\tslot=\"target\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t</uo-button>\n\t\t\t\t</uo-tooltip>\n\t\t\t`;\n\t\t}\n\n\t\treturn html`\n\t\t\t<uo-button\n\t\t\t\tcolor=\"secondary\"\n\n\t\t\t\tsize=${ ifDefined( this.size ) }\n\n\t\t\t\t@click=${ this.showListOfConditions }\n\t\t\t>\n\t\t\t\t<slot></slot>\n\t\t\t</uo-button>\n\t\t`;\n\t}\n\n\t/**\n\t * Renders the button when it's enabled\n\t * \n\t * @return {TemplateResult} The button\n\t */\n\trenderDisabledButton() {\n\t\treturn html`\n\t\t\n\t\t\t<div\n\t\t\t\t@click=${ this.promotePro }\n\t\t\t>\n\t\t\t\t<uo-tooltip\n\t\t\t\t\tmax-width=\"200\"\n\t\t\t\t>\n\t\t\t\t${ UncannyAutomator.i18n.conditions.unlockConditions }\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tsize=${ ifDefined( this.size ) }\n\n\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\tdisabled\n\n\t\t\t\t\t\tslot=\"target\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t</uo-button>\n\t\t\t\t</uo-tooltip>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * Goes to the next step and renders list of conditions\n\t */\n\tshowListOfConditions() {\n\t\t// Create the conditions group\n\t\tconst conditionsGroup = ! isEmpty( this.conditionsGroupID ) \n\t\t\t? getConditionsGroupById( { conditionsGroupId: this.conditionsGroupID } ) \n\t\t\t: ( new ConditionsGroup( {} ) );\n\n\t\t// Check if we should add an action automatically\n\t\tif ( ! isEmpty( this.actionID ) ) {\n\t\t\tconditionsGroup.actions = [ this.actionID ];\n\t\t}\n\n\t\t// Create the modal with the list of conditions\n\t\tnew ItemConditionsModalList( {\n\t\t\tconditionsGroupId: conditionsGroup.id,\n\t\t\tcomingFrom: 'action-filter-button',\n\t\t} );\n\t}\n\n\t/**\n\t * Disables the button when the user is editing the action\n\t *\n\t * @return {undefined}\n\t */\n\tdisableWhenUserEditsAction() {\n\t\t// Check if this button is on an action in the first place\n\t\tif ( isEmpty( this.actionID ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if it can manage conditions\n\t\tif ( ! canManageConditions() ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * The callback invoked when the options panel is opened\n\t\t * We're following this approach so we can remove the listener when the \n\t\t * Lit element is removed, as the listener is tied to the document, and not to this node\n\t\t */\n\t\tthis.callbackOptionsOpen = {\n\t\t\thandleEvent: ( event ) => {\n\t\t\t\t// Check if it's the action where this button is\n\t\t\t\tif ( this.actionID != event.detail.itemId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Disable the button\n\t\t\t\tthis.isActionOpen = true;\n\t\t\t}\n\t\t};\n\n\t\t// Same as above, but when the panel is closed\n\t\tthis.callbackOptionsClose = {\n\t\t\thandleEvent: ( event ) => {\n\t\t\t\t// Check if it's the action where this button is\n\t\t\t\tif ( this.actionID != event.detail.itemId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Enable the button\n\t\t\t\tthis.isActionOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// Listen when an item is opened\n\t\tdocument.addEventListener( 'automator/item/options/open', this.callbackOptionsOpen );\n\n\t\t// Listen when the item is closed\n\t\tdocument.addEventListener( 'automator/item/options/close', this.callbackOptionsClose );\n\t}\n\n\t/**\n\t * Peforms the actions to promote the Pro version\n\t * For now, it just sends the user to the pricing page\n\t *\n\t * @return {undefined}\n\t */\n\tpromotePro() {\n\t\t// Open URL on a new tab\n\t\topenInNewTab(\n\t\t\taddParametersToURL(\n\t\t\t\t// Add UTM parameters\n\t\t\t\taddUTMParameters( 'https://automatorplugin.com/pricing/', {\n\t\t\t\t\tmedium: 'recipe_creator',\n\t\t\t\t\tcontent: 'action_disabled_condition_button',\n\t\t\t\t} ),\n\t\t\t\t{\n\t\t\t\t\tuap_bpro_context: 'filter'\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t}\n}\n","/**\n * Builder > Conditions > Condition pill\n * <ua-builder-conditions-pill>\n */\n\n// Import dependencies\nconst { isDefined } = _uo.utility;\nimport { unsafeCSS, css, html, LitElement } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { createRef, ref } from 'lit/directives/ref.js';\nimport { getConditionById, updateRemoteConditionsMeta } from '@builder/item/conditions/utilities';\nimport Actions from '@builder/item/actions';\n\n// Import style for web component\nconst styles = require( './web-component-style.scss' );\n\n// eslint-disable-next-line require-jsdoc\n@customElement( 'ua-builder-conditions-pill' )\nexport class ConditionPill extends LitElement {\n\t// Define style\n\tstatic styles = css`${ unsafeCSS( styles ) }`;\n\n\t// Properties\n\t@property( { type: String, attribute: 'condition-id', reactive: true } ) id;\n\t@property( { type: String, attribute: 'condition-group-id', reactive: true } ) groupId;\n\n\t// The whole pill element\n\t$pill = createRef();\n\t// Remove button element\n\t$removeButton = createRef();\n\n\t// eslint-disable-next-line require-jsdoc, no-useless-constructor\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Adds the dynamic name when the element is added to the DOM\n\t * THIS IS A TEMPORARY SOLUTION, until tokens become web components\n\t *\n\t * Steps:\n\t * 1. Make sure tokens are web components\n\t * 2. Move .condition.$dynamicSentence to the Shadow DOM\n\t * 3. Remove this method completely\n\t *\n\t * @return {undefined}\n\t */\n\tconnectedCallback() {\n\t\tsuper.connectedCallback();\n\n\t\t// Add dynamic name\n\t\t// This should be inside the TemplateResult (in the Shadow DOM), not here\n\t\tthis.innerHTML = '';\n\t\tthis.append( this.condition.$dynamicSentence );\n\t}\n\n\t// eslint-disable-next-line require-jsdoc\n\trender() {\n\t\t// Check if the condition property is defined\n\t\tif ( ! isDefined( this.condition ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if it's NOT missing\n\t\tif ( ! this.condition.isMissing ) {\n\t\t\treturn this._templateCondition;\n\t\t}\n\n\t\t// Check if it's missing\n\t\tif ( this.condition.isMissing ) {\n\t\t\treturn this._templateMissingCondition;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the template a condition\n\t *\n\t * @return {TemplateResult} The template of the condition\n\t */\n\tget _templateCondition() {\n\t\treturn html`\n\t\t\t<div class=\"pill\" ${ ref( this.$pill ) }>\n\n\t\t\t\t<div class=\"pill-logo\">\n\t\t\t\t\t<ua-builder-integration-icon\n\t\t\t\t\t\tcode=\"${ this.condition.integrationCode }\"\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tplain\n\t\t\t\t\t></ua-builder-integration-icon>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"pill-sentence\">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"pill-actions\">\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\t@click=${ this.edit }\n\n\t\t\t\t\t\tclass=\"pill-actions-edit\"\n\t\t\t\t\t\tcolor=\"transparent\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id=\"pencil\"></uo-icon>\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\t${ ref( this.$removeButton ) }\n\n\t\t\t\t\t\t@click=${ this.remove }\n\n\t\t\t\t\t\tclass=\"pill-actions-remove\"\n\t\t\t\t\t\tcolor=\"transparent\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id=\"trash\"></uo-icon>\n\t\t\t\t\t</uo-button>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * Returns the template a condition when it's missing\n\t *\n\t * @return {TemplateResult} The template of the missing condition\n\t */\n\tget _templateMissingCondition() {\n\t\treturn html`\n\t\t\t<div class=\"pill pill--missing\" ${ ref( this.$pill ) }>\n\n\t\t\t\t<div class=\"pill-sentence\">\n\t\t\t\t\t${\n\t\t\t\t\t\tisDefined( this.condition.backup.integrationName ) ?\n\t\t\t\t\t\t\thtml`\n\t\t\t\t\t\t\t\t<uo-alert \n\t\t\t\t\t\t\t\t\ttype=\"warning\"\n\t\t\t\t\t\t\t\t\theading=${ UncannyAutomator.i18n.conditions.missingCondition }\n\t\t\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t${ this.condition.backup.integrationName }: <slot></slot>\n\t\t\t\t\t\t\t\t</uo-alert>\n\t\t\t\t\t\t\t` :\n\t\t\t\t\t\t\tUncannyAutomator.i18n.conditions.missingCondition\n\t\t\t\t\t}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"pill-actions\">\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\t${ ref( this.$removeButton ) }\n\n\t\t\t\t\t\t@click=${ this.remove }\n\n\t\t\t\t\t\tclass=\"pill-actions-remove\"\n\t\t\t\t\t\tcolor=\"transparent\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id=\"trash\"></uo-icon>\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t/**\n\t * Edits the condition\n\t *\n\t * @return {undefined}\n\t */\n\tedit() {\n\t\t// Edit condition\n\t\tthis.condition.conditionsGroup.editCondition( {\n\t\t\tconditionId: this.condition.id,\n\t\t} );\n\t}\n\n\t/**\n\t * Removes the condition\n\t *\n\t * @return {undefined}\n\t */\n\tremove() {\n\t\t// Force actions to be visible all the time in the pill\n\t\tthis.$pill.value.classList.add( 'pill--force-visible-actions' );\n\t\t// Add loading animation to the remove button\n\t\tthis.$removeButton.value.loading = true;\n\n\t\t// Remove the condition from the main object\n\t\tthis.condition.conditionsGroup.removeCondition( {\n\t\t\tconditionID: this.condition.id,\n\t\t} );\n\n\t\t// Update the meta\n\t\tupdateRemoteConditionsMeta( {\n\t\t\tonSuccess: () => {\n\t\t\t\tnew Actions();\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Returns the condition of this Condition Pill\n\t *\n\t * @return {Condition} The attached condition\n\t */\n\tget condition() {\n\t\t// Return the condition\n\t\treturn getConditionById( {\n\t\t\tconditionsGroupId: this.groupId,\n\t\t\tconditionId: this.id\n\t\t} );\n\t}\n}\n","/**\n * Builder > Conditions > Condition pill\n * <ua-builder-conditions-pill>\n */\n\n// Import dependencies\nimport { unsafeCSS, css, html, LitElement } from 'lit';\nimport { customElement, query } from 'lit/decorators.js';\n\nimport { recipeSetRequiresUser } from '@builder/common/utilities';\n\n// Import style for web component\nconst styles = require( './web-component-style.scss' );\n\n// eslint-disable-next-line require-jsdoc\n@customElement( 'ua-builder-user-selector-set-data-dialog' )\nexport class SetUserDataDialog extends LitElement {\n\t// Define style\n\tstatic styles = css`${ unsafeCSS( styles ) }`;\n\n\t// Get main elements\n\t@query( 'uo-dialog' ) $dialog;\n\n\t@query( '#confirm-button' ) $confirmButton;\n\n\t// eslint-disable-next-line require-jsdoc, no-useless-constructor\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t// eslint-disable-next-line require-jsdoc\n\trender() {\n\t\treturn html`\n\t\t\t<uo-dialog\n\t\t\t\theading=\"${ UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title }\"\n\t\t\t\topen\n\t\t\t>\n\t\t\t\t<div class=\"set-data-dialog\">\n\t\t\t\t\t<div class=\"set-data-dialog-summary\">\n\t\t\t\t\t\t<slot name=\"summary\"></slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"set-data-dialog-box\">\n\t\t\t\t\t\t<slot name=\"box\"></slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"set-data-dialog-description\">\n\t\t\t\t\t\t<slot name=\"description\"></slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<uo-button\n\t\t\t\t\tslot=\"primary-action\"\n\t\t\t\t\tid=\"confirm-button\"\n\n\t\t\t\t\t@click=${ this.confirmAction }\n\t\t\t\t>\n\t\t\t\t\t${ UncannyAutomator.i18n.userSelector.setOptions }\n\t\t\t\t</uo-button>\n\n\t\t\t\t<uo-button\n\t\t\t\t\tslot=\"secondary-action\"\n\t\t\t\t\tdialog-action=\"close\"\n\t\t\t\t\tcolor=\"secondary\"\n\n\t\t\t\t\t@click=${ this.cancelAction }\n\t\t\t\t>\n\t\t\t\t\t${ UncannyAutomator.i18n.cancel }\n\t\t\t\t</uo-button>\n\t\t\t</uo-dialog>\n\t\t`;\n\t}\n\n\t/**\n\t * Callback invoked when the user confirms that it wants to add user data\n\t *\n\t * @return {undefined}\n\t */\n\tconfirmAction() {\n\t\t// Add loading animation to the confirm button\n\t\tthis.$confirmButton.loading = true;\n\n\t\t// Do call to request the user data\n\t\trecipeSetRequiresUser(\n\t\t\ttrue,\n\n\t\t\t// On success\n\t\t\t() => {\n\t\t\t\t// Trigger custom event\n\t\t\t\tthis.dispatchEvent(\n\t\t\t\t\t( new CustomEvent( 'automator_user-selector_request-data-dialog_confirm_success' ) )\n\t\t\t\t);\n\n\t\t\t\t// Remove loading animation to the confirm button\n\t\t\t\tthis.$confirmButton.loading = false;\n\n\t\t\t\t// Destroy this element\n\t\t\t\tthis.parentNode.removeChild( this );\n\t\t\t},\n\n\t\t\t// On fail\n\t\t\t() => {\n\t\t\t\t// Trigger custom event\n\t\t\t\tthis.dispatchEvent(\n\t\t\t\t\t( new CustomEvent( 'automator_user-selector_request-data-dialog_confirm_fail' ) )\n\t\t\t\t);\n\n\t\t\t\t// Remove loading animation to the confirm button\n\t\t\t\tthis.$confirmButton.loading = false;\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Callback invoked when the user cancels the action\n\t *\n\t * @return {undefined}\n\t */\n\tcancelAction() {\n\t\t// Destroy this element\n\t\tthis.parentNode.removeChild( this );\n\n\t\t// Trigger custom event\n\t\tthis.dispatchEvent(\n\t\t\t( new CustomEvent( 'automator_user-selector_request-data-dialog_cancel' ) )\n\t\t);\n\t}\n}\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\n// Import utilities\nconst {\n\tisDefined,\n\taddParametersToURL\n} = _uo.utility;\n\n/**\n * Creates circle on the bottom right corner for users to send feedback\n */\nexport default class SendFeedback {\n\t// eslint-disable-next-line require-jsdoc\n\tconstructor() {\n\t\tthis.render();\n\t}\n\n\t/**\n\t * Creates the elements\n\t *\n\t * @return {undefined}\n\t */\n\trender() {\n\t\tconst $container = $( `\n\t\t\t<div class=\"uap-report-bug\">\n\t\t\t\t<a\n\t\t\t\t\tclass=\"uap-report-bug__btn\"\n\n\t\t\t\t\tuap-tooltip=\"${ UncannyAutomator.i18n.sendFeedback.title }\"\n\t\t\t\t\tuap-tooltip-flow=\"left\"\n\n\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\thref=\"${ addParametersToURL( 'https://automatorplugin.com/feedback/', this.utmBtnParameters ) }\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"uap-report-bug__icon\"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t` );\n\n\t\t// Append to the body\n\t\t$( 'body' ).append( $container );\n\t}\n\n\t/**\n\t * Returns the UTM parameters for the link that goes\n\t * to automatorplugin.com for users to leave feedback\n\t *\n\t * @return {Object} UTM parameters\n\t */\n\tget utmBtnParameters() {\n\t\t// Check version\n\t\tlet version, utmSource;\n\n\t\tif ( ! isDefined( UncannyAutomator.wp ) || ! UncannyAutomator.wp ) {\n\t\t\tversion = `Uncanny Automator ${ UncannyAutomator.version }`;\n\t\t\tutmSource = 'uncanny_automator';\n\t\t} else {\n\t\t\tversion = `Uncanny Automator Pro ${ UncannyAutomator.version }`;\n\t\t\tutmSource = 'uncanny_automator_pro';\n\t\t}\n\n\t\treturn {\n\t\t\tversion: version,\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tutm_source: utmSource,\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tutm_medium: 'send_feedback',\n\t\t\t// eslint-disable-next-line camelcase\n\t\t\tutm_content: 'bulb_icon',\n\t\t};\n\t}\n}\n","// Import style\nimport './style.scss';\n\n// Import utilities\nimport { restCall } from '@builder/common/utilities.js';\n\n// Import utilities\nconst {\n\tdebounce\n} = _uo.utility;\n\n/**\n * Listen to changes to the Title field and save it\n */\nexport default class RecipeTitle {\n\t/**\n\t * Invokes method to listen to the Title field\n\t * \n\t * @return {undefined}\n\t */\n\tconstructor() {\n\t\t// Listen field changes\n\t\tthis.listenField();\n\t}\n\n\t/**\n\t * Listen to the Title field\n\t * \n\t * @return {undefined}\n\t */\n\tlistenField() {\n\t\t// Listen to changes to the title field\n\t\tthis.$field.addEventListener( 'input', debounce( () => {\n\t\t\t// Save the title\n\t\t\tthis.saveTitle();\n\t\t}, 1500 ) );\n\t}\n\n\t/**\n\t * Save the title\n\t * \n\t * @return {undefined}\n\t */\n\tsaveTitle() {\n\t\t// Set loading animation\n\t\tthis.$wrapper.classList.add( 'uap-title--loading' );\n\n\t\t// Do REST call\n\t\trestCall(\n\t\t\t// Endpoint\n\t\t\t'change_post_title',\n\n\t\t\t// Data\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tpost_ID: UncannyAutomator.recipe.id,\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tpost_title: this.title,\n\t\t\t},\n\n\t\t\t// On success\n\t\t\t( response ) => {\n\t\t\t\t// Stop loading\n\t\t\t\tthis.$wrapper.classList.remove( 'uap-title--loading' );\n\n\t\t\t\t// Add success class\n\t\t\t\tthis.$wrapper.classList.add( 'uap-title--success' );\n\n\t\t\t\t// Remove it after two seconds\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\tthis.$wrapper.classList.remove( 'uap-title--success' );\n\t\t\t\t}, 3000 );\n\t\t\t},\n\n\t\t\t// On fail\n\t\t\t() => {\n\t\t\t\t// Stop loading\n\t\t\t\tthis.$wrapper.classList.remove( 'uap-title--loading' );\n\n\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.error( \"Couldn't save the title\" );\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// Settings\n\t\t\t{\n\t\t\t\t// Doesn't require the call to return the recipes_object property\n\t\t\t\trequiresRecipesObject: false\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Returns the recipe title\n\t * \n\t * @return {String} The recipe title\n\t */\n\tget title() {\n\t\treturn this.$field.value;\n\t}\n\n\t/**\n\t * Returns the wrapper that contains the \"Title\" field\n\t * \n\t * @return {Node} The wrapper\n\t */\n\tget $wrapper() {\n\t\treturn document.getElementById( 'titlewrap' );\n\t}\n\n\t/**\n\t * Returns the field to set the title\n\t * \n\t * @return {Node} The title field\n\t */\n\tget $field() {\n\t\treturn document.getElementById( 'title' );\n\t}\n}\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\nimport { restCall } from '../common/utilities.js';\n\n// Import utilities\nconst {\n\tisDefined\n} = _uo.utility;\n\n/**\n * Listens to the Categories metabox to save the values using AJAX on change.\n * We need to do this because Automator doesn't have a \"Save\" button\n */\nexport default class Categories {\n\t// eslint-disable-next-line require-jsdoc\n\tconstructor() {\n\t\t// Check if the required element exist before adding the event listeners\n\t\tif ( this.hasMetabox ) {\n\t\t\t// Listen changes to the checkboxes\n\t\t\tthis.listenCheckboxes();\n\t\t}\n\t}\n\n\t/**\n\t * Returns the node of the container of the Categories metabox\n\t *\n\t * @return {Node} The categories metabox\n\t */\n\tget $container() {\n\t\treturn $( '#recipe_categorydiv' );\n\t}\n\n\t/**\n\t * Returns the node of the container (ul) with the list\n\t * of categories\n\t *\n\t * @return {Node} The list\n\t */\n\tget $allCategoriesList() {\n\t\treturn $( '#recipe_categorychecklist' );\n\t}\n\n\t/**\n\t * Returns true if the required metabox exists\n\t *\n\t * @return {Boolean} True if \"Categories\" exists\n\t */\n\tget hasMetabox() {\n\t\treturn isDefined( this.$allCategoriesList );\n\t}\n\n\t/**\n\t * Listens changes to all checkboxes in the Category metabox\n\t *\n\t * @return {undefined}\n\t */\n\tlistenCheckboxes() {\n\t\t// Listen changes to each checkbox\n\t\tthis.$container.on(\n\t\t\t'change',\n\t\t\t'input[type=\"checkbox\"][name=\"tax_input[recipe_category][]\"], .popular-category input[type=\"checkbox\"]',\n\t\t\t( event ) => {\n\t\t\t\t// Get checkbox\n\t\t\t\tconst $checkbox = $( event.currentTarget );\n\n\t\t\t\t// Save category\n\t\t\t\tthis.saveCategory( $checkbox );\n\t\t\t}\n\t\t);\n\n\t\t// Listen when the user adds a new category. This will be\n\t\t// triggered when WP creates a new category after the user\n\t\t// used the \"+ Add New Category\" form\n\t\tnew MutationObserver( ( mutations ) => {\n\t\t\t// Iterate mutations\n\t\t\tmutations.forEach( ( mutation ) => {\n\t\t\t\t// Iterate new categories\n\t\t\t\tmutation.addedNodes.forEach( ( addedNode ) => {\n\t\t\t\t\t// Get the checkbox of the new category\n\t\t\t\t\tconst $checkbox = $( addedNode ).find(\n\t\t\t\t\t\t'input[type=\"checkbox\"][name=\"tax_input[recipe_category][]\"]'\n\t\t\t\t\t);\n\n\t\t\t\t\t// Save category\n\t\t\t\t\tthis.saveCategory( $checkbox );\n\t\t\t\t} );\n\t\t\t} );\n\t\t} ).observe( this.$allCategoriesList[ 0 ], {\n\t\t\tchildList: true,\n\t\t} );\n\t}\n\n\t/**\n\t * Saves the value of the category (checked/not checked)\n\t *\n\t * @param {Node} $checkbox The checkbox\n\t * @return {undefined}\n\t */\n\tsaveCategory( $checkbox ) {\n\t\t// Get the data\n\t\tconst checkboxData = {\n\t\t\tid: $checkbox.val(),\n\t\t\tisChecked: $checkbox.is( ':checked' ),\n\t\t};\n\n\t\t// Set checkbox as loading\n\t\tthis.setStatus( 'loading', true, $checkbox );\n\n\t\t// Do call\n\t\trestCall(\n\t\t\t'set_recipe_terms',\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tterm_id: 'recipe_category',\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tcategory_id: checkboxData.id,\n\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\tset_category: checkboxData.isChecked,\n\t\t\t},\n\t\t\t( response ) => {\n\t\t\t\t// If the call (not necessarily the task) was successful...\n\n\t\t\t\tif ( response.success ) {\n\t\t\t\t\t// If everything went well...\n\t\t\t\t\t// Show a green check icon\n\t\t\t\t\tthis.setStatus( 'success', true, $checkbox );\n\n\t\t\t\t\t// Remove it after 2 seconds\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t// Remove the green check icon\n\t\t\t\t\t\tthis.setStatus( 'success', false, $checkbox );\n\t\t\t\t\t}, 2000 );\n\t\t\t\t} else {\n\t\t\t\t\t// Output if the developer mode is enabled\n\t\t\t\t\tif ( UncannyAutomator.dev.developerMode ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\tconsole.error( \"Couldn't change the status of the recipe category\" );\n\t\t\t\t\t}\n\n\t\t\t\t\t// If something went wrong,\n\t\t\t\t\t// revert the value of the checkbox\n\t\t\t\t\tthis.revertCheckboxValue( $checkbox );\n\n\t\t\t\t\t// Show an error icon\n\t\t\t\t\tthis.setStatus( 'error', true, $checkbox );\n\t\t\t\t\t// Remove it after 2 seconds\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t// Remove the error icon\n\t\t\t\t\t\tthis.setStatus( 'error', false, $checkbox );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// Remove loading animation\n\t\t\t\tthis.setStatus( 'loading', false, $checkbox );\n\t\t\t},\n\t\t\t() => {\n\t\t\t\t// On error...\n\n\t\t\t\t// Revert the value of the checkbox\n\t\t\t\tthis.revertCheckboxValue( $checkbox );\n\n\t\t\t\t// Remove loading animation\n\t\t\t\tthis.setStatus( 'loading', false, $checkbox );\n\n\t\t\t\t// Show an error icon\n\t\t\t\tthis.setStatus( 'error', true, $checkbox );\n\t\t\t\t// Remove it after 2 seconds\n\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t// Remove the error icon\n\t\t\t\t\tthis.setStatus( 'error', false, $checkbox );\n\t\t\t\t} );\n\t\t\t},\n\t\t\t{\n\t\t\t\trequiresRecipesObject: false,\n\t\t\t\trenderUI: false,\n\t\t\t}\n\t\t);\n\t}\n\n\t/**\n\t * Reverts the value of the checkbox\n\t *\n\t * @param {Node} $checkbox The checkbox\n\t * @return {undefined}\n\t */\n\trevertCheckboxValue( $checkbox ) {\n\t\t// Revert the value of the checkbox\n\t\t$checkbox.prop( 'checked', ! $checkbox.is( ':checked' ) );\n\t}\n\n\t/**\n\t * Sets the status of the metabox\n\t *\n\t * @param {String}  status    The status of the metabox\n\t * @param {Boolean} enable    Defines the value of the status.\n\t *                            For example, if status is \"loading\",\n\t *                            and \"enable\" is true, then the checkbox\n\t *                            is rendered with the loading animations.\n\t * @param {Node}    $checkbox The checkbox of the category\n\t * @return {undefined}\n\t */\n\tsetStatus( status = '', enable = true, $checkbox ) {\n\t\t// Get label container\n\t\tconst $label = $checkbox.closest( '.selectit' );\n\n\t\t// Check what status we have to set or unset\n\t\tif ( status == 'loading' ) {\n\t\t\t// Check if we have to add or remove the loading status\n\t\t\tif ( enable ) {\n\t\t\t\t// Add loading animation\n\t\t\t\t$label.addClass( 'uap-taxonomy-loading' );\n\n\t\t\t\t// Disable checkbox\n\t\t\t\t$checkbox.prop( 'disabled', true );\n\t\t\t} else {\n\t\t\t\t// Remove loading animation\n\t\t\t\t$label.removeClass( 'uap-taxonomy-loading' );\n\n\t\t\t\t// Enable checkbox\n\t\t\t\t$checkbox.prop( 'disabled', false );\n\t\t\t}\n\t\t} else if ( status == 'success' ) {\n\t\t\t// Check if we have to add or remove the loading status\n\t\t\tif ( enable ) {\n\t\t\t\t// Add loading animation\n\t\t\t\t$label.addClass( 'uap-taxonomy-success' );\n\t\t\t} else {\n\t\t\t\t// Remove loading animation\n\t\t\t\t$label.removeClass( 'uap-taxonomy-success' );\n\t\t\t}\n\t\t} else if ( status == 'error' ) {\n\t\t\t// Check if we have to add or remove the loading status\n\t\t\tif ( enable ) {\n\t\t\t\t// Add loading animation\n\t\t\t\t$label.addClass( 'uap-taxonomy-error' );\n\t\t\t} else {\n\t\t\t\t// Remove loading animation\n\t\t\t\t$label.removeClass( 'uap-taxonomy-error' );\n\t\t\t}\n\t\t}\n\t}\n}\n","// eslint-disable-next-line import/no-unresolved\nimport $ from 'jquery';\n\nimport { sprintf } from '@wordpress/i18n';\n\nimport { restCall, handleFatalError, supportLink } from '../common/utilities.js';\n\nexport default class Tags {\n\t// eslint-disable-next-line require-jsdoc\n\tconstructor() {\n\t\t// Get elements\n\t\tthis.getElements();\n\n\t\t// Check if the required elements exist before adding\n\t\t// the event listeners\n\t\tif ( this.$elements.tagsTextarea.length == 1 ) {\n\t\t\t// Listen modifications to the textarea\n\t\t\tthis.listenModificationsToTags();\n\t\t}\n\t}\n\n\tgetElements() {\n\t\tthis.$elements = {\n\t\t\tcontainer: $( '#tagsdiv-recipe_tag' ),\n\t\t\ttagsTextarea: $( 'textarea#tax-input-recipe_tag' ),\n\t\t\ttagsList: $( '#tagsdiv-recipe_tag .tagchecklist' ),\n\t\t};\n\t}\n\n\tlistenModificationsToTags() {\n\t\t// Listen when the user adds a new tag. This will be\n\t\t// triggered when the user uses the input to add tags\n\t\tnew MutationObserver( ( mutations ) => {\n\t\t\t// Save tags\n\t\t\tthis.saveTags();\n\t\t} ).observe( this.$elements.tagsList[ 0 ], {\n\t\t\tchildList: true,\n\t\t} );\n\t}\n\n\tsaveTags() {\n\t\t// Get tags\n\t\tconst tags = this.getTags();\n\n\t\t// Set checkbox as loading\n\t\tthis.setStatus( 'loading', true );\n\n\t\t// Do call\n\t\trestCall(\n\t\t\t'set_recipe_terms',\n\t\t\t{\n\t\t\t\tterm_id: 'recipe_tag',\n\t\t\t\trecipe_id: UncannyAutomator.recipe.id,\n\t\t\t\ttags: tags,\n\t\t\t},\n\t\t\t( response ) => {\n\t\t\t\t// If the call (not necessarily the task) was successful...\n\n\t\t\t\tif ( response.success ) {\n\t\t\t\t\t// If everything went well...\n\t\t\t\t\t// Show a green check icon\n\t\t\t\t\tthis.setStatus( 'success', true );\n\n\t\t\t\t\t// Remove it after 2 seconds\n\t\t\t\t\tsetTimeout( () => {\n\t\t\t\t\t\t// Remove the green check icon\n\t\t\t\t\t\tthis.setStatus( 'success', false );\n\t\t\t\t\t}, 2000 );\n\t\t\t\t} else {\n\t\t\t\t\t// Handle error by showing a modal with data\n\t\t\t\t\thandleFatalError({\n\t\t\t\t\t\ttitle:   UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,\n\t\t\t\t\t\twarning: sprintf(\n\t\t\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,\n\t\t\t\t\t\t\t`<a href=\"${ supportLink() }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.automatorSupport }</a>`\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: '',\n\t\t\t\t\t\tconsole: `Data sent:\\n ${ JSON.stringify( response ) }`,\n\t\t\t\t\t\tbuttons: {\n\t\t\t\t\t\t\tconfirm: null,\n\t\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.close,\n\t\t\t\t\t\t\t\tonClick: ( $modal ) => {\n\t\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t\t$modal.destroy();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Remove loading animation\n\t\t\t\tthis.setStatus( 'loading', false );\n\t\t\t},\n\t\t\t( response ) => {\n\t\t\t\t// On error...\n\n\t\t\t\t// Handle error by showing a modal with data\n\t\t\t\thandleFatalError({\n\t\t\t\t\ttitle:   UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,\n\t\t\t\t\twarning: sprintf(\n\t\t\t\t\t\tUncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,\n\t\t\t\t\t\t`<a href=\"${ supportLink() }\" target=\"_blank\">${ UncannyAutomator.i18n.debugging.automatorSupport }</a>`\n\t\t\t\t\t),\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tconsole: `Data sent:\\n ${ JSON.stringify( response ) }`,\n\t\t\t\t\tbuttons: {\n\t\t\t\t\t\tconfirm: null,\n\t\t\t\t\t\tcancel: {\n\t\t\t\t\t\t\tlabel: UncannyAutomator.i18n.close,\n\t\t\t\t\t\t\tonClick: ( $modal ) => {\n\t\t\t\t\t\t\t\t// Destroy modal\n\t\t\t\t\t\t\t\t$modal.destroy();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t{\n\t\t\t\trequiresRecipesObject: false,\n\t\t\t\trenderUI: false,\n\t\t\t}\n\t\t);\n\t}\n\n\tsetStatus( status = '', enable = true ) {\n\t\t// Check what status we have to set or unset\n\t\tif ( status == 'loading' ) {\n\t\t\t// Check if we have to add or remove the loading status\n\t\t\tif ( enable ) {\n\t\t\t\t// Add loading animation\n\t\t\t\tthis.$elements.container.addClass( 'uap-tags-loading' );\n\t\t\t} else {\n\t\t\t\t// Remove loading animation\n\t\t\t\tthis.$elements.container.removeClass( 'uap-tags-loading' );\n\t\t\t}\n\t\t} else if ( status == 'success' ) {\n\t\t\t// Check if we have to add or remove the loading status\n\t\t\tif ( enable ) {\n\t\t\t\t// Add loading animation\n\t\t\t\tthis.$elements.container.addClass( 'uap-tags-success' );\n\t\t\t} else {\n\t\t\t\t// Remove loading animation\n\t\t\t\tthis.$elements.container.removeClass( 'uap-tags-success' );\n\t\t\t}\n\t\t} else if ( status == 'error' ) {\n\t\t\t// Check if we have to add or remove the loading status\n\t\t\tif ( enable ) {\n\t\t\t\t// Add loading animation\n\t\t\t\tthis.$elements.container.addClass( 'uap-tags-error' );\n\t\t\t} else {\n\t\t\t\t// Remove loading animation\n\t\t\t\tthis.$elements.container.removeClass( 'uap-tags-error' );\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTags() {\n\t\t// Get tags separated by comma\n\t\tconst tagsCommaSeparated = this.$elements.tagsTextarea.val();\n\n\t\t// Create array\n\t\tconst tagsArray = tagsCommaSeparated.split( ',' );\n\n\t\t// Return both\n\t\treturn {\n\t\t\tasArray: tagsArray,\n\t\t\tcommaSeparated: tagsCommaSeparated,\n\t\t};\n\t}\n}\n","import Categories from './categories.js';\nimport Tags from './tags.js';\n\n/**\n * Creates instances of the Categories and Tags classes, which listen\n * to the changes in both metaboxes to save the values using AJAX.\n * We need to do this because Automator doesn't have a \"Save\" button.\n */\nexport default class Taxonomies {\n\t// eslint-disable-next-line require-jsdoc\n\tconstructor() {\n\t\t// Invoke class used to save the categories using AJAX\n\t\tnew Categories();\n\n\t\t// Invoke class used to save the tags using AJAX\n\t\tnew Tags();\n\t}\n}\n","// Import web components\n// We will improve the folder structure as we add components\nimport '@builder/integrations/components';\nimport '@builder/item/triggers/components';\nimport '@builder/item/conditions/components';\nimport '@builder/user-selector/components';\n\n// Load static resources\nimport './scss/main.scss';\n\n// Create JS cache object\nUncannyAutomator.cache = {\n\ttokens: {},\n};\n\nimport {\n\tcreateDataOnLoad,\n\tconsoleLogLabel,\n\treplaceCurlyBraces,\n\thandleFatalError\n}   from './js/common/utilities.js';\n\nimport Publish            from './js/publish/publish.js';\n\nimport Triggers           from './js/item/triggers.js';\nimport Actions            from './js/item/actions.js';\n\nimport SendFeedback       from './js/send-feedback/send-feedback.js';\n\nimport RecipeTitle        from './js/recipe/title';\n\nimport Taxonomies         from './js/taxonomies/taxonomies.js';\n\n// Create the data required to render Automator\ntry {\n\tcreateDataOnLoad(() => {\n\t\tconsoleLogLabel( 'Render the UI', false, { bgColor: '#579f49' });\n\n\t\t// Once ready, render the UI\n\t\tnew Triggers();\n\t\tnew Actions();\n\t\tnew Publish();\n\t\tnew SendFeedback();\n\t\tnew RecipeTitle();\n\t\tnew Taxonomies();\n\t});\n} catch ( error ){\n\t// Show a modal with data in case the UI couldn't load\n\thandleFatalError({\n\t\ttitle:   UncannyAutomator.i18n.debugging.uiCantLoad.title,\n\t\twarning: UncannyAutomator.i18n.debugging.uiCantLoad.warning,\n\t\tcontent: UncannyAutomator.i18n.debugging.uiCantLoad.content,\n\t\tconsole: error\n\t});\n}\n\n// Remove the \"Changes you made may not be saved\" WordPress alert\njQuery( document ).ready( () => {\n\tjQuery( window ).off( 'beforeunload.edit-post', null );\n});"],"names":["logErrorOnce","console","error","format","_len","arguments","length","args","Array","_key","sprintf","Error","toString","PRECEDENCE","OPENERS","TERMINATORS","PATTERN","OPERATORS","a","b","c","DEFAULT_OPTIONS","contextDelimiter","onMissingKey","Tannin","data","options","key","this","pluralForms","undefined","prototype","getPluralForm","domain","n","config","plural","pf","evaluate","plural_forms","parts","i","part","split","trim","indexOf","substr","getPluralExpression","expression","terms","match","operator","term","element","stack","index","push","pop","concat","reverse","postfix","variables","j","getOperatorResult","value","apply","earlyReturn","hasOwnProperty","compile","dcnpgettext","context","singular","entry","DEFAULT_LOCALE_DATA","I18N_HOOK_REGEXP","namespace","test","hookName","hooks","storeKey","callback","priority","hooksStore","handler","handlers","splice","__current","forEach","hookInfo","name","currentIndex","runs","doAction","removeAll","handlersRemoved","some","hook","returnFirstArg","result","_hooksStore$__current","_hooksStore$__current2","_Hooks","constructor","actions","Object","create","filters","addAction","addFilter","removeAction","removeFilter","hasAction","hasFilter","removeAllActions","removeAllFilters","applyFilters","currentAction","currentFilter","doingAction","doingFilter","didAction","didFilter","defaultHooks","i18n","initialData","initialDomain","tannin","listeners","Set","notifyListeners","listener","doSetLocaleData","_tannin$data$domain","setLocaleData","single","number","getFilterDomain","_x","text","translation","onHookAddedOrRemoved","getLocaleData","addLocaleData","_tannin$data$domain2","resetLocaleData","subscribe","add","delete","__","_n","_nx","isRTL","hasTranslation","_tannin$data","_tannin$data2","createI18n","bind","isEmpty","_uo","utility","Markdown","content","escapeHTML","parseItalicsAndBold","parseAnchors","regularExpressions","doubleUnderscores","singleUnderscores","doubleAsterisks","singleAsterisks","replace","regExAnchors","replacerFunction","wholeMatch","m1","linkText","linkId","url","m5","m6","title","toLowerCase","search","encodeURI","isDefined","Modal","elements","container","automatorContainer","modal","box","warning","buttons","cancel","confirm","$","isVisible","fadeDuration","size","warningFirst","customClass","allowContentOverflow","UncannyAutomator","modalContent","modalWarning","class","modalBox","includes","addClass","modalTitle","html","append","e","modalButtons","cancelButton","confirmButton","events","afterSetEvents","afterShow","afterHide","onConfirm","onCancel","hide","thisModal","unbind","remove","removeClass","on","event","fadeIn","fadeOut","recipeHasMultipleItemsSameIntegration","items","values","recipe","map","item","integrationCode","keys","itemID","shouldShowItemId","FieldsGroup","attributes","setAttributes","createFields","hasLabel","label","hasDescription","description","fields","fieldData","Field","fieldType","$container","$label","$formGroup","field","$fieldElement","createFormElement","$description","formElement","fieldsValue","getFieldID","getValue","renderError","validationObject","isValid","message","validate","debounce","sortable","require","FieldsRepeater","window","tokenName","canSortRows","rowFieldsTemplate","fieldsRows","isArray","currentValue","row","rowFields","JSON","parse","stringify","optionCode","customValue","isRequired","emptyRow","fieldObject","itemId","isMappingColumn","ajax","mappingColumn","fieldRows","response","get","insertAdjacentHTML","refresh","$table","getFieldsTable","makeRowsSortable","listenSave","handleAJAX","fieldToListenToCode","recipe_id","id","item_id","group_id","groupId","field_id","triggered_by","getCurrentFieldsValues","oldValues","newValues","oldRowsMappingColumn","mappingValue","doAJAX","onSuccess","oldRows","includeReadOnly","clearError","AJAXRequest","endpoint","getAjaxRequestData","firstLoadDone","success","setValue","setError","getMergedValuesWithMappingColumn","rows","parentChangeEvent","listenFields","fieldID","fieldToListenTo","getField","debounceDelay","type","off","source","startLoadingAnimation","stopLoadingAnimation","supportsCustomValue","customValueField","trigger","$ajaxRefreshBtn","addEventListener","updateAttributesFieldsFromRow","fieldInstance","find","forcePlaceholderSize","handle","placeholder","itemSerializer","serializedItem","sortableContainer","position","newOrder","detail","destination","newFieldRowsOrder","oldIndex","reRender","heading","isHidden","$heading","headingColumn","$headingColumn","$rows","numberOfRows","$row","$fieldCell","$field","getFormElement","initLibraries","$actions","fieldAtts","getAttributes","removeRowLabel","removeRowButtonLabel","removeRow","$removeRowButton","deleteRow","hideActions","$addRowButton","addRow","addRowButtonLabel","isReadOnly","fieldInstanceValue","getSelectCustomValue","warn","hasValue","hasDefaultValue","defaultValue","newRows","fieldsData","ajaxMappingColumn","focusFirstFieldOfLastRow","rowValues","newRow","$currentFormElement","$newFormElement","replaceWith","initFlatpickr","initTokenSelector","initCodeMirror","lastRow","firstField","focus","$errorWrapper","innerHTML","classList","CSSclass","hasClass","fieldContainer","querySelector","completedFirstLoad","validation","rowsValidation","rowValidation","destroyTokenSelector","destroyFlatpickr","destroyCodeMirror","RecipeTypeSelector","onReady","$dialog","createRef","render","recipeType","ref","repeat","validRecipeTypes","option","cantChangeLaterNotice","publish","moveToTrash","replaceAll","target","loading","saveRecipeType","document","body","restCall","post_ID","recipe_type","close","UncannyAutomatorBackend","debugging","enabled","addParametersToURL","createDataOnLoad","dev","developerMode","consoleLogLabel","completeProcess","filterAutomatorItemsByRecipeType","groupItemsByIntegration","recipeObject","allRecipes","recipes_object","triggers","actionsConditions","action","validActions","inArray","requiredData","theRecipe","ID","extra_options","itemType","closures","itemsObject","recipeIsAnonymous","itemToAdd","extraOptions","itemIntegration","meta","integration","itemCode","code","globalItem","getGlobalItem","option_code","options_group","groupsOfOptions","groupKey","allFieldsOnThisGroup","hasMoreThanOneOption","input_type","assign","sanitizeFieldAttributes","isGroup","default_value","isAjax","integrationId","targetField","sanitizeFieldData","button","show_in","isLive","post_status","isMissing","tokens","inlineCss","inline_css","customHTML","custom_html","filterTokens","filter_tokens","menuOrder","menu_order","parseInt","support","optionKey","opts","fieldAttributes","canLogNewUserIn","can_log_in_new_user","integrationName","integration_name","sentence","flagItemsWithVisibleID","parseConditionsInMeta","flagActionsWithConditions","flagActionsScheduled","flagActionsSortable","recipeTriggers","filter","missingAttributes","arrayDifference","isRecipeValid","hasLive","itemData","itemIsValid","optionsGroupID","optionsGroupData","groupIsValid","requiresUserData","userSelector","closure","liveItems","oneAction","oneTrigger","includeOnly","entries","exclude","matchesFilters","orderBy","sort","log","compare","valA","valB","orderByType","integrations","integrationID","available","sortArrayOfObjectsAlphabetically","replaceCurlyBraces","unavailable","wp","proFeatures","allItemsArePro","every","is_pro","hasAvailableItems","hasUnavailableItems","hasTriggers","hasActions","addConditionsToIntegrations","propertyToCompare","valueA","valueB","localeCompare","getItemsByIntegration","addDeprecatedItems","filterDeprecatedItems","is_deprecated","userSelectorObject","step","existingUser","newUser","collapseGroup","consoleLogResult","groupEnd","endPoint","onFail","validEndpoints","supportPageURL","supportLink","requiresRecipesObject","renderUI","errorMessaging","accessDenied","fatalErrorHandler","notFound","permalinksURL","sitePermalinks","automatorSupport","timeout","serverError","parserError","dataMissing","contactSupport","automatorTools","generic","method","restURL","doing_rest","dataType","beforeSend","xhr","setRequestHeader","nonce","done","textStatus","errorThrown","fail","jqXHR","errorCode","status","timeOut","handleFatalError","onClick","$modal","destroy","join","addUTMParameters","supportPage","medium","subject","version","site_url","siteURL","ajaxurl","statusCode","bgColor","groupOfFields","fieldId","fieldValue","getReadableValue","$wrapper","parentNode","querySelectorAll","formField","$fieldFromDOM","optionsGroupId","optionsGroup","theItem","integrationItems","recipeSetRequiresUser","requires","recipePostID","requiresUser","getDOMElements","validElements","cssSelectorMetabox","$metabox","metabox","$items","cssSelector","$item","$contentContainer","contentContainer","cssSelectorTokenInSentence","groupID","cssSelectorFieldsContainer","$tokenInSentence","$fieldsContainer","$optionsContainer","tokenInSentence","fieldsContainer","optionsContainer","lastItem","last","actionContext","getIntegrationIcon","node","createElement","icon_svg","setAttribute","icon_32","icon_64","icon16","icon_16","icon32","icon64","parseStringWithTokens","string","plain","brackets","normal","token","tokensRegex","RegExp","normals","mappedString","tokenNumber","stringParts","fullMatch","readableText","tokenParts","tokenPlaceholderText","tokenValueID","optionsID","hasFields","originalText","normalNumber","sentenceSection","exec","itemTokens","elementAttributes","contentIsNode","tagNodeContent","decodeEntities","Tokens","includeGroupName","textAttributes","words","slice","renderTextWithTokens","abbreviatedText","abbreviateText","isAbbreviated","linkedField","fieldLabel","$wrap","appendChild","showLabelInSentence","emptyValue","itemSentence","openCenteredWindow","w","h","onClose","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","width","documentElement","clientWidth","screen","innerWidth","height","clientHeight","innerHeight","systemZoom","availWidth","left","top","newWindow","open","wasWindowClosed","closed","setTimeout","compareStrings","string1","string2","settings","caseSensitive","needle","haystack","array1","array2","not","isString","start","end","labelStyle","groupCollapsed","group","tagsToReplace","replaceTag","tag","partLengths","Math","floor","textParts","substring","encodedString","$textarea","throttle","func","interval","lastCall","now","Date","copyToClipboard","$tempTextarea","style","select","execCommand","removeChild","learnMore","debuggingURL","recipeData","reportLog","logRecipe","recipeTitle","recipeTypeUser","recipeTypeAnonymous","recipeStatus","recipeStatusDraft","recipeStatusLive","logRecipeItems","recipeItemsTitle","cleanItemData","itemStatusLive","itemStatusDraft","hasClosures","triggersTitle","noTriggers","actionsTitle","noActions","closuresTitle","noClosures","noRecipeItemsFound","jsConsole","setEvents","$debuggingConsole","range","createRange","selectNodeContents","getSelection","removeAllRanges","addRange","openInNewTab","href","click","campaign","urlParameters","utm_source","utm_medium","utm_campaign","utm_content","marketing","utmR","utm_r","user","userRecipeName","userRecipeDescription","anonymous","everyoneRecipeName","everyoneRecipeDescription","HOOKS","defaults","_disable","allowInput","allowInvalidPreload","altFormat","altInput","altInputClass","animate","navigator","userAgent","ariaDateFormat","autoFillDefaultTime","clickOpens","closeOnSelect","conjunction","dateFormat","defaultHour","defaultMinute","defaultSeconds","disable","disableMobile","enableSeconds","enableTime","errorHandler","err","getWeek","givenDate","date","getTime","setHours","setDate","getDate","getDay","week1","getFullYear","round","hourIncrement","ignoredFocusElements","inline","locale","minuteIncrement","mode","monthSelectorType","nextArrow","noCalendar","onChange","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onValueUpdate","onYearChange","onPreCalendarPosition","plugins","positionElement","prevArrow","shorthandCurrentMonth","showMonths","static","time_24hr","weekNumbers","wrap","english","weekdays","shorthand","longhand","months","daysInMonth","firstDayOfWeek","ordinal","nth","s","rangeSeparator","weekAbbreviation","scrollTitle","toggleTitle","amPM","yearAriaLabel","monthAriaLabel","hourAriaLabel","minuteAriaLabel","pad","bool","fn","wait","t","_this","clearTimeout","arrayify","obj","toggleClass","elem","className","textContent","clearNode","firstChild","findParent","condition","createNumberInput","inputClassName","wrapper","numInput","arrowUp","arrowDown","pattern","getEventTarget","composedPath","doNothing","monthToStr","monthNumber","revFormat","D","F","dateObj","monthName","setMonth","G","hour","getHours","parseFloat","H","J","day","K","M","shortMonth","S","seconds","setSeconds","U","_","unixSeconds","W","weekNum","weekNumber","Y","year","setFullYear","Z","ISODate","d","minutes","setMinutes","l","m","month","u","unixMillSeconds","y","tokenRegex","formats","toISOString","getMonth","getSeconds","getMinutes","String","createDateFormatter","_a","_b","_c","l10n","_d","isMobile","frmt","overrideLocale","formatDate","arr","createDateParser","givenFormat","timeless","customLocale","parsedDate","dateOrig","toFixed","datestr","parseDate","matched","ops","matchIndex","regexStr","isBackSlash","escaped","val","isNaN","compareDates","date1","date2","calculateSecondsSinceMidnight","hours","getDefaultHours","minDate","minHour","minMinutes","minSeconds","maxDate","maxHr","maxMinutes","min","__assign","p","call","__spreadArrays","il","r","k","jl","FlatpickrInstance","instanceConfig","self","flatpickr","defaultConfig","getClosestActiveElement","calendarContainer","getRootNode","activeElement","bindToInstance","setCalendarWidth","requestAnimationFrame","visibility","display","daysContainer","daysWidth","days","offsetWidth","weekWrapper","removeProperty","updateTime","selectedDates","defaultDate","getMilliseconds","latestSelectedDateObj","preventDefault","isKeyDown","eventTarget","input","getAttribute","max","curValue","newValue","delta","which","isHourElem","hourElement","isMinuteElem","minuteElement","incrementNumInput","abs","timeWrapper","prevValue","_input","setHoursFromInputs","updateValue","_debouncedChange","secondElement","limitMinHours","minTime","minDateHasTime","limitMaxHours","maxTime","maxDateHasTime","minBound","maxBound","currentTime","secondsSinceMidnight","parseSeconds","setHoursFromDate","onYearInput","changeYear","ev","el","_handlers","removeEventListener","triggerChange","triggerEvent","jumpToDate","jumpDate","jumpTo","oldYear","currentYear","oldMonth","currentMonth","buildMonthSwitch","redraw","timeIncrement","contains","inputElem","createEvent","dispatchEvent","createDay","_dayNumber","dateIsEnabled","isEnabled","dayElement","$i","todayDateElem","tabIndex","isDateSelected","selectedDateElem","isDateInRange","focusOnDayElem","targetNode","onMouseOver","getFirstAvailableDay","startMonth","endMonth","children","startIndex","endIndex","focusOnDay","current","offset","dayFocused","isInView","startElem","givenMonth","loopDelta","numMonthDays","changeMonth","getNextAvailableDay","buildMonthDays","firstOfMonth","prevMonthDays","utils","getDaysInMonth","createDocumentFragment","isMultiMonth","prevMonthDayClass","nextMonthDayClass","dayNumber","dayIndex","dayNum","dayContainer","buildDays","frag","shouldBuildMonth","monthsDropdownContainer","selected","buildMonth","monthElement","monthNavFragment","selectedMonth","yearInput","tabindex","yearElement","getElementsByTagName","disabled","buildMonths","monthNav","prevMonthNav","yearElements","monthElements","nextMonthNav","buildWeekdays","weekdayContainer","updateWeekdays","isOffset","_hidePrevMonthArrow","_hideNextMonthArrow","updateNavigationCurrentMonth","isCalendarElem","documentClick","isOpen","eventTarget_1","isCalendarElement","lostFocus","path","relatedTarget","isIgnored","timeContainer","clear","newYear","newYearNum","isNewYear","dateToCheck","enable","array","parsed","from","to","onBlur","isInput","valueChanged","trimEnd","getDateStr","allowKeydown","allowInlineKeydown","keyCode","blur","isTimeObj","focusAndClose","selectDate","delta_1","ctrlKey","stopPropagation","currentYearElement","elems","pluginElements","x","shiftKey","charAt","cellClass","hoverDate","firstElementChild","initialDate","rangeStartDate","rangeEndDate","containsDisabled","minRange","maxRange","rContainer","dayElem","ts","ts1","ts2","timestamp","outOfRange","onResize","positionCalendar","minMaxDateSetter","inverseDateObj","removeAttribute","getInputElem","setupLocale","l10ns","default","dataset","customPositionElement","_positionElement","calendarHeight","reduce","acc","child","offsetHeight","calendarWidth","configPos","configPosVertical","configPosHorizontal","inputBounds","getBoundingClientRect","distanceFromBottom","bottom","showOnTop","pageYOffset","pageXOffset","isCenter","isRight","right","rightMost","centerMost","doc","editableSheet","styleSheets","sheet","cssRules","head","getDocumentStyleSheet","bodyWidth","centerLeft","centerIndex","centerStyle","insertRule","centerBefore","msMaxTouchPoints","selectedDate","shouldChangeMonth","selectedIndex","loadedPlugins","_bind","_setHoursFromDate","_positionCalendar","triggerChangeEvent","toInitial","mobileInput","_initialDate","_createElement","lastChild","insertBefore","_type","wasOpen","set","CALLBACKS","setSelectedDate","toggle","updatePositionElement","inputDate","dates","parseDateRules","rule","initEvent","specificFormat","dObj","mobileFormatStr","onMonthNavClick","isPrevMonth","isNextMonth","boolOpts","userConfig","defineProperty","_enable","timeMode","defaultDateFormat","defaultAltFormat","_minDate","_maxDate","minMaxTimeSetter","_minTime","_maxTime","pluginConf","parseConfig","nodeName","required","nextSibling","preloadedDate","setupDates","yr","fragment","__hidePrevMonthArrow","__hideNextMonthArrow","innerContainer","buildWeeks","separator","hourInput","minuteInput","military2ampm","secondInput","buildTime","customAppend","appendTo","nodeType","build","evt","inputType","setupMobile","debouncedResize","ontouchstart","capture","bindEvents","isSafari","init","_flatpickr","nodeList","nodes","HTMLElement","instances","HTMLCollection","NodeList","selector","Node","en","localize","setDefaults","jQuery","fp_incr","TokenSelector","supportsTokens","TokenSelectorTextarea","TokenSelectorInput","setData","getCodeMirrorEditor","editor","renderTokens","handleAddTokens","renderTokensInRealTime","RenderTokenSelector","tokenRenderingDebounce","fieldCM","insertTextAtCursor","ignoreRequiresUserModal","replaceRange","getCursor","querySearchTokens","getSearchCursor","tokenId","getRange","$tokenNode","createTokenDOMNode","widget","markText","replacedWith","tokensThatRequireUser","startsWith","tokenNeedsUserModal","removeToken","widgetPosition","onFocusOut","onClickOutside","onCopy","onDelete","onNavigation","charCode","setCursor","findNext","callbacks","actionWillSetRecipeToDraft","userDataModal","allowed","proOnly","pro","mustRunOnUser","outerHTML","modalElements","getElements","prop","statusToggle","allowedConfirm","allowedCancel","forbidden","uncannyAutomatorPro","upgradeNow","upgradeLater","forbiddenConfirm","forbiddenCancel","supportsTinyMCE","getTinyMCEEditor","addStylesToEditor","parsePlainTokensInTinyMCE","parseTokensInAttributes","parseHTMLTokensInPlainTextarea","handleHTMLTokensInPlainTextarea","handlePlainTokensInTinyMCE","tokenCSSClass","tinymceTokenRegex","tinymceTokenTemplate","tinyMCEeditor","hidden","fieldTinyMCE","dom","addStyle","editorContent","getContent","editorContentWithTokens","template","returnString","setContent","contentChanged","tokenID","tokenGroup","order","getData","createWrapper","createFilter","createGroupsOfTokens","listenToggleButton","resizeDropdownOnWindowResize","resizeDropdownOnWindowScroll","refreshOnFieldChange","shouldSupportFilters","setFilter","$elements","toggleButton","searchField","dropdown","allGroups","dropdownGroupsContainer","dropdownTokens","noResultsOption","seperators","$fieldsToMove","getFieldCM","insertAfter","renderContainer","searchFieldContainer","fieldTypeHumanReadable","tokenType","$filterContainer","filterToggle","$filterFormElement","prepend","filterContainer","nonItemTokens","triggersTokens","actionTokens","groupOfTokens","createIndividualGroupOfTokens","separators","noResults","noResultsDescriptionWithFilter","noResultsDescription","$group","groupName","clone","$icon","icon","$toggleButton","$tagsWrapper","fieldItemID","tokenAction","hasConditions","conditions","hasConditionsTokensDisclaimer","fieldItem","isScheduled","isScheduledTokensDisclaimer","isDelayed","isDelayedTokensDisclaimer","$tokensListContainer","deprecated","$token","needsUserData","addTokenToField","beforeAdded","$modalContent","includeTokenNameField","includeTokenName","includeTokenIDField","includeTokenID","$taskDescription","addAllDescription","noLabel","addTokens","hasToIncludeName","hasToIncludeID","currentFieldValue","tokenContent","alert","query","updateGroupsOfTokensVisibility","filterByType","$tokensByType","hasResults","flatpickrInstance","closeWhenClickedOutside","css","outerWidth","setDropdownView","setDropdownDirection","setDropdownHeight","addContextMenus","contextMenu","uap","ContextMenu","$element","debuggingGroup","addGroup","debuggingTools","addItem","addAllTokensInGroup","addAllTokensInGroupCallback","is","has","$window","above","scrollTop","below","outerHeight","dropdownHeight","hasSpaceBelow","getDropdownPosition","maxHeight","getUniqueID","createDOMelements","customValidationFunction","validFieldTypes","formElementClass","uniqueFieldID","isChildField","supportsFullPageEditing","supportsMultipleValues","defaultOptionExists","hasSelectedOption","numberOfOptions","option_value","option_name","$normalOptions","option_data","selectOption","defaultOption","prependTo","hasPlaceholder","currentValues","customFieldValue","$otherOptions","otherOptions","attr","supportsCopyToClipboard","hasCustomValueDescription","customValueDescription","customValueToken","parentOptionCode","selectHasSelectedOption","$noResults","Option","customData","fieldContainerClass","$fakeCodemirrorField","maxLength","$clearButton","clearValue","minNumber","maxNumber","checkboxLabel","checkboxPseudo","isToggle","yes","no","checkboxToggleOn","checkboxToggleOff","color","align","$fields","$fieldContainers","$formRadioContainer","$fakeRadio","for","fieldLabelAsterisk","fieldError","fieldDescription","refreshOptions","customValueFieldContainer","onFocus","searchEllipsis","optionsShowID","dateAltFormat","supportsRange","timeFormat","timeAltFormat","time","flatpickrDateReplace","A","B","g","unsupportedTokens","fieldValues","setSelectOptions","clearOnChangeFields","getFieldContainer","validateField","onChangeAJAXCallback","parentField","setCustomValue","onChangeTimeout","newField","selectCustomValue","currentTarget","ready","getMetaValue","parentFieldValue","targetFieldValue","integration_id","target_field","isReady","isTargetField","accumulator","manuallySet","valueFromMeta","optionValue","itemSeparator","getSelectOptionByValue","trueLabel","falseLabel","$checkedRadio","closest","metaValue","doTrigger","updateCodemirror","allOptions","optionID","wantsToCheck","isChecked","removeSelectOptions","optionsDOM","optionDOM","rerenderSelect2","empty","initSelect2","groups","normalOptions","results","renderHandler","hasLongID","postIDPlaceholder","theme","language","templateResult","templateSelection","escapeMarkup","markUp","defaultResults","parseSelect2Response","searchInputPlaceholder","cache","delay","params","q","processResults","dataAdapter","getSelect2Settings","select2","destroyFlatPickr","getElementById","sunday","monday","tuesday","wednesday","thursday","friday","saturday","january","february","march","april","may","june","july","august","september","october","november","december","scrollToIncrement","clickToToggle","am","pm","minute","dateStr","instance","formatCodemirrorDate","setCodemirrorValue","is12HourFormat","manTime","CodeMirrorOptions","lineNumbers","tabSize","dragDrop","viewportMargin","Infinity","lineWrapping","autoRefresh","direction","noNewlines","scrollbarStyle","readOnly","verify_html","inline_styles","extraKeys","Tab","nextField","getNextField","CodeMirror","setOption","origin","fieldPosition","getWrapperElement","tokenSelector","tinymce","tinymcePlugins","tinyMCEStyles","assets","global","ver","recipeBuilder","getDefaultSettings","content_css","tinyOptions","mediaButtons","toolbar1","quicktags","initialize","AjaxAdapter","Tags","Utils","module","ExtendedAjaxAdapter","minimumInputLength","__super__","Extend","originQuery","tags","Decorate","sanitizeField","childChildAttributes","properties","read_only","supports_tinymce","supports_fullpage_editing","copy_to_clipboard","is_ajax","is_hidden","token_name","current_value","max_length","relevant_tokens","date_format","date_alt_format","supports_range","min_number","max_number","min_date","max_date","time_format","supports_tokens","time_alt_format","min_time","max_time","hide_actions","supports_custom_value","supports_multiple_values","custom_value_description","fill_values_in","add_row_button","remove_row_button","item_type","can_sort_rows","is_toggle","options_show_id","listen_fields","clear_on_change_fields","show_label_in_sentence","mapping_column","attributeKey","attributeValue","subAttributeKey","subAttributeValue","imageUrl","customFilter","filteredConditions","shouldAdd","ItemHeaderMenu","createItemActions","btn","btnIcon","dropdownUl","deleteAction","deleteText","$duplicateAction","duplicate","action_id","Actions","globalItemData","support_link","utmContent","select_option_name","supportAction","supportText","confirmationModal","deleteWarning","show","dataToSend","actionHadConditions","conditionsGroupID","Triggers","updateRemoteConditionsMeta","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread2","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","Symbol","iterator","configurable","writable","_extends","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","passive","matches","msMatchesSelector","webkitMatchesSelector","getParentOrHost","host","ctx","includeCTX","_throttleTimeout","R_SPACE","state","defaultView","getComputedStyle","currentStyle","matrix","selfOnly","appliedTransforms","transform","matrixFn","DOMMatrix","WebKitCSSMatrix","CSSMatrix","MSCSSMatrix","tagName","list","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","elRect","containerRect","elMatrix","scaleX","scaleY","isScrolledPast","elSide","parentSide","parent","getParentAutoScrollElement","elSideVal","parentSideVal","getChild","childNum","includeDragEl","currentChild","Sortable","ghost","dragged","draggable","lastElementChild","previousElementSibling","toUpperCase","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","scrollLeft","includeSelf","gotSelf","scrollWidth","scrollHeight","elemCSS","overflowX","overflowY","isRectEqual","rect1","rect2","ms","scrollBy","Polymer","Zepto","cloneNode","expando","initializeByDefault","PluginManager","mount","plugin","pluginName","pluginEvent","eventName","eventCanceled","eventNameGlobal","initializePlugins","initialized","modified","modifyOption","getEventProperties","eventProperties","modifiedValue","optionListeners","_excluded","_ref","originalEvent","dragEl","parentEl","ghostEl","rootEl","nextEl","lastDownEl","cloneEl","cloneHidden","dragStarted","moved","putSortable","activeSortable","active","oldDraggableIndex","newIndex","newDraggableIndex","hideGhostForTarget","_hideGhostForTarget","unhideGhostForTarget","_unhideGhostForTarget","cloneNowHidden","cloneNowShown","dispatchSortableEvent","_dispatchEvent","info","targetEl","toEl","fromEl","extraEventProperties","onName","CustomEvent","bubbles","cancelable","pullMode","lastPutMode","allEventProperties","activeGroup","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","targetMoveDistance","ghostRelativeParent","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","cssText","pointerEvents","_detectDirection","elCSS","elWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","secondChildWidth","flexDirection","gridTemplateColumns","touchingSideChild2","_prepareGroup","toFn","pull","sameGroup","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","stopImmediatePropagation","nearestEmptyInsertDetectEvent","touches","nearest","clientX","clientY","threshold","emptyInsertThreshold","rect","insideHorizontally","insideVertically","ret","_onDragOver","_checkOutsideTargetEl","_isOutsideThisEl","animationCallbackId","animationStates","store","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","animation","easing","dataTransfer","dropBubble","dragoverBubble","dataIdAttr","delayOnTouchOnly","touchStartThreshold","Number","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_onTapStart","captureAnimationState","fromRect","thisAnimationDuration","childMatrix","f","addAnimationState","removeAnimationState","indexOfObject","animateAll","animating","animationTime","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","sqrt","pow","calculateRealTime","animationResetTimer","currentRect","duration","translateX","translateY","animatingX","animatingY","forRepaintDummy","repaint","animated","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_generateId","str","src","sum","charCodeAt","_nextTick","_cancelNextTick","_getDirection","touch","pointerType","originalTarget","shadowRoot","root","inputs","idx","checked","_saveInputCheckedState","isContentEditable","criteria","_prepareDragStart","dragStartFn","ownerDocument","_lastX","_lastY","_onDrop","_disableDelayedDragEvents","_triggerDragStart","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","_onTouchMove","_onDragStart","selection","_dragStarted","fallback","_appendGhost","_nulling","_emulateDragOver","elementFromPoint","ghostMatrix","relativeScrollOffset","dx","dy","cssMatrix","_hideClone","cloneId","_loopId","setInterval","effectAllowed","_dragStartId","revert","vertical","isOwner","canSort","fromSortable","completedFired","dragOverEvent","_ignoreWhileAnimating","completed","elLastChild","_ghostIsLast","changed","_ghostIsFirst","targetBeforeFirstSwap","sibling","differentLevel","differentRowCol","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_dragElInRowColumn","side1","scrolledPastTop","scrollBefore","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","_getSwapDirection","dragIndex","nextElementSibling","after","moveVector","extra","axis","insertion","_showClone","_offMoveEvents","_offUpEvents","clearInterval","save","handleEvent","dropEffect","_globalDragOver","toArray","useAnimation","extend","dst","nextTick","cancelNextTick","detectDirection","scrollEl","scrollRootEl","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","autoScrolls","scrolling","clearAutoScrolls","autoScroll","pid","clearPointerElemChangedInterval","isFallback","scroll","scrollCustomFn","sens","scrollSensitivity","speed","scrollSpeed","scrollThisInstance","scrollFn","layersOut","currentParent","canScrollX","canScrollY","scrollPosX","scrollPosY","vx","vy","layer","scrollOffsetY","scrollOffsetX","bubbleScroll","drop","toSortable","changedTouches","onSpill","Revert","Remove","dragStart","_ref2","_ref3","_ref4","parentSortable","AutoScroll","forceAutoScrollFallback","_handleAutoScroll","_handleFallbackAutoScroll","dragOverCompleted","dragOverBubble","nulling","ogElemScroller","newElem","MakeSortable","isSorting","createDropzones","dropzones","instant","delayed","scheduled","dropzonesSelectors","actionTypeID","canSortSiblings","SortableInstance","exceptGroupdID","setDisableStatusDropzone","changes","getActionsOrder","isAutomatorProActive","movedNodeName","itemInsideConditionsBlock","before","conditionsBlockID","getConditionsGroupById","conditionsGroupId","sanitizeConditionsForMeta","saveChanges","formData","actions_order","$dropzone","onStart","elementData","getWhatIsBeingDragged","setDisableStatusAllDropzones","dropzoneSelector","onEnd","parentChanged","indexChanged","handleChanges","$draggedNode","$node","UserSelector","$content","getSelectSourceNodes","getOptionsNodes","errorMode","RecipeNotices","getSentenceNodes","$userSelector","createItem","userType","existing","userSource","getOptionsFields","optionsFields","roles","resources","administrator","$groupOfFields","uniqueField","uniqueFieldLabel","uniqueFieldOptionEmail","uniqueFieldOptionId","uniqueFieldOptionUsername","valueField","uniqueFieldValue","valueFieldLabel","$uniqueFieldFormElement","$valueFieldFormElement","fallbackField","createNewUserFieldLabel","createNewUserFieldOptionCreateUser","createNewUserFieldOptionDoNothing","$fallbackFieldFormElement","$doNothingNotice","doNothingMessage","$subOptionsContainer","firstName","lastName","email","username","displayName","password","passwordDescription","role","logUserIn","$fieldFormElement","newUserFallbackField","existingUserFieldLabel","existingUserFieldOptionExisting","existingUserFieldOptionDoNothing","$newUserfallbackFieldFormElement","fieldsValues","prioritizedField","prioritizedFieldLabel","prioritizedFieldDescription","$prioritizedField","$buttonsContainer","$saveButton","$cancelButton","areAllFieldsValid","isFieldValid","recipeId","$summaryContainer","$sourceRow","$sourceRowToken","$dataRowSentence","$dataRow","summary","withEmail","$fallbackRow","otherwiseText","createNewUser","selectExistingUser","$fallbackRowSentence","otherwise","stepTitle","setOptions","sentenceTitle","supportUrl","$template","ItemInitialAction","ItemCreatorIntegrations","Closures","createClosure","wasAdded","checkboxAttributes","closureInRecipe","getClosureByCodeFromItemsObject","itemid","checkboxField","$checkbox","item_code","default_meta","first","$toggleContent","createInnerContent","ItemHeaderIcon","$integrationNameTag","ItemHeaderTag","$actionMenu","$sentence","ItemHeaderSentence","ConditionsBlock","conditionsGroup","$block","$actionsInstantWrapper","$actionsDelayedWrapper","$actionsScheduledWrapper","shouldBeSortable","addBtnLabel","canManageConditions","$actionsWrapper","targetActionID","$lowestPriorityAction","actionWithLowestPriority","insertAdjacentElement","getActions","$targetAction","numberOfConditions","$logicHeaderModeWrapper","runIf","runIfText","runIfAnyFull","any","all","$logicHeaderDropdownWrapper","warningTitle","numberOfActions","actionWontRun","actionsWontRun","warningContent","actionWontRunContent","actionsWontRunContent","hasInstantActions","hasDelayedActions","hasScheduledActions","$notice","innerText","otherActionsMightRunBefore","$actionsWrappers","$logicOperatorSelect","actionType","$actionNode","conditionId","$conditionPillsWrapper","noConditions","$handler","$actionsFooterWrapper","addAnother","closeOnConfirm","wantToRemoveConditionsGroup","cancelButtonLabel","confirmButtonLabel","then","RenderConditions","recipeHasConditions","getURLParameter","clearActionsMetabox","renderAddNewAction","renderProUI","renderFreeUI","MetaboxItems","wrapperClass","MetaboxFooter","asyncActions","closuresLabelAsyncOnly","isContinuingIntegrationConnection","integrationGridAttributes","actionID","instantActions","findIndex","delayedActions","scheduledActions","Condition","conditionCode","backup","conditionPostData","nameDynamic","dynamic_name","parseDynamicSentence","dynamicSentence","getConditionPostData","getIntegrationByCode","ConditionsGroup","conditionID","sendEvent","ItemConditionsModalOptions","comingFrom","$currentConditionsBlock","getConditionsBlockNode","actionId","conditionsList","addCondition","conditionsGroupForMeta","formattedForMeta","lowestPriority","lowestPriorityAction","actionsByType","actionPriority","super","it","directiveName","_t","raw","_$litType$","resultType","strings","o","Promise","resolve","reject","unsafeHTML","ItemConditionsModalList","searchConditions","noConditionsFound","integrationOpenByDefault","getConditionsByIntegration","selectCondition","requires_user","_templateAddRequiresUserData","isEveryoneRecipeWithoutUserData","promptSetDataDialog","conditionRequiresUserData","conditionRequiresUserDataDescription","getIntegrations","unshift","disconnect","reconnect","deref","pause","resume","_$Cwt","_$Cyt","_$CK","_$CX","update","isConnected","disconnected","async","reconnected","createCondition","modalMode","getConditionById","configureTheRule","_templateHeader","until","_templateFields","_templateFieldsPlaceholder","saveOptions","saveFilter","maybeRemoveCondition","maybeRemoveConditionsGroup","getIntegrationName","conditionPostDataHasFields","getAndSaveConditionFields","somethingWentWrong","areFieldsValid","getFieldsValues","readableValue","fieldsAreValid","fieldValidation","removeCondition","_fields","fieldAttrs","errorCouldNotGetFields","updateConditionPostData","updates","hasCondition","getCondition","availableConditions","isDeprecated","actions_conditions","conditionsAreOutdated","createItemIcon","customIntegrationName","createItemTag","$tag","ItemCreatorTaskSelector","$currentItem","removeConnectingIntegrationsParameters","createItemsList","searchPlaceholder","unlockTriggers","unlockActions","$taskSelector","$searchField","$itemsList","itemsThatRequireUserData","itemsThatDontRequireUserData","isPro","cannotAddRequiresUserData","restRequestCode","defaultMeta","addItemREST","openFirstGroupsOfFields","upgradeToProURL","uap_bpro_context","uap_bpro_integration_id","uap_bpro_integration_name","uap_bpro_item","createCancelButton","$newItem","location","ua_connecting_integration","ua_connecting_integration_id","ua_connecting_integration_context","ua_connecting_integration_condition","setAsURL","handleContinueIntegrationConnection","createIntegrations","createFooter","$conditionsBlock","$lastItem","filterByNonEmptyIntegrations","sortIntegrations","integrationElement","createIntegration","connected","integrationModalCurrentStep","connectIntegrationModal","currentStep","connectApiUrl","redirect_url","dashboardUrl","ua_close_window","modalFirstStep","apiIntegrations","instructionsToConnect","step1Pro","activate","step1","uncannyAutomator","signUp","connectIntegration","stepCounter","step2","completePrevious","connectAccount","reload","licenseUrl","settings_url","automator_minimal","automator_hide_settings_tabs","itemListAttributes","$logoImg","logo","isProOnly","isAvailable","hasAccountConnected","integrationNotConnected","notConnected","allActionsRequireUserData","requiresPro","dontSeeTrigger","learnMoreURL","discoverMore","hasItems","canUse","canNotUse","hasValidProLicense","ItemOptions","optionId","initTinyMCE","librariesReady","itemOptions","createButtons","noticeContainer","saveButton","automatorButtons","developerButtons","$buttonElement","css_classes","doOnClick","on_click","eval","modules","validateItemFields","itemSentenceHTML","getOptionValue","sentence_human_readable","sentence_human_readable_html","$statusToggle","Event","$options","triggeredBy","fieldSummary","groupCode","hasSelect","hasRepeater","dateAsNumber","timeJustNumbers","timeAsNumber","amount","unit","multipliers","actionMeta","scheduleNumber","convertDateToSortableInteger","delayInSeconds","convertDelayToSeconds","createItemSentence","parents","itemToggle","liveRecipeItem","draftRecipeItem","itemStatusToggle","makeLive","isValidItem","validateItem","statusWarning","includeNewActions","instantActionsOrder","delayedScheduledActionsOrder","$actionsMetabox","$action","isSortable","shouldCreateMetaboxFooter","recipeActions","$addAnother","$anonymousNotice","createAnonymousNotice","everyoneOnlyOneTrigger","ItemHeaderAsync","buttonContainer","buttonIcon","removeButton","asyncModeField","asyncModeHTML","delayNumberField","delayNumberHTML","delayUnitField","delayUnitHTML","scheduleDateField","scheduleDateHTML","scheduleTimeField","scheduleTimeHTML","scheduleNoticeHTML","asyncMode","async_mode","proVersion","createAsyncButton","async_delay_number","async_delay_unit","async_schedule_time","async_schedule_date","hasSchedule","async_sentence","getButtonText","canManageSchedule","createRemoveButton","showModal","pleaseSave","removeAttr","unlockSchedule","$button","removeButtonIcon","removeSchedule","createAsyncModeHTML","createDelayOptions","createScheduleOptions","attachModeChangeEvent","modalNoticeHTML","modalNoticeIcon","scheduleNotice2","confirmButtonText","schedule","createModalContent","modalEvents","submitModal","validateForm","delayNumber","delayUnit","scheduleTime","scheduleDate","delaySentence","scheduleSentence","saveSchedule","multiplier","timeZoneLink","timezoneLink","timeZoneHelpIcon","timeZoneDesc","timezone","timezoneString","selectedAsyncMode","scheduleOptions","scheduleDesc","scheduleFields","scheduleNotice1","createScheduleDateHTML","createScheduleTimeHTML","createTimeZone","delayOptions","delayDesc","delayFields","createDelayNumberHTML","createDelayUnitHTML","delayFieldsDesc","validateDelayNumber","$delayNumberField","years","today","$scheduleDateField","selectTime","$scheduleTimeField","validSchedule","validateScheduleFields","unsupported","simulate_int","positiveNumber","header","createInner","notice","createNotice","asyncButtons","canActionHaveFilterButton","$filterButton","scheduleButton","shouldAddButton","$createItemID","itemMissing","Publish","timesPerUser","editLink","hiddenBox","timesPerRecipe","createMetabox","footer","timesRow","timesRowVisible","timesRowIconBox","timesRowIcon","timesRowName","timesValue","unlimited","timesRowValue","timesRowEdit","edit","timesRowHidden","timesRowHiddenBox","timesRowField","leaveEmpty","oneOrBigger","timesField","timesRowButtons","timesRowSaveBtn","timesRowCancelBtn","recipeTypeRow","recipeTypeRowVisible","recipeTypeRowIconBox","recipeTypeRowIcon","recipeTypeRowName","recipeTypeRowValue","recipeTypeLearnMore","createdRow","createdRowVisible","createdRowIconBox","createdRowIcon","createdRowName","createdOn","createdRowValue","recipeRunTimeVal","recipeRunTimes","recipeRunTimeUrlVal","recipeRunTimesUrl","recipeRunTimesViewLogs","recipeRunTimesRow","recipeRunTimesRowVisible","recipeRunTimesRowIconBox","recipeRunTimesRowIcon","recipeRunTimesRowName","copyRecipeRow","copyRecipeRowVisible","copyRecipeRowName","copyToDraft","copyRecipe","footerRow","footerRowLeft","footerMoveToDraft","footerRowRight","recipeStatusToggle","liveRecipe","draftRecipe","recipeStatusToggleDOM","validateStatus","timesRecipeRow","timesRecipeRowVisible","timesRecipeRowIconBox","timesRecipeRowIcon","timesRecipeRowName","timesRecipeValue","timesRecipeRowValue","timesRecipeRowEdit","timesRecipeRowHidden","timesRecipeRowHiddenBox","timesRecipeRowField","timesRecipeField","timesRecipeRowButtons","timesRecipeRowSaveBtn","timesRecipeRowCancelBtn","$fieldValue","$timeField","slideToggle","numberOfTimes","recipe_completions_allowed","validateTimesPerFields","postStatus","createContainer","emptyContainer","createWarning","createError","isObject","supportsRegExLookbehind","saveData","includeGroupIcon","includeGroupTokens","tokensRegEx","tokensRegExNoAttributes","getAllTokens","tokensList","commonTokens","getCommonTokens","dateTokens","getDateTokens","advancedTokens","getAdvancedTokens","formulaTokens","getFormulaTokens","getTriggersTokens","actionsTokens","getActionsTokens","common","Token","userID","userUsername","userFirstName","userLastName","userEmail","userDisplay","userRole","userResetPassLink","adminEmail","isMultisite","currentBlogId","cacheable","currentSiteName","siteName","currentSiteTagline","siteTagline","currentSiteUrl","siteUrl","recipeName","user_ip_address","user_reset_pass_url","filterUnsupportedTokens","advanced","PostMetaToken","UserMetaToken","autoLoginLink","recipeTotalRunToken","recipeRunToken","currentDate","currentDateAndTime","current_unix_timestamp","currentdate_unix_timestamp","formulas","CalculationToken","itemsTokens","getItemTokens","tokenGroups","getActionsThatRunBefore","tokensGroup","getIntegrationIconURL","optionField","rowIndex","childField","getItemTokenID","tokenParentCode","tokenCode","isField","rowNumber","customFieldTokens","endsWith","tokenParent","tokenIdentifier","getTokenDataByID","$tokenIcon","$tokenName","$flags","destinationItemID","destinationItem","locatedToken","currentToken","getVariation","textWithTokens","hasTemplate","replaceTokensCallback","tokenHTML","customID","customName","postMetaKey","tokenPostFieldLearnMore","tokenPostField","specialTokens","postMeta","postFieldLabel","postFieldDescription","tokenKeyField","keyFieldLabel","keyFieldDescription","postValidation","keyValidation","postMetaPost","postMetaToken","postMetaPostEscaped","postMetaKeyEscaped","postMetaKeyTemplate","tokensInFields","postMetaPostNode","postMetaKeyNode","getDynamicTokenName","userMetaKey","metaKeyField","userMeta","userMetaKeyDescription","userMetaToken","userMetaKeyTemplate","calculation","tokenFormulaFieldLearnMore","formulaField","formulaFieldLabel","formulaFieldDescription","calucaltionFormula","calculationToken","calculationFormulaEscaped","calculationTemplate","calucaltionFormulaNode","calcaultionFormula","calculationFormulaNode","pillsRegex","defaultText","fieldGroupId","$dynamicPill","$stringWithTokens","ex","childNodes","$sentencePart","TEXT_NODE","$plainWrapper","itemElement","optionsGroupElements","form","validateChildren","isFormValid","each","radioInput","selectedRadio","field_type","fieldTypes","messages","invalid","textarea","int","multipleTokens","minValue","maxValue","float","multiple","checkbox","radio","invalidType","$formElement","tokensInString","$childrenFields","customValidation","$tempWrapper","fieldValueNoHTML","int_regex","getTokensFromString","hasTokens","simulate_float","float_regex","simulate_email","email_regex","emails","allEmailsAreValid","hasMultipleEmails","hasMultipleVariables","$error_container","regex","allTokens","matchedToken","___CSS_LOADER_EXPORT___","exports","cssWithMappingToString","needLayer","media","dedupe","supports","alreadyImportedModules","_k","_i","TypeError","_loop_1","args_1","addData","h5s","stores","Map","Store","_config","_placeholder","_data","mergedConfig","setConfig","getConfig","deleteData","sortableElement","addAttribute","attribute","dragging","draggingHeight","draggingWidth","originContainer","originIndex","originElementIndex","originItemsBeforeUpdate","previousContainer","destinationItemsBeforeUpdate","parentElement","getClientRects","getIndex","elementList","isInDom","insertNode","referenceNode","newElement","getElementHeight","getPropertyValue","getElementWidth","getHandles","defaultDragImage","draggedElement","elementOffset","posX","pageX","posY","pageY","listsConnected","acceptFrom","sel","defaultConfiguration","connectWith","disableIEFix","copy","placeholderClass","draggingClass","hoverClass","dropTargetContainerClass","throttleTime","maxItems","containerSerializer","customDragImage","orientation","enableHoverClass","hoverClasses_1","lastEventTimestamp","removeItemEvents","removeContainerEvents","removeSortableData","removeItemData","findSortable","findDragElement","itemlist","ele","enableSortable","handles","sortableElements","customItemSerializer","customContainerSerializer","serializedContainer","serializedItems","itemCount","serialize","configKey","reloadSortable","customPlaceholder","listItems","tempContainer","makePlaceholder","dragItem","setDragImage","dragImage","draggedItem","ditem","oldDisplay","getDragging","elementIndex","itemsBeforeUpdate","outTarget","fromElement","visiblePlaceholder","originItems","destinationContainer","destinationItems","destinationElementIndex","destinationIndex","debouncedDragOverEnter","thisHeight","thisWidth","placeholderIndex","thisIndex","deadZoneVertical","deadZoneHorizontal","placeAfter","elementMiddleVertical","elementMiddleHorizontal","placeholders","onDragOverEnter","destroySortable","disableSortable","__testing","tail","memoized","len","searchCache","next","prev","maxSize","S2","amd","requirejs","define","undef","main","req","makeMap","defined","waiting","defining","hasOwn","aps","jsSuffixRegExp","hasProp","normalize","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","baseParts","starMap","nodeIdCompat","makeRequire","relName","forceSync","makeLoad","depName","callDep","splitPrefix","prefix","makeRelParts","makeConfig","relParts","relResourceName","pr","uri","deps","cjsModule","usingExports","callbackType","load","alt","cfg","_defined","_$","getMethods","theClass","proto","methods","methodName","ChildClass","SuperClass","__hasProp","BaseConstructor","DecoratorClass","decoratedMethods","superMethods","DecoratedClass","argCount","calledConstructor","superMethod","calledMethod","originalMethod","decoratedMethod","Observable","invoke","generateChars","chars","random","_convertData","originalKey","dataLevel","hasScroll","$el","markup","replaceMap","__cache","GetUniqueElementId","select2Id","StoreData","GetData","RemoveData","copyNonInternalCssClasses","dest","destinationClasses","clazz","sourceClasses","replacements","Results","$results","displayMessage","hideLoading","$message","hideMessages","$option","$dropdown","sorter","highlightFirstItem","$selected","ensureHighlightVisible","setClasses","selectedIds","showLoading","loadingMore","$loading","attrs","Element","_resultId","$children","$child","$childrenContainer","$highlighted","getHighlightedResults","nextIndex","$next","eq","currentOffset","nextTop","nextOffset","nextBottom","mousewheel","deltaY","isAtTop","isAtBottom","$this","offsetDelta","BACKSPACE","TAB","ENTER","SHIFT","CTRL","ALT","ESC","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","DELETE","KEYS","BaseSelection","$selection","_tabindex","resultsId","_handleBlur","_attachCloseHandler","_detachCloseHandler","$select","isDisabled","SingleSelection","$rendered","selectionContainer","formatted","MultipleSelection","$selections","selectionIdPrefix","selectionId","removeItem","$remove","Placeholder","decorated","normalizePlaceholder","createPlaceholder","$placeholder","placeholderTitle","singlePlaceholder","AllowClear","_handleClear","_handleKeyboardClear","$clear","previousVal","unselectData","prevented","Search","searchLabel","$search","$searchContainer","_transferTabIndex","resizeSearch","_keyUpPrevented","isDefaultPrevented","$previousChoice","searchRemoveChoice","msie","documentMode","disableInputEvents","handleSearch","searchHadFocus","SelectionCSS","selectionCssClass","EventRelay","relayEvents","preventableEvents","Translation","dict","_cache","loadPath","translations","BaseAdapter","generateResultId","SelectAdapter","selectedElement","currentData","unselect","addOptions","normalizedData","_normalizeItem","matcher","ArrayAdapter","_dataToConvert","convertToOptions","elm","$existing","existingIds","onlyItem","$existingOption","existingData","newData","$newOption","ajaxOptions","_applyDefaults","transport","failure","$request","_request","abort","request","_queryTimeout","createTag","insertTag","_removeOldTags","page","checkChildren","Tokenizer","tokenizer","tokenData","termChar","MinimumInputLength","$e","minimum","MaximumInputLength","maximumInputLength","maximum","MaximumSelectionLength","maximumSelectionLength","_checkIfMaximumSelected","successCallback","count","Dropdown","showSearch","HidePlaceholder","removePlaceholder","modifiedData","InfiniteScroll","lastParams","$loadingMore","createLoadingMore","showLoadingMore","loadMoreIfNeeded","isLoadMoreVisible","loadMore","pagination","more","AttachBody","$dropdownParent","_showDropdown","_attachPositioningHandler","_bindContainerResultHandlers","_hideDropdown","_detachPositioningHandler","$dropdownContainer","detach","_containerResultsHandlersBound","_positionDropdown","_resizeDropdown","scrollEvent","resizeEvent","orientationEvent","$watchers","isCurrentlyAbove","isCurrentlyBelow","newDirection","viewport","enoughRoomAbove","enoughRoomBelow","$offsetParent","offsetParent","parentOffset","minWidth","countResults","MinimumResultsForSearch","minimumResultsForSearch","SelectOnClose","_handleSelectOnClose","originalSelect2Event","$highlightedResults","CloseOnSelect","_selectTriggered","metaKey","DropdownCSS","dropdownCssClass","TagsSearchHighlight","$firstOption","firstElement","errorLoading","inputTooLong","overChars","inputTooShort","maximumSelected","searching","removeAllItems","ResultsList","SelectionSearch","DIACRITICS","SelectData","ArrayData","AjaxData","DropdownSearch","EnglishTranslation","Defaults","reset","tokenSeparators","resultsAdapter","selectOnClose","dropdownAdapter","SearchableDropdown","selectionAdapter","allowClear","_resolveLanguage","uniqueLanguages","_processTranslations","debug","stripDiacritics","amdLanguageBase","autocomplete","dropdownAutoWidth","original","scrollAfterSelect","applyFromElement","optionLanguage","defaultLanguage","elementLanguage","parentLanguage","languages","isEmptyObject","isPlainObject","resolvedLanguages","baseLanguage","languageData","camelCase","convertedData","Options","excludedData","dir","upperCaseLetter","letter","attributeName","dataName","dataValue","jquery","Select2","DataAdapter","_placeContainer","SelectionAdapter","DropdownAdapter","ResultsAdapter","_bindAdapters","_registerDomEvents","_registerDataEvents","_registerSelectionEvents","_registerDropdownEvents","_registerResultsEvents","_registerEvents","_syncAttributes","_resolveWidth","WIDTH","styleWidth","elementWidth","_syncA","_syncS","_syncSubtree","_observer","MutationObserver","mutations","observe","childList","subtree","nonRelayEvents","toggleDropdown","altKey","_isChangeMutation","addedNodes","removedNodes","mutation","actualTrigger","preTriggerMap","preTriggerName","preTriggerArgs","hasFocus","newVal","removeData","thisMethods","instanceOptions","re","not_string","not_bool","not_type","not_primitive","numeric_arg","json","not_json","modulo","key_access","index_access","sign","sprintf_format","sprintf_parse","vsprintf","fmt","argv","parse_tree","arg","ph","pad_character","pad_length","is_positive","cursor","tree_length","output","param_no","Function","fromCharCode","precision","toExponential","toPrecision","valueOf","pad_char","sprintf_cache","_fmt","arg_names","SyntaxError","field_list","replacement_field","field_match","__esModule","_$AN","_$AO","_$AM","_$AH","_$AP","_$AQ","_$AT","_$AU","_$Ct","_$AI","_$Ci","createComment","_$AA","v","_$AB","ATTRIBUTE","CHILD","PROPERTY","BOOLEAN_ATTRIBUTE","EVENT","ELEMENT","_$litDirective$","_$AS","trustedTypes","createPolicy","createHTML","T","WeakMap","renderBefore","_$litPart$","E","createTreeWalker","C","P","currentNode","nextNode","hasAttributes","getAttributeNames","ctor","R","I","emptyScript","V","_$Cl","_$Cu","N","_$AD","creationScope","importNode","L","_$C_","startNode","endNode","_$AR","O","createTextNode","_$AC","setConnected","fill","once","z","litHtmlPolyfillSupport","litHtmlVersions","rt","lt","dt","ct","globalThis","ht","ut","ShadowRoot","ShadyCSS","nativeShadow","Document","CSSStyleSheet","_$cssResult$","styleSheet","replaceSync","reactiveElementPolyfillSupport","toAttribute","Boolean","fromAttribute","converter","reflect","hasChanged","_$Ei","isUpdatePending","hasUpdated","_$El","observedAttributes","finalize","elementProperties","_$Ep","_$Ev","noAccessor","getPropertyDescriptor","requestUpdate","finalized","getPrototypeOf","getOwnPropertyNames","createProperty","elementStyles","finalizeStyles","styles","flat","_$E_","enableUpdating","_$AL","_$Eg","addController","_$ES","renderRoot","hostConnected","removeController","createRenderRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","litNonce","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$EO","getPropertyOptions","_$EC","_$Ej","scheduleUpdate","performUpdate","shouldUpdate","willUpdate","hostUpdate","_$Ek","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","ReactiveElement","reactiveElementVersions","renderOptions","_$Dt","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","toStringTag","customElements","kind","finisher","descriptor","placement","initializer","HTMLSlotElement","assignedElements","customElement","unsafeCSS","property","ifDefined","TriggersAndOrSelector","triggersLogic","templateMultipleTriggers","templateDefault","singularName","logic","runWhen","runWhenAny","runWhenAll","isSavingData","trigger_logic","ConditionAddButton","reactive","renderEnabledButton","renderDisabledButton","disableWhenUserEditsAction","callbackOptionsOpen","callbackOptionsClose","isActionOpen","pleaseSaveActionFirst","showListOfConditions","promotePro","unlockConditions","ConditionPill","$dynamicSentence","_templateMissingCondition","_templateCondition","$pill","$removeButton","missingCondition","editCondition","confirmAction","cancelAction","$confirmButton","SendFeedback","sendFeedback","utmBtnParameters","utmSource","RecipeTitle","listenField","saveTitle","post_title","Categories","hasMetabox","listenCheckboxes","$allCategoriesList","saveCategory","addedNode","checkboxData","setStatus","term_id","category_id","set_category","revertCheckboxValue","tagsTextarea","listenModificationsToTags","tagsList","saveTags","getTags","exceptions","couldNotSave","tagsCommaSeparated","asArray","commaSeparated","Taxonomies","uiCantLoad"],"sourceRoot":""}