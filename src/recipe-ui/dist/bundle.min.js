/*! For license information please see bundle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={235:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(756);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o(this,e),this.content=t}var t,n;return t=e,n=[{key:"getHTML",value:function(){var e=(0,i.r)(this.content);return e=this.parseItalicsAndBold(e),this.parseAnchors(e)}},{key:"parseItalicsAndBold",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={doubleUnderscores:/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,singleUnderscores:/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,doubleAsterisks:/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,singleAsterisks:/(\*)(?=\S)([^\r]*?\S)\1/g};return(e=(e=(e=e.replace(t.doubleUnderscores,"$1<strong>$2</strong>")).replace(t.singleUnderscores,"$1<em>$2</em>")).replace(t.doubleAsterisks,"<strong>$2</strong>")).replace(t.singleAsterisks,"<em>$2</em>")}},{key:"parseAnchors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n=function(e,t,n,o,a,r,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(e=t,o=o.toLowerCase(),!a){if(o||(o=n.toLowerCase().replace(/ ?\n/g," ")),a="#".concat(o),!(e.search(/\(\s*\)$/m)>-1))return e;a=""}a=encodeURI(a,"*_",!1),(0,i.xb)(l)?l="":(l=l.replace(/"/g,"&quot;"),l=encodeURI(l,"*_",!1),l=' title="'.concat(l,'"'));var c='\n\t\t\t\t<a href="'.concat(a,'" target="_blank" ').concat(l,">\n\t\t\t\t\t").concat(n,"\n\t\t\t\t</a>\n\t\t\t");return c};return e.replace(t,n)}}],n&&a(t.prototype,n),e}()},772:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(311),o=n.n(i),a=n(756);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,e),this.elements={container:null,automatorContainer:null,modal:{container:null,box:{container:null,title:null,warning:null,buttons:{container:null,cancel:null,confirm:null}}}},this.elements.container=o()("body"),this.isVisible=!1,this.config=o().extend(!0,{fadeDuration:150,size:"medium",warningFirst:!1},n),this.content=o().extend({},{buttons:{cancel:UncannyAutomator.i18n.cancel}},t),this.create(),this}var t,n;return t=e,n=[{key:"create",value:function(){var e,t,n=o()("<div/>",{class:"uap"}),i=o()("<div/>",{class:"modal"}),r=o()("<div/>",{class:"modal__box"});if((0,a.$K)(this.config.size)&&["small","medium","large","extra-large"].includes(this.config.size)&&i.addClass("modal--".concat(this.config.size)),(0,a.$K)(this.config.customClass)&&i.addClass("modal--".concat(this.config.customClass)),this.elements.automatorContainer=n,this.elements.modal.container=i,this.elements.modal.box.container=r,(0,a.$K)(this.content.title)){var s=o()("<div/>",{class:"modal__title"}).html(this.content.title);r.append(s),this.elements.modal.box.title=s}if((0,a.$K)(this.content.content)){e=o()("<div/>",{class:"modal__content"});try{e.append(this.content.content)}catch(t){e.html(this.content.content)}r.append(e),this.elements.modal.box.content=e}(0,a.$K)(this.content.warning)&&(t=o()("<div/>",{class:"modal__warning"}).html(this.content.warning),this.elements.modal.box.warning=t),(0,a.$K)(this.config.warningFirst)&&this.config.warningFirst?((0,a.$K)(this.content.warning)&&r.append(t),(0,a.$K)(this.content.content)&&r.append(e)):((0,a.$K)(this.content.content)&&r.append(e),(0,a.$K)(this.content.warning)&&r.append(t));var l=o()("<div/>",{class:"modal__buttons"}),c=o()("<button/>",{class:"uap-btn uap-btn--secondary"}).html(this.content.buttons.cancel);if(l.append(c),this.elements.modal.box.buttons.container=l,this.elements.modal.box.buttons.cancel=c,(0,a.$K)(this.content.buttons.confirm)){var u=o()("<button/>",{class:"uap-btn uap-btn--primary"}).html(this.content.buttons.confirm);l.append(u),this.elements.modal.box.buttons.confirm=u}r.append(l),i.append(r),n.append(i),this.elements.container.append(n),o()("html").addClass("automator-modal-open"),this.bind()}},{key:"setEvents",value:function(e){var t=this;this.events={afterSetEvents:(0,a.$K)(e.afterSetEvents)?e.afterSetEvents:function(){},afterShow:(0,a.$K)(e.afterShow)?e.afterShow:function(){},afterHide:(0,a.$K)(e.afterHide)?e.afterHide:function(){},onConfirm:(0,a.$K)(e.onConfirm)?e.onConfirm:function(){},onCancel:(0,a.$K)(e.onCancel)?e.onCancel:function(){}},(0,a.$K)(e.onCancel)||(this.events.onCancel=function(){t.hide()}),this.events.afterSetEvents()}},{key:"destroy",value:function(){var e=this;this.unbind(),this.isVisible?this.hide((function(){e.elements.automatorContainer.remove()})):e.elements.automatorContainer.remove(),o()("html").removeClass("automator-modal-open")}},{key:"bind",value:function(){var e=this;(0,a.$K)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.on("click",(function(){e.events.onCancel()})),(0,a.$K)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.on("click",(function(){e.events.onConfirm()}))}},{key:"unbind",value:function(){(0,a.$K)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.unbind("click"),(0,a.$K)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.unbind("click")}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;e=(0,a.$K)(e)?e:this.events.afterShow,this.isVisible=!0,this.elements.modal.container.fadeIn(t.config.fadeDuration,e)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=(0,a.$K)(e)?e:this.events.afterHide,this.isVisible=!1,this.elements.modal.container.fadeOut(this.config.fadeDuration,e),o()("html").removeClass("automator-modal-open")}},{key:"getElements",value:function(){return this.elements}}],n&&s(t.prototype,n),e}()},756:(e,t,n)=>{"use strict";n.d(t,{bN:()=>S,hl:()=>ee,XE:()=>ue,A5:()=>q,Dh:()=>z,vQ:()=>ae,iK:()=>b,Ds:()=>oe,r:()=>J,IL:()=>T,p5:()=>le,PT:()=>se,q7:()=>O,M0:()=>R,rz:()=>I,ew:()=>F,Vx:()=>$,Y6:()=>P,eU:()=>U,Tb:()=>te,Ki:()=>Q,C2:()=>re,d3:()=>H,$K:()=>K,xb:()=>N,Kn:()=>Z,HD:()=>W,Wr:()=>A,Lc:()=>j,YQ:()=>ce,qh:()=>V,Tm:()=>w,R$:()=>L,hF:()=>Y,L8:()=>D,yv:()=>C,gy:()=>M,P2:()=>ie,Cn:()=>x});var i=n(311),o=n.n(i),a=n(605);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setAttributes(t),this.createFields()}var t,n;return t=e,n=[{key:"setAttributes",value:function(e){K(e.hasLabel)||(N(e.label)?e.hasLabel=!1:e.hasLabel=!0),K(e.hasDescription)||(N(e.description)?e.hasDescription=!1:e.hasDescription=!0),this.attributes=e}},{key:"createFields",value:function(){this.fields=this.attributes.fields.map((function(e){return new a.Z(e.fieldType,e)}))}},{key:"createFormElement",value:function(){var e=o()('<div class="form-group"></div>');if(this.attributes.hasLabel){var t=o()('<div class="form-group__label">'.concat(this.attributes.label,"</div>"));e.append(t)}var n=o()('<div class="form-group__fields"></div>');if(this.fields.forEach((function(e){var t=e.createFormElement();n.append(t)})),e.append(n),this.attributes.hasLabel){var i=o()('<div class="form-group__description">'.concat(this.attributes.description,"</div>"));e.append(i)}return this.formElement=e,e}},{key:"getValue",value:function(){var e={};return this.fields.forEach((function(t){e[t.getFieldID()]=t.getValue()})),e}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isValid:!0,message:""};return this.fields.forEach((function(n){t[n.getFieldID()]=n.validate(e),t.isValid=t.isValid&&t[n.getFieldID()].isValid})),t}}],n&&r(t.prototype,n),e}();function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=n(771),u=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setAttributes(t),this.createFields()}var t,n;return t=e,n=[{key:"setAttributes",value:function(e){K(e.hasLabel)||(N(e.label)?e.hasLabel=!1:e.hasLabel=!0),K(e.hasDescription)||(N(e.description)?e.hasDescription=!1:e.hasDescription=!0),this.attributes=e}},{key:"createFields",value:function(){var e=this.attributes.fields,t=[];if(Array.isArray(this.attributes.currentValue)&&this.attributes.currentValue.length>0)this.attributes.currentValue.forEach((function(n){var i=JSON.parse(JSON.stringify(e));i=i.map((function(e){return K(n[e.optionCode])?e.currentValue=n[e.optionCode]:e.currentValue="",e})),t.push(i)}));else if(this.attributes.isRequired){var n=JSON.parse(JSON.stringify(e));n.currentValue="",t.push(n)}t=t.map((function(e){return e.map((function(e){return e.label="",e.description="",new a.Z(e.fieldType,e)}))})),this.fieldRows=t}},{key:"createFormElement",value:function(){var e,t=o()('<div class="form-repeater"></div>');if(this.attributes.hasLabel){var n=o()('\n\t\t\t\t<div class="form-repeater__label">\n\t\t\t\t\t'.concat(this.attributes.label,"\n\t\t\t\t\t").concat(this.attributes.isRequired?'<span class="form-repeater__label-required"></span>':"","\n\t\t\t\t</div>\n\t\t\t"));t.append(n)}var i=this.getFieldsTable();if(t.append(i),i.append(o()('<div class="form-element__error"></div>')),this.attributes.hasDescription){var a=o()('<div class="form-repeater__description">'.concat(this.attributes.description,"</div>"));t.append(a)}return this.formElement=t,e=t,this.fieldRows.length>1&&this.makeRowsSortable(),this.listenSave(),e}},{key:"listenSave",value:function(){var e=this;this.formElement.on("saved",(function(t){e.updateAttributesFieldsFromRow()}))}},{key:"updateAttributesFieldsFromRow",value:function(){var e=[];this.fieldRows.forEach((function(t){var n=[];t.forEach((function(e){n.push(e.attributes)})),e.push(n)})),this.attributes.fields=e}},{key:"makeRowsSortable",value:function(){var e=this;c(this.formElement.find(".form-repeater-fields__table-rows"),{forcePlaceholderSize:!0,handle:".form-repeater-fields__table-rows-cell--number",placeholder:'<tr><td colspan="'.concat(this.fieldRows[0].length+2,'">&nbsp;</td></tr>'),itemSerializer:function(e,t){return{position:e.index,html:e.html}}}),this.formElement.find(".form-repeater-fields__table-rows").on("sortupdate",(function(t){var n=[];o().each(t.detail.destination.items,(function(e,t){n.push(o()(t).data("order"))}));var i=[];n.forEach((function(t){i.push(e.fieldRows[t])})),e.fieldRows=i,e.reRender()}))}},{key:"getFieldsTable",value:function(){var e=this,t=o()('\n\t\t\t<div class="form-repeater-fields">\n\t\t\t\t<table class="form-repeater-fields__table">\n\t\t\t\t\t<thead class="form-repeater-fields__table-heading"></thead>\n\t\t\t\t\t<tbody class="form-repeater-fields__table-rows"></tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class="form-repeater-fields__actions"></div>\n\t\t\t</div>\n\t\t'),n=[];this.attributes.fields.forEach((function(e){var t=K(e.label)?e.label:"",i=!!K(e.isRequired)&&e.isRequired,o=K(e.description)?e.description:"";n.push({title:t,description:o,isRequired:i})}));var i=o()("<tr></tr>");i.append(o()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--number">#</th>')),n.forEach((function(e){var t=o()('<th class="form-repeater-fields__table-heading-cell"></th>');N(e.title)||t.append(o()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-title">\n\t\t\t\t\t\t'.concat(e.title,"\n\t\t\t\t\t\t").concat(e.isRequired?'<span class="form-repeater-fields__table-heading-cell-required"></span>':"","\n\t\t\t\t\t</div>\n\t\t\t\t"))),N(e.description)||t.append(o()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-description">\n\t\t\t\t\t\t'.concat(e.description,"\n\t\t\t\t\t</div>\n\t\t\t\t"))),i.append(t)})),i.append(o()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--actions"></th>')),t.find(".form-repeater-fields__table-heading").append(i);var a=t.find(".form-repeater-fields__table-rows"),r=this.fieldRows.length;if(this.fieldRows.forEach((function(t,n){var i=o()('<tr data-order="'.concat(n,'"></tr>'));i.append(o()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--number">'.concat(n+1,"</td>"))),t.forEach((function(e){var t=o()('<td class="form-repeater-fields__table-rows-cell"></td>'),n=e.getFormElement();e.initLibraries(),t.append(n),i.append(t)}));var s=o()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--actions"></td>');i.append(s);var l=e.getAttributes();if(0!=n||0==n&&(!e.attributes.isRequired||r>1)){var c=K(e.attributes.removeRowButtonLabel)?e.attributes.removeRowButtonLabel:UncannyAutomator.i18n.removeRow,u=o()('<div class="form-repeater-fields__table-rows-cell-remove" uap-tooltip="'.concat(c,'"><span></span></div>'));u.on("click",(function(){e.deleteRow(n)})),l.hideActions||s.append(u)}a.append(i)})),!this.getAttributes().hideActions){var s=o()('\n\t\t\t\t<div class="uap-btn uap-btn--primary uap-btn--small">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.addRow,"\n\t\t\t\t</div>\n\t\t\t"));K(this.attributes.addRowButtonLabel)&&s.text(this.attributes.addRowButtonLabel),s.on("click",(function(){s.addClass("uap-btn--loading"),e.addRow()})),t.find(".form-repeater-fields__actions").append(s)}return t}},{key:"getValue",value:function(){var e=[];return this.fieldRows.forEach((function(t){var n={};t.forEach((function(e){n[e.getFieldID()]=e.getValue()})),e.push(n)})),e}},{key:"addRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JSON.parse(JSON.stringify(this.attributes.fields));n.currentValue="",n=n.map((function(t){return t.label="",t.description="",K(e[t.optionCode])&&(t.currentValue=e[t.optionCode]),new a.Z(t.fieldType,t)})),this.fieldRows.push(n),t&&this.reRender(!0)}},{key:"reRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyCodeMirror(),this.destroyTokenSelector();var t=this.formElement,n=this.createFormElement(!1);if(t.replaceWith(n),this.initTokenSelector(),this.initCodeMirror(),e){var i=this.fieldRows[this.fieldRows.length-1];if(K(i)){var o=i[0];K(o)&&o.focus()}}}},{key:"deleteRow",value:function(e){K(this.fieldRows[e])&&this.fieldRows.splice(e,1),this.formElement.replaceWith(this.createFormElement())}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isValid:!0,message:""},n=[];return this.fieldRows.forEach((function(i){var o={};i.forEach((function(n){o[n.getFieldID()]=n.validate(e),t.isValid=t.isValid&&o[n.getFieldID()].isValid})),n.push(o)})),t}},{key:"initTokenSelector",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.initTokenSelector()}))}))}},{key:"destroyTokenSelector",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.destroyTokenSelector()}))}))}},{key:"initCodeMirror",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.initCodeMirror()}))}))}},{key:"destroyCodeMirror",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.destroyCodeMirror()}))}))}}],n&&l(t.prototype,n),e}();const d=u;var p=n(347),m=n(463),h=n(772),f="undefined"==typeof arguments?void 0:arguments;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _=n(975).vsprintf,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";UncannyAutomator.dev.developerMode&&z("Start creating the main object"),e=N(e)?function(){}:e;var t=function(){E(),k(),w("create",{allRecipes:UncannyAutomator.recipes_object}),delete UncannyAutomator.triggers,delete UncannyAutomator.actions,UncannyAutomator.dev.developerMode&&z("Ended creating the main object"),e()};N(UncannyAutomator.recipe.type)?new p.Z((function(){t()})):t()},w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1,r=["create","validate"];if(K(t)&&H(t,r))switch(t){case"create":var l=["allRecipes"];if(H(l,Object.keys(n))){var c,u=n.allRecipes;o().each(u,(function(e,t){t.ID==UncannyAutomator.recipe.id&&(c=t)})),K(c.extra_options)&&!N(c.extra_options)&&(UncannyAutomator.recipes_object[c.ID].extra_options=c.extra_options),o().each(c.triggers,(function(e,t){return t.itemType="trigger"})),o().each(c.actions,(function(e,t){return t.itemType="action"})),o().each(c.closures,(function(e,t){return t.itemType="closure"}));var p=[].concat.apply([],[c.triggers,c.actions,c.closures]);A("reset");var m="anonymous"==UncannyAutomator.recipe.type;if(o().each(p,(function(e,t){var n,i,r=t.meta.integration,l=t.meta.code;try{i=UncannyAutomator.recipes_object[c.ID].extra_options[r][l]}catch(e){}var u=$(r,t.itemType,l);if(K(u)){var p={};N(i)?(K(u.options)&&o().each(u.options,(function(e,t){p[t.option_code]=[t]})),K(u.options_group)&&o().extend(!0,p,u.options_group)):(K(i.options)&&o().each(i.options,(function(e,t){p[t.option_code]=[t]})),K(i.options_group)&&o().extend(!0,p,i.options_group));var h={};o().each(p,(function(e,n){var i=[],r=n.length>1;o().each(n,(function(n,o){var l,c,p=function(n){var i={isGroup:r,itemId:t.ID,itemType:t.itemType,isRequired:!!K(n.required)&&n.required,isReadOnly:!!K(n.read_only)&&n.read_only,supportsTinyMCE:!!K(n.supports_tinymce)&&n.supports_tinymce,supportsCopyToClipboard:!!K(n.copy_to_clipboard)&&n.copy_to_clipboard,isAjax:!!K(n.is_ajax)&&n.is_ajax,groupId:e,optionCode:n.option_code,fieldType:n.input_type,label:n.label,description:n.description,placeholder:n.placeholder,isHidden:!!K(n.is_hidden)&&n.is_hidden,tokenName:K(n.token_name)?n.token_name:n.label,defaultValue:n.default_value,currentValue:K(t.meta[n.option_code])?t.meta[n.option_code]:n.default_value,customFieldTokens:!!K(n.relevant_tokens)&&n.relevant_tokens,relevantTokens:!!K(n.relevant_tokens)&&n.relevant_tokens,maxLength:K(n.max_length)?n.max_length:null};return"date"==i.fieldType&&(i.dateFormat=K(n.date_format)?n.date_format:"Y-m-d",i.dateAltFormat=K(n.date_alt_format)?n.date_alt_format:UncannyAutomator.format.date,i.supportsRange=!!K(n.supports_range)&&n.supports_range,K(n.min_date)&&(i.minDate=n.min_date),K(n.max_date)&&(i.maxDate=n.max_date)),"time"==i.fieldType&&(i.timeFormat=K(n.time_format)?n.time_format:"h:i K",i.timeAltFormat=K(n.time_alt_format)?n.time_alt_format:"h:i K",K(n.min_time)&&(i.minTime=n.min_time),K(n.max_date)&&(i.maxTime=n.max_time)),["text","textarea","int","float","email","url","select","date","time"].includes(i.fieldType)&&["action","closure"].includes(i.itemType)&&!i.isReadOnly?i.supportsTokens=!K(n.supports_tokens)||n.supports_tokens:i.supportsTokens=!1,"select"==i.fieldType&&(K(n.supports_custom_value)?i.supportsCustomValue=n.supports_custom_value:["action","closure"].includes(i.itemType)?i.supportsCustomValue=!0:i.supportsCustomValue=!1,i.supportsCustomValue&&(i.customValue=K(t.meta["".concat(i.optionCode,"_custom")])?t.meta["".concat(i.optionCode,"_custom")]:""),K(n.custom_value_description)&&(i.customValueDescription=n.custom_value_description),K(n.supports_multiple_values)&&(i.supportsMultipleValues=n.supports_multiple_values)),i.isAjax&&(i.targetField=K(n.fill_values_in)?n.fill_values_in:"",i.endpoint=K(n.endpoint)?n.endpoint:"",i.integrationId=u.integration,N(i.targetField)&&(i.targetField=n.option_code)),["select","radio"].includes(i.fieldType)&&(i.options=K(n.options)?n.options:[]),i};if("group"==o.input_type)l={groupId:e,optionCode:o.option_code,fieldType:o.input_type,isGroup:r,itemId:t.ID,itemType:t.itemType,label:o.label,description:o.description,tokenName:K(o.token_name)?o.token_name:o.label,isRequired:!!K(o.required)&&o.required,fields:o.fields.map((function(e){return p(e)}))},c=new s(l);else if("repeater"==o.input_type){try{t.meta[o.option_code]=JSON.parse(t.meta[o.option_code])}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}l={groupId:e,optionCode:o.option_code,fieldType:o.input_type,isGroup:r,itemId:t.ID,itemType:t.itemType,label:o.label,description:o.description,tokenName:K(o.token_name)?o.token_name:o.label,defaultValue:o.default_value,currentValue:K(t.meta[o.option_code])?t.meta[o.option_code]:o.default_value,isRequired:!!K(o.required)&&o.required,hideActions:!!K(o.hide_actions)&&o.hide_actions,fields:o.fields.map((function(e){return p(e)}))},K(o.add_row_button)&&(l.addRowButtonLabel=o.add_row_button),K(o.remove_row_button)&&(l.removeRowButtonLabel=o.remove_row_button),c=new d(l)}else l=p(o),c=new a.Z(l.fieldType,l,!1);i.push(c)}));var l=[];K(u.buttons)&&o().each(u.buttons,(function(t,n){n.show_in==e&&l.push(n)})),h[e]={fields:i,isValid:!1,buttons:l}})),n={id:t.ID,itemType:t.itemType,itemCode:l,integrationCode:u.integration,isLive:"publish"==t.post_status,options:h,meta:t.meta,isMissing:!1,tokens:K(t.tokens)?t.tokens:[],inlineCss:K(u.inline_css)?u.inline_css:"",filterTokens:K(u.filter_tokens)?u.filter_tokens:""},K(u.support)&&(n.support=u.support);var f={};o().each(h,(function(e,t){o().each(t.fields,(function(e,t){f[t.getAttributes().optionCode]=t}))})),o().each(f,(function(e,t){var i=t.getAttributes();K(n.meta[i.optionCode])&&!N(n.meta[i.optionCode])||N(i.currentValue)||(n.meta[i.optionCode]=i.currentValue)})),m&&(n.canLogNewUserIn=!K(u.can_log_in_new_user)||u.can_log_in_new_user)}else n={id:t.ID,itemType:t.itemType,itemCode:t.meta.code,integrationCode:t.meta.integration,integrationName:t.meta.integration_name,sentence:t.meta.sentence,isLive:"publish"==t.post_status,tokens:[],options:{},meta:t.meta,isMissing:!0},m&&(n.canLogNewUserIn=!K(t.meta.can_log_in_new_user)||"true"==t.meta.can_log_in_new_user);A("add",n)})),m){UncannyAutomator.recipe.canLogNewUserIn=!1;var h=A("get",{filter:{itemType:"trigger"}});Object.keys(h)>0&&(UncannyAutomator.recipe.canLogNewUserIn=!0,o().each(h,(function(e,t){UncannyAutomator.recipe.canLogNewUserIn=UncannyAutomator.recipe.canLogNewUserIn&&t.canLogNewUserIn})))}(!K(n.validate)||K(n.validate)&&n.validate)&&e("validate")}else{var f=JSON.stringify(B(n,l));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["recipeObject",f]))}break;case"validate":var g=!0;o().each(UncannyAutomator.recipe.hasLive,(function(e){UncannyAutomator.recipe.hasLive[e]=!1})),o().each(UncannyAutomator.recipe.items,(function(e,t){t.isLive&&(UncannyAutomator.recipe.hasLive[t.itemType]=!0)})),o().each(UncannyAutomator.recipe.items,(function(e,t){var n=!0;o().each(t.options,(function(t,i){var a=!0;o().each(i.fields,(function(e,t){t.validate(!1).isValid||(a=!1)})),UncannyAutomator.recipe.items[e].options[t].isValid=a,a||(n=!1)})),UncannyAutomator.recipe.items[e].isValid=n,t.isLive&&!n&&(g=!1)})),UncannyAutomator.recipe.hasLive.trigger?"anonymous"==UncannyAutomator.recipe.type&&UncannyAutomator.recipe.requiresUserData&&!UncannyAutomator.recipe.userSelector.isValid?(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.userSelector):UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure?UncannyAutomator.recipe.hasLive.trigger||UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.liveItems):(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneAction):(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneTrigger),UncannyAutomator.recipe.isValid=g,g&&(UncannyAutomator.recipe.message.error=""),i=!0}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The action "%s" isn\'t defined',["recipeObject",t]));return i},A=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1,a=["add","delete","clean","reset","update","get"];if(K(t)&&H(t,a))switch(t){case"add":n=o().extend({isValid:!1,isLive:!1},n);var r=["id","itemType"];if(H(r,Object.keys(n)))K(UncannyAutomator.recipe.items[n.id])||(UncannyAutomator.recipe.items[n.id]=n,e("clean",{}),i=!0);else{var s=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",s]))}break;case"delete":n=o().extend({isValid:!1},n),N(n.id)?UncannyAutomator.dev.developerMode&&console.error(_("%s: Invalid item ID",["itemsObject"])):K(UncannyAutomator.recipe.items[n.id])?(delete UncannyAutomator.recipe.items[n.id],i=!0):UncannyAutomator.dev.developerMode&&console.error(_("%s: We didn't find an item with this the ID %s",["itemsObject",n.id]));break;case"clean":var l={};o().each(UncannyAutomator.recipe.items,(function(e,t){K(t)&&(l[e]=t)})),UncannyAutomator.recipe.items=l,i=!0;break;case"update":N(n.id)?UncannyAutomator.dev.developerMode&&console.error(_("%s: Invalid item ID",["itemsObject"])):K(UncannyAutomator.recipe.items[n.id])?(UncannyAutomator.recipe.items[n.id]=o().extend({},UncannyAutomator.recipe.items[n.id],n),i=!0):UncannyAutomator.dev.developerMode&&console.error(_("%s: We didn't find an item with this the ID %s",["itemsObject",n.id]));break;case"reset":UncannyAutomator.recipe.items={},i=!0;break;case"get":if(N(n.filter))i=UncannyAutomator.recipe.items;else{var c={};o().each(UncannyAutomator.recipe.items,(function(e,t){var i=!0;o().each(n.filter,(function(e,n){t[e]!=n&&(i=!1)})),i&&(c[e]=t)})),i=c}}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The action "%s" isn\'t defined',["itemsObject",t]));return i},k=function(){Object.entries(UncannyAutomator.integrations).forEach((function(e){var t=v(e,2),n=t[0],i=(t[1],{available:C(UncannyAutomator.triggers.filter((function(e){return e.integration==n})),"select_option_name",(function(e){return Y(e)})),unavailable:[]}),o={available:C(UncannyAutomator.actions.filter((function(e){return e.integration==n})),"select_option_name",(function(e){return Y(e)})),unavailable:[]};if((!K(UncannyAutomator.wp)||!UncannyAutomator.wp)&&K(UncannyAutomator.proFeatures)&&K(UncannyAutomator.proFeatures[n])){var a=UncannyAutomator.recipe.type;a="user"==a?"logged-in":a,i.unavailable=C(UncannyAutomator.proFeatures[n].triggers.filter((function(e){return e.type==a})),"name",(function(e){return Y(e)})),o.unavailable=C(UncannyAutomator.proFeatures[n].actions,"name",(function(e){return Y(e)}))}i.allItemsArePro=i.available.every((function(e){return!!K(e.is_pro)&&e.is_pro})),o.allItemsArePro=o.available.every((function(e){return!!K(e.is_pro)&&e.is_pro})),i.hasAvailableItems=i.available.length>0,o.hasAvailableItems=o.available.length>0,i.hasUnavailableItems=i.unavailable.length>0,o.hasUnavailableItems=o.unavailable.length>0,i.hasTriggers=i.hasAvailableItems||i.unavailable.length>0,o.hasActions=o.hasAvailableItems||o.unavailable.length>0,UncannyAutomator.integrations[n].items={triggers:i,actions:o}}))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return K(n)||(n=function(e){return e}),Array.isArray(e)&&!N(e)&&(e=e.sort((function(e,i){var o=0;if(K(e[t])&&K(i[t])){var a=n(e[t]),r=n(i[t]);o=(o=(o=a.localeCompare(r))>0?1:o)<0?-1:o}return o}))),e},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggers",n=arguments.length>2?arguments[2]:void 0;n=Object.assign({addDeprecatedItems:!1},n);var i={available:{},unavailable:{}};return["triggers","actions"].includes(t="action"==(t="trigger"==t?"triggers":t)?"actions":t)&&(N(e)||K(UncannyAutomator.integrations[e])&&(i=o().extend(!0,{},UncannyAutomator.integrations[e].items[t]),n.addDeprecatedItems||(i=T(i)))),i},T=function(e){return e.available=e.available.filter((function(e){return!e.is_deprecated})),e.hasAvailableItems=e.available.length>0,K(e.hasTriggers)?e.hasTriggers=e.hasAvailableItems||e.unavailable.length>0:K(e.hasActions)&&(e.hasActions=e.hasAvailableItems||e.unavailable.length>0),e.allItemsArePro=e.available.every((function(e){return!!K(e.is_pro)&&e.is_pro})),e},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i=["set-step","get-step","set-source","update-fields","reset-fields"];if(K(e)&&H(e,i)){var a=[];switch(e){case"set-step":if(H(a=["step"],Object.keys(t)))UncannyAutomator.recipe.userSelector.step=t.step;else{var r=JSON.stringify(B(t,a));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["userSelectorObject",r]))}break;case"get-step":var s="select-source";K(UncannyAutomator.recipe.userSelector.step)?s=UncannyAutomator.recipe.userSelector.step:N(UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source])||(s="show-sentence",UncannyAutomator.recipe.userSelector.isValid=!0),n=s;break;case"set-source":if(H(a=["source"],Object.keys(t)))UncannyAutomator.recipe.userSelector.source=t.source;else{var l=JSON.stringify(B(t,a));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["userSelectorObject",l]))}break;case"update-fields":if(H(a=["source","data"],Object.keys(t)))["existingUser","newUser"].includes(t.source)?(N(UncannyAutomator.recipe.userSelector.data)&&(UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}),UncannyAutomator.recipe.userSelector.data[t.source]=o().extend({},UncannyAutomator.recipe.userSelector.data[t.source],t.data)):UncannyAutomator.dev.developerMode&&console.error(_("%s: The source parameter is invalid. Valid values are: %s",["userSelectorObject",["existingUser","newUser"]]));else{var c=JSON.stringify(B(t,a));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["userSelectorObject",c]))}break;case"reset-fields":UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}}}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The action "%s" isn\'t defined',["userSelectorObject",e]));return n},E=function(){["user","anonymous"].includes(UncannyAutomator.recipe.type)&&(UncannyAutomator.dev.developerMode&&(z("Filter Automator items",!0,{collapseGroup:!0}),console.log(_("Current recipe type: %s",[UncannyAutomator.recipe.type]))),UncannyAutomator.triggers=UncannyAutomator.triggers.filter((function(e){return UncannyAutomator.dev.developerMode&&(console.log(e),e.type==UncannyAutomator.recipe.type?G("success","Keep"):G("error","Remove")),e.type==UncannyAutomator.recipe.type})),UncannyAutomator.dev.developerMode&&console.groupEnd())},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=["add","delete","update","change_post_status","recipe_completions_allowed","recipe_max_completions_allowed","change_post_title","change_post_recipe_type","user-selector","set_recipe_terms","schedule_action","remove_schedule","set_recipe_requires_user"],s=M();a=Object.assign({requiresRecipesObject:!0,renderUI:!0,errorMessaging:{accessDenied:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(e,"</strong>")])},notFound:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.content,['<a href="'.concat(UncannyAutomator.dev.permalinksURL,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.sitePermalinks,"</a>"),'<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])},timeout:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.content},serverError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])},parserError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.content},dataMissing:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.contactSupport,"</a>"),'<a href="'.concat(UncannyAutomator.dev.automatorTools,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.automatorTools,"</a>")])},generic:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])}}},a),H(e,r)?o().ajax({method:"POST",url:"".concat(UncannyAutomator.restURL,"/").concat(e,"/"),data:"".concat(o().param(t),"&").concat(o().param({doing_rest:1})),dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",UncannyAutomator.nonce)}}).done((function(o,r,s){UncannyAutomator.dev.developerMode&&(z("âœ… REST: ".concat(e),!0,{collapseGroup:!0}),console.log("Endpoint: ".concat(e)),console.log("Data:"),console.log(t),console.log("Response:"),console.log(o),console.groupEnd()),o.success?K(o.recipes_object)||!a.requiresRecipesObject?K(n)&&(a.renderUI&&w("create",{allRecipes:o.recipes_object}),n(o)):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but the new recipes_object is missing."),K(i)&&i(o,"data-missing")):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but there were errors."),K(i)&&i(o,"data-missing"))})).fail((function(n,o,r){var s=o,l=a.errorMessaging.generic;switch(s){case"parsererror":s="parser-error",l=a.errorMessaging.parserError;break;case"error":403==n.status?(s="access-denied",l=a.errorMessaging.accessDenied):404==n.status?(s="not-found",l=a.errorMessaging.notFound):500==n.status&&(s="server-error",l=a.errorMessaging.serverError);break;case"timeout":s="timeout",l=a.errorMessaging.timeOut}UncannyAutomator.dev.developerMode&&(z("âŒ REST: ".concat(e),!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log(n),console.log(s),console.log(r),console.groupEnd()),K(i)&&i({success:!1},s),re({title:l.title,warning:l.content,content:"",console:"Data sent:\n"+"".concat(JSON.stringify(t),"\n\n")+"errorCode: \n".concat(s,"\n\n")+"errorThrown:\n".concat(JSON.stringify(r),"\n\n")+"jqXHR: \n".concat(JSON.stringify(n)," \n\n"),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}})})):UncannyAutomator.dev.developerMode&&console.error(_("The %s endPoint does not exists. The valid endpoints are %s",[e,r.join(", ")]))},M=function(){return ee(ue(UncannyAutomator.dev.supportPage,{medium:"error-handler",content:"get-support-link"}),{subject:"technical-support",version:UncannyAutomator.version,site_url:UncannyAutomator.siteURL})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;K(e)?(t=o().extend(!0,t,{action:e,nonce:UncannyAutomator.nonce}),o().ajax({method:"POST",dataType:"json",url:ajaxurl,data:t,success:function(e){UncannyAutomator.dev.developerMode&&(z("AJAX call âœ…",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log(e),console.groupEnd()),K(e.status)&&"auth-failed"==e.status?location.reload():K(n)&&n(e,t)},statusCode:{403:function(e){UncannyAutomator.dev.developerMode&&(z("AJAX call ðŸ”´",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),z("403: Access denied",!1,{bgColor:"#ff0000"}),console.groupEnd()),K(i)&&i(e),K(i)&&i(e)}},fail:function(e){UncannyAutomator.dev.developerMode&&(z("AJAX call ðŸ”´",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),K(i)&&i(e)}})):UncannyAutomator.dev.developerMode&&console.error("We cannot do this AJAX request. {action} is not defined.")},O=function(e){var t={};return o().each(UncannyAutomator.recipe.items[e].options,(function(e,n){o().each(n.fields,(function(e,n){var i=n.getFieldID(),o=n.getValue();K(o)||(o=n.getAttributes().currentValue),"select"==n.getAttributes().fieldType&&"automator_custom_value"==o&&(t["".concat(i,"_custom")]=n.getSelectCustomValue()),t[i]=o,N(o)||"select"!=n.getAttributes().fieldType||(t["".concat(i,"_readable")]=n.getReadableValue())}))})),t},I=function(e,t){var n;return o().each(UncannyAutomator.recipe.items[e].options,(function(e,i){o().each(i.fields,(function(e,i){t==i.getFieldID()&&(n=i)}))})),n},$=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!N(t)&&!N(n)&&!N(i)){var a={};if("trigger"==n||"action"==n){if(K(UncannyAutomator.integrations[t])){var r=UncannyAutomator.integrations[t];K(r.items)&&(a="trigger"==n?r.items.triggers.available:r.items.actions.available)}}else"closure"==n&&(a=UncannyAutomator.closures);o().each(a,(function(t,n){if(n.code==i)return e=n,!1}))}return e},L=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;D("set_recipe_requires_user",{recipePostID:UncannyAutomator.recipe.id,requiresUser:e},(function(n){n.success&&K(t)&&(UncannyAutomator.recipe.requiresUserData=e,R("user-selector").addClass("user-selector--show"),t(n))}),(function(e){UncannyAutomator.dev.developerMode&&console.log("Couldn't set the recipe requires user status"),K(n)&&n(e)}))},R=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},a=["metabox","items","item","optionGroup","lastItem","user-selector"];if(K(t)&&H(t,a)){var r=[];switch(t){case"metabox":if(n=o().extend({},n),H(r=["type"],Object.keys(n))){n.cssSelectorMetabox="","trigger"==n.type?n.cssSelectorMetabox="#recipe-triggers-ui":"action"==n.type&&(n.cssSelectorMetabox="#recipe-actions-ui");var s=o()(n.cssSelectorMetabox);i=s}else{var l=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",l]))}break;case"items":if(n=o().extend({},n),H(r=["type"],Object.keys(n))){var c=e("metabox",{type:n.type}),u=c.find(".item:not(.item--user-selector):not(.item--start):not(.item--closure)");i=u}else{var d=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",d]))}break;case"item":if(n=o().extend({},n),H(r=["id"],Object.keys(n))){n.cssSelector='.uap .item[data-id="'.concat(n.id,'"]');var p=o()(n.cssSelector),m=p.find(".item__content");i.item=p,i.contentContainer=m}else{var h=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",h]))}break;case"optionGroup":if(n=o().extend({},n),H(r=["itemID","groupID"],Object.keys(n))){var f=e("item",{id:n.itemID}).item;n.cssSelectorTokenInSentence='.item-title__token[data-token-id="'.concat(n.groupID,'"]'),n.cssSelectorFieldsContainer='.item-options__group[data-optiongroup="'.concat(n.groupID,'"]');var g=f.find(n.cssSelectorTokenInSentence),v=f.find(n.cssSelectorFieldsContainer),y=f.find(".item-options");i.tokenInSentence=g,i.fieldsContainer=v,i.optionsContainer=y}else{var b=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",b]))}break;case"lastItem":if(n=o().extend({},n),H(r=["type"],Object.keys(n))){var w=e("metabox",{type:n.type}),A=w.find(".item:not(.item--user-selector):not(.item--start):not(.item--closure)").last();i=A}else{var k=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",k]))}break;case"user-selector":i=o()(".user-selector")}}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The element "%s" isn\'t defined',["getDOMElements",t]));return i},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={url:"",node:null},n=UncannyAutomator.integrations[e];return K(n)&&(t.node=document.createElement("img"),K(n.icon_svg)?(t.url=n.icon_svg,t.node.setAttribute("src",n.icon_svg),t.node.setAttribute("alt",n.name)):K(n.icon_32)&&K(n.icon_64)&&(t.url={icon16:n.icon_16,icon32:n.icon_32,icon64:n.icon_64},t.node.setAttribute("src",n.icon_32),t.node.setAttribute("srcset",_("%s 1x, %s 2x",[n.icon_32,n.icon_64])),t.node.setAttribute("alt",n.name))),t},F=function(){return["select","textarea","text","url","email","int","float","checkbox","radio","group","date","time","repeater"]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;if(i={plain:"",brackets:"",html:o()("<div/>"),elements:{normal:[],token:[]},parts:[]},t=t.trim(),!N(t)){var a,r=new RegExp(/\{\{(.*?)\}\}/gm),s=[],l=[],c=t,u=0,d=(t=t.replace(r,(function(t,i){var o,a=i.split(":"),r=a[0],s=a[1],d=K(a[2])?a[2]:s;return i={type:"token",id:s,text:r,optionsID:d,hasFields:K(e.options[d])},K(n[i.id])&&("automator_custom_value"==n[i.id]&&K(n[_("%s_custom",[i.id])])?o=n[_("%s_custom",[i.id])]:K(n[_("%s_readable",[i.id])])&&(o=n[_("%s_readable",[i.id])]),i.originalText=i.text,i.text=K(o)?o:n[i.id]),l.push(i),c=c.replace(t,"{{token:".concat(u,"}}")),u++,"{{v}}"}))).split("{{v}}"),p=0;for(o().each(d,(function(e,t){if(""!=t){var n={type:"normal",text:t};s.push(n),c=c.replace(t,"{{normal:".concat(p,"}}")),p++}}));null!==(a=r.exec(c));){var h=a[1].split(":");"normal"==(h={type:h[0],index:h[1]}).type?i.parts.push(s[h.index]):i.parts.push(l[h.index])}var f=null;o().each(i.parts,(function(t,n){if(i.plain+=n.text," "!=n.text){var a,s=n.text,l=!1,c=null;if("normal"==n.type||"token"==n.type&&!n.hasFields&&!e.isMissing)a={class:"item-title__normal"},i.brackets+=n.text;else{if(a={class:"item-title__token","data-token-id":n.id,"data-options-id":n.optionsID},K(e.options[n.optionsID])&&e.options[n.optionsID].isValid&&(a.class+=" item-title__token--filled"),K(n.originalText)){if(r.test(s)){K(f)||(f=new m.Z(e.itemType,"text",{includeGroupName:!1}));var u=f.renderTextWithTokens(s);K(u)&&(l=!0,c=u)}if(!l){var d=X(s,30);d.isAbbreviated&&(a["uap-tooltip"]=s,s=d.text)}}i.brackets+="{{".concat(ne(s),"}}")}var p=o()("<span/>",a);l?p.append(c):p.text(ne(s)),i.elements[n.type].push(p),i.html.append(p)}else i.brackets+=n.text})),i.elements.normal=o()(i.elements.normal).map((function(e,t){return t.get()})),i.elements.token=o()(i.elements.token).map((function(e,t){return t.get()})).filter(":not(.item-title__normal)")}return UncannyAutomator.recipe.items[e.id].itemSentence=i,i},j=function(e){var t=e.url,n=e.title,i=e.w,o=e.h,a=e.onClose,r=K(window.screenLeft)?window.screenLeft:window.screenX,s=K(window.screenTop)?window.screenTop:window.screenY,l=document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;window.innerWidth&&(l=window.innerWidth);var c=document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;window.innerHeight&&(c=window.innerHeight);var u=l/window.screen.availWidth,d=(l-i)/2/u+r,p=(c-o)/2/u+s,m=window.open(t,n,"\n\t\tscrollbars=yes,\n\t\twidth=".concat(i/u,", \n\t\theight=").concat(o/u,", \n\t\ttop=").concat(p,", \n\t\tleft=").concat(d,"\n\t\t"));return window.focus&&m.focus(),K(a)&&function e(){m.closed?a():setTimeout((function(){e()}),500)}(),m},K=function(e){return null!=e},N=function(e){var t=!0;return K(e)&&(t=o().isArray(e)?0==e.length:Z(e)?o().isEmptyObject(e):""==e),t},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!0};return n.caseSensitive?e.toString()==t.toString():e.toString().toLowerCase()==t.toString().toLowerCase()},H=function(e,t){return Array.isArray(e)?0==B(e,t).length:-1!==o().inArray(e,t)},B=function(e,t){return o()(e).not(t).get()},W=function(e){return"string"==typeof e},Z=function(e){return null!==e&&"object"===g(e)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(e=e.replace(/{{/g,t)).replace(/}}/g,n)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(UncannyAutomator.dev.developerMode){K(n.bgColor)||(n.bgColor="#0790e8");var i="background: ".concat(n.bgColor,'; color: #fff; font-weight: 500; padding: 2px 6px; font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; border-radius: 8px;');t?K(n.collapseGroup)&&n.collapseGroup?console.groupCollapsed("%cAutomator",i,e):console.group("%cAutomator",i,e):console.log("%cAutomator",i,e)}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(UncannyAutomator.dev.developerMode){var n=["color: #fff","padding: 2px 7px",'font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',"font-weight: normal"].join(";");"error"==e&&(n="background: #f13c3c; ".concat(n)),"success"==e&&(n="background: #40b528; ".concat(n)),console.log("%c".concat(t),n)}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={"&":"&amp;","<":"&lt;",">":"&gt;"},n=function(e){return t[e]||e};return e.replace(/[&<>]/g,n)},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={isAbbreviated:!1,text:e};if(e.length>t){var i=Math.floor(t/2),o={start:e.substring(0,i),end:e.slice(-i)};n.text="".concat(o.start," ... ").concat(o.end),n.isAbbreviated=!0}return n},Q=function(){return"_".concat(Math.random().toString(36).substr(2,9))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(e)&&(e=window.location.href);try{e=new URL(e)}catch(t){return e}for(var i=e.search.substr(1).split("&"),a=0,r=Object.entries(t);a<r.length;a++){var s=v(r[a],2),l=s[0],c=s[1];l=encodeURI(l),c=encodeURI(c);for(var u=i.length,d=void 0;u--;)if((d=i[u].split("="))[0]==l){d[1]=c,i[u]=d.join("=");break}u<0&&(i[i.length]=[l,c].join("="))}if(i=i.filter((function(e){var t=e.split("=");return!(N(e)||N(t[1]))})),e.search=i.join("&"),(n=o().extend({},{setAsURL:!1,refresh:!1},n)).setAsURL)if(n.refresh)window.location.href=e.href;else{var p=document.title;window.history.pushState({},p,e.href)}return e.href},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return N(e)&&(e=window.location.href),(e=new URL(e)).searchParams.get(t)},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");return t.innerHTML=e,t.value},ie=function(e,t){var n=0;return function(){var i=Date.now();if(n+t<i)return n=i,e.apply(undefined,f)}},oe=function(e,t){var n=-1;return function(){clearTimeout(n);var i=f;n=setTimeout((function(){e.apply(void 0,i)}),t)}},ae=function(e){var t=document.createElement("textarea");t.style.width="0px",t.style.height="0px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=o().extend(!0,{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.title,warning:"",content:UncannyAutomator.i18n.debugging.fatalErrorHandler.content,console:null,buttons:{confirm:{label:UncannyAutomator.i18n.debugging.learnMore,onClick:function(){window.open(UncannyAutomator.dev.debuggingURL,"_blank")}},cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}},e);var t,n="";try{o().each(UncannyAutomator.recipes_object,(function(e,n){n.ID==UncannyAutomator.recipe.id&&(t=n)}))}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{var i="====== ".concat(UncannyAutomator.i18n.debugging.recipeTitle," ====== \n"),a=UncannyAutomator.i18n.debugging.recipeTypeUser;"anonymous"==t.recipe_type&&(a=UncannyAutomator.i18n.debugging.recipeTypeAnonymous),i+="".concat(UncannyAutomator.i18n.debugging.recipeType,": ").concat(a);var r=UncannyAutomator.i18n.debugging.recipeStatusDraft;"publish"==t.post_status&&(r=UncannyAutomator.i18n.debugging.recipeStatusLive),n=i+="\n".concat(UncannyAutomator.i18n.debugging.recipeStatus,": ").concat(r)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{var s="=== ".concat(UncannyAutomator.i18n.debugging.recipeItemsTitle," === \n"),l=function(e){var t="publish"==e.post_status?UncannyAutomator.i18n.debugging.itemStatusLive:UncannyAutomator.i18n.debugging.itemStatusDraft;return"> ".concat(e.meta.integration," - ").concat(e.meta.code," - ").concat(t,"\n  (").concat(e.meta.sentence.replace(/\{\{|\:[a-zA-Z0-9]*\}\}/g,""),")\n  ").concat(JSON.stringify(e).replaceAll("<","&lt;").replaceAll(">","&gt;"),"\n")},c=t.triggers.map(l),u=c.length>0,d=t.actions.map(l),p=d.length>0,m=t.closures.map(l),f=m.length>0;u||p||f?(s+="".concat(UncannyAutomator.i18n.debugging.triggersTitle,"\n\n"),s+=u?c.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noTriggers),s+="\n".concat(UncannyAutomator.i18n.debugging.actionsTitle,"\n\n"),s+=p?d.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noActions),s+="\n".concat(UncannyAutomator.i18n.debugging.closuresTitle,"\n\n"),s+=f?m.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noClosures)):s+="".concat(UncannyAutomator.i18n.debugging.noRecipeItemsFound),n=""!==n?"".concat(n,"\n\n").concat(s):n}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{if(K(e.console)){UncannyAutomator.dev.developerMode&&console.log(e.console);var g="====== ".concat(UncannyAutomator.i18n.debugging.jsConsole," ====== \n");try{g+="".concat(e.console.stack.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(t){try{g+="".concat(e.console.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(t){g+=e.console}}n=""!==n?"".concat(n,"\n\n").concat(g):n}}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}var v={};K(e.buttons.cancel)&&(v.cancel=e.buttons.cancel.label),K(e.buttons.confirm)&&(v.confirm=e.buttons.confirm.label);var y=new h.Z({title:'<span class="modal__title-icon uo-icon uo-icon--exclamation-triangle"></span> '.concat(e.title),warning:"".concat(e.warning),content:"\n\t\t\t<div>\n\t\t\t\t".concat(N(e.content)?"":e.content,'\n\t\t\t\t<div class="modal__content-code">\n\t\t\t\t\t<pre id="uap-debugging">').concat(n,"</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),buttons:v},{size:"extra-large",warningFirst:!0});y.setEvents({onConfirm:function(){e.buttons.confirm.onClick(y)},onCancel:function(){e.buttons.cancel.onClick(y)},afterSetEvents:function(){var e=o()("#uap-debugging");e.on("click",(function(){var t=document.createRange();t.selectNodeContents(e[0]),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}))}})},se=function(e,t,n){var i={};return o().each(e,(function(e,o){o.meta[t]&&o.meta[t]==n&&(i[e]=o)})),i},le=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};return o().each(e,(function(e,o){t in o.meta===n&&(i[e]=o)})),i},ce=function(e){Object.assign(document.createElement("a"),{target:"_blank",href:e}).click()},ue=function(e,t){var n=t.medium,i=t.campaign,o=t.content,a={};return a.utm_source=K(UncannyAutomator.wp)&&UncannyAutomator.wp?"uncanny_automator_pro":"uncanny_automator",N(n)||(a.utm_medium=n),N(i)||(a.utm_campaign=i),N(o)||(a.utm_content=o),N(UncannyAutomator.marketing.utmR)||(a.utm_r=UncannyAutomator.marketing.utmR),ee(e,a)}},605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var i=n(311),o=n.n(i);n(686);const a=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],r={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:e=>"undefined"!=typeof console&&console.warn(e),getWeek:e=>{const t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},s={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:e=>{const t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},l=s,c=(e,t=2)=>`000${e}`.slice(-1*t),u=e=>!0===e?1:0;function d(e,t){let n;return function(){clearTimeout(n),n=setTimeout((()=>e.apply(this,arguments)),t)}}const p=e=>e instanceof Array?e:[e];function m(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function h(e,t,n){const i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function f(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function g(e,t){return t(e)?e:e.parentNode?g(e.parentNode,t):void 0}function v(e,t){const n=h("div","numInputWrapper"),i=h("input","numInput "+e),o=h("span","arrowUp"),a=h("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(const e in t)i.setAttribute(e,t[e]);return n.appendChild(i),n.appendChild(o),n.appendChild(a),n}function y(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}const _=()=>{},b=(e,t,n)=>n.months[t?"shorthand":"longhand"][e],w={D:_,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:(e,t)=>{e.setHours(parseFloat(t))},H:(e,t)=>{e.setHours(parseFloat(t))},J:(e,t)=>{e.setDate(parseFloat(t))},K:(e,t,n)=>{e.setHours(e.getHours()%12+12*u(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:(e,t)=>{e.setSeconds(parseFloat(t))},U:(e,t)=>new Date(1e3*parseFloat(t)),W:function(e,t,n){const i=parseInt(t),o=new Date(e.getFullYear(),0,2+7*(i-1),0,0,0,0);return o.setDate(o.getDate()-o.getDay()+n.firstDayOfWeek),o},Y:(e,t)=>{e.setFullYear(parseFloat(t))},Z:(e,t)=>new Date(t),d:(e,t)=>{e.setDate(parseFloat(t))},h:(e,t)=>{e.setHours(parseFloat(t))},i:(e,t)=>{e.setMinutes(parseFloat(t))},j:(e,t)=>{e.setDate(parseFloat(t))},l:_,m:(e,t)=>{e.setMonth(parseFloat(t)-1)},n:(e,t)=>{e.setMonth(parseFloat(t)-1)},s:(e,t)=>{e.setSeconds(parseFloat(t))},u:(e,t)=>new Date(parseFloat(t)),w:_,y:(e,t)=>{e.setFullYear(2e3+parseFloat(t))}},A={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},k={Z:e=>e.toISOString(),D:function(e,t,n){return t.weekdays.shorthand[k.w(e,t,n)]},F:function(e,t,n){return b(k.n(e,t,n)-1,!1,t)},G:function(e,t,n){return c(k.h(e,t,n))},H:e=>c(e.getHours()),J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:(e,t)=>t.amPM[u(e.getHours()>11)],M:function(e,t){return b(e.getMonth(),!0,t)},S:e=>c(e.getSeconds()),U:e=>e.getTime()/1e3,W:function(e,t,n){return n.getWeek(e)},Y:e=>c(e.getFullYear(),4),d:e=>c(e.getDate()),h:e=>e.getHours()%12?e.getHours()%12:12,i:e=>c(e.getMinutes()),j:e=>e.getDate(),l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:e=>c(e.getMonth()+1),n:e=>e.getMonth()+1,s:e=>e.getSeconds(),u:e=>e.getTime(),w:e=>e.getDay(),y:e=>String(e.getFullYear()).substring(2)},C=({config:e=r,l10n:t=s,isMobile:n=!1})=>(i,o,a)=>{const r=a||t;return void 0===e.formatDate||n?o.split("").map(((t,n,o)=>k[t]&&"\\"!==o[n-1]?k[t](i,r,e):"\\"!==t?t:"")).join(""):e.formatDate(i,o,r)},U=({config:e=r,l10n:t=s})=>(n,i,o,a)=>{if(0!==n&&!n)return;const s=a||t;let l;const c=n;if(n instanceof Date)l=new Date(n.getTime());else if("string"!=typeof n&&void 0!==n.toFixed)l=new Date(n);else if("string"==typeof n){const t=i||(e||r).dateFormat,a=String(n).trim();if("today"===a)l=new Date,o=!0;else if(/Z$/.test(a)||/GMT$/.test(a))l=new Date(n);else if(e&&e.parseDate)l=e.parseDate(n,t);else{l=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);let i,o=[];for(let e=0,a=0,r="";e<t.length;e++){const c=t[e],u="\\"===c,d="\\"===t[e-1]||u;if(A[c]&&!d){r+=A[c];const e=new RegExp(r).exec(n);e&&(i=!0)&&o["Y"!==c?"push":"unshift"]({fn:w[c],val:e[++a]})}else u||(r+=".");o.forEach((({fn:e,val:t})=>l=e(l,t,s)||l))}l=i?l:void 0}}if(l instanceof Date&&!isNaN(l.getTime()))return!0===o&&l.setHours(0,0,0,0),l;e.errorHandler(new Error(`Invalid date provided: ${c}`))};function T(e,t,n=!0){return!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function x(e){let t=e.defaultHour,n=e.defaultMinute,i=e.defaultSeconds;if(void 0!==e.minDate){const o=e.minDate.getHours(),a=e.minDate.getMinutes(),r=e.minDate.getSeconds();t<o&&(t=o),t===o&&n<a&&(n=a),t===o&&n===a&&i<r&&(i=e.minDate.getSeconds())}if(void 0!==e.maxDate){const o=e.maxDate.getHours(),a=e.maxDate.getMinutes();t=Math.min(t,o),t===o&&(n=Math.min(a,n)),t===o&&n===a&&(i=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:i}}function E(e,t){const n={config:Object.assign(Object.assign({},r),M.defaultConfig),l10n:l};function i(e){return e.bind(n)}function o(){const e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){const t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function s(e){if(0===n.selectedDates.length){const e=void 0===n.config.minDate||T(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),t=x(n.config);e.setHours(t.hours,t.minutes,t.seconds,e.getMilliseconds()),n.selectedDates=[e],n.latestSelectedDateObj=e}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();const t="keydown"===e.type,i=y(e),o=i;void 0!==n.amPM&&i===n.amPM&&(n.amPM.textContent=n.l10n.amPM[u(n.amPM.textContent===n.l10n.amPM[0])]);const a=parseFloat(o.getAttribute("min")),r=parseFloat(o.getAttribute("max")),s=parseFloat(o.getAttribute("step")),l=parseInt(o.value,10);let d=l+s*(e.delta||(t?38===e.which?1:-1:0));if(void 0!==o.value&&2===o.value.length){const e=o===n.hourElement,t=o===n.minuteElement;d<a?(d=r+d+u(!e)+(u(e)&&u(!n.amPM)),t&&$(void 0,-1,n.hourElement)):d>r&&(d=o===n.hourElement?d-r-u(!n.amPM):a,t&&$(void 0,1,n.hourElement)),n.amPM&&e&&(1===s?d+l===23:Math.abs(d-l)>s)&&(n.amPM.textContent=n.l10n.amPM[u(n.amPM.textContent===n.l10n.amPM[0])]),o.value=c(d)}}(e);const t=n._input.value;_(),ve(),n._input.value!==t&&n._debouncedChange()}function _(){if(void 0===n.hourElement||void 0===n.minuteElement)return;let e=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(n.minuteElement.value,10)||0)%60,i=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;var o,a;void 0!==n.amPM&&(o=e,a=n.amPM.textContent,e=o%12+12*u(a===n.l10n.amPM[1]));const r=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===T(n.latestSelectedDateObj,n.config.minDate,!0);if(void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===T(n.latestSelectedDateObj,n.config.maxDate,!0)){const o=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;e=Math.min(e,o.getHours()),e===o.getHours()&&(t=Math.min(t,o.getMinutes())),t===o.getMinutes()&&(i=Math.min(i,o.getSeconds()))}if(r){const o=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;e=Math.max(e,o.getHours()),e===o.getHours()&&t<o.getMinutes()&&(t=o.getMinutes()),t===o.getMinutes()&&(i=Math.max(i,o.getSeconds()))}k(e,t,i)}function w(e){const t=e||n.latestSelectedDateObj;t&&k(t.getHours(),t.getMinutes(),t.getSeconds())}function k(e,t,i){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,i||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=c(n.config.time_24hr?e:(12+e)%12+12*u(e%12==0)),n.minuteElement.value=c(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[u(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=c(i)))}function E(e){const t=y(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&z(n)}function D(e,t,i,o){return t instanceof Array?t.forEach((t=>D(e,t,i,o))):e instanceof Array?e.forEach((e=>D(e,t,i,o))):(e.addEventListener(t,i,o),void n._handlers.push({remove:()=>e.removeEventListener(t,i)}))}function S(){pe("onChange")}function O(e,t){const i=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),o=n.currentYear,a=n.currentMonth;try{void 0!==i&&(n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth())}catch(e){e.message="Invalid date supplied: "+i,n.config.errorHandler(e)}t&&n.currentYear!==o&&(pe("onYearChange"),K()),!t||n.currentYear===o&&n.currentMonth===a||pe("onMonthChange"),n.redraw()}function I(e){const t=y(e);~t.className.indexOf("arrow")&&$(e,t.classList.contains("arrowUp")?1:-1)}function $(e,t,n){const i=e&&y(e),o=n||i&&i.parentNode&&i.parentNode.firstChild,a=me("increment");a.delta=t,o&&o.dispatchEvent(a)}function L(e,t,i,o){const a=G(t,!0),r=h("span","flatpickr-day "+e,t.getDate().toString());return r.dateObj=t,r.$i=o,r.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===T(t,n.now)&&(n.todayDateElem=r,r.classList.add("today"),r.setAttribute("aria-current","date")),a?(r.tabIndex=-1,he(t)&&(r.classList.add("selected"),n.selectedDateElem=r,"range"===n.config.mode&&(m(r,"startRange",n.selectedDates[0]&&0===T(t,n.selectedDates[0],!0)),m(r,"endRange",n.selectedDates[1]&&0===T(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&r.classList.add("inRange")))):r.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&T(e,n.selectedDates[0])>=0&&T(e,n.selectedDates[1])<=0}(t)&&!he(t)&&r.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&i%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),pe("onDayCreate",r),r}function R(e){e.focus(),"range"===n.config.mode&&ee(e)}function P(e){const t=e>0?0:n.config.showMonths-1,i=e>0?n.config.showMonths:-1;for(let o=t;o!=i;o+=e){const t=n.daysContainer.children[o],i=e>0?0:t.children.length-1,a=e>0?t.children.length:-1;for(let n=i;n!=a;n+=e){const e=t.children[n];if(-1===e.className.indexOf("hidden")&&G(e.dateObj))return e}}}function F(e,t){const i=J(document.activeElement||document.body),o=void 0!==e?e:i?document.activeElement:void 0!==n.selectedDateElem&&J(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&J(n.todayDateElem)?n.todayDateElem:P(t>0?1:-1);void 0===o?n._input.focus():i?function(e,t){const i=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,o=t>0?n.config.showMonths:-1,a=t>0?1:-1;for(let r=i-n.currentMonth;r!=o;r+=a){const o=n.daysContainer.children[r],s=i-n.currentMonth===r?e.$i+t:t<0?o.children.length-1:0,l=o.children.length;for(let n=s;n>=0&&n<l&&n!=(t>0?l:-1);n+=a){const i=o.children[n];if(-1===i.className.indexOf("hidden")&&G(i.dateObj)&&Math.abs(e.$i-n)>=Math.abs(t))return R(i)}}n.changeMonth(a),F(P(a),0)}(o,t):R(o)}function V(e,t){const i=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,o=n.utils.getDaysInMonth((t-1+12)%12,e),a=n.utils.getDaysInMonth(t,e),r=window.document.createDocumentFragment(),s=n.config.showMonths>1,l=s?"prevMonthDay hidden":"prevMonthDay",c=s?"nextMonthDay hidden":"nextMonthDay";let u=o+1-i,d=0;for(;u<=o;u++,d++)r.appendChild(L(l,new Date(e,t-1,u),u,d));for(u=1;u<=a;u++,d++)r.appendChild(L("",new Date(e,t,u),u,d));for(let o=a+1;o<=42-i&&(1===n.config.showMonths||d%7!=0);o++,d++)r.appendChild(L(c,new Date(e,t+1,o%a),o,d));const p=h("div","dayContainer");return p.appendChild(r),p}function j(){if(void 0===n.daysContainer)return;f(n.daysContainer),n.weekNumbers&&f(n.weekNumbers);const e=document.createDocumentFragment();for(let t=0;t<n.config.showMonths;t++){const i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),e.appendChild(V(i.getFullYear(),i.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&ee()}function K(){if(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)return;const e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(let t=0;t<12;t++){if(!e(t))continue;const i=h("option","flatpickr-monthDropdown-month");i.value=new Date(n.currentYear,t).getMonth().toString(),i.textContent=b(t,n.config.shorthandCurrentMonth,n.l10n),i.tabIndex=-1,n.currentMonth===t&&(i.selected=!0),n.monthsDropdownContainer.appendChild(i)}}function N(){const e=h("div","flatpickr-month"),t=window.document.createDocumentFragment();let i;n.config.showMonths>1||"static"===n.config.monthSelectorType?i=h("span","cur-month"):(n.monthsDropdownContainer=h("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),D(n.monthsDropdownContainer,"change",(e=>{const t=y(e),i=parseInt(t.value,10);n.changeMonth(i-n.currentMonth),pe("onMonthChange")})),K(),i=n.monthsDropdownContainer);const o=v("cur-year",{tabindex:"-1"}),a=o.getElementsByTagName("input")[0];a.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&a.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(a.setAttribute("max",n.config.maxDate.getFullYear().toString()),a.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());const r=h("div","flatpickr-current-month");return r.appendChild(i),r.appendChild(o),t.appendChild(r),e.appendChild(t),{container:e,yearElement:a,monthElement:i}}function q(){f(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(let e=n.config.showMonths;e--;){const e=N();n.yearElements.push(e.yearElement),n.monthElements.push(e.monthElement),n.monthNav.appendChild(e.container)}n.monthNav.appendChild(n.nextMonthNav)}function H(){n.weekdayContainer?f(n.weekdayContainer):n.weekdayContainer=h("div","flatpickr-weekdays");for(let e=n.config.showMonths;e--;){const e=h("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(e)}return B(),n.weekdayContainer}function B(){if(!n.weekdayContainer)return;const e=n.l10n.firstDayOfWeek;let t=[...n.l10n.weekdays.shorthand];e>0&&e<t.length&&(t=[...t.splice(e,t.length),...t.splice(0,e)]);for(let e=n.config.showMonths;e--;)n.weekdayContainer.children[e].innerHTML=`\n      <span class='flatpickr-weekday'>\n        ${t.join("</span><span class='flatpickr-weekday'>")}\n      </span>\n      `}function W(e,t=!0){const i=t?e:e-n.currentMonth;i<0&&!0===n._hidePrevMonthArrow||i>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=i,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,pe("onYearChange"),K()),j(),pe("onMonthChange"),fe())}function Z(e){return!(!n.config.appendTo||!n.config.appendTo.contains(e))||n.calendarContainer.contains(e)}function Y(e){if(n.isOpen&&!n.config.inline){const t=y(e),i=Z(t),o=t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)),a="blur"===e.type?o&&e.relatedTarget&&!Z(e.relatedTarget):!o&&!i&&!Z(e.relatedTarget),r=!n.config.ignoredFocusElements.some((e=>e.contains(t)));a&&r&&(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&s(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&(n.clear(!1),n.redraw()))}}function z(e){if(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())return;const t=e,i=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),i&&(n.redraw(),pe("onYearChange"),K())}function G(e,t=!0){var i;const o=n.parseDate(e,void 0,t);if(n.config.minDate&&o&&T(o,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&o&&T(o,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===o)return!1;const a=!!n.config.enable,r=null!==(i=n.config.enable)&&void 0!==i?i:n.config.disable;for(let e,t=0;t<r.length;t++){if(e=r[t],"function"==typeof e&&e(o))return a;if(e instanceof Date&&void 0!==o&&e.getTime()===o.getTime())return a;if("string"==typeof e){const t=n.parseDate(e,void 0,!0);return t&&t.getTime()===o.getTime()?a:!a}if("object"==typeof e&&void 0!==o&&e.from&&e.to&&o.getTime()>=e.from.getTime()&&o.getTime()<=e.to.getTime())return a}return!a}function J(e){return void 0!==n.daysContainer&&-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e)}function X(e){e.target!==n._input||!(n.selectedDates.length>0||n._input.value.length>0)||e.relatedTarget&&Z(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function Q(t){const i=y(t),o=n.config.wrap?e.contains(i):i===n._input,a=n.config.allowInput,r=n.isOpen&&(!a||!o),l=n.config.inline&&o&&!a;if(13===t.keyCode&&o){if(a)return n.setDate(n._input.value,!0,i===n.altInput?n.config.altFormat:n.config.dateFormat),i.blur();n.open()}else if(Z(i)||r||l){const e=!!n.timeContainer&&n.timeContainer.contains(i);switch(t.keyCode){case 13:e?(t.preventDefault(),s(),se()):le(t);break;case 27:t.preventDefault(),se();break;case 8:case 46:o&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(e||o)n.hourElement&&n.hourElement.focus();else if(t.preventDefault(),void 0!==n.daysContainer&&(!1===a||document.activeElement&&J(document.activeElement))){const e=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),W(e),F(P(1),0)):F(void 0,e)}break;case 38:case 40:t.preventDefault();const r=40===t.keyCode?1:-1;n.daysContainer&&void 0!==i.$i||i===n.input||i===n.altInput?t.ctrlKey?(t.stopPropagation(),z(n.currentYear-r),F(P(1),0)):e||F(void 0,7*r):i===n.currentYearElement?z(n.currentYear-r):n.config.enableTime&&(!e&&n.hourElement&&n.hourElement.focus(),s(t),n._debouncedChange());break;case 9:if(e){const e=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((e=>e)),o=e.indexOf(i);if(-1!==o){const i=e[o+(t.shiftKey?-1:1)];t.preventDefault(),(i||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(i)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&i===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],_(),ve();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],_(),ve()}(o||Z(i))&&pe("onKeyDown",t)}function ee(e){if(1!==n.selectedDates.length||e&&(!e.classList.contains("flatpickr-day")||e.classList.contains("flatpickr-disabled")))return;const t=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),i=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),o=Math.min(t,n.selectedDates[0].getTime()),a=Math.max(t,n.selectedDates[0].getTime());let r=!1,s=0,l=0;for(let e=o;e<a;e+=864e5)G(new Date(e),!0)||(r=r||e>o&&e<a,e<i&&(!s||e>s)?s=e:e>i&&(!l||e<l)&&(l=e));for(let o=0;o<n.config.showMonths;o++){const a=n.daysContainer.children[o];for(let o=0,p=a.children.length;o<p;o++){const p=a.children[o],m=p.dateObj.getTime(),h=s>0&&m<s||l>0&&m>l;h?(p.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((e=>{p.classList.remove(e)}))):r&&!h||(["startRange","inRange","endRange","notAllowed"].forEach((e=>{p.classList.remove(e)})),void 0!==e&&(e.classList.add(t<=n.selectedDates[0].getTime()?"startRange":"endRange"),i<t&&m===i?p.classList.add("startRange"):i>t&&m===i&&p.classList.add("endRange"),m>=s&&(0===l||m<=l)&&(u=i,d=t,(c=m)>Math.min(u,d)&&c<Math.max(u,d))&&p.classList.add("inRange")))}}var c,u,d}function te(){!n.isOpen||n.config.static||n.config.inline||ae()}function ne(e){return t=>{const i=n.config[`_${e}Date`]=n.parseDate(t,n.config.dateFormat),o=n.config[`_${"min"===e?"max":"min"}Date`];void 0!==i&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((e=>G(e))),n.selectedDates.length||"min"!==e||w(i),ve()),n.daysContainer&&(re(),void 0!==i?n.currentYearElement[e]=i.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!o&&void 0!==i&&o.getFullYear()===i.getFullYear())}}function ie(){return n.config.wrap?e.querySelector("[data-input]"):e}function oe(){"object"!=typeof n.config.locale&&void 0===M.l10ns[n.config.locale]&&n.config.errorHandler(new Error(`flatpickr: invalid locale ${n.config.locale}`)),n.l10n=Object.assign(Object.assign({},M.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?M.l10ns[n.config.locale]:void 0),A.K=`(${n.l10n.amPM[0]}|${n.l10n.amPM[1]}|${n.l10n.amPM[0].toLowerCase()}|${n.l10n.amPM[1].toLowerCase()})`,void 0===Object.assign(Object.assign({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===M.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=C(n),n.parseDate=U({config:n.config,l10n:n.l10n})}function ae(e){if("function"==typeof n.config.position)return void n.config.position(n,e);if(void 0===n.calendarContainer)return;pe("onPreCalendarPosition");const t=e||n._positionElement,i=Array.prototype.reduce.call(n.calendarContainer.children,((e,t)=>e+t.offsetHeight),0),o=n.calendarContainer.offsetWidth,a=n.config.position.split(" "),r=a[0],s=a.length>1?a[1]:null,l=t.getBoundingClientRect(),c=window.innerHeight-l.bottom,u="above"===r||"below"!==r&&c<i&&l.top>i,d=window.pageYOffset+l.top+(u?-i-2:t.offsetHeight+2);if(m(n.calendarContainer,"arrowTop",!u),m(n.calendarContainer,"arrowBottom",u),n.config.inline)return;let p=window.pageXOffset+l.left,h=!1,f=!1;"center"===s?(p-=(o-l.width)/2,h=!0):"right"===s&&(p-=o-l.width,f=!0),m(n.calendarContainer,"arrowLeft",!h&&!f),m(n.calendarContainer,"arrowCenter",h),m(n.calendarContainer,"arrowRight",f);const g=window.document.body.offsetWidth-(window.pageXOffset+l.right),v=p+o>window.document.body.offsetWidth,y=g+o>window.document.body.offsetWidth;if(m(n.calendarContainer,"rightMost",v),!n.config.static)if(n.calendarContainer.style.top=`${d}px`,v)if(y){const e=function(){let e=null;for(let t=0;t<document.styleSheets.length;t++){const n=document.styleSheets[t];try{n.cssRules}catch(e){continue}e=n;break}return null!=e?e:function(){const e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===e)return;const t=window.document.body.offsetWidth,i=Math.max(0,t/2-o/2),a=".flatpickr-calendar.centerMost:before",r=".flatpickr-calendar.centerMost:after",s=e.cssRules.length,c=`{left:${l.left}px;right:auto;}`;m(n.calendarContainer,"rightMost",!1),m(n.calendarContainer,"centerMost",!0),e.insertRule(`${a},${r}${c}`,s),n.calendarContainer.style.left=`${i}px`,n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=`${g}px`;else n.calendarContainer.style.left=`${p}px`,n.calendarContainer.style.right="auto"}function re(){n.config.noCalendar||n.isMobile||(K(),fe(),j())}function se(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function le(e){e.preventDefault(),e.stopPropagation();const t=g(y(e),(e=>e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")));if(void 0===t)return;const i=t,o=n.latestSelectedDateObj=new Date(i.dateObj.getTime()),a=(o.getMonth()<n.currentMonth||o.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=i,"single"===n.config.mode)n.selectedDates=[o];else if("multiple"===n.config.mode){const e=he(o);e?n.selectedDates.splice(parseInt(e),1):n.selectedDates.push(o)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=o,n.selectedDates.push(o),0!==T(o,n.selectedDates[0],!0)&&n.selectedDates.sort(((e,t)=>e.getTime()-t.getTime())));if(_(),a){const e=n.currentYear!==o.getFullYear();n.currentYear=o.getFullYear(),n.currentMonth=o.getMonth(),e&&(pe("onYearChange"),K()),pe("onMonthChange")}if(fe(),j(),ve(),a||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():R(i),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){const e="single"===n.config.mode&&!n.config.enableTime,t="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(e||t)&&se()}S()}n.parseDate=U({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=D,n._setHoursFromDate=w,n._positionCalendar=ae,n.changeMonth=W,n.changeYear=z,n.clear=function(e=!0,t=!0){if(n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){const{hours:e,minutes:t,seconds:i}=x(n.config);k(e,t,i)}n.redraw(),e&&pe("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),pe("onClose")},n._createElement=h,n.destroy=function(){void 0!==n.config&&pe("onDestroy");for(let e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){const e=n.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((e=>{try{delete n[e]}catch(e){}}))},n.isEnabled=G,n.jumpToDate=O,n.open=function(e,t=n._positionElement){if(!0===n.isMobile){if(e){e.preventDefault();const t=y(e);t&&t.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void pe("onOpen")}if(n._input.disabled||n.config.inline)return;const i=n.isOpen;n.isOpen=!0,i||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),pe("onOpen"),ae(t)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((()=>n.hourElement.select()),50))},n.redraw=re,n.set=function(e,t){if(null!==e&&"object"==typeof e){Object.assign(n.config,e);for(const t in e)void 0!==ce[t]&&ce[t].forEach((e=>e()))}else n.config[e]=t,void 0!==ce[e]?ce[e].forEach((e=>e())):a.indexOf(e)>-1&&(n.config[e]=p(t));n.redraw(),ve(!0)},n.setDate=function(e,t=!1,i=n.config.dateFormat){if(0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);ue(e,i),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),O(void 0,t),w(),0===n.selectedDates.length&&n.clear(!1),ve(t),t&&pe("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};const ce={locale:[oe,B],showMonths:[q,o,H],minDate:[O],maxDate:[O],clickOpens:[()=>{!0===n.config.clickOpens?(D(n._input,"focus",n.open),D(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function ue(e,t){let i=[];if(e instanceof Array)i=e.map((e=>n.parseDate(e,t)));else if(e instanceof Date||"number"==typeof e)i=[n.parseDate(e,t)];else if("string"==typeof e)switch(n.config.mode){case"single":case"time":i=[n.parseDate(e,t)];break;case"multiple":i=e.split(n.config.conjunction).map((e=>n.parseDate(e,t)));break;case"range":i=e.split(n.l10n.rangeSeparator).map((e=>n.parseDate(e,t)))}else n.config.errorHandler(new Error(`Invalid date supplied: ${JSON.stringify(e)}`));n.selectedDates=n.config.allowInvalidPreload?i:i.filter((e=>e instanceof Date&&G(e,!1))),"range"===n.config.mode&&n.selectedDates.sort(((e,t)=>e.getTime()-t.getTime()))}function de(e){return e.slice().map((e=>"string"==typeof e||"number"==typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e)).filter((e=>e))}function pe(e,t){if(void 0===n.config)return;const i=n.config[e];if(void 0!==i&&i.length>0)for(let e=0;i[e]&&e<i.length;e++)i[e](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(me("change")),n.input.dispatchEvent(me("input")))}function me(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function he(e){for(let t=0;t<n.selectedDates.length;t++)if(0===T(n.selectedDates[t],e))return""+t;return!1}function fe(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(((e,t)=>{const i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=b(i.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=i.getMonth().toString(),e.value=i.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function ge(e){return n.selectedDates.map((t=>n.formatDate(t,e))).filter(((e,t,i)=>"range"!==n.config.mode||n.config.enableTime||i.indexOf(e)===t)).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function ve(e=!0){void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=ge(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=ge(n.config.altFormat)),!1!==e&&pe("onValueUpdate")}function ye(e){const t=y(e),i=n.prevMonthNav.contains(t),o=n.nextMonthNav.contains(t);i||o?W(i?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){const o=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e.dataset||{}))),t),l={};n.config.parseDate=s.parseDate,n.config.formatDate=s.formatDate,Object.defineProperty(n.config,"enable",{get:()=>n.config._enable,set:e=>{n.config._enable=de(e)}}),Object.defineProperty(n.config,"disable",{get:()=>n.config._disable,set:e=>{n.config._disable=de(e)}});const c="time"===s.mode;if(!s.dateFormat&&(s.enableTime||c)){const e=M.defaultConfig.dateFormat||r.dateFormat;l.dateFormat=s.noCalendar||c?"H:i"+(s.enableSeconds?":S":""):e+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||c)&&!s.altFormat){const e=M.defaultConfig.altFormat||r.altFormat;l.altFormat=s.noCalendar||c?"h:i"+(s.enableSeconds?":S K":" K"):e+` h:i${s.enableSeconds?":S":""} K`}Object.defineProperty(n.config,"minDate",{get:()=>n.config._minDate,set:ne("min")}),Object.defineProperty(n.config,"maxDate",{get:()=>n.config._maxDate,set:ne("max")});const u=e=>t=>{n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")};Object.defineProperty(n.config,"minTime",{get:()=>n.config._minTime,set:u("min")}),Object.defineProperty(n.config,"maxTime",{get:()=>n.config._maxTime,set:u("max")}),"time"===s.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,l,s);for(let e=0;e<o.length;e++)n.config[o[e]]=!0===n.config[o[e]]||"true"===n.config[o[e]];a.filter((e=>void 0!==n.config[e])).forEach((e=>{n.config[e]=p(n.config[e]||[]).map(i)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let e=0;e<n.config.plugins.length;e++){const t=n.config.plugins[e](n)||{};for(const e in t)a.indexOf(e)>-1?n.config[e]=p(t[e]).map(i).concat(n.config[e]):void 0===s[e]&&(n.config[e]=t[e])}s.altInputClass||(n.config.altInputClass=ie().className+" "+n.config.altInputClass),pe("onParseConfig")}(),oe(),n.input=ie(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=h(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),n._positionElement=n.config.positionElement||n._input):n.config.errorHandler(new Error("Invalid input element specified")),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;const e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&ue(e,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:(e=n.currentMonth,t=n.currentYear)=>1===e&&(t%4==0&&t%100!=0||t%400==0)?29:n.l10n.daysInMonth[e]},n.isMobile||function(){const e=window.document.createDocumentFragment();if(n.calendarContainer=h("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=h("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=h("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=h("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,q(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:()=>n.__hidePrevMonthArrow,set(e){n.__hidePrevMonthArrow!==e&&(m(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:()=>n.__hideNextMonthArrow,set(e){n.__hideNextMonthArrow!==e&&(m(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],fe(),n.monthNav)),n.innerContainer=h("div","flatpickr-innerContainer"),n.config.weekNumbers){const{weekWrapper:e,weekNumbers:t}=function(){n.calendarContainer.classList.add("hasWeeks");const e=h("div","flatpickr-weekwrapper");e.appendChild(h("span","flatpickr-weekday",n.l10n.weekAbbreviation));const t=h("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}();n.innerContainer.appendChild(e),n.weekNumbers=t,n.weekWrapper=e}n.rContainer=h("div","flatpickr-rContainer"),n.rContainer.appendChild(H()),n.daysContainer||(n.daysContainer=h("div","flatpickr-days"),n.daysContainer.tabIndex=-1),j(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");const e=x(n.config);n.timeContainer=h("div","flatpickr-time"),n.timeContainer.tabIndex=-1;const t=h("span","flatpickr-time-separator",":"),i=v("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=i.getElementsByTagName("input")[0];const o=v("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=o.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=c(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),n.minuteElement.value=c(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(i),n.timeContainer.appendChild(t),n.timeContainer.appendChild(o),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");const t=v("flatpickr-second");n.secondElement=t.getElementsByTagName("input")[0],n.secondElement.value=c(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(h("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(t)}return n.config.time_24hr||(n.amPM=h("span","flatpickr-am-pm",n.l10n.amPM[u((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}()),m(n.calendarContainer,"rangeMode","range"===n.config.mode),m(n.calendarContainer,"animate",!0===n.config.animate),m(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);const t=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!t&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){const e=h("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(e,n.element),e.appendChild(n.element),n.altInput&&e.appendChild(n.altInput),e.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((e=>{Array.prototype.forEach.call(n.element.querySelectorAll(`[data-${e}]`),(t=>D(t,"click",n[e])))})),n.isMobile)return void function(){const e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=h("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(e){}D(n.mobileInput,"change",(e=>{n.setDate(y(e).value,!1,n.mobileFormatStr),pe("onChange"),pe("onClose")}))}();const e=d(te,50);if(n._debouncedChange=d(S,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&D(n.daysContainer,"mouseover",(e=>{"range"===n.config.mode&&ee(y(e))})),D(window.document.body,"keydown",Q),n.config.inline||n.config.static||D(window,"resize",e),void 0!==window.ontouchstart?D(window.document,"touchstart",Y):D(window.document,"mousedown",Y),D(window.document,"focus",Y,{capture:!0}),!0===n.config.clickOpens&&(D(n._input,"focus",n.open),D(n._input,"click",n.open)),void 0!==n.daysContainer&&(D(n.monthNav,"click",ye),D(n.monthNav,["keyup","increment"],E),D(n.daysContainer,"click",le)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){const e=e=>y(e).select();D(n.timeContainer,["increment"],s),D(n.timeContainer,"blur",s,{capture:!0}),D(n.timeContainer,"click",I),D([n.hourElement,n.minuteElement],["focus","click"],e),void 0!==n.secondElement&&D(n.secondElement,"focus",(()=>n.secondElement&&n.secondElement.select())),void 0!==n.amPM&&D(n.amPM,"click",(e=>{s(e),S()}))}n.config.allowInput&&D(n._input,"blur",X)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&w(n.config.noCalendar?n.latestSelectedDateObj:void 0),ve(!1)),o();const l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&l&&ae(),pe("onReady")}(),n}function D(e,t){const n=Array.prototype.slice.call(e).filter((e=>e instanceof HTMLElement)),i=[];for(let e=0;e<n.length;e++){const o=n[e];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=E(o,t||{}),i.push(o._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}n(895),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return D(this,e)},HTMLElement.prototype.flatpickr=function(e){return D([this],e)});var M=function(e,t){return"string"==typeof e?D(window.document.querySelectorAll(e),t):e instanceof Node?D([e],t):D(e,t)};M.defaultConfig={},M.l10ns={en:Object.assign({},l),default:Object.assign({},l)},M.localize=e=>{M.l10ns.default=Object.assign(Object.assign({},M.l10ns.default),e)},M.setDefaults=e=>{M.defaultConfig=Object.assign(Object.assign({},M.defaultConfig),e)},M.parseDate=U({}),M.formatDate=C({}),M.compareDates=T,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return D(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=M);var S=n(756),O=n(454),I=n(463),$=n(772);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var B=n(975).vsprintf,W=function e(t){if(H(this,e),t.attributes.supportsTokens)return"textarea"==t.type?new Y(t):new Z(t)},Z=function(e){F(n,e);var t=j(n);function n(e){var i;return H(this,n),(i=t.call(this,e.attributes.itemType,e.type)).Field=e,i.Field.TokenSelector=N(i),i.render(),i.setData(),i.Field.getField().on("ua-codemirror-ready",(function(){i.getCodeMirrorEditor(),i.editor.setValue(i.editor.getValue()),i.renderTokens(),i.handleAddTokens(),i.renderTokensInRealTime()})),i}return P(n,[{key:"render",value:function(){this.RenderTokenSelector=new z(this.Field,this.tokens)}},{key:"setData",value:function(){this.data={tokenRenderingDebounce:200}}},{key:"getCodeMirrorEditor",value:function(){this.editor=this.Field.fieldCM}},{key:"handleAddTokens",value:function(){var e=this;this.Field.field.off("ua-add-token").on("ua-add-token",(function(t,n){["date","time"].includes(e.Field.attributes.fieldType)&&e.editor.setValue(""),e.insertTextAtCursor("{{".concat(n.id,"}}")),e.renderTokens({ignoreRequiresUserModal:!0}),["date","time"].includes(e.Field.attributes.fieldType)||e.editor.focus(),["date","time"].includes(e.Field.attributes.fieldType)&&e.Field.setValue("{{".concat(n.id,"}}"))}))}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}},{key:"insertTextAtCursor",value:function(e){this.editor.doc.replaceRange(e,this.editor.doc.getCursor())}},{key:"renderTokensInRealTime",value:function(){var e=this;this.editor.on("changes",(0,S.Ds)((function(t){e.renderTokens()}),this.data.tokenRenderingDebounce))}},{key:"renderTokens",value:function(e){var t=this;e=Object.assign({ignoreRequiresUserModal:!1},e);for(var n=this.editor.getSearchCursor(/\{\{(.*?)\}\}/),i=function(){var i={from:n.from(),to:n.to()},o=t.editor.getRange(i.from,i.to).replace("{{","").replace("}}",""),a=t.createTokenDOMNode(o),r=t.editor.markText(i.from,i.to,{replacedWith:a});if("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(t.tokensThatRequireUser.includes(o)||o.startsWith("USERMETA:"))&&!e.ignoreRequiresUserModal)return t.tokenNeedsUserModal(a,{removeToken:function(){var e=r.find();r.clear(),t.editor.replaceRange("",e.from,e.to)}}),"break";t.Field.attributes.isReadOnly||a.addEventListener("click",(function(){if(!a.classList.contains("uap-token--cm-focused")){a.classList.add("uap-token--cm-focused");var e=function(){a.classList.remove("uap-token--cm-focused"),document.removeEventListener("mouseup",n),document.removeEventListener("copy",i),document.removeEventListener("keydown",s),document.removeEventListener("keydown",l)},n=function(t){a===t.target||a.contains(t.target)||e()};document.addEventListener("mouseup",n);var i=function(t){e(),(0,S.vQ)("{{".concat(o,"}}"))};document.addEventListener("copy",i);var s=function(n){var i=n.keyCode||n.charCode;if(8==i||46==i){var o=r.find();r.clear(),t.editor.replaceRange("",o.from,o.to),e()}};document.addEventListener("keydown",s);var l=function(n){var i=n.keyCode||n.charCode;if(37==i||39==i){e();var o,a=r.find();37==i&&(o=a.from),39==i&&(o=a.to),t.editor.focus(),t.editor.setCursor(o)}};document.addEventListener("keydown",l)}}))};n.findNext()&&"break"!==i(););}},{key:"tokenNeedsUserModal",value:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,S.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var o=UncannyAutomator.recipe.isLive;(t=new $.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.mustRunOnUser,[e.outerHTML]),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.description,"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var e=t.getElements();e.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,S.R$)(!0,(function(e){t.destroy(),n.renderTokens()}),(function(t){e.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),o&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1),(0,S.$K)(i.allowedConfirm)&&i.allowedConfirm()},onCancel:function(){t.destroy(),(0,S.$K)(i.removeToken)&&i.removeToken(),(0,S.$K)(i.allowedCancel)&&i.allowedCancel()}})}else(t=new $.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.mustRunOnUser,[e.outerHTML]),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.description,[UncannyAutomator.i18n.uncannyAutomatorPro]),' <a href="').concat((0,S.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <span class="uo-icon uo-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.upgradeLater,' <a href="').concat((0,S.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uo-icon uo-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){t.destroy(),(0,S.YQ)((0,S.XE)("https://automatorplugin.com/pricing/",{medium:"add_token",campaign:"update_to_pro",content:"requires_user_data"})),(0,S.$K)(i.removeToken)&&i.removeToken(),(0,S.$K)(i.forbiddenConfirm)&&i.forbiddenConfirm()},onCancel:function(){t.destroy(),(0,S.$K)(i.removeToken)&&i.removeToken(),(0,S.$K)(i.forbiddenCancel)&&i.forbiddenCancel()}})}}]),n}(I.Z),Y=function(e){F(n,e);var t=j(n);function n(e){var i;return H(this,n),(i=t.call(this,e)).Field.attributes.supportsTinyMCE&&i.Field.getField().on("ua-tinymce-ready",(function(){i.getTinyMCEEditor(),i.addStylesToEditor(),setTimeout((function(){i.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),i.data.tokenRenderingDebounce),setTimeout((function(){i.parseHTMLTokensInPlainTextarea()}),i.data.tokenRenderingDebounce),i.handleAddTokens(),i.handleHTMLTokensInPlainTextarea(),i.handlePlainTokensInTinyMCE()})),i}return P(n,[{key:"setData",value:function(){this.data={tokenRenderingDebounce:200,tokenCSSClass:"uap-token-tinymce"}}},{key:"render",value:function(){this.RenderTokenSelector=new z(this.Field,this.tokens)}},{key:"insertTextAtCursor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!(0,S.$K)(this.tinyMCEeditor)||(0,S.$K)(this.tinyMCEeditor)&&this.tinyMCEeditor.hidden)this.editor.doc.replaceRange(t,this.editor.doc.getCursor());else{t=t.replace("{{","").replace("}}","");var n=this.createTokenDOMNode(t);"anonymous"!=UncannyAutomator.recipe.type||UncannyAutomator.recipe.requiresUserData||!this.tokensThatRequireUser.includes(t)&&!t.startsWith("USERMETA:")?(this.tinyMCEeditor.execCommand("mceInsertContent",!1,'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(t,'">').concat(n.outerHTML,"</span>")),this.Field.getField().trigger("change input")):this.tokenNeedsUserModal(n,{allowedConfirm:function(){e.tinyMCEeditor.execCommand("mceInsertContent",!1,'<span class="'.concat(e.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(t,'">').concat(n.outerHTML,"</span>")),e.Field.getField().trigger("change input")}})}}},{key:"getTinyMCEEditor",value:function(){this.tinyMCEeditor=this.Field.fieldTinyMCE}},{key:"addStylesToEditor",value:function(){this.tinyMCEeditor.dom.addStyle("\n\t\t\thtml body {\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\tfont-size: 15px;\n\t\t\t\tmargin-left: 12px;\n\t\t\t\tmargin-right: 12px;\n\t\t\t}\n\n\t\t\t.uap-token {\n\t\t\t\tdisplay: inline-flex;\n\t\t\t\talign-items: center;\n\t\t\t\tbackground: #eee;\n\t\t\t\tline-height: 1;\n\t\t\t\tpadding: 3px 8px;\n\t\t\t\tborder-radius: 150px;\n\n\t\t\t\tfont-size: 15px;\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\t-webkit-font-smoothing:antialiased;\n\t\t\t\t-moz-osx-font-smoothing:grayscale;\n\t\t\t}\n\n\t\t\t\t.uap-token-tinymce {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\tborder-radius: 150px;\n\t\t\t\t\tbox-shadow: 0 0 0 2px transparent;\n\t\t\t\t\ttransition: box-shadow 150ms ease-in-out;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\n\t\t\t\t.uap-token-tinymce[data-mce-selected=\"1\"] {\n\t\t\t\t\toutline: 0 !important;\n\t\t\t\t\tbox-shadow: 0 0 0 2px #0790e8;\n\t\t\t\t}\n\n\t\t\t\t.uap-token img {\n\t\t\t\t\twidth: 12px;\n\t\t\t\t\theight: 11px;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\tobject-position: center;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t.uap-token .uo-icon {\n\t\t\t\t\twidth: 14px;\n\t\t\t\t\theight: 14px;\n\t\t\t\t\tborder: 1px solid #444;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tfont-size: 9px;\n\t\t\t\t\tcolor: #444;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 15px;\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\topacity: .8;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\t\t.uap-token .uo-icon.uo-icon--bolt:before {\n\t\t\t\t\t\tcontent: '';\n\n\t\t\t\t\t\twidth: 9px;\n\t\t\t\t\t\theight: 9px;\n\n\t\t\t\t\t\tbackground-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23444' d='M377.8 167.9c-8.2-14.3-23.1-22.9-39.6-22.9h-94.4l28.7-87.5c3.7-13.8.8-28.3-7.9-39.7C255.8 6.5 242.5 0 228.2 0H97.7C74.9 0 55.4 17.1 52.9 37.1L.5 249.3c-1.9 13.8 2.2 27.7 11.3 38.2C20.9 298 34.1 304 48 304h98.1l-34.9 151.7c-3.2 13.7-.1 27.9 8.6 38.9 8.7 11.1 21.8 17.4 35.9 17.4 16.3 0 31.5-8.8 38.8-21.6l183.2-276.7c8.4-14.3 8.4-31.5.1-45.8zM160.1 457.4L206.4 256H47.5L97.7 48l127.6-.9L177.5 193H334L160.1 457.4z'%3E%3C/path%3E%3C/svg%3E\");\n\n\t\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t\tbackground-position: center;\n\t\t\t\t\t\tbackground-repeat: no-repeat;\n\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 50%;\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\ttransform: translate(-50%,-50%);\n\t\t\t\t\t}\n\n\t\t\t\t.uap-token__name {\n\t\t\t\t\tcolor: #444444;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid {\n\t\t\t\t\t\tbackground: #f9e2e2;\n\t\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid .uo-icon {\n\t\t\t\t\t\tcolor: #c00;\n\t\t\t\t\t\tborder-color: #c00;\n\t\t\t\t\t}\n\n\t\t")}},{key:"handleHTMLTokensInPlainTextarea",value:function(){var e=this;this.Field.getField().on("change input",(0,S.Ds)((function(){e.parseHTMLTokensInPlainTextarea()}),this.data.tokenRenderingDebounce)),this.Field.getField().on("ua-tinymce-activate-text-view",(function(){setTimeout((function(){e.parseHTMLTokensInPlainTextarea()}),e.data.tokenRenderingDebounce)}))}},{key:"handlePlainTokensInTinyMCE",value:function(){var e=this;this.Field.getField().on("ua-tinymce-activate-visual-view",(function(){setTimeout((function(){e.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),e.data.tokenRenderingDebounce)}))}},{key:"parsePlainTokensInTinyMCE",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({parseTokensInAttributes:!0},e);var t=this.tinyMCEeditor.getContent({format:"raw"}),n=this.renderTextWithTokens(t,{template:'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="%2$s">%1$s</span>'),parseTokensInAttributes:e.parseTokensInAttributes});t!=n&&this.tinyMCEeditor.setContent(n.innerHTML)}},{key:"parseHTMLTokensInPlainTextarea",value:function(){var e=this.Field.getField().val(),t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll(".".concat(this.data.tokenCSSClass));if(n.length>0){n.forEach((function(e){var t=e.dataset.tokenId;e.outerHTML="{{".concat(t,"}}")})),e=t.innerHTML;try{this.editor.setValue(e)}catch(t){this.Field.getField().val(e)}}}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}}]),n}(Z),z=function(){function e(t,n){H(this,e),this.Field=t,this.tokens=n,this.getData(),this.getElements(),this.createWrapper(),this.createFilter(),this.createGroupsOfTokens(),this.listenToggleButton(),this.resizeDropdownOnWindowResize(),this.resizeDropdownOnWindowScroll(),this.refreshOnFieldChange(),this.search(),this.shouldSupportFilters()&&this.setFilter(!0)}return P(e,[{key:"getData",value:function(){this.data={isOpen:!1,position:"below"}}},{key:"getElements",value:function(){this.$elements={wrapper:null,toggleButton:null,searchField:null,dropdown:null,allGroups:null,dropdownGroupsContainer:null,dropdownTokens:null,noResultsOption:null}}},{key:"createWrapper",value:function(){var e=o()('\n\t\t\t<div class="form-variable">\n\t\t\t\t<div class="form-variable__element">\n\t\t\t\t\t<div class="form-variable__render-container"></div>\n\t\t\t\t\t<div class="form-variable__toggle">\n\t\t\t\t\t\t<span class="uo-icon uo-icon--asterisk"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__dropdown">\n\t\t\t\t\t<div class="form-variable__dropdown-container">\n\t\t\t\t\t\t<div class="form-variable__search">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tclass="form-variable__search-input" \n\t\t\t\t\t\t\t\tplaceholder="'.concat(UncannyAutomator.i18n.tokens.search,'"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form-variable__groups"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t')),t=[];"textarea"==this.Field.type&&t.push(this.Field.getField()),(0,S.$K)(this.Field.getFieldCM())&&t.push(this.Field.getFieldCM()),t.forEach((function(t){e.insertAfter(t),e.find(".form-variable__render-container").append(t)})),this.$elements.wrapper=e,this.$elements.renderContainer=e.find(".form-variable__render-container"),this.$elements.searchFieldContainer=e.find(".form-variable__search"),this.$elements.searchField=e.find(".form-variable__search-input"),this.$elements.toggleButton=e.find(".form-variable__toggle"),this.$elements.dropdown=e.find(".form-variable__dropdown"),this.$elements.dropdownGroupsContainer=e.find(".form-variable__groups")}},{key:"createFilter",value:function(){var e=this;if(this.shouldSupportFilters()){var t=this.Field.attributes.fieldType,n=(0,S.$K)(UncannyAutomator.i18n.tokens.tokenType[t])?UncannyAutomator.i18n.tokens.tokenType[t]:t,i=o()('\n\t\t\t\t<div class="form-variable__filter"></div>\n\t\t\t'),a=new ee("checkbox",{optionCode:"token__enableFilter",currentValue:!0,label:'<span class="form-variable__filter-label">'+B(UncannyAutomator.i18n.tokens.filter,['<span class="form-variable__filter-type">'.concat(n,"</span>")])+"<span>"}),r=a.createFormElement();i.prepend(r),this.$elements.searchFieldContainer.append(i),this.$elements.filterContainer=i,r.on("automator:field:change",(function(){a.getValue()?e.setFilter(!0):e.setFilter(!1)}))}}},{key:"createGroupsOfTokens",value:function(){var e=this,t=this.$elements.wrapper.find(".form-variable__groups");this.tokens.forEach((function(n){t.append(e.createIndividualGroupOfTokens(n))})),this.$elements.allGroups=t.find(".form-variable__group"),this.$elements.dropdownTokens=t.find(".form-variable__group-item"),this.$elements.noResultsOption=o()('\n\t\t\t<div class="form-variable__group-item-no-results form-variable__group-item-no-results--hide">\n\t\t\t\t<div class="form-variable__group-item-no-results-title">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.tokens.noResults,'\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__group-item-no-results-description">\n\t\t\t\t\t').concat(this.shouldSupportFilters()?UncannyAutomator.i18n.tokens.noResultsDescriptionWithFilter:UncannyAutomator.i18n.tokens.noResultsDescription,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),t.append(this.$elements.noResultsOption)}},{key:"createIndividualGroupOfTokens",value:function(e){var t=this,n=o()('\n\t\t\t<div \n\t\t\t\tclass="form-variable__group"\n\t\t\t\tdata-id="'.concat(e.id,'"\n\t\t\t>\n\t\t\t\t<div class="form-variable__group-source">\n\t\t\t\t\t<div class="form-variable-group-source__icon"></div>\n\t\t\t\t\t<div class="form-variable-group-source__description"></div>\n\t\t\t\t\t<div class="form-variable-group-source__toggle">\n\t\t\t\t\t\t<span class="form-variable-group-source__toggle-icon"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span class="form-variable__group-children"></span>\n\t\t\t</div>\n\t\t')),i=e.name;"string"==!L(i)&&(i.html.clone(),function(e){throw new TypeError('"groupName" is read-only')}()),n.find(".form-variable-group-source__description").append(e.name);var a=e.icon.clone();n.find(".form-variable-group-source__icon").append(a),n.find(".form-variable__group-source").on("click",(function(){n.toggleClass("form-variable__group--open")}));var r=n.find(".form-variable__group-children");return e.tokens.forEach((function(e){var n=(0,S.xb)(e.name)?"":e.name,i=o()('\n\t\t\t\t<div \n\t\t\t\t\tclass="form-variable__group-item"\n\t\t\t\t\tdata-search="'.concat(n.trim().toLowerCase().replace(/\s/g,""),'"\n\t\t\t\t\tdata-type="').concat(e.type,'"\n\t\t\t\t>\n\t\t\t\t\t').concat(n,"\n\n\t\t\t\t\t").concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(0,S.$K)(e.requiresUser)&&e.requiresUser?'<span class="form-variable__group-item-tag">'+UncannyAutomator.i18n.needsUserData+"</span>":"","\n\t\t\t\t</div>\n\t\t\t"));"USERMETA:KEY"==e.id?i.on("click",(function(){t.close();var n=o()("<div></div>"),i=new ee("text",{optionCode:"token__metaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKey,description:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKeyDescription,isRequired:!0});n.append(i.createFormElement());var a=new $.Z({title:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.confirmButton}});a.setEvents({afterSetEvents:function(){a.show()},onConfirm:function(){var n=i.validate(),r=i.getValue();n.isValid&&((e=o().extend(!0,{},e)).id=e.id.replace("KEY",r),e.name=B(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[r]),t.Field.field.trigger("ua-add-token",e),a.destroy())},afterHide:function(){a.destroy()}})})):i.on("click",(function(){t.Field.field.trigger("ua-add-token",e),t.close()})),r.append(i)})),n}},{key:"listenToggleButton",value:function(){var e=this;this.$elements.toggleButton.on("click",(function(){e.data.isOpen?e.close():e.open()}))}},{key:"search",value:function(){var e=this;this.$elements.searchField.on("input",(0,S.P2)((function(){var t=e.$elements.searchField.val();t=t.trim().toLowerCase().replace(/\s/g,""),(0,S.xb)(t)?(e.$elements.allGroups.removeClass("form-variable__group--open"),e.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-search")):(e.$elements.allGroups.addClass("form-variable__group--open"),e.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-search"),e.$elements.dropdownTokens.filter((function(e,n){return-1!==n.dataset.search.search(t)})).removeClass("form-variable__group-item--hidden-by-search")),e.updateGroupsOfTokensVisibility()}),30))}},{key:"setFilter",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){this.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-filter");var n=this.$elements.dropdownTokens.filter((function(t,n){return("int"==n.dataset.type&&"float"==e.Field.attributes.fieldType?"float":n.dataset.type)==e.Field.attributes.fieldType}));n.removeClass("form-variable__group-item--hidden-by-filter")}else this.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-filter");this.updateGroupsOfTokensVisibility()}},{key:"updateGroupsOfTokensVisibility",value:function(){var e=!1;this.$elements.allGroups.removeClass("form-variable__group--without-available-tokens"),this.$elements.allGroups.filter((function(t,n){n.querySelectorAll(".form-variable__group-item:not(.form-variable__group-item--hidden-by-filter):not(.form-variable__group-item--hidden-by-search)").length>0?e=!0:n.classList.add("form-variable__group--without-available-tokens")})),e?this.$elements.noResultsOption.addClass("form-variable__group-item-no-results--hide"):this.$elements.noResultsOption.removeClass("form-variable__group-item-no-results--hide")}},{key:"open",value:function(){if(["date","time"].includes(this.Field.attributes.fieldType))try{this.Field.flatpickrInstance.close()}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}this.$elements.wrapper.addClass("form-variable--open"),this.data.isOpen=!0,this.closeWhenClickedOutside(),this.$elements.searchField.val("").trigger("input").css({"padding-right":"".concat(((0,S.$K)(this.$elements.filterContainer)?this.$elements.filterContainer.outerWidth():0)+12,"px")}),this.$elements.searchField.focus(),this.setDropdownDirection(),this.setDropdownHeight()}},{key:"close",value:function(){this.$elements.wrapper.removeClass("form-variable--open"),this.data.isOpen=!1,this.$elements.searchField.val("").trigger("input"),o()(document).off("mouseup.uap-token-selector-click-outside")}},{key:"destroy",value:function(){this.$elements.renderContainer.children().insertAfter(this.$elements.wrapper),this.$elements.wrapper.remove()}},{key:"closeWhenClickedOutside",value:function(){var e=this;o()(document).on("mouseup.uap-token-selector-click-outside",(function(t){var n=e.$elements.wrapper;n.is(t.target)||0!==n.has(t.target).length||e.close()}))}},{key:"getDropdownPosition",value:function(){var e=o()(window),t={};t.above=this.$elements.wrapper.offset().top-e.scrollTop(),t.below=e.height()-(t.above+this.$elements.wrapper.outerHeight()),"textarea"==this.Field.type&&(t.below=e.height()-(t.above+38)),this.$elements.dropdown.addClass("uo-realsize");var n=this.$elements.dropdown.outerHeight()+110;return this.$elements.dropdown.removeClass("uo-realsize"),"textarea"==this.Field.type?t.hasSpaceBelow=!0:t.hasSpaceBelow=t.below>=n,t}},{key:"setDropdownDirection",value:function(){var e=this.getDropdownPosition();this.$elements.wrapper.removeClass("form-variable--above form-variable--below"),e.below>e.above||e.hasSpaceBelow?(this.$elements.wrapper.addClass("form-variable--below"),this.data.position="below"):(this.$elements.wrapper.addClass("form-variable--above"),this.data.position="above")}},{key:"setDropdownHeight",value:function(){if(this.data.isOpen){var e=this.getDropdownPosition()[this.data.position]-this.$elements.searchField.outerHeight()-45;this.$elements.dropdownGroupsContainer.css({"max-height":"".concat(e,"px")})}}},{key:"focusSearchField",value:function(){this.$elements.searchField.focus()}},{key:"resizeDropdownOnWindowResize",value:function(){var e=this;o()(window).on("resize",(0,S.P2)((function(){e.setDropdownDirection(),e.setDropdownHeight()}),20))}},{key:"resizeDropdownOnWindowScroll",value:function(){var e=this;o()(window).on("scroll",(0,S.Ds)((function(){e.setDropdownDirection(),e.setDropdownHeight()}),300))}},{key:"refreshOnFieldChange",value:function(){var e=this;this.Field.formElement.on("automator:field:change",(function(){e.setDropdownDirection(),e.setDropdownHeight()}))}},{key:"shouldSupportFilters",value:function(){var e=this.Field.attributes.fieldType;return["email","int","float","url","date","time"].includes(e)}}]),e}();function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var X=n(975).vsprintf,Q=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;G(this,e),this.type=t,this.attributes=this.setAttributes(n),this.customValidationFunction=o,i&&this.createFormElement()}var t,n;return t=e,n=[{key:"createFormElement",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=null,a=this.type,r=this.attributes;if((0,S.d3)(a,(0,S.ew)())){var s=o()("<div/>",{class:"form-element"});(0,S.$K)(r.formElementClass)&&s.addClass(r.formElementClass);var l,c,u,d={name:r.optionCode,id:r.uniqueFieldID,"data-isajax":r.isAjax,"data-targetfield":r.targetField,"data-integrationid":r.integrationID,"data-endPoint":r.endPoint,"data-supportsTokens":r.supportsTokens,"data-supportsTinymce":r.supportsTinyMCE,"data-required":r.isRequired,"data-item_type":r.itemType,"data-item-id":r.itemId,"data-option-group":r.groupId,"data-is-hidden":r.isHidden,"data-is-child-field":r.isChildField};switch(a){case"select":l=o()("<div/>",{class:"form-select"}),this.fieldContainer=l,c=o()("<select/>",o().extend({},d,{"data-type":"select",class:"form-element__select","data-supports-custom-value":r.supportsCustomValue})),r.supportsMultipleValues&&c.prop("multiple","multiple"),this.field=c;var p,m,h=!1,f=0;r.hasDefaultValue&&(p=(0,S.xb)(r.defaultValue.option_value)||(0,S.xb)(r.defaultValue.option_name)?r.defaultValue:r.defaultValue.option_value);var g=o()('<optgroup\n\t\t\t\t\t\t\ttitle="form-element__select-normal-options"\n\t\t\t\t\t\t\tclass="form-element__select-normal-options">\n\t\t\t\t\t\t</optgroup>');if(r.options=r.options.filter((function(e){return"automator_custom_value"!==e.value})),o().each(r.options,(function(e,t){var n=o()("<option/>",{value:t.value,text:t.text});r.hasDefaultValue&&(0,S.A5)(p,e)&&(n.prop("selected",!0),m=!0,h=!0),r.hasValue&&(0,S.A5)(r.currentValue,t.value)&&(n.prop("selected",!0),h=!0),n.appendTo(g),f++})),g.appendTo(c),r.supportsMultipleValues){if(!(0,S.xb)(r.currentValue))try{c.val(r.currentValue)}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}(0,S.xb)(c.val())||(h=!0)}if(r.hasDefaultValue&&!m&&!(0,S.xb)(r.defaultValue.option_value)&&!(0,S.xb)(r.defaultValue.option_name)){var v=o()("<option/>",{value:r.defaultValue.option_value,text:r.defaultValue.option_name});r.hasValue||(0,S.A5)(r.defaultValue.option_value,r.currentValue)||(v.prop("selected",!0),h=!0),v.prependTo(c),f++}if(r.hasPlaceholder&&(c.prepend("<option></option>"),r.hasDefaultValue||r.hasValue||c.find("option:selected").prop("selected",!1)),r.supportsCustomValue){var y=r.customValue,_=o()('\n\t\t\t\t\t\t\t<optgroup label="'.concat(UncannyAutomator.i18n.validation.field.select.otherOptions,'">\n\t\t\t\t\t\t\t\t<option value="automator_custom_value">').concat(UncannyAutomator.i18n.validation.field.select.customValue,"</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t"));c.append(_),r.hasValue&&(0,S.A5)(r.currentValue,"automator_custom_value")&&(_.find("option").attr("selected",!0),h=!0),r.hasValue&&!h&&(_.find("option").attr("selected",!0),h=!0,y=r.currentValue),this.customValueField=new e("text",{itemId:r.itemId,itemType:r.itemType,isRequired:r.isRequired,isReadOnly:!1,supportsTinyMCE:!1,supportsCopyToClipboard:!1,supportsTokens:r.supportsTokens,isAjax:!1,fieldType:"text",optionCode:"".concat(r.optionCode,"_custom"),label:"",description:r.hasCustomValueDescription?r.customValueDescription:void 0,placeholder:"",isHidden:!1,tokenName:X(UncannyAutomator.i18n.validation.field.select.customValueToken,[r.label]),defaultValue:null,currentValue:y,isChildField:!0,parentOptionCode:r.optionCode})}if(this.selectHasSelectedOption=h,0==f){var b=o()(new Option(UncannyAutomator.i18n.noResults,"",!0,!0));b.prop("disabled",!0),this.field.find(".form-element__select-normal-options").append(b),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}c.on("change",(function(e,t){s.trigger("automator:field:change",t)}));break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":var w="form-input form-input--".concat(a);if(l=o()("<div/>",{class:w}),this.$fakeCodemirrorField=o()("<div/>",{class:"form-element__input-cm"}),l.append(this.$fakeCodemirrorField),this.fieldContainer=l,c=o()("<input/>",o().extend({},d,{class:"form-element__input",type:"text","data-type":a})),(0,S.$K)(r.maxLength)&&c.prop("maxlength",r.maxLength),this.field=c,r.supportsTokens&&l.addClass("form-input--token"),r.hasPlaceholder&&c.prop("placeholder",r.placeholder),r.hasValue?c.prop("value",r.currentValue):r.hasDefaultValue&&c.prop("value",r.defaultValue),["date","time"].includes(r.fieldType)){var A=o()('\n\t\t\t\t\t\t\t\t<div class="form-element__input-clear" uap-tooltip="'.concat(UncannyAutomator.i18n.clear,'">\n\t\t\t\t\t\t\t\t\t<span class="uo-icon uo-icon--times"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'));l.addClass("form-input--has-clear"),this.$fakeCodemirrorField.append(A),A.on("click",(function(){t.clearValue()}))}c.on("input",(function(){s.trigger("automator:field:change")}));break;case"textarea":l=o()("<div/>",{class:"form-textarea"}),this.fieldContainer=l,c=o()("<textarea/>",o().extend(!0,d,{"data-type":"textarea",class:"form-element__textarea","data-item_type":r.itemType})),(0,S.$K)(r.maxLength)&&c.prop("maxlength",r.maxLength),this.field=c,r.supportsTokens&&l.addClass("form-textarea--token"),r.hasPlaceholder&&c.prop("placeholder",r.placeholder),this.$fakeCodemirrorField=o()("<div/>",{class:"form-element__input-cm"}),l.append(this.$fakeCodemirrorField),r.hasValue?c.text(r.currentValue):r.hasDefaultValue&&c.text(r.defaultValue),c.on("input",(function(){s.trigger("automator:field:change")}));break;case"checkbox":l=o()("<div/>",{class:"form-checkbox"}),this.fieldContainer=l;var k=o()("<label/>",{class:"form-checkbox__container"}),C=o()("<div/>",{class:"checkbox--show"});if(c=o()("<input/>",o().extend({},d,{type:"checkbox","data-type":"checkbox",class:"checkbox--hidden checkbox--primary"})),r.hasValue&&r.currentValue&&c.prop("checked",!0),this.field=c,r.hasLabel&&k.html(r.label),l.append(k),k.append(c),k.append(C),(0,S.$K)(r.isToggle)&&r.isToggle&&(l.addClass("form-checkbox--toggle"),(0,S.$K)(r.toggle))){if((0,S.$K)(r.toggle.on)){var U=o()("<span/>",{class:"checkbox-label checkbox-label--on"}).text(r.toggle.on);k.append(U)}if((0,S.$K)(r.toggle.off)){var T=o()("<span/>",{class:"checkbox-label checkbox-label--off"}).text(r.toggle.off);k.append(T)}}if((0,S.$K)(r.color))if((0,S.d3)(r.color,["gutenberg","green"]))switch(r.color){case"gutenberg":l.addClass("form-checkbox--toggle-gutenberg");break;case"green":l.addClass("form-checkbox--toggle-green")}else console.error(X("The color %s does not exists. Default color will be used instead.",[r.color]));(0,S.$K)(r.align)&&((0,S.d3)(r.align,["left","right"])?"right"==r.align&&l.addClass("form-checkbox--toggle-right"):console.error(X("The alignment %s does not exists. %s will be used instead.",[r.align,'"left"']))),c.on("change",(function(e,t){s.trigger("automator:field:change",t)})),c=k;break;case"radio":l=o()("<div/>",{class:"form-radio"}),this.fieldContainer=l;var x=o()(),E=o()();o().each(r.options,(function(e,t){var n=o()("<label/>",{class:"form-radio__container"});n.html(t.text);var i=o()("<input/>",o().extend({},d,{type:"radio","data-type":"radio",class:"radio--hidden radio--primary",value:t.value,name:d.id}));x=x.add(i);var a=o()("<div/>",{class:"radio--show"});n.append(i),n.append(a),(r.hasValue&&r.currentValue==t.value||!r.hasValue&&r.hasDefaultValue&&r.defaultValue==t.value)&&i.prop("checked",!0),E=E.add(n)})),this.field=E,c=E,x.on("change",(function(e,t){s.trigger("automator:field:change",t)}))}if(l.append(c),"checkbox"!=a&&(r.hasLabel||r.isRequired)&&(u=o()("<label/>",{class:"form-element__label",for:r.uniqueFieldID}),r.hasLabel&&u.html(r.label)),r.isRequired)if(l.addClass("form-element--required"),"checkbox"==r.fieldType){if(c.find("input").prop("required",!0),r.hasLabel){var D=o()("<span/>",{class:"form-element-label__required"});c.append(D)}}else if(c.prop("required",!0),r.hasLabel){var M=o()("<span/>",{class:"form-element-label__required"});u.append(M)}(0,S.$K)(r.isReadOnly)&&r.isReadOnly&&(["date","time"].includes(this.attributes.fieldType)||l.addClass("form-element--readonly"),"select"==r.fieldType?c.prop("disabled",!0):["checkbox","radio"].includes(r.fieldType)?c.find("input").prop("disabled",!0):c.prop("readonly",!0)),(r.hasLabel||r.isRequired)&&l.prepend(u);var O=o()("<div/>",{class:"form-element__error"});if(l.append(O),this.fieldContainer=l,r.hasDescription){var I=o()("<div/>",{class:"description"});I.html(r.description),l.append(I)}r.isHidden&&l.addClass("form-element--hidden"),s.append(l),"select"==r.fieldType&&(0,S.$K)(this.customValueField)&&(this.customValueFieldContainer=o()('<div class="form-select-custom">\n\t\t\t\t\t\t<div class="form-element-children"></div>\n\t\t\t\t\t</div>'),this.customValueFieldContainer.find(".form-element-children").append(this.customValueField.createFormElement()),s.append(this.customValueFieldContainer),"automator_custom_value"==this.getValue()?this.customValueFieldContainer.addClass("form-select-custom--visible"):this.customValueFieldContainer.removeClass("form-select-custom--visible")),i=s,this.formElement=s,n&&this.initLibraries(),this.onChange(),this.onFocus()}else console.error(X('The field type "%s" is invalid. The valid ones are %s',[a,(0,S.ew)().join(", ")]));return i}},{key:"setAttributes",value:function(e){if(e.fieldType=this.type,e.uniqueFieldID="".concat(e.optionCode,"__").concat((0,S.Ki)()),"checkbox"!=e.fieldType||(0,S.xb)(e.currentValue)||["true","false"].includes(e.currentValue)&&(e.currentValue="true"==e.currentValue,e.currentValue?e.hasValue=!0:e.hasValue=!1),(0,S.$K)(e.hasValue)||((0,S.xb)(e.currentValue)?e.hasValue=!1:e.hasValue=!0),(0,S.$K)(e.hasPlaceholder)||((0,S.xb)(e.placeholder)?e.hasPlaceholder=!1:e.hasPlaceholder=!0),(0,S.$K)(e.hasDefaultValue)||((0,S.xb)(e.defaultValue)?e.hasDefaultValue=!1:e.hasDefaultValue=!0),(0,S.$K)(e.hasLabel)||((0,S.xb)(e.label)?e.hasLabel=!1:e.hasLabel=!0),(0,S.$K)(e.hasDescription)||((0,S.xb)(e.description)?e.hasDescription=!1:e.hasDescription=!0),(0,S.$K)(e.isRequired)||(e.isRequired=!1),(0,S.$K)(e.isChildField)||(e.isChildField=!1),(0,S.$K)(e.supportsTokens)||(e.supportsTokens=!1),e.supportsTokens&&"select"==e.fieldType&&!["action","closure"].includes(e.itemType)&&(e.supportsTokens=!1),(0,S.$K)(e.isReadOnly)||(e.isReadOnly=!1),"select"==e.fieldType){if((0,S.$K)(e.supportsMultipleValues)||(e.supportsMultipleValues=!1),e.supportsMultipleValues&&(e.supportsCustomValue=!1),e.supportsMultipleValues)try{e.currentValue=JSON.parse(e.currentValue)}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}(0,S.$K)(e.supportsCustomValue)||(e.supportsCustomValue=!1),e.hasCustomValueDescription=!(0,S.xb)(e.customValueDescription)}return"date"==e.fieldType&&(e.isReadOnly=!0,(0,S.$K)(e.dateFormat)||(e.dateFormat="Y-m-d"),(0,S.$K)(e.dateAltFormat)||(e.dateAltFormat=UncannyAutomator.format.date),(0,S.$K)(e.minDate)&&(e.minDate=e.minDate),(0,S.$K)(e.maxDate)&&(e.maxDate=e.maxDate),(0,S.$K)(e.supportsRange)||(e.supportsRange=!1)),"time"==e.fieldType&&(e.isReadOnly=!0,(0,S.$K)(e.timeFormat)||(e.timeFormat="h:i K"),(0,S.$K)(e.timeAltFormat)||(e.timeAltFormat="h:i K"),(0,S.$K)(e.minTime)&&(e.minTime=e.minTime),(0,S.$K)(e.maxTime)&&(e.maxTime=e.maxTime)),(0,S.$K)(e.supportsTinyMCE)||(e.supportsTinyMCE=!1),!(0,S.$K)(e.isToggle)&&(0,S.$K)(e.toggle)&&(e.isToggle=!0),(0,S.$K)(e.isAjax)||(e.isAjax=!1),(0,S.$K)(e.isHidden)||(e.isHidden=!1),e}},{key:"validate",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=null;t?(n=this.getFieldContainer(),e=this.getValue()):e=this.attributes.currentValue,this.type;var i={supportsTokens:this.attributes.supportsTokens,required:this.attributes.isRequired};return(0,O.OP)(n,this.type,e,i,this.customValidationFunction)}},{key:"onChange",value:function(){var e=this;this.formElement.on("automator:field:change",(function(t,n){(0,S.$K)(e.fieldContainer)&&((0,S.xb)(e.getValue())?e.fieldContainer.removeClass("form-input--has-value"):e.fieldContainer.addClass("form-input--has-value")),"select"==e.attributes.fieldType&&e.attributes.supportsCustomValue&&("automator_custom_value"==e.getValue()?e.customValueFieldContainer.addClass("form-select-custom--visible"):e.customValueFieldContainer.removeClass("form-select-custom--visible"));var i=function(){if(e.attributes.isAjax&&e.attributes.targetField!==e.attributes.optionCode&&e.doAJAX(),(0,S.$K)(e.attributes.isChildField)&&e.attributes.isChildField&&(0,S.$K)(e.attributes.parentOptionCode)){var t=(0,S.rz)(e.attributes.itemId,e.attributes.parentOptionCode);(0,S.$K)(t)&&t.doAJAX()}};if(e.attributes.isAjax&&(0,S.$K)(e.attributes.targetField)&&e.attributes.targetField!==e.attributes.optionCode&&(e.attributes.completedFirstLoad||(0,S.xb)(e.attributes.currentValue)&&!e.attributes.hasDefaultValue&&!e.attributes.completedFirstLoad)){var o=(0,S.rz)(e.attributes.itemId,e.attributes.targetField);o.setValue(null,!1),o.setCustomValue(null,!1)}return["select","radio","checkbox"].includes(e.attributes.fieldType)?i():((0,S.$K)(e.onChangeTimeout)&&clearTimeout(e.onChangeTimeout),e.onChangeTimeout=setTimeout((function(){i()}),1500)),!1}))}},{key:"onFocus",value:function(){var e=this;this.field.on("focusin",(function(t){e.attributes.isReadOnly&&o()(t.currentTarget).select()})),this.field.on("focusout",(function(){}))}},{key:"isReady",value:function(){var e=!1;return(0,S.$K)(UncannyAutomator.recipe.items[this.attributes.itemId])&&(e=!0),e}},{key:"doAJAX",value:function(){var e=this;if((0,S.$K)(this.getValue())?this.getValue():this.getMetaValue(),this.attributes.isAjax){var t=this;if(this.attributes.optionCode!=this.attributes.targetField&&(t=(0,S.rz)(this.attributes.itemId,this.attributes.targetField)),!(0,S.xb)(this.attributes.integrationId)&&!(0,S.xb)(this.attributes.endpoint)){this.startLoadingAnimation(),t.startLoadingAnimation();var n=this.getValue(),i=(0,S.$K)(t.getValue())?t.getValue():t.getMetaValue();(0,S.bN)(this.attributes.endpoint,{recipe_id:UncannyAutomator.recipe.id,integration_id:this.attributes.integrationId,item_id:this.attributes.itemId,group_id:this.attributes.groupId,field_id:this.attributes.optionCode,target_field:this.attributes.targetField,value:n,values:(0,S.q7)(this.attributes.itemId)},(function(n){if(e.stopLoadingAnimation(),t.stopLoadingAnimation(),"select"==t.getAttributes().fieldType&&o().isArray(n)){if(e.attributes.isAjax&&(0,S.$K)(e.attributes.targetField)&&e.attributes.targetField!==e.attributes.optionCode&&(e.attributes.completedFirstLoad||(0,S.xb)(e.attributes.currentValue)&&!e.attributes.hasDefaultValue&&!e.attributes.completedFirstLoad)&&(i=null),"automator_custom_value"==i){var a=t.getSelectCustomValue();i=(0,S.xb)(a)?null:a}t.setSelectOptions(n,!1),t.setValue(i)}else t.setValue(n);e.attributes.completedFirstLoad=!0}))}}}},{key:"getFormElement",value:function(){var e=this;if(this.isReady()){this.attributes.completedFirstLoad=!1;var t=!1;try{t=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields.reduce((function(t,n){return t||n.attributes.targetField==e.attributes.optionCode&&n.attributes.optionCode!=e.attributes.optionCode&&n.attributes.isAjax}),!1)}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}t||(this.attributes.targetField==this.attributes.optionCode&&this.attributes.isAjax&&this.doAJAX(),this.field.trigger("automator:field:change",{manuallySet:!1}))}return this.formElement}},{key:"getFieldContainer",value:function(){return this.fieldContainer}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"getField",value:function(){return this.field}},{key:"getFieldCM",value:function(){return this.$fakeCodemirrorField}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getValue",value:function(){var e=null;if((0,S.$K)(this.field))switch(this.type){case"select":case"text":case"url":case"email":case"int":case"float":case"date":case"time":e=this.field.val();break;case"textarea":if((0,S.$K)(this.TokenSelector))try{this.TokenSelector.parseHTMLTokensInPlainTextarea()}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}if(e=this.field.val(),this.attributes.supportsTinyMCE)try{e=e.replaceAll("\n","")}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}break;case"checkbox":e=this.field.is(":checked");break;case"radio":e=this.field.find("input:checked").val()}return(0,S.$K)(this.field)&&(0,S.$K)(e)||(this.attributes.hasValue?e=this.attributes.currentValue:this.attributes.hasDefaultValue&&(e=this.attributes.defaultValue)),e}},{key:"getReadableValue",value:function(){var e=this,t=null,n=this.getValue();switch(this.type){case"select":if((0,S.$K)(this.field))t=this.attributes.supportsMultipleValues&&o().isArray(n)?n.map((function(t){return e.field.find(X('option[value="%s"]',[t])).text()})).join("".concat(UncannyAutomator.i18n.itemSeparator," ")):this.field.find(X('option[value="%s"]',[n])).text();else if(this.attributes.supportsMultipleValues&&o().isArray(n))try{t=n.map((function(t){return e.getSelectOptionByValue(t).text})).join("".concat(UncannyAutomator.i18n.itemSeparator," "))}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}else try{t=this.getSelectOptionByValue(n).text}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}break;case"text":case"url":case"email":case"int":case"float":case"textarea":case"date":case"time":n=o()("<p/>").html(n).text();break;case"checkbox":t=n?UncannyAutomator.i18n.trueLabel:UncannyAutomator.i18n.falseLabel;break;case"radio":if((0,S.$K)(this.field)){var i=this.field.find("input:checked");1==i.length&&(t=i.closest(".form-radio__container").text().trim())}else try{t=this.getSelectOptionByValue(n).text}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}}return t}},{key:"getSelectCustomValue",value:function(){var e=null;if("select"==this.attributes.fieldType&&this.attributes.supportsCustomValue&&"automator_custom_value"==this.getValue())if((0,S.$K)(this.customValueField))e=this.customValueField.getValue();else try{e=UncannyAutomator.recipe.items[this.attributes.itemId].meta["".concat(this.attributes.optionCode,"_custom")]}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}return e}},{key:"getSelectOptionByValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null,n=this.attributes.options;return this.attributes.supportsCustomValue&&n.push({value:"automator_custom_value",text:UncannyAutomator.i18n.validation.field.select.customValue}),(0,S.xb)(n)||n.forEach((function(n){e==n.value&&(t=n)})),t}},{key:"getMetaValue",value:function(){var e;if((0,S.$K)(UncannyAutomator.recipe.items[this.attributes.itemId])){var t=UncannyAutomator.recipe.items[this.attributes.itemId].meta[this.attributes.optionCode];(0,S.$K)(t)&&(e=t)}return e}},{key:"setValue",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{updateCodemirror:!0};if((0,S.$K)(this.field))switch(this.type){case"select":(0,S.$K)(e)||(e=this.attributes.supportsMultipleValues?[]:"");var a=this.field.find("option");if(this.attributes.supportsMultipleValues)a.prop("selected",!1),o().isArray(e)&&!(0,S.xb)(e)&&(e.forEach((function(e){var n=t.field.find('option[value="'.concat(e,'"]'));n.length>0&&n.prop("selected",!0)})),n&&this.field.trigger("change",{manuallySet:!1}));else{var r=this.field.find('option[value="'.concat(e,'"]'));r.length>0?(a.prop("selected",!1),r.prop("selected",!0),n&&this.field.trigger("change",{manuallySet:!1})):(a.prop("selected",!1),this.attributes.supportsCustomValue&&!(0,S.xb)(e)&&this.setCustomValue(e,!1),n&&this.field.trigger("change",{manuallySet:!1}))}break;case"text":case"url":case"email":case"int":case"float":if((0,S.$K)(i.updateCodemirror)&&i.updateCodemirror&&(0,S.$K)(this.fieldCM))try{this.fieldCM.setValue(e)}catch(t){this.field.val(e)}else this.field.val(e);n&&this.field.trigger("automator:field:change");break;case"textarea":this.field.val(e),(0,S.$K)(this.fieldTinyMCE)&&this.fieldTinyMCE.setContent(e),n&&this.field.trigger("automator:field:change");break;case"checkbox":var s=e,l=this.getValue();s&&!l&&this.field.prop("checked",!0),!s&&l&&this.field.prop("checked",!1),n&&(s&&!l||!s&&l)&&this.field.trigger("automator:field:change");break;case"radio":this.field.filter('[name="'.concat(e,'"]')).prop("checked",!0),n&&this.field.trigger("automator:field:change");break;case"date":case"time":this.field.val(e),n&&this.field.trigger("automator:field:change")}}},{key:"clearValue",value:function(){this.setValue("",!0);try{this.fieldCM.setValue("")}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}if(["date","time"].includes(this.attributes.fieldType))try{this.flatpickrInstance.clear()}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}}},{key:"setCustomValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&(this.field.val("automator_custom_value"),this.customValueField.setValue(e,t),t&&this.field.trigger("change",{manuallySet:!1}))}},{key:"hasSelectedOption",value:function(){return this.selectHasSelectedOption}},{key:"setSelectOptions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeSelectOptions();try{e=e.filter((function(e){return(0,S.$K)(e.value)&&(0,S.$K)(e.text)}))}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}if((0,S.$K)(this.field)){var n=this.field.find(".form-element__select-normal-options");if(e.length>0){this.field.prop("disabled",!1);var i=(0,S.$K)(this.getValue())?this.getValue():this.getMetaValue(),a=[];o().each(e,(function(e,t){var i=new Option(t.text,t.value,!1,!1);n.append(i),a.push(i)})),(0,S.xb)(i)||o().each(this.field.find("option"),(function(e,t){t.value==i&&o()(t).prop("selected",!0)}))}else{var r=o()(new Option(UncannyAutomator.i18n.noResults,"",!this.attributes.supportsCustomValue,!this.attributes.supportsCustomValue));r.prop("disabled",!0),n.append(r),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}t&&this.field.trigger("change"),this.rerenderSelect2()}}},{key:"removeSelectOptions",value:function(){(0,S.$K)(this.field)&&this.field.find(".form-element__select-normal-options").empty()}},{key:"isLoading",value:function(){return this.formElement.hasClass("form-element--loading")}},{key:"startLoadingAnimation",value:function(){var e="form-element--loading";(0,S.$K)(this.formElement)&&!this.formElement.hasClass(e)&&(this.formElement.addClass(e),"checkbox"!=this.type||(0,S.$K)(this.attributes.isToggle)||this.fieldContainer.addClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"stopLoadingAnimation",value:function(){var e="form-element--loading";(0,S.$K)(this.formElement)&&this.formElement.hasClass(e)&&(this.formElement.removeClass(e),this.fieldContainer.removeClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"initLibraries",value:function(){switch(this.type){case"select":this.initSelect2(this.field);break;case"text":case"url":case"email":case"int":case"float":case"textarea":"url"==this.attributes.fieldType&&(0,O.oy)(this.fieldContainer);break;case"date":case"time":this.initFlatpickr(this.field)}}},{key:"getSelect2Settings",value:function(){var e={theme:"uap-select2",searchInputPlaceholder:UncannyAutomator.i18n.search,language:{noResults:function(){return UncannyAutomator.i18n.noResults}},templateResult:function(e){var t=e.text;return(0,S.$K)(e.id)&&Number.isInteger(parseInt(e.id))&&parseInt(e.id)>0&&(t='<span class="uap-select2-item__meta">('.concat(X(UncannyAutomator.i18n.postIDPlaceholder,[e.id.replace("-objectkey","")]),")</span> ").concat(e.text)),t},templateSelection:function(e){var t=e.text;return(0,S.$K)(e.id)&&Number.isInteger(parseInt(e.id))&&parseInt(e.id)>0&&(t='<span class="uap-select2-item__meta">('.concat(X(UncannyAutomator.i18n.postIDPlaceholder,[e.id.replace("-objectkey","")]),")</span> ").concat(t)),t},escapeMarkup:function(e){return e}};return this.attributes.hasPlaceholder&&(e.placeholder=this.attributes.placeholder),this.attributes.customClass&&(e.customClass=this.attributes.customClass),e}},{key:"initSelect2",value:function(e){var t=this.getSelect2Settings();e.hasClass("select2-hidden-accessible")||e.select2(t)}},{key:"initFlatpickr",value:function(e){var t=this;(0,S.$K)(document.getElementById("uap-flatpickr-calendar"))||o()("body").append(o()('<div id="uap-flatpickr-calendar" class="uap uap-flatpickr-calendar"></div>'));var n=document.getElementById("uap-flatpickr-calendar"),i={allowInput:!0,positionElement:this.$fakeCodemirrorField[0],altInput:!0,clickOpens:!1,appendTo:n,locale:{weekdays:{shorthand:[UncannyAutomator.i18n.format.date.weekdays.shorthand.sunday,UncannyAutomator.i18n.format.date.weekdays.shorthand.monday,UncannyAutomator.i18n.format.date.weekdays.shorthand.tuesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.wednesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.thursday,UncannyAutomator.i18n.format.date.weekdays.shorthand.friday,UncannyAutomator.i18n.format.date.weekdays.shorthand.saturday],longhand:[UncannyAutomator.i18n.format.date.weekdays.longhand.sunday,UncannyAutomator.i18n.format.date.weekdays.longhand.monday,UncannyAutomator.i18n.format.date.weekdays.longhand.tuesday,UncannyAutomator.i18n.format.date.weekdays.longhand.wednesday,UncannyAutomator.i18n.format.date.weekdays.longhand.thursday,UncannyAutomator.i18n.format.date.weekdays.longhand.friday,UncannyAutomator.i18n.format.date.weekdays.longhand.saturday]},months:{shorthand:[UncannyAutomator.i18n.format.date.months.shorthand.january,UncannyAutomator.i18n.format.date.months.shorthand.february,UncannyAutomator.i18n.format.date.months.shorthand.march,UncannyAutomator.i18n.format.date.months.shorthand.april,UncannyAutomator.i18n.format.date.months.shorthand.may,UncannyAutomator.i18n.format.date.months.shorthand.june,UncannyAutomator.i18n.format.date.months.shorthand.july,UncannyAutomator.i18n.format.date.months.shorthand.august,UncannyAutomator.i18n.format.date.months.shorthand.september,UncannyAutomator.i18n.format.date.months.shorthand.october,UncannyAutomator.i18n.format.date.months.shorthand.november,UncannyAutomator.i18n.format.date.months.shorthand.december],longhand:[UncannyAutomator.i18n.format.date.months.longhand.january,UncannyAutomator.i18n.format.date.months.longhand.february,UncannyAutomator.i18n.format.date.months.longhand.march,UncannyAutomator.i18n.format.date.months.longhand.april,UncannyAutomator.i18n.format.date.months.longhand.may,UncannyAutomator.i18n.format.date.months.longhand.june,UncannyAutomator.i18n.format.date.months.longhand.july,UncannyAutomator.i18n.format.date.months.longhand.august,UncannyAutomator.i18n.format.date.months.longhand.september,UncannyAutomator.i18n.format.date.months.longhand.october,UncannyAutomator.i18n.format.date.months.longhand.november,UncannyAutomator.i18n.format.date.months.longhand.december]},rangeSeparator:" ".concat(UncannyAutomator.i18n.format.date.rangeSeparator," "),firstDayOfWeek:parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)>=1&&parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)<=7?parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)-1:0,weekAbbreviation:" ".concat(UncannyAutomator.i18n.format.date.weekAbbreviation," "),scrollTitle:UncannyAutomator.i18n.scrollToIncrement,toggleTitle:UncannyAutomator.i18n.clickToToggle,amPM:[UncannyAutomator.i18n.format.date.am,UncannyAutomator.i18n.format.date.pm],yearAriaLabel:UncannyAutomator.i18n.format.date.year,monthAriaLabel:UncannyAutomator.i18n.format.date.month,hourAriaLabel:UncannyAutomator.i18n.format.date.hour,minuteAriaLabel:UncannyAutomator.i18n.format.date.minute},onReady:function(e,n,i){try{var o=function(){t.getValue().includes("}}")||t.fieldCM.getValue()!=i.altInput.value&&t.fieldCM.setValue(i.altInput.value)};(0,S.$K)(t.fieldCM)?o():t.field.on("ua-codemirror-ready",(function(){o()}))}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}},onChange:function(e,n,i){try{var o=function(){t.fieldCM.setValue(i.altInput.value)};(0,S.$K)(t.fieldCM)?o():t.field.on("ua-codemirror-ready",(function(){o()}))}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}}};"date"==this.attributes.fieldType&&(i=o().extend(i,{dateFormat:this.attributes.dateFormat,altFormat:this.attributes.dateAltFormat}),this.attributes.supportsRange&&(i.mode="range"),(0,S.$K)(this.attributes.minDate)&&(i.minDate=this.attributes.minDate),(0,S.$K)(this.attributes.maxDate)&&(i.maxDate=this.attributes.maxDate)),"time"==this.attributes.fieldType&&(i=o().extend(i,{enableTime:!0,noCalendar:!0,dateFormat:this.attributes.timeFormat,altFormat:this.attributes.timeAltFormat}),(0,S.$K)(this.attributes.minTime)&&(i.minTime=this.attributes.minTime),(0,S.$K)(this.attributes.manTime)&&(i.manTime=this.attributes.manTime)),this.flatpickrInstance=e.flatpickr(i)}},{key:"initCodeMirror",value:function(){var e=this;if(["text","url","email","int","float","date","time","textarea"].includes(this.attributes.fieldType)){this.destroyCodeMirror();var t=this.getValue();this.fieldCM=CodeMirror(this.$fakeCodemirrorField[0],{lineNumbers:0,tabSize:4,value:t,mode:"default",dragDrop:!1,viewportMargin:1/0,lineWrapping:!0,autoRefresh:!0,noNewlines:!("textarea"==this.attributes.fieldType),scrollbarStyle:"textarea"==this.attributes.fieldType?"native":null,extraKeys:{Tab:function(){var t=e.getNextField();return(0,S.$K)(t)&&t.focus(),!1}},readOnly:this.attributes.isReadOnly}),this.attributes.hasPlaceholder&&this.fieldCM.setOption("placeholder",this.attributes.placeholder),this.fieldCM.on("changes",(function(t,n){["date","time"].includes(e.attributes.fieldType)||e.setValue(e.fieldCM.getValue(),!0,{updateCodemirror:!1})})),this.fieldCM.on("focus",(function(){if(["date","time"].includes(e.attributes.fieldType))try{setTimeout((function(){e.flatpickrInstance.open()}),50)}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}})),this.field.on("focus",(function(){e.fieldCM.focus()})),this.field.trigger("ua-codemirror-ready")}"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&this.customValueField.initCodeMirror()}},{key:"getNextField",value:function(){var e=null;if((0,S.$K)(this.attributes.itemId)&&(0,S.$K)(this.attributes.groupId)){var t=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields;if((0,S.$K)(t)&&o().isArray(t)){var n=t.indexOf(this);-1!=n&&n!=t.length-1&&(e=t[n+1])}}if((0,S.$K)(this.attributes.itemType)&&"user-selector"==this.attributes.itemType){var i=UncannyAutomator.recipe.userSelector.fields;if((0,S.$K)(i)&&o().isArray(i)){var a=i.indexOf(this);-1!=a&&a!=i.length-1&&(e=i[a+1])}}return e}},{key:"focus",value:function(){if((0,S.$K)(this.field))switch(this.type){case"select":try{this.field.select2("focus")}catch(e){this.field.focus()}break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":(0,S.$K)(this.fieldCM)?this.fieldCM.focus():this.field.focus();break;case"textarea":if((0,S.$K)(this.fieldTinyMCE))if(this.field.is(":visible"))this.field.focus();else try{this.fieldTinyMCE.focus()}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}else this.field.focus();break;case"checkbox":case"radio":this.field.focus()}}},{key:"destroyCodeMirror",value:function(){if((0,S.$K)(this.fieldCM))try{var e=this.fieldCM.getWrapperElement();e.parentNode.removeChild(e),this.fieldCM=null}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}}},{key:"rerenderSelect2",value:function(){var e=this.getSelect2Settings();!(0,S.xb)(this.field)&&this.field.hasClass("select2-hidden-accessible")&&this.field.select2("destroy").select2(e)}},{key:"initTokenSelector",value:function(){this.attributes.supportsTokens&&(this.destroyTokenSelector(),this.tokenSelector=new W(this)),"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&this.customValueField.initTokenSelector()}},{key:"destroyTokenSelector",value:function(){(0,S.$K)(this.tokenSelector)&&this.tokenSelector.destroy()}},{key:"initTinyMCE",value:function(){var e=this;if(this.field,(0,S.$K)(this.field)&&"textarea"==this.attributes.fieldType&&this.attributes.supportsTinyMCE){var t=this.field.prop("id"),n=tinymce.get(t);(0,S.$K)(n)&&wp.editor.remove(t),wp.editor.initialize(t,{mediaButtons:!0,tinymce:{toolbar1:"formatselect bold italic bullist numlist blockquote alignleft aligncenter alignright link unlink wp_more",toolbar2:"strikethrough hr forecolor pastetext removeformat visualchars outdent indent undo redo"},quicktags:!0}),(n=tinymce.get(t)).hidden?this.fieldContainer.addClass("form-textarea--tinymce-text"):this.fieldContainer.addClass("form-textarea--tinymce-visual"),this.formElement.find(".switch-tmce").on("click",(function(){e.field.trigger("ua-tinymce-activate-visual-view"),e.fieldContainer.removeClass("form-textarea--tinymce-text").addClass("form-textarea--tinymce-visual")})),this.formElement.find(".switch-html").on("click",(function(){e.field.trigger("ua-tinymce-activate-text-view"),e.fieldContainer.removeClass("form-textarea--tinymce-visual").addClass("form-textarea--tinymce-text");try{e.fieldCM.setValue(n.getContent({format:"raw"}))}catch(t){e.field.val(n.getContent({format:"raw"}))}})),this.fieldTinyMCE=n,n.on("init",(function(){e.field.trigger("ua-tinymce-ready")}))}}}],n&&J(t.prototype,n),e}();const ee=Q;!function(e){var t=e.fn.select2.amd.require("select2/defaults");e.extend(t.defaults,{searchInputPlaceholder:""});var n=e.fn.select2.amd.require("select2/dropdown/search"),i=n.prototype.render;n.prototype.render=function(){var e=i.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr("placeholder",this.options.get("searchInputPlaceholder")),this.$search.addClass(this.options.get("customClass")),e}}(window.jQuery)},515:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var i=n(311),o=n.n(i),a=n(756),r=n(772),s=n(973),l=n(375);function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=function(){function e(t,n,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.itemCode=i,this.itemId=o,this.item=UncannyAutomator.recipe.items[o],this.createItemActions()}var t,n;return t=e,(n=[{key:"createItemActions",value:function(){var e=this,t=o()("<div/>",{class:"item-actions"}),n=o()("<div/>",{class:"item-actions__btn"}),i=o()("<i/>",{class:"uo-icon uo-icon--ellipsis-h-alt"}),c=o()("<div/>",{class:"item-actions__dropdown"}),u=o()("<ul/>",{class:"item-actions-dropdown__ul"});n.append(i),t.append(n);var d=o()("<li/>",{class:"item-actions-dropdown__action"}),p=o()("<span/>").text(UncannyAutomator.i18n.delete);if(d.append(p),u.append(d),(0,a.$K)(this.itemType)&&(0,a.$K)(this.itemCode)&&(!(0,a.$K)(this.item)||(0,a.$K)(this.item)&&!this.item.isMissing)){var m=(0,a.Vx)(this.integrationID,this.itemType,this.itemCode);if((0,a.$K)(m.support_link)){var h="support_menu_link-".concat(this.integrationID,"-").concat(this.integrationID,"_").concat(this.itemCode,"-").concat(this.integrationID,"_").concat((0,a.hF)(m.select_option_name,"","").toLowerCase().replace(/\s+|{|}/g,"_")),f=o()("<a/>",{href:(0,a.XE)(m.support_link,{medium:"action_menu",content:h}),class:"item-actions-dropdown__action",target:"_blank"}),g=o()("<span/>").text(UncannyAutomator.i18n.support);f.append(g),u.append(f)}}return c.append(u),t.append(c),n.on("click",(function(){t.hasClass("item-actions--open")?(t.removeClass("item-actions--open"),o()(document).off("mouseup.uap-actions-click-outside")):(t.addClass("item-actions--open"),o()(document).on("mouseup.uap-actions-click-outside",(function(e){t.is(e.target)||0!==t.has(e.target).length||(t.removeClass("item-actions--open"),o()(document).off("mouseup.uap-actions-click-outside"))})))})),d.on("click",(function(){if((0,a.$K)(e.itemId)&&UncannyAutomator.recipe.isLive&&UncannyAutomator.recipe.items[e.itemId].isLive){t.removeClass("item-actions--open");var n=new r.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,a.hF)(UncannyAutomator.i18n.confirmationModal.deleteWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});n.setEvents({afterSetEvents:function(){n.show()},onConfirm:function(){n.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,a.L8)("delete",{ID:e.itemId},(function(){n.destroy(),"trigger"==e.itemType&&(new s.Z,"anonymous"==UncannyAutomator.recipe.type&&new l.Z),"action"!=e.itemType&&"closure"!=e.itemType||new l.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){n.destroy(),console.log("â€¼ï¸ ERROR-TODO. Couldn't delete the item"),"trigger"==e.itemType&&new s.Z,"action"!=e.itemType&&"closure"!=e.itemType||new l.Z}))},afterHide:function(){n.destroy()}})}else(0,a.$K)(e.itemId)?(d.addClass("item-actions-dropdown__action--loading"),(0,a.L8)("delete",{ID:e.itemId},(function(){"trigger"==e.itemType&&(new s.Z,"anonymous"==UncannyAutomator.recipe.type&&new l.Z),"action"!=e.itemType&&"closure"!=e.itemType||new l.Z}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't delete the item"),"trigger"==e.itemType&&new s.Z,"action"!=e.itemType&&"closure"!=e.itemType||new l.Z}))):("trigger"==e.itemType&&new s.Z,"action"==e.itemType&&new l.Z)})),t}}])&&c(t.prototype,n),e}()},375:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(311),o=n.n(i),a=n(756),r=n(605),s=n(593);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=n(975).vsprintf;const u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),UncannyAutomator.recipe.userSelector.step=(0,a.Cn)("get-step"),this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){var e="";switch(UncannyAutomator.recipe.userSelector.step){case"select-source":UncannyAutomator.recipe.userSelector.isValid=!1,(0,a.Tm)("validate"),e=this.getSelectSourceNodes();break;case"set-options":e=this.getOptionsNodes();break;case"show-sentence":(0,a.Tm)("validate"),UncannyAutomator.recipe.errorMode=!1,new s.Z,e=this.getSentenceNodes()}var t=(0,a.M0)("metabox",{type:"action"});console.log("%cRender User Selector","background: red; color: #fff; padding: 2px 10px;"),t.prepend(e)}},{key:"getSelectSourceNodes",value:function(){var e=o()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-integrations">\n\t\t\t\t\t\t\t<div class="item-integration user-selector-option user-selector-option--existing-user" data-source="existingUser">\n\t\t\t\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.existing,'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-integration user-selector-option user-selector-option--new-user" data-source="newUser">\n\t\t\t\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.new,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t"));return e.find(".item").prepend(this.getHeaderNodes()),e.find(".user-selector-option").on("click",(function(e){var t=o()(e.currentTarget).data("source");(0,a.Cn)("set-source",{source:t}),UncannyAutomator.recipe.userSelector.step="set-options",new A})),e}},{key:"getOptionsNodes",value:function(){var e=o()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-options"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'));return e.find(".item").prepend(this.getHeaderNodes()),e.find(".item-options").append(this.getOptionsFields()),e}},{key:"getOptionsFields",value:function(){var e=o()("<div></div>"),t=o()('<div class="item-options__group"></div>'),n=[];(0,a.Cn)("update-fields",{source:"existingUser",data:{}}),(0,a.Cn)("update-fields",{source:"newUser",data:{}});var i=UncannyAutomator.recipe.userSelector.resources.roles;switch(delete i.administrator,UncannyAutomator.recipe.userSelector.source){case"existingUser":var s=o()('<div class="user-selector__field-group user-selector__field-group--two-columns"></div>'),l=new r.Z("select",{itemType:"user-selector",optionCode:"uniqueField",label:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionEmail},{value:"id",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionId},{value:"username",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionUsername}]});n.push(l);var c=new r.Z("text",{itemType:"user-selector",optionCode:"uniqueFieldValue",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue,label:UncannyAutomator.i18n.userSelector.existingUser.valueFieldLabel,isRequired:!0,supportsTokens:!0});n.push(c);var u=l.getFormElement();c.initTokenSelector(),c.initCodeMirror(),s.append(u);var d=c.getFormElement();s.append(d),t.append(s);var p=new r.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-existing-user-fallback",label:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.fallback,options:[{value:"create-new-user",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionCreateUser},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionDoNothing}]});n.push(p);var m=p.getFormElement();if(t.append(m),u.on("automator:field:change",(function(){(0,a.Cn)("update-fields",{source:"existingUser",data:{uniqueField:l.getValue()}})})),d.on("automator:field:change",(function(){(0,a.Cn)("update-fields",{source:"existingUser",data:{uniqueFieldValue:c.getValue()}})})),m.on("automator:field:change",(function(){(0,a.Cn)("update-fields",{source:"existingUser",data:{fallback:p.getValue()}}),new A})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var h=o()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.existingUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));t.append(h)}else if("create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var f=o()("<div/>",{class:"item-options"});[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,a.xb)(UncannyAutomator.recipe.userSelector.data.existingUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.existingUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(i).map((function(e,t){return{value:e,text:i[e]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,a.xb)(UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(e){var t=new r.Z(e.fieldType,e),i=t.getFormElement();f.append(i),t.initTokenSelector(),t.initCodeMirror(),n.push(t)})),t.append(f)}break;case"newUser":[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,a.xb)(UncannyAutomator.recipe.userSelector.data.newUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.newUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(i).map((function(e,t){return{value:e,text:i[e]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,a.xb)(UncannyAutomator.recipe.userSelector.data.newUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.newUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(e){var i=new r.Z(e.fieldType,e),o=i.getFormElement();t.append(o),i.initTokenSelector(),i.initCodeMirror(),n.push(i)}));var g=new r.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-new-user-fallback",label:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.fallback,options:[{value:"select-existing-user",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionExisting},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionDoNothing}]});n.push(g);var v=g.getFormElement();if(t.append(v),v.on("automator:field:change",(function(){var e={};n.forEach((function(t){e[t.getAttributes().optionCode]=t.getValue()})),(0,a.Cn)("update-fields",{source:"newUser",data:e}),new A})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var y=o()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.newUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));t.append(y)}else if("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var _=o()("<div/>",{class:"item-options"}),b=new r.Z("select",{itemType:"user-selector",optionCode:"prioritizedField",label:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.prioritizedField,defaultValue:"email",description:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldDescription,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.newUser.email},{value:"username",text:UncannyAutomator.i18n.userSelector.newUser.username}]});n.push(b);var w=b.getFormElement();_.append(w),t.append(_)}}UncannyAutomator.recipe.userSelector.fields=n,e.append(t);var k=o()('<div class="item-options__buttons"></div>'),C=o()('<div class="uap-btn uap-btn--primary">'.concat(UncannyAutomator.i18n.save,"</div>")),U=o()('<div class="uap-btn uap-btn--secondary">'.concat(UncannyAutomator.i18n.cancel,"</div>"));return C.on("click",(function(){var e=!0,t={};n.forEach((function(n){var i=n.validate().isValid;e=e&&i,i&&(t[n.getAttributes().optionCode]=n.getValue())})),(0,a.Cn)("update-fields",{source:UncannyAutomator.recipe.userSelector.source,data:t}),e&&(C.addClass("uap-btn--primary uap-btn--loading uap-btn--disabled"),(0,a.L8)("user-selector",{recipeId:UncannyAutomator.recipe.id,source:UncannyAutomator.recipe.userSelector.source,data:UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source]},(function(e){UncannyAutomator.recipe.userSelector.isValid=!0,(0,a.Cn)("set-step",{step:"show-sentence"}),new A}),(function(e){})))})),U.on("click",(function(){(0,a.Cn)("set-step",{step:"select-source"}),new A})),k.append(C),k.append(U),e.append(k),e}},{key:"getSentenceNodes",value:function(){var e=o()('\n\t\t\t<div class="user-selector user-selector--summary '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-options">\n\t\t\t\t\t\t\t<div class="user-selector-summary"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'));e.find(".item").prepend(this.getHeaderNodes());var t=e.find(".user-selector-summary"),n=o()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uo-icon uo-icon--atom"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),i=o()('\n\t\t\t<div class="user-selector-summary-row__token"></div>\n\t\t');n.find(".user-selector-summary-row__content").append(i),"existingUser"==UncannyAutomator.recipe.userSelector.source?i.text(UncannyAutomator.i18n.userSelector.userType.existing):"newUser"==UncannyAutomator.recipe.userSelector.source&&i.text(UncannyAutomator.i18n.userSelector.userType.new),i.on("click",(function(){(0,a.Cn)("set-step",{step:"select-source"}),new A})),t.append(n);var r,s=o()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uo-icon uo-icon--fingerprint"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t');"existingUser"==UncannyAutomator.recipe.userSelector.source?r=o()("\n\t\t\t\t<div>\n\t\t\t\t".concat(c(UncannyAutomator.i18n.userSelector.summary.matches,['<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.i18n.userSelector.summary[UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField],"</div>"),'<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue,"</div>")]),"\n\t\t\t\t</div>")):"newUser"==UncannyAutomator.recipe.userSelector.source&&(r=o()("\n\t\t\t\t<div>\n\t\t\t\t".concat(c(UncannyAutomator.i18n.userSelector.summary.withEmail,['<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.recipe.userSelector.data.newUser.email,"</div>")]),"\n\t\t\t\t</div>\n\t\t\t\t"))),s.find(".user-selector-summary-row__content").append(r),r.find(".user-selector-summary-row__token").on("click",(function(){(0,a.Cn)("set-step",{step:"set-options"}),new A})),t.append(s);var l=o()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uo-icon uo-icon--directions"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),u="";"existingUser"==UncannyAutomator.recipe.userSelector.source?"create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback?u=UncannyAutomator.i18n.userSelector.summary.createNewUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback&&(u=UncannyAutomator.i18n.userSelector.summary.doNothing):"newUser"==UncannyAutomator.recipe.userSelector.source&&("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback?u=UncannyAutomator.i18n.userSelector.summary.selectExistingUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback&&(u=UncannyAutomator.i18n.userSelector.summary.doNothing));var d=o()("\n\t\t\t<div>\n\t\t\t".concat(c(UncannyAutomator.i18n.userSelector.summary.otherwise,['<div class="user-selector-summary-row__token">'.concat(u,"</div>")]),"\n\t\t\t</div>"));return l.find(".user-selector-summary-row__content").append(d),l.find(".user-selector-summary-row__token").on("click",(function(){(0,a.Cn)("set-step",{step:"set-options"}),new A})),t.append(l),e}},{key:"getHeaderNodes",value:function(){var e;switch(UncannyAutomator.recipe.userSelector.step){case"select-source":case"show-sentence":e=UncannyAutomator.i18n.userSelector.sentenceTitle;break;case"set-options":e=UncannyAutomator.i18n.userSelector.setOptions}var t=o()('\n\t\t\t<div>\n\t\t\t\t<div class="item-actions">\n\t\t\t\t\t<div class="item-actions__btn">\n\t\t\t\t\t\t<i class="uo-icon uo-icon--ellipsis-h-alt"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-actions__dropdown">\n\t\t\t\t\t\t<ul class="item-actions-dropdown__ul">\n\t\t\t\t\t\t\t<a href="'.concat((0,a.XE)("https://automatorplugin.com/knowledge-base/anonymous-recipes/#Introducing_the_User_Selector",{medium:"user_selector",content:"support_menu_link"}),'" target="_blank" class="item-actions-dropdown__action">\n\t\t\t\t\t\t\t\t<span>').concat(UncannyAutomator.i18n.support,'</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-icon"></div>\n\t\t\t\t<div class="item-title uap-clear">\n\t\t\t\t\t<div class="item-title__describe">\n\t\t\t\t\t\t<div class="item-title__non-editable">\n\t\t\t\t\t\t\t').concat(e,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),n=t.find(".item-actions");return t.find(".item-actions__btn").on("click",(function(){n.hasClass("item-actions--open")?(n.removeClass("item-actions--open"),o()(document).off("mouseup.uap-actions-click-outside")):(n.addClass("item-actions--open"),o()(document).on("mouseup.uap-actions-click-outside",(function(e){n.is(e.target)||0!==n.has(e.target).length||(n.removeClass("item-actions--open"),o()(document).off("mouseup.uap-actions-click-outside"))})))})),t}}])&&l(t.prototype,n),e}();var d=n(947),p=n(911),m=n(464);const h=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=o()("<div/>",{class:"item item--start"}),i=o()("<div/>",{class:"item-icon"}),r=o()("<div/>",{class:"item-title uap-clear"}),s=o()("<div/>",{class:"uap-btn uap-btn--secondary uap-btn--small"});r.append(s),n.append(i),n.append(r),(0,a.M0)("metabox",{type:t}).append(n),"trigger"==t&&s.text(UncannyAutomator.i18n.trigger.add),"action"==t&&s.text(UncannyAutomator.i18n.action.add),s.on("click",(function(){return new m.Z(t)}))};var f=n(515),g=n(214),v=n(104),y=n(865);function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(975).vsprintf;const b=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={$metabox:(0,a.M0)("metabox",{type:"action"})},o().each(UncannyAutomator.closures,(function(e,i){return n.createClosure(i,t)}))}var t,n;return t=e,(n=[{key:"createClosure",value:function(e,t){var n=!1,i=o()('\n\t\t\t<div class="metabox__footer metabox__closures"></div>\n\t\t'),s={label:t,formElementClass:"form-element--nomargin"},l=this.getClosureByCodeFromItemsObject(e.code);(0,a.$K)(l)&&(n=!0,s.currentValue=!0,s.itemid=l.id);var c=new r.Z("checkbox",s),u=c.getFormElement();u.on("change",(function(){var t=c.getValue();c.startLoadingAnimation(),t?(0,a.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:"add-new-closure",item_code:e.code,default_meta:{integration_name:UncannyAutomator.integrations[e.integration].name,sentence:e.sentence}},(function(e){new A,(0,a.$K)(e.post_ID)&&(0,a.M0)("item",{id:e.post_ID}).item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(e){console.log("â€¼ï¸ ERROR-TODO. Couldn't add the closure"),c.stopLoadingAnimation(),c.setValue(!1,!1)})):(0,a.L8)("delete",{ID:l.id},(function(){new A}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't delete the closure"),new A}))})),i.append(u);var d=o()("<div/>",{class:"uo-toggle uo-toggle--show"});if(n){d.addClass("uo-toggle--show");var p=o()("<div/>",{class:"item item--closure item--margintop","data-id":l.id}),m=this.createHeader(UncannyAutomator.recipe.items[l.id].integrationCode,"closure",e.code,l.id);p.append(m);var h=o()("<div/>",{class:"item__content"});p.append(h),d.append(p)}i.append(d),this.elements.$metabox.append(i)}},{key:"createHeader",value:function(e,t,n,i){var a=o()("<div/>"),r=o()("<div/>",{class:"item-title uap-clear"}),s=new f.Z(t,e,n,i);a.append(s);var l=new g.Z(e);a.append(l);var c=new v.Z(e);r.append(c);var u=new y.Z(t,e,n,i);return r.append(u),a.append(r),a}},{key:"getClosureByCodeFromItemsObject",value:function(e){var t;return o().each(UncannyAutomator.recipe.items,(function(n,i){i.itemCode==e&&(t=i)})),t}}])&&_(t.prototype,n),e}();function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,a.M0)("metabox",{type:"action"}).empty(),"anonymous"==UncannyAutomator.recipe.type&&new u;var t=(0,a.Wr)("get",{filter:{itemType:"action"}});if(!(0,a.xb)(t)&&(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var n=(0,a.p5)(t,"async_mode",!1),i=(0,a.PT)(t,"async_mode","delay"),o=(0,a.PT)(t,"async_mode","schedule");(0,a.xb)(i)&&(0,a.xb)(o)?(new d.Z("action",n),new p.Z("action"),this.isContinuingIntegrationConnection()&&new m.Z("action"),new b(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):((0,a.xb)(n)||new d.Z("action",n),new p.Z("action"),this.isContinuingIntegrationConnection()&&new m.Z("action"),new b(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly),new d.Z("action",i),new d.Z("action",o))}else(0,a.xb)(t)?(new h("action"),this.isContinuingIntegrationConnection()&&new m.Z("action"),new b(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):(new d.Z("action",t),new p.Z("action"),this.isContinuingIntegrationConnection()&&new m.Z("action"),new b(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly))}var t,n;return t=e,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==(0,a.Tb)(null,"ua_connecting_integration")&&"action"==(0,a.Tb)(null,"ua_connecting_integration_context")}}])&&w(t.prototype,n),e}()},214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(311),o=n.n(i),a=n(756);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=n(975).vsprintf;const l=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.integrationCode=t,this.createItemIcon()}var t,n;return t=e,(n=[{key:"createItemIcon",value:function(){var e=o()("<div/>",{class:"item-icon"});if((0,a.$K)(UncannyAutomator.integrations[this.integrationCode])){var t,n=UncannyAutomator.integrations[this.integrationCode];(0,a.$K)(n.icon_svg)?t=o()('<img src="'.concat(n.icon_svg,'" alt="').concat(n.name,'">')):(0,a.$K)(n.icon_32)&&(0,a.$K)(n.icon_64)&&(t=o()('<img src="'.concat(n.icon_32,'" srcset="').concat(s("%s 1x, %s 2x",[n.icon_32,n.icon_64]),'" alt="').concat(n.name,'">'))),e.append(t)}return e}}])&&r(t.prototype,n),e}()},104:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(311),o=n.n(i),a=n(756);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,e),this.integrationId=t,this.integrationName=n,this.createItemTag()}var t,n;return t=e,(n=[{key:"createItemTag",value:function(){var e=UncannyAutomator.integrations[this.integrationId],t=o()("<div/>",{class:"item-title__integration uap-clear"}),n=o()("<div/>",{class:"item-title__tag"});return(0,a.$K)(e)?n.text(e.name):n.text(this.integrationName),t.append(n),t}}])&&s(t.prototype,n),e}()},464:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(311),o=n.n(i),a=n(756),r=n(772),s=n(515),l=n(214),c=n(104),u=n(973),d=n(375);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=n(975).vsprintf;const h=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.$currentItem=i,this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){this.$container=o()('<div class="item"></div>'),this.$item=this.$container,this.createHeader(),this.createItemsList(),this.removeConnectingIntegrationsParameters(),this.$currentItem.replaceWith(this.$container)}},{key:"createHeader",value:function(){var e=o()('\n\t\t\t<div>\n\t\t\t\t<div class="item-title uap-clear">\n\t\t\t\t\t<div class="item-title__describe">\n\t\t\t\t\t\t<div class="item-title__non-editable">\n\t\t\t\t\t\t\t'.concat("trigger"==this.itemType?UncannyAutomator.i18n.trigger.select:UncannyAutomator.i18n.action.select,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),t=new s.Z(this.itemType);e.append(t);var n=new l.Z(this.integrationID);e.append(n);var i=new c.Z(this.integrationID);e.find(".item-title").prepend(i),this.$container.append(e)}},{key:"createItemsList",value:function(){var e,t,n=this;"trigger"==this.itemType?(e=(0,a.eU)(this.integrationID,"triggers"),t=UncannyAutomator.i18n.trigger.search,UncannyAutomator.i18n.proOnly.unlockTriggers):"action"==this.itemType&&(e=(0,a.eU)(this.integrationID,"actions"),t=UncannyAutomator.i18n.action.search,UncannyAutomator.i18n.proOnly.unlockActions);var i=o()('\n\t\t\t<div class="item__content">\n\t\t\t\t<div class="item-options item-options--nopadding item-options--noborder">\n\t\t\t\t\t<div class="form-element">\n\t\t\t\t\t\t<div class="item__task-selector">\n\t\t\t\t\t\t\t<div class="item-task-selector__search">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tclass="item-task-selector__search-input"\n\t\t\t\t\t\t\t\t\tplaceholder="'.concat(t,'"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-task-selector__options">\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--available"></div>\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--unavailable">\n\t\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group-items"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.noResults,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),s=i.find(".item-options"),l=i.find(".item__task-selector"),c=i.find(".item-task-selector__search-input"),p={container:i.find(".item-task-selector__options"),available:i.find(".item-task-selector-options__group--available"),unavailable:{container:i.find(".item-task-selector-options__group--unavailable"),list:i.find(".item-task-selector-options__group-items")},noResults:i.find(".item-task-selector__option--no-results")};if(e.hasAvailableItems){if(!((0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type)){var h=[],f=[];e.available.forEach((function(e){e.requires_user?h.push(e):f.push(e)})),e.available=[].concat(f,h)}p.available.append(e.available.map((function(e){var t=e.is_pro,i=(!(0,a.$K)(UncannyAutomator.wp)||!UncannyAutomator.wp)&&"anonymous"==UncannyAutomator.recipe.type&&e.requires_user,s=o()('\n\t\t\t\t\t<div class="item-task-selector__option '.concat(t?"item-task-selector__option--pro":""," ").concat(e.requires_user?"item-task-selector__option--requires-user":""," ").concat(i?"item-task-selector__option-cannot-add":"",'"\n\t\t\t\t\t\tdata-search="').concat(e.select_option_name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t').concat(i?'<span class="uo-icon uo-icon--lock-alt"></span>':"","\n\t\t\t\t\t\t\t").concat((0,a.hF)(e.select_option_name,'<span class="item-task-selector__option-variable">',"</span>")," ").concat(t?'<span class="item-task-selector-option__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</span>"):"",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="item-task-selector__option-properties">\n\t\t\t\t\t\t\t').concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&e.requires_user?'<span class="item-task-selector-option__requires-user">'.concat(UncannyAutomator.i18n.needsUserData,"</span>"):"","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"));return s.on("click",(function(){l.addClass("item__task-selector--loading"),s.addClass("item-task-selector__option--loading");var t=["trigger","action"].includes(n.itemType)?"add-new-".concat(n.itemType):"",i={};o().each(e.options,(function(e,t){(0,a.$K)(t.default_value)&&(i[t.option_code]=t.default_value)})),"anonymous"==e.type&&(i.can_log_in_new_user=!(0,a.$K)(e.can_log_in_new_user)||e.can_log_in_new_user);var c,p=function(r,c){(0,a.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:t,item_code:e.code,default_meta:o().extend({},i,{integration_name:UncannyAutomator.integrations[n.integrationID].name,sentence:e.sentence})},(function(e){if(new u.Z,new d.Z,(0,a.$K)(e.post_ID)){var t=(0,a.M0)("item",{id:e.post_ID});UncannyAutomator.recipe.items[e.post_ID].isValid?UncannyAutomator.recipe.isLive||t.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):t.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}(0,a.$K)(r)&&r(e)}),(function(e){console.log("ERROR-TODO. Couldn't add the item"),l.removeClass("item__task-selector--loading"),s.removeClass("item-task-selector__option--loading"),0==e.success&&new u.Z,(0,a.$K)(c)&&c(e)}))};if("action"==n.itemType&&"anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&e.requires_user)if(l.removeClass("item__task-selector--loading"),s.removeClass("item-task-selector__option--loading"),(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var h=UncannyAutomator.recipe.isLive;(c=new r.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,a.hF)(e.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.description,"</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var e=c.getElements();e.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,a.R$)(!0,(function(t){p((function(){c.destroy()}),(function(){e.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)}))}),(function(t){e.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),h&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)},onCancel:function(){c.destroy()}})}else(c=new r.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,a.hF)(e.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(m(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.description,[UncannyAutomator.i18n.uncannyAutomatorPro]),' <a href="').concat((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <span class="uo-icon uo-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.upgradeLater,' <a href="').concat((0,a.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uo-icon uo-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){c.destroy(),(0,a.YQ)((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}))},onCancel:function(){c.destroy()}});else p()})),s})))}else p.available.remove();e.hasUnavailableItems?p.unavailable.list.append(e.unavailable.map((function(e){var t="unavailable_item-".concat(n.integrationID,"-").concat(n.integrationID,"_").concat((0,a.hF)(e.name,"","").toLowerCase().replace(/\s+|{|}/g,"_"));return o()('\n\t\t\t\t\t<a href="'.concat((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:t}),'"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\tclass="item-task-selector__option item-task-selector__option--pro"\n\t\t\t\t\t\tdata-search="').concat(e.name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t<span class="uo-icon uo-icon--lock-alt"></span>\n\t\t\t\t\t\t\t').concat((0,a.hF)(e.name,'<span class="item-task-selector__option-variable">',"</span>"),'\n\t\t\t\t\t\t\t<span class="item-task-selector-option__badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t"))}))):p.unavailable.container.remove();var g=p.container.find(".item-task-selector__option:not(.item-task-selector__option--no-results)");c.on("input",(function(){var e=c.val().toLowerCase().replace(/\s+|{|}/g,"");g.removeClass("item-task-selector__option--show item-task-selector__option--hide");var t=!0;(0,a.xb)(e)||(t=!1,o().each(g,(function(n,i){var a=o()(i);-1!==a.data("search").search(e)?(a.addClass("item-task-selector__option--show"),t=!0):a.addClass("item-task-selector__option--hide")}))),p.noResults.removeClass("item-task-selector__option--hide item-task-selector__option--show"),t?p.noResults.addClass("item-task-selector__option--hide"):p.noResults.addClass("item-task-selector__option--show")})),s.append(this.createCancelButton()),this.$container.append(i)}},{key:"createCancelButton",value:function(){var e=this,t=o()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return t.on("click",(function(){new _(e.itemType,e.$item)})),t}},{key:"removeConnectingIntegrationsParameters",value:function(){(0,a.hl)(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}}])&&p(t.prototype,n),e}();function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=n(975).vsprintf,y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.$currentItem=n,this.integrations=[],this.render(),this.handleContinueIntegrationConnection()}var t,n;return t=e,n=[{key:"render",value:function(){var e=o()("<div/>",{class:"item"});this.$item=e;var t=this.createHeader(),n=o()("<div/>",{class:"item__content"}),i=this.createIntegrations(),r=this.createDiscoverMoreIntegrations();if(e.append(t),n.append(i),n.append(r),e.append(n),(0,a.$K)(this.$currentItem))this.$currentItem.replaceWith(e);else{var s=(0,a.M0)("lastItem",{type:this.itemType});"trigger"==this.itemType&&(s.length>0?e.insertAfter(s):(0,a.M0)("metabox",{type:this.itemType}).append(e)),"action"==this.itemType&&((0,a.M0)("items",{type:this.itemType}).length>0?e.insertBefore(o()(".add-action-btn")):(0,a.M0)("metabox",{type:this.itemType}).find(".item.item--start").replaceWith(e))}}},{key:"createHeader",value:function(){var e=o()("<div/>"),t=o()("<div/>",{class:"item-icon"}),n=o()("<div/>",{class:"item-title uap-clear"}),i=o()("<div/>",{class:"item-title__describe"}),a=o()("<div/>",{class:"item-title__non-editable"}).text(UncannyAutomator.i18n.integration.select),r=new s.Z(this.itemType);return e.append(r),e.append(t),i.append(a),n.append(i),e.append(n),e}},{key:"createIntegrations",value:function(){var e=this,t=o()("<div/>",{class:"item-integrations"});return this.filterByNonEmptyIntegrations(this.itemType),this.sortIntegrationsAlphabetically(),this.integrations.forEach((function(n){var i=n.id,o=e.createIntegration(i,n),r=function(){new h(e.itemType,i,e.$item)};if((0,a.$K)(n.connected))switch(e.integrationModalCurrentStep(n)){case 1:r=function(){(0,a.hl)(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:i,ua_connecting_integration_context:e.itemType},{setAsURL:!0,refresh:!1}),e.connectIntegrationModal(i,n,{currentStep:1})};break;case 2:r=function(){(0,a.hl)(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:i,ua_connecting_integration_context:e.itemType},{setAsURL:!0,refresh:!1}),e.connectIntegrationModal(i,n,{currentStep:2})}}o.on("click",(function(){r()})),t.append(o)})),t}},{key:"connectIntegrationModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({currentStep:1},n);var i=(0,a.hl)(UncannyAutomator.connectApiUrl,{redirect_url:(0,a.hl)(UncannyAutomator.dashboardUrl,{ua_close_window:1})}),o="";o=(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp?'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<span class="uo-icon uo-icon--check-circle"></span>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1Pro,[UncannyAutomator.i18n.uncannyAutomatorPro]),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-activate-license" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.activate,' <span class="uo-icon uo-icon--arrow-circle-right"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'):'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<span class="uo-icon uo-icon--smile-plus"></span>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1,[UncannyAutomator.i18n.uncannyAutomator]),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-sign-up" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.signUp,' <span class="uo-icon uo-icon--arrow-circle-right"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t');var s=new r.Z({title:"".concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectIntegration),content:'\n\t\t\t\t<div class="connect-integration-modal">\n\t\t\t\t\t<div class="connect-integration-modal-steps__counter">\n\t\t\t\t\t\t'.concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.stepCounter,[n.currentStep-1,"2"]),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-steps">\n\t\t\t\t\t\t<div class="connect-integration-modal-steps__list">\n\t\t\t\t\t\t\t').concat(o,'\n\t\t\t\t\t\t\t<div class="connect-integration-modal-step ').concat(n.currentStep>2?"connect-integration-modal-step--completed":""," ").concat(1==n.currentStep?"connect-integration-modal-step--previous-not-completed":"",'">\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t\t\t\t<span class="uo-icon uo-icon--plug"></span>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t\t\t\t<strong>2.</strong> ').concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step2,['<span class="connect-integration-modal-step-integration-name">'+(0,a.Y6)(e).node.outerHTML+t.name+"</span>",UncannyAutomator.i18n.uncannyAutomator]),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t\t\t\t<span ').concat(1==n.currentStep?'uap-tooltip="'+UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.completePrevious+'"':"",'>\n\t\t\t\t\t\t\t\t\t\t<a id="connect-integration-modal-connect-account" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectAccount,' <span class="uo-icon uo-icon--arrow-circle-right"></span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:null}},{size:"extra-large"});s.setEvents({onCancel:function(){s.destroy(),setTimeout((function(){(0,a.hl)(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}),10)}}),s.getElements().modal.container.find("#connect-integration-modal-sign-up").on("click",(function(e){e.preventDefault(),e.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:i,w:550,h:600,onClose:function(){location.reload()}})})),s.getElements().modal.container.find("#connect-integration-modal-activate-license").on("click",(function(e){e.preventDefault(),e.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:UncannyAutomator.licenseUrl,w:550,h:600,onClose:function(){location.reload()}})})),2==n.currentStep&&s.getElements().modal.container.find("#connect-integration-modal-connect-account").on("click",(function(e){e.preventDefault(),e.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:(0,a.hl)(t.settings_url,{minimal:1,hide_settings_tabs:1}),w:550,h:600,onClose:function(){location.reload()}})}))}},{key:"handleContinueIntegrationConnection",value:function(){if(1==(0,a.Tb)(null,"ua_connecting_integration")&&(0,a.Tb)(null,"ua_connecting_integration_context")==this.itemType){var e=(0,a.Tb)(null,"ua_connecting_integration_id");if(!(0,a.xb)(e)){var t=UncannyAutomator.integrations[e];if((0,a.$K)(t)&&(0,a.$K)(t.connected))switch(this.integrationModalCurrentStep(t)){case 1:this.connectIntegrationModal(e,t,{currentStep:1});break;case 2:this.connectIntegrationModal(e,t,{currentStep:2});break;case 3:new h(this.itemType,e,this.$item)}}}}},{key:"createIntegration",value:function(e,t){var n,i=o()("<div/>",{class:"item-integration"}),r=o()("<div/>",{class:"item-integration__logo"}),s=o()("<div/>",{class:"item-integration__name"});return t.isProOnly&&(i.addClass("item-integration--pro"),i.append(o()('\n\t\t\t\t<div class="item-integration__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</div>\n\t\t\t")))),t.isAvailable?(0,a.$K)(t.connected)?UncannyAutomator.hasAccountConnected?t.connected?i.addClass("item-integration--available"):(i.addClass("item-integration--unavailable item-integration--unavailable-integration-not-connected"),i.attr("uap-tooltip",v(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,[t.name])),i.append(o()('\n\t\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t\t")))):(i.addClass("item-integration--unavailable item-integration--unavailable-ap-account-not-connected"),i.attr("uap-tooltip",v(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,[t.name])),i.append(o()('\n\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t")))):"action"==this.itemType?(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type?i.addClass("item-integration--available"):0==t.items.actions.available.filter((function(e){return 0==e.requires_user})).length?(i.addClass("item-integration--unavailable item-integration--unavailable-requires-user-data"),i.attr("uap-tooltip",UncannyAutomator.i18n.apiIntegrations.allActionsRequireUserData)):i.addClass("item-integration--available"):i.addClass("item-integration--available"):(i.addClass("item-integration--unavailable item-integration--unavailable-requires-pro"),i.attr("uap-tooltip",v(UncannyAutomator.i18n.proOnly.requiresPro,[UncannyAutomator.i18n.uncannyAutomatorPro]))),(0,a.$K)(t.icon_svg)?n=o()('<img src="'.concat(t.icon_svg,'" alt="').concat(t.name,'">')):(0,a.$K)(t.icon_32)&&(0,a.$K)(t.icon_64)&&(n=o()('<img src="'.concat(t.icon_32,'" srcset="').concat(v("%s 1x, %s 2x",[t.icon_32,t.icon_64]),'" alt="').concat(t.name,'">'))),s.text(t.name),r.append(n),i.append(r),i.append(s),i}},{key:"createDiscoverMoreIntegrations",value:function(){return o()('\n\t\t\t<div class="item-content__description">\n\t\t\t\t'.concat("anonymous"==UncannyAutomator.recipe.type?UncannyAutomator.i18n.integration.dontSeeTrigger:UncannyAutomator.i18n.integration.discoverMore,' <a href="').concat((0,a.XE)("https://automatorplugin.com/integrations/",{medium:"select_an_integration",content:"discover_more_integrations"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uo-icon uo-icon--external-link-alt"></span></a>\n\t\t\t</div>\n\t\t'))}},{key:"filterByNonEmptyIntegrations",value:function(e){var t=this;if(["trigger","action"].includes(e)){var n=o().extend(!0,{},UncannyAutomator.integrations);Object.entries(n).forEach((function(n){var i,r,s,l=(s=2,function(e){if(Array.isArray(e))return e}(r=n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return a}}(r,s)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],d=!1,p=!1,m=!1;"trigger"==e?(d=(i=(0,a.IL)(u.items.triggers)).hasTriggers,m=i.hasAvailableItems,p=i.allItemsArePro):"action"==e&&(d=(i=(0,a.IL)(u.items.actions)).hasActions,m=i.hasAvailableItems,p=i.allItemsArePro),d&&t.integrations.push(o().extend({},u,{id:c,isAvailable:m,isProOnly:p}))}))}}},{key:"sortIntegrationsAlphabetically",value:function(){this.integrations=(0,a.yv)(this.integrations,"name")}},{key:"integrationModalCurrentStep",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!(0,a.$K)(UncannyAutomator.wp)||(0,a.$K)(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&!UncannyAutomator.hasAccountConnected||(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&!UncannyAutomator.hasAccountConnected&&!UncannyAutomator.hasValidProLicense?e=1:((!(0,a.$K)(UncannyAutomator.wp)||(0,a.$K)(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&UncannyAutomator.hasAccountConnected||(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&(UncannyAutomator.hasAccountConnected||UncannyAutomator.hasValidProLicense))&&(e=t.connected?3:2),e}}],n&&g(t.prototype,n),e}();const _=y},313:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(756),_common_modal_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(772),_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(235),_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(454),_triggers_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(973),_actions_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(375);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var vsprintf=__webpack_require__(975).vsprintf,ItemOptions=function(){function ItemOptions(e,t){_classCallCheck(this,ItemOptions),this.itemId=e,this.optionId=t,this.item=UncannyAutomator.recipe.items[e],this.fields=this.item.options[this.optionId].fields,this.buttons=this.item.options[this.optionId].buttons,this.create(),this.initTokenSelector(),this.initTinyMCE(),this.initCodeMirror()}return _createClass(ItemOptions,[{key:"create",value:function(){var e=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:this.itemId}).contentContainer,t=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options"}),n=this.createButtons(),i=this.createFields();this.fieldsContainer=i,t.append(i);var o=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__notices"});this.noticeContainer=o,t.append(o),t.append(n),e.html(t)}},{key:"createFields",value:function(){var e=this,t=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__group"});return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(n,i){var o=i.getAttributes().fieldType;"repeater"==o&&i.createFields(),i.createFormElement(),t.append(i.getFormElement()),["textarea","group","repeater"].includes(o)?"group"==o?i.fields.forEach((function(t){"textarea"!==t.getAttributes().fieldType&&t.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))})):"repeater"==o&&i.fieldRows.forEach((function(t,n){t.forEach((function(t,n){t.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))}))})):i.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))})),t}},{key:"createButtons",value:function createButtons(){var _this2=this,container=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__buttons"}),automatorButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__automator-buttons"}),developerButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__developer-buttons"}),saveButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--primary"}),cancelButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return"trigger"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"action"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"closure"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),this.saveButton=saveButton,automatorButtons.append(saveButton),automatorButtons.append(cancelButton),jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.buttons,(function(index,button){var $buttonElement=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn"}).text(button.text);(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.css_classes)&&$buttonElement.addClass(button.css_classes);var doOnClick=function(){};if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.on_click))try{doOnClick=eval("(".concat(button.on_click.replace("<script>","").replace("<\/script>","").trim(),")"))}catch(e){UncannyAutomator.dev.developerMode&&(console.warning(e),console.warning(button.on_click))}$buttonElement.on("click",(function(){var e;doOnClick($buttonElement,{item:_this2.item,values:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)(_this2.itemId)},(e={},(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.modules)&&(button.modules.includes("modal")&&(e.Modal=_common_modal_js__WEBPACK_IMPORTED_MODULE_2__.Z),button.modules.includes("markdown")&&(e.Markdown=_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__.Z)),e))})),developerButtons.append($buttonElement)})),container.append(automatorButtons),container.append(developerButtons),saveButton.on("click",(function(){if((0,_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__.R3)(_this2.fieldsContainer).isValid){saveButton.addClass("uap-btn--loading uap-btn--disabled");var e,t=_this2.itemId,n=_this2.optionId,i=_this2.getOptionValue(),o=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(_this2.item,_this2.item.meta.sentence,jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},_this2.item.meta,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)(_this2.itemId)));try{e=o.html.get(0).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.L8)("update",{itemId:t,optionCode:n,optionValue:i,sentence_human_readable:o.brackets,sentence_human_readable_html:e},(function(e){_this2.fields.forEach((function(e){e.getFormElement().trigger("saved")})),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;var t=UncannyAutomator.recipe.items[_this2.item.id].isValid,n=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.item.id});t?UncannyAutomator.recipe.isLive||_this2.item.isLive||n.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):n.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(e){console.log("â€¼ï¸ ERROR-TODO. Couldn't save the options of the item"),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;try{(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.itemId}).item.find('.item-title__token[data-options-id="'.concat(n,'"]')).trigger("click")}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}}))}})),cancelButton.on("click",(function(){"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z})),container}},{key:"initTokenSelector",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){t.initTokenSelector()}))}},{key:"initTinyMCE",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){"textarea"==t.getAttributes().fieldType&&t.initTinyMCE()}))}},{key:"initCodeMirror",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){t.initCodeMirror()}))}},{key:"getOptionValue",value:function(){var e={},t=!1,n=!1;return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(i,o){var a=o.getAttributes().optionCode,r=o.getValue();if(["select","radio"].includes(o.getAttributes().fieldType)){if(t=!0,o.getAttributes().supportsMultipleValues)try{r=JSON.stringify(r)}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}e[vsprintf("%s_readable",[a])]=o.getReadableValue();var s=o.getSelectCustomValue();"automator_custom_value"==r&&(e[vsprintf("%s_custom",[a])]=s)}else"repeater"==o.getAttributes().fieldType&&(n=!0,r=JSON.stringify(r));e[a]=r})),n||t||1!=Object.keys(e).length||(e=e[Object.keys(e)[0]]),e}}]),ItemOptions}();const __WEBPACK_DEFAULT_EXPORT__=ItemOptions},865:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var i=n(311),o=n.n(i),a=n(756),r=n(772),s=n(605),l=n(313),c=n(973),u=n(375),d=n(454),p=n(593);function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const h=function(){function e(t,n,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.itemCode=i,this.itemId=o,this.item=UncannyAutomator.recipe.items[o],this.createItemSentence(t,i,o)}var t,n;return t=e,(n=[{key:"createItemSentence",value:function(e,t,n){var i,m=(0,a.Vx)(this.integrationID,e,t);this.globalItem=m,i=this.item.isMissing?this.item.sentence:(0,a.Vx)(this.integrationID,this.item.itemType,this.item.itemCode).sentence,i=(0,a.qh)(this.item,i,UncannyAutomator.recipe.items[this.itemId].meta,!0),this.item.isMissing||i.elements.token.on("click",(function(e){var t=o()(e.currentTarget);i.elements.token.removeClass("item-title__token--open"),t.addClass("item-title__token--open");var r=t.parents(".item");r.addClass("item--open"),r.trigger("automator:item:open",r.hasClass("item--open"));var s=t.data("options-id");(0,a.M0)("optionGroup",{itemID:n,groupID:s}),new l.Z(n,s)}));var h=o()("<div/>",{class:"item-title__describe-container"}),f=o()("<div/>",{class:"item-status"});h.append(i.html.addClass("item-title__describe"));var g=new s.Z("checkbox",{color:"green",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipeItem,off:UncannyAutomator.i18n.status.draftRecipeItem},currentValue:UncannyAutomator.recipe.items[n].isLive}),v=g.getFormElement();return f.append(v),h.append(f),this.item.isMissing||v.on("automator:field:change",(function(){var e=g.getValue(),t=!0;if(e&&(t=(0,d.RC)(n).isValid),g.startLoadingAnimation(),t){var o=e?"publish":"draft";if(!e&&UncannyAutomator.recipe.isLive){var s=new r.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,a.hF)(UncannyAutomator.i18n.confirmationModal.statusWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});s.setEvents({afterSetEvents:function(){s.show()},onConfirm:function(){var t;s.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),g.startLoadingAnimation();try{t=i.html.get(0).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}(0,a.L8)("change_post_status",{post_ID:n,post_status:o,sentence_human_readable:i.brackets,sentence_human_readable_html:t},(function(){s.destroy(),new c.Z,new u.Z,new p.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't set the item status"),s.destroy(),g.stopLoadingAnimation(),g.setValue(!e,!1)}))},onCancel:function(){s.destroy(),g.setValue(!e,!1),g.stopLoadingAnimation()},afterHide:function(){s.destroy()}})}else{var l;try{l=i.html.get(0).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}(0,a.L8)("change_post_status",{post_ID:n,post_status:o,sentence_human_readable:i.brackets,sentence_human_readable_html:l},(function(){g.stopLoadingAnimation(),new p.Z}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't set the item status"),g.stopLoadingAnimation(),g.setValue(!e,!1)}))}}else setTimeout((function(){g.stopLoadingAnimation(),g.setValue(!1,!1)}),1e3)})),h}}])&&m(t.prototype,n),e}()},973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c}),n(311);var i=n(756),o=n(464);n(975).vsprintf;var a=n(947),r=n(911);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(975).vsprintf;var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,i.M0)("metabox",{type:"trigger"}).empty();var t=(0,i.Wr)("get",{filter:{itemType:"trigger"}});(0,i.xb)(t)?(new o.Z("trigger"),new r.Z("trigger")):(new a.Z("trigger",t),new r.Z("trigger"),this.isContinuingIntegrationConnection()&&new o.Z("trigger"))}var t,n;return t=e,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==(0,i.Tb)(null,"ua_connecting_integration")&&"trigger"==(0,i.Tb)(null,"ua_connecting_integration_context")}}])&&s(t.prototype,n),e}();const c=l},911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var i=n(311),o=n.n(i),a=n(756),r=n(464);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(973),n(375),n(947),n(975).vsprintf;const l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.shouldCreateMetaboxFooter()&&this.createFooter()}var t,n;return t=e,(n=[{key:"shouldCreateMetaboxFooter",value:function(){var e=!1;if("trigger"==this.itemType){var t=(0,a.Wr)("get",{filter:{itemType:"trigger"}});(0,a.xb)(t)&&(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&"anonymous"!=UncannyAutomator.recipe.type||(e=!0)}if("action"==this.itemType){var n=(0,a.Wr)("get",{filter:{itemType:"action"}});!(0,a.xb)(n)&&(e=!0)}return e}},{key:"createFooter",value:function(){var e=this,t=o()("<div/>",{class:"metabox__footer"}),n=o()("<div/>",{class:"uap-btn uap-btn--secondary"});if(("action"==this.itemType||"trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type)&&t.append(n),"trigger"==this.itemType&&("user"==UncannyAutomator.recipe.type&&n.text(UncannyAutomator.i18n.trigger.addAnother),"anonymous"==UncannyAutomator.recipe.type)){var i=this.createAnonymousNotice();t.append(i)}"action"==this.itemType&&(n.text(UncannyAutomator.i18n.action.addAnother),t.addClass("add-action-btn")),("trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type||"action"==this.itemType)&&n.on("click",(function(){new r.Z(e.itemType)})),(0,a.M0)("metabox",{type:this.itemType}).append(t)}},{key:"createAnonymousNotice",value:function(){return o()('\n\t\t\t<div class="description">\n\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.everyoneOnlyOneTrigger,' <a href="').concat((0,a.XE)("https://automatorplugin.com/knowledge-base/managing-triggers/",{medium:"anonymous_recipe_one_trigger",content:"learn_more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uo-icon uo-icon--external-link-alt"></span></a>\n\t\t\t</div>\n\t\t'))}}])&&s(t.prototype,n),e}()},947:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(311),o=n.n(i),a=n(756),r=n(515),s=n(214),l=n(104),c=n(605),u=n(772),d=n(375);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t,n,i,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"buttonContainer",void 0),m(this,"button",void 0),m(this,"buttonIcon",void 0),m(this,"removeButton",void 0),m(this,"asyncModeField",void 0),m(this,"asyncModeHTML",void 0),m(this,"delayNumberField",void 0),m(this,"delayNumberHTML",void 0),m(this,"delayUnitField",void 0),m(this,"delayUnitHTML",void 0),m(this,"scheduleDateField",void 0),m(this,"scheduleDateHTML",void 0),m(this,"scheduleTimeField",void 0),m(this,"scheduleTimeHTML",void 0),m(this,"scheduleNoticeHTML",void 0),m(this,"modal",void 0),this.itemType=t,this.integrationID=n,this.itemCode=i,this.itemId=o,this.item=UncannyAutomator.recipe.items[o],this.asyncMode=this.item.meta.async_mode,UncannyAutomator.proVersion.startsWith("2")?null:this.createAsyncButton()}var t,n;return t=e,n=[{key:"hasSchedule",value:function(){return!!this.asyncMode&&("delay"==this.asyncMode?this.item.meta.async_delay_number&&this.item.meta.async_delay_unit:"schedule"==this.asyncMode&&this.item.meta.async_schedule_time&&this.item.meta.async_schedule_date)}},{key:"getButtonText",value:function(){if(this.hasSchedule()){var e=UncannyAutomator.i18n.action.asyncActions[this.asyncMode];return(e+=" ")+"<strong>"+this.item.meta.async_sentence+"</strong>"}return UncannyAutomator.i18n.action.asyncActions.delay}},{key:"createAsyncButton",value:function(){var e=this;return this.buttonContainer=o()("<div/>",{class:"item-async"}),this.button=o()("<div/>",{class:"item-async__btn"}),this.buttonIcon=o()("<i/>",{class:"uo-icon uo-icon--clock"}),this.button.html(this.getButtonText()),this.button.prepend(this.buttonIcon),this.buttonContainer.append(this.button),this.hasSchedule()&&this.createRemoveButton(),this.isNew()&&this.createBadge(UncannyAutomator.i18n.action.asyncActions.new),this.button.on("click",(function(){e.buttonContainer.hasClass("disabled")||e.showModal()})),this.buttonContainer.on("automator:asyncButton:maybeDisable",(function(e,t){var n=o()(e.currentTarget);t?(n.attr("uap-tooltip",UncannyAutomator.i18n.action.asyncActions.pleaseSave),n.attr("uap-flow","down"),n.addClass("disabled")):(n.removeAttr("uap-tooltip"),n.removeClass("disabled"))})),this.buttonContainer}},{key:"enable",value:function(){this.button.removeAttr("uap-tooltip"),this.button.removeAttr("disabled")}},{key:"isNew",value:function(){return!0}},{key:"createBadge",value:function(e){this.buttonBadge=o()("<span/>",{class:"async-button__badge"}),this.buttonBadge.text(e),this.button.append(this.buttonBadge)}},{key:"createRemoveButton",value:function(){var e=this;this.removeButton=o()("<span/>",{class:"async-remove"}),this.removeButtonIcon=o()("<i/>",{class:"uo-icon uo-icon--times"}),this.removeButton.text(UncannyAutomator.i18n.action.asyncActions.remove),this.removeButton.on("click",(function(){e.removeSchedule()})),this.removeButton.prepend(this.removeButtonIcon),this.buttonContainer.append(this.removeButton)}},{key:"createModalContent",value:function(){var e=o()("<div/>",{class:"async-action-modal"});if(this.asyncModeHTML=this.createAsyncModeHTML(),this.asyncModeHTML.find(".form-radio__container:first").after(this.createDelayOptions()),this.asyncModeHTML.find(".form-radio__container:last").after(this.createScheduleOptions()),this.attachModeChangeEvent(),e.append(this.asyncModeHTML),this.hasSchedule()){var t=o()("<div/>",{class:"async-notice async-notice__blue"}),n=o()("<i/>",{class:"uo-icon uo-icon--exclamation-triangle"});t.append(n),t.append(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice2),e.append(t)}return e}},{key:"showModal",value:function(){var e=UncannyAutomator.i18n.action.asyncActions.modal.confirm;this.hasSchedule()&&"schedule"==this.asyncMode&&(e=UncannyAutomator.i18n.action.asyncActions.schedule),this.modal=new u.Z({title:UncannyAutomator.i18n.action.asyncActions.modal.title,content:this.createModalContent(),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:e}},{size:"large",customClass:"async-action"}),this.modalEvents()}},{key:"modalEvents",value:function(){var e=this;this.modal.setEvents({afterSetEvents:function(){e.modal.show()},onConfirm:function(){e.submitModal()},afterHide:function(){e.modal.destroy()}})}},{key:"submitModal",value:function(){var e=this.modal.getElements().modal.box.buttons.confirm;if(e.addClass("uap-btn--loading").prop("disabled",!0),this.validateForm().isValid){var t,n=this.asyncModeField.getValue(),i=this.delayNumberField.getValue(),o=this.delayUnitField.getValue(),a=this.scheduleTimeField.getValue(),r=this.scheduleDateField.getValue();t="delay"==n?this.delaySentence():this.scheduleSentence(),this.saveSchedule(n,i,o,a,r,t)}else e.removeClass("uap-btn--loading").prop("disabled",!1)}},{key:"delaySeconds",value:function(){var e,t=this.delayUnitField.getValue(),n=this.delayNumberField.getValue();switch(t){default:e=1;break;case"minutes":e=60;break;case"hours":e=3600;break;case"days":e=86400;break;case"years":e=31536e3}return n*e}},{key:"delaySentence",value:function(){var e=this.delayUnitField.getValue();return 1==this.delayNumberField.getValue()&&(e=e.slice(0,-1)),this.delayNumberField.getValue()+" "+UncannyAutomator.i18n.action.asyncActions.modal[e].toLowerCase()}},{key:"scheduleSeconds",value:function(){return Date.parse(this.scheduleDateField.getValue()+" "+this.scheduleTimeField.getValue())}},{key:"scheduleSentence",value:function(){return this.scheduleDateField.getValue()+" @ "+this.scheduleTimeField.getValue()}},{key:"saveSchedule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,a.L8)("schedule_action",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId,asyncMode:e,delayNumber:n,delayUnit:i,scheduleTime:o,scheduleDate:r,scheduleSentence:s},(function(){t.modal.destroy(),new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){t.modal.destroy(),console.log("â€¼ï¸ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"removeSchedule",value:function(){this.removeButtonIcon.removeClass("uo-icon--times"),this.removeButtonIcon.addClass("uo-icon--loading uo-icon--rotate"),(0,a.L8)("remove_schedule",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId},(function(){new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"createTimeZone",value:function(){var e=o()("<a/>",{href:UncannyAutomator.i18n.action.asyncActions.modal.timezoneLink,target:"_blank"}),t=o()("<i/>",{class:"uo-icon uo-icon--question-circle"}),n=o()("<span/>",{class:"schedule-fields__description"}).html("<strong>"+UncannyAutomator.i18n.action.asyncActions.modal.timezone+"</strong>: "+UncannyAutomator.i18n.action.asyncActions.modal.timezoneString);return e.append(t),n.append(e),n}},{key:"createAsyncModeHTML",value:function(){return this.asyncModeField=new c.Z("radio",{itemType:"action",optionCode:"schedule_type",name:"schedule-type",isRequired:!0,currentValue:this.asyncMode?this.asyncMode:"delay",options:[{value:"delay",text:UncannyAutomator.i18n.action.asyncActions.delay},{value:"schedule",text:UncannyAutomator.i18n.action.asyncActions.schedule}]}),this.asyncModeField.createFormElement().addClass("schedule-type-radio")}},{key:"attachModeChangeEvent",value:function(){var e=this;this.asyncModeHTML.on("automator:field:change",(function(){var t,n=e.asyncModeField.getValue();t="schedule"==n?UncannyAutomator.i18n.action.asyncActions.schedule:UncannyAutomator.i18n.action.asyncActions.modal.confirm,e.hasSchedule()||("schedule"==n?e.scheduleNoticeHTML.removeClass("hidden"):e.scheduleNoticeHTML.addClass("hidden")),e.modal.elements.modal.box.buttons.confirm.text(t)}))}},{key:"createScheduleOptions",value:function(){var e=o()("<div/>",{class:"schedule-options"}),t=o()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleDesc),n=o()("<div/>",{class:"schedule-fields"});return this.hasSchedule()||(this.scheduleNoticeHTML=o()("<div/>",{class:"schedule-notice hidden"}),o()("<i/>",{class:"uo-icon uo-icon--question-circle"}),this.scheduleNoticeHTML.text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice1),this.scheduleNoticeHTML.addClass("schedule-notice__yellow")),e.append(t),n.append(this.createScheduleDateHTML()),n.append(this.createScheduleTimeHTML()),e.append(n),e.append(this.createTimeZone()),e.append(this.scheduleNoticeHTML),e}},{key:"createDelayOptions",value:function(){var e=o()("<div/>",{class:"delay-options"}),t=o()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.delayDesc),n=o()("<div/>",{class:"delay-fields"});this.delayNumberHTML=this.createDelayNumberHTML(),this.delayUnitHTML=this.createDelayUnitHTML();var i=o()("<span/>",{class:"delay-fields__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.after);return n.append(this.delayNumberHTML),n.append(this.delayUnitHTML),n.append(i),e.append(t),e.append(n),e}},{key:"createDelayNumberHTML",value:function(){this.delayNumberField=new c.Z("int",{itemType:"action",optionCode:"delay-number",isRequired:!0,placeholder:"10",supportsTokens:!1,currentValue:this.item.meta.async_delay_number?this.item.meta.async_delay_number:""},!0,this.validateDelayNumber);var e=this.delayNumberField.createFormElement();return e.addClass("delay-fields__number"),this.delayNumberField.initCodeMirror(),e}},{key:"createDelayUnitHTML",value:function(){return this.delayUnitField=new c.Z("select",{itemType:"action",optionCode:"delay-unit",currentValue:this.item.meta.async_delay_unit?this.item.meta.async_delay_unit:"minutes",customClass:"hide-this",isRequired:!0,options:[{value:"seconds",text:UncannyAutomator.i18n.action.asyncActions.modal.seconds},{value:"minutes",text:UncannyAutomator.i18n.action.asyncActions.modal.minutes},{value:"hours",text:UncannyAutomator.i18n.action.asyncActions.modal.hours},{value:"days",text:UncannyAutomator.i18n.action.asyncActions.modal.days},{value:"years",text:UncannyAutomator.i18n.action.asyncActions.modal.years}]}),this.delayUnitField.createFormElement().addClass("delay-fields__unit")}},{key:"createScheduleDateHTML",value:function(){this.scheduleDateField=new c.Z("date",m({itemType:"action",optionCode:"schedule-date",isRequired:!0,placeholder:UncannyAutomator.i18n.action.asyncActions.modal.today,dateFormat:UncannyAutomator.i18n.action.asyncActions.modal.dateFormat,supportsTokens:!1,currentValue:this.item.meta.async_schedule_date?this.item.meta.async_schedule_date:""},"placeholder",UncannyAutomator.i18n.format.date.selectDate));var e=this.scheduleDateField.createFormElement();return e.addClass("schedule-fields__date"),this.scheduleDateField.initCodeMirror(),e}},{key:"createScheduleTimeHTML",value:function(){this.scheduleTimeField=new c.Z("time",m({itemType:"action",optionCode:"schedule-time",isRequired:!0,placeholder:"11:00 AM",timeFormat:"h:i K",timeAltFormat:"h:i K",supportsTokens:!1,currentValue:this.item.meta.async_schedule_time?this.item.meta.async_schedule_time:""},"placeholder",UncannyAutomator.i18n.format.date.selectTime));var e=this.scheduleTimeField.createFormElement();return e.addClass("schedule-fields__time"),this.scheduleTimeField.initCodeMirror(),e}},{key:"validateForm",value:function(){var e;switch(this.asyncModeField.getValue()){case"schedule":e=this.validateScheduleFields();break;case"delay":e=this.delayNumberField.validate();break;default:e={isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.unsupported}}return e.isValid?{isValid:!0}:e}},{key:"validateScheduleFields",value:function(){var e=this.scheduleDateField.validate();return e.isValid&&(e=this.scheduleTimeField.validate()),e}},{key:"validateDelayNumber",value:function(e,t){return e<1?{isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.positiveNumber}:{isValid:!0}}}],n&&p(t.prototype,n),e}();const f=h;var g=n(865);function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var y=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o().each(n,(function(e,n){if(t==n.itemType){var o=i.createItem(e);(0,a.M0)("metabox",{type:t}).append(o)}}))}var t,n;return t=e,n=[{key:"createItem",value:function(e){var t=UncannyAutomator.recipe.items[e],n=o()("<div/>",{class:"item","data-id":e});t.isMissing&&n.addClass("item--missing"),t.meta.async_mode&&n.addClass("item--hasSchedule"),(0,a.xb)(t.inlineCss)||(t.inlineCss=t.inlineCss.replace(/{{item_id}}/g,e),n.prepend(t.inlineCss));var i=this.createHeader(t.integrationCode,t.itemType,t.itemCode,e),r=this.createNotice(t);return n.append(i),n.append(r),n.on("automator:item:open",(function(e,t){var i=n.find(".item-async");o()(i[0]).trigger("automator:asyncButton:maybeDisable",t)})),n}},{key:"createHeader",value:function(e,t,n,i){var c=o()("<div/>"),u=o()("<div/>",{class:"item-title uap-clear"}),d=UncannyAutomator.recipe.items[i];d.isMissing&&(e=null);var p=new r.Z(t,e,n,i);c.append(p);var m=new s.Z(e);c.append(m);var h=d.integrationName,v=new l.Z(e,h);u.append(v);var y=new g.Z(t,e,n,i);u.append(y),c.append(u);var _=o()("<div/>",{class:"item__content"});if(c.append(_),"action"==t&&(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var b=new f(t,e,n,i,c);c.append(b)}return c}},{key:"createNotice",value:function(e){var t;return e.isMissing&&(t=o()("<div/>",{class:"item-notice"})).text(UncannyAutomator.i18n.itemMissing),t}}],n&&v(t.prototype,n),e}();const _=y},838:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(311),o=n.n(i),a=n(756),r=n(593),s=n(605);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n(975).vsprintf;const c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={metabox:o()("#uo-automator-publish-metabox"),timesPerUser:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_completions_allowed"},timesPerRecipe:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_max_completions_allowed"},toggle:null},this.createMetabox()}var t,n;return t=e,(n=[{key:"createMetabox",value:function(){var e=o()("<div/>",{id:"uap-publish-metabox"}),t=o()("<div/>",{class:"metabox__content"}),n=o()("<div/>",{class:"metabox__footer"});if("anonymous"!=UncannyAutomator.recipe.type){var i=o()("<div/>",{class:"publish-row"}),l=o()("<div/>",{class:"publish-row__visible"}),c=o()("<span/>",{class:"publish-row__icon"}),u=o()("<i/>",{class:"uo-icon uo-icon--repeat-alt"}),d=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerUser);UncannyAutomator.recipe.publish.timesPerUser=-1==UncannyAutomator.recipe.publish.timesPerUser?"":UncannyAutomator.recipe.publish.timesPerUser;var p=(0,a.xb)(UncannyAutomator.recipe.publish.timesPerUser)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerUser,m=o()("<span/>",{class:"publish-row__value"}).text(p),h=o()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),f=o()("<div/>",{class:"publish-row__hidden"}),g=o()("<div/>",{class:"publish-row__settings"});this.elements.timesPerUser.editLink=h,this.elements.timesPerUser.hiddenBox=f;var v=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerUser,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(e){var t={isValid:!1,message:""};return e>=1?t.isValid=!0:t.message=UncannyAutomator.i18n.publish.oneOrBigger,t}));this.timesField=v;var y=o()("<div/>",{class:"publish-row__buttons"}),_=o()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),b=o()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);this.elements.timesPerUser.saveButton=_,this.elements.timesPerUser.cancelButton=b,y.append(_),y.append(b),g.append(v.getFormElement()),g.append(y),f.append(g),c.append(u),l.append(c),l.append(d),l.append(m),l.append(h),i.append(l),i.append(f),t.append(i)}var w=this.timesPerRecipe();t.append(w);var A=o()("<div/>",{class:"publish-row"}),k=o()("<div/>",{class:"publish-row__visible"}),C=o()("<span/>",{class:"publish-row__icon"}),U=o()("<i/>",{class:"uo-icon uo-icon--user-astronaut"}),T=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeType),x=o()("<span/>",{class:"publish-row__value"}),E=o()('\n\t\t\t\t<a href="'.concat((0,a.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/",{medium:"publish_metabox",content:"recipe_type_question_icon"}),'" class="publish-row__learn-more" target="_blank"><span class="uo-icon uo-icon--question-circle"></span></a>\n\t\t\t'));"user"==UncannyAutomator.recipe.type&&x.text(UncannyAutomator.i18n.recipeType.userRecipeName),"anonymous"==UncannyAutomator.recipe.type&&x.text(UncannyAutomator.i18n.recipeType.everyoneRecipeName),C.append(U),k.append(C),k.append(T),k.append(x),k.append(E),A.append(k),t.append(A);var D=o()("<div/>",{class:"publish-row"}),M=o()("<div/>",{class:"publish-row__visible"}),S=o()("<span/>",{class:"publish-row__icon"}),O=o()("<i/>",{class:"uo-icon uo-icon--calendar-alt"}),I=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.createdOn),$=o()("<span/>",{class:"publish-row__value"}).text(UncannyAutomator.recipe.publish.createdOn);S.append(O),M.append(S),M.append(I),M.append($),D.append(M),t.append(D);var L=UncannyAutomator.recipe.publish.recipeRunTimes,R=o()("<a/>",{class:"publish-row__recipe-runs",target:"_blank",href:UncannyAutomator.recipe.publish.recipeRunTimesUrl.replace(/&amp;/g,"&")}).text(UncannyAutomator.recipe.publish.recipeRunTimesViewLogs),P=o()("<div/>",{class:"publish-row"}),F=o()("<div/>",{class:"publish-row__visible"}),V=o()("<span/>",{class:"publish-row__icon"}),j=o()("<i/>",{class:"uo-icon uo-icon--repeat-alt"}),K=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeRunTimes);V.append(j),F.append(V),F.append(K),F.append(o()("<span/>",{class:"publish-row__value"}).text(L)),L>0&&F.append(R),P.append(F),t.append(P);var N=o()("<div/>",{class:"publish-row"}),q=o()("<div/>",{class:"publish-row__visible"}),H=o()("<a/>",{class:"publish-row__copy-to-draft button button-secondary",href:UncannyAutomator.recipe.publish.copyToDraft.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.publish.copyRecipe);q.append(H),N.append(q),t.append(N);var B=o()("<div/>",{class:"publish-footer__row uap-clear"}),W=o()("<div/>",{class:"publish-footer__left"}),Z=o()("<a/>",{class:"publish-footer__move-to-draft",href:UncannyAutomator.recipe.publish.moveToTrash.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.proOnly.moveToTrash),Y=o()("<div/>",{class:"publish-footer__right"}),z=new s.Z("checkbox",{color:"gutenberg",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipe,off:UncannyAutomator.i18n.status.draftRecipe},currentValue:UncannyAutomator.recipe.isLive});UncannyAutomator.recipe.publish.statusToggle=z;var G=z.getFormElement();this.recipeStatusToggle=z,this.elements.toggle=G,W.append(Z),Y.append(G),B.append(W),B.append(Y),n.append(B),e.append(t),e.append(n),this.elements.metabox.html(e),new r.Z,this.bind(),this.validateStatus()}},{key:"timesPerRecipe",value:function(){var e=o()("<div/>",{class:"publish-row"}),t=o()("<div/>",{class:"publish-row__visible"}),n=o()("<span/>",{class:"publish-row__icon"}),i=o()("<i/>",{class:"uo-icon uo-icon--stopwatch-20"}),r=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerRecipe);UncannyAutomator.recipe.publish.timesPerRecipe=-1==UncannyAutomator.recipe.publish.timesPerRecipe?"":UncannyAutomator.recipe.publish.timesPerRecipe;var l=(0,a.xb)(UncannyAutomator.recipe.publish.timesPerRecipe)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerRecipe,c=o()("<span/>",{class:"publish-row__value"}).text(l),u=o()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),d=o()("<div/>",{class:"publish-row__hidden"}),p=o()("<div/>",{class:"publish-row__settings"});this.elements.timesPerRecipe.editLink=u,this.elements.timesPerRecipe.hiddenBox=d;var m=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerRecipe,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(e){var t={isValid:!1,message:""};return e>=1?t.isValid=!0:t.message=UncannyAutomator.i18n.publish.oneOrBigger,t}));this.timesRecipeField=m;var h=o()("<div/>",{class:"publish-row__buttons"}),f=o()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),g=o()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return this.elements.timesPerRecipe.saveButton=f,this.elements.timesPerRecipe.cancelButton=g,h.append(f),h.append(g),p.append(m.getFormElement()),p.append(h),d.append(p),n.append(i),t.append(n),t.append(r),t.append(c),t.append(u),e.append(t),e.append(d),e}},{key:"validateStatus",value:function(){UncannyAutomator.recipe.isLive&&!UncannyAutomator.recipe.isValid&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}},{key:"validateTimesPerFields",value:function(t,n,i){t.editLink.on("click",(function(){t.hiddenBox.slideToggle(300)})),t.cancelButton.on("click",(function(){t.hiddenBox.slideToggle(300,(function(){new e}))})),t.saveButton.on("click",(function(){if(i.validate().isValid){t.saveButton.addClass("uap-btn--loading uap-btn--disabled");var o=i.getValue();(0,a.xb)(o)&&(o=-1),(0,a.L8)(t.endPoint,{post_ID:UncannyAutomator.recipe.id,recipe_completions_allowed:o},(function(){"recipe_completions_allowed"==t.endPoint?UncannyAutomator.recipe.publish.timesPerUser=o:UncannyAutomator.recipe.publish.timesPerRecipe=o,t.hiddenBox.slideToggle(300,(function(){new e}))}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save times per user"),i.setValue(n),t.saveButton.removeClass("uap-btn--loading uap-btn--disabled")}))}})),i.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))}},{key:"bind",value:function(){var t=this;"anonymous"!=UncannyAutomator.recipe.type&&this.validateTimesPerFields(this.elements.timesPerUser,UncannyAutomator.recipe.publish.timesPerUser,this.timesField),this.validateTimesPerFields(this.elements.timesPerRecipe,UncannyAutomator.recipe.publish.timesPerRecipe,this.timesRecipeField),this.elements.toggle.on("automator:field:change",(function(){t.recipeStatusToggle.startLoadingAnimation();var n=t.recipeStatusToggle.getValue(),i=n?"publish":"draft";!n||n&&UncannyAutomator.recipe.isValid?(0,a.L8)("change_post_status",{post_ID:UncannyAutomator.recipe.id,post_status:i},(function(){UncannyAutomator.recipe.isLive=n,new e}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't set the recipe status"),setTimeout((function(){t.recipeStatusToggle.stopLoadingAnimation(),t.recipeStatusToggle.setValue(!1,!1)}),1e3)})):(UncannyAutomator.recipe.errorMode=!0,new r.Z,setTimeout((function(){t.recipeStatusToggle.stopLoadingAnimation(),t.recipeStatusToggle.setValue(!1,!1)}),1e3))}))}}])&&l(t.prototype,n),e}()},593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(311),o=n.n(i),a=n(756);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={container:o()("#uo-uap-notices")},0==this.elements.container.length&&(this.createContainer(),this.elements.container=o()("#uo-uap-notices")),this.emptyContainer(),this.createWarning(),UncannyAutomator.recipe.errorMode&&this.createError()}var t,n;return t=e,(n=[{key:"emptyContainer",value:function(){this.elements.container.empty()}},{key:"createContainer",value:function(){var e=o()("<div/>",{id:"uo-uap-notices",class:"uap"});o()("#uap-publish-metabox").prepend(e)}},{key:"createError",value:function(){if(!(0,a.xb)(UncannyAutomator.recipe.message.error)){var e=o()("<div/>",{class:"uo-notice uo-notice--error"}).text(UncannyAutomator.recipe.message.error);this.elements.container.append(e)}}},{key:"createWarning",value:function(){if(!(0,a.xb)(UncannyAutomator.recipe.message.warning)){var e=o()("<div/>",{class:"uo-notice uo-notice--warning"}).text(UncannyAutomator.recipe.message.warning);this.elements.container.append(e)}}}])&&r(t.prototype,n),e}()},347:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(311),o=n.n(i),a=n(756);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doWhenReady=t,this.render(),this.getElements(),this.listenSubmission()}var t,n;return t=e,(n=[{key:"render",value:function(){var e=o()('\n\t\t\t<div class="uap">\n\t\t\t\t<div id="uap-type-selector" class="uap-type-selector">\n\t\t\t\t\t<div class="uap-type-selector__box">\n\t\t\t\t\t\t<form id="uap-type-selector-form" class="uap-type-selector__form">\n\t\t\t\t\t\t\t<div class="uap-type-selector__title">\n\t\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.title,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__content">\n\t\t\t\t\t\t\t\t<div class="uap-type-selector__types">\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--user">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="user" id="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--user"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--anonymous">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="anonymous" id="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--anonymous"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.everyoneRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.everyoneRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__warning">\n\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.cantChangeLaterNotice,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__buttons">\n\t\t\t\t\t\t\t\t<button type="submit" id="uap-type-selector-submit-button" class="uap-btn uap-btn--primary">').concat(UncannyAutomator.i18n.confirm,"</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"));o()("body").append(e)}},{key:"getElements",value:function(){this.$elements={container:o()("#uap-type-selector"),form:o()("#uap-type-selector-form"),warning:o()("#uap-type-selector .uap-type-selector__warning"),submitButton:o()("#uap-type-selector-submit-button")}}},{key:"listenSubmission",value:function(){var e=this;this.$elements.form.on("submit",(function(t){t.preventDefault();var n=e.$elements.form.find('input[name="uap-recipe-type"]:checked').val();(0,a.xb)(n)?e.showError(UncannyAutomator.i18n.recipeType.errorDidNotSelectType):["user","anonymous"].includes(n)?e.saveRecipeType(n):e.showError(UncannyAutomator.i18n.recipeType.errorTryingToSaveOtherValue)}))}},{key:"saveRecipeType",value:function(e){var t=this,n={post_ID:UncannyAutomator.recipe.id,recipe_type:e};this.$elements.submitButton.addClass("uap-btn--loading uap-btn--disabled"),(0,a.L8)("change_post_recipe_type",n,(function(n){if(n.success){t.$elements.container.remove(),UncannyAutomator.recipe.type=e;var i=o()("#uo-recipe-triggers-meta-box-ui h2.hndle.ui-sortable-handle"),a=UncannyAutomator.i18n.trigger.userTriggers;"anonymous"==UncannyAutomator.recipe.type&&(a=UncannyAutomator.i18n.trigger.everyoneTrigger),i.text(a),t.doWhenReady(e)}else t.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save the recipe type"),t.$elements.submitButton.removeClass("uap-btn--loading uap-btn--disabled"),t.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}))}},{key:"showError",value:function(e){var t=o()('\n\t\t\t<div class="uap-type-selector__error">\n\t\t\t\t'.concat(e,"\n\t\t\t</div>\n\t\t")),n=this.$elements.container.find(".uap-type-selector__error");n.length>0&&n.remove(),t.insertAfter(this.$elements.warning),setTimeout((function(){t.addClass("uap-type-selector__error--shake")}),10)}}])&&r(t.prototype,n),e}()},463:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Tokens});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(756);function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){s=!0,o=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var vsprintf=__webpack_require__(975).vsprintf,Tokens=function(){function Tokens(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Tokens),this.saveData(e,t,n),this.getData()}return _createClass(Tokens,[{key:"saveData",value:function(e,t,n){this.itemType=e,this.fieldType=t,this.options=Object.assign({includeGroupName:!0,includeGroupIcon:!0,includeGroupTokens:!0},n),this.tokensRegEx=new RegExp(/\{\{(.*?)\}\}/gm),this.tokensRegExNoAttributes=new RegExp(/[^\="]\{\{(.*?)\}\}[^\"]/gm),this.tokensThatRequireUser=[]}},{key:"getData",value:function(){this.tokens=this.getAllTokens()}},{key:"getAllTokens",value:function(){var e=[],t=this.getCommonTokens();t.tokens.length>0&&e.push(t);var n=this.getAdvancedTokens();n.tokens.length>0&&e.push(n);var i=this.getItemsTokens();return[].concat(_toConsumableArray(e),_toConsumableArray(i))}},{key:"getCommonTokens",value:function(){var e=this,t={id:"common"};return this.options.includeGroupName&&(t.name=UncannyAutomator.i18n.tokens.global.common),this.options.includeGroupIcon&&(t.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<i class="uo-icon uo-icon--bolt"></i>\n\t\t\t')),this.options.includeGroupTokens&&(t.tokens=[{id:"site_name",type:"text",name:UncannyAutomator.i18n.tokens.global.siteName,cacheable:!0}],("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&t.tokens.push({id:"user_id",type:"int",name:UncannyAutomator.i18n.tokens.global.userID,cacheable:!0,requiresUser:!0},{id:"user_username",type:"text",name:UncannyAutomator.i18n.tokens.global.userUsername,cacheable:!0,requiresUser:!0},{id:"user_firstname",type:"text",name:UncannyAutomator.i18n.tokens.global.userFirstName,cacheable:!0,requiresUser:!0},{id:"user_lastname",type:"text",name:UncannyAutomator.i18n.tokens.global.userLastName,cacheable:!0,requiresUser:!0},{id:"user_email",type:"email",name:UncannyAutomator.i18n.tokens.global.userEmail,cacheable:!0,requiresUser:!0},{id:"user_displayname",type:"text",name:UncannyAutomator.i18n.tokens.global.userDisplay,cacheable:!0,requiresUser:!0},{id:"reset_pass_link",type:"url",name:UncannyAutomator.i18n.tokens.global.userResetPassLink,cacheable:!0,requiresUser:!0}),t.tokens.push({id:"admin_email",type:"email",name:UncannyAutomator.i18n.tokens.global.adminEmail,cacheable:!0},{id:"site_url",type:"url",name:UncannyAutomator.i18n.tokens.global.siteUrl,cacheable:!0},{id:"recipe_name",type:"text",name:UncannyAutomator.i18n.tokens.global.recipeName,cacheable:!0},{id:"current_date",type:"text",name:UncannyAutomator.i18n.tokens.global.currentDate,cacheable:!0},{id:"current_time",type:"text",name:UncannyAutomator.i18n.tokens.global.currentTime,cacheable:!0})),t.tokens.forEach((function(t){t.requiresUser&&e.tokensThatRequireUser.push(t.id)})),t}},{key:"getAdvancedTokens",value:function(){var e=this,t={id:"advanced",tokens:[]};return this.options.includeGroupName&&(t.name=UncannyAutomator.i18n.tokens.global.advanced),this.options.includeGroupIcon&&(t.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<i class="uo-icon uo-icon--bolt"></i>\n\t\t\t')),this.options.includeGroupTokens&&("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&(t.tokens.push({id:"USERMETA:KEY",type:"text",name:UncannyAutomator.i18n.tokens.global.userMetaKey,cacheable:!1,requiresUser:!0}),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.wp)&&"1"===UncannyAutomator.wp&&t.tokens.push({id:"AUTOLOGINLINK",type:"text",name:UncannyAutomator.i18n.tokens.global.autoLoginLink,cacheable:!0,requiresUser:!0})),t.tokens.forEach((function(t){t.requiresUser&&e.tokensThatRequireUser.push(t.id)})),t}},{key:"getItemsTokens",value:function(){var e=this,t=[],n=UncannyAutomator.recipe.items;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.itemType)&&(n={},["action","closure","user-selector"].includes(this.itemType)&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Wr)("get",{filter:{itemType:"trigger"}}))),"closure"==this.itemType&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Wr)("get",{filter:{itemType:"action"}})))),Object.entries(n).forEach((function(n){var i=_slicedToArray(n,2),o=(i[0],i[1]),a=e.getItemTokens(o);(a.tokens.length>0||!e.options.includeGroupTokens)&&t.push(a)})),t}},{key:"getItemTokens",value:function getItemTokens(item){var tokensGroup={id:item.itemCode,integrationId:item.integrationCode};if(this.options.includeGroupName){var itemSentence=item.sentence;item.isMissing||(itemSentence=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Vx)(item.integrationCode,item.itemType,item.itemCode).sentence),tokensGroup.name=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(item,itemSentence,UncannyAutomator.recipe.items[item.id].meta).html}if(this.options.includeGroupIcon){var $icon;if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.integrations[item.integrationCode])){var integration=UncannyAutomator.integrations[item.integrationCode];(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_svg)?$icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img \n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_svg,'" \n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')):(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_16)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_32)&&($icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img \n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_16,'" \n\t\t\t\t\t\t\tsrcset="').concat(vsprintf("%s 1x, %s 2x",[integration.icon_16,integration.icon_32]),'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')))}tokensGroup.icon=$icon}if(this.options.includeGroupTokens){var itemTokens=[];if(Object.entries(item.options).forEach((function(e){var t=_slicedToArray(e,2);t[0],t[1].fields.forEach((function(e){var t=e.getAttributes();"repeater"==t.fieldType?e.fieldRows.forEach((function(e,n){var i=n;e.forEach((function(e){itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(t.optionCode,":").concat(i,":").concat(e.getAttributes().optionCode),name:"".concat(t.tokenName," - ").concat(vsprintf(UncannyAutomator.i18n.rowNumber,[i+1])," - ").concat(e.getAttributes().tokenName),type:"select"==e.getAttributes().fieldType||"textarea"==e.getAttributes().fieldType?"text":e.getAttributes().fieldType,value:e.getValue(),fieldId:e.getAttributes().optionCode,itemID:item.id,cacheable:!1})}))})):"group"==t.fieldType||((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(t.customFieldTokens)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Kn)(t.customFieldTokens)?Object.entries(t.customFieldTokens).forEach((function(n){var i=_slicedToArray(n,2),o=i[0],a=i[1];itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(o),name:a,type:"select"==t.fieldType||"textarea"==t.fieldType?"text":t.fieldType,value:e.getValue(),fieldId:t.optionCode,itemID:item.id,cacheable:!0})})):itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(t.optionCode),name:t.tokenName,type:"select"==t.fieldType||"textarea"==t.fieldType?"text":t.fieldType,value:e.getValue(),fieldId:t.optionCode,itemID:item.id,cacheable:!0}))}))})),item.tokens.forEach((function(e){itemTokens.push({id:"".concat(item.id,":").concat(e.tokenIdentifier,":").concat(e.tokenId),name:e.tokenName,type:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(e.tokenType)?e.tokenType:"text",itemID:item.id,cacheable:!0})})),tokensGroup.tokens=itemTokens,!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(item.filterTokens))try{var filterTokens=eval("(".concat(item.filterTokens.replace("<script>","").replace("<\/script>","").trim(),")"));itemTokens=filterTokens(tokensGroup,item)}catch(e){UncannyAutomator.dev.developerMode&&(console.warning(e),console.log(item.filterTokens))}}return tokensGroup}},{key:"filterTokensByType",value:function(e){var t=this;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.fieldType)&&(["text","textarea","url"].includes(this.fieldType)||(e=e.filter((function(e){var n=e.type;return"float"==t.fieldType&&"int"==n&&(n="float"),t.fieldType==n})))),e}},{key:"createTokenDOMNode",value:function(e){var t=null,n=this.getTokenDataByID(e);if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n)){if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.cache.tokens[n.id]))t=UncannyAutomator.cache.tokens[n.id];else{(t=document.createElement("span")).classList.add("uap-token"),t.appendChild(n.group.icon[0].cloneNode());var i=document.createElement("span");i.classList.add("uap-token__name"),i.innerHTML=n.name,t.appendChild(i),n.cacheable&&(UncannyAutomator.cache.tokens[n.id]=t)}t=t.cloneNode(!0)}else{(t=document.createElement("span")).classList.add("uap-token","uap-token--invalid");var o=document.createElement("i");o.classList.add("uo-icon","uo-icon--exclamation"),t.appendChild(o);var a=document.createElement("span");a.classList.add("uap-token__name"),a.innerHTML=e,t.appendChild(a)}return t}},{key:"getTokenDataByID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n=null;if(e.startsWith("USERMETA:")&&(e="USERMETA:KEY"),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(e)||this.tokens.some((function(t){if(n=t.tokens.reduce((function(t,n){return n.id==e?n:t}),null),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n))return n.group={id:t.id,name:t.name,icon:t.icon},!0})),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n)&&e.startsWith("USERMETA:")){n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},n);var i=t.replace("USERMETA:","");n.id=n.id.replace("KEY",i),n.name=vsprintf(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[i])}return n}},{key:"renderTextWithTokens",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({template:"",parseTokensInAttributes:!0},n);var i=!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(n.template),o=document.createElement("span");return e=e.replace(n.parseTokensInAttributes?this.tokensRegEx:this.tokensRegExNoAttributes,(function(e,o){var a=t.createTokenDOMNode(o).outerHTML;return i&&(a=vsprintf(n.template,[a,o])),e.replace("{{".concat(o,"}}"),a)})),o.innerHTML=e,o}}]),Tokens}()},454:(e,t,n)=>{"use strict";n.d(t,{RC:()=>l,R3:()=>c,OP:()=>u,oy:()=>h});var i=n(311),o=n.n(i),a=n(756),r=(n(838),n(463)),s=n(975).vsprintf;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={isValid:!1};if((0,a.$K)(e)){var i=UncannyAutomator.recipe.items[e];if(!i.isMissing&&!(0,a.xb)(i)&&(n.isValid=i.isValid,!i.isValid)){var r=(0,a.M0)("item",{id:e}).item;r.addClass("item--error"),o().each(i.options,(function(t,n){if(!n.isValid){var i=(0,a.M0)("optionGroup",{itemID:e,groupID:t});i.tokenInSentence.addClass("item-title__token--error item-title__token--error-shake"),i.fieldsContainer.addClass("item-options__group--error"),i.optionsContainer.addClass("item-options--error"),setTimeout((function(){i.tokenInSentence.removeClass("item-title__variable--error-shake")}),1e3),(0,a.$K)(i.optionsContainer)&&c(i.optionsContainer)}}))}}else n.isValid=!1,(0,a.xb)(t)&&console.error("Neither itemID nor the $item are defined. One of them must be defined.");return n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={isValid:!1},i=e.find('\n\t\tinput.form-element__input[data-is-child-field="'.concat(t?"true":"false",'"],\n\t\ttextarea.form-element__textarea[data-is-child-field="').concat(t?"true":"false",'"],\n\t\tselect.form-element__select[data-is-child-field="').concat(t?"true":"false",'"],\n\t\t.form-checkbox input,\n\t\t.form-radio')),a=!0;return i.each((function(){var t=o()(this),n=(t.data("type"),{});if(t.hasClass("form-radio")){var i=t.find("input").first(),r=t.find("input:checked");n={field_type:"radio",value:r.length>0?r.val():"",attributes:{supportsTokens:i.data("supportstokens"),required:i.data("required")}}}else n=t.hasClass("form-element__select")?{field_type:"select",value:t.val(),attributes:{supportsTokens:t.data("supportstokens"),required:t.data("required"),supportsCustomValue:t.data("supports-custom-value")}}:{field_type:t.data("type"),value:t.val(),attributes:{supportsTokens:t.data("supportstokens"),required:t.data("required")}};"checkbox"==n.field_type&&(n.value=t.is(":checked")),u(t,n.field_type,n.value,n.attributes).isValid||(a=!1,e.addClass("item-options--error"))})),n.isValid=a,n}function u(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{supportsTokens:!1,required:!1},r=arguments.length>4?arguments[4]:void 0,s={isValid:!1,message:""},l=(0,a.ew)(),u={select:{empty:UncannyAutomator.i18n.validation.field.select.empty,invalid:UncannyAutomator.i18n.validation.field.select.invalid},text:{empty:UncannyAutomator.i18n.validation.field.text.empty,invalid:UncannyAutomator.i18n.validation.field.text.invalid},textarea:{empty:UncannyAutomator.i18n.validation.field.textarea.empty,invalid:UncannyAutomator.i18n.validation.field.textarea.invalid},int:{empty:UncannyAutomator.i18n.validation.field.int.empty,invalid:UncannyAutomator.i18n.validation.field.int.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.int.multipleTokens},float:{empty:UncannyAutomator.i18n.validation.field.float.empty,invalid:UncannyAutomator.i18n.validation.field.float.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.float.multipleTokens},email:{empty:UncannyAutomator.i18n.validation.field.email.empty,single:{invalid:UncannyAutomator.i18n.validation.field.email.single.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.single.multipleTokens},multiple:{invalid:UncannyAutomator.i18n.validation.field.email.multiple.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens}},url:{empty:UncannyAutomator.i18n.validation.field.url.empty,invalid:UncannyAutomator.i18n.validation.field.url.invalid},checkbox:{empty:UncannyAutomator.i18n.validation.field.checkbox.empty,invalid:UncannyAutomator.i18n.validation.field.checkbox.invalid},radio:{empty:UncannyAutomator.i18n.validation.field.radio.empty,invalid:UncannyAutomator.i18n.validation.field.radio.invalid},date:{empty:UncannyAutomator.i18n.validation.field.date.empty,invalid:UncannyAutomator.i18n.validation.field.date.invalid},time:{empty:UncannyAutomator.i18n.validation.field.time.empty,invalid:UncannyAutomator.i18n.validation.field.time.invalid},invalidType:UncannyAutomator.i18n.validation.field.invalidType};try{if("textarea"==t&&!(0,a.xb)(e)&&e.is(":not(:visible)")){var p=e.closest(".form-element");p.find(".switch-html").trigger("click"),n=e.val(),p.find(".switch-tmce").trigger("click")}}catch(e){UncannyAutomator.dev.developerMode&&console.warning(e)}if((0,a.d3)(t,l)){if("checkbox"!=t||(0,a.xb)(n)||["true","false"].includes(n)&&(n="true"==n),i.required&&((0,a.xb)(n)||"checkbox"==t&&!1===n))s.message=u[t].empty;else if(!i.required&&(0,a.xb)(n))s.isValid=!0;else if(""!=n){var h;switch(t){case"select":if(s.isValid=!0,i.supportsCustomValue&&"automator_custom_value"==n){var f=e.closest(".form-element").find(".form-element-children");1==f.length&&(s.isValid=c(f,!0).isValid)}if(s.isValid&&(0,a.$K)(r)){var g=r(n);s.isValid=g.isValid,g.isValid||(s.message=g.message)}break;case"text":case"textarea":if(s.isValid=!0,(0,a.$K)(r)){var v=r(n);s.isValid=v.isValid,v.isValid||(s.message=v.message)}break;case"int":var y,_=new RegExp(/^([+-]?[1-9]\d*|0)$/gm);if(h=d(n),i.supportsTokens&&h.hasTokens?1==h.tokens.length?s.isValid=!0:s.message=u.int.multipleTokens:_.test(n)?s.isValid=!0:s.message=u.int.invalid,s.isValid&&(0,a.$K)(r)){var b=r(n,y);s.isValid=b.isValid,b.isValid||(s.message=b.message)}break;case"float":var w,A=new RegExp(/^[+-]?((\d+(\.|\,)?\d*)|(\.\d+))$/gm);if(h=d(n),i.supportsTokens&&h.hasTokens?1==h.tokens.length?s.isValid=!0:s.message=u.float.multipleTokens:A.test(n)?s.isValid=!0:s.message=u.float.invalid,s.isValid&&(0,a.$K)(r)){var k=r(n,w);s.isValid=k.isValid,k.isValid||(s.message=k.message)}break;case"email":var C,U=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),T=[];n.includes(",")?(T=n.split(","),o().each(T,(function(e,t){T[e]=t.trim()}))):T.push(n.trim()),h=d(n);var x=!0,E=T.length>1;if(i.supportsTokens&&h.hasTokens){var D=!1;o().each(T,(function(e,t){if(!((h=d(t)).tokens.length<=1))return D=!0,!1})),x&&!D?s.isValid=!0:s.message=D?E?u.email.multiple.multipleTokens:u.email.single.multipleTokens:E?u.email.multiple.invalid:u.email.single.invalid}else o().each(T,(function(e,t){U.test(t)||(x=!1)})),x?s.isValid=!0:s.message=E?u.email.multiple.invalid:u.email.single.invalid;if(s.isValid&&(0,a.$K)(r)){var M=r(n,C);s.isValid=M.isValid,M.isValid||(s.message=M.message)}break;case"url":var S=m(n,i);if(S.isValid?s.isValid=!0:s.message=u.invalidType,s.isValid&&(0,a.$K)(r)){var O=r(n,S.simulatedURL);s.isValid=O.isValid,O.isValid||(s.message=O.message)}break;case"checkbox":if(s.isValid=!0,(0,a.$K)(r)){var I=r(n);s.isValid=I.isValid,I.isValid||(s.message=I.message)}break;case"radio":if(s.isValid=!0,(0,a.$K)(r)){var $=r(n);s.isValid=$.isValid,$.isValid||(s.message=$.message)}break;case"date":if(s.isValid=!0,(0,a.$K)(r)){var L=r(n);s.isValid=L.isValid,L.isValid||(s.message=L.message)}break;case"time":if(s.isValid=!0,(0,a.$K)(r)){var R=r(n);s.isValid=R.isValid,R.isValid||(s.message=R.message)}break;default:s.isValid=!1,s.message=""}}}else s.message=u.invalidType;if(!(0,a.xb)(e)){var P=e.closest(".form-element"),F=P.find(".form-element__error").filter((function(){return o()(this).closest(".form-element").is(P)}));s.isValid?(P.removeClass("form-element--error"),P.addClass("form-element--success")):(P.removeClass("form-element--success"),P.addClass("form-element--error")),""!=s.message?(F.addClass("form-element__error--show"),F.text(s.message)):(F.removeClass("form-element__error--show"),F.text(""))}return s}function d(e){var t={hasTokens:!1,tokens:[]},n=new RegExp(/\{\{(.*?)\}\}/gm),i=new r.Z(null,null,{includeGroupName:!1,includeGroupIcon:!1}).tokens;return(0,a.$K)(e)?(0,a.xb)(e)||function(){(0,a.HD)(e)||(e=e.toString());for(var r,s=[],l=function(){var e=r[1];e.startsWith("USERMETA:")||e.startsWith("POSTMETA:")?s.push(e):o().each(i,(function(t,n){o().each(n.tokens,(function(t,n){e==n.id&&s.push(n)}))}))};null!==(r=n.exec(e));)l();t.tokens=s,t.tokens.length>0&&(t.hasTokens=!0)}():console.error("Undefined string attribute"),t}function p(e){var t=e,n=d(e);return n.hasTokens&&o().each(n.tokens,(function(e,n){var i=n.id.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");i=s("{{%s}}",[i]);var o=new RegExp(i,"g");t=t.replace(o,(function(e,t){return function(e){var t="";switch(e){case"select":case"radio":t="option";break;case"text":t="lorem-ipsum";break;case"textarea":t="<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum finibus eros nunc, et posuere libero posuere a. Nam viverra mattis finibus. Aenean purus lorem, mollis vel ullamcorper ac</p>";break;case"int":t=1;break;case"float":t=1.1;break;case"url":t="https://example.com";break;case"email":t="example@example.com";break;case"checkbox":t=!0;break;case"date":t="2021-12-31";break;case"":t="01:00 PM"}return t}(n.type)}))})),t}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{supportsTokens:!1},n={changed:!1,isValid:!1,newURL:null,simulatedURL:null};e=e.replace(/ /g,"%20");var i=new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-zÂ¡-ï¿¿0-9]-*)*[a-zÂ¡-ï¿¿0-9]+)(?:.(?:[a-zÂ¡-ï¿¿0-9]-*)*[a-zÂ¡-ï¿¿0-9]+)*(?:.(?:[a-zÂ¡-ï¿¿]{2,})).?)(?::d{2,5})?(?:[/?#]S*)?"),o=d(e),a=e;if(t.supportsTokens&&o.hasTokens){var r=p(e);n.simulatedURL=r,i.test(r)?n.isValid=!0:(a="/"==e[0]?UncannyAutomator.siteURL+e:UncannyAutomator.siteURL+"/"+e,i.test(a)&&(n.isValid=!0))}else i.test(e)?n.isValid=!0:(a="/"==e[0]?UncannyAutomator.siteURL+e:UncannyAutomator.siteURL+"/"+e,i.test(a)&&(n.isValid=!0));return n.newURL=a,n.newURL!=e&&(n.changed=!0),n}function h(e){e.checkURL()}!function(e){e.fn.checkURL=function(t){return this.each((function(){var n=e(this),i=e.extend({preURL:"Final URL: "},t),o={container:n,input:n.find(".form-element__input")},a={required:o.input.data("required"),supportsTokens:o.input.data("supportstokens")},r=e("<div/>",{class:"form-input-url-notice"}),s=e("<div/>",{class:"form-input-url-notice__header"}),l=e("<div/>",{class:"form-input-url-notice__url"});function c(e){var t=m(e,a);""!=e&&t.isValid&&t.changed?(r.addClass("form-input-url-notice--show"),l.text(t.newURL)):r.removeClass("form-input-url-notice--show")}return s.text(i.preURL),s.appendTo(r),l.appendTo(r),r.appendTo(o.container),""!=o.input.val()&&c(o.input.val()),o.container.on("automator:field:change",(function(){c(o.input.val())})),this}))}}(jQuery)},895:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e,...t){if(!e)throw TypeError("Cannot convert undefined or null to object");for(const n of t)n&&Object.keys(n).forEach((t=>e[t]=n[t]));return e})},771:e=>{"use strict";function t(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var n=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},i=new Map,o=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),a=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return i.has(e)||i.set(e,new o),i.get(e)};function r(e,t,n){if(e instanceof Array)for(var i=0;i<e.length;++i)r(e[i],t,n);else e.addEventListener(t,n),a(e).setData("event"+t,n)}function s(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)s(e[n],t);else e.removeEventListener(t,a(e).getData("event"+t)),a(e).deleteData("event"+t)}function l(e,t,n){if(e instanceof Array)for(var i=0;i<e.length;++i)l(e[i],t,n);else e.setAttribute(t,n)}function c(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.removeAttribute(t)}var u,d,p,m,h,f,g,v,y,_=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},b=function(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},w=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},A=function(e,t,n){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},k=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return"border-box"===t.getPropertyValue("box-sizing")?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},C=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},U=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},T=function(e){return e.composedPath&&e.composedPath()[0]||e.target},x=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},E=function(e,t){if(!0===e.isSortable){var n=a(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==a(e).getConfig("connectWith")&&null!==a(e).getConfig("connectWith"))return a(e).getConfig("connectWith")===a(t).getConfig("connectWith")}return!1},D={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"},M=function(e,t){if("string"==typeof a(e).getConfig("hoverClass")){var i=a(e).getConfig("hoverClass").split(" ");!0===t?(r(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"number"!=typeof t)throw new Error("You must provide a number as the second argument for throttle.");var i=null;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var r=Date.now();(null===i||r-i>=t)&&(i=r,e.apply(n,o))}}((function(t){0===t.buttons&&n(e.children,a(e).getConfig("items")).forEach((function(e){var n,o;e===t.target||e.contains(t.target)?(n=e.classList).add.apply(n,i):(o=e.classList).remove.apply(o,i)}))}),a(e).getConfig("throttleTime"))),r(e,"mouseleave",(function(){n(e.children,a(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,i)}))}))):(s(e,"mousemove"),s(e,"mouseleave"))}},S=function(e){s(e,"dragstart"),s(e,"dragend"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop"),s(e,"mouseenter"),s(e,"mouseleave")},O=function(e,t){e&&s(e,"dragleave"),t&&t!==e&&s(t,"dragleave")},I=function(e){var t;(t=e).h5s&&delete t.h5s.data,c(e,"aria-dropeffect")},$=function(e){c(e,"aria-grabbed"),c(e,"aria-copied"),c(e,"draggable"),c(e,"role")};function L(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function R(e,i){var o=t(e,"opts"),a=n(e.children,o.items).filter((function(e){return e.contains(i)||e.shadowRoot&&e.shadowRoot.contains(i)}));return a.length>0?a[0]:i}var P=function(e){var i=t(e,"opts"),o=n(e.children,i.items),a=U(o,i.handle);l(e,"aria-dropeffect","move"),t(e,"_disabled","false"),l(a,"draggable","true"),M(e,!0),!1===i.disableIEFix&&"function"==typeof(document||window.document).createElement("span").dragDrop&&r(a,"mousedown",(function(){if(-1!==o.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===o.indexOf(e);)e=e.parentElement;e.dragDrop()}}))};function F(e,o){var c=String(o);return o=o||{},"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(c)?e.map((function(e){var i=t(e,"opts");return function(e,i,o){if(void 0===i&&(i=function(e,t){return e}),void 0===o&&(o=function(e){return e}),!(e instanceof HTMLElement)||1==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof i||"function"!=typeof o)throw new Error("You need to provide a valid serializer for items and the container.");var a=t(e,"opts").items,r=n(e.children,a),s=r.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:b(t,r)}}));return{container:o({node:e,itemCount:s.length}),items:s.map((function(t){return i(t,e)}))}}(e,i.itemSerializer,i.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(c))return F[c](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(o,e)&&null!==o[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),o=Object.assign({},D,a(e).config,o),a(e).config=o,t(e,"opts",o),e.isSortable=!0,function(e){var i=t(e,"opts"),o=n(e.children,i.items),a=U(o,i.handle);t(e,"_disabled","false"),S(o),O(m,v),s(a,"mousedown"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop")}(e);var M,I=n(e.children,o.items);if(null!==o.placeholder&&void 0!==o.placeholder){var $=document.createElement(e.tagName);o.placeholder instanceof HTMLElement?$.appendChild(o.placeholder):$.innerHTML=o.placeholder,M=$.children[0]}a(e).placeholder=function(e,t,n){var i;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(i=t.classList).add.apply(i,n.split(" ")),t}(e,M,o.placeholderClass),t(e,"items",o.items),o.acceptFrom?t(e,"acceptFrom",o.acceptFrom):o.connectWith&&t(e,"connectWith",o.connectWith),P(e),l(I,"role","option"),l(I,"aria-grabbed","false"),r(e,"dragstart",(function(e){var t=T(e);if(!0!==t.isSortable&&(e.stopImmediatePropagation(),(!o.handle||t.matches(o.handle))&&"false"!==t.getAttribute("draggable"))){var i=L(t,e),r=R(i,t);g=n(i.children,o.items),h=g.indexOf(r),f=b(r,i.children),m=i,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=x),e.dataTransfer&&e.dataTransfer.setDragImage){var i=n(t,_(t),e);if(!(i.element instanceof HTMLElement)||"number"!=typeof i.posX||"number"!=typeof i.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",T(e).id),e.dataTransfer.setDragImage(i.element,i.posX,i.posY)}}(e,r,o.customDragImage),d=k(r),p=C(r),r.classList.add(o.draggingClass),u=function(e,t){var n=e;return!0===a(t).getConfig("copy")&&(l(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(r,i),l(u,"aria-grabbed","true"),i.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:f,index:h,container:m},item:u,originalTarget:t}}))}})),r(e,"dragenter",(function(i){var s=T(i),l=L(s,i);l&&l!==v&&(y=n(l.children,t(l,"items")).filter((function(t){return t!==a(e).placeholder})),o.dropTargetContainerClass&&l.classList.add(o.dropTargetContainerClass),l.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:f,index:h,container:m},destination:{container:l,itemsBeforeUpdate:y},item:u,originalTarget:s}})),r(l,"dragleave",(function(e){var t=e.relatedTarget||e.fromElement;e.currentTarget.contains(t)||(o.dropTargetContainerClass&&l.classList.remove(o.dropTargetContainerClass),l.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:f,index:h,container:l},item:u,originalTarget:s}})))}))),v=l})),r(e,"dragend",(function(n){if(u){u.classList.remove(o.draggingClass),l(u,"aria-grabbed","false"),"true"===u.getAttribute("aria-copied")&&"true"!==t(u,"dropped")&&u.remove(),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay);var a=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(w)[0];a&&a.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:f,index:h,container:m},item:u}})),v=null,u=null,d=null,p=null}})),r(e,"drop",(function(r){if(E(e,u.parentElement)){r.preventDefault(),r.stopPropagation(),t(u,"dropped","true");var s=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(w)[0];if(s){s.replaceWith(u),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:f,index:h,container:m},item:u}}));var l=a(e).placeholder,c=n(m.children,o.items).filter((function(e){return e!==l})),d=!0===this.isSortable?this:this.parentElement,p=n(d.children,t(d,"items")).filter((function(e){return e!==l})),v=b(u,Array.from(u.parentElement.children).filter((function(e){return e!==l}))),_=b(u,p);o.dropTargetContainerClass&&d.classList.remove(o.dropTargetContainerClass),f===v&&m===d||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:f,index:h,container:m,itemsBeforeUpdate:g,items:c},destination:{index:_,elementIndex:v,container:d,itemsBeforeUpdate:y,items:p},item:u}}))}else t(u,"dropped","false")}}));var V,j,K,N=(V=function(e,t,r,s){if(u)if(o.forcePlaceholderSize&&(a(e).placeholder.style.height=d+"px",a(e).placeholder.style.width=p+"px"),Array.from(e.children).indexOf(t)>-1){var l=k(t),c=C(t),m=b(a(e).placeholder,t.parentElement.children),h=b(t,t.parentElement.children);if(l>d||c>p){var f=l-d,g=c-p,v=_(t).top,y=_(t).left;if(m<h&&("vertical"===o.orientation&&s<v||"horizontal"===o.orientation&&r<y))return;if(m>h&&("vertical"===o.orientation&&s>v+l-f||"horizontal"===o.orientation&&r>y+c-g))return}void 0===u.oldDisplay&&(u.oldDisplay=u.style.display),"none"!==u.style.display&&(u.style.display="none");var w=!1;try{var U=_(t).top+t.offsetHeight/2,T=_(t).left+t.offsetWidth/2;w="vertical"===o.orientation&&s>=U||"horizontal"===o.orientation&&r>=T}catch(e){w=m<h}w?function(e,t){A(e,t,"after")}(t,a(e).placeholder):function(e,t){A(e,t,"before")}(t,a(e).placeholder),Array.from(i.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==a(e).placeholder&&t.placeholder.remove()}))}else{var x=Array.from(i.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==x.indexOf(t)||e!==t||n(t.children,o.items).length||(x.forEach((function(e){return e.remove()})),t.appendChild(a(e).placeholder))}},void 0===(j=o.debounce)&&(j=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(K),K=setTimeout((function(){V.apply(void 0,e)}),j)}),q=function(e){var i=e.target,o=!0===i.isSortable?i:L(i,e);if(i=R(o,i),u&&E(o,u.parentElement)&&"true"!==t(o,"_disabled")){var r=t(o,"opts");parseInt(r.maxItems)&&n(o.children,t(o,"items")).length>parseInt(r.maxItems)&&u.parentElement!==o||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===a(o).getConfig("copy")?"copy":"move",N(o,i,e.pageX,e.pageY))}};r(I.concat(e),"dragover",q),r(I.concat(e),"dragenter",q)})),e)}F.destroy=function(e){!function(e){var i=t(e,"opts")||{},o=n(e.children,i.items),a=U(o,i.handle);M(e,!1),s(e,"dragover"),s(e,"dragenter"),s(e,"dragstart"),s(e,"dragend"),s(e,"drop"),I(e),s(a,"mousedown"),S(o),$(o),O(m,v),e.isSortable=!1}(e)},F.enable=function(e){P(e)},F.disable=function(e){!function(e){var i=t(e,"opts"),o=n(e.children,i.items),a=U(o,i.handle);l(e,"aria-dropeffect","none"),t(e,"_disabled","true"),l(a,"draggable","false"),s(a,"mousedown"),M(e,!1)}(e)},F.__testing={data:t,removeItemEvents:S,removeItemData:$,removeSortableData:I,removeContainerEvents:O},e.exports=F},686:(e,t,n)=>{var i,o;i=[n(311)],void 0===(o=function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var n,i,o;return t&&t.requirejs||(t?i=t:t={},function(e){var t,a,r,s,l={},c={},u={},d={},p=Object.prototype.hasOwnProperty,m=[].slice,h=/\.js$/;function f(e,t){return p.call(e,t)}function g(e,t){var n,i,o,a,r,s,l,c,d,p,m,f=t&&t.split("/"),g=u.map,v=g&&g["*"]||{};if(e){for(r=(e=e.split("/")).length-1,u.nodeIdCompat&&h.test(e[r])&&(e[r]=e[r].replace(h,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),d=0;d<e.length;d++)if("."===(m=e[d]))e.splice(d,1),d-=1;else if(".."===m){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((f||v)&&g){for(d=(n=e.split("/")).length;d>0;d-=1){if(i=n.slice(0,d).join("/"),f)for(p=f.length;p>0;p-=1)if((o=g[f.slice(0,p).join("/")])&&(o=o[i])){a=o,s=d;break}if(a)break;!l&&v&&v[i]&&(l=v[i],c=d)}!a&&l&&(a=l,s=c),a&&(n.splice(0,s,a),e=n.join("/"))}return e}function v(t,n){return function(){var i=m.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),a.apply(e,i.concat([t,n]))}}function y(e){return function(t){l[e]=t}}function _(n){if(f(c,n)){var i=c[n];delete c[n],d[n]=!0,t.apply(e,i)}if(!f(l,n)&&!f(d,n))throw new Error("No "+n);return l[n]}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e){return e?b(e):[]}function A(e){return function(){return u&&u.config&&u.config[e]||{}}}r=function(e,t){var n,i,o=b(e),a=o[0],r=t[1];return e=o[1],a&&(n=_(a=g(a,r))),a?e=n&&n.normalize?n.normalize(e,(i=r,function(e){return g(e,i)})):g(e,r):(a=(o=b(e=g(e,r)))[0],e=o[1],a&&(n=_(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},s={require:function(e){return v(e)},exports:function(e){var t=l[e];return void 0!==t?t:l[e]={}},module:function(e){return{id:e,uri:"",exports:l[e],config:A(e)}}},t=function(t,n,i,o){var a,u,p,m,h,g,b,A=[],k=typeof i;if(g=w(o=o||t),"undefined"===k||"function"===k){for(n=!n.length&&i.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if("require"===(u=(m=r(n[h],g)).f))A[h]=s.require(t);else if("exports"===u)A[h]=s.exports(t),b=!0;else if("module"===u)a=A[h]=s.module(t);else if(f(l,u)||f(c,u)||f(d,u))A[h]=_(u);else{if(!m.p)throw new Error(t+" missing "+u);m.p.load(m.n,v(o,!0),y(u),{}),A[h]=l[u]}p=i?i.apply(l[t],A):void 0,t&&(a&&a.exports!==e&&a.exports!==l[t]?l[t]=a.exports:p===e&&b||(l[t]=p))}else t&&(l[t]=i)},n=i=a=function(n,i,o,l,c){if("string"==typeof n)return s[n]?s[n](i):_(r(n,w(i)).f);if(!n.splice){if((u=n).deps&&a(u.deps,u.callback),!i)return;i.splice?(n=i,i=o,o=null):n=e}return i=i||function(){},"function"==typeof o&&(o=l,l=c),l?t(e,n,i,o):setTimeout((function(){t(e,n,i,o)}),4),a},a.config=function(e){return a(e)},n._defined=l,(o=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),f(l,e)||f(c,e)||(c[e]=[e,t,n])}).amd={jQuery:!0}}(),t.requirejs=n,t.require=i,t.define=o),t.define("almond",(function(){})),t.define("jquery",[],(function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t})),t.define("select2/utils",["jquery"],(function(e){var t={};function n(e){var t=e.prototype,n=[];for(var i in t)"function"==typeof t[i]&&"constructor"!==i&&n.push(i);return n}t.Extend=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},t.Decorate=function(e,t){var i=n(t),o=n(e);function a(){var n=Array.prototype.unshift,i=t.prototype.constructor.length,o=e.prototype.constructor;i>0&&(n.call(arguments,e.prototype.constructor),o=t.prototype.constructor),o.apply(this,arguments)}t.displayName=e.displayName,a.prototype=new function(){this.constructor=a};for(var r=0;r<o.length;r++){var s=o[r];a.prototype[s]=e.prototype[s]}for(var l=function(e){var n=function(){};e in a.prototype&&(n=a.prototype[e]);var i=t.prototype[e];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}},c=0;c<i.length;c++){var u=i[c];a.prototype[u]=l(u)}return a};var i=function(){this.listeners={}};i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},t.Observable=i,t.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var o=0;o<n.length;o++){var a=n[o];(a=a.substring(0,1).toLowerCase()+a.substring(1))in i||(i[a]={}),o==n.length-1&&(i[a]=e[t]),i=i[a]}delete e[t]}}return e},t.hasScroll=function(t,n){var i=e(n),o=n.style.overflowX,a=n.style.overflowY;return(o!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===o||"scroll"===a||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},t.__cache={};var o=0;return t.GetUniqueElementId=function(e){var n=e.getAttribute("data-select2-id");return null!=n||(n=e.id?"select2-data-"+e.id:"select2-data-"+(++o).toString()+"-"+t.generateChars(4),e.setAttribute("data-select2-id",n)),n},t.StoreData=function(e,n,i){var o=t.GetUniqueElementId(e);t.__cache[o]||(t.__cache[o]={}),t.__cache[o][n]=i},t.GetData=function(n,i){var o=t.GetUniqueElementId(n);return i?t.__cache[o]&&null!=t.__cache[o][i]?t.__cache[o][i]:e(n).data(i):t.__cache[o]},t.RemoveData=function(e){var n=t.GetUniqueElementId(e);null!=t.__cache[n]&&delete t.__cache[n],e.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(e,t){var n=e.getAttribute("class").trim().split(/\s+/);n=n.filter((function(e){return 0===e.indexOf("select2-")}));var i=t.getAttribute("class").trim().split(/\s+/);i=i.filter((function(e){return 0!==e.indexOf("select2-")}));var o=n.concat(i);e.setAttribute("class",o.join(" "))},t})),t.define("select2/results",["jquery","./utils"],(function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(t.message);i.append(n(o(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],o=this.option(i);t.push(o)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(i){var o=i.map((function(e){return e.id.toString()}));n.$results.find(".select2-results__option--selectable").each((function(){var n=e(this),i=t.GetData(this,"data"),a=""+i.id;null!=i.element&&i.element.selected||null==i.element&&o.indexOf(a)>-1?(this.classList.add("select2-results__option--selected"),n.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),n.attr("aria-selected","false"))}))}))},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var i=document.createElement("li");i.classList.add("select2-results__option"),i.classList.add("select2-results__option--selectable");var o={role:"option"},a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var r in(null!=n.element&&a.call(n.element,":disabled")||null==n.element&&n.disabled)&&(o["aria-disabled"]="true",i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--disabled")),null==n.id&&i.classList.remove("select2-results__option--selectable"),null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(o.role="group",o["aria-label"]=n.text,i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--group")),o){var s=o[r];i.setAttribute(r,s)}if(n.children){var l=e(i),c=document.createElement("strong");c.className="select2-results__group",this.template(n,c);for(var u=[],d=0;d<n.children.length;d++){var p=n.children[d],m=this.option(p);u.push(m)}var h=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});h.append(u),l.append(c),l.append(h)}else this.template(n,i);return t.StoreData(i,"data",n),i},n.prototype.bind=function(n,i){var o=this,a=n.id+"-results";this.$results.attr("id",a),n.on("results:all",(function(e){o.clear(),o.append(e.data),n.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),n.on("results:append",(function(e){o.append(e.data),n.isOpen()&&o.setClasses()})),n.on("query",(function(e){o.hideMessages(),o.showLoading(e)})),n.on("select",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),n.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var e=o.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),n.on("results:select",(function(){var e=o.getHighlightedResults();if(0!==e.length){var n=t.GetData(e[0],"data");e.hasClass("select2-results__option--selected")?o.trigger("close",{}):o.trigger("select",{data:n})}})),n.on("results:previous",(function(){var e=o.getHighlightedResults(),t=o.$results.find(".select2-results__option--selectable"),n=t.index(e);if(!(n<=0)){var i=n-1;0===e.length&&(i=0);var a=t.eq(i);a.trigger("mouseenter");var r=o.$results.offset().top,s=a.offset().top,l=o.$results.scrollTop()+(s-r);0===i?o.$results.scrollTop(0):s-r<0&&o.$results.scrollTop(l)}})),n.on("results:next",(function(){var e=o.getHighlightedResults(),t=o.$results.find(".select2-results__option--selectable"),n=t.index(e)+1;if(!(n>=t.length)){var i=t.eq(n);i.trigger("mouseenter");var a=o.$results.offset().top+o.$results.outerHeight(!1),r=i.offset().top+i.outerHeight(!1),s=o.$results.scrollTop()+r-a;0===n?o.$results.scrollTop(0):r>a&&o.$results.scrollTop(s)}})),n.on("results:focus",(function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")})),n.on("results:message",(function(e){o.displayMessage(e)})),e.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-t+e.deltaY,i=e.deltaY>0&&t-e.deltaY<=0,a=e.deltaY<0&&n<=o.$results.height();i?(o.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):a&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(n){var i=e(this),a=t.GetData(this,"data");i.hasClass("select2-results__option--selected")?o.options.get("multiple")?o.trigger("unselect",{originalEvent:n,data:a}):o.trigger("close",{}):o.trigger("select",{originalEvent:n,data:a})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(n){var i=t.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),o.trigger("results:focus",{data:i,element:e(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find(".select2-results__option--selectable").index(e),n=this.$results.offset().top,i=e.offset().top,o=this.$results.scrollTop()+(i-n),a=i-n;o-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(a>this.$results.outerHeight()||a<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),a=i(t,n);null==a?n.style.display="none":"string"==typeof a?n.innerHTML=o(a):e(n).append(a)},n})),t.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),t.define("select2/selection/base",["jquery","../utils","../keys"],(function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var n=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n,n},i.prototype.bind=function(e,t){var i=this,o=e.id+"-results";this.container=e,this.$selection.on("focus",(function(e){i.trigger("focus",e)})),this.$selection.on("blur",(function(e){i._handleBlur(e)})),this.$selection.on("keydown",(function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){i.update(e.data)})),e.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(e)})),e.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.trigger("focus"),i._detachCloseHandler(e)})),e.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex),i.$selection.attr("aria-disabled","false")})),e.on("disable",(function(){i.$selection.attr("tabindex","-1"),i.$selection.attr("aria-disabled","true")}))},i.prototype._handleBlur=function(t){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)}),1)},i.prototype._attachCloseHandler=function(n){e(document.body).on("mousedown.select2."+n.id,(function(n){var i=e(n.target).closest(".select2");e(".select2.select2-container--open").each((function(){this!=i[0]&&t.GetData(this,"element").select2("close")}))}))},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i})),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(e,t){var n=this;o.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.attr("aria-controls",i),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),e.on("focus",(function(t){e.isOpen()||n.$selection.trigger("focus")}))},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i);var o=t.title||t.text;o?n.attr("title",o):n.removeAttr("title")}else this.clear()},o})),t.define("select2/selection/multiple",["jquery","./base","../utils"],(function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,o){var a=this;i.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.on("click",(function(e){a.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(t){if(!a.isDisabled()){var i=e(this).parent(),o=n.GetData(i[0],"data");a.trigger("unselect",{originalEvent:t,data:o})}})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(e){a.isDisabled()||e.stopPropagation()}))},i.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",o=0;o<e.length;o++){var a=e[o],r=this.selectionContainer(),s=this.display(a,r),l=i+n.generateChars(4)+"-";a.id?l+=a.id:l+=n.generateChars(4),r.find(".select2-selection__choice__display").append(s).attr("id",l);var c=a.title||a.text;c&&r.attr("title",c);var u=this.options.get("translations").get("removeItem"),d=r.find(".select2-selection__choice__remove");d.attr("title",u()),d.attr("aria-label",u()),d.attr("aria-describedby",l),n.StoreData(r[0],"data",a),t.push(r)}this.$selection.find(".select2-selection__rendered").append(t)}},i})),t.define("select2/selection/placeholder",[],(function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");var i=t.title||t.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",i),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e})),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(e,t,n){function i(){}return i.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(e){i._handleClear(e)})),t.on("keypress",(function(e){i._handleKeyboardClear(e,t)}))},i.prototype._handleClear=function(e,t){if(!this.isDisabled()){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();var o=n.GetData(i[0],"data"),a=this.$element.val();this.$element.val(this.placeholder.id);var r={data:o};if(this.trigger("clear",r),r.prevented)this.$element.val(a);else{for(var s=0;s<o.length;s++)if(r={data:o[s]},this.trigger("unselect",r),r.prevented)return void this.$element.val(a);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},i.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},i.prototype.update=function(t,i){if(t.call(this,i),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var o=this.$selection.find(".select2-selection__rendered").attr("id"),a=this.options.get("translations").get("removeAllItems"),r=e('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');r.attr("title",a()),r.attr("aria-label",a()),r.attr("aria-describedby",o),n.StoreData(r[0],"data",i),this.$selection.prepend(r),this.$selection[0].classList.add("select2-selection--clearable")}},i})),t.define("select2/selection/search",["jquery","../utils","../keys"],(function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=this.options.get("translations").get("search"),i=e('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=i,this.$search=i.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n());var o=t.call(this);return this._transferTabIndex(),o.append(this.$searchContainer),o},i.prototype.bind=function(e,i,o){var a=this,r=i.id+"-results",s=i.id+"-container";e.call(this,i,o),a.$search.attr("aria-describedby",s),i.on("open",(function(){a.$search.attr("aria-controls",r),a.$search.trigger("focus")})),i.on("close",(function(){a.$search.val(""),a.resizeSearch(),a.$search.removeAttr("aria-controls"),a.$search.removeAttr("aria-activedescendant"),a.$search.trigger("focus")})),i.on("enable",(function(){a.$search.prop("disabled",!1),a._transferTabIndex()})),i.on("disable",(function(){a.$search.prop("disabled",!0)})),i.on("focus",(function(e){a.$search.trigger("focus")})),i.on("results:focus",(function(e){e.data._resultId?a.$search.attr("aria-activedescendant",e.data._resultId):a.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(e){a.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){a._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){if(e.stopPropagation(),a.trigger("keypress",e),a._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===a.$search.val()){var i=a.$selection.find(".select2-selection__choice").last();if(i.length>0){var o=t.GetData(i[0],"data");a.searchRemoveChoice(o),e.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(e){a.$search.val()&&e.stopPropagation()}));var l=document.documentMode,c=l&&l<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){c?a.$selection.off("input.search input.searchcheck"):a.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(c&&"input"===e.type)a.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&a.handleSearch(e)}}))},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},i})),t.define("select2/selection/selectionCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),i=this.options.get("selectionCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),e.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(i),n},t})),t.define("select2/selection/eventRelay",["jquery"],(function(e){function t(){}return t.prototype.bind=function(t,n,i){var o=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],r=["opening","closing","selecting","unselecting","clearing"];t.call(this,n,i),n.on("*",(function(t,n){if(-1!==a.indexOf(t)){n=n||{};var i=e.Event("select2:"+t,{params:n});o.$element.trigger(i),-1!==r.indexOf(t)&&(n.prevented=i.isDefaultPrevented())}}))},t})),t.define("select2/translation",["jquery","require"],(function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n})),t.define("select2/diacritics",[],(function(){return{"â’¶":"A",ï¼¡:"A",Ã€:"A",Ã:"A",Ã‚:"A",áº¦:"A",áº¤:"A",áºª:"A",áº¨:"A",Ãƒ:"A",Ä€:"A",Ä‚:"A",áº°:"A",áº®:"A",áº´:"A",áº²:"A",È¦:"A",Ç :"A",Ã„:"A",Çž:"A",áº¢:"A",Ã…:"A",Çº:"A",Ç:"A",È€:"A",È‚:"A",áº :"A",áº¬:"A",áº¶:"A",á¸€:"A",Ä„:"A",Èº:"A",â±¯:"A",êœ²:"AA",Ã†:"AE",Ç¼:"AE",Ç¢:"AE",êœ´:"AO",êœ¶:"AU",êœ¸:"AV",êœº:"AV",êœ¼:"AY","â’·":"B",ï¼¢:"B",á¸‚:"B",á¸„:"B",á¸†:"B",Éƒ:"B",Æ‚:"B",Æ:"B","â’¸":"C",ï¼£:"C",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ã‡:"C",á¸ˆ:"C",Æ‡:"C",È»:"C",êœ¾:"C","â’¹":"D",ï¼¤:"D",á¸Š:"D",ÄŽ:"D",á¸Œ:"D",á¸:"D",á¸’:"D",á¸Ž:"D",Ä:"D",Æ‹:"D",ÆŠ:"D",Æ‰:"D",ê¹:"D",Ç±:"DZ",Ç„:"DZ",Ç²:"Dz",Ç…:"Dz","â’º":"E",ï¼¥:"E",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",á»€:"E",áº¾:"E",á»„:"E",á»‚:"E",áº¼:"E",Ä’:"E",á¸”:"E",á¸–:"E",Ä”:"E",Ä–:"E",Ã‹:"E",áºº:"E",Äš:"E",È„:"E",È†:"E",áº¸:"E",á»†:"E",È¨:"E",á¸œ:"E",Ä˜:"E",á¸˜:"E",á¸š:"E",Æ:"E",ÆŽ:"E","â’»":"F",ï¼¦:"F",á¸ž:"F",Æ‘:"F",ê»:"F","â’¼":"G",ï¼§:"G",Ç´:"G",Äœ:"G",á¸ :"G",Äž:"G",Ä :"G",Ç¦:"G",Ä¢:"G",Ç¤:"G",Æ“:"G",êž :"G",ê½:"G",ê¾:"G","â’½":"H",ï¼¨:"H",Ä¤:"H",á¸¢:"H",á¸¦:"H",Èž:"H",á¸¤:"H",á¸¨:"H",á¸ª:"H",Ä¦:"H",â±§:"H",â±µ:"H",êž:"H","â’¾":"I",ï¼©:"I",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ä¨:"I",Äª:"I",Ä¬:"I",Ä°:"I",Ã:"I",á¸®:"I",á»ˆ:"I",Ç:"I",Èˆ:"I",ÈŠ:"I",á»Š:"I",Ä®:"I",á¸¬:"I",Æ—:"I","â’¿":"J",ï¼ª:"J",Ä´:"J",Éˆ:"J","â“€":"K",ï¼«:"K",á¸°:"K",Ç¨:"K",á¸²:"K",Ä¶:"K",á¸´:"K",Æ˜:"K",â±©:"K",ê€:"K",ê‚:"K",ê„:"K",êž¢:"K","â“":"L",ï¼¬:"L",Ä¿:"L",Ä¹:"L",Ä½:"L",á¸¶:"L",á¸¸:"L",Ä»:"L",á¸¼:"L",á¸º:"L",Å:"L",È½:"L",â±¢:"L",â± :"L",êˆ:"L",ê†:"L",êž€:"L",Ç‡:"LJ",Çˆ:"Lj","â“‚":"M",ï¼­:"M",á¸¾:"M",á¹€:"M",á¹‚:"M",â±®:"M",Æœ:"M","â“ƒ":"N",ï¼®:"N",Ç¸:"N",Åƒ:"N",Ã‘:"N",á¹„:"N",Å‡:"N",á¹†:"N",Å…:"N",á¹Š:"N",á¹ˆ:"N",È :"N",Æ:"N",êž:"N",êž¤:"N",ÇŠ:"NJ",Ç‹:"Nj","â“„":"O",ï¼¯:"O",Ã’:"O",Ã“:"O",Ã”:"O",á»’:"O",á»:"O",á»–:"O",á»”:"O",Ã•:"O",á¹Œ:"O",È¬:"O",á¹Ž:"O",ÅŒ:"O",á¹:"O",á¹’:"O",ÅŽ:"O",È®:"O",È°:"O",Ã–:"O",Èª:"O",á»Ž:"O",Å:"O",Ç‘:"O",ÈŒ:"O",ÈŽ:"O",Æ :"O",á»œ:"O",á»š:"O",á» :"O",á»ž:"O",á»¢:"O",á»Œ:"O",á»˜:"O",Çª:"O",Ç¬:"O",Ã˜:"O",Ç¾:"O",Æ†:"O",ÆŸ:"O",êŠ:"O",êŒ:"O",Å’:"OE",Æ¢:"OI",êŽ:"OO",È¢:"OU","â“…":"P",ï¼°:"P",á¹”:"P",á¹–:"P",Æ¤:"P",â±£:"P",ê:"P",ê’:"P",ê”:"P","â“†":"Q",ï¼±:"Q",ê–:"Q",ê˜:"Q",ÉŠ:"Q","â“‡":"R",ï¼²:"R",Å”:"R",á¹˜:"R",Å˜:"R",È:"R",È’:"R",á¹š:"R",á¹œ:"R",Å–:"R",á¹ž:"R",ÉŒ:"R",â±¤:"R",êš:"R",êž¦:"R",êž‚:"R","â“ˆ":"S",ï¼³:"S",áºž:"S",Åš:"S",á¹¤:"S",Åœ:"S",á¹ :"S",Å :"S",á¹¦:"S",á¹¢:"S",á¹¨:"S",È˜:"S",Åž:"S",â±¾:"S",êž¨:"S",êž„:"S","â“‰":"T",ï¼´:"T",á¹ª:"T",Å¤:"T",á¹¬:"T",Èš:"T",Å¢:"T",á¹°:"T",á¹®:"T",Å¦:"T",Æ¬:"T",Æ®:"T",È¾:"T",êž†:"T",êœ¨:"TZ","â“Š":"U",ï¼µ:"U",Ã™:"U",Ãš:"U",Ã›:"U",Å¨:"U",á¹¸:"U",Åª:"U",á¹º:"U",Å¬:"U",Ãœ:"U",Ç›:"U",Ç—:"U",Ç•:"U",Ç™:"U",á»¦:"U",Å®:"U",Å°:"U",Ç“:"U",È”:"U",È–:"U",Æ¯:"U",á»ª:"U",á»¨:"U",á»®:"U",á»¬:"U",á»°:"U",á»¤:"U",á¹²:"U",Å²:"U",á¹¶:"U",á¹´:"U",É„:"U","â“‹":"V",ï¼¶:"V",á¹¼:"V",á¹¾:"V",Æ²:"V",êž:"V",É…:"V",ê :"VY","â“Œ":"W",ï¼·:"W",áº€:"W",áº‚:"W",Å´:"W",áº†:"W",áº„:"W",áºˆ:"W",â±²:"W","â“":"X",ï¼¸:"X",áºŠ:"X",áºŒ:"X","â“Ž":"Y",ï¼¹:"Y",á»²:"Y",Ã:"Y",Å¶:"Y",á»¸:"Y",È²:"Y",áºŽ:"Y",Å¸:"Y",á»¶:"Y",á»´:"Y",Æ³:"Y",ÉŽ:"Y",á»¾:"Y","â“":"Z",ï¼º:"Z",Å¹:"Z",áº:"Z",Å»:"Z",Å½:"Z",áº’:"Z",áº”:"Z",Æµ:"Z",È¤:"Z",â±¿:"Z",â±«:"Z",ê¢:"Z","â“":"a",ï½:"a",áºš:"a",Ã :"a",Ã¡:"a",Ã¢:"a",áº§:"a",áº¥:"a",áº«:"a",áº©:"a",Ã£:"a",Ä:"a",Äƒ:"a",áº±:"a",áº¯:"a",áºµ:"a",áº³:"a",È§:"a",Ç¡:"a",Ã¤:"a",ÇŸ:"a",áº£:"a",Ã¥:"a",Ç»:"a",ÇŽ:"a",È:"a",Èƒ:"a",áº¡:"a",áº­:"a",áº·:"a",á¸:"a",Ä…:"a",â±¥:"a",É:"a",êœ³:"aa",Ã¦:"ae",Ç½:"ae",Ç£:"ae",êœµ:"ao",êœ·:"au",êœ¹:"av",êœ»:"av",êœ½:"ay","â“‘":"b",ï½‚:"b",á¸ƒ:"b",á¸…:"b",á¸‡:"b",Æ€:"b",Æƒ:"b",É“:"b","â“’":"c",ï½ƒ:"c",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",Ã§:"c",á¸‰:"c",Æˆ:"c",È¼:"c",êœ¿:"c",â†„:"c","â““":"d",ï½„:"d",á¸‹:"d",Ä:"d",á¸:"d",á¸‘:"d",á¸“:"d",á¸:"d",Ä‘:"d",ÆŒ:"d",É–:"d",É—:"d",êº:"d",Ç³:"dz",Ç†:"dz","â“”":"e",ï½…:"e",Ã¨:"e",Ã©:"e",Ãª:"e",á»:"e",áº¿:"e",á»…:"e",á»ƒ:"e",áº½:"e",Ä“:"e",á¸•:"e",á¸—:"e",Ä•:"e",Ä—:"e",Ã«:"e",áº»:"e",Ä›:"e",È…:"e",È‡:"e",áº¹:"e",á»‡:"e",È©:"e",á¸:"e",Ä™:"e",á¸™:"e",á¸›:"e",É‡:"e",É›:"e",Ç:"e","â“•":"f",ï½†:"f",á¸Ÿ:"f",Æ’:"f",ê¼:"f","â“–":"g",ï½‡:"g",Çµ:"g",Ä:"g",á¸¡:"g",ÄŸ:"g",Ä¡:"g",Ç§:"g",Ä£:"g",Ç¥:"g",É :"g",êž¡:"g",áµ¹:"g",ê¿:"g","â“—":"h",ï½ˆ:"h",Ä¥:"h",á¸£:"h",á¸§:"h",ÈŸ:"h",á¸¥:"h",á¸©:"h",á¸«:"h",áº–:"h",Ä§:"h",â±¨:"h",â±¶:"h",É¥:"h",Æ•:"hv","â“˜":"i",ï½‰:"i",Ã¬:"i",Ã­:"i",Ã®:"i",Ä©:"i",Ä«:"i",Ä­:"i",Ã¯:"i",á¸¯:"i",á»‰:"i",Ç:"i",È‰:"i",È‹:"i",á»‹:"i",Ä¯:"i",á¸­:"i",É¨:"i",Ä±:"i","â“™":"j",ï½Š:"j",Äµ:"j",Ç°:"j",É‰:"j","â“š":"k",ï½‹:"k",á¸±:"k",Ç©:"k",á¸³:"k",Ä·:"k",á¸µ:"k",Æ™:"k",â±ª:"k",ê:"k",êƒ:"k",ê…:"k",êž£:"k","â“›":"l",ï½Œ:"l",Å€:"l",Äº:"l",Ä¾:"l",á¸·:"l",á¸¹:"l",Ä¼:"l",á¸½:"l",á¸»:"l",Å¿:"l",Å‚:"l",Æš:"l",É«:"l",â±¡:"l",ê‰:"l",êž:"l",ê‡:"l",Ç‰:"lj","â“œ":"m",ï½:"m",á¸¿:"m",á¹:"m",á¹ƒ:"m",É±:"m",É¯:"m","â“":"n",ï½Ž:"n",Ç¹:"n",Å„:"n",Ã±:"n",á¹…:"n",Åˆ:"n",á¹‡:"n",Å†:"n",á¹‹:"n",á¹‰:"n",Æž:"n",É²:"n",Å‰:"n",êž‘:"n",êž¥:"n",ÇŒ:"nj","â“ž":"o",ï½:"o",Ã²:"o",Ã³:"o",Ã´:"o",á»“:"o",á»‘:"o",á»—:"o",á»•:"o",Ãµ:"o",á¹:"o",È­:"o",á¹:"o",Å:"o",á¹‘:"o",á¹“:"o",Å:"o",È¯:"o",È±:"o",Ã¶:"o",È«:"o",á»:"o",Å‘:"o",Ç’:"o",È:"o",È:"o",Æ¡:"o",á»:"o",á»›:"o",á»¡:"o",á»Ÿ:"o",á»£:"o",á»:"o",á»™:"o",Ç«:"o",Ç­:"o",Ã¸:"o",Ç¿:"o",É”:"o",ê‹:"o",ê:"o",Éµ:"o",Å“:"oe",Æ£:"oi",È£:"ou",ê:"oo","â“Ÿ":"p",ï½:"p",á¹•:"p",á¹—:"p",Æ¥:"p",áµ½:"p",ê‘:"p",ê“:"p",ê•:"p","â“ ":"q",ï½‘:"q",É‹:"q",ê—:"q",ê™:"q","â“¡":"r",ï½’:"r",Å•:"r",á¹™:"r",Å™:"r",È‘:"r",È“:"r",á¹›:"r",á¹:"r",Å—:"r",á¹Ÿ:"r",É:"r",É½:"r",ê›:"r",êž§:"r",êžƒ:"r","â“¢":"s",ï½“:"s",ÃŸ:"s",Å›:"s",á¹¥:"s",Å:"s",á¹¡:"s",Å¡:"s",á¹§:"s",á¹£:"s",á¹©:"s",È™:"s",ÅŸ:"s",È¿:"s",êž©:"s",êž…:"s",áº›:"s","â“£":"t",ï½”:"t",á¹«:"t",áº—:"t",Å¥:"t",á¹­:"t",È›:"t",Å£:"t",á¹±:"t",á¹¯:"t",Å§:"t",Æ­:"t",Êˆ:"t",â±¦:"t",êž‡:"t",êœ©:"tz","â“¤":"u",ï½•:"u",Ã¹:"u",Ãº:"u",Ã»:"u",Å©:"u",á¹¹:"u",Å«:"u",á¹»:"u",Å­:"u",Ã¼:"u",Çœ:"u",Ç˜:"u",Ç–:"u",Çš:"u",á»§:"u",Å¯:"u",Å±:"u",Ç”:"u",È•:"u",È—:"u",Æ°:"u",á»«:"u",á»©:"u",á»¯:"u",á»­:"u",á»±:"u",á»¥:"u",á¹³:"u",Å³:"u",á¹·:"u",á¹µ:"u",Ê‰:"u","â“¥":"v",ï½–:"v",á¹½:"v",á¹¿:"v",Ê‹:"v",êŸ:"v",ÊŒ:"v",ê¡:"vy","â“¦":"w",ï½—:"w",áº:"w",áºƒ:"w",Åµ:"w",áº‡:"w",áº…:"w",áº˜:"w",áº‰:"w",â±³:"w","â“§":"x",ï½˜:"x",áº‹:"x",áº:"x","â“¨":"y",ï½™:"y",á»³:"y",Ã½:"y",Å·:"y",á»¹:"y",È³:"y",áº:"y",Ã¿:"y",á»·:"y",áº™:"y",á»µ:"y",Æ´:"y",É:"y",á»¿:"y","â“©":"z",ï½š:"z",Åº:"z",áº‘:"z",Å¼:"z",Å¾:"z",áº“:"z",áº•:"z",Æ¶:"z",È¥:"z",É€:"z",â±¬:"z",ê£:"z",Î†:"Î‘",Îˆ:"Î•",Î‰:"Î—",ÎŠ:"Î™",Îª:"Î™",ÎŒ:"ÎŸ",ÎŽ:"Î¥",Î«:"Î¥",Î:"Î©",Î¬:"Î±",Î­:"Îµ",Î®:"Î·",Î¯:"Î¹",ÏŠ:"Î¹",Î:"Î¹",ÏŒ:"Î¿",Ï:"Ï…",Ï‹:"Ï…",Î°:"Ï…",ÏŽ:"Ï‰",Ï‚:"Ïƒ","â€™":"'"}})),t.define("select2/data/base",["../utils"],(function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+e.generateChars(4),i},t})),t.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(e){return t.item(n(e))})))},i.prototype.select=function(e){var t=this;if(e.selected=!0,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var i=[];(e=[e]).push.apply(e,n);for(var o=0;o<e.length;o++){var a=e[o].id;-1===i.indexOf(a)&&i.push(a)}t.$element.val(i),t.$element.trigger("input").trigger("change")}));else{var n=e.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var i=[],o=0;o<n.length;o++){var a=n[o].id;a!==e.id&&-1===i.indexOf(a)&&i.push(a)}t.$element.val(i),t.$element.trigger("input").trigger("change")}))}},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){t.RemoveData(this)}))},i.prototype.query=function(e,t){var i=[],o=this;this.$element.children().each((function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var t=n(this),a=o.item(t),r=o.matches(e,a);null!==r&&i.push(r)}})),t({results:i})},i.prototype.addOptions=function(e){this.$element.append(e)},i.prototype.option=function(e){var i;e.children?(i=document.createElement("optgroup")).label=e.text:void 0!==(i=document.createElement("option")).textContent?i.textContent=e.text:i.innerText=e.text,void 0!==e.id&&(i.value=e.id),e.disabled&&(i.disabled=!0),e.selected&&(i.selected=!0),e.title&&(i.title=e.title);var o=this._normalizeItem(e);return o.element=i,t.StoreData(i,"data",o),n(i)},i.prototype.item=function(e){var i={};if(null!=(i=t.GetData(e[0],"data")))return i;var o=e[0];if("option"===o.tagName.toLowerCase())i={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===o.tagName.toLowerCase()){i={text:e.prop("label"),children:[],title:e.prop("title")};for(var a=e.children("option"),r=[],s=0;s<a.length;s++){var l=n(a[s]),c=this.item(l);r.push(c)}i.children=r}return(i=this._normalizeItem(i)).element=e[0],t.StoreData(e[0],"data",i),i},i.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},{selected:!1,disabled:!1},e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i})),t.define("select2/data/array",["./select","../utils","jquery"],(function(e,t,n){function i(e,t){this._dataToConvert=t.get("data")||[],i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype.bind=function(e,t){i.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},i.prototype.select=function(e){var t=this.$element.find("option").filter((function(t,n){return n.value==e.id.toString()}));0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){var t=this,i=this.$element.find("option"),o=i.map((function(){return t.item(n(this)).id})).get(),a=[];function r(e){return function(){return n(this).val()==e.id}}for(var s=0;s<e.length;s++){var l=this._normalizeItem(e[s]);if(o.indexOf(l.id)>=0){var c=i.filter(r(l)),u=this.item(c),d=n.extend(!0,{},l,u),p=this.option(d);c.replaceWith(p)}else{var m=this.option(l);if(l.children){var h=this.convertToOptions(l.children);m.append(h)}a.push(m)}}return a},i})),t.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var o=n.ajax(e);return o.then(t),o.fail(i),o}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){var i=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);function a(){var n=o.transport(o,(function(n){var o=i.processResults(n,e);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&Array.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)}),(function(){(!("status"in n)||0!==n.status&&"0"!==n.status)&&i.trigger("results:message",{message:"errorLoading"})}));i._request=n}"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(a,this.ajaxOptions.delay)):a()},i})),t.define("select2/data/tags",["jquery"],(function(e){function t(e,t,n){var i=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);var a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,t,n),Array.isArray(i))for(var r=0;r<i.length;r++){var s=i[r],l=this._normalizeItem(s),c=this.option(l);this.$element.append(c)}}return t.prototype.query=function(e,t,n){var i=this;this._removeOldTags(),null!=t.term&&null==t.page?e.call(this,t,(function e(o,a){for(var r=o.results,s=0;s<r.length;s++){var l=r[s],c=null!=l.children&&!e({results:l.children},!0);if((l.text||"").toUpperCase()===(t.term||"").toUpperCase()||c)return!a&&(o.data=r,void n(o))}if(a)return!0;var u=i.createTag(t);if(null!=u){var d=i.option(u);d.attr("data-select2-tag","true"),i.addOptions([d]),i.insertTag(r,u)}o.results=r,n(o)})):e.call(this,t,n)},t.prototype.createTag=function(e,t){if(null==t.term)return null;var n=t.term.trim();return""===n?null:{id:n,text:n}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each((function(){this.selected||e(this).remove()}))},t})),t.define("select2/data/tokenizer",["jquery"],(function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){var o=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,(function(t){var n=o._normalizeItem(t);if(!o.$element.find("option").filter((function(){return e(this).val()===n.id})).length){var i=o.option(n);i.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([i])}!function(e){o.trigger("select",{data:e})}(n)}));a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.trigger("focus")),n.term=a.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,o){for(var a=i.get("tokenSeparators")||[],r=n.term,s=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};s<r.length;){var c=r[s];if(-1!==a.indexOf(c)){var u=r.substr(0,s),d=l(e.extend({},n,{term:u}));null!=d?(o(d),r=r.substr(s+1)||"",s=0):s++}else s++}return{term:r}},t})),t.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),t.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),t.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(){i._checkIfMaximumSelected()}))},e.prototype.query=function(e,t,n){var i=this;this._checkIfMaximumSelected((function(){e.call(i,t,n)}))},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current((function(e){var i=null!=e?e.length:0;n.maximumSelectionLength>0&&i>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()}))},e})),t.define("select2/dropdown",["jquery","./utils"],(function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),t.define("select2/dropdown/search",["jquery"],(function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),i=this.options.get("translations").get("search"),o=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=o,this.$search=o.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",i()),n.prepend(o),n},t.prototype.bind=function(t,n,i){var o=this,a=n.id+"-results";t.call(this,n,i),this.$search.on("keydown",(function(e){o.trigger("keypress",e),o._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(t){e(this).off("keyup")})),this.$search.on("keyup input",(function(e){o.handleSearch(e)})),n.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",a),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),n.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||o.$search.trigger("focus")})),n.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(o.showSearch(e)?o.$searchContainer[0].classList.remove("select2-search--hide"):o.$searchContainer[0].classList.add("select2-search--hide"))})),n.on("results:focus",(function(e){e.data._resultId?o.$search.attr("aria-activedescendant",e.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),t.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var o=t[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},e})),t.define("select2/dropdown/infiniteScroll",["jquery"],(function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",(function(e){i.lastParams=e,i.loading=!0})),t.on("query:append",(function(e){i.lastParams=e,i.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&t&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t})),t.define("select2/dropdown/attachBody",["jquery","../utils"],(function(e,t){function n(t,n,i){this.$dropdownParent=e(i.get("dropdownParent")||document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(t),i._bindContainerResultHandlers(t)})),t.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,i){var o=this,a="scroll.select2."+i.id,r="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each((function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})})),l.on(a,(function(n){var i=t.GetData(this,"select2-scroll-position");e(this).scrollTop(i.y)})),e(window).on(a+" "+r+" "+s,(function(e){o._positionDropdown(),o._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,a="resize.select2."+i.id,r="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(o),e(window).off(o+" "+a+" "+r)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown[0].classList.contains("select2-dropdown--above"),i=this.$dropdown[0].classList.contains("select2-dropdown--below"),o=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=a.top,r.bottom=a.top+r.height;var s=this.$dropdown.outerHeight(!1),l=t.scrollTop(),c=t.scrollTop()+t.height(),u=l<a.top-s,d=c>a.bottom+s,p={left:a.left,top:r.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var h={top:0,left:0};(e.contains(document.body,m[0])||m[0].isConnected)&&(h=m.offset()),p.top-=h.top,p.left-=h.left,n||i||(o="below"),d||!u||n?!u&&d&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(p.top=r.top-h.top-s),null!=o&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+o),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+o)),this.$dropdownContainer.css(p)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),t.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(t){for(var n=0,i=0;i<t.length;i++){var o=t[i];o.children?n+=e(o.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t})),t.define("select2/dropdown/selectOnClose",["../utils"],(function(e){function t(){}return t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",(function(e){i._handleSelectOnClose(e)}))},t.prototype._handleSelectOnClose=function(t,n){if(n&&null!=n.originalSelect2Event){var i=n.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var a=e.GetData(o[0],"data");null!=a.element&&a.element.selected||null==a.element&&a.selected||this.trigger("select",{data:a})}},t})),t.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",(function(e){i._selectTriggered(e)})),t.on("unselect",(function(e){i._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),t.define("select2/dropdown/dropdownCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),i=this.options.get("dropdownCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),e.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(i),n},t})),t.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(e){function t(){}return t.prototype.highlightFirstItem=function(t){var n=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(n.length>0){var i=n.first(),o=e.GetData(i[0],"data").element;if(o&&o.getAttribute&&"true"===o.getAttribute("data-select2-tag"))return void i.trigger("mouseenter")}t.call(this)},t})),t.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more resultsâ€¦"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searchingâ€¦"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(e,t,n,i,o,a,r,s,l,c,u,d,p,m,h,f,g,v,y,_,b,w,A,k,C,U,T,x,E,D,M){function S(){this.reset()}return S.prototype.apply=function(u){if(null==(u=e.extend(!0,{},this.defaults,u)).dataAdapter&&(null!=u.ajax?u.dataAdapter=h:null!=u.data?u.dataAdapter=m:u.dataAdapter=p,u.minimumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,_)),u.tags&&(u.dataAdapter=c.Decorate(u.dataAdapter,f)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=c.Decorate(u.dataAdapter,g))),null==u.resultsAdapter&&(u.resultsAdapter=t,null!=u.ajax&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,k)),null!=u.placeholder&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,A)),u.selectOnClose&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,T)),u.tags&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,D))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=b;else{var d=c.Decorate(b,w);u.dropdownAdapter=d}0!==u.minimumResultsForSearch&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,U)),u.closeOnSelect&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,x)),null!=u.dropdownCssClass&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,E)),u.dropdownAdapter=c.Decorate(u.dropdownAdapter,C)}null==u.selectionAdapter&&(u.multiple?u.selectionAdapter=i:u.selectionAdapter=n,null!=u.placeholder&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,o)),u.allowClear&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,a)),u.multiple&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,r)),null!=u.selectionCssClass&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,s)),u.selectionAdapter=c.Decorate(u.selectionAdapter,l)),u.language=this._resolveLanguage(u.language),u.language.push("en");for(var M=[],S=0;S<u.language.length;S++){var O=u.language[S];-1===M.indexOf(O)&&M.push(O)}return u.language=M,u.translations=this._processTranslations(u.language,u.debug),u},S.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return d[e]||e}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function n(i,o){if(null==i.term||""===i.term.trim())return o;if(o.children&&o.children.length>0){for(var a=e.extend(!0,{},o),r=o.children.length-1;r>=0;r--)null==n(i,o.children[r])&&a.children.splice(r,1);return a.children.length>0?a:n(i,a)}var s=t(o.text).toUpperCase(),l=t(i.term).toUpperCase();return s.indexOf(l)>-1?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},S.prototype.applyFromElement=function(e,t){var n=e.language,i=this.defaults.language,o=t.prop("lang"),a=t.closest("[lang]").prop("lang"),r=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(n),this._resolveLanguage(i),this._resolveLanguage(a));return e.language=r,e},S.prototype._resolveLanguage=function(t){if(!t)return[];if(e.isEmptyObject(t))return[];if(e.isPlainObject(t))return[t];var n;n=Array.isArray(t)?t:[t];for(var i=[],o=0;o<n.length;o++)if(i.push(n[o]),"string"==typeof n[o]&&n[o].indexOf("-")>0){var a=n[o].split("-")[0];i.push(a)}return i},S.prototype._processTranslations=function(t,n){for(var i=new u,o=0;o<t.length;o++){var a=new u,r=t[o];if("string"==typeof r)try{a=u.loadPath(r)}catch(e){try{r=this.defaults.amdLanguageBase+r,a=u.loadPath(r)}catch(e){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else a=e.isPlainObject(r)?new u(r):r;i.extend(a)}return i},S.prototype.set=function(t,n){var i={};i[e.camelCase(t)]=n;var o=c._convertData(i);e.extend(!0,this.defaults,o)},new S})),t.define("select2/options",["jquery","./defaults","./utils"],(function(e,t,n){function i(e,n){this.options=e,null!=n&&this.fromElement(n),null!=n&&(this.options=t.applyFromElement(this.options,n)),this.options=t.apply(this.options)}return i.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl")));var o={};function a(e,t){return t.toUpperCase()}for(var r=0;r<t[0].attributes.length;r++){var s=t[0].attributes[r].name,l="data-";if(s.substr(0,l.length)==l){var c=s.substring(l.length),u=n.GetData(t[0],c);o[c.replace(/-([a-z])/g,a)]=u}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(o=e.extend(!0,{},t[0].dataset,o));var d=e.extend(!0,{},n.GetData(t[0]),o);for(var p in d=n._convertData(d))i.indexOf(p)>-1||(e.isPlainObject(this.options[p])?e.extend(this.options[p],d[p]):this.options[p]=d[p]);return this},i.prototype.get=function(e){return this.options[e]},i.prototype.set=function(e,t){this.options[e]=t},i})),t.define("select2/core",["jquery","./options","./utils","./keys"],(function(e,t,n,i){var o=function(e,i){null!=n.GetData(e[0],"select2")&&n.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),i=i||{},this.options=new t(i,e),o.__super__.constructor.call(this);var a=e.attr("tabindex")||0;n.StoreData(e[0],"old-tabindex",a),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var s=this.render();this._placeContainer(s);var l=this.options.get("selectionAdapter");this.selection=new l(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var c=this.options.get("dropdownAdapter");this.dropdown=new c(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var u=this.options.get("resultsAdapter");this.results=new u(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){d.trigger("selection:update",{data:e})})),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(e[0],"select2",this),e.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},o.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var o=e.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==t){var a=e.attr("style");if("string"!=typeof a)return null;for(var r=a.split(";"),s=0,l=r.length;s<l;s+=1){var c=r[s].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==t?window.getComputedStyle(e[0]).width:t},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(t){e._syncA(),e._syncS(t)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",(function(t,n){e.trigger(t,n)}))},o.prototype._registerSelectionEvents=function(){var e=this,t=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,i){-1===t.indexOf(n)&&e.trigger(n,i)}))},o.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",(function(t,n){e.trigger(t,n)}))},o.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",(function(t,n){e.trigger(t,n)}))},o.prototype._registerEvents=function(){var e=this;this.on("open",(function(){e.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){e.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){e.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){e.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){e.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,(function(n){e.trigger("results:all",{data:n,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(n){e.trigger("results:append",{data:n,query:t})}))})),this.on("keypress",(function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.UP&&t.altKey?(e.close(t),t.preventDefault()):n===i.ENTER||n===i.TAB?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&e.removedNodes.length>0)return!0;if(Array.isArray(e))return e.some((function(e){return t._isChangeMutation(e)}))}return!1},o.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e),n=this;t&&this.dataAdapter.current((function(e){n.trigger("selection:update",{data:e})}))},o.prototype.trigger=function(e,t){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in i){var a=i[e],r={prevented:!1,name:e,args:t};if(n.call(this,a,r),r.prevented)return void(t.prevented=!0)}n.call(this,e,t)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current((function(t){e=t})),e},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];Array.isArray(t)&&(t=t.map((function(e){return e.toString()}))),this.$element.val(t).trigger("input").trigger("change")},o.prototype.destroy=function(){n.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),n.StoreData(t[0],"element",this.$element),t},o})),t.define("jquery-mousewheel",["jquery"],(function(e){return e})),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(e,t,n,i,o){if(null==e.fn.select2){var a=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var i=e.extend(!0,{},t);new n(e(this),i)})),this;if("string"==typeof t){var i,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=o.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=e[t].apply(e,r)})),a.indexOf(t)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n})),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}.apply(t,i))||(e.exports=o)},975:(e,t,n)=>{var i;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return s(c(e),arguments)}function r(e,t){return a.apply(null,[e].concat(t||[]))}function s(e,t){var n,i,r,s,l,c,u,d,p,m=1,h=e.length,f="";for(i=0;i<h;i++)if("string"==typeof e[i])f+=e[i];else if("object"==typeof e[i]){if((s=e[i]).keys)for(n=t[m],r=0;r<s.keys.length;r++){if(null==n)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[r],s.keys[r-1]));n=n[s.keys[r]]}else n=s.param_no?t[s.param_no]:t[m++];if(o.not_type.test(s.type)&&o.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),o.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(a("[sprintf] expecting number but found %T",n));switch(o.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}o.json.test(s.type)?f+=n:(!o.number.test(s.type)||d&&!s.sign?p="":(p=d?"+":"-",n=n.toString().replace(o.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(p+n).length,l=s.width&&u>0?c.repeat(u):"",f+=s.align?p+n+l:"0"===c?p+l+n:l+p+n)}return f}var l=Object.create(null);function c(e){if(l[e])return l[e];for(var t,n=e,i=[],a=0;n;){if(null!==(t=o.text.exec(n)))i.push(t[0]);else if(null!==(t=o.modulo.exec(n)))i.push("%");else{if(null===(t=o.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var r=[],s=t[2],c=[];if(null===(c=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=o.key_access.exec(s)))r.push(c[1]);else{if(null===(c=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(c[1])}t[2]=r}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=i}t.sprintf=a,t.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=r,void 0===(i=function(){return{sprintf:a,vsprintf:r}}.call(t,n,t,e))||(e.exports=i))}()},311:e=>{"use strict";e.exports=jQuery}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(311),t=__webpack_require__.n(e),n=__webpack_require__(756),i=__webpack_require__(838),o=__webpack_require__(973),a=__webpack_require__(375);function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render()}var i,o;return i=e,(o=[{key:"render",value:function(){var e=t()('\n\t\t\t<div class="uap-report-bug">\n\t\t\t\t<a\n\t\t\t\t\tclass="uap-report-bug__btn"\n\n\t\t\t\t\tuap-tooltip="'.concat(UncannyAutomator.i18n.sendFeedback.title,'"\n\t\t\t\t\tuap-flow="left"\n\n\t\t\t\t\ttarget="_blank"\n\t\t\t\t\thref="').concat((0,n.hl)("https://automatorplugin.com/feedback/",this.utmBtnParameters),'"\n\t\t\t\t></a>\n\t\t\t</div>\n\t\t'));t()("body").append(e)}},{key:"utmBtnParameters",get:function(){var e,t;return(0,n.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp?(e="Uncanny Automator Pro ".concat(UncannyAutomator.version),t="uncanny_automator_pro"):(e="Uncanny Automator ".concat(UncannyAutomator.version),t="uncanny_automator"),{version:e,utm_source:t,utm_medium:"send_feedback",utm_content:"bulb_icon"}}}])&&r(i.prototype,o),e}();function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}__webpack_require__(347);const c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={container:t()("#titlediv"),input:t()("#titlediv #title"),status:{}},this.publishedTitle=this.elements.input.val(),this.createStatus(),this.bindChanges(),this.notSavedAlert()}var i,o;return i=e,(o=[{key:"createStatus",value:function(){var e=t()("<div/>",{class:"uap-title-status"}),n=t()("<div/>",{class:"uap"}),i=t()("<div/>",{class:"uo-status uo-status--saving"}),o=t()("<span/>",{class:"uo-status-icon uo-icon uo-icon--loading uo-icon--rotate"}),a=t()("<span/>",{class:"uo-status__text"}).text(UncannyAutomator.i18n.title.saving);i.append(o),i.append(a),this.elements.status.saving=i;var r=t()("<div/>",{class:"uo-status uo-status--saved"}),s=t()("<span/>",{class:"uo-status-icon uo-icon uo-icon--check"}),l=t()("<span/>",{class:"uo-status__text"}).text(UncannyAutomator.i18n.title.saved);r.append(s),r.append(l),this.elements.status.saved=r,n.append(i),n.append(r),e.append(n),this.elements.container.append(e)}},{key:"setStatusSaving",value:function(){this.elements.status.saving.stop().fadeIn(150)}},{key:"setStatusSaved",value:function(){var e=this;this.elements.status.saving.stop().fadeOut(150),this.elements.status.saved.stop().fadeIn(150,(function(){setTimeout((function(){e.elements.status.saved.fadeOut(150)}),3e3)}))}},{key:"revertChanges",value:function(){this.elements.input.val(this.publishedTitle),this.elements.status.saving.stop().fadeOut(150)}},{key:"bindChanges",value:function(){var e,t=this;this.elements.input.on("input",(function(){clearTimeout(e),e=setTimeout((function(){t.setStatusSaving(),t.updateTitle()}),1500)}))}},{key:"getTitle",value:function(){return this.elements.input.val()}},{key:"updateTitle",value:function(){var e=this;(0,n.L8)("change_post_title",{post_ID:UncannyAutomator.recipe.id,post_title:this.getTitle()},(function(){e.setStatusSaved(),e.publishedTitle=e.getTitle()}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save the title"),e.revertChanges()}))}},{key:"notSavedAlert",value:function(){t()(document).ready((function(){t()(window).off("beforeunload.edit-post")}))}}])&&l(i.prototype,o),e}();function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasMetabox&&this.listenCheckboxes()}var i,o;return i=e,o=[{key:"$container",get:function(){return t()("#recipe_categorydiv")}},{key:"$allCategoriesList",get:function(){return t()("#recipe_categorychecklist")}},{key:"hasMetabox",get:function(){return(0,n.$K)(this.$allCategoriesList)}},{key:"listenCheckboxes",value:function(){var e=this;this.$container.on("change",'input[type="checkbox"][name="tax_input[recipe_category][]"], .popular-category input[type="checkbox"]',(function(n){var i=t()(n.currentTarget);e.saveCategory(i)})),new MutationObserver((function(n){n.forEach((function(n){n.addedNodes.forEach((function(n){var i=t()(n).find('input[type="checkbox"][name="tax_input[recipe_category][]"]');e.saveCategory(i)}))}))})).observe(this.$allCategoriesList[0],{childList:!0})}},{key:"saveCategory",value:function(e){var t=this,i={id:e.val(),isChecked:e.is(":checked")};this.setStatus("loading",!0,e),(0,n.L8)("set_recipe_terms",{term_id:"recipe_category",recipe_id:UncannyAutomator.recipe.id,category_id:i.id,set_category:i.isChecked},(function(n){n.success?(t.setStatus("success",!0,e),setTimeout((function(){t.setStatus("success",!1,e)}),2e3)):(UncannyAutomator.dev.developerMode&&console.error("Couldn't change the status of the recipe category"),t.revertCheckboxValue(e),t.setStatus("error",!0,e),setTimeout((function(){t.setStatus("error",!1,e)}))),t.setStatus("loading",!1,e)}),(function(){t.revertCheckboxValue(e),t.setStatus("loading",!1,e),t.setStatus("error",!0,e),setTimeout((function(){t.setStatus("error",!1,e)}))}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"revertCheckboxValue",value:function(e){e.prop("checked",!e.is(":checked"))}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=n.closest(".selectit");"loading"==e?t?(i.addClass("uap-taxonomy-loading"),n.prop("disabled",!0)):(i.removeClass("uap-taxonomy-loading"),n.prop("disabled",!1)):"success"==e?t?i.addClass("uap-taxonomy-success"):i.removeClass("uap-taxonomy-success"):"error"==e&&(t?i.addClass("uap-taxonomy-error"):i.removeClass("uap-taxonomy-error"))}}],o&&u(i.prototype,o),e}();function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getElements(),1==this.$elements.tagsTextarea.length&&this.listenModificationsToTags()}var i,o;return i=e,o=[{key:"getElements",value:function(){this.$elements={container:t()("#tagsdiv-recipe_tag"),tagsTextarea:t()("textarea#tax-input-recipe_tag"),tagsList:t()("#tagsdiv-recipe_tag .tagchecklist")}}},{key:"listenModificationsToTags",value:function(){var e=this;new MutationObserver((function(t){e.saveTags()})).observe(this.$elements.tagsList[0],{childList:!0})}},{key:"saveTags",value:function(){var e=this,t=this.getTags();this.setStatus("loading",!0),(0,n.L8)("set_recipe_terms",{term_id:"recipe_tag",recipe_id:UncannyAutomator.recipe.id,tags:t},(function(t){t.success?(e.setStatus("success",!0),setTimeout((function(){e.setStatus("success",!1)}),2e3)):(0,n.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:vsprintf(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat((0,n.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")]),content:"",console:"Data sent:\n ".concat(JSON.stringify(t)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}}),e.setStatus("loading",!1)}),(function(e){(0,n.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:vsprintf(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat((0,n.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")]),content:"",console:"Data sent:\n ".concat(JSON.stringify(e)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}})}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"loading"==e?t?this.$elements.container.addClass("uap-tags-loading"):this.$elements.container.removeClass("uap-tags-loading"):"success"==e?t?this.$elements.container.addClass("uap-tags-success"):this.$elements.container.removeClass("uap-tags-success"):"error"==e&&(t?this.$elements.container.addClass("uap-tags-error"):this.$elements.container.removeClass("uap-tags-error"))}},{key:"getTags",value:function(){var e=this.$elements.tagsTextarea.val();return{asArray:e.split(","),commaSeparated:e}}}],o&&p(i.prototype,o),e}(),h=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new d,new m};UncannyAutomator.cache={tokens:{}};try{(0,n.iK)((function(){(0,n.Dh)("Render the UI",!1,{bgColor:"#579f49"}),new o.Z,new a.Z,new i.Z,new s,new c,new h}))}catch(e){(0,n.C2)({title:UncannyAutomator.i18n.debugging.uiCantLoad.title,warning:UncannyAutomator.i18n.debugging.uiCantLoad.warning,content:UncannyAutomator.i18n.debugging.uiCantLoad.content,console:e})}})()})();
//# sourceMappingURL=bundle.min.js.map