/*! For license information please see bundle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/components/Actions.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c}),n("jquery");var i=n("./src/components/Utilities.js"),a=n("./src/components/UserSelector.js"),o=n("./src/components/MetaboxItems.js"),r=n("./src/components/MetaboxFooter.js"),s=n("./src/components/ItemCreatorAdd.js"),l=n("./src/components/Closures.js");const c=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log(UncannyAutomator),(0,i.getDOMElements)("metabox",{type:"action"}).empty(),"anonymous"==UncannyAutomator.recipe.type&&(0,i.isDefined)(UncannyAutomator.wp)&&UncannyAutomator.wp&&new a.default;var t=(0,i.itemsObject)("get",{filter:{itemType:"action"}}),n=!1,c=UncannyAutomator.i18n.action.asyncActions.closuresLabelInstant;if(!(0,i.isEmpty)(t)&&(0,i.isDefined)(UncannyAutomator.wp)&&UncannyAutomator.wp){var u=(0,i.filterMeta)(t,"async_mode",!1);new o.default("action",u);var d=(0,i.filterMetaValue)(t,"async_mode","delay"),p=(0,i.filterMetaValue)(t,"async_mode","schedule");(0,i.isEmpty)(d)&&(0,i.isEmpty)(p)||(c=UncannyAutomator.i18n.action.asyncActions.closuresLabelAsync,new l.default(c),n=!0),new o.default("action",d),new o.default("action",p)}else(0,i.isEmpty)(t)?new s.default("action"):new o.default("action",t);new r.default("action"),n||new l.default(c)}},"./src/components/Closures.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/ItemHeaderMenu.js"),s=n("./src/components/ItemHeaderIcon.js"),l=n("./src/components/ItemHeaderTag.js"),c=n("./src/components/ItemHeaderSentence.js"),u=n("./src/components/Actions.js"),d=n("./src/components/Field.js");function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const m=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={$metabox:(0,o.getDOMElements)("metabox",{type:"action"})},a().each(UncannyAutomator.closures,(function(e,i){return n.createClosure(i,t)}))}var t,n;return t=e,(n=[{key:"createClosure",value:function(e,t){var n=!1,i=a()("<div/>",{class:"metabox__footer"}),r={label:t,formElementClass:"form-element--nomargin"},s=this.getClosureByCodeFromItemsObject(e.code);(0,o.isDefined)(s)&&(n=!0,r.currentValue=!0,r.itemid=s.id);var l=new d.default("checkbox",r),c=l.getFormElement();c.on("change",(function(){var t=l.getValue();l.startLoadingAnimation(),t?(0,o.restCall)("add",{recipePostID:UncannyAutomator.recipe.id,action:"add-new-closure",item_code:e.code,default_meta:{integration_name:UncannyAutomator.integrations[e.integration].name,sentence:e.sentence}},(function(e){new u.default,(0,o.isDefined)(e.post_ID)&&(0,o.getDOMElements)("item",{id:e.post_ID}).item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(e){console.log("‼️ ERROR-TODO. Couldn't add the closure"),l.stopLoadingAnimation(),l.setValue(!1,!1)})):(0,o.restCall)("delete",{ID:s.id},(function(){new u.default}),(function(){console.log("‼️ ERROR-TODO. Couldn't delete the closure"),new u.default}))})),i.append(c);var p=a()("<div/>",{class:"uo-toggle uo-toggle--show"});if(n){p.addClass("uo-toggle--show");var m=a()("<div/>",{class:"item item--closure item--margintop","data-id":s.id}),f=this.createHeader(UncannyAutomator.recipe.items[s.id].integrationCode,"closure",e.code,s.id);m.append(f);var h=a()("<div/>",{class:"item__content"});m.append(h),p.append(m)}i.append(p),this.elements.$metabox.append(i)}},{key:"createHeader",value:function(e,t,n,i){var o=a()("<div/>"),u=a()("<div/>",{class:"item-title uap-clear"}),d=new r.default(t,e,n,i);o.append(d);var p=new s.default(e);o.append(p);var m=new l.default(e);u.append(m);var f=new c.default(t,e,n,i);return u.append(f),o.append(u),o}},{key:"getClosureByCodeFromItemsObject",value:function(e){var t;return a().each(UncannyAutomator.recipe.items,(function(n,i){i.itemCode==e&&(t=i)})),t}}])&&p(t.prototype,n),e}()},"./src/components/Field.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n("jquery"),a=n.n(i),o=(n("./node_modules/flatpickr/dist/esm/index.js"),n("./src/components/Utilities.js")),r=n("./src/components/Validation.js"),s=n("./src/components/tokens/token-selector.js");function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=function(){function e(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.type=t,this.attributes=this.setAttributes(n),this.customValidationFunction=a,i&&this.createFormElement()}var t,n;return t=e,(n=[{key:"createFormElement",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=null,r=this.type,s=this.attributes;if((0,o.inArray)(r,(0,o.getFieldTypes)())){var l=a()("<div/>",{class:"form-element"});(0,o.isDefined)(s.formElementClass)&&l.addClass(s.formElementClass);var c,u,d,p={name:s.optionCode,id:s.uniqueFieldID,"data-isajax":s.isAjax,"data-targetfield":s.targetField,"data-integrationid":s.integrationID,"data-endPoint":s.endPoint,"data-supportsTokens":s.supportsTokens,"data-supportsTinymce":s.supportsTinyMCE,"data-required":s.isRequired,"data-item_type":s.itemType,"data-item-id":s.itemId,"data-option-group":s.groupId,"data-is-hidden":s.isHidden,"data-is-child-field":s.isChildField};switch(r){case"select":c=a()("<div/>",{class:"form-select"}),this.fieldContainer=c,u=a()("<select/>",a().extend({},p,{"data-type":"select",class:"form-element__select","data-supports-custom-value":s.supportsCustomValue})),s.supportsMultipleValues&&u.prop("multiple","multiple"),this.field=u;var m,f,h=!1,g=0;s.hasDefaultValue&&(m=(0,o.isEmpty)(s.defaultValue.option_value)||(0,o.isEmpty)(s.defaultValue.option_name)?s.defaultValue:s.defaultValue.option_value);var y=a()('<optgroup\n\t\t\t\t\t\t\ttitle="form-element__select-normal-options"\n\t\t\t\t\t\t\tclass="form-element__select-normal-options">\n\t\t\t\t\t\t</optgroup>');if(s.options=s.options.filter((function(e){return"automator_custom_value"!==e.value})),a().each(s.options,(function(e,t){var n=a()("<option/>",{value:t.value,text:t.text});s.hasDefaultValue&&(0,o.compareStrings)(m,e)&&(n.prop("selected",!0),f=!0,h=!0),s.hasValue&&(0,o.compareStrings)(s.currentValue,t.value)&&(n.prop("selected",!0),h=!0),n.appendTo(y),g++})),y.appendTo(u),s.supportsMultipleValues){if(!(0,o.isEmpty)(s.currentValue))try{u.val(s.currentValue)}catch(e){}(0,o.isEmpty)(u.val())||(h=!0)}if(s.hasDefaultValue&&!f&&!(0,o.isEmpty)(s.defaultValue.option_value)&&!(0,o.isEmpty)(s.defaultValue.option_name)){var v=a()("<option/>",{value:s.defaultValue.option_value,text:s.defaultValue.option_name});s.hasValue||(0,o.compareStrings)(s.defaultValue.option_value,s.currentValue)||(v.prop("selected",!0),h=!0),v.prependTo(u),g++}if(s.hasPlaceholder&&(u.prepend("<option></option>"),s.hasDefaultValue||s.hasValue||u.find("option:selected").prop("selected",!1)),s.supportsCustomValue){var _=s.customValue,b=a()('\n\t\t\t\t\t\t\t<optgroup label="'.concat(UncannyAutomator.i18n.validation.field.select.otherOptions,'">\n\t\t\t\t\t\t\t\t<option value="automator_custom_value">').concat(UncannyAutomator.i18n.validation.field.select.customValue,"</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t"));u.append(b),s.hasValue&&(0,o.compareStrings)(s.currentValue,"automator_custom_value")&&(b.find("option").attr("selected",!0),h=!0),s.hasValue&&!h&&(b.find("option").attr("selected",!0),h=!0,_=s.currentValue),this.customValueField=new e("text",{itemId:s.itemId,itemType:s.itemType,isRequired:s.isRequired,isReadOnly:!1,supportsTinyMCE:!1,supportsCopyToClipboard:!1,supportsTokens:s.supportsTokens,isAjax:!1,fieldType:"text",optionCode:"".concat(s.optionCode,"_custom"),label:"",description:s.hasCustomValueDescription?s.customValueDescription:void 0,placeholder:"",isHidden:!1,tokenName:(0,o.vsprintf)(UncannyAutomator.i18n.validation.field.select.customValueToken,[s.label]),defaultValue:null,currentValue:_,isChildField:!0,parentOptionCode:s.optionCode})}if(this.selectHasSelectedOption=h,0==g){var k=a()(new Option(UncannyAutomator.i18n.noResults,"",!0,!0));k.prop("disabled",!0),this.field.find(".form-element__select-normal-options").append(k),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}u.on("change",(function(e,t){l.trigger("automator:field:change",t)}));break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":var w="form-input form-input--".concat(r);c=a()("<div/>",{class:w});var T=a()("<div/>",{class:"form-element__input-cm"});if(this.$fakeCodemirrorField=T,c.append(T),this.fieldContainer=c,u=a()("<input/>",a().extend({},p,{class:"form-element__input",type:"text","data-type":r})),(0,o.isDefined)(s.maxLength)&&u.prop("maxlength",s.maxLength),this.field=u,s.supportsTokens&&c.addClass("form-input--token"),s.hasPlaceholder&&u.prop("placeholder",s.placeholder),s.hasValue?u.prop("value",s.currentValue):s.hasDefaultValue&&u.prop("value",s.defaultValue),["date","time"].includes(s.fieldType)){var A=a()('\n\t\t\t\t\t\t\t\t<div class="form-element__input-clear" uap-tooltip="'.concat(UncannyAutomator.i18n.clear,'">\n\t\t\t\t\t\t\t\t\t<span class="uo-icon uo-icon--times"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'));c.addClass("form-input--has-clear"),this.$fakeCodemirrorField.append(A),A.on("click",(function(){t.clearValue()}))}u.on("input",(function(){l.trigger("automator:field:change")}));break;case"textarea":c=a()("<div/>",{class:"form-textarea"}),this.fieldContainer=c,u=a()("<textarea/>",a().extend(!0,p,{"data-type":"text",class:"form-element__textarea","data-item_type":s.itemType})),(0,o.isDefined)(s.maxLength)&&u.prop("maxlength",s.maxLength),this.field=u,s.supportsTokens&&c.addClass("form-textarea--token"),s.hasPlaceholder&&u.prop("placeholder",s.placeholder),s.hasValue?u.text(s.currentValue):s.hasDefaultValue&&u.text(s.defaultValue),u.on("input",(function(){l.trigger("automator:field:change")}));break;case"checkbox":c=a()("<div/>",{class:"form-checkbox"}),this.fieldContainer=c;var C=a()("<label/>",{class:"form-checkbox__container"}),D=a()("<div/>",{class:"checkbox--show"});if(u=a()("<input/>",a().extend({},p,{type:"checkbox","data-type":"checkbox",class:"checkbox--hidden checkbox--primary"})),s.hasValue&&s.currentValue&&u.prop("checked",!0),this.field=u,s.hasLabel&&C.html(s.label),c.append(C),C.append(u),C.append(D),(0,o.isDefined)(s.isToggle)&&s.isToggle&&(c.addClass("form-checkbox--toggle"),(0,o.isDefined)(s.toggle))){if((0,o.isDefined)(s.toggle.on)){var U=a()("<span/>",{class:"checkbox-label checkbox-label--on"}).text(s.toggle.on);C.append(U)}if((0,o.isDefined)(s.toggle.off)){var E=a()("<span/>",{class:"checkbox-label checkbox-label--off"}).text(s.toggle.off);C.append(E)}}if((0,o.isDefined)(s.color))if((0,o.inArray)(s.color,["gutenberg","green"]))switch(s.color){case"gutenberg":c.addClass("form-checkbox--toggle-gutenberg");break;case"green":c.addClass("form-checkbox--toggle-green")}else console.error((0,o.vsprintf)("The color %s does not exists. Default color will be used instead.",[s.color]));(0,o.isDefined)(s.align)&&((0,o.inArray)(s.align,["left","right"])?"right"==s.align&&c.addClass("form-checkbox--toggle-right"):console.error((0,o.vsprintf)("The alignment %s does not exists. %s will be used instead.",[s.align,'"left"']))),u.on("change",(function(e,t){l.trigger("automator:field:change",t)})),u=C;break;case"radio":c=a()("<div/>",{class:"form-radio"}),this.fieldContainer=c;var x=a()(),M=a()();a().each(s.options,(function(e,t){var n=a()("<label/>",{class:"form-radio__container"});n.html(t.text);var i=a()("<input/>",a().extend({},p,{type:"radio","data-type":"radio",class:"radio--hidden radio--primary",value:t.value,name:p.id}));x=x.add(i);var o=a()("<div/>",{class:"radio--show"});n.append(i),n.append(o),(s.hasValue&&s.currentValue==t.value||!s.hasValue&&s.hasDefaultValue&&s.defaultValue==t.value)&&i.prop("checked",!0),M=M.add(n)})),this.field=M,u=M,x.on("change",(function(e,t){l.trigger("automator:field:change",t)}))}if(c.append(u),"checkbox"!=r&&(s.hasLabel||s.isRequired)&&(d=a()("<label/>",{class:"form-element__label",for:s.uniqueFieldID}),s.hasLabel&&d.html(s.label)),s.isRequired)if(c.addClass("form-element--required"),"checkbox"==s.fieldType){if(u.find("input").prop("required",!0),s.hasLabel){var O=a()("<span/>",{class:"form-element-label__required"});u.append(O)}}else if(u.prop("required",!0),s.hasLabel){var S=a()("<span/>",{class:"form-element-label__required"});d.append(S)}(0,o.isDefined)(s.isReadOnly)&&s.isReadOnly&&("select"==s.fieldType?u.prop("disabled",!0):["checkbox","radio"].includes(s.fieldType)?u.find("input").prop("disabled",!0):u.prop("readonly",!0)),(s.hasLabel||s.isRequired)&&c.prepend(d);var I=a()("<div/>",{class:"form-element__error"});if(c.append(I),this.fieldContainer=c,s.hasDescription){var j=a()("<div/>",{class:"description"});j.html(s.description),c.append(j)}s.isHidden&&c.addClass("form-element--hidden"),l.append(c),"select"==s.fieldType&&(0,o.isDefined)(this.customValueField)&&(this.customValueFieldContainer=a()('<div class="form-select-custom">\n\t\t\t\t\t\t<div class="form-element-children"></div>\n\t\t\t\t\t</div>'),this.customValueFieldContainer.find(".form-element-children").append(this.customValueField.createFormElement()),l.append(this.customValueFieldContainer),"automator_custom_value"==this.getValue()?this.customValueFieldContainer.addClass("form-select-custom--visible"):this.customValueFieldContainer.removeClass("form-select-custom--visible")),i=l,this.formElement=l,n&&this.initLibraries(),this.onChange(),this.onFocus()}else console.error((0,o.vsprintf)('The field type "%s" is invalid. The valid ones are %s',[r,(0,o.getFieldTypes)().join(", ")]));return i}},{key:"setAttributes",value:function(e){if(e.fieldType=this.type,e.uniqueFieldID="".concat(e.optionCode,"__").concat((0,o.getUniqueId)()),"checkbox"!=e.fieldType||(0,o.isEmpty)(e.currentValue)||["true","false"].includes(e.currentValue)&&(e.currentValue="true"==e.currentValue,e.currentValue?e.hasValue=!0:e.hasValue=!1),(0,o.isDefined)(e.hasValue)||((0,o.isEmpty)(e.currentValue)?e.hasValue=!1:e.hasValue=!0),(0,o.isDefined)(e.hasPlaceholder)||((0,o.isEmpty)(e.placeholder)?e.hasPlaceholder=!1:e.hasPlaceholder=!0),(0,o.isDefined)(e.hasDefaultValue)||((0,o.isEmpty)(e.defaultValue)?e.hasDefaultValue=!1:e.hasDefaultValue=!0),(0,o.isDefined)(e.hasLabel)||((0,o.isEmpty)(e.label)?e.hasLabel=!1:e.hasLabel=!0),(0,o.isDefined)(e.hasDescription)||((0,o.isEmpty)(e.description)?e.hasDescription=!1:e.hasDescription=!0),(0,o.isDefined)(e.isRequired)||(e.isRequired=!1),(0,o.isDefined)(e.isChildField)||(e.isChildField=!1),(0,o.isDefined)(e.supportsTokens)||(e.supportsTokens=!1),e.supportsTokens&&"select"==e.fieldType&&!["action","closure"].includes(e.itemType)&&(e.supportsTokens=!1),(0,o.isDefined)(e.isReadOnly)||(e.isReadOnly=!1),"select"==e.fieldType){if((0,o.isDefined)(e.supportsMultipleValues)||(e.supportsMultipleValues=!1),e.supportsMultipleValues&&(e.supportsCustomValue=!1),e.supportsMultipleValues)try{e.currentValue=JSON.parse(e.currentValue)}catch(e){}(0,o.isDefined)(e.supportsCustomValue)||(e.supportsCustomValue=!1),e.hasCustomValueDescription=!(0,o.isEmpty)(e.customValueDescription)}return"date"==e.fieldType&&(e.isReadOnly=!0,(0,o.isDefined)(e.dateFormat)||(e.dateFormat="Y-m-d"),(0,o.isDefined)(e.dateAltFormat)||(e.dateAltFormat=UncannyAutomator.format.date),(0,o.isDefined)(e.minDate)&&(e.minDate=e.minDate),(0,o.isDefined)(e.maxDate)&&(e.maxDate=e.maxDate),(0,o.isDefined)(e.supportsRange)||(e.supportsRange=!1)),"time"==e.fieldType&&(e.isReadOnly=!0,(0,o.isDefined)(e.timeFormat)||(e.timeFormat="H:i K"),(0,o.isDefined)(e.timeAltFormat)||(e.timeAltFormat="H:i K"),(0,o.isDefined)(e.minTime)&&(e.minTime=e.minTime),(0,o.isDefined)(e.maxTime)&&(e.maxTime=e.maxTime)),(0,o.isDefined)(e.supportsTinyMCE)||(e.supportsTinyMCE=!1),!(0,o.isDefined)(e.isToggle)&&(0,o.isDefined)(e.toggle)&&(e.isToggle=!0),(0,o.isDefined)(e.isAjax)||(e.isAjax=!1),(0,o.isDefined)(e.isHidden)||(e.isHidden=!1),e}},{key:"validate",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=null;t?(n=this.getFieldContainer(),e=this.getValue()):e=this.attributes.currentValue,this.type;var i={supportsTokens:this.attributes.supportsTokens,required:this.attributes.isRequired};return(0,r.validateField)(n,this.type,e,i,this.customValidationFunction)}},{key:"onChange",value:function(){var e=this;this.formElement.on("automator:field:change",(function(t,n){"select"==e.attributes.fieldType&&e.attributes.supportsCustomValue&&("automator_custom_value"==e.getValue()?e.customValueFieldContainer.addClass("form-select-custom--visible"):e.customValueFieldContainer.removeClass("form-select-custom--visible"));var i=function(){if(e.attributes.isAjax&&e.attributes.targetField!==e.attributes.optionCode&&e.doAJAX(),(0,o.isDefined)(e.attributes.isChildField)&&e.attributes.isChildField&&(0,o.isDefined)(e.attributes.parentOptionCode)){var t=(0,o.getField)(e.attributes.itemId,e.attributes.parentOptionCode);(0,o.isDefined)(t)&&t.doAJAX()}};if(e.attributes.isAjax&&(0,o.isDefined)(e.attributes.targetField)&&e.attributes.targetField!==e.attributes.optionCode&&(e.attributes.completedFirstLoad||(0,o.isEmpty)(e.attributes.currentValue)&&!e.attributes.hasDefaultValue&&!e.attributes.completedFirstLoad)){var a=(0,o.getField)(e.attributes.itemId,e.attributes.targetField);a.setValue(null,!1),a.setCustomValue(null,!1)}return["select","radio","checkbox"].includes(e.attributes.fieldType)?i():((0,o.isDefined)(e.onChangeTimeout)&&clearTimeout(e.onChangeTimeout),e.onChangeTimeout=setTimeout((function(){i()}),1500)),!1}))}},{key:"onFocus",value:function(){var e=this;this.field.on("focusin",(function(t){e.attributes.isReadOnly&&a()(t.currentTarget).select()})),this.field.on("focusout",(function(){}))}},{key:"isReady",value:function(){var e=!1;return(0,o.isDefined)(UncannyAutomator.recipe.items[this.attributes.itemId])&&(e=!0),e}},{key:"doAJAX",value:function(){var e=this;if((0,o.isDefined)(this.getValue())?this.getValue():this.getMetaValue(),this.attributes.isAjax){var t=this;if(this.attributes.optionCode!=this.attributes.targetField&&(t=(0,o.getField)(this.attributes.itemId,this.attributes.targetField)),!(0,o.isEmpty)(this.attributes.integrationId)&&!(0,o.isEmpty)(this.attributes.endpoint)){this.startLoadingAnimation(),t.startLoadingAnimation();var n=this.getValue(),i=(0,o.isDefined)(t.getValue())?t.getValue():t.getMetaValue();(0,o.AJAXRequest)(this.attributes.endpoint,{recipe_id:UncannyAutomator.recipe.id,integration_id:this.attributes.integrationId,item_id:this.attributes.itemId,group_id:this.attributes.groupId,field_id:this.attributes.optionCode,target_field:this.attributes.targetField,value:n,values:(0,o.getCurrentFieldsValues)(this.attributes.itemId)},(function(n){if(e.stopLoadingAnimation(),t.stopLoadingAnimation(),"select"==t.getAttributes().fieldType&&a().isArray(n)){if(e.attributes.isAjax&&(0,o.isDefined)(e.attributes.targetField)&&e.attributes.targetField!==e.attributes.optionCode&&(e.attributes.completedFirstLoad||(0,o.isEmpty)(e.attributes.currentValue)&&!e.attributes.hasDefaultValue&&!e.attributes.completedFirstLoad)&&(i=null),"automator_custom_value"==i){var r=t.getSelectCustomValue();i=(0,o.isEmpty)(r)?null:r}t.setSelectOptions(n,!1),t.setValue(i)}else t.setValue(n);e.attributes.completedFirstLoad=!0}))}}}},{key:"getFormElement",value:function(){var e=this;if(this.isReady()){this.attributes.completedFirstLoad=!1;var t=!1;try{t=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields.reduce((function(t,n){return t||n.attributes.targetField==e.attributes.optionCode&&n.attributes.optionCode!=e.attributes.optionCode&&n.attributes.isAjax}),!1)}catch(e){}t||(this.attributes.targetField==this.attributes.optionCode&&this.attributes.isAjax&&this.doAJAX(),this.field.trigger("automator:field:change",{manuallySet:!1}))}return this.formElement}},{key:"getFieldContainer",value:function(){return this.fieldContainer}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"getField",value:function(){return this.field}},{key:"getFieldCM",value:function(){return this.$fakeCodemirrorField}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getValue",value:function(){var e=null;if((0,o.isDefined)(this.field))switch(this.type){case"select":case"text":case"url":case"email":case"int":case"float":e=this.field.val();break;case"textarea":if((0,o.isDefined)(this.TokenSelector))try{this.TokenSelector.parseHTMLTokensInPlainTextarea()}catch(e){console.log(e)}e=this.field.val();break;case"checkbox":e=this.field.is(":checked");break;case"radio":e=this.field.find("input:checked").val();break;case"date":case"time":e=this.field.val()}return(0,o.isDefined)(this.field)&&(0,o.isDefined)(e)||(this.attributes.hasValue?e=this.attributes.currentValue:this.attributes.hasDefaultValue&&(e=this.attributes.defaultValue)),e}},{key:"getReadableValue",value:function(){var e=this,t=null,n=this.getValue();switch(this.type){case"select":if((0,o.isDefined)(this.field))t=this.attributes.supportsMultipleValues&&a().isArray(n)?n.map((function(t){return e.field.find((0,o.vsprintf)('option[value="%s"]',[t])).text()})).join("".concat(UncannyAutomator.i18n.itemSeparator," ")):this.field.find((0,o.vsprintf)('option[value="%s"]',[n])).text();else if(this.attributes.supportsMultipleValues&&a().isArray(n))try{t=n.map((function(t){return e.getSelectOptionByValue(t).text})).join("".concat(UncannyAutomator.i18n.itemSeparator," "))}catch(e){}else try{t=this.getSelectOptionByValue(n).text}catch(e){}break;case"text":case"url":case"email":case"int":case"float":case"textarea":n=a()("<p/>").html(n).text();break;case"checkbox":t=n?UncannyAutomator.i18n.trueLabel:UncannyAutomator.i18n.falseLabel;break;case"radio":if((0,o.isDefined)(this.field)){var i=this.field.find("input:checked");1==i.length&&(t=i.closest(".form-radio__container").text().trim())}else try{t=this.getSelectOptionByValue(n).text}catch(e){}break;case"date":case"time":n=a()("<p/>").html(n).text()}return t}},{key:"getSelectCustomValue",value:function(){var e=null;if("select"==this.attributes.fieldType&&this.attributes.supportsCustomValue&&"automator_custom_value"==this.getValue())if((0,o.isDefined)(this.customValueField))e=this.customValueField.getValue();else try{e=UncannyAutomator.recipe.items[this.attributes.itemId].meta["".concat(this.attributes.optionCode,"_custom")]}catch(e){}return e}},{key:"getSelectOptionByValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null,n=this.attributes.options;return this.attributes.supportsCustomValue&&n.push({value:"automator_custom_value",text:UncannyAutomator.i18n.validation.field.select.customValue}),(0,o.isEmpty)(n)||n.forEach((function(n){e==n.value&&(t=n)})),t}},{key:"getMetaValue",value:function(){var e;if((0,o.isDefined)(UncannyAutomator.recipe.items[this.attributes.itemId])){var t=UncannyAutomator.recipe.items[this.attributes.itemId].meta[this.attributes.optionCode];(0,o.isDefined)(t)&&(e=t)}return e}},{key:"setValue",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((0,o.isDefined)(this.field))switch(this.type){case"select":(0,o.isDefined)(e)||(e=this.attributes.supportsMultipleValues?[]:"");var i=this.field.find("option");if(this.attributes.supportsMultipleValues)i.prop("selected",!1),a().isArray(e)&&!(0,o.isEmpty)(e)&&(e.forEach((function(e){var n=t.field.find('option[value="'+e+'"]');n.length>0&&n.prop("selected",!0)})),n&&this.field.trigger("change",{manuallySet:!1}));else{var r=this.field.find('option[value="'+e+'"]');r.length>0?(i.prop("selected",!1),r.prop("selected",!0),n&&this.field.trigger("change",{manuallySet:!1})):(i.prop("selected",!1),this.attributes.supportsCustomValue&&!(0,o.isEmpty)(e)&&this.setCustomValue(e,!1),n&&this.field.trigger("change",{manuallySet:!1}))}break;case"text":case"url":case"email":case"int":case"float":this.field.val(e),n&&this.field.trigger("automator:field:change");break;case"textarea":this.field.val(e),(0,o.isDefined)(this.fieldTinyMCE)&&this.fieldTinyMCE.setContent(e),n&&this.field.trigger("automator:field:change");break;case"checkbox":var s=e,l=this.getValue();s&&!l&&this.field.prop("checked",!0),!s&&l&&this.field.prop("checked",!1),n&&(s&&!l||!s&&l)&&this.field.trigger("automator:field:change");break;case"radio":this.field.filter('[name="'.concat(e,'"]')).prop("checked",!0),n&&this.field.trigger("automator:field:change");break;case"date":case"time":this.field.val(e),n&&this.field.trigger("automator:field:change")}}},{key:"clearValue",value:function(){this.setValue("",!0);try{this.fieldCM.setValue("")}catch(e){}if(["date","time"].includes(this.attributes.fieldType))try{this.flatpickrInstance.clear()}catch(e){}}},{key:"setCustomValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"select"==this.attributes.fieldType&&(0,o.isDefined)(this.customValueField)&&(this.field.val("automator_custom_value"),this.customValueField.setValue(e,t),t&&this.field.trigger("change",{manuallySet:!1}))}},{key:"hasSelectedOption",value:function(){return this.selectHasSelectedOption}},{key:"setSelectOptions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeSelectOptions();try{e=e.filter((function(e){return(0,o.isDefined)(e.value)&&(0,o.isDefined)(e.text)}))}catch(e){}if((0,o.isDefined)(this.field)){var n=this.field.find(".form-element__select-normal-options");if(e.length>0){this.field.prop("disabled",!1);var i=(0,o.isDefined)(this.getValue())?this.getValue():this.getMetaValue(),r=[];a().each(e,(function(e,t){var i=new Option(t.text,t.value,!1,!1);n.append(i),r.push(i)})),(0,o.isEmpty)(i)||a().each(this.field.find("option"),(function(e,t){t.value==i&&a()(t).prop("selected",!0)}))}else{var s=a()(new Option(UncannyAutomator.i18n.noResults,"",!this.attributes.supportsCustomValue,!this.attributes.supportsCustomValue));s.prop("disabled",!0),n.append(s),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}t&&this.field.trigger("change"),this.rerenderSelect2()}}},{key:"removeSelectOptions",value:function(){(0,o.isDefined)(this.field)&&this.field.find(".form-element__select-normal-options").empty()}},{key:"isLoading",value:function(){return this.formElement.hasClass("form-element--loading")}},{key:"startLoadingAnimation",value:function(){var e="form-element--loading";(0,o.isDefined)(this.formElement)&&!this.formElement.hasClass(e)&&(this.formElement.addClass(e),"checkbox"!=this.type||(0,o.isDefined)(this.attributes.isToggle)||this.fieldContainer.addClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"stopLoadingAnimation",value:function(){var e="form-element--loading";(0,o.isDefined)(this.formElement)&&this.formElement.hasClass(e)&&(this.formElement.removeClass(e),this.fieldContainer.removeClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"initLibraries",value:function(){switch(this.type){case"select":this.initSelect2(this.field);break;case"text":case"url":case"email":case"int":case"float":case"textarea":"url"==this.attributes.fieldType&&(0,r.initURLChecker)(this.fieldContainer);break;case"date":case"time":this.initFlatpickr(this.field)}}},{key:"getSelect2Settings",value:function(){var e={theme:"uap-select2",searchInputPlaceholder:UncannyAutomator.i18n.search,language:{noResults:function(){return UncannyAutomator.i18n.noResults}},templateResult:function(e){var t=e.text;return(0,o.isDefined)(e.id)&&Number.isInteger(parseInt(e.id))&&parseInt(e.id)>0&&(t='<span class="uap-select2-item__meta">('.concat((0,o.vsprintf)(UncannyAutomator.i18n.postIDPlaceholder,[e.id.replace("-objectkey","")]),")</span> ").concat(e.text)),t},templateSelection:function(e){var t=e.text;return(0,o.isDefined)(e.id)&&Number.isInteger(parseInt(e.id))&&parseInt(e.id)>0&&(t='<span class="uap-select2-item__meta">('.concat((0,o.vsprintf)(UncannyAutomator.i18n.postIDPlaceholder,[e.id.replace("-objectkey","")]),")</span> ").concat(t)),t},escapeMarkup:function(e){return e}};return this.attributes.hasPlaceholder&&(e.placeholder=this.attributes.placeholder),this.attributes.customClass&&(e.customClass=this.attributes.customClass),e}},{key:"initSelect2",value:function(e){var t=this.getSelect2Settings();e.hasClass("select2-hidden-accessible")||e.select2(t)}},{key:"initFlatpickr",value:function(e){var t=this;(0,o.isDefined)(document.getElementById("uap-flatpickr-calendar"))||a()("body").append(a()('<div id="uap-flatpickr-calendar" class="uap uap-flatpickr-calendar"></div>'));var n=document.getElementById("uap-flatpickr-calendar"),i={allowInput:!0,positionElement:this.$fakeCodemirrorField[0],altInput:!0,clickOpens:!1,appendTo:n,locale:{weekdays:{shorthand:[UncannyAutomator.i18n.format.date.weekdays.shorthand.sunday,UncannyAutomator.i18n.format.date.weekdays.shorthand.monday,UncannyAutomator.i18n.format.date.weekdays.shorthand.tuesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.wednesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.thursday,UncannyAutomator.i18n.format.date.weekdays.shorthand.friday,UncannyAutomator.i18n.format.date.weekdays.shorthand.saturday],longhand:[UncannyAutomator.i18n.format.date.weekdays.longhand.sunday,UncannyAutomator.i18n.format.date.weekdays.longhand.monday,UncannyAutomator.i18n.format.date.weekdays.longhand.tuesday,UncannyAutomator.i18n.format.date.weekdays.longhand.wednesday,UncannyAutomator.i18n.format.date.weekdays.longhand.thursday,UncannyAutomator.i18n.format.date.weekdays.longhand.friday,UncannyAutomator.i18n.format.date.weekdays.longhand.saturday]},months:{shorthand:[UncannyAutomator.i18n.format.date.months.shorthand.january,UncannyAutomator.i18n.format.date.months.shorthand.february,UncannyAutomator.i18n.format.date.months.shorthand.march,UncannyAutomator.i18n.format.date.months.shorthand.april,UncannyAutomator.i18n.format.date.months.shorthand.may,UncannyAutomator.i18n.format.date.months.shorthand.june,UncannyAutomator.i18n.format.date.months.shorthand.july,UncannyAutomator.i18n.format.date.months.shorthand.august,UncannyAutomator.i18n.format.date.months.shorthand.september,UncannyAutomator.i18n.format.date.months.shorthand.october,UncannyAutomator.i18n.format.date.months.shorthand.november,UncannyAutomator.i18n.format.date.months.shorthand.december],longhand:[UncannyAutomator.i18n.format.date.months.longhand.january,UncannyAutomator.i18n.format.date.months.longhand.february,UncannyAutomator.i18n.format.date.months.longhand.march,UncannyAutomator.i18n.format.date.months.longhand.april,UncannyAutomator.i18n.format.date.months.longhand.may,UncannyAutomator.i18n.format.date.months.longhand.june,UncannyAutomator.i18n.format.date.months.longhand.july,UncannyAutomator.i18n.format.date.months.longhand.august,UncannyAutomator.i18n.format.date.months.longhand.september,UncannyAutomator.i18n.format.date.months.longhand.october,UncannyAutomator.i18n.format.date.months.longhand.november,UncannyAutomator.i18n.format.date.months.longhand.december]},rangeSeparator:" ".concat(UncannyAutomator.i18n.format.date.rangeSeparator," "),firstDayOfWeek:parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)>=1&&parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)<=7?parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)-1:0,weekAbbreviation:" ".concat(UncannyAutomator.i18n.format.date.weekAbbreviation," "),scrollTitle:UncannyAutomator.i18n.scrollToIncrement,toggleTitle:UncannyAutomator.i18n.clickToToggle,amPM:[UncannyAutomator.i18n.format.date.am,UncannyAutomator.i18n.format.date.pm],yearAriaLabel:UncannyAutomator.i18n.format.date.year,monthAriaLabel:UncannyAutomator.i18n.format.date.month,hourAriaLabel:UncannyAutomator.i18n.format.date.hour,minuteAriaLabel:UncannyAutomator.i18n.format.date.minute},onReady:function(e,n,i){try{var a=function(){t.getValue().includes("}}")||t.fieldCM.getValue()!=i.altInput.value&&t.fieldCM.setValue(i.altInput.value)};(0,o.isDefined)(t.fieldCM)?a():t.field.on("ua-codemirror-ready",(function(){a()}))}catch(e){console.log(e)}},onChange:function(e,n,i){try{var a=function(){t.fieldCM.setValue(i.altInput.value)};(0,o.isDefined)(t.fieldCM)?a():t.field.on("ua-codemirror-ready",(function(){a()}))}catch(e){console.log(e)}}};"date"==this.attributes.fieldType&&(i=a().extend(i,{dateFormat:this.attributes.dateFormat,altFormat:this.attributes.dateAltFormat}),this.attributes.supportsRange&&(i.mode="range"),(0,o.isDefined)(this.attributes.minDate)&&(i.minDate=this.attributes.minDate),(0,o.isDefined)(this.attributes.maxDate)&&(i.maxDate=this.attributes.maxDate)),"time"==this.attributes.fieldType&&(i=a().extend(i,{enableTime:!0,noCalendar:!0,dateFormat:this.attributes.timeFormat,altFormat:this.attributes.timeAltFormat}),(0,o.isDefined)(this.attributes.minTime)&&(i.minTime=this.attributes.minTime),(0,o.isDefined)(this.attributes.manTime)&&(i.manTime=this.attributes.manTime)),this.flatpickrInstance=e.flatpickr(i)}},{key:"initCodeMirror",value:function(){var e=this;if(["text","url","email","int","float","date","time"].includes(this.attributes.fieldType)){this.destroyCodeMirror();var t=this.getValue();this.fieldCM=CodeMirror(this.$fakeCodemirrorField[0],{lineNumbers:0,tabSize:4,value:t,mode:"default",dragDrop:!1,noNewlines:!0,viewportMargin:1/0,lineWrapping:!0,autoRefresh:!0,extraKeys:{Tab:!1},readOnly:this.attributes.isReadOnly}),this.attributes.hasPlaceholder&&this.fieldCM.setOption("placeholder",this.attributes.placeholder),this.fieldCM.on("changes",(function(){["date","time"].includes(e.attributes.fieldType)||e.setValue(e.fieldCM.getValue())})),this.fieldCM.on("focus",(function(){if(["date","time"].includes(e.attributes.fieldType))try{setTimeout((function(){e.flatpickrInstance.open()}),50)}catch(e){console.log(e)}})),this.field.on("focus",(function(){e.fieldCM.focus()})),this.field.trigger("ua-codemirror-ready")}"select"==this.attributes.fieldType&&(0,o.isDefined)(this.customValueField)&&this.customValueField.initCodeMirror()}},{key:"destroyCodeMirror",value:function(){if((0,o.isDefined)(this.fieldCM))try{var e=this.fieldCM.getWrapperElement();e.parentNode.removeChild(e),this.fieldCM=null}catch(e){}}},{key:"rerenderSelect2",value:function(){var e=this.getSelect2Settings();!(0,o.isEmpty)(this.field)&&this.field.hasClass("select2-hidden-accessible")&&this.field.select2("destroy").select2(e)}},{key:"initTokenSelector",value:function(){this.attributes.supportsTokens&&(this.destroyTokenSelector(),this.tokenSelector=new s.default(this)),"select"==this.attributes.fieldType&&(0,o.isDefined)(this.customValueField)&&this.customValueField.initTokenSelector()}},{key:"destroyTokenSelector",value:function(){(0,o.isDefined)(this.tokenSelector)&&this.tokenSelector.destroy()}},{key:"initTinyMCE",value:function(){var e=this;if(this.field,(0,o.isDefined)(this.field)&&"textarea"==this.attributes.fieldType&&this.attributes.supportsTinyMCE){var t=this.field.prop("id"),n=tinymce.get(t);(0,o.isDefined)(n)&&wp.editor.remove(t),wp.editor.initialize(t,{mediaButtons:!0,tinymce:{wpautop:!0,toolbar1:"formatselect bold italic bullist numlist blockquote alignleft aligncenter alignright link unlink wp_more",toolbar2:"strikethrough hr forecolor pastetext removeformat visualchars outdent indent undo redo"},quicktags:!0}),(n=tinymce.get(t)).on("input paste undo redo",(0,o.debounce)((function(){e.field.val(n.getContent({format:"raw"}))}),100)),this.formElement.find(".switch-tmce").on("click",(function(){e.field.trigger("ua-tinymce-activate-visual-view")})),this.formElement.find(".switch-html").on("click",(function(){e.field.trigger("ua-tinymce-activate-text-view")})),this.fieldTinyMCE=n,n.on("init",(function(){e.field.trigger("ua-tinymce-ready")}))}}}])&&c(t.prototype,n),e}();!function(e){var t=e.fn.select2.amd.require("select2/defaults");e.extend(t.defaults,{searchInputPlaceholder:""});var n=e.fn.select2.amd.require("select2/dropdown/search"),i=n.prototype.render;n.prototype.render=function(e){var t=i.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr("placeholder",this.options.get("searchInputPlaceholder")),this.$search.addClass(this.options.get("customClass")),t}}(window.jQuery)},"./src/components/FieldsGroup.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/Field.js");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const l=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setAttributes(t),this.createFields()}var t,n;return t=e,(n=[{key:"setAttributes",value:function(e){(0,o.isDefined)(e.hasLabel)||((0,o.isEmpty)(e.label)?e.hasLabel=!1:e.hasLabel=!0),(0,o.isDefined)(e.hasDescription)||((0,o.isEmpty)(e.description)?e.hasDescription=!1:e.hasDescription=!0),this.attributes=e}},{key:"createFields",value:function(){this.fields=this.attributes.fields.map((function(e){return new r.default(e.fieldType,e)}))}},{key:"createFormElement",value:function(){var e=a()('<div class="form-group"></div>');if(this.attributes.hasLabel){var t=a()('<div class="form-group__label">'.concat(this.attributes.label,"</div>"));e.append(t)}var n=a()('<div class="form-group__fields"></div>');if(this.fields.forEach((function(e){var t=e.createFormElement();n.append(t)})),e.append(n),this.attributes.hasLabel){var i=a()('<div class="form-group__description">'.concat(this.attributes.description,"</div>"));e.append(i)}return this.formElement=e,e}},{key:"getValue",value:function(){var e={};return this.fields.forEach((function(t){e[t.getFieldID()]=t.getValue()})),e}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isValid:!0,message:""};return this.fields.forEach((function(n){t[n.getFieldID()]=n.validate(e),t.isValid=t.isValid&&t[n.getFieldID()].isValid})),t}}])&&s(t.prototype,n),e}()},"./src/components/FieldsRepeater.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/Field.js");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=n("./node_modules/html5sortable/dist/html5sortable.cjs.js");const c=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setAttributes(t),this.createFields()}var t,n;return t=e,(n=[{key:"setAttributes",value:function(e){(0,o.isDefined)(e.hasLabel)||((0,o.isEmpty)(e.label)?e.hasLabel=!1:e.hasLabel=!0),(0,o.isDefined)(e.hasDescription)||((0,o.isEmpty)(e.description)?e.hasDescription=!1:e.hasDescription=!0),this.attributes=e}},{key:"createFields",value:function(){var e=this.attributes.fields,t=[];if(Array.isArray(this.attributes.currentValue)&&this.attributes.currentValue.length>0)this.attributes.currentValue.forEach((function(n,i){var a=JSON.parse(JSON.stringify(e));a=a.map((function(e,t){return(0,o.isDefined)(n[e.optionCode])?e.currentValue=n[e.optionCode]:e.currentValue="",e})),t.push(a)}));else if(this.attributes.isRequired){var n=JSON.parse(JSON.stringify(e));n.currentValue="",t.push(n)}t=t.map((function(e,t){return e.map((function(e,t){return e.label="",e.description="",new r.default(e.fieldType,e)}))})),this.fieldRows=t}},{key:"createFormElement",value:function(){var e,t=a()('<div class="form-repeater"></div>');if(this.attributes.hasLabel){var n=a()('\n\t\t\t\t<div class="form-repeater__label">\n\t\t\t\t\t'.concat(this.attributes.label,"\n\t\t\t\t\t").concat(this.attributes.isRequired?'<span class="form-repeater__label-required"></span>':"","\n\t\t\t\t</div>\n\t\t\t"));t.append(n)}var i=this.getFieldsTable();if(t.append(i),i.append(a()('<div class="form-element__error"></div>')),this.attributes.hasDescription){var o=a()('<div class="form-repeater__description">'.concat(this.attributes.description,"</div>"));t.append(o)}return this.formElement=t,e=t,this.fieldRows.length>1&&this.makeRowsSortable(),this.listenSave(),e}},{key:"listenSave",value:function(){var e=this;this.formElement.on("saved",(function(t){e.updateAttributesFieldsFromRow()}))}},{key:"updateAttributesFieldsFromRow",value:function(){var e=[];this.fieldRows.forEach((function(t){var n=[];t.forEach((function(e){n.push(e.attributes)})),e.push(n)})),this.attributes.fields=e}},{key:"makeRowsSortable",value:function(){var e=this;l(this.formElement.find(".form-repeater-fields__table-rows"),{forcePlaceholderSize:!0,handle:".form-repeater-fields__table-rows-cell--number",placeholder:'<tr><td colspan="'.concat(this.fieldRows[0].length+2,'">&nbsp;</td></tr>'),itemSerializer:function(e,t){return{position:e.index,html:e.html}}}),this.formElement.find(".form-repeater-fields__table-rows").on("sortupdate",(function(t){var n=[];a().each(t.detail.destination.items,(function(e,t){n.push(a()(t).data("order"))}));var i=[];n.forEach((function(t){i.push(e.fieldRows[t])})),e.fieldRows=i,e.reRender()}))}},{key:"getFieldsTable",value:function(){var e=this,t=a()('\n\t\t\t<div class="form-repeater-fields">\n\t\t\t\t<table class="form-repeater-fields__table">\n\t\t\t\t\t<thead class="form-repeater-fields__table-heading"></thead>\n\t\t\t\t\t<tbody class="form-repeater-fields__table-rows"></tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class="form-repeater-fields__actions"></div>\n\t\t\t</div>\n\t\t'),n=[];this.attributes.fields.forEach((function(e,t){var i=(0,o.isDefined)(e.label)?e.label:"",a=!!(0,o.isDefined)(e.isRequired)&&e.isRequired,r=(0,o.isDefined)(e.description)?e.description:"";n.push({title:i,description:r,isRequired:a})}));var i=a()("<tr></tr>");i.append(a()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--number">#</th>')),n.forEach((function(e,t){var n=a()('<th class="form-repeater-fields__table-heading-cell"></th>');(0,o.isEmpty)(e.title)||n.append(a()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-title">\n\t\t\t\t\t\t'.concat(e.title,"\n\t\t\t\t\t\t").concat(e.isRequired?'<span class="form-repeater-fields__table-heading-cell-required"></span>':"","\n\t\t\t\t\t</div>\n\t\t\t\t"))),(0,o.isEmpty)(e.description)||n.append(a()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-description">\n\t\t\t\t\t\t'.concat(e.description,"\n\t\t\t\t\t</div>\n\t\t\t\t"))),i.append(n)})),i.append(a()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--actions"></th>')),t.find(".form-repeater-fields__table-heading").append(i);var r=t.find(".form-repeater-fields__table-rows"),s=this.fieldRows.length;if(this.fieldRows.forEach((function(t,n){var i=a()('<tr data-order="'.concat(n,'"></tr>'));i.append(a()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--number">'.concat(n+1,"</td>"))),t.forEach((function(e,t){var n=a()('<td class="form-repeater-fields__table-rows-cell"></td>'),o=e.getFormElement();e.initLibraries(),n.append(o),i.append(n)}));var l=a()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--actions"></td>');i.append(l);var c=e.getAttributes();if(0!=n||0==n&&(!e.attributes.isRequired||s>1)){var u=(0,o.isDefined)(e.attributes.removeRowButtonLabel)?e.attributes.removeRowButtonLabel:UncannyAutomator.i18n.removeRow,d=a()('<div class="form-repeater-fields__table-rows-cell-remove" uap-tooltip="'.concat(u,'"><span></span></div>'));d.on("click",(function(){e.deleteRow(n)})),c.hideActions||l.append(d)}r.append(i)})),!this.getAttributes().hideActions){var l=a()('\n\t\t\t\t<div class="uap-btn uap-btn--primary uap-btn--small">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.addRow,"\n\t\t\t\t</div>\n\t\t\t"));(0,o.isDefined)(this.attributes.addRowButtonLabel)&&l.text(this.attributes.addRowButtonLabel),l.on("click",(function(){l.addClass("uap-btn--loading"),e.addRow()})),t.find(".form-repeater-fields__actions").append(l)}return t}},{key:"getValue",value:function(){var e=[];return this.fieldRows.forEach((function(t,n){var i={};t.forEach((function(e,t){i[e.getFieldID()]=e.getValue()})),e.push(i)})),e}},{key:"addRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JSON.parse(JSON.stringify(this.attributes.fields));n.currentValue="",n=n.map((function(t,n){return t.label="",t.description="",(0,o.isDefined)(e[t.optionCode])&&(t.currentValue=e[t.optionCode]),new r.default(t.fieldType,t)})),this.fieldRows.push(n),t&&this.reRender()}},{key:"reRender",value:function(){this.destroyCodeMirror(),this.destroyTokenSelector();var e=this.formElement,t=this.createFormElement(!1);e.replaceWith(t),this.initTokenSelector(),this.initCodeMirror()}},{key:"deleteRow",value:function(e){(0,o.isDefined)(this.fieldRows[e])&&this.fieldRows.splice(e,1),this.formElement.replaceWith(this.createFormElement())}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isValid:!0,message:""},n=[];return this.fieldRows.forEach((function(i,a){var o={};i.forEach((function(n,i){o[n.getFieldID()]=n.validate(e),t.isValid=t.isValid&&o[n.getFieldID()].isValid})),n.push(o)})),t}},{key:"initTokenSelector",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.initTokenSelector()}))}))}},{key:"destroyTokenSelector",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.destroyTokenSelector()}))}))}},{key:"initCodeMirror",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.initCodeMirror()}))}))}},{key:"destroyCodeMirror",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.destroyCodeMirror()}))}))}}])&&s(t.prototype,n),e}()},"./src/components/ItemCreatorAdd.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/ItemCreatorIntegrations.js");const s=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=a()("<div/>",{class:"item item--start"}),i=a()("<div/>",{class:"item-icon"}),s=a()("<div/>",{class:"item-title uap-clear"}),l=a()("<div/>",{class:"uap-btn uap-btn--secondary uap-btn--small"});s.append(l),n.append(i),n.append(s),(0,o.getDOMElements)("metabox",{type:t}).append(n),"trigger"==t&&l.text(UncannyAutomator.i18n.trigger.add),"action"==t&&l.text(UncannyAutomator.i18n.action.add),l.on("click",(function(){return new r.default(t)}))}},"./src/components/ItemCreatorIntegrations.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/ItemHeaderMenu.js"),s=n("./src/components/itemCreatorTaskSelector.js");function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.$currentItem=n,this.integrations=[],this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){var e=a()("<div/>",{class:"item"});this.$item=e;var t=this.createHeader(),n=a()("<div/>",{class:"item__content"}),i=this.createIntegrations(),r=this.createDiscoverMoreIntegrations();if(e.append(t),n.append(i),n.append(r),e.append(n),(0,o.isDefined)(this.$currentItem))this.$currentItem.replaceWith(e);else{var s=(0,o.getDOMElements)("lastItem",{type:this.itemType});"trigger"==this.itemType&&(s.length>0?e.insertAfter(s):(0,o.getDOMElements)("metabox",{type:this.itemType}).append(e)),"action"==this.itemType&&((0,o.getDOMElements)("items",{type:this.itemType}).length>0?e.insertAfter(s):(0,o.getDOMElements)("metabox",{type:this.itemType}).find(".item.item--start").replaceWith(e))}}},{key:"createHeader",value:function(){var e=a()("<div/>"),t=a()("<div/>",{class:"item-icon"}),n=a()("<div/>",{class:"item-title uap-clear"}),i=a()("<div/>",{class:"item-title__describe"}),o=a()("<div/>",{class:"item-title__non-editable"}).text(UncannyAutomator.i18n.integration.select),s=new r.default(this.itemType);return e.append(s),e.append(t),i.append(o),n.append(i),e.append(n),e}},{key:"createIntegrations",value:function(){var e=this,t=a()("<div/>",{class:"item-integrations"});return this.filterByNonEmptyIntegrations(this.itemType),this.sortIntegrationsAlphabetically(),this.integrations.forEach((function(n){var i=n.id,a=e.createIntegration(i,n);a.on("click",(function(){new s.default(e.itemType,i,e.$item)})),t.append(a)})),t}},{key:"createIntegration",value:function(e,t){var n,i=a()("<div/>",{class:"item-integration"}),r=a()("<div/>",{class:"item-integration__logo"}),s=a()("<div/>",{class:"item-integration__name"});return t.isProOnly&&(i.addClass("item-integration--pro"),i.append(a()('\n                <div class="item-integration__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</div>\n            ")))),t.isAvailable?i.addClass("item-integration--available"):(i.addClass("item-integration--unavailable"),i.attr("uap-tooltip",(0,o.vsprintf)(UncannyAutomator.i18n.proOnly.requiresPro,[UncannyAutomator.i18n.uncannyAutomatorPro]))),(0,o.isDefined)(t.icon_svg)?n=a()('<img src="'.concat(t.icon_svg,'" alt="').concat(t.name,'">')):(0,o.isDefined)(t.icon_32)&&(0,o.isDefined)(t.icon_64)&&(n=a()('<img src="'.concat(t.icon_32,'" srcset="').concat((0,o.vsprintf)("%s 1x, %s 2x",[t.icon_32,t.icon_64]),'" alt="').concat(t.name,'">'))),s.text(t.name),r.append(n),i.append(r),i.append(s),i}},{key:"createDiscoverMoreIntegrations",value:function(){return a()('\n            <div class="item-content__description">\n                '.concat(UncannyAutomator.i18n.integration.discoverMore,' <a href="').concat((0,o.addParametersToURL)("https://automatorplugin.com/integrations/",{utm_source:"uncanny_automator",utm_medium:"select_an_integration",utm_content:"discover_more_integrations"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uo-icon uo-icon--external-link-alt"></span></a>\n            </div>\n        '))}},{key:"filterByNonEmptyIntegrations",value:function(e){var t=this;if(["trigger","action"].includes(e)){var n=a().extend(!0,{},UncannyAutomator.integrations);Object.entries(n).forEach((function(n){var i,r,s,c=(s=2,function(e){if(Array.isArray(e))return e}(r=n)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,a,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return o}}(r,s)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],d=c[1],p=!1,m=!1,f=!1;"trigger"==e?(p=(i=(0,o.filterDeprecatedItems)(d.items.triggers)).hasTriggers,f=i.hasAvailableItems,m=i.allItemsArePro):"action"==e&&(p=(i=(0,o.filterDeprecatedItems)(d.items.actions)).hasActions,f=i.hasAvailableItems,m=i.allItemsArePro),p&&t.integrations.push(a().extend({},d,{id:u,isAvailable:f,isProOnly:m}))}))}}},{key:"sortIntegrationsAlphabetically",value:function(){this.integrations=(0,o.sortArrayOfObjectsAlphabetically)(this.integrations,"name")}}])&&c(t.prototype,n),e}()},"./src/components/ItemHeaderAsync.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/Field.js"),s=n("./src/components/Modal.js"),l=n("./src/components/Actions.js");function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=function(){function e(t,n,i,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"buttonContainer",void 0),u(this,"button",void 0),u(this,"buttonIcon",void 0),u(this,"removeButton",void 0),u(this,"asyncModeField",void 0),u(this,"asyncModeHTML",void 0),u(this,"delayNumberField",void 0),u(this,"delayNumberHTML",void 0),u(this,"delayUnitField",void 0),u(this,"delayUnitHTML",void 0),u(this,"scheduleDateField",void 0),u(this,"scheduleDateHTML",void 0),u(this,"scheduleTimeField",void 0),u(this,"scheduleTimeHTML",void 0),u(this,"scheduleNoticeHTML",void 0),u(this,"modal",void 0),this.itemType=t,this.integrationID=n,this.itemCode=i,this.itemId=a,this.item=UncannyAutomator.recipe.items[a],this.asyncMode=this.item.meta.async_mode,UncannyAutomator.proVersion.startsWith("2")?null:this.createAsyncButton()}var t,n;return t=e,(n=[{key:"hasSchedule",value:function(){return!!this.asyncMode&&("delay"==this.asyncMode?this.item.meta.async_delay_number&&this.item.meta.async_delay_unit:"schedule"==this.asyncMode&&this.item.meta.async_schedule_time&&this.item.meta.async_schedule_date)}},{key:"getButtonText",value:function(){if(this.hasSchedule()){var e=UncannyAutomator.i18n.action.asyncActions[this.asyncMode];return(e+=" ")+"<strong>"+this.item.meta.async_sentence+"</strong>"}return UncannyAutomator.i18n.action.asyncActions.delay}},{key:"createAsyncButton",value:function(){var e=this;return this.buttonContainer=a()("<div/>",{class:"item-async"}),this.button=a()("<div/>",{class:"item-async__btn"}),this.buttonIcon=a()("<i/>",{class:"uo-icon uo-icon--watch"}),this.button.html(this.getButtonText()),this.button.prepend(this.buttonIcon),this.buttonContainer.append(this.button),this.hasSchedule()&&this.createRemoveButton(),this.isNew()&&this.createBadge(UncannyAutomator.i18n.action.asyncActions.new),this.button.on("click",(function(){e.showModal()})),this.buttonContainer}},{key:"isNew",value:function(){return!0}},{key:"createBadge",value:function(e){this.buttonBadge=a()("<span/>",{class:"async-button__badge"}),this.buttonBadge.text(e),this.button.append(this.buttonBadge)}},{key:"createRemoveButton",value:function(){var e=this;this.removeButton=a()("<span/>",{class:"async-remove"}),this.removeButtonIcon=a()("<i/>",{class:"uo-icon uo-icon--times"}),this.removeButton.text(UncannyAutomator.i18n.action.asyncActions.remove),this.removeButton.on("click",(function(){e.removeSchedule()})),this.removeButton.prepend(this.removeButtonIcon),this.buttonContainer.append(this.removeButton)}},{key:"createModalContent",value:function(){var e=a()("<div/>",{class:"async-action-modal"});if(this.asyncModeHTML=this.createasyncModeHTML(),this.asyncModeHTML.find(".form-radio__container:first").after(this.createDelayOptions()),this.asyncModeHTML.find(".form-radio__container:last").after(this.createScheduleOptions()),this.attachModeChangeEvent(),e.append(this.asyncModeHTML),this.hasSchedule()){var t=a()("<div/>",{class:"async-notice async-notice__blue"}),n=a()("<i/>",{class:"uo-icon uo-icon--exclamation-triangle"});t.append(n),t.append(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice2),e.append(t)}return e}},{key:"showModal",value:function(){this.modal=new s.default({title:UncannyAutomator.i18n.action.asyncActions.modal.title,content:this.createModalContent(),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.action.asyncActions.modal.confirm}},{size:"large",customClass:"async-action"}),this.modalEvents()}},{key:"modalEvents",value:function(){var e=this;this.modal.setEvents({afterSetEvents:function(){e.modal.show()},onConfirm:function(){e.submitModal()},afterHide:function(){e.modal.destroy()}})}},{key:"submitModal",value:function(){var e=this.modal.getElements().modal.box.buttons.confirm;if(e.addClass("uap-btn--loading").prop("disabled",!0),this.validateForm().isValid){var t,n=this.asyncModeField.getValue(),i=this.delayNumberField.getValue(),a=this.delayUnitField.getValue(),o=this.scheduleTimeField.getValue(),r=this.scheduleDateField.getValue();t="delay"==n?this.delaySentence():this.scheduleSentence(),this.saveSchedule(n,i,a,o,r,t)}else e.removeClass("uap-btn--loading").prop("disabled",!1)}},{key:"delaySeconds",value:function(){var e,t=this.delayUnitField.getValue(),n=this.delayNumberField.getValue();switch(t){case"seconds":e=1;break;case"minutes":e=60;break;case"hours":e=3600;break;case"days":e=86400;break;case"years":e=31536e3;break;default:e=1}return n*e}},{key:"delaySentence",value:function(){var e=this.delayUnitField.getValue();return 1==this.delayNumberField.getValue()&&(e=e.slice(0,-1)),this.delayNumberField.getValue()+" "+UncannyAutomator.i18n.action.asyncActions.modal[e]}},{key:"scheduleSeconds",value:function(){return Date.parse(this.scheduleDateField.getValue()+" "+this.scheduleTimeField.getValue())}},{key:"scheduleSentence",value:function(){return this.scheduleDateField.getValue()+" @ "+this.scheduleTimeField.getValue()}},{key:"saveSchedule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,o.restCall)("schedule_action",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId,asyncMode:e,delayNumber:n,delayUnit:i,scheduleTime:a,scheduleDate:r,scheduleSentence:s},(function(){t.modal.destroy(),new l.default,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){t.modal.destroy(),console.log("‼️ ERROR-TODO. Couldn't schedule the item"),new l.default}))}},{key:"removeSchedule",value:function(){(0,o.restCall)("remove_schedule",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId},(function(){new l.default,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("‼️ ERROR-TODO. Couldn't schedule the item"),new l.default}))}},{key:"createTimeZone",value:function(){var e=a()("<i/>",{class:"uo-icon uo-icon--question-circle"}),t=a()("<span/>",{class:"schedule-fields__description"}).html("<strong>"+UncannyAutomator.i18n.action.asyncActions.modal.timezone+"</strong>: "+UncannyAutomator.i18n.action.asyncActions.modal.timezoneString);return t.append(e),t}},{key:"createasyncModeHTML",value:function(){return this.asyncModeField=new r.default("radio",{itemType:"action",optionCode:"schedule_type",name:"schedule-type",isRequired:!0,currentValue:this.asyncMode?this.asyncMode:"delay",options:[{value:"delay",text:UncannyAutomator.i18n.action.asyncActions.delay},{value:"schedule",text:UncannyAutomator.i18n.action.asyncActions.schedule}]}),this.asyncModeField.createFormElement().addClass("schedule-type-radio")}},{key:"attachModeChangeEvent",value:function(){var e=this;this.asyncModeHTML.on("automator:field:change",(function(){"schedule"==e.asyncModeField.getValue()?(e.scheduleNoticeHTML.removeClass("hidden"),e.modal.elements.modal.box.buttons.confirm.text(UncannyAutomator.i18n.action.asyncActions.schedule)):(e.scheduleNoticeHTML.addClass("hidden"),e.modal.elements.modal.box.buttons.confirm.text(UncannyAutomator.i18n.action.asyncActions.modal.confirm))}))}},{key:"createScheduleOptions",value:function(){var e=a()("<div/>",{class:"schedule-options"}),t=a()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleDesc),n=a()("<div/>",{class:"schedule-fields"});if(!this.hasSchedule()){this.scheduleNoticeHTML=a()("<div/>",{class:"schedule-notice hidden"});var i=a()("<i/>",{class:"uo-icon uo-icon--question-circle"});this.scheduleNoticeHTML.text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice1),this.scheduleNoticeHTML.append(i),this.scheduleNoticeHTML.addClass("schedule-notice__yellow")}return e.append(t),n.append(this.createScheduleDateHTML()),n.append(this.createScheduleTimeHTML()),e.append(n),e.append(this.createTimeZone()),e.append(this.scheduleNoticeHTML),e}},{key:"createDelayOptions",value:function(){var e=a()("<div/>",{class:"delay-options"}),t=a()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.delayDesc),n=a()("<div/>",{class:"delay-fields"});this.delayNumberHTML=this.createDelayNumberHTML(),this.delayUnitHTML=this.createDelayUnitHTML();var i=a()("<span/>",{class:"delay-fields__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.after);return n.append(this.delayNumberHTML),n.append(this.delayUnitHTML),n.append(i),e.append(t),e.append(n),e}},{key:"createDelayNumberHTML",value:function(){return this.delayNumberField=new r.default("int",{itemType:"action",optionCode:"delay-number",isRequired:!1,supportsTokens:!1,currentValue:this.item.meta.async_delay_number?this.item.meta.async_delay_number:""},!0,this.validateDelayNumber),this.delayNumberField.createFormElement().addClass("delay-fields__number")}},{key:"createDelayUnitHTML",value:function(){return this.delayUnitField=new r.default("select",{itemType:"action",optionCode:"delay-unit",currentValue:this.item.meta.async_delay_unit?this.item.meta.async_delay_unit:"minutes",customClass:"hide-this",isRequired:!1,options:[{value:"seconds",text:UncannyAutomator.i18n.action.asyncActions.modal.seconds},{value:"minutes",text:UncannyAutomator.i18n.action.asyncActions.modal.minutes},{value:"hours",text:UncannyAutomator.i18n.action.asyncActions.modal.hours},{value:"days",text:UncannyAutomator.i18n.action.asyncActions.modal.days},{value:"years",text:UncannyAutomator.i18n.action.asyncActions.modal.years}]}),this.delayUnitField.createFormElement().addClass("delay-fields__unit")}},{key:"createScheduleDateHTML",value:function(){this.scheduleDateField=new r.default("date",{itemType:"action",optionCode:"schedule-date",isRequired:!1,dateFormat:UncannyAutomator.i18n.action.asyncActions.modal.dateFormat,supportsTokens:!1,currentValue:this.item.meta.async_schedule_date?this.item.meta.async_schedule_date:""});var e=this.scheduleDateField.createFormElement();return e.addClass("schedule-fields__date"),this.scheduleDateField.initCodeMirror(),e}},{key:"createScheduleTimeHTML",value:function(){this.scheduleTimeField=new r.default("time",{itemType:"action",optionCode:"schedule-time",isRequired:!1,timeFormat:UncannyAutomator.i18n.action.asyncActions.modal.timeFormat,supportsTokens:!1,currentValue:this.item.meta.async_schedule_time?this.item.meta.async_schedule_time:""});var e=this.scheduleTimeField.createFormElement();return e.addClass("schedule-fields__time"),this.scheduleTimeField.initCodeMirror(),e}},{key:"validateForm",value:function(){var e;switch(this.asyncModeField.getValue()){case"schedule":e=this.validateScheduleFields();break;case"delay":e=this.delayNumberField.validate();break;default:e={isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.unsupported}}return e.isValid?{isValid:!0}:e}},{key:"validateScheduleFields",value:function(e){return{isValid:!0}}},{key:"validateDelayNumber",value:function(e,t){return e<0?{isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.positiveNumber}:{isValid:!0}}}])&&c(t.prototype,n),e}()},"./src/components/ItemHeaderIcon.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.integrationCode=t,this.createItemIcon()}var t,n;return t=e,(n=[{key:"createItemIcon",value:function(){var e=a()("<div/>",{class:"item-icon"});if((0,o.isDefined)(UncannyAutomator.integrations[this.integrationCode])){var t,n=UncannyAutomator.integrations[this.integrationCode];(0,o.isDefined)(n.icon_svg)?t=a()('<img src="'.concat(n.icon_svg,'" alt="').concat(n.name,'">')):(0,o.isDefined)(n.icon_32)&&(0,o.isDefined)(n.icon_64)&&(t=a()('<img src="'.concat(n.icon_32,'" srcset="').concat((0,o.vsprintf)("%s 1x, %s 2x",[n.icon_32,n.icon_64]),'" alt="').concat(n.name,'">'))),e.append(t)}return e}}])&&r(t.prototype,n),e}()},"./src/components/ItemHeaderMenu.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/Modal.js"),s=n("./src/components/Triggers.js"),l=n("./src/components/Actions.js");function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=function(){function e(t,n,i,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.itemCode=i,this.itemId=a,this.item=UncannyAutomator.recipe.items[a],this.createItemActions()}var t,n;return t=e,(n=[{key:"createItemActions",value:function(){var e=this,t=a()("<div/>",{class:"item-actions"}),n=a()("<div/>",{class:"item-actions__btn"}),i=a()("<i/>",{class:"uo-icon uo-icon--ellipsis-h-alt"}),c=a()("<div/>",{class:"item-actions__dropdown"}),u=a()("<ul/>",{class:"item-actions-dropdown__ul"});n.append(i),t.append(n);var d=a()("<li/>",{class:"item-actions-dropdown__action"}),p=a()("<span/>").text(UncannyAutomator.i18n.delete);if(d.append(p),u.append(d),(0,o.isDefined)(this.itemType)&&(0,o.isDefined)(this.itemCode)&&(!(0,o.isDefined)(this.item)||(0,o.isDefined)(this.item)&&!this.item.isMissing)){var m=(0,o.getGlobalItem)(this.integrationID,this.itemType,this.itemCode);if((0,o.isDefined)(m.support_link)){var f="support_menu_link-".concat(this.integrationID,"-").concat(this.integrationID,"_").concat(this.itemCode,"-").concat(this.integrationID,"_").concat((0,o.replaceCurlyBraces)(m.select_option_name,"","").toLowerCase().replace(/\s+|{|}/g,"_")),h=a()("<a/>",{href:(0,o.addParametersToURL)(m.support_link,{utm_source:"uncanny_automator",utm_medium:"action_menu",utm_content:f}),class:"item-actions-dropdown__action",target:"_blank"}),g=a()("<span/>").text(UncannyAutomator.i18n.support);h.append(g),u.append(h)}}return c.append(u),t.append(c),n.on("click",(function(){t.hasClass("item-actions--open")?(t.removeClass("item-actions--open"),a()(document).off("mouseup.uap-actions-click-outside")):(t.addClass("item-actions--open"),a()(document).on("mouseup.uap-actions-click-outside",(function(e){t.is(e.target)||0!==t.has(e.target).length||(t.removeClass("item-actions--open"),a()(document).off("mouseup.uap-actions-click-outside"))})))})),d.on("click",(function(){if((0,o.isDefined)(e.itemId)&&UncannyAutomator.recipe.isLive&&UncannyAutomator.recipe.items[e.itemId].isLive){t.removeClass("item-actions--open");var n=new r.default({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,o.replaceCurlyBraces)(UncannyAutomator.i18n.confirmationModal.deleteWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});n.setEvents({afterSetEvents:function(){n.show()},onConfirm:function(){n.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,o.restCall)("delete",{ID:e.itemId},(function(){n.destroy(),"trigger"==e.itemType&&(new s.default,"anonymous"==UncannyAutomator.recipe.type&&new l.default),"action"!=e.itemType&&"closure"!=e.itemType||new l.default,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){n.destroy(),console.log("‼️ ERROR-TODO. Couldn't delete the item"),"trigger"==e.itemType&&new s.default,"action"!=e.itemType&&"closure"!=e.itemType||new l.default}))},afterHide:function(){n.destroy()}})}else(0,o.isDefined)(e.itemId)?(d.addClass("item-actions-dropdown__action--loading"),(0,o.restCall)("delete",{ID:e.itemId},(function(){"trigger"==e.itemType&&(new s.default,"anonymous"==UncannyAutomator.recipe.type&&new l.default),"action"!=e.itemType&&"closure"!=e.itemType||new l.default}),(function(){console.log("‼️ ERROR-TODO. Couldn't delete the item"),"trigger"==e.itemType&&new s.default,"action"!=e.itemType&&"closure"!=e.itemType||new l.default}))):("trigger"==e.itemType&&new s.default,"action"==e.itemType&&new l.default)})),t}}])&&c(t.prototype,n),e}()},"./src/components/ItemHeaderSentence.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/Modal.js"),s=n("./src/components/ItemOptions.js"),l=n("./src/components/Field.js"),c=n("./src/components/Triggers.js"),u=n("./src/components/Actions.js"),d=n("./src/components/Validation.js"),p=n("./src/components/RecipeNotices.js");function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const f=function(){function e(t,n,i,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.itemCode=i,this.itemId=a,this.item=UncannyAutomator.recipe.items[a],this.createItemSentence(t,i,a)}var t,n;return t=e,(n=[{key:"createItemSentence",value:function(e,t,n){var i,m=(0,o.getGlobalItem)(this.integrationID,e,t);this.globalItem=m,i=this.item.isMissing?this.item.sentence:(0,o.getGlobalItem)(this.integrationID,this.item.itemType,this.item.itemCode).sentence,i=(0,o.parseStringWithTokens)(this.item,i,UncannyAutomator.recipe.items[this.itemId].meta,!0),this.item.isMissing||i.elements.token.on("click",(function(e){var t=a()(e.currentTarget);i.elements.token.removeClass("item-title__token--open"),t.addClass("item-title__token--open"),t.parents(".item").addClass("item--open");var r=t.data("options-id");(0,o.getDOMElements)("optionGroup",{itemID:n,groupID:r}),new s.default(n,r)}));var f=a()("<div/>",{class:"item-title__describe-container"}),h=a()("<div/>",{class:"item-status"});f.append(i.html.addClass("item-title__describe"));var g=new l.default("checkbox",{color:"green",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipeItem,off:UncannyAutomator.i18n.status.draftRecipeItem},currentValue:UncannyAutomator.recipe.items[n].isLive}),y=g.getFormElement();return h.append(y),f.append(h),this.item.isMissing||y.on("automator:field:change",(function(){var e=g.getValue(),t=!0;if(e&&(t=(0,d.validateItem)(n).isValid),g.startLoadingAnimation(),t){var a=e?"publish":"draft";if(!e&&UncannyAutomator.recipe.isLive){var s=new r.default({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,o.replaceCurlyBraces)(UncannyAutomator.i18n.confirmationModal.statusWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});s.setEvents({afterSetEvents:function(){s.show()},onConfirm:function(){var t;s.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),g.startLoadingAnimation();try{t=i.html.get(0).outerHTML}catch(e){}(0,o.restCall)("change_post_status",{post_ID:n,post_status:a,sentence_human_readable:i.brackets,sentence_human_readable_html:t},(function(){s.destroy(),new c.default,new u.default,new p.default,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the item status"),s.destroy(),g.stopLoadingAnimation(),g.setValue(!e,!1)}))},onCancel:function(){s.destroy(),g.setValue(!e,!1),g.stopLoadingAnimation()},afterHide:function(){s.destroy()}})}else{var l;try{l=i.html.get(0).outerHTML}catch(e){}(0,o.restCall)("change_post_status",{post_ID:n,post_status:a,sentence_human_readable:i.brackets,sentence_human_readable_html:l},(function(){g.stopLoadingAnimation(),new p.default}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the item status"),g.stopLoadingAnimation(),g.setValue(!e,!1)}))}}else setTimeout((function(){g.stopLoadingAnimation(),g.setValue(!1,!1)}),1e3)})),f}}])&&m(t.prototype,n),e}()},"./src/components/ItemHeaderTag.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,e),this.integrationId=t,this.integrationName=n,this.createItemTag()}var t,n;return t=e,(n=[{key:"createItemTag",value:function(){var e=UncannyAutomator.integrations[this.integrationId],t=a()("<div/>",{class:"item-title__integration uap-clear"}),n=a()("<div/>",{class:"item-title__tag"});return(0,o.isDefined)(e)?n.text(e.name):n.text(this.integrationName),t.append(n),t}}])&&s(t.prototype,n),e}()},"./src/components/ItemOptions.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("jquery"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_Utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Utilities.js"),_Validation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Validation.js"),_Triggers_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Triggers.js"),_Actions_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Actions.js"),_Modal_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Modal.js"),_Markdown_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Markdown.js");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var ItemOptions=function(){function ItemOptions(e,t){_classCallCheck(this,ItemOptions),this.itemId=e,this.optionId=t,this.item=UncannyAutomator.recipe.items[e],this.fields=this.item.options[this.optionId].fields,this.buttons=this.item.options[this.optionId].buttons,this.create(),this.initTokenSelector(),this.initTinyMCE(),this.initCodeMirror()}return _createClass(ItemOptions,[{key:"create",value:function(){var e=(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.getDOMElements)("item",{id:this.itemId}).contentContainer,t=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options"}),n=this.createButtons(),i=this.createFields();this.fieldsContainer=i,t.append(i);var a=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__notices"});this.noticeContainer=a,t.append(a),t.append(n),e.html(t)}},{key:"createFields",value:function(){var e=this,t=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__group"});return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(n,i){var a=i.getAttributes().fieldType;"repeater"==a&&i.createFields(),i.createFormElement(),t.append(i.getFormElement()),["textarea","group","repeater"].includes(a)?"group"==a?i.fields.forEach((function(t){"textarea"!==t.getAttributes().fieldType&&t.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))})):"repeater"==a&&i.fieldRows.forEach((function(t,n){t.forEach((function(t,n){t.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))}))})):i.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))})),t}},{key:"createButtons",value:function createButtons(){var _this2=this,container=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__buttons"}),automatorButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__automator-buttons"}),developerButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__developer-buttons"}),saveButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--primary"}),cancelButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return"trigger"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"action"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"closure"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),this.saveButton=saveButton,automatorButtons.append(saveButton),automatorButtons.append(cancelButton),jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.buttons,(function(index,button){var $buttonElement=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn"}).text(button.text);(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.isDefined)(button.css_classes)&&$buttonElement.addClass(button.css_classes);var doOnClick=function(){};if((0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.isDefined)(button.on_click))try{doOnClick=eval("(".concat(button.on_click.replace("<script>","").replace("<\/script>","").trim(),")"))}catch(e){console.log(e),console.log(button.on_click)}$buttonElement.on("click",(function(){var e;doOnClick($buttonElement,{item:_this2.item,values:(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.getCurrentFieldsValues)(_this2.itemId)},(e={},(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.isDefined)(button.modules)&&(button.modules.includes("modal")&&(e.Modal=_Modal_js__WEBPACK_IMPORTED_MODULE_5__.default),button.modules.includes("markdown")&&(e.Markdown=_Markdown_js__WEBPACK_IMPORTED_MODULE_6__.default)),e))})),developerButtons.append($buttonElement)})),container.append(automatorButtons),container.append(developerButtons),saveButton.on("click",(function(){if((0,_Validation__WEBPACK_IMPORTED_MODULE_2__.validateItemFields)(_this2.fieldsContainer).isValid){saveButton.addClass("uap-btn--loading uap-btn--disabled");var e,t=_this2.itemId,n=_this2.optionId,i=_this2.getOptionValue(),a=(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.parseStringWithTokens)(_this2.item,_this2.item.meta.sentence,jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},_this2.item.meta,(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.getCurrentFieldsValues)(_this2.itemId)));try{e=a.html.get(0).outerHTML}catch(e){}(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.restCall)("update",{itemId:t,optionCode:n,optionValue:i,sentence_human_readable:a.brackets,sentence_human_readable_html:e},(function(e){_this2.fields.forEach((function(e){e.getFormElement().trigger("saved")})),"trigger"==_this2.item.itemType&&new _Triggers_js__WEBPACK_IMPORTED_MODULE_3__.default,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _Actions_js__WEBPACK_IMPORTED_MODULE_4__.default;var t=UncannyAutomator.recipe.items[_this2.item.id].isValid,n=(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.getDOMElements)("item",{id:_this2.item.id});t?UncannyAutomator.recipe.isLive||_this2.item.isLive||n.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):n.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(e){console.log("‼️ ERROR-TODO. Couldn't save the options of the item"),"trigger"==_this2.item.itemType&&new _Triggers_js__WEBPACK_IMPORTED_MODULE_3__.default,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _Actions_js__WEBPACK_IMPORTED_MODULE_4__.default;try{(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.getDOMElements)("item",{id:_this2.itemId}).item.find('.item-title__token[data-options-id="'.concat(n,'"]')).trigger("click")}catch(e){}}))}})),cancelButton.on("click",(function(){"trigger"==_this2.item.itemType&&new _Triggers_js__WEBPACK_IMPORTED_MODULE_3__.default,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _Actions_js__WEBPACK_IMPORTED_MODULE_4__.default})),container}},{key:"initTokenSelector",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){t.initTokenSelector()}))}},{key:"initTinyMCE",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){"textarea"==t.getAttributes().fieldType&&t.initTinyMCE()}))}},{key:"initCodeMirror",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){t.initCodeMirror()}))}},{key:"getOptionValue",value:function(){var e={},t=!1,n=!1;return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(i,a){var o=a.getAttributes().optionCode,r=a.getValue();if(["select","radio"].includes(a.getAttributes().fieldType)){if(t=!0,a.getAttributes().supportsMultipleValues)try{r=JSON.stringify(r)}catch(e){console.log(e)}e[(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.vsprintf)("%s_readable",[o])]=a.getReadableValue();var s=a.getSelectCustomValue();"automator_custom_value"==r&&(e[(0,_Utilities_js__WEBPACK_IMPORTED_MODULE_1__.vsprintf)("%s_custom",[o])]=s)}else"repeater"==a.getAttributes().fieldType&&(n=!0,r=JSON.stringify(r));e[o]=r})),n||t||1!=Object.keys(e).length||(e=e[Object.keys(e)[0]]),e}}]),ItemOptions}();const __WEBPACK_DEFAULT_EXPORT__=ItemOptions},"./src/components/Markdown.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r}),n("jquery");var i=n("./src/components/Utilities.js");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a(this,e),this.content=t}var t,n;return t=e,(n=[{key:"getHTML",value:function(){var e=(0,i.escapeHTML)(this.content);return e=this.parseItalicsAndBold(e),this.parseAnchors(e)}},{key:"parseItalicsAndBold",value:function(e){return(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")}},{key:"parseAnchors",value:function(e){return e.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,(function(e,t,n,a,o,r,s,l){(0,i.isDefined)(l)||(l=""),e=t;var c=n,u=a.toLowerCase(),d=o,p=l;if(!d){if(u||(u=c.toLowerCase().replace(/ ?\n/g," ")),d="#"+u,!(e.search(/\(\s*\)$/m)>-1))return e;d=""}var m='<a href="'+(d=encodeURI(d,"*_",!1))+'" target="_blank"';return""!==p&&null!==p&&(p=p.replace(/"/g,"&quot;"),m+=' title="'+(p=encodeURI(p,"*_",!1))+'"'),m+">"+c+"</a>"}))}}])&&o(t.prototype,n),e}()},"./src/components/MetaboxFooter.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/ItemCreatorIntegrations.js");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n("./src/components/Triggers.js"),n("./src/components/Actions.js"),n("./src/components/MetaboxItems.js");const l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.shouldCreateMetaboxFooter()&&this.createFooter()}var t,n;return t=e,(n=[{key:"shouldCreateMetaboxFooter",value:function(){var e=!1;if("trigger"==this.itemType){var t=(0,o.itemsObject)("get",{filter:{itemType:"trigger"}});(0,o.isEmpty)(t)&&(0,o.isDefined)(UncannyAutomator.wp)&&UncannyAutomator.wp&&"anonymous"!=UncannyAutomator.recipe.type||(e=!0)}if("action"==this.itemType){var n=(0,o.itemsObject)("get",{filter:{itemType:"action"}});!(0,o.isEmpty)(n)&&(e=!0)}return e}},{key:"createFooter",value:function(){var e=this,t=a()("<div/>",{class:"metabox__footer"}),n=a()("<div/>",{class:"uap-btn uap-btn--secondary"});if(("action"==this.itemType||"trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type)&&t.append(n),"trigger"==this.itemType&&("user"==UncannyAutomator.recipe.type&&n.text(UncannyAutomator.i18n.trigger.addAnother),"anonymous"==UncannyAutomator.recipe.type)){var i=this.createAnonymousNotice();t.append(i)}"action"==this.itemType&&n.text(UncannyAutomator.i18n.action.addAnother),"trigger"!=this.itemType&&"action"!=this.itemType||n.on("click",(function(){new r.default(e.itemType)})),(0,o.getDOMElements)("metabox",{type:this.itemType}).append(t)}},{key:"createAnonymousNotice",value:function(){return a()('\n            <div class="description">\n                '.concat(UncannyAutomator.i18n.recipeType.anonymousOnlyOneTrigger,' <a href="').concat((0,o.addParametersToURL)("https://automatorplugin.com/knowledge-base/managing-triggers/",{utm_source:"uncanny_automator",utm_medium:"anonymous_recipe_one_trigger",utm_content:"learn_more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uo-icon uo-icon--external-link-alt"></span></a>\n            </div>\n        '))}}])&&s(t.prototype,n),e}()},"./src/components/MetaboxItems.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/ItemHeaderMenu.js"),s=n("./src/components/ItemHeaderIcon.js"),l=n("./src/components/ItemHeaderTag.js"),c=n("./src/components/ItemHeaderAsync.js"),u=n("./src/components/ItemHeaderSentence.js");function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const p=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a().each(n,(function(e,n){if(t==n.itemType){var a=i.createItem(e);(0,o.getDOMElements)("metabox",{type:t}).append(a)}}))}var t,n;return t=e,(n=[{key:"createItem",value:function(e){var t=UncannyAutomator.recipe.items[e],n=a()("<div/>",{class:"item","data-id":e});t.isMissing&&n.addClass("item--missing"),t.meta.async_mode&&n.addClass("item--async"),(0,o.isEmpty)(t.inlineCss)||(t.inlineCss=t.inlineCss.replace(/{{item_id}}/g,e),n.prepend(t.inlineCss));var i=this.createHeader(t.integrationCode,t.itemType,t.itemCode,e),r=this.createNotice(t);return n.append(i),n.append(r),n}},{key:"createHeader",value:function(e,t,n,i){var d=a()("<div/>"),p=a()("<div/>",{class:"item-title uap-clear"}),m=UncannyAutomator.recipe.items[i];if(m.isMissing&&(e=null),"action"==t&&(0,o.isDefined)(UncannyAutomator.wp)&&UncannyAutomator.wp){var f=new c.default(t,e,n,i);d.append(f)}var h=new r.default(t,e,n,i);d.append(h);var g=new s.default(e);d.append(g);var y=m.integrationName,v=new l.default(e,y);p.append(v);var _=new u.default(t,e,n,i);p.append(_),d.append(p);var b=a()("<div/>",{class:"item__content"});return d.append(b),d}},{key:"createNotice",value:function(e){var t;return e.isMissing&&(t=a()("<div/>",{class:"item-notice"})).text(UncannyAutomator.i18n.itemMissing),t}}])&&d(t.prototype,n),e}()},"./src/components/MetaboxNotice.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.noticeType=n,this.noticeMessage=i,this.create()}var t,n;return t=e,(n=[{key:"create",value:function(){var e=(0,o.getDOMElements)("metabox",{type:this.itemType}),t=this.createNotice();e.append(t)}},{key:"createNotice",value:function(){var e=a()("<div/>",{class:"metabox__notice"});return(0,o.isDefined)(this.noticeType)&&e.addClass((0,o.vsprintf)("metabox__notice--%s",[this.noticeType])),e.html(this.noticeMessage),e}}])&&r(t.prototype,n),e}()},"./src/components/Modal.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,e),this.elements={container:null,automatorContainer:null,modal:{container:null,box:{container:null,title:null,warning:null,buttons:{container:null,cancel:null,confirm:null}}}},this.elements.container=a()("body"),this.isVisible=!1,this.config=a().extend(!0,{fadeDuration:150,size:"medium",warningFirst:!1},n),this.content=a().extend({},{buttons:{cancel:UncannyAutomator.i18n.cancel}},t),this.create(),this}var t,n;return t=e,(n=[{key:"create",value:function(){var e,t,n=a()("<div/>",{class:"uap"}),i=a()("<div/>",{class:"modal"}),r=a()("<div/>",{class:"modal__box"});if((0,o.isDefined)(this.config.size)&&["small","medium","large","extra-large"].includes(this.config.size)&&i.addClass("modal--".concat(this.config.size)),(0,o.isDefined)(this.config.customClass)&&i.addClass("modal--".concat(this.config.customClass)),this.elements.automatorContainer=n,this.elements.modal.container=i,this.elements.modal.box.container=r,(0,o.isDefined)(this.content.title)){var s=a()("<div/>",{class:"modal__title"}).html(this.content.title);r.append(s),this.elements.modal.box.title=s}if((0,o.isDefined)(this.content.content)){e=a()("<div/>",{class:"modal__content"});try{e.append(this.content.content)}catch(t){e.html(this.content.content)}r.append(e),this.elements.modal.box.content=e}(0,o.isDefined)(this.content.warning)&&(t=a()("<div/>",{class:"modal__warning"}).html(this.content.warning),this.elements.modal.box.warning=t),(0,o.isDefined)(this.config.warningFirst)&&this.config.warningFirst?((0,o.isDefined)(this.content.warning)&&r.append(t),(0,o.isDefined)(this.content.content)&&r.append(e)):((0,o.isDefined)(this.content.content)&&r.append(e),(0,o.isDefined)(this.content.warning)&&r.append(t));var l=a()("<div/>",{class:"modal__buttons"}),c=a()("<button/>",{class:"uap-btn uap-btn--secondary"}).html(this.content.buttons.cancel);if(l.append(c),this.elements.modal.box.buttons.container=l,this.elements.modal.box.buttons.cancel=c,(0,o.isDefined)(this.content.buttons.confirm)){var u=a()("<button/>",{class:"uap-btn uap-btn--primary"}).html(this.content.buttons.confirm);l.append(u),this.elements.modal.box.buttons.confirm=u}r.append(l),i.append(r),n.append(i),this.elements.container.append(n),a()("html").addClass("automator-modal-open"),this.bind()}},{key:"setEvents",value:function(e){var t=this,n=function(){};this.events={afterSetEvents:(0,o.isDefined)(e.afterSetEvents)?e.afterSetEvents:n,afterShow:(0,o.isDefined)(e.afterShow)?e.afterShow:n,afterHide:(0,o.isDefined)(e.afterHide)?e.afterHide:n,onConfirm:(0,o.isDefined)(e.onConfirm)?e.onConfirm:n,onCancel:(0,o.isDefined)(e.onCancel)?e.onCancel:n},(0,o.isDefined)(e.onCancel)||(this.events.onCancel=function(){t.hide()}),this.events.afterSetEvents()}},{key:"destroy",value:function(){var e=this;this.unbind(),this.isVisible?this.hide((function(){e.elements.automatorContainer.remove()})):e.elements.automatorContainer.remove(),a()("html").removeClass("automator-modal-open")}},{key:"bind",value:function(){var e=this;(0,o.isDefined)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.on("click",(function(){e.events.onCancel()})),(0,o.isDefined)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.on("click",(function(){e.events.onConfirm()}))}},{key:"unbind",value:function(){this.elements.modal.box.buttons.cancel.unbind("click"),this.elements.modal.box.buttons.confirm.unbind("click")}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;e=(0,o.isDefined)(e)?e:this.events.afterShow,this.isVisible=!0,this.elements.modal.container.fadeIn(t.config.fadeDuration,e)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;e=(0,o.isDefined)(e)?e:this.events.afterHide,this.isVisible=!1,this.elements.modal.container.fadeOut(t.config.fadeDuration,e),a()("html").removeClass("automator-modal-open")}},{key:"getElements",value:function(){return this.elements}}])&&s(t.prototype,n),e}()},"./src/components/Publish.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/RecipeNotices.js"),s=n("./src/components/Field.js");function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={metabox:a()("#uo-automator-publish-metabox"),timesPerUser:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_completions_allowed"},timesPerRecipe:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_max_completions_allowed"},toggle:null},this.createMetabox()}var t,n;return t=e,(n=[{key:"createMetabox",value:function(){var e=a()("<div/>",{id:"uap-publish-metabox"}),t=a()("<div/>",{class:"metabox__content"}),n=a()("<div/>",{class:"metabox__footer"});if("anonymous"!=UncannyAutomator.recipe.type){var i=a()("<div/>",{class:"publish-row"}),l=a()("<div/>",{class:"publish-row__visible"}),c=a()("<span/>",{class:"publish-row__icon"}),u=a()("<i/>",{class:"uo-icon uo-icon--sync-alt"}),d=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerUser);UncannyAutomator.recipe.publish.timesPerUser=-1==UncannyAutomator.recipe.publish.timesPerUser?"":UncannyAutomator.recipe.publish.timesPerUser;var p=(0,o.isEmpty)(UncannyAutomator.recipe.publish.timesPerUser)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerUser,m=a()("<span/>",{class:"publish-row__value"}).text(p),f=a()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),h=a()("<div/>",{class:"publish-row__hidden"}),g=a()("<div/>",{class:"publish-row__settings"});this.elements.timesPerUser.editLink=f,this.elements.timesPerUser.hiddenBox=h;var y=new s.default("int",{currentValue:UncannyAutomator.recipe.publish.timesPerUser,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(e,t){var n={isValid:!1,message:""};return e>=1?n.isValid=!0:n.message=UncannyAutomator.i18n.publish.oneOrBigger,n}));this.timesField=y;var v=a()("<div/>",{class:"publish-row__buttons"}),_=a()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),b=a()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);this.elements.timesPerUser.saveButton=_,this.elements.timesPerUser.cancelButton=b,v.append(_),v.append(b),g.append(y.getFormElement()),g.append(v),h.append(g),c.append(u),l.append(c),l.append(d),l.append(m),l.append(f),i.append(l),i.append(h),t.append(i)}var k=this.timesPerRecipe();t.append(k);var w=a()("<div/>",{class:"publish-row"}),T=a()("<div/>",{class:"publish-row__visible"}),A=a()("<span/>",{class:"publish-row__icon"}),C=a()("<i/>",{class:"uo-icon uo-icon--utensils"}),D=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeType),U=a()("<span/>",{class:"publish-row__value"}),E=a()('\n\t\t\t\t<a href="'.concat((0,o.addParametersToURL)("https://automatorplugin.com/knowledge-base/creating-a-recipe/",{utm_source:"uncanny_automator",utm_medium:"publish_metabox",utm_content:"recipe_type_question_icon"}),'" class="publish-row__learn-more" target="_blank"><span class="uo-icon uo-icon--question-circle"></span></a>\n\t\t\t'));"user"==UncannyAutomator.recipe.type&&U.text(UncannyAutomator.i18n.recipeType.userRecipeName),"anonymous"==UncannyAutomator.recipe.type&&U.text(UncannyAutomator.i18n.recipeType.anonymousRecipeName),A.append(C),T.append(A),T.append(D),T.append(U),T.append(E),w.append(T),t.append(w);var x=a()("<div/>",{class:"publish-row"}),M=a()("<div/>",{class:"publish-row__visible"}),O=a()("<span/>",{class:"publish-row__icon"}),S=a()("<i/>",{class:"uo-icon uo-icon--calendar-alt"}),I=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.createdOn),j=a()("<span/>",{class:"publish-row__value"}).text(UncannyAutomator.recipe.publish.createdOn);O.append(S),M.append(O),M.append(I),M.append(j),x.append(M),t.append(x);var F=a()("<div/>",{class:"publish-row"}),L=a()("<div/>",{class:"publish-row__visible"}),R=a()("<a/>",{class:"publish-row__copy-to-draft button button-secondary",href:UncannyAutomator.recipe.publish.copyToDraft.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.publish.copyRecipe);L.append(R),F.append(L),t.append(F);var V=a()("<div/>",{class:"publish-footer__row uap-clear"}),P=a()("<div/>",{class:"publish-footer__left"}),N=a()("<a/>",{class:"publish-footer__move-to-draft",href:UncannyAutomator.recipe.publish.moveToTrash.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.proOnly.moveToTrash),H=a()("<div/>",{class:"publish-footer__right"}),B=new s.default("checkbox",{color:"gutenberg",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipe,off:UncannyAutomator.i18n.status.draftRecipe},currentValue:UncannyAutomator.recipe.isLive});UncannyAutomator.recipe.publish.statusToggle=B;var q=B.getFormElement();this.recipeStatusToggle=B,this.elements.toggle=q,P.append(N),H.append(q),V.append(P),V.append(H),n.append(V),e.append(t),e.append(n),this.elements.metabox.html(e),new r.default,this.bind(),this.validateStatus()}},{key:"timesPerRecipe",value:function(){var e=a()("<div/>",{class:"publish-row"}),t=a()("<div/>",{class:"publish-row__visible"}),n=a()("<span/>",{class:"publish-row__icon"}),i=a()("<i/>",{class:"uo-icon uo-icon--unlock-alt"}),r=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerRecipe);UncannyAutomator.recipe.publish.timesPerRecipe=-1==UncannyAutomator.recipe.publish.timesPerRecipe?"":UncannyAutomator.recipe.publish.timesPerRecipe;var l=(0,o.isEmpty)(UncannyAutomator.recipe.publish.timesPerRecipe)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerRecipe,c=a()("<span/>",{class:"publish-row__value"}).text(l),u=a()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),d=a()("<div/>",{class:"publish-row__hidden"}),p=a()("<div/>",{class:"publish-row__settings"});this.elements.timesPerRecipe.editLink=u,this.elements.timesPerRecipe.hiddenBox=d;var m=new s.default("int",{currentValue:UncannyAutomator.recipe.publish.timesPerRecipe,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(e,t){var n={isValid:!1,message:""};return e>=1?n.isValid=!0:n.message=UncannyAutomator.i18n.publish.oneOrBigger,n}));this.timesRecipeField=m;var f=a()("<div/>",{class:"publish-row__buttons"}),h=a()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),g=a()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return this.elements.timesPerRecipe.saveButton=h,this.elements.timesPerRecipe.cancelButton=g,f.append(h),f.append(g),p.append(m.getFormElement()),p.append(f),d.append(p),n.append(i),t.append(n),t.append(r),t.append(c),t.append(u),e.append(t),e.append(d),e}},{key:"validateStatus",value:function(){UncannyAutomator.recipe.isLive&&!UncannyAutomator.recipe.isValid&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}},{key:"validateTimesPerFields",value:function(t,n,i){t.editLink.on("click",(function(){t.hiddenBox.slideToggle(300)})),t.cancelButton.on("click",(function(){t.hiddenBox.slideToggle(300,(function(){new e}))})),t.saveButton.on("click",(function(){if(i.validate().isValid){t.saveButton.addClass("uap-btn--loading uap-btn--disabled");var a=i.getValue();(0,o.isEmpty)(a)&&(a=-1),(0,o.restCall)(t.endPoint,{post_ID:UncannyAutomator.recipe.id,recipe_completions_allowed:a},(function(){"recipe_completions_allowed"==t.endPoint?UncannyAutomator.recipe.publish.timesPerUser=a:UncannyAutomator.recipe.publish.timesPerRecipe=a,t.hiddenBox.slideToggle(300,(function(){new e}))}),(function(){console.log("‼️ ERROR-TODO. Couldn't save times per user"),i.setValue(n),t.saveButton.removeClass("uap-btn--loading uap-btn--disabled")}))}})),i.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))}},{key:"bind",value:function(){var t=this;"anonymous"!=UncannyAutomator.recipe.type&&this.validateTimesPerFields(this.elements.timesPerUser,UncannyAutomator.recipe.publish.timesPerUser,this.timesField),this.validateTimesPerFields(this.elements.timesPerRecipe,UncannyAutomator.recipe.publish.timesPerRecipe,this.timesRecipeField),this.elements.toggle.on("automator:field:change",(function(){t.recipeStatusToggle.startLoadingAnimation();var n=t.recipeStatusToggle.getValue(),i=n?"publish":"draft";(0,o.itemsObject)("get",{filter:{itemType:"trigger"}}),!n||n&&UncannyAutomator.recipe.isValid?(0,o.restCall)("change_post_status",{post_ID:UncannyAutomator.recipe.id,post_status:i},(function(){UncannyAutomator.recipe.isLive=n,new e}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the recipe status"),setTimeout((function(){t.recipeStatusToggle.stopLoadingAnimation(),t.recipeStatusToggle.setValue(!1,!1)}),1e3)})):(UncannyAutomator.recipe.errorMode=!0,new r.default,setTimeout((function(){t.recipeStatusToggle.stopLoadingAnimation(),t.recipeStatusToggle.setValue(!1,!1)}),1e3))}))}}])&&l(t.prototype,n),e}()},"./src/components/RecipeNotices.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={container:a()("#uo-uap-notices")},0==this.elements.container.length&&(this.createContainer(),this.elements.container=a()("#uo-uap-notices")),this.emptyContainer(),this.createWarning(),UncannyAutomator.recipe.errorMode&&this.createError()}var t,n;return t=e,(n=[{key:"emptyContainer",value:function(){this.elements.container.empty()}},{key:"createContainer",value:function(){var e=a()("<div/>",{id:"uo-uap-notices",class:"uap"});a()("#uap-publish-metabox").prepend(e)}},{key:"createError",value:function(){if(!(0,o.isEmpty)(UncannyAutomator.recipe.message.error)){var e=a()("<div/>",{class:"uo-notice uo-notice--error"}).text(UncannyAutomator.recipe.message.error);this.elements.container.append(e)}}},{key:"createWarning",value:function(){if(!(0,o.isEmpty)(UncannyAutomator.recipe.message.warning)){var e=a()("<div/>",{class:"uo-notice uo-notice--warning"}).text(UncannyAutomator.recipe.message.warning);this.elements.container.append(e)}}}])&&r(t.prototype,n),e}()},"./src/components/RecipeTitle.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={container:a()("#titlediv"),input:a()("#titlediv #title"),status:{}},this.publishedTitle=this.elements.input.val(),this.createStatus(),this.bindChanges(),this.notSavedAlert()}var t,n;return t=e,(n=[{key:"createStatus",value:function(){var e=a()("<div/>",{class:"uap-title-status"}),t=a()("<div/>",{class:"uap"}),n=a()("<div/>",{class:"uo-status uo-status--saving"}),i=a()("<span/>",{class:"uo-status-icon uo-icon uo-icon--loading uo-icon--rotate"}),o=a()("<span/>",{class:"uo-status__text"}).text(UncannyAutomator.i18n.title.saving);n.append(i),n.append(o),this.elements.status.saving=n;var r=a()("<div/>",{class:"uo-status uo-status--saved"}),s=a()("<span/>",{class:"uo-status-icon uo-icon uo-icon--check"}),l=a()("<span/>",{class:"uo-status__text"}).text(UncannyAutomator.i18n.title.saved);r.append(s),r.append(l),this.elements.status.saved=r,t.append(n),t.append(r),e.append(t),this.elements.container.append(e)}},{key:"setStatusSaving",value:function(){this.elements.status.saving.stop().fadeIn(150)}},{key:"setStatusSaved",value:function(){var e=this;this.elements.status.saving.stop().fadeOut(150),this.elements.status.saved.stop().fadeIn(150,(function(){setTimeout((function(){e.elements.status.saved.fadeOut(150)}),3e3)}))}},{key:"revertChanges",value:function(){this.elements.input.val(this.publishedTitle),this.elements.status.saving.stop().fadeOut(150)}},{key:"bindChanges",value:function(){var e,t=this;this.elements.input.on("input",(function(){clearTimeout(e),e=setTimeout((function(){t.setStatusSaving(),t.updateTitle()}),1500)}))}},{key:"getTitle",value:function(){return this.elements.input.val()}},{key:"updateTitle",value:function(){var e=this;(0,o.restCall)("change_post_title",{post_ID:UncannyAutomator.recipe.id,post_title:this.getTitle()},(function(){e.setStatusSaved(),e.publishedTitle=e.getTitle()}),(function(){console.log("‼️ ERROR-TODO. Couldn't save the title"),e.revertChanges()}))}},{key:"notSavedAlert",value:function(){a()(document).ready((function(){a()(window).off("beforeunload.edit-post")}))}}])&&r(t.prototype,n),e}()},"./src/components/RecipeTypeSelector.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doWhenReady=t,this.render(),this.getElements(),this.listenSubmission()}var t,n;return t=e,(n=[{key:"render",value:function(){var e=a()('\n\t\t\t<div class="uap">\n\t\t\t\t<div id="uap-type-selector" class="uap-type-selector">\n\t\t\t\t\t<div class="uap-type-selector__box">\n\t\t\t\t\t\t<form id="uap-type-selector-form" class="uap-type-selector__form">\n\t\t\t\t\t\t\t<div class="uap-type-selector__title">\n\t\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.title,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__content">\n\t\t\t\t\t\t\t\t<div class="uap-type-selector__types">\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--user">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="user" id="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--user"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--anonymous">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="anonymous" id="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--anonymous"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.anonymousRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.anonymousRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__warning">\n\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.cantChangeLaterNotice,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__buttons">\n\t\t\t\t\t\t\t\t<button type="submit" id="uap-type-selector-submit-button" class="uap-btn uap-btn--primary">').concat(UncannyAutomator.i18n.confirm,"</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"));a()("body").append(e)}},{key:"getElements",value:function(){this.$elements={container:a()("#uap-type-selector"),form:a()("#uap-type-selector-form"),warning:a()("#uap-type-selector .uap-type-selector__warning"),submitButton:a()("#uap-type-selector-submit-button")}}},{key:"listenSubmission",value:function(){var e=this;this.$elements.form.on("submit",(function(t){t.preventDefault();var n=e.$elements.form.find('input[name="uap-recipe-type"]:checked').val();(0,o.isEmpty)(n)?e.showError(UncannyAutomator.i18n.recipeType.errorDidNotSelectType):["user","anonymous"].includes(n)?e.saveRecipeType(n):e.showError(UncannyAutomator.i18n.recipeType.errorTryingToSaveOtherValue)}))}},{key:"saveRecipeType",value:function(e){var t=this,n={post_ID:UncannyAutomator.recipe.id,recipe_type:e};this.$elements.submitButton.addClass("uap-btn--loading uap-btn--disabled"),(0,o.restCall)("change_post_recipe_type",n,(function(n){if(n.success){t.$elements.container.remove(),UncannyAutomator.recipe.type=e;var i=a()("#uo-recipe-triggers-meta-box-ui h2.hndle.ui-sortable-handle"),o=UncannyAutomator.i18n.trigger.userTriggers;"anonymous"==UncannyAutomator.recipe.type&&(o=UncannyAutomator.i18n.trigger.anonymousTrigger),i.text(o),t.doWhenReady(e)}else t.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}),(function(e){console.log("‼️ ERROR-TODO. Couldn't save the recipe type"),t.$elements.submitButton.removeClass("uap-btn--loading uap-btn--disabled"),t.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}))}},{key:"showError",value:function(e){var t=a()('\n\t\t\t<div class="uap-type-selector__error">\n\t\t\t\t'.concat(e,"\n\t\t\t</div>\n\t\t")),n=this.$elements.container.find(".uap-type-selector__error");n.length>0&&n.remove(),t.insertAfter(this.$elements.warning),setTimeout((function(){t.addClass("uap-type-selector__error--shake")}),10)}}])&&r(t.prototype,n),e}()},"./src/components/SendFeedback.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.build()}var t,n;return t=e,(n=[{key:"build",value:function(){var e,t,n=a()("<div/>",{class:"uap-report-bug"});(0,o.isDefined)(UncannyAutomator.wp)&&UncannyAutomator.wp?(e=(0,o.vsprintf)("Uncanny Automator %s %s",["Pro",UncannyAutomator.version]),t=(0,o.vsprintf)("uncanny_automator_%s",["pro"])):(e=(0,o.vsprintf)("Uncanny Automator %s",[UncannyAutomator.version]),t="uncanny_automator");var i=a()("<a/>",{class:"uap-report-bug__btn","uap-tooltip":UncannyAutomator.i18n.sendFeedback.title,"uap-flow":"left",href:(0,o.vsprintf)("https://automatorplugin.com/feedback/?version=%s&utm_source=%s&utm_medium=%s&utm_content=%s",[e,t,"send_feedback","bulb_icon"]),target:"_blank"}),r=a()("<span/>",{class:"uap-report-bug__icon"});i.append(r),i.appendTo(n),a()("body").append(n)}},{key:"bind",value:function(e,t,n,i){e.on("click",(function(){t.is(":checked")&&(localStorage.uapSendFeedbackWelcome="hide"),n.fadeOut(150),i.removeClass("uap-report-bug--open")}))}},{key:"showAgain",value:function(){return!1}}])&&r(t.prototype,n),e}()},"./src/components/Taxonomies.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(){l(this,e),this.getElements(),1==this.$elements.allCategories.length&&this.listenCheckboxes()}return s(e,[{key:"getElements",value:function(){this.$elements={container:a()("#recipe_categorydiv"),allCategories:a()("#recipe_categorychecklist")}}},{key:"listenCheckboxes",value:function(){var e=this;this.$elements.container.on("change",'input[type="checkbox"][name="tax_input[recipe_category][]"], .popular-category input[type="checkbox"]',(function(t){var n=a()(t.currentTarget);e.saveCategory(n)})),new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){var n=a()(t).find('input[type="checkbox"][name="tax_input[recipe_category][]"]');e.saveCategory(n)}))}))})).observe(this.$elements.allCategories[0],{childList:!0})}},{key:"getCheckboxData",value:function(e){return{id:e.val(),isChecked:e.is(":checked")}}},{key:"saveCategory",value:function(e){var t=this,n=this.getCheckboxData(e);this.setStatus("loading",!0,e),(0,o.restCall)("set_recipe_terms",{term_id:"recipe_category",recipe_id:UncannyAutomator.recipe.id,category_id:n.id,set_category:n.isChecked},(function(n){n.success?(t.setStatus("success",!0,e),setTimeout((function(){t.setStatus("success",!1,e)}),2e3)):(console.log("‼️ ERROR-TODO. Couldn't change the status of the recipe category"),t.revertCheckboxValue(e),t.setStatus("error",!0,e),setTimeout((function(){t.setStatus("error",!1,e)}))),t.setStatus("loading",!1,e)}),(function(n){t.revertCheckboxValue(e),t.setStatus("loading",!1,e),t.setStatus("error",!0,e),setTimeout((function(){t.setStatus("error",!1,e)}))}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"revertCheckboxValue",value:function(e){e.prop("checked",!e.is(":checked"))}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=n.closest(".selectit");"loading"==e?t?(i.addClass("uap-taxonomy-loading"),n.prop("disabled",!0)):(i.removeClass("uap-taxonomy-loading"),n.prop("disabled",!1)):"success"==e?t?i.addClass("uap-taxonomy-success"):i.removeClass("uap-taxonomy-success"):"error"==e&&(t?i.addClass("uap-taxonomy-error"):i.removeClass("uap-taxonomy-error"))}}]),e}(),u=function(){function e(){l(this,e),this.getElements(),1==this.$elements.tagsTextarea.length&&this.listenModificationsToTags()}return s(e,[{key:"getElements",value:function(){this.$elements={container:a()("#tagsdiv-recipe_tag"),tagsTextarea:a()("textarea#tax-input-recipe_tag"),tagsList:a()("#tagsdiv-recipe_tag .tagchecklist")}}},{key:"listenModificationsToTags",value:function(){var e=this;new MutationObserver((function(t){e.saveTags()})).observe(this.$elements.tagsList[0],{childList:!0})}},{key:"saveTags",value:function(){var e=this,t=this.getTags();this.setStatus("loading",!0),(0,o.restCall)("set_recipe_terms",{term_id:"recipe_tag",recipe_id:UncannyAutomator.recipe.id,tags:t},(function(t){t.success&&(e.setStatus("success",!0),setTimeout((function(){e.setStatus("success",!1)}),2e3)),e.setStatus("loading",!1)}),(function(e){location.reload()}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"loading"==e?t?this.$elements.container.addClass("uap-tags-loading"):this.$elements.container.removeClass("uap-tags-loading"):"success"==e?t?this.$elements.container.addClass("uap-tags-success"):this.$elements.container.removeClass("uap-tags-success"):"error"==e&&(t?this.$elements.container.addClass("uap-tags-error"):this.$elements.container.removeClass("uap-tags-error"))}},{key:"getTags",value:function(){var e=this.$elements.tagsTextarea.val();return{asArray:e.split(","),commaSeparated:e}}}]),e}();const d=function e(){l(this,e),new c,new u}},"./src/components/Triggers.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s}),n("jquery");var i=n("./src/components/Utilities.js"),a=n("./src/components/ItemCreatorIntegrations.js"),o=(n("./src/components/MetaboxNotice.js"),n("./src/components/MetaboxItems.js")),r=n("./src/components/MetaboxFooter.js");const s=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,i.getDOMElements)("metabox",{type:"trigger"}).empty();var t=(0,i.itemsObject)("get",{filter:{itemType:"trigger"}});(0,i.isEmpty)(t)?new a.default("trigger"):new o.default("trigger",t),new r.default("trigger")}},"./src/components/UserSelector.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/Field.js"),s=n("./src/components/Actions.js"),l=n("./src/components/RecipeNotices.js");function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),UncannyAutomator.recipe.userSelector.step=(0,o.userSelectorObject)("get-step"),this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){var e="";switch(UncannyAutomator.recipe.userSelector.step){case"select-source":UncannyAutomator.recipe.userSelector.isValid=!1,(0,o.recipeObject)("validate"),e=this.getSelectSourceNodes();break;case"set-options":e=this.getOptionsNodes();break;case"show-sentence":(0,o.recipeObject)("validate"),UncannyAutomator.recipe.errorMode=!1,new l.default,e=this.getSentenceNodes()}var t=(0,o.getDOMElements)("metabox",{type:"action"});console.log("%cRender User Selector","background: red; color: #fff; padding: 2px 10px;"),t.prepend(e)}},{key:"getSelectSourceNodes",value:function(){var e=a()('\n\t\t\t<div class="user-selector">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-integrations">\n\t\t\t\t\t\t\t<div class="item-integration user-selector-option user-selector-option--existing-user" data-source="existingUser">\n\t\t\t\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.userType.existing,'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-integration user-selector-option user-selector-option--new-user" data-source="newUser">\n\t\t\t\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.new,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t"));return e.find(".item").prepend(this.getHeaderNodes()),e.find(".user-selector-option").on("click",(function(e){var t=a()(e.currentTarget).data("source");(0,o.userSelectorObject)("set-source",{source:t}),UncannyAutomator.recipe.userSelector.step="set-options",new s.default})),e}},{key:"getOptionsNodes",value:function(){var e=a()('\n\t\t\t<div class="user-selector">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-options"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t');return e.find(".item").prepend(this.getHeaderNodes()),e.find(".item-options").append(this.getOptionsFields()),e}},{key:"getOptionsFields",value:function(){var e=a()("<div></div>"),t=a()('<div class="item-options__group"></div>'),n=[];(0,o.userSelectorObject)("update-fields",{source:"existingUser",fields:{}}),(0,o.userSelectorObject)("update-fields",{source:"newUser",fields:{}});var i=UncannyAutomator.recipe.userSelector.resources.roles;switch(delete i.administrator,UncannyAutomator.recipe.userSelector.source){case"existingUser":var l=a()('<div class="user-selector__field-group user-selector__field-group--two-columns"></div>'),c=new r.default("select",{itemType:"user-selector",optionCode:"uniqueField",label:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.uniqueField,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionEmail},{value:"id",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionId},{value:"username",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionUsername}]});n.push(c);var u=new r.default("text",{itemType:"user-selector",optionCode:"uniqueFieldValue",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.uniqueFieldValue,label:UncannyAutomator.i18n.userSelector.existingUser.valueFieldLabel,placeholder:UncannyAutomator.i18n.userSelector.existingUser.valueFieldPlaceholder,isRequired:!0,supportsTokens:!0});n.push(u);var d=c.getFormElement();l.append(d);var p=u.getFormElement();l.append(p),t.append(l);var m=new r.default("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-existing-user-fallback",label:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.fallback,options:[{value:"create-new-user",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionCreateUser},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionDoNothing}]});n.push(m);var f=m.getFormElement();if(t.append(f),d.on("automator:field:change",(function(){(0,o.userSelectorObject)("update-fields",{source:"existingUser",fields:{uniqueField:c.getValue()}})})),p.on("automator:field:change",(function(){(0,o.userSelectorObject)("update-fields",{source:"existingUser",fields:{uniqueFieldValue:u.getValue()}})})),f.on("automator:field:change",(function(){(0,o.userSelectorObject)("update-fields",{source:"existingUser",fields:{fallback:m.getValue()}}),new s.default})),"do-nothing"==UncannyAutomator.recipe.userSelector.fields.existingUser.fallback){var h=a()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.existingUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));t.append(h)}else if("create-new-user"==UncannyAutomator.recipe.userSelector.fields.existingUser.fallback){var g=a()("<div/>",{class:"item-options"});[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.fields.existingUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,o.isEmpty)(UncannyAutomator.recipe.userSelector.fields.existingUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.fields.existingUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(i).map((function(e,t){return{value:e,text:i[e]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,o.isEmpty)(UncannyAutomator.recipe.userSelector.fields.existingUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.fields.existingUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(e){var t=new r.default(e.fieldType,e),i=t.getFormElement();g.append(i),n.push(t)})),t.append(g)}break;case"newUser":[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,o.isEmpty)(UncannyAutomator.recipe.userSelector.fields.newUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.fields.newUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(i).map((function(e,t){return{value:e,text:i[e]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,o.isEmpty)(UncannyAutomator.recipe.userSelector.fields.newUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.fields.newUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(e){var i=new r.default(e.fieldType,e),a=i.getFormElement();t.append(a),n.push(i)}));var y=new r.default("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-new-user-fallback",label:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.fallback,options:[{value:"select-existing-user",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionExisting},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionDoNothing}]});n.push(y);var v=y.getFormElement();if(t.append(v),v.on("automator:field:change",(function(){var e={};n.forEach((function(t){e[t.getAttributes().optionCode]=t.getValue()})),(0,o.userSelectorObject)("update-fields",{source:"newUser",fields:e}),new s.default})),"do-nothing"==UncannyAutomator.recipe.userSelector.fields.newUser.fallback){var _=a()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.newUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));t.append(_)}else if("select-existing-user"==UncannyAutomator.recipe.userSelector.fields.newUser.fallback){var b=a()("<div/>",{class:"item-options"}),k=new r.default("select",{itemType:"user-selector",optionCode:"prioritizedField",label:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.fields.newUser.prioritizedField,defaultValue:"email",description:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldDescription,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.newUser.email},{value:"username",text:UncannyAutomator.i18n.userSelector.newUser.username}]});n.push(k);var w=k.getFormElement();b.append(w),t.append(b)}}e.append(t);var T=a()('<div class="item-options__buttons"></div>'),A=a()('<div class="uap-btn uap-btn--primary">'.concat(UncannyAutomator.i18n.save,"</div>")),C=a()('<div class="uap-btn uap-btn--secondary">'.concat(UncannyAutomator.i18n.cancel,"</div>"));return A.on("click",(function(){var e=!0,t={};n.forEach((function(n){var i=n.validate().isValid;e=e&&i,i&&(t[n.getAttributes().optionCode]=n.getValue())})),(0,o.userSelectorObject)("update-fields",{source:UncannyAutomator.recipe.userSelector.source,fields:t}),e&&(A.addClass("uap-btn--primary uap-btn--loading uap-btn--disabled"),(0,o.restCall)("user-selector",{recipeId:UncannyAutomator.recipe.id,source:UncannyAutomator.recipe.userSelector.source,fields:UncannyAutomator.recipe.userSelector.fields[UncannyAutomator.recipe.userSelector.source]},(function(e){UncannyAutomator.recipe.userSelector.isValid=!0,(0,o.userSelectorObject)("set-step",{step:"show-sentence"}),new s.default}),(function(e){})))})),C.on("click",(function(){(0,o.userSelectorObject)("set-step",{step:"select-source"}),new s.default})),T.append(A),T.append(C),e.append(T),e}},{key:"getSentenceNodes",value:function(){var e=a()('\n\t\t\t<div class="user-selector user-selector--summary">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-options">\n\t\t\t\t\t\t\t<div class="user-selector-summary"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t');e.find(".item").prepend(this.getHeaderNodes());var t=e.find(".user-selector-summary"),n=a()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uo-icon uo-icon--atom"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),i=a()('\n\t\t\t<div class="user-selector-summary-row__token"></div>\n\t\t');n.find(".user-selector-summary-row__content").append(i),"existingUser"==UncannyAutomator.recipe.userSelector.source?i.text(UncannyAutomator.i18n.userSelector.userType.existing):"newUser"==UncannyAutomator.recipe.userSelector.source&&i.text(UncannyAutomator.i18n.userSelector.userType.new),i.on("click",(function(){(0,o.userSelectorObject)("set-step",{step:"select-source"}),new s.default})),t.append(n);var r,l=a()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uo-icon uo-icon--fingerprint"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t');"existingUser"==UncannyAutomator.recipe.userSelector.source?r=a()("\n\t\t\t\t<div>\n\t\t\t\t".concat((0,o.vsprintf)(UncannyAutomator.i18n.userSelector.summary.matches,['<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.i18n.userSelector.summary[UncannyAutomator.recipe.userSelector.fields.existingUser.uniqueField],"</div>"),'<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.recipe.userSelector.fields.existingUser.uniqueFieldValue,"</div>")]),"\n\t\t\t\t</div>")):"newUser"==UncannyAutomator.recipe.userSelector.source&&(r=a()("\n\t\t\t\t<div>\n\t\t\t\t".concat((0,o.vsprintf)(UncannyAutomator.i18n.userSelector.summary.withEmail,['<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.recipe.userSelector.fields.newUser.email,"</div>")]),"\n\t\t\t\t</div>\n\t\t\t\t"))),l.find(".user-selector-summary-row__content").append(r),r.find(".user-selector-summary-row__token").on("click",(function(){(0,o.userSelectorObject)("set-step",{step:"set-options"}),new s.default})),t.append(l);var c=a()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uo-icon uo-icon--directions"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),u="";"existingUser"==UncannyAutomator.recipe.userSelector.source?"create-new-user"==UncannyAutomator.recipe.userSelector.fields.existingUser.fallback?u=UncannyAutomator.i18n.userSelector.summary.createNewUser:"do-nothing"==UncannyAutomator.recipe.userSelector.fields.existingUser.fallback&&(u=UncannyAutomator.i18n.userSelector.summary.doNothing):"newUser"==UncannyAutomator.recipe.userSelector.source&&("select-existing-user"==UncannyAutomator.recipe.userSelector.fields.newUser.fallback?u=UncannyAutomator.i18n.userSelector.summary.selectExistingUser:"do-nothing"==UncannyAutomator.recipe.userSelector.fields.newUser.fallback&&(u=UncannyAutomator.i18n.userSelector.summary.doNothing));var d=a()("\n\t\t\t<div>\n\t\t\t".concat((0,o.vsprintf)(UncannyAutomator.i18n.userSelector.summary.otherwise,['<div class="user-selector-summary-row__token">'.concat(u,"</div>")]),"\n\t\t\t</div>"));return c.find(".user-selector-summary-row__content").append(d),c.find(".user-selector-summary-row__token").on("click",(function(){(0,o.userSelectorObject)("set-step",{step:"set-options"}),new s.default})),t.append(c),e}},{key:"getHeaderNodes",value:function(){var e;switch(UncannyAutomator.recipe.userSelector.step){case"select-source":case"show-sentence":e=UncannyAutomator.i18n.userSelector.sentenceTitle;break;case"set-options":e=UncannyAutomator.i18n.userSelector.setOptions}var t=a()('\n\t\t\t<div>\n\t\t\t\t<div class="item-actions">\n\t\t\t\t\t<div class="item-actions__btn">\n\t\t\t\t\t\t<i class="uo-icon uo-icon--ellipsis-h-alt"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-actions__dropdown">\n\t\t\t\t\t\t<ul class="item-actions-dropdown__ul">\n\t\t\t\t\t\t\t<a href="#" target="_blank" class="item-actions-dropdown__action">\n\t\t\t\t\t\t\t\t<span>'.concat(UncannyAutomator.i18n.support,'</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-icon"></div>\n\t\t\t\t<div class="item-title uap-clear">\n\t\t\t\t\t<div class="item-title__describe">\n\t\t\t\t\t\t<div class="item-title__non-editable">\n\t\t\t\t\t\t\t').concat(e,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"));return t.find(".item-actions__btn").on("click",(function(){t.find(".item-actions").toggleClass("item-actions--open")})),t}}])&&c(t.prototype,n),e}()},"./src/components/Utilities.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{createDataOnLoad:()=>f,recipeObject:()=>h,itemsObject:()=>g,groupItemsByIntegration:()=>y,sortArrayOfObjectsAlphabetically:()=>v,getItemsByIntegration:()=>_,filterDeprecatedItems:()=>b,userSelectorObject:()=>k,filterAutomatorItemsByRecipeType:()=>w,restCall:()=>T,AJAXRequest:()=>A,getCurrentFieldsValues:()=>C,getField:()=>D,getGlobalItem:()=>U,getDOMElements:()=>E,getFieldTypes:()=>x,parseStringWithTokens:()=>M,isDefined:()=>O,isEmpty:()=>S,compareStrings:()=>I,inArray:()=>j,arrayDifference:()=>F,vsprintf:()=>L,isString:()=>R,isObject:()=>V,removeSpaces:()=>P,replaceCurlyBraces:()=>N,consoleLogLabel:()=>H,consoleLogResult:()=>B,escapeHTML:()=>q,abbreviateText:()=>W,getUniqueId:()=>$,addParametersToURL:()=>K,decodeEntities:()=>Y,throttle:()=>G,debounce:()=>z,copyToClipboard:()=>J,handleFatalError:()=>X,filterMetaValue:()=>Z,filterMeta:()=>Q});var i=n("jquery"),a=n.n(i),o=(n("./src/components/Validation.js"),n("./src/components/RecipeTypeSelector.js")),r=n("./src/components/Field.js"),s=n("./src/components/FieldsGroup.js"),l=n("./src/components/FieldsRepeater.js"),c=n("./src/components/Modal.js"),u=n("./src/components/tokens/tokens.js");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,a,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";H("Start creating the main object"),e=S(e)?function(){}:e;var t=function(){w(),y(),h("create",{allRecipes:UncannyAutomator.recipes_object}),delete UncannyAutomator.triggers,delete UncannyAutomator.actions,H("Ended creating the main object"),e()};O(UncannyAutomator.wp)&&UncannyAutomator.wp?S(UncannyAutomator.recipe.type)?new o.default((function(){t()})):t():(UncannyAutomator.recipe.type="user",t())}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i=["create","validate"];if(O(e)&&j(e,i))switch(e){case"create":var o=["allRecipes"];if(j(o,Object.keys(t))){var c,u=t.allRecipes;a().each(u,(function(e,t){t.ID==UncannyAutomator.recipe.id&&(c=t)})),a().each(c.triggers,(function(e,t){return t.itemType="trigger"})),a().each(c.actions,(function(e,t){return t.itemType="action"})),a().each(c.closures,(function(e,t){return t.itemType="closure"}));var d=[].concat.apply([],[c.triggers,c.actions,c.closures]);g("reset");var p="anonymous"==UncannyAutomator.recipe.type;if(a().each(d,(function(e,t){var n,i=U(t.meta.integration,t.itemType,t.meta.code),o=t.meta.code;if(O(i)){var c={};O(i.options)&&a().each(i.options,(function(e,t){c[t.option_code]=[t]})),O(i.options_group)&&a().extend(!0,c,i.options_group);var u={};a().each(c,(function(e,n){var o=[],c=n.length>1;a().each(n,(function(n,a){var u,d,p=function(n){var a={isGroup:c,itemId:t.ID,itemType:t.itemType,isRequired:!!O(n.required)&&n.required,isReadOnly:!!O(n.read_only)&&n.read_only,supportsTinyMCE:!!O(n.supports_tinymce)&&n.supports_tinymce,supportsCopyToClipboard:!!O(n.copy_to_clipboard)&&n.copy_to_clipboard,isAjax:!!O(n.is_ajax)&&n.is_ajax,groupId:e,optionCode:n.option_code,fieldType:n.input_type,label:n.label,description:n.description,placeholder:n.placeholder,isHidden:!!O(n.is_hidden)&&n.is_hidden,tokenName:O(n.token_name)?n.token_name:n.label,defaultValue:n.default_value,currentValue:O(t.meta[n.option_code])?t.meta[n.option_code]:n.default_value,customFieldTokens:!!O(n.relevant_tokens)&&n.relevant_tokens,relevant_tokens:!!O(n.relevant_tokens)&&n.relevant_tokens,maxLength:O(n.max_length)?n.max_length:null};return"date"==a.fieldType&&(a.dateFormat=O(n.date_format)?n.date_format:"Y-m-d",a.dateAltFormat=O(n.date_alt_format)?n.date_alt_format:UncannyAutomator.format.date,a.supportsRange=!!O(n.supports_range)&&n.supports_range,O(n.min_date)&&(a.minDate=n.min_date),O(n.max_date)&&(a.maxDate=n.max_date)),"time"==a.fieldType&&(a.timeFormat=O(n.time_format)?n.time_format:"H:i K",a.timeAltFormat=O(n.time_alt_format)?n.time_alt_format:"H:i K",O(n.min_time)&&(a.minTime=n.min_time),O(n.max_date)&&(a.maxTime=n.max_time)),["text","textarea","int","float","email","url","select","date","time"].includes(a.fieldType)&&["action","closure"].includes(a.itemType)&&!a.isReadOnly?a.supportsTokens=!O(n.supports_tokens)||n.supports_tokens:a.supportsTokens=!1,"select"==a.fieldType&&(a.supportsCustomValue=O(n.supports_custom_value)?n.supports_custom_value:!!["action","closure"].includes(a.itemType),a.supportsCustomValue&&(a.customValue=O(t.meta["".concat(a.optionCode,"_custom")])?t.meta["".concat(a.optionCode,"_custom")]:""),O(n.custom_value_description)&&(a.customValueDescription=n.custom_value_description),O(n.supports_multiple_values)&&(a.supportsMultipleValues=n.supports_multiple_values)),a.isAjax&&(a.targetField=O(n.fill_values_in)?n.fill_values_in:"",a.endpoint=O(n.endpoint)?n.endpoint:"",a.integrationId=i.integration,S(a.targetField)&&(a.targetField=n.option_code)),["select","radio"].includes(a.fieldType)&&(a.options=O(n.options)?n.options:[]),a};if("group"==a.input_type)u={groupId:e,optionCode:a.option_code,fieldType:a.input_type,isGroup:c,itemId:t.ID,itemType:t.itemType,label:a.label,description:a.description,tokenName:O(a.token_name)?a.token_name:a.label,isRequired:!!O(a.required)&&a.required,fields:a.fields.map((function(e){return p(e)}))},d=new s.default(u);else if("repeater"==a.input_type){try{t.meta[a.option_code]=JSON.parse(t.meta[a.option_code])}catch(e){}u={groupId:e,optionCode:a.option_code,fieldType:a.input_type,isGroup:c,itemId:t.ID,itemType:t.itemType,label:a.label,description:a.description,tokenName:O(a.token_name)?a.token_name:a.label,defaultValue:a.default_value,currentValue:O(t.meta[a.option_code])?t.meta[a.option_code]:a.default_value,isRequired:!!O(a.required)&&a.required,hideActions:!!O(a.hide_actions)&&a.hide_actions,fields:a.fields.map((function(e){return p(e)}))},O(a.add_row_button)&&(u.addRowButtonLabel=a.add_row_button),O(a.remove_row_button)&&(u.removeRowButtonLabel=a.remove_row_button),d=new l.default(u)}else u=p(a),d=new r.default(u.fieldType,u,!1);o.push(d)}));var d=[];O(i.buttons)&&a().each(i.buttons,(function(t,n){n.show_in==e&&d.push(n)})),u[e]={fields:o,isValid:!1,buttons:d}})),n={id:t.ID,itemType:t.itemType,itemCode:o,integrationCode:i.integration,isLive:"publish"==t.post_status,options:u,meta:t.meta,isMissing:!1,tokens:O(t.tokens)?t.tokens:[],inlineCss:O(i.inline_css)?i.inline_css:"",filterTokens:O(i.filter_tokens)?i.filter_tokens:""},O(i.support)&&(n.support=i.support);var d={};a().each(u,(function(e,t){a().each(t.fields,(function(e,t){d[t.getAttributes().optionCode]=t}))})),a().each(d,(function(e,t){var i=t.getAttributes();O(n.meta[i.optionCode])&&!S(n.meta[i.optionCode])||S(i.currentValue)||(n.meta[i.optionCode]=i.currentValue)})),p&&(n.canLogNewUserIn=!O(i.can_log_in_new_user)||i.can_log_in_new_user)}else n={id:t.ID,itemType:t.itemType,itemCode:t.meta.code,integrationCode:t.meta.integration,integrationName:t.meta.integration_name,sentence:t.meta.sentence,isLive:"publish"==t.post_status,tokens:[],options:{},meta:t.meta,isMissing:!0},p&&(n.canLogNewUserIn=!O(t.meta.can_log_in_new_user)||"true"==t.meta.can_log_in_new_user);g("add",n)})),p){UncannyAutomator.recipe.canLogNewUserIn=!1;var m=g("get",{filter:{itemType:"trigger"}});Object.keys(m)>0&&(UncannyAutomator.recipe.canLogNewUserIn=!0,a().each(m,(function(e,t){UncannyAutomator.recipe.canLogNewUserIn=UncannyAutomator.recipe.canLogNewUserIn&&t.canLogNewUserIn})))}(!O(t.validate)||O(t.validate)&&t.validate)&&h("validate")}else{var f=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["recipeObject",f]))}break;case"validate":var y=!0;a().each(UncannyAutomator.recipe.hasLive,(function(e,t){UncannyAutomator.recipe.hasLive[e]=!1})),a().each(UncannyAutomator.recipe.items,(function(e,t){t.isLive&&(UncannyAutomator.recipe.hasLive[t.itemType]=!0)})),a().each(UncannyAutomator.recipe.items,(function(e,t){var n=!0;a().each(t.options,(function(t,i){var o=!0;a().each(i.fields,(function(e,t){t.validate(!1).isValid||(o=!1)})),UncannyAutomator.recipe.items[e].options[t].isValid=o,o||(n=!1)})),UncannyAutomator.recipe.items[e].isValid=n,t.isLive&&!n&&(y=!1)})),UncannyAutomator.recipe.hasLive.trigger?"anonymous"!=UncannyAutomator.recipe.type||UncannyAutomator.recipe.userSelector.isValid?UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure?UncannyAutomator.recipe.hasLive.trigger||UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.liveItems):(y=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneAction):(y=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.userSelector):(y=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneTrigger),UncannyAutomator.recipe.isValid=y,y&&(UncannyAutomator.recipe.message.error=""),n=!0}else console.error(L('%s: The action "%s" isn\'t defined',["recipeObject",e]));return n}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i=["add","delete","clean","reset","update","get"];if(O(e)&&j(e,i))switch(e){case"add":t=a().extend({isValid:!1,isLive:!1},t);var o=["id","itemType"];if(j(o,Object.keys(t)))O(UncannyAutomator.recipe.items[t.id])||(UncannyAutomator.recipe.items[t.id]=t,g("clean",{}),n=!0);else{var r=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["itemsObject",r]))}break;case"delete":S((t=a().extend({isValid:!1},t)).id)?console.error(L("%s: Invalid item ID",["itemsObject"])):O(UncannyAutomator.recipe.items[t.id])?(delete UncannyAutomator.recipe.items[t.id],n=!0):console.error(L("%s: We didn't find an item with this the ID %s",["itemsObject",t.id]));break;case"clean":var s={};a().each(UncannyAutomator.recipe.items,(function(e,t){O(t)&&(s[e]=t)})),UncannyAutomator.recipe.items=s,n=!0;break;case"update":S(t.id)?console.error(L("%s: Invalid item ID",["itemsObject"])):O(UncannyAutomator.recipe.items[t.id])?(UncannyAutomator.recipe.items[t.id]=a().extend({},UncannyAutomator.recipe.items[t.id],t),n=!0):console.error(L("%s: We didn't find an item with this the ID %s",["itemsObject",t.id]));break;case"reset":UncannyAutomator.recipe.items={},n=!0;break;case"get":if(S(t.filter))n=UncannyAutomator.recipe.items;else{var l={};a().each(UncannyAutomator.recipe.items,(function(e,n){var i=!0;a().each(t.filter,(function(e,t){n[e]!=t&&(i=!1)})),i&&(l[e]=n)})),n=l}}else console.error(L('%s: The action "%s" isn\'t defined',["itemsObject",e]));return n}function y(){Object.entries(UncannyAutomator.integrations).forEach((function(e){var t=p(e,2),n=t[0],i=(t[1],{available:v(UncannyAutomator.triggers.filter((function(e){return e.integration==n})),"select_option_name",(function(e){return N(e)})),unavailable:[]}),a={available:v(UncannyAutomator.actions.filter((function(e){return e.integration==n})),"select_option_name",(function(e){return N(e)})),unavailable:[]};O(UncannyAutomator.wp)&&UncannyAutomator.wp||O(UncannyAutomator.proFeatures)&&O(UncannyAutomator.proFeatures[n])&&(i.unavailable=v(UncannyAutomator.proFeatures[n].triggers.filter((function(e){return"logged-in"==e.type})),"name",(function(e){return N(e)})),a.unavailable=v(UncannyAutomator.proFeatures[n].actions,"name",(function(e){return N(e)}))),i.allItemsArePro=i.available.every((function(e){return!!O(e.is_pro)&&e.is_pro})),a.allItemsArePro=a.available.every((function(e){return!!O(e.is_pro)&&e.is_pro})),i.hasAvailableItems=i.available.length>0,a.hasAvailableItems=a.available.length>0,i.hasUnavailableItems=i.unavailable.length>0,a.hasUnavailableItems=a.unavailable.length>0,i.hasTriggers=i.hasAvailableItems||i.unavailable.length>0,a.hasActions=a.hasAvailableItems||a.unavailable.length>0,UncannyAutomator.integrations[n].items={triggers:i,actions:a}}))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return O(n)||(n=function(e){return e}),Array.isArray(e)&&!S(e)&&(e=e.sort((function(e,i){var a=0;if(O(e[t])&&O(i[t])){var o=n(e[t]),r=n(i[t]);a=(a=(a=o.localeCompare(r))>0?1:a)<0?-1:a}return a}))),e}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggers",n=arguments.length>2?arguments[2]:void 0;n=Object.assign({addDeprecatedItems:!1},n);var i={available:{},unavailable:{}};return["triggers","actions"].includes(t="action"==(t="trigger"==t?"triggers":t)?"actions":t)&&(S(e)||O(UncannyAutomator.integrations[e])&&(i=a().extend(!0,{},UncannyAutomator.integrations[e].items[t]),n.addDeprecatedItems||(i=b(i)))),i}function b(e){return e.available=e.available.filter((function(e){return!e.is_deprecated})),e.hasAvailableItems=e.available.length>0,O(e.hasTriggers)?e.hasTriggers=e.hasAvailableItems||e.unavailable.length>0:O(e.hasActions)&&(e.hasActions=e.hasAvailableItems||e.unavailable.length>0),e.allItemsArePro=e.available.every((function(e){return!!O(e.is_pro)&&e.is_pro})),e}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i=["set-step","get-step","set-source","update-fields","reset-fields"];if(UncannyAutomator.recipe.userSelector,O(e)&&j(e,i)){var o=[];switch(e){case"set-step":if(j(o=["step"],Object.keys(t)))UncannyAutomator.recipe.userSelector.step=t.step;else{var r=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["userSelectorObject",r]))}break;case"get-step":var s="select-source";O(UncannyAutomator.recipe.userSelector.step)?s=UncannyAutomator.recipe.userSelector.step:S(UncannyAutomator.recipe.userSelector.fields[UncannyAutomator.recipe.userSelector.source])||(s="show-sentence",UncannyAutomator.recipe.userSelector.isValid=!0),n=s;break;case"set-source":if(j(o=["source"],Object.keys(t)))UncannyAutomator.recipe.userSelector.source=t.source;else{var l=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["userSelectorObject",l]))}break;case"update-fields":if(j(o=["source","fields"],Object.keys(t)))["existingUser","newUser"].includes(t.source)?(S(UncannyAutomator.recipe.userSelector.fields)&&(UncannyAutomator.recipe.userSelector.fields={existingUser:{},newUser:{}}),UncannyAutomator.recipe.userSelector.fields[t.source]=a().extend({},UncannyAutomator.recipe.userSelector.fields[t.source],t.fields)):console.error(L("%s: The source parameter is invalid. Valid values are: %s",["userSelectorObject",["existingUser","newUser"]]));else{var c=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["userSelectorObject",c]))}break;case"reset-fields":UncannyAutomator.recipe.userSelector.fields={existingUser:{},newUser:{}}}}else console.error(L('%s: The action "%s" isn\'t defined',["userSelectorObject",e]));return n}function w(){["user","anonymous"].includes(UncannyAutomator.recipe.type)&&(UncannyAutomator.dev.debugMode&&(H("Filter Automator items",!0,{collapseGroup:!0}),console.log(L("Current recipe type: %s",[UncannyAutomator.recipe.type]))),UncannyAutomator.triggers=UncannyAutomator.triggers.filter((function(e){return UncannyAutomator.dev.debugMode&&(console.log(e),e.type==UncannyAutomator.recipe.type?B("success","Keep"):B("error","Remove")),e.type==UncannyAutomator.recipe.type})),UncannyAutomator.dev.debugMode&&console.groupEnd())}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=["add","delete","update","change_post_status","recipe_completions_allowed","recipe_max_completions_allowed","change_post_title","change_post_recipe_type","user-selector","set_recipe_terms","schedule_action","remove_schedule"];o=a().extend({},{requiresRecipesObject:!0,renderUI:!0},o),j(e,r)?a().ajax({method:"POST",url:"".concat(UncannyAutomator.restURL,"/").concat(e,"/"),data:a().param(t)+"&"+a().param({doing_rest:1}),dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",UncannyAutomator.nonce)},success:function(a){UncannyAutomator.dev.debugMode&&(H("REST call ✅",!0,{collapseGroup:!0}),console.log("Endpoint: ".concat(e)),console.log("Data:"),console.log(t),console.log("Response:"),console.log(a),console.groupEnd()),a.success?O(a.recipes_object)||!o.requiresRecipesObject?O(n)&&(o.renderUI&&h("create",{allRecipes:a.recipes_object}),n(a)):(console.error("The call was successful, but the new recipes_object is missing."),O(i)&&i(a)):(console.error("The call was successful, but there were errors."),O(i)&&i(a))},statusCode:{403:function(e){UncannyAutomator.dev.debugMode&&(H("REST call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log("%c403: Access denied","color: red"),console.groupEnd()),O(i)&&i(e)}},error:function(e,n,a){UncannyAutomator.dev.debugMode&&(H("REST call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),O(i)&&i({success:!1})},fail:function(e){UncannyAutomator.dev.debugMode&&(H("REST call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),O(i)&&i(e)}}):console.error(L("The %s endPoint does not exists. The valid endpoints are %s",[e,r.join(", ")]))}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;O(e)?(t=a().extend(!0,t,{action:e,nonce:UncannyAutomator.nonce}),a().ajax({method:"POST",dataType:"json",url:ajaxurl,data:t,success:function(e){UncannyAutomator.dev.debugMode&&(H("AJAX call ✅",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log(e),console.groupEnd()),O(e.status)&&"auth-failed"==e.status?location.reload():O(n)&&n(e,t)},statusCode:{403:function(){UncannyAutomator.dev.debugMode&&(H("AJAX call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),H("403: Access denied",!1,{bgColor:"#ff0000"}),console.groupEnd()),O(i)&&i(response),O(i)&&i(response)}},fail:function(e){UncannyAutomator.dev.debugMode&&(H("AJAX call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),O(i)&&i(e)}})):console.error("We cannot do this AJAX request. {action} is not defined.")}function C(e){var t={};return a().each(UncannyAutomator.recipe.items[e].options,(function(e,n){a().each(n.fields,(function(e,n){var i=n.getFieldID(),a=n.getValue();O(a)||(a=n.getAttributes().currentValue),"select"==n.getAttributes().fieldType&&"automator_custom_value"==a&&(t["".concat(i,"_custom")]=n.getSelectCustomValue()),t[i]=a,S(a)||"select"!=n.getAttributes().fieldType||(t["".concat(i,"_readable")]=n.getReadableValue())}))})),t}function D(e,t){var n;return a().each(UncannyAutomator.recipe.items[e].options,(function(e,i){a().each(i.fields,(function(e,i){t==i.getFieldID()&&(n=i)}))})),n}function U(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!S(t)&&!S(n)&&!S(i)){var o={};if("trigger"==n||"action"==n){if(O(UncannyAutomator.integrations[t])){var r=UncannyAutomator.integrations[t];O(r.items)?o="trigger"==n?r.items.triggers.available:r.items.actions.available:console.log("%cNot ready, who is calling this?","background: red; color: #fff; font-weight: 500; padding: 2px 6px;")}}else"closure"==n&&(o=UncannyAutomator.closures);a().each(o,(function(t,n){if(n.code==i)return e=n,!1}))}return e}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=["metabox","items","item","optionGroup","lastItem","user-selector"];if(O(e)&&j(e,i)){var o=[];switch(e){case"metabox":if(t=a().extend({},t),j(o=["type"],Object.keys(t))){t.cssSelector__metabox,"trigger"==t.type?t.cssSelector__metabox="#recipe-triggers-ui":"action"==t.type&&(t.cssSelector__metabox="#recipe-actions-ui");var r=a()(t.cssSelector__metabox);n=r}else{var s=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["itemsObject",s]))}break;case"items":if(t=a().extend({},t),j(o=["type"],Object.keys(t))){var l=E("metabox",{type:t.type}),c=l.find(".item:not(.item--user-selector):not(.item--start):not(.item--closure)");n=c}else{var u=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["itemsObject",u]))}break;case"item":if(t=a().extend({},t),j(o=["id"],Object.keys(t))){t.cssSelector='.uap .item[data-id="'+t.id+'"]';var d=a()(t.cssSelector),p=d.find(".item__content");n.item=d,n.contentContainer=p}else{var m=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["itemsObject",m]))}break;case"optionGroup":if(t=a().extend({},t),j(o=["itemID","groupID"],Object.keys(t))){var f=E("item",{id:t.itemID}).item;t.cssSelector__tokenInSentence='.item-title__token[data-token-id="'+t.groupID+'"]',t.cssSelector__fieldsContainer='.item-options__group[data-optiongroup="'+t.groupID+'"]';var h=f.find(t.cssSelector__tokenInSentence),g=f.find(t.cssSelector__fieldsContainer),y=f.find(".item-options");n.tokenInSentence=h,n.fieldsContainer=g,n.optionsContainer=y}else{var v=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["itemsObject",v]))}break;case"lastItem":if(t=a().extend({},t),j(o=["type"],Object.keys(t))){var _=E("metabox",{type:t.type}),b=_.find(".item:not(.item--user-selector):not(.item--start):not(.item--closure)").last();n=b}else{var k=JSON.stringify(F(t,o));console.error(L("%s: Some attributes are missing: %s",["itemsObject",k]))}break;case"user-selector":n=a()(".user-selector")}}else console.error(L('%s: The element "%s" isn\'t defined',["getDOMElements",e]));return n}function x(){return["select","textarea","text","url","email","int","float","checkbox","radio","group","date","time","repeater"]}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;if(i={plain:"",brackets:"",html:a()("<div/>"),elements:{normal:[],token:[]},parts:[]},!S(t=t.trim())){var o,r=new RegExp(/\{\{(.*?)\}\}/gm),s=[],l=[],c=t,d=0,p=(t=t.replace(r,(function(t,i){var a,o=i.split(":"),r=o[0],s=o[1],u=O(o[2])?o[2]:s;return i={type:"token",id:s,text:r,optionsID:u,hasFields:O(e.options[u])},O(n[i.id])&&("automator_custom_value"==n[i.id]&&O(n[L("%s_custom",[i.id])])?a=n[L("%s_custom",[i.id])]:O(n[L("%s_readable",[i.id])])&&(a=n[L("%s_readable",[i.id])]),i.originalText=i.text,i.text=O(a)?a:n[i.id]),l.push(i),c=c.replace(t,"{{token:"+d+"}}"),d++,"{{v}}"}))).split("{{v}}"),m=0;for(a().each(p,(function(e,t){if(""!=t){var n={type:"normal",text:t};s.push(n),c=c.replace(t,"{{normal:"+m+"}}"),m++}}));null!==(o=r.exec(c));){var f=o[1].split(":");"normal"==(f={type:f[0],index:f[1]}).type?i.parts.push(s[f.index]):i.parts.push(l[f.index])}var h=null;a().each(i.parts,(function(t,n){if(i.plain+=n.text," "!=n.text){var o,s=n.text,l=!1,c=null;if(" "==s[0]&&(s=s.slice(1))," "==s[s.length-1]&&(s=s.slice(0,-1)),"normal"==n.type||"token"==n.type&&!n.hasFields&&!e.isMissing)o={class:"item-title__normal"},i.brackets+=n.text;else{if(o={class:"item-title__token","data-token-id":n.id,"data-options-id":n.optionsID},O(e.options[n.optionsID])&&e.options[n.optionsID].isValid&&(o.class+=" item-title__token--filled"),O(n.originalText)){if(r.test(s)){O(h)||(h=new u.default(e.itemType,"text",{includeGroupName:!1}));var d=h.renderTextWithTokens(s);O(d)&&(l=!0,c=d)}if(!l){var p=W(s,30);p.isAbbreviated&&(o["uap-tooltip"]=s,s=p.text)}}i.brackets+="{{".concat(Y(s),"}}")}var m=a()("<span/>",o);l?m.append(c):m.text(Y(s)),i.elements[n.type].push(m),i.html.append(m)}else i.brackets+=n.text})),i.elements.normal=a()(i.elements.normal).map((function(){return this.get()})),i.elements.token=a()(i.elements.token).map((function(){return this.get()})).filter(":not(.item-title__normal)")}return UncannyAutomator.recipe.items[e.id].itemSentence=i,i}function O(e){return null!=e}function S(e){var t=!0;return O(e)&&(t=a().isArray(e)?0==e.length:V(e)?a().isEmptyObject(e):""==e),t}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!0};return n.caseSensitive?e.toString()==t.toString():e.toString().toLowerCase()==t.toString().toLowerCase()}function j(e,t){return Array.isArray(e)?0==F(e,t).length:-1!==a().inArray(e,t)}function F(e,t){return a()(e).not(t).get()}function L(e,t){return(0,n("./node_modules/sprintf-js/src/sprintf.js").vsprintf)(e,t)}function R(e){return"string"==typeof e}function V(e){return null!==e&&"object"===d(e)}function P(e){return e.replace(/\s/g,"")}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(e=e.replace(/{{/g,t)).replace(/}}/g,n)}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};O(n.bgColor)||(n.bgColor="#0790e8");var i="background: ".concat(n.bgColor,'; color: #fff; font-weight: 500; padding: 2px 6px; font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;');t?O(n.collapseGroup)&&n.collapseGroup?console.groupCollapsed("%c🤖Automator",i,e):console.group("%c🤖Automator",i,e):console.log("%c🤖Automator",i,e)}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n='color: #fff; padding: 2px 7px; font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; font-weight: normal';"error"==e&&(n="background: #f13c3c; ".concat(n)),"success"==e&&(n="background: #40b528; ".concat(n)),console.log("%c".concat(t),n)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={"&":"&amp;","<":"&lt;",">":"&gt;"},n=function(e){return t[e]||e};return e.replace(/[&<>]/g,n)}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={isAbbreviated:!1,text:e};if(e.length>t){var i=Math.floor(t/2),a={start:e.substring(0,i),end:e.slice(-i)};n.text="".concat(a.start," ... ").concat(a.end),n.isAbbreviated=!0}return n}function $(){return"_"+Math.random().toString(36).substr(2,9)}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S(e)&&(e=window.location.href);try{e=new URL(e)}catch(t){return e}for(var i=e.search.substr(1).split("&"),o=0,r=Object.entries(t);o<r.length;o++){var s=p(r[o],2),l=s[0],c=s[1];l=encodeURI(l),c=encodeURI(c);for(var u=i.length,d=void 0;u--;)if((d=i[u].split("="))[0]==l){d[1]=c,i[u]=d.join("=");break}u<0&&(i[i.length]=[l,c].join("="))}if(i=i.filter((function(e){return!S(e)})),e.search=i.join("&"),(n=a().extend({},{setAsURL:!1,refresh:!1},n)).setAsURL)if(n.refresh)window.location.href=e.href;else{var m=document.title;window.history.pushState({},m,e.href)}return e.href}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");return t.innerHTML=e,t.value}function G(e,t){var n=0;return function(){var i=Date.now();if(n+t<i)return n=i,e.apply(this,arguments)}}function z(e,t){var n=-1;return function(){clearTimeout(n);var i=arguments,a=this;n=setTimeout((function(){e.apply(a,i)}),t)}}function J(e){var t=document.createElement("textarea");t.style.width="0px",t.style.height="0px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function X(e){var t,n="";try{t=UncannyAutomator.recipes_object.filter((function(e){return e.ID==UncannyAutomator.recipe.id}))[0]}catch(e){console.log(e)}try{var i="====== ".concat(UncannyAutomator.i18n.debugging.recipeTitle," ====== \n"),o="user"==t.recipe_type?UncannyAutomator.i18n.debugging.recipeTypeUser:"anonymous"==t.recipe_type?UncannyAutomator.i18n.debugging.recipeTypeAnonymous:"";i+="".concat(UncannyAutomator.i18n.debugging.recipeType,": ").concat(o);var r="draft"==t.post_status?UncannyAutomator.i18n.debugging.recipeStatusDraft:"publish"==t.post_status?UncannyAutomator.i18n.debugging.recipeStatusLive:"";n=i+="\n".concat(UncannyAutomator.i18n.debugging.recipeStatus,": ").concat(r)}catch(e){console.log(e)}try{var s="=== ".concat(UncannyAutomator.i18n.debugging.recipeItemsTitle," === \n"),l=function(e){var t="publish"==e.post_status?UncannyAutomator.i18n.debugging.itemStatusLive:UncannyAutomator.i18n.debugging.itemStatusDraft;return"> ".concat(e.meta.integration," - ").concat(e.meta.code," - ").concat(t)},u=t.triggers.map(l),d=u.length>0,p=t.actions.map(l),m=p.length>0,f=t.closures.map(l),h=f.length>0;d||m||h?(s+="".concat(UncannyAutomator.i18n.debugging.triggersTitle,"\n"),s+=d?u.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noTriggers),s+="\n".concat(UncannyAutomator.i18n.debugging.actionsTitle,"\n"),s+=m?p.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noActions),s+="\n".concat(UncannyAutomator.i18n.debugging.closuresTitle,"\n"),s+=h?f.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noClosures)):s+="".concat(UncannyAutomator.i18n.debugging.noRecipeItemsFound),n=""!==n?"".concat(n,"\n\n").concat(s):n}catch(e){console.log(e)}try{var g="====== ".concat(UncannyAutomator.i18n.debugging.jsConsole," ====== \n");g+="".concat(e.stack.replaceAll(UncannyAutomator.siteURL,"{site_url}")),n=""!==n?"".concat(n,"\n\n").concat(g):n}catch(e){console.log(e)}new c.default({title:'<span class="modal__title-icon uo-icon uo-icon--exclamation-triangle"></span> '.concat(UncannyAutomator.i18n.debugging.recipeCouldntBeLoaded),warning:"".concat(UncannyAutomator.i18n.debugging.recipeFailedNotice),content:'\n            <div>\n                <p>\n                    Ut venenatis justo eget nisi congue sodales. Ut id dignissim massa. Donec sit amet sapien a est venenatis pulvinar efficitur id lorem.\n                </p>\n                <p>\n                    Nullam eros lacus, convallis eu condimentum vel, tempus luctus lectus.\n                </p>\n                <p>\n                    <div>\n                        <pre id="uap-debugging">'.concat(n,"</pre>\n                    </div>\n                </p>\n            </div>\n        "),buttons:{cancel:UncannyAutomator.i18n.debugging.buttonGoBack,confirm:UncannyAutomator.i18n.debugging.learnMore}},{size:"extra-large",warningFirst:!0}).setEvents({onConfirm:function(){window.open(UncannyAutomator.dev.debuggingURL,"_blank")},onCancel:function(){window.location.replace(UncannyAutomator.dev.recipesUrl)},afterSetEvents:function(){var e=a()("#uap-debugging");e.on("click",(function(){e.text();var t=document.createRange();t.selectNodeContents(e[0]),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}))}})}function Z(e,t,n){var i={};return a().each(e,(function(e,a){a.meta[t]&&a.meta[t]==n&&(i[e]=a)})),i}function Q(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};return a().each(e,(function(e,a){t in a.meta===n&&(i[e]=a)})),i}},"./src/components/Validation.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{validateRecipe:()=>l,validateItem:()=>c,validateItemFields:()=>u,validateField:()=>d,getTokensFromString:()=>p,replaceTokensInString:()=>m,getExampleValueByFieldType:()=>f,parseURL:()=>h,initURLChecker:()=>g});var i,a=n("jquery"),o=n.n(a),r=n("./src/components/Utilities.js"),s=(n("./src/components/Publish.js"),n("./src/components/tokens/tokens.js"));function l(){var e={canSubmit:UncannyAutomator.recipe.isValid};return UncannyAutomator.recipe.isValid||o().each(UncannyAutomator.recipe.items,(function(e,t){c(e)})),e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={isValid:!1};if((0,r.isDefined)(e)){var i=UncannyAutomator.recipe.items[e];if(!i.isMissing&&!(0,r.isEmpty)(i)&&(n.isValid=i.isValid,!i.isValid)){var a=(0,r.getDOMElements)("item",{id:e}).item;a.addClass("item--error"),o().each(i.options,(function(t,n){if(!n.isValid){var i=(0,r.getDOMElements)("optionGroup",{itemID:e,groupID:t});i.tokenInSentence.addClass("item-title__token--error item-title__token--error-shake"),i.fieldsContainer.addClass("item-options__group--error"),i.optionsContainer.addClass("item-options--error"),setTimeout((function(){i.tokenInSentence.removeClass("item-title__variable--error-shake")}),1e3),(0,r.isDefined)(i.optionsContainer)&&u(i.optionsContainer)}}))}}else n.isValid=!1,(0,r.isEmpty)(t)&&console.error("Neither itemID nor the $item are defined. One of them must be defined.");return n}function u(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={isValid:!1},i=e.find('\n\t\tinput.form-element__input[data-is-child-field="'.concat(t?"true":"false",'"],\n\t\ttextarea.form-element__textarea[data-is-child-field="').concat(t?"true":"false",'"],\n\t\tselect.form-element__select[data-is-child-field="').concat(t?"true":"false",'"],\n\t\t.form-checkbox input,\n\t\t.form-radio')),a=!0;return i.each((function(){var t=o()(this),n=(t.data("type"),{});if(t.hasClass("form-radio")){var i=t.find("input").first(),r=t.find("input:checked");n={field_type:"radio",value:r.length>0?r.val():"",attributes:{supportsTokens:i.data("supportstokens"),required:i.data("required")}}}else n=t.hasClass("form-element__select")?{field_type:"select",value:t.val(),attributes:{supportsTokens:t.data("supportstokens"),required:t.data("required"),supportsCustomValue:t.data("supports-custom-value")}}:{field_type:t.data("type"),value:t.val(),attributes:{supportsTokens:t.data("supportstokens"),required:t.data("required")}};"checkbox"==n.field_type&&(n.value=t.is(":checked")),d(t,n.field_type,n.value,n.attributes).isValid||(a=!1,e.addClass("item-options--error"))})),n.isValid=a,n}function d(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{supportsTokens:!1,required:!1},a=arguments.length>4?arguments[4]:void 0,s={isValid:!1,message:""},l=(0,r.getFieldTypes)(),c={select:{empty:UncannyAutomator.i18n.validation.field.select.empty,invalid:UncannyAutomator.i18n.validation.field.select.invalid},text:{empty:UncannyAutomator.i18n.validation.field.text.empty,invalid:UncannyAutomator.i18n.validation.field.text.invalid},textarea:{empty:UncannyAutomator.i18n.validation.field.textarea.empty,invalid:UncannyAutomator.i18n.validation.field.textarea.invalid},int:{empty:UncannyAutomator.i18n.validation.field.int.empty,invalid:UncannyAutomator.i18n.validation.field.int.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.int.multipleTokens},float:{empty:UncannyAutomator.i18n.validation.field.float.empty,invalid:UncannyAutomator.i18n.validation.field.float.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.float.multipleTokens},email:{empty:UncannyAutomator.i18n.validation.field.email.empty,single:{invalid:UncannyAutomator.i18n.validation.field.email.single.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.single.multipleTokens},multiple:{invalid:UncannyAutomator.i18n.validation.field.email.multiple.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens}},url:{empty:UncannyAutomator.i18n.validation.field.url.empty,invalid:UncannyAutomator.i18n.validation.field.url.invalid},checkbox:{empty:UncannyAutomator.i18n.validation.field.checkbox.empty,invalid:UncannyAutomator.i18n.validation.field.checkbox.invalid},radio:{empty:UncannyAutomator.i18n.validation.field.radio.empty,invalid:UncannyAutomator.i18n.validation.field.radio.invalid},date:{empty:UncannyAutomator.i18n.validation.field.date.empty,invalid:UncannyAutomator.i18n.validation.field.date.invalid},time:{empty:UncannyAutomator.i18n.validation.field.time.empty,invalid:UncannyAutomator.i18n.validation.field.time.invalid},invalidType:UncannyAutomator.i18n.validation.field.invalidType};if((0,r.inArray)(t,l)){if("checkbox"!=t||(0,r.isEmpty)(n)||["true","false"].includes(n)&&(n="true"==n),i.required&&((0,r.isEmpty)(n)||"checkbox"==t&&!1===n))s.message=c[t].empty;else if(!i.required&&(0,r.isEmpty)(n))s.isValid=!0;else if(""!=n){var d;switch(t){case"select":if(s.isValid=!0,i.supportsCustomValue&&"automator_custom_value"==n){var m=e.closest(".form-element").find(".form-element-children");1==m.length&&(s.isValid=u(m,!0).isValid)}if(s.isValid&&(0,r.isDefined)(a)){var f=a(n);s.isValid=f.isValid,f.isValid||(s.message=f.message)}break;case"text":case"textarea":if(s.isValid=!0,(0,r.isDefined)(a)){var g=a(n);s.isValid=g.isValid,g.isValid||(s.message=g.message)}break;case"int":var y,v=new RegExp(/^([+-]?[1-9]\d*|0)$/gm);if(d=p(n),i.supportsTokens&&d.hasTokens?1==d.tokens.length?s.isValid=!0:s.message=c.int.multipleTokens:v.test(n)?s.isValid=!0:s.message=c.int.invalid,s.isValid&&(0,r.isDefined)(a)){var _=a(n,y);s.isValid=_.isValid,_.isValid||(s.message=_.message)}break;case"float":var b,k=new RegExp(/^[+-]?((\d+(\.|\,)?\d*)|(\.\d+))$/gm);if(d=p(n),i.supportsTokens&&d.hasTokens?1==d.tokens.length?s.isValid=!0:s.message=c.float.multipleTokens:k.test(n)?s.isValid=!0:s.message=c.float.invalid,s.isValid&&(0,r.isDefined)(a)){var w=a(n,b);s.isValid=w.isValid,w.isValid||(s.message=w.message)}break;case"email":var T,A=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),C=[];n.includes(",")?(C=n.split(","),o().each(C,(function(e,t){C[e]=t.trim()}))):C.push(n.trim()),d=p(n);var D=!0,U=C.length>1;if(i.supportsTokens&&d.hasTokens){var E=!1;o().each(C,(function(e,t){if(!((d=p(t)).tokens.length<=1))return E=!0,!1})),D&&!E?s.isValid=!0:s.message=E?U?c.email.multiple.multipleTokens:c.email.single.multipleTokens:U?c.email.multiple.invalid:c.email.single.invalid}else o().each(C,(function(e,t){A.test(t)||(D=!1)})),D?s.isValid=!0:s.message=U?c.email.multiple.invalid:c.email.single.invalid;if(s.isValid&&(0,r.isDefined)(a)){var x=a(n,T);s.isValid=x.isValid,x.isValid||(s.message=x.message)}break;case"url":var M=h(n,i);if(M.isValid?s.isValid=!0:s.message=c.invalidType,s.isValid&&(0,r.isDefined)(a)){var O=a(n,M.simulatedURL);s.isValid=O.isValid,O.isValid||(s.message=O.message)}break;case"checkbox":if(s.isValid=!0,(0,r.isDefined)(a)){var S=a(n);s.isValid=S.isValid,S.isValid||(s.message=S.message)}break;case"radio":if(s.isValid=!0,(0,r.isDefined)(a)){var I=a(n);s.isValid=I.isValid,I.isValid||(s.message=I.message)}break;case"date":if(s.isValid=!0,(0,r.isDefined)(a)){var j=a(n);s.isValid=j.isValid,j.isValid||(s.message=j.message)}break;case"time":if(s.isValid=!0,(0,r.isDefined)(a)){var F=a(n);s.isValid=F.isValid,F.isValid||(s.message=F.message)}break;default:s.isValid=!1,s.message=""}}}else s.message=c.invalidType;if(!(0,r.isEmpty)(e)){var L=e.closest(".form-element"),R=L.find(".form-element__error").filter((function(){return o()(this).closest(".form-element").is(L)}));s.isValid?(L.removeClass("form-element--error"),L.addClass("form-element--success")):(L.removeClass("form-element--success"),L.addClass("form-element--error")),""!=s.message?(R.addClass("form-element__error--show"),R.text(s.message)):(R.removeClass("form-element__error--show"),R.text(""))}return s}function p(e){var t={hasTokens:!1,tokens:[]},n=new RegExp(/\{\{(.*?)\}\}/gm),i=new s.default(null,null,{includeGroupName:!1,includeGroupIcon:!1}).tokens;return(0,r.isDefined)(e)?(0,r.isEmpty)(e)||function(){(0,r.isString)(e)||(e=e.toString());for(var a,s=[],l=function(){var e=a[1];e.startsWith("USERMETA:")||e.startsWith("POSTMETA:")?s.push(e):o().each(i,(function(t,n){o().each(n.tokens,(function(t,n){e==n.id&&s.push(n)}))}))};null!==(a=n.exec(e));)l();t.tokens=s,t.tokens.length>0&&(t.hasTokens=!0)}():console.error("Undefined string attribute"),t}function m(e){var t=e,n=p(e);return n.hasTokens&&o().each(n.tokens,(function(e,n){var i=n.id.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");i=(0,r.vsprintf)("{{%s}}",[i]);var a=new RegExp(i,"g");t=t.replace(a,(function(e,t){return f(n.type)}))})),t}function f(e){var t="";switch(e){case"select":t="option";break;case"text":t="lorem-ipsum";break;case"textarea":t="<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum finibus eros nunc, et posuere libero posuere a. Nam viverra mattis finibus. Aenean purus lorem, mollis vel ullamcorper ac</p>";break;case"int":t=1;break;case"float":t=1.1;break;case"url":t="https://example.com";break;case"email":t="example@example.com";break;case"checkbox":t=!0;break;case"radio":t="option";break;case"date":t="2021-12-31";break;case"":t="01:00 PM"}return t}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{supportsTokens:!1},n={changed:!1,isValid:!1,newURL:null,simulatedURL:null};e=e.replace(/ /g,"%20");var i=new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)(?:.(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)*(?:.(?:[a-z¡-￿]{2,})).?)(?::d{2,5})?(?:[/?#]S*)?"),a=p(e),o=e;if(t.supportsTokens&&a.hasTokens){var r=m(e);n.simulatedURL=r,i.test(r)?n.isValid=!0:(o="/"==e[0]?UncannyAutomator.siteURL+e:UncannyAutomator.siteURL+"/"+e,i.test(o)&&(n.isValid=!0))}else i.test(e)?n.isValid=!0:(o="/"==e[0]?UncannyAutomator.siteURL+e:UncannyAutomator.siteURL+"/"+e,i.test(o)&&(n.isValid=!0));return n.newURL=o,n.newURL!=e&&(n.changed=!0),n}function g(e){e.checkURL()}(i=jQuery).fn.checkURL=function(e){return this.each((function(){var t=i(this),n=i.extend({preURL:"Final URL: "},e),a={container:t,input:t.find(".form-element__input")},o={required:a.input.data("required"),supportsTokens:a.input.data("supportstokens")},r=i("<div/>",{class:"form-input-url-notice"}),s=i("<div/>",{class:"form-input-url-notice__header"}),l=i("<div/>",{class:"form-input-url-notice__url"});function c(e){var t=h(e,o);""!=e&&t.isValid&&t.changed?(r.addClass("form-input-url-notice--show"),l.text(t.newURL)):r.removeClass("form-input-url-notice--show")}return s.text(n.preURL),s.appendTo(r),l.appendTo(r),r.appendTo(a.container),""!=a.input.val()&&c(a.input.val()),a.container.on("automator:field:change",(function(){c(a.input.val())})),this}))}},"./src/components/itemCreatorTaskSelector.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var i=n("jquery"),a=n.n(i),o=n("./src/components/Utilities.js"),r=n("./src/components/ItemCreatorIntegrations.js"),s=n("./src/components/ItemHeaderMenu.js"),l=n("./src/components/ItemHeaderIcon.js"),c=n("./src/components/ItemHeaderTag.js"),u=n("./src/components/Triggers.js"),d=n("./src/components/Actions.js");function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const m=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.$currentItem=i,this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){this.$container=a()('<div class="item"></div>'),this.$item=this.$container,this.createHeader(),this.createItemsList(),this.$currentItem.replaceWith(this.$container)}},{key:"createHeader",value:function(){var e=a()('\n\t\t\t<div>\n\t\t\t\t<div class="item-title uap-clear">\n\t\t\t\t\t<div class="item-title__describe">\n\t\t\t\t\t\t<div class="item-title__non-editable">\n\t\t\t\t\t\t\t'.concat("trigger"==this.itemType?UncannyAutomator.i18n.trigger.select:UncannyAutomator.i18n.action.select,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),t=new s.default(this.itemType);e.append(t);var n=new l.default(this.integrationID);e.append(n);var i=new c.default(this.integrationID);e.find(".item-title").prepend(i),this.$container.append(e)}},{key:"createItemsList",value:function(){var e,t,n=this;"trigger"==this.itemType?(e=(0,o.getItemsByIntegration)(this.integrationID,"triggers"),t=UncannyAutomator.i18n.trigger.search,UncannyAutomator.i18n.proOnly.unlockTriggers):"action"==this.itemType&&(e=(0,o.getItemsByIntegration)(this.integrationID,"actions"),t=UncannyAutomator.i18n.action.search,UncannyAutomator.i18n.proOnly.unlockActions);var i=a()('\n\t\t\t<div class="item__content">\n\t\t\t\t<div class="item-options item-options--nopadding item-options--noborder">\n\t\t\t\t\t<div class="form-element">\n\t\t\t\t\t\t<div class="item__task-selector">\n\t\t\t\t\t\t\t<div class="item-task-selector__search">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tclass="item-task-selector__search-input"\n\t\t\t\t\t\t\t\t\tplaceholder="'.concat(t,'"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-task-selector__options">\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--available"></div>\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--unavailable">\n\t\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group-items"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.noResults,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),r=i.find(".item-options"),s=i.find(".item__task-selector"),l=i.find(".item-task-selector__search-input"),c={container:i.find(".item-task-selector__options"),available:i.find(".item-task-selector-options__group--available"),unavailable:{container:i.find(".item-task-selector-options__group--unavailable"),list:i.find(".item-task-selector-options__group-items")},noResults:i.find(".item-task-selector__option--no-results")};e.hasAvailableItems?c.available.append(e.available.map((function(e){var t=e.is_pro,i=a()('\n\t\t\t\t\t<div class="item-task-selector__option '.concat(t?"item-task-selector__option--pro":"",'"\n\t\t\t\t\t\tdata-search="').concat(e.select_option_name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t').concat((0,o.replaceCurlyBraces)(e.select_option_name,'<span class="item-task-selector__option-variable">',"</span>"),"\n\t\t\t\t\t\t").concat(t?'<span class="item-task-selector-option__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</span>"):"","\n\t\t\t\t\t</div>\n\t\t\t\t"));return i.on("click",(function(){s.addClass("item__task-selector--loading"),i.addClass("item-task-selector__option--loading");var t=["trigger","action"].includes(n.itemType)?"add-new-".concat(n.itemType):"",r={};a().each(e.options,(function(e,t){(0,o.isDefined)(t.default_value)&&(r[t.option_code]=t.default_value)})),"anonymous"==e.type&&(r.can_log_in_new_user=!(0,o.isDefined)(e.can_log_in_new_user)||e.can_log_in_new_user),(0,o.restCall)("add",{recipePostID:UncannyAutomator.recipe.id,action:t,item_code:e.code,default_meta:a().extend({},r,{integration_name:UncannyAutomator.integrations[n.integrationID].name,sentence:e.sentence})},(function(e){if(new u.default,new d.default,(0,o.isDefined)(e.post_ID)){var t=(0,o.getDOMElements)("item",{id:e.post_ID});UncannyAutomator.recipe.items[e.post_ID].isValid?UncannyAutomator.recipe.isLive||t.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):t.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}}),(function(e){console.log("‼️ ERROR-TODO. Couldn't add the item"),s.removeClass("item__task-selector--loading"),i.removeClass("item-task-selector__option--loading"),0==e.success&&new u.default}))})),i}))):c.available.remove(),e.hasUnavailableItems?c.unavailable.list.append(e.unavailable.map((function(e){var t="unavailable_item-".concat(n.integrationID,"-").concat(n.integrationID,"_").concat((0,o.replaceCurlyBraces)(e.name,"","").toLowerCase().replace(/\s+|{|}/g,"_"));return a()('\n\t\t\t\t\t<a href="'.concat((0,o.addParametersToURL)("https://automatorplugin.com/pricing/",{utm_source:"uncanny_automator",utm_medium:"select_an_item",utm_campaign:"update_to_pro",utm_content:t}),'"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\tclass="item-task-selector__option item-task-selector__option--pro"\n\t\t\t\t\t\tdata-search="').concat(e.name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<span class="uo-icon uo-icon--lock-alt"></span>\n\t\t\t\t\t\t').concat((0,o.replaceCurlyBraces)(e.name,'<span class="item-task-selector__option-variable">',"</span>"),'\n\t\t\t\t\t\t<span class="item-task-selector-option__badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>\n\t\t\t\t\t</a>\n\t\t\t\t"))}))):c.unavailable.container.remove();var p=c.container.find(".item-task-selector__option:not(.item-task-selector__option--no-results)");l.on("input",(function(){var e=l.val().toLowerCase().replace(/\s+|{|}/g,"");p.removeClass("item-task-selector__option--show item-task-selector__option--hide");var t=!0;(0,o.isEmpty)(e)||(t=!1,a().each(p,(function(n,i){var o=a()(i);-1!==o.data("search").search(e)?(o.addClass("item-task-selector__option--show"),t=!0):o.addClass("item-task-selector__option--hide")}))),c.noResults.removeClass("item-task-selector__option--hide item-task-selector__option--show"),t?c.noResults.addClass("item-task-selector__option--hide"):c.noResults.addClass("item-task-selector__option--show")})),r.append(this.createCancelButton()),this.$container.append(i)}},{key:"createCancelButton",value:function(){var e=this,t=a()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return t.on("click",(function(){new r.default(e.itemType,e.$item)})),t}}])&&p(t.prototype,n),e}()},"./src/components/tokens/token-selector.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var i=n("jquery"),a=n.n(i),o=n("./src/components/tokens/tokens.js"),r=n("./src/components/Utilities.js"),s=n("./src/components/Field.js"),l=n("./src/components/Modal.js");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _=function e(t){if(v(this,e),t.attributes.supportsTokens)return"textarea"==t.type?new k(t):new b(t)},b=function(e){p(n,e);var t=f(n);function n(e){var i;return v(this,n),(i=t.call(this,e.attributes.itemType,e.type)).Field=e,i.Field.TokenSelector=g(i),i.render(),i.setData(),i.Field.getField().on("ua-codemirror-ready",(function(){i.getCodeMirrorEditor(),i.editor.setValue(i.editor.getValue()),i.renderTokens(),i.handleAddTokens(),i.renderTokensInRealTime()})),i}return d(n,[{key:"render",value:function(){this.RenderTokenSelector=new w(this.Field,this.tokens)}},{key:"setData",value:function(){this.data={tokenRenderingDebounce:200}}},{key:"getCodeMirrorEditor",value:function(){this.editor=this.Field.fieldCM}},{key:"handleAddTokens",value:function(){var e=this;this.Field.field.off("ua-add-token").on("ua-add-token",(function(t,n){["date","time"].includes(e.Field.attributes.fieldType)&&e.editor.setValue(""),e.insertTextAtCursor("{{".concat(n.id,"}}")),e.renderTokens(),["date","time"].includes(e.Field.attributes.fieldType)||e.editor.focus(),["date","time"].includes(e.Field.attributes.fieldType)&&e.Field.setValue("{{".concat(n.id,"}}"))}))}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}},{key:"insertTextAtCursor",value:function(e){this.editor.doc.replaceRange(e,this.editor.doc.getCursor())}},{key:"renderTokensInRealTime",value:function(){var e=this;this.editor.on("changes",(0,r.debounce)((function(t){e.renderTokens()}),this.data.tokenRenderingDebounce))}},{key:"renderTokens",value:function(){for(var e=this,t=this.editor.getSearchCursor(/\{\{(.*?)\}\}/),n=function(){var n={from:t.from(),to:t.to()},i=e.editor.getRange(n.from,n.to).replace("{{","").replace("}}",""),a=e.createTokenDOMNode(i),o=e.editor.markText(n.from,n.to,{replacedWith:a});e.Field.attributes.isReadOnly||a.addEventListener("click",(function(){if(!a.classList.contains("uap-token--cm-focused")){a.classList.add("uap-token--cm-focused");var t=function(){a.classList.remove("uap-token--cm-focused"),document.removeEventListener("mouseup",n),document.removeEventListener("copy",s),document.removeEventListener("keydown",l),document.removeEventListener("keydown",c)},n=function(e){a===e.target||a.contains(e.target)||t()};document.addEventListener("mouseup",n);var s=function(e){t(),(0,r.copyToClipboard)("{{".concat(i,"}}"))};document.addEventListener("copy",s);var l=function(n){var i=n.keyCode||n.charCode;if(8==i||46==i){var a=o.find();o.clear(),e.editor.replaceRange("",a.from,a.to),t()}};document.addEventListener("keydown",l);var c=function(n){var i=n.keyCode||n.charCode;if(37==i||39==i){t();var a,r=o.find();37==i&&(a=r.from),39==i&&(a=r.to),e.editor.focus(),e.editor.setCursor(a)}};document.addEventListener("keydown",c)}}))};t.findNext();)n()}}]),n}(o.default),k=function(e){p(n,e);var t=f(n);function n(e){var i;return v(this,n),(i=t.call(this,e.attributes.itemType,e.type)).Field=e,i.Field.TokenSelector=g(i),i.setData(),i.render(),i.Field.getField().on("ua-tinymce-ready",(function(){i.getTinyMCEEditor(),i.addStylesToEditor(),setTimeout((function(){i.parsePlainTokensInTinyMCE()}),i.data.tokenRenderingDebounce),setTimeout((function(){i.parseHTMLTokensInPlainTextarea()}),i.data.tokenRenderingDebounce),i.handleAddTokens(),i.handleHTMLTokensInPlainTextarea(),i.handlePlainTokensInTinyMCE()})),i}return d(n,[{key:"setData",value:function(){this.data={tokenRenderingDebounce:200,tokenCSSClass:"uap-token-tinymce"}}},{key:"render",value:function(){this.RenderTokenSelector=new w(this.Field,this.tokens)}},{key:"handleAddTokens",value:function(){var e=this;this.Field.field.on("ua-add-token",(function(t,n){e.insertTextAtCursor(n.id)}))}},{key:"insertTextAtCursor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="{{".concat(e,"}}");if(this.Field.getField().is(":visible")){var n=this.Field.getField().prop("selectionStart"),i=n+t.length,a=this.Field.getField().val(),o=a.substr(0,n)+t+a.substr(n);this.Field.setValue(o,!1),this.Field.getField().focus(),this.Field.getField().prop("selectionEnd",i)}else{var r=this.createTokenDOMNode(e);this.editor.execCommand("mceInsertContent",!1,'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(e,'">').concat(r.outerHTML,"</span>"))}this.Field.getField().trigger("change input")}},{key:"getTinyMCEEditor",value:function(){this.editor=this.Field.fieldTinyMCE}},{key:"addStylesToEditor",value:function(){this.editor.dom.addStyle("\n            html body {\n                font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n                font-size: 15px;\n                margin-left: 12px;\n                margin-right: 12px;\n            }\n\n            .uap-token {\n                display: inline-flex;\n                align-items: center;\n                background: #eee;\n                line-height: 1;\n                padding: 3px 8px;\n                border-radius: 150px;\n\n                font-size: 15px;\n                font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n                -webkit-font-smoothing:antialiased;\n                -moz-osx-font-smoothing:grayscale;\n            }\n\n                .uap-token-tinymce {\n                    display: inline-block;\n                    line-height: 1;\n                    border-radius: 150px;\n                    box-shadow: 0 0 0 2px transparent;\n                    transition: box-shadow 150ms ease-in-out;\n                    cursor: pointer;\n                }\n\n                .uap-token-tinymce[data-mce-selected=\"1\"] {\n                    outline: 0 !important;\n                    box-shadow: 0 0 0 2px #0790e8;\n                }\n\n                .uap-token img {\n                    width: 12px;\n                    height: 11px;\n                    margin-right: 5px;\n                    object-fit: contain;\n                    object-position: center;\n                    display: block;\n                }\n\n                .uap-token .uo-icon {\n                    width: 14px;\n                    height: 14px;\n                    border: 1px solid #444;\n                    border-radius: 50%;\n                    font-size: 9px;\n                    color: #444;\n                    text-align: center;\n                    line-height: 15px;\n                    background: #fff;\n                    opacity: .8;\n                    margin-right: 5px;\n                    position: relative;\n                }\n\n                    .uap-token .uo-icon.uo-icon--bolt:before {\n                        content: '';\n\n                        width: 9px;\n                        height: 9px;\n\n                        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23444' d='M377.8 167.9c-8.2-14.3-23.1-22.9-39.6-22.9h-94.4l28.7-87.5c3.7-13.8.8-28.3-7.9-39.7C255.8 6.5 242.5 0 228.2 0H97.7C74.9 0 55.4 17.1 52.9 37.1L.5 249.3c-1.9 13.8 2.2 27.7 11.3 38.2C20.9 298 34.1 304 48 304h98.1l-34.9 151.7c-3.2 13.7-.1 27.9 8.6 38.9 8.7 11.1 21.8 17.4 35.9 17.4 16.3 0 31.5-8.8 38.8-21.6l183.2-276.7c8.4-14.3 8.4-31.5.1-45.8zM160.1 457.4L206.4 256H47.5L97.7 48l127.6-.9L177.5 193H334L160.1 457.4z'%3E%3C/path%3E%3C/svg%3E\");\n\n                        background-size: contain;\n                        background-position: center;\n                        background-repeat: no-repeat;\n\n                        position: absolute;\n                        top: 50%;\n                        left: 50%;\n                        transform: translate(-50%,-50%);\n                    }\n\n                .uap-token__name {\n                    color: #444444;\n                    font-size: 14px;\n                    font-weight: 600;\n                }\n\n                    .uap-token--invalid {\n                        background: #f9e2e2;\n                    }\n\n                    .uap-token--invalid .uo-icon {\n                        color: #c00;\n                        border-color: #c00;\n                    }\n\n        ")}},{key:"handleHTMLTokensInPlainTextarea",value:function(){var e=this;this.Field.getField().on("change input",(0,r.debounce)((function(){e.parseHTMLTokensInPlainTextarea()}),this.data.tokenRenderingDebounce)),this.Field.getField().on("ua-tinymce-activate-text-view",(function(){setTimeout((function(){e.parseHTMLTokensInPlainTextarea()}),e.data.tokenRenderingDebounce)}))}},{key:"handlePlainTokensInTinyMCE",value:function(){var e=this;this.Field.getField().on("ua-tinymce-activate-visual-view",(function(){setTimeout((function(){e.parsePlainTokensInTinyMCE()}),e.data.tokenRenderingDebounce)}))}},{key:"parsePlainTokensInTinyMCE",value:function(){var e=this.editor.getContent({format:"raw"}),t=this.renderTextWithTokens(e,{template:'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="%2$s">%1$s</span>')});e!=t&&this.editor.setContent(t.innerHTML)}},{key:"parseHTMLTokensInPlainTextarea",value:function(){var e=this.Field.getField().val(),t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll(".".concat(this.data.tokenCSSClass));n.length>0&&(n.forEach((function(e){var t=e.dataset.tokenId;e.outerHTML="{{".concat(t,"}}")})),e=t.innerHTML,this.Field.getField().val(e))}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}}]),n}(o.default),w=function(){function e(t,n){v(this,e),this.Field=t,this.tokens=n,this.getData(),this.getElements(),this.createWrapper(),this.createFilter(),this.createGroupsOfTokens(),this.listenToggleButton(),this.resizeDropdownOnWindowResize(),this.resizeDropdownOnWindowScroll(),this.refreshOnFieldChange(),this.search(),this.shouldSupportFilters()&&this.setFilter(!0)}return d(e,[{key:"getData",value:function(){this.data={isOpen:!1,position:"below"}}},{key:"getElements",value:function(){this.$elements={wrapper:null,toggleButton:null,searchField:null,dropdown:null,allGroups:null,dropdownGroupsContainer:null,dropdownTokens:null,noResultsOption:null}}},{key:"createWrapper",value:function(){var e=a()('\n            <div class="form-variable">\n                <div class="form-variable__element">\n                    <div class="form-variable__render-container"></div>\n                    <div class="form-variable__toggle">\n                        <span class="uo-icon uo-icon--asterisk"></span>\n                    </div>\n                </div>\n                <div class="form-variable__dropdown">\n                    <div class="form-variable__dropdown-container">\n                        <div class="form-variable__search">\n                            <input \n                                class="form-variable__search-input" \n                                placeholder="'.concat(UncannyAutomator.i18n.tokens.search,'"\n                            >\n                        </div>\n                        <div class="form-variable__groups"></div>\n                    </div>\n                </div>\n            </div>\n        ')),t="textarea"==this.Field.type?this.Field.getField():this.Field.getFieldCM();e.insertAfter(t),e.find(".form-variable__render-container").append(t),this.$elements.wrapper=e,this.$elements.renderContainer=e.find(".form-variable__render-container"),this.$elements.searchFieldContainer=e.find(".form-variable__search"),this.$elements.searchField=e.find(".form-variable__search-input"),this.$elements.toggleButton=e.find(".form-variable__toggle"),this.$elements.dropdown=e.find(".form-variable__dropdown"),this.$elements.dropdownGroupsContainer=e.find(".form-variable__groups")}},{key:"createFilter",value:function(){var e=this;if(this.shouldSupportFilters()){var t=this.Field.attributes.fieldType,n=(0,r.isDefined)(UncannyAutomator.i18n.tokens.tokenType[t])?UncannyAutomator.i18n.tokens.tokenType[t]:t,i=a()('\n                <div class="form-variable__filter"></div>\n            '),o=new s.default("checkbox",{optionCode:"token__enableFilter",currentValue:!0,label:'<span class="form-variable__filter-label">'+(0,r.vsprintf)(UncannyAutomator.i18n.tokens.filter,['<span class="form-variable__filter-type">'.concat(n,"</span>")])+"<span>"}),l=o.createFormElement();i.prepend(l),this.$elements.searchFieldContainer.append(i),this.$elements.filterContainer=i,l.on("automator:field:change",(function(){o.getValue()?e.setFilter(!0):e.setFilter(!1)}))}}},{key:"createGroupsOfTokens",value:function(){var e=this,t=this.$elements.wrapper.find(".form-variable__groups");this.tokens.forEach((function(n){t.append(e.createIndividualGroupOfTokens(n))})),this.$elements.allGroups=t.find(".form-variable__group"),this.$elements.dropdownTokens=t.find(".form-variable__group-item"),this.$elements.noResultsOption=a()('\n            <div class="form-variable__group-item-no-results form-variable__group-item-no-results--hide">\n                <div class="form-variable__group-item-no-results-title">\n                    '.concat(UncannyAutomator.i18n.tokens.noResults,'\n                </div>\n                <div class="form-variable__group-item-no-results-description">\n                    ').concat(this.shouldSupportFilters()?UncannyAutomator.i18n.tokens.noResultsDescriptionWithFilter:UncannyAutomator.i18n.tokens.noResultsDescription,"\n                </div>\n            </div>\n        ")),t.append(this.$elements.noResultsOption)}},{key:"createIndividualGroupOfTokens",value:function(e){var t=this,n=a()('\n            <div \n                class="form-variable__group"\n                data-id="'.concat(e.id,'"\n            >\n                <div class="form-variable__group-source">\n                    <div class="form-variable-group-source__icon"></div>\n                    <div class="form-variable-group-source__description"></div>\n                    <div class="form-variable-group-source__toggle">\n                        <span class="form-variable-group-source__toggle-icon"></span>\n                    </div>\n                </div>\n                <span class="form-variable__group-children"></span>\n            </div>\n        ')),i=e.name;"string"==!c(i)&&(i.html.clone(),function(e){throw new TypeError('"groupName" is read-only')}()),n.find(".form-variable-group-source__description").append(e.name);var o=e.icon.clone();n.find(".form-variable-group-source__icon").append(o),n.find(".form-variable__group-source").on("click",(function(){n.toggleClass("form-variable__group--open")}));var u=n.find(".form-variable__group-children");return e.tokens.forEach((function(e){var n=a()('\n                <div \n                    class="form-variable__group-item"\n                    data-search="'.concat(e.name.trim().toLowerCase().replace(/\s/g,""),'"\n                    data-type="').concat(e.type,'"\n                >\n                    ').concat(e.name,"\n                </div>\n            "));"USERMETA:KEY"==e.id?n.on("click",(function(){t.close();var n=a()("<div></div>"),i=new s.default("text",{optionCode:"token__metaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKey,description:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKeyDescription,isRequired:!0});n.append(i.createFormElement());var o=new l.default({title:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.confirmButton}});o.setEvents({afterSetEvents:function(){o.show()},onConfirm:function(){var n=i.validate(),s=i.getValue();n.isValid&&((e=a().extend(!0,{},e)).id=e.id.replace("KEY",s),e.name=(0,r.vsprintf)(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[s]),t.Field.field.trigger("ua-add-token",e),o.destroy())},afterHide:function(){o.destroy()}})})):n.on("click",(function(){t.Field.field.trigger("ua-add-token",e),t.close()})),u.append(n)})),n}},{key:"listenToggleButton",value:function(){var e=this;this.$elements.toggleButton.on("click",(function(){e.data.isOpen?e.close():e.open()}))}},{key:"search",value:function(){var e=this;this.$elements.searchField.on("input",(0,r.throttle)((function(){var t=e.$elements.searchField.val();t=t.trim().toLowerCase().replace(/\s/g,""),(0,r.isEmpty)(t)?(e.$elements.allGroups.removeClass("form-variable__group--open"),e.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-search")):(e.$elements.allGroups.addClass("form-variable__group--open"),e.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-search"),e.$elements.dropdownTokens.filter((function(e,n){return-1!==n.dataset.search.search(t)})).removeClass("form-variable__group-item--hidden-by-search")),e.updateGroupsOfTokensVisibility()}),30))}},{key:"setFilter",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){this.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-filter");var n=this.$elements.dropdownTokens.filter((function(t,n){return("int"==n.dataset.type&&"float"==e.Field.attributes.fieldType?"float":n.dataset.type)==e.Field.attributes.fieldType}));n.removeClass("form-variable__group-item--hidden-by-filter")}else this.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-filter");this.updateGroupsOfTokensVisibility()}},{key:"updateGroupsOfTokensVisibility",value:function(){var e=!1;this.$elements.allGroups.removeClass("form-variable__group--without-available-tokens"),this.$elements.allGroups.filter((function(t,n){n.querySelectorAll(".form-variable__group-item:not(.form-variable__group-item--hidden-by-filter):not(.form-variable__group-item--hidden-by-search)").length>0?e=!0:n.classList.add("form-variable__group--without-available-tokens")})),e?this.$elements.noResultsOption.addClass("form-variable__group-item-no-results--hide"):this.$elements.noResultsOption.removeClass("form-variable__group-item-no-results--hide")}},{key:"open",value:function(){if(["date","time"].includes(this.Field.attributes.fieldType))try{this.Field.flatpickrInstance.close()}catch(e){}this.$elements.wrapper.addClass("form-variable--open"),this.data.isOpen=!0,this.closeWhenClickedOutside(),this.$elements.searchField.val("").trigger("input").css({"padding-right":"".concat(((0,r.isDefined)(this.$elements.filterContainer)?this.$elements.filterContainer.outerWidth():0)+12,"px")}),this.$elements.searchField.focus(),this.setDropdownDirection(),this.setDropdownHeight()}},{key:"close",value:function(){this.$elements.wrapper.removeClass("form-variable--open"),this.data.isOpen=!1,this.$elements.searchField.val("").trigger("input"),a()(document).off("mouseup.uap-token-selector-click-outside")}},{key:"destroy",value:function(){this.$elements.renderContainer.children().insertAfter(this.$elements.wrapper),this.$elements.wrapper.remove()}},{key:"closeWhenClickedOutside",value:function(){var e=this;a()(document).on("mouseup.uap-token-selector-click-outside",(function(t){var n=e.$elements.wrapper;n.is(t.target)||0!==n.has(t.target).length||e.close()}))}},{key:"getDropdownPosition",value:function(){var e=a()(window),t={};t.above=this.$elements.wrapper.offset().top-e.scrollTop(),t.below=e.height()-(t.above+this.$elements.wrapper.outerHeight()),"textarea"==this.Field.type&&(t.below=e.height()-(t.above+38)),this.$elements.dropdown.addClass("uo-realsize");var n=this.$elements.dropdown.outerHeight()+110;return this.$elements.dropdown.removeClass("uo-realsize"),"textarea"==this.Field.type?t.hasSpaceBelow=!0:t.hasSpaceBelow=t.below>=n,t}},{key:"setDropdownDirection",value:function(){var e=this.getDropdownPosition();this.$elements.wrapper.removeClass("form-variable--above form-variable--below"),e.below>e.above||e.hasSpaceBelow?(this.$elements.wrapper.addClass("form-variable--below"),this.data.position="below"):(this.$elements.wrapper.addClass("form-variable--above"),this.data.position="above")}},{key:"setDropdownHeight",value:function(){if(this.data.isOpen){var e=this.getDropdownPosition()[this.data.position]-this.$elements.searchField.outerHeight()-45;this.$elements.dropdownGroupsContainer.css({"max-height":"".concat(e,"px")})}}},{key:"focusSearchField",value:function(){this.$elements.searchField.focus()}},{key:"resizeDropdownOnWindowResize",value:function(){var e=this;a()(window).on("resize",(0,r.throttle)((function(){e.setDropdownDirection(),e.setDropdownHeight()}),20))}},{key:"resizeDropdownOnWindowScroll",value:function(){var e=this;a()(window).on("scroll",(0,r.debounce)((function(){e.setDropdownDirection(),e.setDropdownHeight()}),300))}},{key:"refreshOnFieldChange",value:function(){var e=this;this.Field.formElement.on("automator:field:change",(function(){e.setDropdownDirection(),e.setDropdownHeight()}))}},{key:"shouldSupportFilters",value:function(){var e=this.Field.attributes.fieldType;return["email","int","float","url","date","time"].includes(e)}}]),e}()},"./src/components/tokens/tokens.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>Tokens});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("jquery"),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_Utilities__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Utilities.js");function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,a,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Tokens=function(){function Tokens(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Tokens),this.saveData(e,t,n),this.getData()}return _createClass(Tokens,[{key:"saveData",value:function(e,t,n){this.itemType=e,this.fieldType=t,this.options=Object.assign({includeGroupName:!0,includeGroupIcon:!0,includeGroupTokens:!0},n),this.tokensRegEx=new RegExp(/\{\{(.*?)\}\}/gm)}},{key:"getData",value:function(){this.tokens=this.getAllTokens()}},{key:"getAllTokens",value:function(){var e=[],t=this.getCommonTokens();t.tokens.length>0&&e.push(t);var n=this.getAdvancedTokens();n.tokens.length>0&&e.push(n);var i=this.getItemsTokens();return[].concat(_toConsumableArray(e),_toConsumableArray(i))}},{key:"getCommonTokens",value:function(){var e={id:"common"};return this.options.includeGroupName&&(e.name=UncannyAutomator.i18n.tokens.global.common),this.options.includeGroupIcon&&(e.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n                <i class="uo-icon uo-icon--bolt"></i>\n            ')),this.options.includeGroupTokens&&(e.tokens=[{id:"site_name",type:"text",name:UncannyAutomator.i18n.tokens.global.siteName,cacheable:!0}],("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&e.tokens.push({id:"user_id",type:"int",name:UncannyAutomator.i18n.tokens.global.userID,cacheable:!0},{id:"user_username",type:"text",name:UncannyAutomator.i18n.tokens.global.userUsername,cacheable:!0},{id:"user_firstname",type:"text",name:UncannyAutomator.i18n.tokens.global.userFirstName,cacheable:!0},{id:"user_lastname",type:"text",name:UncannyAutomator.i18n.tokens.global.userLastName,cacheable:!0},{id:"user_email",type:"email",name:UncannyAutomator.i18n.tokens.global.userEmail,cacheable:!0},{id:"user_displayname",type:"text",name:UncannyAutomator.i18n.tokens.global.userDisplay,cacheable:!0},{id:"reset_pass_link",type:"url",name:UncannyAutomator.i18n.tokens.global.userResetPassLink,cacheable:!0}),e.tokens.push({id:"admin_email",type:"email",name:UncannyAutomator.i18n.tokens.global.adminEmail,cacheable:!0},{id:"site_url",type:"url",name:UncannyAutomator.i18n.tokens.global.siteUrl,cacheable:!0},{id:"recipe_name",type:"text",name:UncannyAutomator.i18n.tokens.global.recipeName,cacheable:!0},{id:"current_date",type:"text",name:UncannyAutomator.i18n.tokens.global.currentDate,cacheable:!0},{id:"current_time",type:"text",name:UncannyAutomator.i18n.tokens.global.currentTime,cacheable:!0})),e}},{key:"getAdvancedTokens",value:function(){var e={id:"advanced",tokens:[]};return this.options.includeGroupName&&(e.name=UncannyAutomator.i18n.tokens.global.advanced),this.options.includeGroupIcon&&(e.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n                <i class="uo-icon uo-icon--bolt"></i>\n            ')),this.options.includeGroupTokens&&("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&(e.tokens.push({id:"USERMETA:KEY",type:"text",name:UncannyAutomator.i18n.tokens.global.userMetaKey,cacheable:!1}),(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(UncannyAutomator.wp)&&"1"===UncannyAutomator.wp&&e.tokens.push({id:"AUTOLOGINLINK",type:"text",name:UncannyAutomator.i18n.tokens.global.autoLoginLink,cacheable:!0})),e}},{key:"getItemsTokens",value:function(){var e=this,t=[],n=UncannyAutomator.recipe.items;return(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(this.itemType)&&(n={},["action","closure","user-selector"].includes(this.itemType)&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.itemsObject)("get",{filter:{itemType:"trigger"}}))),"closure"==this.itemType&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.itemsObject)("get",{filter:{itemType:"action"}})))),Object.entries(n).forEach((function(n){var i=_slicedToArray(n,2),a=(i[0],i[1]),o=e.getItemTokens(a);(o.tokens.length>0||!e.options.includeGroupTokens)&&t.push(o)})),t}},{key:"getItemTokens",value:function getItemTokens(item){var tokensGroup={id:item.itemCode,integrationId:item.integrationCode};if(this.options.includeGroupName){var itemSentence=item.sentence;item.isMissing||(itemSentence=(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.getGlobalItem)(item.integrationCode,item.itemType,item.itemCode).sentence),tokensGroup.name=(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.parseStringWithTokens)(item,itemSentence,UncannyAutomator.recipe.items[item.id].meta,!1).html}if(this.options.includeGroupIcon){var $icon;if((0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(UncannyAutomator.integrations[item.integrationCode])){var integration=UncannyAutomator.integrations[item.integrationCode];(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(integration.icon_svg)?$icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t                    <img \n\t                        src="'.concat(integration.icon_svg,'" \n\t                        alt="').concat(integration.name,'"\n\t                    >\n\t                ')):(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(integration.icon_16)&&(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(integration.icon_32)&&($icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t                    <img \n\t                        src="'.concat(integration.icon_16,'" \n\t                        srcset="').concat((0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.vsprintf)("%s 1x, %s 2x",[integration.icon_16,integration.icon_32]),'"\n\t                        alt="').concat(integration.name,'"\n\t                    >\n\t                ')))}tokensGroup.icon=$icon}if(this.options.includeGroupTokens){var itemTokens=[];if(Object.entries(item.options).forEach((function(e){var t=_slicedToArray(e,2);t[0],t[1].fields.forEach((function(e){var t=e.getAttributes();"repeater"==t.fieldType?e.fieldRows.forEach((function(e,n){var i=n;e.forEach((function(e){itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(t.optionCode,":").concat(i,":").concat(e.getAttributes().optionCode),name:"".concat(t.tokenName," - ").concat((0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.vsprintf)(UncannyAutomator.i18n.rowNumber,[i+1])," - ").concat(e.getAttributes().tokenName),type:"select"==e.getAttributes().fieldType||"textarea"==e.getAttributes().fieldType?"text":e.getAttributes().fieldType,value:e.getValue(),fieldId:e.getAttributes().optionCode,itemID:item.id,cacheable:!1})}))})):"group"==t.fieldType||((0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(t.customFieldTokens)&&(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isObject)(t.customFieldTokens)?Object.entries(t.customFieldTokens).forEach((function(n){var i=_slicedToArray(n,2),a=i[0],o=i[1];itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(a),name:o,type:"select"==t.fieldType||"textarea"==t.fieldType?"text":t.fieldType,value:e.getValue(),fieldId:t.optionCode,itemID:item.id,cacheable:!0})})):itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(t.optionCode),name:t.tokenName,type:"select"==t.fieldType||"textarea"==t.fieldType?"text":t.fieldType,value:e.getValue(),fieldId:t.optionCode,itemID:item.id,cacheable:!0}))}))})),item.tokens.forEach((function(e){itemTokens.push({id:"".concat(item.id,":").concat(e.tokenIdentifier,":").concat(e.tokenId),name:e.tokenName,type:(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(e.tokenType)?e.tokenType:"text",itemID:item.id,cacheable:!0})})),tokensGroup.tokens=itemTokens,!(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(item.filterTokens))try{var filterTokens=eval("(".concat(item.filterTokens.replace("<script>","").replace("<\/script>","").trim(),")"));itemTokens=filterTokens(tokensGroup,item)}catch(e){console.log(e),console.log(item.filterTokens)}}return tokensGroup}},{key:"filterTokensByType",value:function(e){var t=this;return(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(this.fieldType)&&(["text","textarea","url"].includes(this.fieldType)||(e=e.filter((function(e){var n=e.type;return"float"==t.fieldType&&"int"==n&&(n="float"),t.fieldType==n})))),e}},{key:"createTokenDOMNode",value:function(e){var t=null,n=this.getTokenDataByID(e);if((0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(n)){if((0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(UncannyAutomator.cache.tokens[n.id]))t=UncannyAutomator.cache.tokens[n.id];else{(t=document.createElement("span")).classList.add("uap-token"),t.appendChild(n.group.icon[0].cloneNode());var i=document.createElement("span");i.classList.add("uap-token__name"),i.innerHTML=n.name,t.appendChild(i),n.cacheable&&(UncannyAutomator.cache.tokens[n.id]=t)}t=t.cloneNode(!0)}else{(t=document.createElement("span")).classList.add("uap-token","uap-token--invalid");var a=document.createElement("i");a.classList.add("uo-icon","uo-icon--exclamation"),t.appendChild(a);var o=document.createElement("span");o.classList.add("uap-token__name"),o.innerHTML=e,t.appendChild(o)}return t}},{key:"getTokenDataByID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n=null;if(e.startsWith("USERMETA:")&&(e="USERMETA:KEY"),(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(e)||this.tokens.some((function(t){if(n=t.tokens.reduce((function(t,n){return n.id==e?n:t}),null),(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(n))return n.group={id:t.id,name:t.name,icon:t.icon},!0})),(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isDefined)(n)&&e.startsWith("USERMETA:")){n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},n);var i=t.replace("USERMETA:","");n.id=n.id.replace("KEY",i),n.name=(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.vsprintf)(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[i])}return n}},{key:"renderTextWithTokens",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({template:""},n);var i=!(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.isEmpty)(n.template),a=document.createElement("span");return e=e.replace(this.tokensRegEx,(function(e,a){var o=t.createTokenDOMNode(a).outerHTML;return i&&(o=(0,_Utilities__WEBPACK_IMPORTED_MODULE_1__.vsprintf)(n.template,[o,a])),o})),a.innerHTML=e,a}}]),Tokens}()},"./node_modules/flatpickr/dist/esm/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var i=n("./node_modules/flatpickr/dist/esm/types/options.js"),a=n("./node_modules/flatpickr/dist/esm/l10n/default.js"),o=n("./node_modules/flatpickr/dist/esm/utils/index.js"),r=n("./node_modules/flatpickr/dist/esm/utils/dom.js"),s=n("./node_modules/flatpickr/dist/esm/utils/dates.js"),l=n("./node_modules/flatpickr/dist/esm/utils/formatting.js");function c(e,t){const n={config:Object.assign(Object.assign({},i.defaults),d.defaultConfig),l10n:a.default};function c(e){return e.bind(n)}function u(){const e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){const t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function p(e){if(0===n.selectedDates.length){const e=void 0===n.config.minDate||(0,s.compareDates)(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),t=(0,s.getDefaultHours)(n.config);e.setHours(t.hours,t.minutes,t.seconds,e.getMilliseconds()),n.selectedDates=[e],n.latestSelectedDateObj=e}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();const t="keydown"===e.type,i=(0,r.getEventTarget)(e),a=i;void 0!==n.amPM&&i===n.amPM&&(n.amPM.textContent=n.l10n.amPM[(0,o.int)(n.amPM.textContent===n.l10n.amPM[0])]);const s=parseFloat(a.getAttribute("min")),l=parseFloat(a.getAttribute("max")),c=parseFloat(a.getAttribute("step")),u=parseInt(a.value,10);let d=u+c*(e.delta||(t?38===e.which?1:-1:0));if(void 0!==a.value&&2===a.value.length){const e=a===n.hourElement,t=a===n.minuteElement;d<s?(d=l+d+(0,o.int)(!e)+((0,o.int)(e)&&(0,o.int)(!n.amPM)),t&&k(void 0,-1,n.hourElement)):d>l&&(d=a===n.hourElement?d-l-(0,o.int)(!n.amPM):s,t&&k(void 0,1,n.hourElement)),n.amPM&&e&&(1===c?d+u===23:Math.abs(d-u)>c)&&(n.amPM.textContent=n.l10n.amPM[(0,o.int)(n.amPM.textContent===n.l10n.amPM[0])]),a.value=(0,o.pad)(d)}}(e);const t=n._input.value;m(),ae(),n._input.value!==t&&n._debouncedChange()}function m(){if(void 0===n.hourElement||void 0===n.minuteElement)return;let e=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(n.minuteElement.value,10)||0)%60,i=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;var a,r;void 0!==n.amPM&&(a=e,r=n.amPM.textContent,e=a%12+12*(0,o.int)(r===n.l10n.amPM[1]));const l=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===(0,s.compareDates)(n.latestSelectedDateObj,n.config.minDate,!0);if(void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===(0,s.compareDates)(n.latestSelectedDateObj,n.config.maxDate,!0)){const a=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;e=Math.min(e,a.getHours()),e===a.getHours()&&(t=Math.min(t,a.getMinutes())),t===a.getMinutes()&&(i=Math.min(i,a.getSeconds()))}if(l){const a=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;e=Math.max(e,a.getHours()),e===a.getHours()&&t<a.getMinutes()&&(t=a.getMinutes()),t===a.getMinutes()&&(i=Math.max(i,a.getSeconds()))}h(e,t,i)}function f(e){const t=e||n.latestSelectedDateObj;t&&h(t.getHours(),t.getMinutes(),t.getSeconds())}function h(e,t,i){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,i||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=(0,o.pad)(n.config.time_24hr?e:(12+e)%12+12*(0,o.int)(e%12==0)),n.minuteElement.value=(0,o.pad)(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[(0,o.int)(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=(0,o.pad)(i)))}function g(e){const t=(0,r.getEventTarget)(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&L(n)}function y(e,t,i,a){return t instanceof Array?t.forEach((t=>y(e,t,i,a))):e instanceof Array?e.forEach((e=>y(e,t,i,a))):(e.addEventListener(t,i,a),void n._handlers.push({remove:()=>e.removeEventListener(t,i)}))}function v(){Q("onChange")}function _(e,t){const i=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),a=n.currentYear,o=n.currentMonth;try{void 0!==i&&(n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth())}catch(e){e.message="Invalid date supplied: "+i,n.config.errorHandler(e)}t&&n.currentYear!==a&&(Q("onYearChange"),E()),!t||n.currentYear===a&&n.currentMonth===o||Q("onMonthChange"),n.redraw()}function b(e){const t=(0,r.getEventTarget)(e);~t.className.indexOf("arrow")&&k(e,t.classList.contains("arrowUp")?1:-1)}function k(e,t,n){const i=e&&(0,r.getEventTarget)(e),a=n||i&&i.parentNode&&i.parentNode.firstChild,o=ee("increment");o.delta=t,a&&a.dispatchEvent(o)}function w(e,t,i,a){const o=R(t,!0),l=(0,r.createElement)("span","flatpickr-day "+e,t.getDate().toString());return l.dateObj=t,l.$i=a,l.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===(0,s.compareDates)(t,n.now)&&(n.todayDateElem=l,l.classList.add("today"),l.setAttribute("aria-current","date")),o?(l.tabIndex=-1,te(t)&&(l.classList.add("selected"),n.selectedDateElem=l,"range"===n.config.mode&&((0,r.toggleClass)(l,"startRange",n.selectedDates[0]&&0===(0,s.compareDates)(t,n.selectedDates[0],!0)),(0,r.toggleClass)(l,"endRange",n.selectedDates[1]&&0===(0,s.compareDates)(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&l.classList.add("inRange")))):l.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&(0,s.compareDates)(e,n.selectedDates[0])>=0&&(0,s.compareDates)(e,n.selectedDates[1])<=0}(t)&&!te(t)&&l.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&i%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),Q("onDayCreate",l),l}function T(e){e.focus(),"range"===n.config.mode&&H(e)}function A(e){const t=e>0?0:n.config.showMonths-1,i=e>0?n.config.showMonths:-1;for(let a=t;a!=i;a+=e){const t=n.daysContainer.children[a],i=e>0?0:t.children.length-1,o=e>0?t.children.length:-1;for(let n=i;n!=o;n+=e){const e=t.children[n];if(-1===e.className.indexOf("hidden")&&R(e.dateObj))return e}}}function C(e,t){const i=V(document.activeElement||document.body),a=void 0!==e?e:i?document.activeElement:void 0!==n.selectedDateElem&&V(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&V(n.todayDateElem)?n.todayDateElem:A(t>0?1:-1);void 0===a?n._input.focus():i?function(e,t){const i=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,a=t>0?n.config.showMonths:-1,o=t>0?1:-1;for(let r=i-n.currentMonth;r!=a;r+=o){const a=n.daysContainer.children[r],s=i-n.currentMonth===r?e.$i+t:t<0?a.children.length-1:0,l=a.children.length;for(let n=s;n>=0&&n<l&&n!=(t>0?l:-1);n+=o){const i=a.children[n];if(-1===i.className.indexOf("hidden")&&R(i.dateObj)&&Math.abs(e.$i-n)>=Math.abs(t))return T(i)}}n.changeMonth(o),C(A(o),0)}(a,t):T(a)}function D(e,t){const i=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,a=n.utils.getDaysInMonth((t-1+12)%12,e),o=n.utils.getDaysInMonth(t,e),s=window.document.createDocumentFragment(),l=n.config.showMonths>1,c=l?"prevMonthDay hidden":"prevMonthDay",u=l?"nextMonthDay hidden":"nextMonthDay";let d=a+1-i,p=0;for(;d<=a;d++,p++)s.appendChild(w(c,new Date(e,t-1,d),d,p));for(d=1;d<=o;d++,p++)s.appendChild(w("",new Date(e,t,d),d,p));for(let a=o+1;a<=42-i&&(1===n.config.showMonths||p%7!=0);a++,p++)s.appendChild(w(u,new Date(e,t+1,a%o),a,p));const m=(0,r.createElement)("div","dayContainer");return m.appendChild(s),m}function U(){if(void 0===n.daysContainer)return;(0,r.clearNode)(n.daysContainer),n.weekNumbers&&(0,r.clearNode)(n.weekNumbers);const e=document.createDocumentFragment();for(let t=0;t<n.config.showMonths;t++){const i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),e.appendChild(D(i.getFullYear(),i.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&H()}function E(){if(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)return;const e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(let t=0;t<12;t++){if(!e(t))continue;const i=(0,r.createElement)("option","flatpickr-monthDropdown-month");i.value=new Date(n.currentYear,t).getMonth().toString(),i.textContent=(0,l.monthToStr)(t,n.config.shorthandCurrentMonth,n.l10n),i.tabIndex=-1,n.currentMonth===t&&(i.selected=!0),n.monthsDropdownContainer.appendChild(i)}}function x(){const e=(0,r.createElement)("div","flatpickr-month"),t=window.document.createDocumentFragment();let i;n.config.showMonths>1||"static"===n.config.monthSelectorType?i=(0,r.createElement)("span","cur-month"):(n.monthsDropdownContainer=(0,r.createElement)("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),y(n.monthsDropdownContainer,"change",(e=>{const t=(0,r.getEventTarget)(e),i=parseInt(t.value,10);n.changeMonth(i-n.currentMonth),Q("onMonthChange")})),E(),i=n.monthsDropdownContainer);const a=(0,r.createNumberInput)("cur-year",{tabindex:"-1"}),o=a.getElementsByTagName("input")[0];o.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&o.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(o.setAttribute("max",n.config.maxDate.getFullYear().toString()),o.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());const s=(0,r.createElement)("div","flatpickr-current-month");return s.appendChild(i),s.appendChild(a),t.appendChild(s),e.appendChild(t),{container:e,yearElement:o,monthElement:i}}function M(){(0,r.clearNode)(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(let e=n.config.showMonths;e--;){const e=x();n.yearElements.push(e.yearElement),n.monthElements.push(e.monthElement),n.monthNav.appendChild(e.container)}n.monthNav.appendChild(n.nextMonthNav)}function O(){n.weekdayContainer?(0,r.clearNode)(n.weekdayContainer):n.weekdayContainer=(0,r.createElement)("div","flatpickr-weekdays");for(let e=n.config.showMonths;e--;){const e=(0,r.createElement)("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(e)}return S(),n.weekdayContainer}function S(){if(!n.weekdayContainer)return;const e=n.l10n.firstDayOfWeek;let t=[...n.l10n.weekdays.shorthand];e>0&&e<t.length&&(t=[...t.splice(e,t.length),...t.splice(0,e)]);for(let e=n.config.showMonths;e--;)n.weekdayContainer.children[e].innerHTML=`\n      <span class='flatpickr-weekday'>\n        ${t.join("</span><span class='flatpickr-weekday'>")}\n      </span>\n      `}function I(e,t=!0){const i=t?e:e-n.currentMonth;i<0&&!0===n._hidePrevMonthArrow||i>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=i,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,Q("onYearChange"),E()),U(),Q("onMonthChange"),ne())}function j(e){return!(!n.config.appendTo||!n.config.appendTo.contains(e))||n.calendarContainer.contains(e)}function F(e){if(n.isOpen&&!n.config.inline){const t=(0,r.getEventTarget)(e),i=j(t),a=t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)),o="blur"===e.type?a&&e.relatedTarget&&!j(e.relatedTarget):!a&&!i&&!j(e.relatedTarget),s=!n.config.ignoredFocusElements.some((e=>e.contains(t)));o&&s&&(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&p(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&(n.clear(!1),n.redraw()))}}function L(e){if(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())return;const t=e,i=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),i&&(n.redraw(),Q("onYearChange"),E())}function R(e,t=!0){var i;const a=n.parseDate(e,void 0,t);if(n.config.minDate&&a&&(0,s.compareDates)(a,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&a&&(0,s.compareDates)(a,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===a)return!1;const o=!!n.config.enable,r=null!==(i=n.config.enable)&&void 0!==i?i:n.config.disable;for(let e,t=0;t<r.length;t++){if(e=r[t],"function"==typeof e&&e(a))return o;if(e instanceof Date&&void 0!==a&&e.getTime()===a.getTime())return o;if("string"==typeof e){const t=n.parseDate(e,void 0,!0);return t&&t.getTime()===a.getTime()?o:!o}if("object"==typeof e&&void 0!==a&&e.from&&e.to&&a.getTime()>=e.from.getTime()&&a.getTime()<=e.to.getTime())return o}return!o}function V(e){return void 0!==n.daysContainer&&-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e)}function P(e){e.target!==n._input||!(n.selectedDates.length>0||n._input.value.length>0)||e.relatedTarget&&j(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function N(t){const i=(0,r.getEventTarget)(t),a=n.config.wrap?e.contains(i):i===n._input,o=n.config.allowInput,s=n.isOpen&&(!o||!a),l=n.config.inline&&a&&!o;if(13===t.keyCode&&a){if(o)return n.setDate(n._input.value,!0,i===n.altInput?n.config.altFormat:n.config.dateFormat),i.blur();n.open()}else if(j(i)||s||l){const e=!!n.timeContainer&&n.timeContainer.contains(i);switch(t.keyCode){case 13:e?(t.preventDefault(),p(),G()):z(t);break;case 27:t.preventDefault(),G();break;case 8:case 46:a&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(e||a)n.hourElement&&n.hourElement.focus();else if(t.preventDefault(),void 0!==n.daysContainer&&(!1===o||document.activeElement&&V(document.activeElement))){const e=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),I(e),C(A(1),0)):C(void 0,e)}break;case 38:case 40:t.preventDefault();const r=40===t.keyCode?1:-1;n.daysContainer&&void 0!==i.$i||i===n.input||i===n.altInput?t.ctrlKey?(t.stopPropagation(),L(n.currentYear-r),C(A(1),0)):e||C(void 0,7*r):i===n.currentYearElement?L(n.currentYear-r):n.config.enableTime&&(!e&&n.hourElement&&n.hourElement.focus(),p(t),n._debouncedChange());break;case 9:if(e){const e=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((e=>e)),a=e.indexOf(i);if(-1!==a){const i=e[a+(t.shiftKey?-1:1)];t.preventDefault(),(i||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(i)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&i===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],m(),ae();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],m(),ae()}(a||j(i))&&Q("onKeyDown",t)}function H(e){if(1!==n.selectedDates.length||e&&(!e.classList.contains("flatpickr-day")||e.classList.contains("flatpickr-disabled")))return;const t=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),i=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),a=Math.min(t,n.selectedDates[0].getTime()),o=Math.max(t,n.selectedDates[0].getTime());let r=!1,l=0,c=0;for(let e=a;e<o;e+=s.duration.DAY)R(new Date(e),!0)||(r=r||e>a&&e<o,e<i&&(!l||e>l)?l=e:e>i&&(!c||e<c)&&(c=e));for(let a=0;a<n.config.showMonths;a++){const o=n.daysContainer.children[a];for(let a=0,u=o.children.length;a<u;a++){const u=o.children[a],d=u.dateObj.getTime(),p=l>0&&d<l||c>0&&d>c;p?(u.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((e=>{u.classList.remove(e)}))):r&&!p||(["startRange","inRange","endRange","notAllowed"].forEach((e=>{u.classList.remove(e)})),void 0!==e&&(e.classList.add(t<=n.selectedDates[0].getTime()?"startRange":"endRange"),i<t&&d===i?u.classList.add("startRange"):i>t&&d===i&&u.classList.add("endRange"),d>=l&&(0===c||d<=c)&&(0,s.isBetween)(d,i,t)&&u.classList.add("inRange")))}}}function B(){!n.isOpen||n.config.static||n.config.inline||K()}function q(e){return t=>{const i=n.config[`_${e}Date`]=n.parseDate(t,n.config.dateFormat),a=n.config[`_${"min"===e?"max":"min"}Date`];void 0!==i&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((e=>R(e))),n.selectedDates.length||"min"!==e||f(i),ae()),n.daysContainer&&(Y(),void 0!==i?n.currentYearElement[e]=i.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!a&&void 0!==i&&a.getFullYear()===i.getFullYear())}}function W(){return n.config.wrap?e.querySelector("[data-input]"):e}function $(){"object"!=typeof n.config.locale&&void 0===d.l10ns[n.config.locale]&&n.config.errorHandler(new Error(`flatpickr: invalid locale ${n.config.locale}`)),n.l10n=Object.assign(Object.assign({},d.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?d.l10ns[n.config.locale]:void 0),l.tokenRegex.K=`(${n.l10n.amPM[0]}|${n.l10n.amPM[1]}|${n.l10n.amPM[0].toLowerCase()}|${n.l10n.amPM[1].toLowerCase()})`,void 0===Object.assign(Object.assign({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===d.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=(0,s.createDateFormatter)(n),n.parseDate=(0,s.createDateParser)({config:n.config,l10n:n.l10n})}function K(e){if("function"==typeof n.config.position)return void n.config.position(n,e);if(void 0===n.calendarContainer)return;Q("onPreCalendarPosition");const t=e||n._positionElement,i=Array.prototype.reduce.call(n.calendarContainer.children,((e,t)=>e+t.offsetHeight),0),a=n.calendarContainer.offsetWidth,o=n.config.position.split(" "),s=o[0],l=o.length>1?o[1]:null,c=t.getBoundingClientRect(),u=window.innerHeight-c.bottom,d="above"===s||"below"!==s&&u<i&&c.top>i,p=window.pageYOffset+c.top+(d?-i-2:t.offsetHeight+2);if((0,r.toggleClass)(n.calendarContainer,"arrowTop",!d),(0,r.toggleClass)(n.calendarContainer,"arrowBottom",d),n.config.inline)return;let m=window.pageXOffset+c.left,f=!1,h=!1;"center"===l?(m-=(a-c.width)/2,f=!0):"right"===l&&(m-=a-c.width,h=!0),(0,r.toggleClass)(n.calendarContainer,"arrowLeft",!f&&!h),(0,r.toggleClass)(n.calendarContainer,"arrowCenter",f),(0,r.toggleClass)(n.calendarContainer,"arrowRight",h);const g=window.document.body.offsetWidth-(window.pageXOffset+c.right),y=m+a>window.document.body.offsetWidth,v=g+a>window.document.body.offsetWidth;if((0,r.toggleClass)(n.calendarContainer,"rightMost",y),!n.config.static)if(n.calendarContainer.style.top=`${p}px`,y)if(v){const e=function(){let e=null;for(let t=0;t<document.styleSheets.length;t++){const n=document.styleSheets[t];try{n.cssRules}catch(e){continue}e=n;break}return null!=e?e:function(){const e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===e)return;const t=window.document.body.offsetWidth,i=Math.max(0,t/2-a/2),o=".flatpickr-calendar.centerMost:before",s=".flatpickr-calendar.centerMost:after",l=e.cssRules.length,u=`{left:${c.left}px;right:auto;}`;(0,r.toggleClass)(n.calendarContainer,"rightMost",!1),(0,r.toggleClass)(n.calendarContainer,"centerMost",!0),e.insertRule(`${o},${s}${u}`,l),n.calendarContainer.style.left=`${i}px`,n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=`${g}px`;else n.calendarContainer.style.left=`${m}px`,n.calendarContainer.style.right="auto"}function Y(){n.config.noCalendar||n.isMobile||(E(),ne(),U())}function G(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function z(e){e.preventDefault(),e.stopPropagation();const t=(0,r.findParent)((0,r.getEventTarget)(e),(e=>e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")));if(void 0===t)return;const i=t,a=n.latestSelectedDateObj=new Date(i.dateObj.getTime()),o=(a.getMonth()<n.currentMonth||a.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=i,"single"===n.config.mode)n.selectedDates=[a];else if("multiple"===n.config.mode){const e=te(a);e?n.selectedDates.splice(parseInt(e),1):n.selectedDates.push(a)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=a,n.selectedDates.push(a),0!==(0,s.compareDates)(a,n.selectedDates[0],!0)&&n.selectedDates.sort(((e,t)=>e.getTime()-t.getTime())));if(m(),o){const e=n.currentYear!==a.getFullYear();n.currentYear=a.getFullYear(),n.currentMonth=a.getMonth(),e&&(Q("onYearChange"),E()),Q("onMonthChange")}if(ne(),U(),ae(),o||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():T(i),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){const e="single"===n.config.mode&&!n.config.enableTime,t="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(e||t)&&G()}v()}n.parseDate=(0,s.createDateParser)({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=y,n._setHoursFromDate=f,n._positionCalendar=K,n.changeMonth=I,n.changeYear=L,n.clear=function(e=!0,t=!0){if(n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){const{hours:e,minutes:t,seconds:i}=(0,s.getDefaultHours)(n.config);h(e,t,i)}n.redraw(),e&&Q("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),Q("onClose")},n._createElement=r.createElement,n.destroy=function(){void 0!==n.config&&Q("onDestroy");for(let e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){const e=n.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((e=>{try{delete n[e]}catch(e){}}))},n.isEnabled=R,n.jumpToDate=_,n.open=function(e,t=n._positionElement){if(!0===n.isMobile){if(e){e.preventDefault();const t=(0,r.getEventTarget)(e);t&&t.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void Q("onOpen")}if(n._input.disabled||n.config.inline)return;const i=n.isOpen;n.isOpen=!0,i||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),Q("onOpen"),K(t)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((()=>n.hourElement.select()),50))},n.redraw=Y,n.set=function(e,t){if(null!==e&&"object"==typeof e){Object.assign(n.config,e);for(const t in e)void 0!==J[t]&&J[t].forEach((e=>e()))}else n.config[e]=t,void 0!==J[e]?J[e].forEach((e=>e())):i.HOOKS.indexOf(e)>-1&&(n.config[e]=(0,o.arrayify)(t));n.redraw(),ae(!0)},n.setDate=function(e,t=!1,i=n.config.dateFormat){if(0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);X(e,i),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),_(void 0,t),f(),0===n.selectedDates.length&&n.clear(!1),ae(t),t&&Q("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};const J={locale:[$,S],showMonths:[M,u,O],minDate:[_],maxDate:[_],clickOpens:[()=>{!0===n.config.clickOpens?(y(n._input,"focus",n.open),y(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function X(e,t){let i=[];if(e instanceof Array)i=e.map((e=>n.parseDate(e,t)));else if(e instanceof Date||"number"==typeof e)i=[n.parseDate(e,t)];else if("string"==typeof e)switch(n.config.mode){case"single":case"time":i=[n.parseDate(e,t)];break;case"multiple":i=e.split(n.config.conjunction).map((e=>n.parseDate(e,t)));break;case"range":i=e.split(n.l10n.rangeSeparator).map((e=>n.parseDate(e,t)))}else n.config.errorHandler(new Error(`Invalid date supplied: ${JSON.stringify(e)}`));n.selectedDates=n.config.allowInvalidPreload?i:i.filter((e=>e instanceof Date&&R(e,!1))),"range"===n.config.mode&&n.selectedDates.sort(((e,t)=>e.getTime()-t.getTime()))}function Z(e){return e.slice().map((e=>"string"==typeof e||"number"==typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e)).filter((e=>e))}function Q(e,t){if(void 0===n.config)return;const i=n.config[e];if(void 0!==i&&i.length>0)for(let e=0;i[e]&&e<i.length;e++)i[e](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(ee("change")),n.input.dispatchEvent(ee("input")))}function ee(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function te(e){for(let t=0;t<n.selectedDates.length;t++)if(0===(0,s.compareDates)(n.selectedDates[t],e))return""+t;return!1}function ne(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(((e,t)=>{const i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=(0,l.monthToStr)(i.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=i.getMonth().toString(),e.value=i.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function ie(e){return n.selectedDates.map((t=>n.formatDate(t,e))).filter(((e,t,i)=>"range"!==n.config.mode||n.config.enableTime||i.indexOf(e)===t)).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function ae(e=!0){void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=ie(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=ie(n.config.altFormat)),!1!==e&&Q("onValueUpdate")}function oe(e){const t=(0,r.getEventTarget)(e),i=n.prevMonthNav.contains(t),a=n.nextMonthNav.contains(t);i||a?I(i?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){const a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],r=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e.dataset||{}))),t),s={};n.config.parseDate=r.parseDate,n.config.formatDate=r.formatDate,Object.defineProperty(n.config,"enable",{get:()=>n.config._enable,set:e=>{n.config._enable=Z(e)}}),Object.defineProperty(n.config,"disable",{get:()=>n.config._disable,set:e=>{n.config._disable=Z(e)}});const l="time"===r.mode;if(!r.dateFormat&&(r.enableTime||l)){const e=d.defaultConfig.dateFormat||i.defaults.dateFormat;s.dateFormat=r.noCalendar||l?"H:i"+(r.enableSeconds?":S":""):e+" H:i"+(r.enableSeconds?":S":"")}if(r.altInput&&(r.enableTime||l)&&!r.altFormat){const e=d.defaultConfig.altFormat||i.defaults.altFormat;s.altFormat=r.noCalendar||l?"h:i"+(r.enableSeconds?":S K":" K"):e+` h:i${r.enableSeconds?":S":""} K`}Object.defineProperty(n.config,"minDate",{get:()=>n.config._minDate,set:q("min")}),Object.defineProperty(n.config,"maxDate",{get:()=>n.config._maxDate,set:q("max")});const u=e=>t=>{n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")};Object.defineProperty(n.config,"minTime",{get:()=>n.config._minTime,set:u("min")}),Object.defineProperty(n.config,"maxTime",{get:()=>n.config._maxTime,set:u("max")}),"time"===r.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,s,r);for(let e=0;e<a.length;e++)n.config[a[e]]=!0===n.config[a[e]]||"true"===n.config[a[e]];i.HOOKS.filter((e=>void 0!==n.config[e])).forEach((e=>{n.config[e]=(0,o.arrayify)(n.config[e]||[]).map(c)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let e=0;e<n.config.plugins.length;e++){const t=n.config.plugins[e](n)||{};for(const e in t)i.HOOKS.indexOf(e)>-1?n.config[e]=(0,o.arrayify)(t[e]).map(c).concat(n.config[e]):void 0===r[e]&&(n.config[e]=t[e])}r.altInputClass||(n.config.altInputClass=W().className+" "+n.config.altInputClass),Q("onParseConfig")}(),$(),n.input=W(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=(0,r.createElement)(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),n._positionElement=n.config.positionElement||n._input):n.config.errorHandler(new Error("Invalid input element specified")),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;const e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&X(e,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:(e=n.currentMonth,t=n.currentYear)=>1===e&&(t%4==0&&t%100!=0||t%400==0)?29:n.l10n.daysInMonth[e]},n.isMobile||function(){const e=window.document.createDocumentFragment();if(n.calendarContainer=(0,r.createElement)("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=(0,r.createElement)("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=(0,r.createElement)("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=(0,r.createElement)("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,M(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:()=>n.__hidePrevMonthArrow,set(e){n.__hidePrevMonthArrow!==e&&((0,r.toggleClass)(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:()=>n.__hideNextMonthArrow,set(e){n.__hideNextMonthArrow!==e&&((0,r.toggleClass)(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],ne(),n.monthNav)),n.innerContainer=(0,r.createElement)("div","flatpickr-innerContainer"),n.config.weekNumbers){const{weekWrapper:e,weekNumbers:t}=function(){n.calendarContainer.classList.add("hasWeeks");const e=(0,r.createElement)("div","flatpickr-weekwrapper");e.appendChild((0,r.createElement)("span","flatpickr-weekday",n.l10n.weekAbbreviation));const t=(0,r.createElement)("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}();n.innerContainer.appendChild(e),n.weekNumbers=t,n.weekWrapper=e}n.rContainer=(0,r.createElement)("div","flatpickr-rContainer"),n.rContainer.appendChild(O()),n.daysContainer||(n.daysContainer=(0,r.createElement)("div","flatpickr-days"),n.daysContainer.tabIndex=-1),U(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");const e=(0,s.getDefaultHours)(n.config);n.timeContainer=(0,r.createElement)("div","flatpickr-time"),n.timeContainer.tabIndex=-1;const t=(0,r.createElement)("span","flatpickr-time-separator",":"),i=(0,r.createNumberInput)("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=i.getElementsByTagName("input")[0];const a=(0,r.createNumberInput)("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=a.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=(0,o.pad)(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),n.minuteElement.value=(0,o.pad)(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(i),n.timeContainer.appendChild(t),n.timeContainer.appendChild(a),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");const t=(0,r.createNumberInput)("flatpickr-second");n.secondElement=t.getElementsByTagName("input")[0],n.secondElement.value=(0,o.pad)(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild((0,r.createElement)("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(t)}return n.config.time_24hr||(n.amPM=(0,r.createElement)("span","flatpickr-am-pm",n.l10n.amPM[(0,o.int)((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}()),(0,r.toggleClass)(n.calendarContainer,"rangeMode","range"===n.config.mode),(0,r.toggleClass)(n.calendarContainer,"animate",!0===n.config.animate),(0,r.toggleClass)(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);const t=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!t&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){const e=(0,r.createElement)("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(e,n.element),e.appendChild(n.element),n.altInput&&e.appendChild(n.altInput),e.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((e=>{Array.prototype.forEach.call(n.element.querySelectorAll(`[data-${e}]`),(t=>y(t,"click",n[e])))})),n.isMobile)return void function(){const e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=(0,r.createElement)("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(e){}y(n.mobileInput,"change",(e=>{n.setDate((0,r.getEventTarget)(e).value,!1,n.mobileFormatStr),Q("onChange"),Q("onClose")}))}();const e=(0,o.debounce)(B,50);if(n._debouncedChange=(0,o.debounce)(v,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&y(n.daysContainer,"mouseover",(e=>{"range"===n.config.mode&&H((0,r.getEventTarget)(e))})),y(window.document.body,"keydown",N),n.config.inline||n.config.static||y(window,"resize",e),void 0!==window.ontouchstart?y(window.document,"touchstart",F):y(window.document,"mousedown",F),y(window.document,"focus",F,{capture:!0}),!0===n.config.clickOpens&&(y(n._input,"focus",n.open),y(n._input,"click",n.open)),void 0!==n.daysContainer&&(y(n.monthNav,"click",oe),y(n.monthNav,["keyup","increment"],g),y(n.daysContainer,"click",z)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){const e=e=>(0,r.getEventTarget)(e).select();y(n.timeContainer,["increment"],p),y(n.timeContainer,"blur",p,{capture:!0}),y(n.timeContainer,"click",b),y([n.hourElement,n.minuteElement],["focus","click"],e),void 0!==n.secondElement&&y(n.secondElement,"focus",(()=>n.secondElement&&n.secondElement.select())),void 0!==n.amPM&&y(n.amPM,"click",(e=>{p(e),v()}))}n.config.allowInput&&y(n._input,"blur",P)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&f(n.config.noCalendar?n.latestSelectedDateObj:void 0),ae(!1)),u();const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&a&&K(),Q("onReady")}(),n}function u(e,t){const n=Array.prototype.slice.call(e).filter((e=>e instanceof HTMLElement)),i=[];for(let e=0;e<n.length;e++){const a=n[e];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=c(a,t||{}),i.push(a._flatpickr)}catch(e){console.error(e)}}return 1===i.length?i[0]:i}n("./node_modules/flatpickr/dist/esm/utils/polyfills.js"),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return u(this,e)},HTMLElement.prototype.flatpickr=function(e){return u([this],e)});var d=function(e,t){return"string"==typeof e?u(window.document.querySelectorAll(e),t):e instanceof Node?u([e],t):u(e,t)};d.defaultConfig={},d.l10ns={en:Object.assign({},a.default),default:Object.assign({},a.default)},d.localize=e=>{d.l10ns.default=Object.assign(Object.assign({},d.l10ns.default),e)},d.setDefaults=e=>{d.defaultConfig=Object.assign(Object.assign({},d.defaultConfig),e)},d.parseDate=(0,s.createDateParser)({}),d.formatDate=(0,s.createDateFormatter)({}),d.compareDates=s.compareDates,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return u(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=d);const p=d},"./node_modules/flatpickr/dist/esm/l10n/default.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{english:()=>i,default:()=>a});const i={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:e=>{const t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},a=i},"./node_modules/flatpickr/dist/esm/types/options.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{HOOKS:()=>i,defaults:()=>a});const i=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],a={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:e=>"undefined"!=typeof console&&console.warn(e),getWeek:e=>{const t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1}},"./node_modules/flatpickr/dist/esm/utils/dates.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{createDateFormatter:()=>r,createDateParser:()=>s,compareDates:()=>l,compareTimes:()=>c,isBetween:()=>u,duration:()=>d,getDefaultHours:()=>p});var i=n("./node_modules/flatpickr/dist/esm/utils/formatting.js"),a=n("./node_modules/flatpickr/dist/esm/types/options.js"),o=n("./node_modules/flatpickr/dist/esm/l10n/default.js");const r=({config:e=a.defaults,l10n:t=o.english,isMobile:n=!1})=>(a,o,r)=>{const s=r||t;return void 0===e.formatDate||n?o.split("").map(((t,n,o)=>i.formats[t]&&"\\"!==o[n-1]?i.formats[t](a,s,e):"\\"!==t?t:"")).join(""):e.formatDate(a,o,s)},s=({config:e=a.defaults,l10n:t=o.english})=>(n,o,r,s)=>{if(0!==n&&!n)return;const l=s||t;let c;const u=n;if(n instanceof Date)c=new Date(n.getTime());else if("string"!=typeof n&&void 0!==n.toFixed)c=new Date(n);else if("string"==typeof n){const t=o||(e||a.defaults).dateFormat,s=String(n).trim();if("today"===s)c=new Date,r=!0;else if(/Z$/.test(s)||/GMT$/.test(s))c=new Date(n);else if(e&&e.parseDate)c=e.parseDate(n,t);else{c=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);let a,o=[];for(let e=0,r=0,s="";e<t.length;e++){const u=t[e],d="\\"===u,p="\\"===t[e-1]||d;if(i.tokenRegex[u]&&!p){s+=i.tokenRegex[u];const e=new RegExp(s).exec(n);e&&(a=!0)&&o["Y"!==u?"push":"unshift"]({fn:i.revFormat[u],val:e[++r]})}else d||(s+=".");o.forEach((({fn:e,val:t})=>c=e(c,t,l)||c))}c=a?c:void 0}}if(c instanceof Date&&!isNaN(c.getTime()))return!0===r&&c.setHours(0,0,0,0),c;e.errorHandler(new Error(`Invalid date provided: ${u}`))};function l(e,t,n=!0){return!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function c(e,t){return 3600*(e.getHours()-t.getHours())+60*(e.getMinutes()-t.getMinutes())+e.getSeconds()-t.getSeconds()}const u=(e,t,n)=>e>Math.min(t,n)&&e<Math.max(t,n),d={DAY:864e5};function p(e){let t=e.defaultHour,n=e.defaultMinute,i=e.defaultSeconds;if(void 0!==e.minDate){const a=e.minDate.getHours(),o=e.minDate.getMinutes(),r=e.minDate.getSeconds();t<a&&(t=a),t===a&&n<o&&(n=o),t===a&&n===o&&i<r&&(i=e.minDate.getSeconds())}if(void 0!==e.maxDate){const a=e.maxDate.getHours(),o=e.maxDate.getMinutes();t=Math.min(t,a),t===a&&(n=Math.min(o,n)),t===a&&n===o&&(i=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:i}}},"./node_modules/flatpickr/dist/esm/utils/dom.js":(e,t,n)=>{"use strict";function i(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function a(e,t,n){const i=window.document.createElement(e);return t=t||"",n=n||"",i.className=t,void 0!==n&&(i.textContent=n),i}function o(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function r(e,t){return t(e)?e:e.parentNode?r(e.parentNode,t):void 0}function s(e,t){const n=a("div","numInputWrapper"),i=a("input","numInput "+e),o=a("span","arrowUp"),r=a("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==t)for(const e in t)i.setAttribute(e,t[e]);return n.appendChild(i),n.appendChild(o),n.appendChild(r),n}function l(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}n.r(t),n.d(t,{toggleClass:()=>i,createElement:()=>a,clearNode:()=>o,findParent:()=>r,createNumberInput:()=>s,getEventTarget:()=>l})},"./node_modules/flatpickr/dist/esm/utils/formatting.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{monthToStr:()=>o,revFormat:()=>r,tokenRegex:()=>s,formats:()=>l});var i=n("./node_modules/flatpickr/dist/esm/utils/index.js");const a=()=>{},o=(e,t,n)=>n.months[t?"shorthand":"longhand"][e],r={D:a,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:(e,t)=>{e.setHours(parseFloat(t))},H:(e,t)=>{e.setHours(parseFloat(t))},J:(e,t)=>{e.setDate(parseFloat(t))},K:(e,t,n)=>{e.setHours(e.getHours()%12+12*(0,i.int)(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:(e,t)=>{e.setSeconds(parseFloat(t))},U:(e,t)=>new Date(1e3*parseFloat(t)),W:function(e,t,n){const i=parseInt(t),a=new Date(e.getFullYear(),0,2+7*(i-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:(e,t)=>{e.setFullYear(parseFloat(t))},Z:(e,t)=>new Date(t),d:(e,t)=>{e.setDate(parseFloat(t))},h:(e,t)=>{e.setHours(parseFloat(t))},i:(e,t)=>{e.setMinutes(parseFloat(t))},j:(e,t)=>{e.setDate(parseFloat(t))},l:a,m:(e,t)=>{e.setMonth(parseFloat(t)-1)},n:(e,t)=>{e.setMonth(parseFloat(t)-1)},s:(e,t)=>{e.setSeconds(parseFloat(t))},u:(e,t)=>new Date(parseFloat(t)),w:a,y:(e,t)=>{e.setFullYear(2e3+parseFloat(t))}},s={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},l={Z:e=>e.toISOString(),D:function(e,t,n){return t.weekdays.shorthand[l.w(e,t,n)]},F:function(e,t,n){return o(l.n(e,t,n)-1,!1,t)},G:function(e,t,n){return(0,i.pad)(l.h(e,t,n))},H:e=>(0,i.pad)(e.getHours()),J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:(e,t)=>t.amPM[(0,i.int)(e.getHours()>11)],M:function(e,t){return o(e.getMonth(),!0,t)},S:e=>(0,i.pad)(e.getSeconds()),U:e=>e.getTime()/1e3,W:function(e,t,n){return n.getWeek(e)},Y:e=>(0,i.pad)(e.getFullYear(),4),d:e=>(0,i.pad)(e.getDate()),h:e=>e.getHours()%12?e.getHours()%12:12,i:e=>(0,i.pad)(e.getMinutes()),j:e=>e.getDate(),l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:e=>(0,i.pad)(e.getMonth()+1),n:e=>e.getMonth()+1,s:e=>e.getSeconds(),u:e=>e.getTime(),w:e=>e.getDay(),y:e=>String(e.getFullYear()).substring(2)}},"./node_modules/flatpickr/dist/esm/utils/index.js":(e,t,n)=>{"use strict";n.r(t),n.d(t,{pad:()=>i,int:()=>a,debounce:()=>o,arrayify:()=>r});const i=(e,t=2)=>`000${e}`.slice(-1*t),a=e=>!0===e?1:0;function o(e,t){let n;return function(){clearTimeout(n),n=setTimeout((()=>e.apply(this,arguments)),t)}}const r=e=>e instanceof Array?e:[e]},"./node_modules/flatpickr/dist/esm/utils/polyfills.js":()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e,...t){if(!e)throw TypeError("Cannot convert undefined or null to object");for(const n of t)n&&Object.keys(n).forEach((t=>e[t]=n[t]));return e})},"./node_modules/html5sortable/dist/html5sortable.cjs.js":e=>{"use strict";function t(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var n=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},i=new Map,a=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),o=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return i.has(e)||i.set(e,new a),i.get(e)};function r(e,t,n){if(e instanceof Array)for(var i=0;i<e.length;++i)r(e[i],t,n);else e.addEventListener(t,n),o(e).setData("event"+t,n)}function s(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)s(e[n],t);else e.removeEventListener(t,o(e).getData("event"+t)),o(e).deleteData("event"+t)}function l(e,t,n){if(e instanceof Array)for(var i=0;i<e.length;++i)l(e[i],t,n);else e.setAttribute(t,n)}function c(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.removeAttribute(t)}var u,d,p,m,f,h,g,y,v,_=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},b=function(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},k=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},w=function(e,t,n){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},T=function(e,t){return w(e,t,"after")},A=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return"border-box"===t.getPropertyValue("box-sizing")?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},C=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},D=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},U=function(e){return e.composedPath&&e.composedPath()[0]||e.target},E=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},x=function(e,t){if(!0===e.isSortable){var n=o(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==o(e).getConfig("connectWith")&&null!==o(e).getConfig("connectWith"))return o(e).getConfig("connectWith")===o(t).getConfig("connectWith")}return!1},M={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"},O=function(e,t){if("string"==typeof o(e).getConfig("hoverClass")){var i=o(e).getConfig("hoverClass").split(" ");!0===t?(r(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"number"!=typeof t)throw new Error("You must provide a number as the second argument for throttle.");var i=null;return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var r=Date.now();(null===i||r-i>=t)&&(i=r,e.apply(n,a))}}((function(t){0===t.buttons&&n(e.children,o(e).getConfig("items")).forEach((function(e){var n,a;e!==t.target?(n=e.classList).remove.apply(n,i):(a=e.classList).add.apply(a,i)}))}),o(e).getConfig("throttleTime"))),r(e,"mouseleave",(function(){n(e.children,o(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,i)}))}))):(s(e,"mousemove"),s(e,"mouseleave"))}},S=function(e){s(e,"dragstart"),s(e,"dragend"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop"),s(e,"mouseenter"),s(e,"mouseleave")},I=function(e,t){e&&s(e,"dragleave"),t&&t!==e&&s(t,"dragleave")},j=function(e){var t;(t=e).h5s&&delete t.h5s.data,c(e,"aria-dropeffect")},F=function(e){c(e,"aria-grabbed"),c(e,"aria-copied"),c(e,"draggable"),c(e,"role")};function L(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function R(e,i){var a=t(e,"opts"),o=n(e.children,a.items).filter((function(e){return e.contains(i)||e.shadowRoot&&e.shadowRoot.contains(i)}));return o.length>0?o[0]:i}var V=function(e){var i=t(e,"opts"),a=n(e.children,i.items),o=D(a,i.handle);l(e,"aria-dropeffect","move"),t(e,"_disabled","false"),l(o,"draggable","true"),O(e,!0),!1===i.disableIEFix&&"function"==typeof(document||window.document).createElement("span").dragDrop&&r(o,"mousedown",(function(){if(-1!==a.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===a.indexOf(e);)e=e.parentElement;e.dragDrop()}}))};function P(e,a){var c=String(a);return a=a||{},"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(c)?e.map((function(e){var i=t(e,"opts");return function(e,i,a){if(void 0===i&&(i=function(e,t){return e}),void 0===a&&(a=function(e){return e}),!(e instanceof HTMLElement)||1==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof i||"function"!=typeof a)throw new Error("You need to provide a valid serializer for items and the container.");var o=t(e,"opts").items,r=n(e.children,o),s=r.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:b(t,r)}}));return{container:a({node:e,itemCount:s.length}),items:s.map((function(t){return i(t,e)}))}}(e,i.itemSerializer,i.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(c))return P[c](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(a,e)&&null!==a[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),a=Object.assign({},M,o(e).config,a),o(e).config=a,t(e,"opts",a),e.isSortable=!0,function(e){var i=t(e,"opts"),a=n(e.children,i.items),o=D(a,i.handle);t(e,"_disabled","false"),S(a),I(m,y),s(o,"mousedown"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop")}(e);var O,j=n(e.children,a.items);if(null!==a.placeholder&&void 0!==a.placeholder){var F=document.createElement(e.tagName);a.placeholder instanceof HTMLElement?F.appendChild(a.placeholder):F.innerHTML=a.placeholder,O=F.children[0]}o(e).placeholder=function(e,t,n){var i;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(i=t.classList).add.apply(i,n.split(" ")),t}(e,O,a.placeholderClass),t(e,"items",a.items),a.acceptFrom?t(e,"acceptFrom",a.acceptFrom):a.connectWith&&t(e,"connectWith",a.connectWith),V(e),l(j,"role","option"),l(j,"aria-grabbed","false"),r(e,"dragstart",(function(e){var t=U(e);if(!0!==t.isSortable&&(e.stopImmediatePropagation(),(!a.handle||t.matches(a.handle))&&"false"!==t.getAttribute("draggable"))){var i=L(t,e),r=R(i,t);g=n(i.children,a.items),f=g.indexOf(r),h=b(r,i.children),m=i,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=E),e.dataTransfer&&e.dataTransfer.setDragImage){var i=n(t,_(t),e);if(!(i.element instanceof HTMLElement)||"number"!=typeof i.posX||"number"!=typeof i.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",U(e).id),e.dataTransfer.setDragImage(i.element,i.posX,i.posY)}}(e,r,a.customDragImage),d=A(r),p=C(r),r.classList.add(a.draggingClass),u=function(e,t){var n=e;return!0===o(t).getConfig("copy")&&(l(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(r,i),l(u,"aria-grabbed","true"),i.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:h,index:f,container:m},item:u,originalTarget:t}}))}})),r(e,"dragenter",(function(i){var s=U(i),l=L(s,i);l&&l!==y&&(v=n(l.children,t(l,"items")).filter((function(t){return t!==o(e).placeholder})),a.dropTargetContainerClass&&l.classList.add(a.dropTargetContainerClass),l.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:h,index:f,container:m},destination:{container:l,itemsBeforeUpdate:v},item:u,originalTarget:s}})),r(l,"dragleave",(function(e){var t=e.relatedTarget||e.fromElement;e.currentTarget.contains(t)||(a.dropTargetContainerClass&&l.classList.remove(a.dropTargetContainerClass),l.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:h,index:f,container:l},item:u,originalTarget:s}})))}))),y=l})),r(e,"dragend",(function(n){if(u){u.classList.remove(a.draggingClass),l(u,"aria-grabbed","false"),"true"===u.getAttribute("aria-copied")&&"true"!==t(u,"dropped")&&u.remove(),u.style.display=u.oldDisplay,delete u.oldDisplay;var o=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(k)[0];o&&o.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}})),y=null,u=null,d=null,p=null}})),r(e,"drop",(function(r){if(x(e,u.parentElement)){r.preventDefault(),r.stopPropagation(),t(u,"dropped","true");var s=Array.from(i.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(k)[0];T(s,u),s.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}}));var l=o(e).placeholder,c=n(m.children,a.items).filter((function(e){return e!==l})),d=!0===this.isSortable?this:this.parentElement,p=n(d.children,t(d,"items")).filter((function(e){return e!==l})),y=b(u,Array.from(u.parentElement.children).filter((function(e){return e!==l}))),_=b(u,p);a.dropTargetContainerClass&&d.classList.remove(a.dropTargetContainerClass),h===y&&m===d||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:h,index:f,container:m,itemsBeforeUpdate:g,items:c},destination:{index:_,elementIndex:y,container:d,itemsBeforeUpdate:v,items:p},item:u}}))}}));var N,H,B,q=(N=function(e,t,r,s){if(u)if(a.forcePlaceholderSize&&(o(e).placeholder.style.height=d+"px",o(e).placeholder.style.width=p+"px"),Array.from(e.children).indexOf(t)>-1){var l=A(t),c=C(t),m=b(o(e).placeholder,t.parentElement.children),f=b(t,t.parentElement.children);if(l>d||c>p){var h=l-d,g=c-p,y=_(t).top,v=_(t).left;if(m<f&&("vertical"===a.orientation&&s<y||"horizontal"===a.orientation&&r<v))return;if(m>f&&("vertical"===a.orientation&&s>y+l-h||"horizontal"===a.orientation&&r>v+c-g))return}void 0===u.oldDisplay&&(u.oldDisplay=u.style.display),"none"!==u.style.display&&(u.style.display="none");var k=!1;try{var D=_(t).top+t.offsetHeight/2,U=_(t).left+t.offsetWidth/2;k="vertical"===a.orientation&&s>=D||"horizontal"===a.orientation&&r>=U}catch(e){k=m<f}k?T(t,o(e).placeholder):function(e,t){w(e,t,"before")}(t,o(e).placeholder),Array.from(i.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==o(e).placeholder&&t.placeholder.remove()}))}else{var E=Array.from(i.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==E.indexOf(t)||e!==t||n(t.children,a.items).length||(E.forEach((function(e){return e.remove()})),t.appendChild(o(e).placeholder))}},void 0===(H=a.debounce)&&(H=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(B),B=setTimeout((function(){N.apply(void 0,e)}),H)}),W=function(e){var i=e.target,a=!0===i.isSortable?i:L(i,e);if(i=R(a,i),u&&x(a,u.parentElement)&&"true"!==t(a,"_disabled")){var r=t(a,"opts");parseInt(r.maxItems)&&n(a.children,t(a,"items")).length>=parseInt(r.maxItems)&&u.parentElement!==a||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===o(a).getConfig("copy")?"copy":"move",q(a,i,e.pageX,e.pageY))}};r(j.concat(e),"dragover",W),r(j.concat(e),"dragenter",W)})),e)}P.destroy=function(e){!function(e){var i=t(e,"opts")||{},a=n(e.children,i.items),o=D(a,i.handle);O(e,!1),s(e,"dragover"),s(e,"dragenter"),s(e,"dragstart"),s(e,"dragend"),s(e,"drop"),j(e),s(o,"mousedown"),S(a),F(a),I(m,y),e.isSortable=!1}(e)},P.enable=function(e){V(e)},P.disable=function(e){!function(e){var i=t(e,"opts"),a=n(e.children,i.items),o=D(a,i.handle);l(e,"aria-dropeffect","none"),t(e,"_disabled","true"),l(o,"draggable","false"),s(o,"mousedown"),O(e,!1)}(e)},P.__testing={data:t,removeItemEvents:S,removeItemData:F,removeSortableData:j,removeContainerEvents:I},e.exports=P},"./src/css/main.scss":(e,t,n)=>{"use strict";n.r(t)},"./node_modules/sprintf-js/src/sprintf.js":(e,t,n)=>{var i;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(e){return s(c(e),arguments)}function r(e,t){return o.apply(null,[e].concat(t||[]))}function s(e,t){var n,i,r,s,l,c,u,d,p,m=1,f=e.length,h="";for(i=0;i<f;i++)if("string"==typeof e[i])h+=e[i];else if("object"==typeof e[i]){if((s=e[i]).keys)for(n=t[m],r=0;r<s.keys.length;r++){if(null==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[r],s.keys[r-1]));n=n[s.keys[r]]}else n=s.param_no?t[s.param_no]:t[m++];if(a.not_type.test(s.type)&&a.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),a.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(a.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}a.json.test(s.type)?h+=n:(!a.number.test(s.type)||d&&!s.sign?p="":(p=d?"+":"-",n=n.toString().replace(a.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(p+n).length,l=s.width&&u>0?c.repeat(u):"",h+=s.align?p+n+l:"0"===c?p+l+n:l+p+n)}return h}var l=Object.create(null);function c(e){if(l[e])return l[e];for(var t,n=e,i=[],o=0;n;){if(null!==(t=a.text.exec(n)))i.push(t[0]);else if(null!==(t=a.modulo.exec(n)))i.push("%");else{if(null===(t=a.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var r=[],s=t[2],c=[];if(null===(c=a.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=a.key_access.exec(s)))r.push(c[1]);else{if(null===(c=a.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(c[1])}t[2]=r}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=i}t.sprintf=o,t.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=r,void 0===(i=function(){return{sprintf:o,vsprintf:r}}.call(t,n,t,e))||(e.exports=i))}()},jquery:e=>{"use strict";e.exports=jQuery}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__("./src/css/main.scss"),__webpack_require__("jquery");var e=__webpack_require__("./src/components/Utilities.js"),t=__webpack_require__("./src/components/Publish.js"),n=__webpack_require__("./src/components/Triggers.js"),i=__webpack_require__("./src/components/Actions.js"),a=__webpack_require__("./src/components/SendFeedback.js"),o=(__webpack_require__("./src/components/RecipeTypeSelector.js"),__webpack_require__("./src/components/RecipeTitle.js")),r=__webpack_require__("./src/components/Taxonomies.js");UncannyAutomator.cache={tokens:{}};try{(0,e.createDataOnLoad)((function(){(0,e.consoleLogLabel)("Render the UI",!1,{bgColor:"#579f49"}),new n.default,new i.default,new t.default,new a.default,new o.default,new r.default}))}catch(t){(0,e.handleFatalError)(t)}})()})();
//# sourceMappingURL=bundle.min.js.map