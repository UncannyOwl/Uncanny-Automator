/*! For license information please see bundle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={235:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(693);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,t),this.content=e}var e,n;return e=t,n=[{key:"getHTML",value:function(){var t=(0,o.r)(this.content);return t=this.parseItalicsAndBold(t),this.parseAnchors(t)}},{key:"parseItalicsAndBold",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={doubleUnderscores:/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,singleUnderscores:/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,doubleAsterisks:/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,singleAsterisks:/(\*)(?=\S)([^\r]*?\S)\1/g};return(t=(t=(t=t.replace(e.doubleUnderscores,"$1<strong>$2</strong>")).replace(e.singleUnderscores,"$1<em>$2</em>")).replace(e.doubleAsterisks,"<strong>$2</strong>")).replace(e.singleAsterisks,"<em>$2</em>")}},{key:"parseAnchors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n=function(t,e,n,i,a,r,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(t=e,i=i.toLowerCase(),!a){if(i||(i=n.toLowerCase().replace(/ ?\n/g," ")),a="#".concat(i),!(t.search(/\(\s*\)$/m)>-1))return t;a=""}a=encodeURI(a,"*_",!1),(0,o.xb)(c)?c="":(c=c.replace(/"/g,"&quot;"),c=encodeURI(c,"*_",!1),c=' title="'.concat(c,'"'));var l='\n\t\t\t\t<a href="'.concat(a,'" target="_blank" ').concat(c,">\n\t\t\t\t\t").concat(n,"\n\t\t\t\t</a>\n\t\t\t");return l};return t.replace(e,n)}}],n&&a(e.prototype,n),t}()},772:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o=n(311),i=n.n(o),a=n(693);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),this.elements={container:null,automatorContainer:null,modal:{container:null,box:{container:null,title:null,warning:null,buttons:{container:null,cancel:null,confirm:null}}}},this.elements.container=i()("body"),this.isVisible=!1,this.config=i().extend(!0,{fadeDuration:150,size:"medium",warningFirst:!1,customClass:"",allowContentOverflow:!1},n),this.content=i().extend({},{buttons:{cancel:UncannyAutomator.i18n.cancel}},e),this.create(),this}var e,n;return e=t,n=[{key:"create",value:function(){var t,e,n=i()("<div/>",{class:"uap"}),o=i()("<div/>",{class:"modal"}),r=i()("<div/>",{class:"modal__box"});if((0,a.$K)(this.config.size)&&["small","medium","large","extra-large","xx-large"].includes(this.config.size)&&o.addClass("modal--".concat(this.config.size)),this.config.allowContentOverflow&&o.addClass("modal--allow-content-overflow"),(0,a.$K)(this.config.customClass)&&o.addClass("modal--".concat(this.config.customClass)),this.elements.automatorContainer=n,this.elements.modal.container=o,this.elements.modal.box.container=r,(0,a.$K)(this.content.title)){var s=i()("<div/>",{class:"modal__title"}).html(this.content.title);r.append(s),this.elements.modal.box.title=s}if((0,a.$K)(this.content.content)){t=i()("<div/>",{class:"modal__content"});try{t.append(this.content.content)}catch(e){t.html(this.content.content)}r.append(t),this.elements.modal.box.content=t}(0,a.$K)(this.content.warning)&&(e=i()("<div/>",{class:"modal__warning"}).html(this.content.warning),this.elements.modal.box.warning=e),(0,a.$K)(this.config.warningFirst)&&this.config.warningFirst?((0,a.$K)(this.content.warning)&&r.append(e),(0,a.$K)(this.content.content)&&r.append(t)):((0,a.$K)(this.content.content)&&r.append(t),(0,a.$K)(this.content.warning)&&r.append(e));var c=i()("<div/>",{class:"modal__buttons"}),l=i()("<button/>",{class:"uap-btn uap-btn--secondary"}).html(this.content.buttons.cancel);if(c.append(l),this.elements.modal.box.buttons.container=c,this.elements.modal.box.buttons.cancel=l,(0,a.$K)(this.content.buttons.confirm)){var u=i()("<button/>",{class:"uap-btn uap-btn--primary"}).html(this.content.buttons.confirm);c.append(u),this.elements.modal.box.buttons.confirm=u}r.append(c),o.append(r),n.append(o),this.elements.container.append(n),i()("html").addClass("automator-modal-open"),this.bind()}},{key:"setEvents",value:function(t){var e=this;this.events={afterSetEvents:(0,a.$K)(t.afterSetEvents)?t.afterSetEvents:function(){},afterShow:(0,a.$K)(t.afterShow)?t.afterShow:function(){},afterHide:(0,a.$K)(t.afterHide)?t.afterHide:function(){},onConfirm:(0,a.$K)(t.onConfirm)?t.onConfirm:function(){},onCancel:(0,a.$K)(t.onCancel)?t.onCancel:function(){}},(0,a.$K)(t.onCancel)||(this.events.onCancel=function(){e.hide()}),this.events.afterSetEvents()}},{key:"destroy",value:function(){var t=this;this.unbind(),this.isVisible?this.hide((function(){t.elements.automatorContainer.remove()})):t.elements.automatorContainer.remove(),i()("html").removeClass("automator-modal-open")}},{key:"bind",value:function(){var t=this;(0,a.$K)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.on("click",(function(){t.events.onCancel()})),(0,a.$K)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.on("click",(function(){t.events.onConfirm()}))}},{key:"unbind",value:function(){(0,a.$K)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.unbind("click"),(0,a.$K)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.unbind("click")}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,n=function(){};(0,a.$K)(t)?n=t:(0,a.$K)(this.events.afterShow)&&(n=this.events.afterShow),t=n,this.isVisible=!0,this.elements.modal.container.fadeIn(e.config.fadeDuration,t)}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=(0,a.$K)(t)?t:this.events.afterHide,this.isVisible=!1,this.elements.modal.container.fadeOut(this.config.fadeDuration,t),i()("html").removeClass("automator-modal-open")}},{key:"getElements",value:function(){return this.elements}}],n&&s(e.prototype,n),t}()},693:(t,e,n)=>{"use strict";n.d(e,{bN:()=>B,hl:()=>ft,XE:()=>Ct,A5:()=>ot,Dh:()=>lt,vQ:()=>_t,iK:()=>$,Ds:()=>vt,r:()=>dt,IL:()=>V,p5:()=>At,PT:()=>wt,q7:()=>W,M0:()=>z,rz:()=>Z,ew:()=>X,Vx:()=>G,Y6:()=>J,eU:()=>j,Tb:()=>ht,Ki:()=>mt,C2:()=>bt,d3:()=>it,$K:()=>et,xb:()=>nt,Kn:()=>st,HD:()=>rt,Wr:()=>P,Lc:()=>tt,YQ:()=>kt,qh:()=>Q,Tm:()=>L,R$:()=>Y,hF:()=>ct,L8:()=>N,yv:()=>F,gy:()=>H,P2:()=>yt,Cn:()=>K});var o=n(311),i=n.n(o);function a(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var s=function(){var t,e=!1,n=Object.values(P("get",{filter:{itemType:"trigger"}}));return n.length>1&&(t=new Set(n.map((function(t){return t.integrationCode}))),function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).length<n.length&&(e=!0),e};const c=function(){if(s()){var t=P("get",{filter:{itemType:"trigger"}});Object.entries(t).forEach((function(t){var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,n)||a(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0];o[1],UncannyAutomator.recipe.items[i].shouldShowItemId=!0}))}};var l=n(109);function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const d=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.setAttributes(e),this.createFields()}var e,n;return e=t,n=[{key:"setAttributes",value:function(t){et(t.hasLabel)||(nt(t.label)?t.hasLabel=!1:t.hasLabel=!0),et(t.hasDescription)||(nt(t.description)?t.hasDescription=!1:t.hasDescription=!0),this.attributes=t}},{key:"createFields",value:function(){this.fields=this.attributes.fields.map((function(t){return new l.Z(t.fieldType,t)}))}},{key:"createFormElement",value:function(){var t=i()('<div class="form-group"></div>');if(this.attributes.hasLabel){var e=i()('<div class="form-group__label">'.concat(this.attributes.label,"</div>"));t.append(e)}var n=i()('<div class="form-group__fields"></div>');if(this.fields.forEach((function(t){var e=t.createFormElement();n.append(e)})),t.append(n),this.attributes.hasLabel){var o=i()('<div class="form-group__description">'.concat(this.attributes.description,"</div>"));t.append(o)}return this.formElement=t,t}},{key:"getValue",value:function(){var t={};return this.fields.forEach((function(e){t[e.getFieldID()]=e.getValue()})),t}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"validate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={isValid:!0,message:""};return this.fields.forEach((function(n){e[n.getFieldID()]=n.validate(t),e.isValid=e.isValid&&e[n.getFieldID()].isValid})),e}}],n&&u(e.prototype,n),t}();function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var m=n(771),f=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.setAttributes(e),this.createFields()}var e,n;return e=t,n=[{key:"setAttributes",value:function(t){et(t.hasLabel)||(nt(t.label)?t.hasLabel=!1:t.hasLabel=!0),et(t.hasDescription)||(nt(t.description)?t.hasDescription=!1:t.hasDescription=!0),et(t.canSortRows)||(t.canSortRows=!0),this.attributes=t}},{key:"createFields",value:function(){var t=this.attributes.fields,e=[];if(Array.isArray(this.attributes.currentValue)&&this.attributes.currentValue.length>0)this.attributes.currentValue.forEach((function(n){var o=JSON.parse(JSON.stringify(t));o=o.map((function(t){return et(n[t.optionCode])?t.currentValue=n[t.optionCode]:t.currentValue="",t})),e.push(o)}));else if(this.attributes.isRequired){var n=JSON.parse(JSON.stringify(t));n.currentValue="",e.push(n)}e=e.map((function(t){return t.map((function(t){return t.label="",t.description="",new l.Z(t.fieldType,t)}))})),this.fieldRows=e}},{key:"createFormElement",value:function(){var t,e=i()('<div class="form-repeater"></div>');if(this.attributes.hasLabel){var n=i()('\n\t\t\t\t<div class="form-repeater__label">\n\t\t\t\t\t'.concat(this.attributes.label,"\n\t\t\t\t\t").concat(this.attributes.isRequired?'<span class="form-repeater__label-required"></span>':"","\n\t\t\t\t</div>\n\t\t\t"));e.append(n)}var o=this.getFieldsTable();if(e.append(o),o.append(i()('<div class="form-element__error"></div>')),this.attributes.hasDescription){var a=i()('<div class="form-repeater__description">'.concat(this.attributes.description,"</div>"));e.append(a)}return this.formElement=e,t=e,this.fieldRows.length>1&&this.makeRowsSortable(),this.listenSave(),t}},{key:"listenSave",value:function(){var t=this;this.formElement.on("saved",(function(e){t.updateAttributesFieldsFromRow()}))}},{key:"updateAttributesFieldsFromRow",value:function(){var t=[];this.fieldRows.forEach((function(e){var n=[];e.forEach((function(t){n.push(t.attributes)})),t.push(n)})),this.attributes.fields=t}},{key:"makeRowsSortable",value:function(){var t=this;this.attributes.canSortRows&&(m(this.formElement.find(".form-repeater-fields__table-rows"),{forcePlaceholderSize:!0,handle:".form-repeater-fields__table-rows-cell--number",placeholder:'<tr><td colspan="'.concat(this.fieldRows[0].length+2,'">&nbsp;</td></tr>'),itemSerializer:function(t,e){return{position:t.index,html:t.html}}}),this.formElement.find(".form-repeater-fields__table-rows").on("sortupdate",(function(e){var n=[];i().each(e.detail.destination.items,(function(t,e){n.push(i()(e).data("order"))}));var o=[];n.forEach((function(e){o.push(t.fieldRows[e])})),t.fieldRows=o,t.reRender()})))}},{key:"getFieldsTable",value:function(){var t=this,e=i()('\n\t\t\t<div class="form-repeater-fields" data-id="'.concat(this.attributes.optionCode,'">\n\t\t\t\t<table class="form-repeater-fields__table">\n\t\t\t\t\t<thead class="form-repeater-fields__table-heading"></thead>\n\t\t\t\t\t<tbody class="form-repeater-fields__table-rows"></tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class="form-repeater-fields__actions"></div>\n\t\t\t</div>\n\t\t')),n=[];this.attributes.fields.forEach((function(t){var e=et(t.label)?t.label:"",o=!!et(t.isRequired)&&t.isRequired,i=et(t.description)?t.description:"";n.push({title:e,description:i,isRequired:o,id:t.optionCode})}));var o=i()("<tr></tr>");o.append(i()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--number">#</th>')),n.forEach((function(t){var e=i()('<th class="form-repeater-fields__table-heading-cell" data-id="'.concat(t.id,'"></th>'));nt(t.title)||e.append(i()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-title">\n\t\t\t\t\t\t'.concat(t.title,"\n\t\t\t\t\t\t").concat(t.isRequired?'<span class="form-repeater-fields__table-heading-cell-required"></span>':"","\n\t\t\t\t\t</div>\n\t\t\t\t"))),nt(t.description)||e.append(i()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-description">\n\t\t\t\t\t\t'.concat(t.description,"\n\t\t\t\t\t</div>\n\t\t\t\t"))),o.append(e)})),o.append(i()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--actions"></th>')),e.find(".form-repeater-fields__table-heading").append(o);var a=e.find(".form-repeater-fields__table-rows"),r=this.fieldRows.length;if(this.fieldRows.forEach((function(e,n){var o=i()('<tr data-order="'.concat(n,'"></tr>'));o.append(i()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--number">'.concat(n+1,"</td>"))),e.forEach((function(t){var e=i()('<td class="form-repeater-fields__table-rows-cell" data-id="'.concat(t.attributes.optionCode,'"></td>')),n=t.getFormElement();t.initLibraries(),e.append(n),o.append(e)}));var s=i()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--actions"></td>');o.append(s);var c=t.getAttributes();if(0!=n||0==n&&(!t.attributes.isRequired||r>1)){var l=et(t.attributes.removeRowButtonLabel)?t.attributes.removeRowButtonLabel:UncannyAutomator.i18n.removeRow,u=i()('<div class="form-repeater-fields__table-rows-cell-remove" uap-tooltip="'.concat(l,'"><span></span></div>'));u.on("click",(function(){t.deleteRow(n)})),c.hideActions||s.append(u)}a.append(o)})),!this.getAttributes().hideActions){var s=i()('\n\t\t\t\t<div class="uap-btn uap-btn--primary uap-btn--small">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.addRow,"\n\t\t\t\t</div>\n\t\t\t"));et(this.attributes.addRowButtonLabel)&&s.text(this.attributes.addRowButtonLabel),s.on("click",(function(){s.addClass("uap-btn--loading"),t.addRow()})),e.find(".form-repeater-fields__actions").append(s)}return e}},{key:"getValue",value:function(){var t=[];return this.fieldRows.forEach((function(e){var n={};e.forEach((function(t){n[t.getFieldID()]=t.getValue()})),t.push(n)})),t}},{key:"addRow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JSON.parse(JSON.stringify(this.attributes.fields));n.currentValue="",n=n.map((function(e){return e.label="",e.description="",et(t[e.optionCode])&&(e.currentValue=t[e.optionCode]),new l.Z(e.fieldType,e)})),this.fieldRows.push(n),e&&this.reRender(!0)}},{key:"reRender",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyCodeMirror(),this.destroyTokenSelector();var e=this.formElement,n=this.createFormElement(!1);if(e.replaceWith(n),this.initTokenSelector(),this.initCodeMirror(),t){var o=this.fieldRows[this.fieldRows.length-1];if(et(o)){var i=o[0];et(i)&&i.focus()}}}},{key:"deleteRow",value:function(t){et(this.fieldRows[t])&&this.fieldRows.splice(t,1),this.formElement.replaceWith(this.createFormElement())}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"validate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={isValid:!0,message:""},n=[];return this.fieldRows.forEach((function(o){var i={};o.forEach((function(n){i[n.getFieldID()]=n.validate(t),e.isValid=e.isValid&&i[n.getFieldID()].isValid})),n.push(i)})),e}},{key:"initTokenSelector",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.initTokenSelector()}))}))}},{key:"destroyTokenSelector",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.destroyTokenSelector()}))}))}},{key:"initCodeMirror",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.initCodeMirror()}))}))}},{key:"destroyCodeMirror",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.destroyCodeMirror()}))}))}}],n&&p(e.prototype,n),t}();const h=f;function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const y=function(t){return t=JSON.parse(JSON.stringify(t)),t=v(t),["group","repeater"].includes(t.fieldType)&&(t.fields=t.fields.map((function(e){return Object.assign(v(e),{itemType:t.itemType})}))),t};var v=function(t){var e={required:"isRequired",read_only:"isReadOnly",supports_tinymce:"supportsTinyMCE",copy_to_clipboard:"supportsCopyToClipboard",is_ajax:"isAjax",option_code:"optionCode",input_type:"fieldType",is_hidden:"isHidden",token_name:"tokenName",default_value:"defaultValue",current_value:"currentValue",max_length:"maxLength",relevant_tokens:"customFieldTokens",date_format:"dateFormat",date_alt_format:"dateAltFormat",supports_range:"supportsRange",min_date:"minDate",max_date:"maxDate",time_format:"timeFormat",supports_tokens:"supportsTokens",time_alt_format:"timeAltFormat",min_time:"minTime",max_time:"maxTime",hide_actions:"hideActions",supports_custom_value:"supportsCustomValue",supports_multiple_values:"supportsMultipleValues",custom_value_description:"customValueDescription",fill_values_in:"targetField",add_row_button:"addRowButtonLabel",remove_row_button:"removeRowButtonLabel",item_type:"itemType",can_sort_rows:"canSortRows",is_toggle:"isToggle"};return Object.entries(t).forEach((function(n){var o,i,a=(i=2,function(t){if(Array.isArray(t))return t}(o=n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(o,i)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=a[0],s=a[1];et(e[r])&&(t[e[r]]=s,delete t[r])})),t},_=n(347),b=n(27),w=n(772),A=n(921);const k=function(t){if(UncannyAutomator.recipe.conditions={},et(t.actions_conditions)&&!nt(t.actions_conditions))try{JSON.parse(t.actions_conditions).forEach((function(t){var e=new A.Z;e.mode=t.mode,e.actions=t.actions,e.conditions=t.conditions}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn("Conditions: Automator failed to parse the conditions saved in the meta. Make sure you're saving a valid JSON.")}};function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const T=function(t){var e=t.integrationCode,n={available:{},unavailable:[]};et(UncannyAutomator.actionsConditions)&&(et(UncannyAutomator.actionsConditions[e])&&(n.available=UncannyAutomator.actionsConditions[e],Object.entries(n.available).forEach((function(t){var e,o,i=(o=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,o)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0];i[1],et(n.available[a].fields)&&(n.available[a].fields=n.available[a].fields.map((function(t){return t.itemType="action",y(t)})))}))),et(UncannyAutomator.proFeatures[e])&&et(UncannyAutomator.proFeatures[e].conditions)&&(n.unavailable=UncannyAutomator.proFeatures[e].conditions),n.hasUnavailableItems=n.unavailable.length>0,n.allItemsArePro=Object.values(n.available).every((function(t){return et(!!t.is_pro&&t.is_pro)})),n.allRequireUserData=Object.values(n.available).every((function(t){return et(!!t.require_user&&t.require_user)})),n.hasAvailableItems=Object.values(n.available).length>0),UncannyAutomator.integrations[e].items.conditions=n};var U=n(575);function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const x=function(){if((0,U.Z)()){var t=P("get",{filter:{itemType:"action"}});for(var e in t)UncannyAutomator.recipe.items[e].hasConditions=!1;Object.entries(UncannyAutomator.recipe.conditions).forEach((function(t){var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());o[0],o[1].actions.forEach((function(t){UncannyAutomator.recipe.items[t].hasConditions=!0}))}))}};var M="undefined"==typeof arguments?void 0:arguments;function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var O=n(975).vsprintf,$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";UncannyAutomator.dev.developerMode&&lt("Start creating the main object"),t=nt(t)?function(){}:t;var e=function(){q(),R(),L("create",{allRecipes:UncannyAutomator.recipes_object}),delete UncannyAutomator.triggers,delete UncannyAutomator.actions,delete UncannyAutomator.actionsConditions,UncannyAutomator.dev.developerMode&&lt("Ended creating the main object"),t()};nt(UncannyAutomator.recipe.type)?new _.Z((function(){e()})):e()},L=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!1,a=["create","validate"];if(et(e)&&it(e,a))switch(e){case"create":var r=["allRecipes"];if(it(r,Object.keys(n))){var s,u=n.allRecipes;i().each(u,(function(t,e){e.ID==UncannyAutomator.recipe.id&&(s=e)})),et(s.extra_options)&&!nt(s.extra_options)&&(UncannyAutomator.recipes_object[s.ID].extra_options=s.extra_options),i().each(s.triggers,(function(t,e){return e.itemType="trigger"})),i().each(s.actions,(function(t,e){return e.itemType="action"})),i().each(s.closures,(function(t,e){return e.itemType="closure"}));var p=[].concat.apply([],[s.triggers,s.actions,s.closures]);P("reset");var m="anonymous"==UncannyAutomator.recipe.type;if(i().each(p,(function(t,e){var n,o,a=e.meta.integration,r=e.meta.code;try{o=UncannyAutomator.recipes_object[s.ID].extra_options[a][r]}catch(t){}var c=G(a,e.itemType,r);if(et(c)){var u={};nt(o)?(et(c.options)&&i().each(c.options,(function(t,e){u[e.option_code]=[e]})),et(c.options_group)&&i().extend(!0,u,c.options_group)):(et(o.options)&&i().each(o.options,(function(t,e){u[e.option_code]=[e]})),et(o.options_group)&&i().extend(!0,u,o.options_group));var p={};i().each(u,(function(t,n){var o=[],a=n.length>1;i().each(n,(function(n,i){var r,s;if(i.itemType=e.itemType,"group"==i.input_type)r=Object.assign(y(i),{groupId:t,isGroup:a,itemId:e.ID,itemType:e.itemType}),s=new d(r);else if("repeater"==i.input_type){try{e.meta[i.option_code]=JSON.parse(e.meta[i.option_code])}catch(t){}r=Object.assign(y(i),{groupId:t,isGroup:a,itemId:e.ID,itemType:e.itemType,currentValue:et(e.meta[i.option_code])?e.meta[i.option_code]:i.default_value}),s=new h(r)}else r=function(n){var o=Object.assign(y(n),{isGroup:a,itemId:e.ID,groupId:t,currentValue:et(e.meta[n.option_code])?e.meta[n.option_code]:n.default_value});return"select"==o.fieldType&&et(e.meta["".concat(o.optionCode,"_custom")])&&(o.customValue=e.meta["".concat(o.optionCode,"_custom")]),o.isAjax&&(o.integrationId=c.integration,nt(o.targetField)&&(o.targetField=n.option_code)),o}(i),s=new l.Z(r.fieldType,r,!1);o.push(s)}));var r=[];et(c.buttons)&&i().each(c.buttons,(function(e,n){n.show_in==t&&r.push(n)})),p[t]={fields:o,isValid:!1,buttons:r}})),n={id:e.ID,itemType:e.itemType,itemCode:r,integrationCode:c.integration,isLive:"publish"==e.post_status,options:p,meta:e.meta,isMissing:!1,tokens:et(e.tokens)?e.tokens:[],inlineCss:et(c.inline_css)?c.inline_css:"",customHTML:et(c.custom_html)?c.custom_html:"",filterTokens:et(c.filter_tokens)?c.filter_tokens:"",menuOrder:e.menu_order?parseInt(e.menu_order):9999},et(c.support)&&(n.support=c.support);var f={};i().each(p,(function(t,e){i().each(e.fields,(function(t,e){f[e.getAttributes().optionCode]=e}))})),i().each(f,(function(t,e){var o=e.getAttributes();et(n.meta[o.optionCode])&&!nt(n.meta[o.optionCode])||nt(o.currentValue)||(n.meta[o.optionCode]=o.currentValue)})),m&&(n.canLogNewUserIn=!et(c.can_log_in_new_user)||c.can_log_in_new_user)}else n={id:e.ID,itemType:e.itemType,itemCode:e.meta.code,integrationCode:e.meta.integration,integrationName:e.meta.integration_name,sentence:e.meta.sentence,isLive:"publish"==e.post_status,tokens:[],options:{},meta:e.meta,isMissing:!0,menuOrder:e.menu_order?parseInt(e.menu_order):9999},m&&(n.canLogNewUserIn=!et(e.meta.can_log_in_new_user)||"true"==e.meta.can_log_in_new_user);P("add",n)})),c(),k(s),x(),m){UncannyAutomator.recipe.canLogNewUserIn=!1;var f=P("get",{filter:{itemType:"trigger"}});Object.keys(f)>0&&(UncannyAutomator.recipe.canLogNewUserIn=!0,i().each(f,(function(t,e){UncannyAutomator.recipe.canLogNewUserIn=UncannyAutomator.recipe.canLogNewUserIn&&e.canLogNewUserIn})))}(!et(n.validate)||et(n.validate)&&n.validate)&&t("validate")}else{var g=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["recipeObject",g]))}break;case"validate":var v=!0;i().each(UncannyAutomator.recipe.hasLive,(function(t){UncannyAutomator.recipe.hasLive[t]=!1})),i().each(UncannyAutomator.recipe.items,(function(t,e){e.isLive&&(UncannyAutomator.recipe.hasLive[e.itemType]=!0)})),i().each(UncannyAutomator.recipe.items,(function(t,e){var n=!0;i().each(e.options,(function(e,o){var a=!0;i().each(o.fields,(function(t,e){e.validate(!1).isValid||(a=!1)})),UncannyAutomator.recipe.items[t].options[e].isValid=a,a||(n=!1)})),UncannyAutomator.recipe.items[t].isValid=n,e.isLive&&!n&&(v=!1)})),UncannyAutomator.recipe.hasLive.trigger?"anonymous"==UncannyAutomator.recipe.type&&UncannyAutomator.recipe.requiresUserData&&!UncannyAutomator.recipe.userSelector.isValid?(v=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.userSelector):UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure?UncannyAutomator.recipe.hasLive.trigger||UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.liveItems):(v=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneAction):(v=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneTrigger),UncannyAutomator.recipe.isValid=v,v&&(UncannyAutomator.recipe.message.error=""),o=!0}else UncannyAutomator.dev.developerMode&&console.error(O('%s: The action "%s" isn\'t defined',["recipeObject",e]));return o},P=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!1,a=["add","delete","clean","reset","update","get"];if(et(e)&&it(e,a))switch(e){case"add":n=i().extend({isValid:!1,isLive:!1},n);var r=["id","itemType"];if(it(r,Object.keys(n)))et(UncannyAutomator.recipe.items[n.id])||(UncannyAutomator.recipe.items[n.id]=n,t("clean",{}),o=!0);else{var s=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["itemsObject",s]))}break;case"delete":n=i().extend({isValid:!1},n),nt(n.id)?UncannyAutomator.dev.developerMode&&console.error(O("%s: Invalid item ID",["itemsObject"])):et(UncannyAutomator.recipe.items[n.id])?(delete UncannyAutomator.recipe.items[n.id],o=!0):UncannyAutomator.dev.developerMode&&console.error(O("%s: We didn't find an item with this the ID %s",["itemsObject",n.id]));break;case"clean":var c={};i().each(UncannyAutomator.recipe.items,(function(t,e){et(e)&&(c[t]=e)})),UncannyAutomator.recipe.items=c,o=!0;break;case"update":nt(n.id)?UncannyAutomator.dev.developerMode&&console.error(O("%s: Invalid item ID",["itemsObject"])):et(UncannyAutomator.recipe.items[n.id])?(UncannyAutomator.recipe.items[n.id]=i().extend({},UncannyAutomator.recipe.items[n.id],n),o=!0):UncannyAutomator.dev.developerMode&&console.error(O("%s: We didn't find an item with this the ID %s",["itemsObject",n.id]));break;case"reset":UncannyAutomator.recipe.items={},o=!0;break;case"get":if(nt(n.filter))o=UncannyAutomator.recipe.items;else{var l={};i().each(UncannyAutomator.recipe.items,(function(t,e){var o=!0;i().each(n.filter,(function(t,n){e[t]!=n&&(o=!1)})),o&&(l[t]=e)})),o=l}}else UncannyAutomator.dev.developerMode&&console.error(O('%s: The action "%s" isn\'t defined',["itemsObject",e]));return o},R=function(){Object.entries(UncannyAutomator.integrations).forEach((function(t){var e=S(t,2),n=e[0],o=(e[1],{available:F(UncannyAutomator.triggers.filter((function(t){return t.integration==n})),"select_option_name",(function(t){return ct(t)})),unavailable:[]}),i={available:F(UncannyAutomator.actions.filter((function(t){return t.integration==n})),"select_option_name",(function(t){return ct(t)})),unavailable:[]};if((!et(UncannyAutomator.wp)||!UncannyAutomator.wp)&&et(UncannyAutomator.proFeatures)&&et(UncannyAutomator.proFeatures[n])){var a=UncannyAutomator.recipe.type;a="user"==a?"logged-in":a,o.unavailable=F(UncannyAutomator.proFeatures[n].triggers.filter((function(t){return t.type==a})),"name",(function(t){return ct(t)})),i.unavailable=F(UncannyAutomator.proFeatures[n].actions,"name",(function(t){return ct(t)}))}o.allItemsArePro=o.available.every((function(t){return!!et(t.is_pro)&&t.is_pro})),i.allItemsArePro=i.available.every((function(t){return!!et(t.is_pro)&&t.is_pro})),o.hasAvailableItems=o.available.length>0,i.hasAvailableItems=i.available.length>0,o.hasUnavailableItems=o.unavailable.length>0,i.hasUnavailableItems=i.unavailable.length>0,o.hasTriggers=o.hasAvailableItems||o.unavailable.length>0,i.hasActions=i.hasAvailableItems||i.unavailable.length>0,UncannyAutomator.integrations[n].items={triggers:o,actions:i},T({integrationCode:n})}))},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return et(n)||(n=function(t){return t}),Array.isArray(t)&&!nt(t)&&(t=t.sort((function(t,o){var i=0;if(et(t[e])&&et(o[e])){var a=n(t[e]),r=n(o[e]);i=(i=(i=a.localeCompare(r))>0?1:i)<0?-1:i}return i}))),t},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggers",n=arguments.length>2?arguments[2]:void 0;n=Object.assign({addDeprecatedItems:!1},n);var o={available:{},unavailable:{}};return["triggers","actions"].includes(e="action"==(e="trigger"==e?"triggers":e)?"actions":e)&&(nt(t)||et(UncannyAutomator.integrations[t])&&(o=i().extend(!0,{},UncannyAutomator.integrations[t].items[e]),n.addDeprecatedItems||(o=V(o)))),o},V=function(t){return t.available=t.available.filter((function(t){return!t.is_deprecated})),t.hasAvailableItems=t.available.length>0,et(t.hasTriggers)?t.hasTriggers=t.hasAvailableItems||t.unavailable.length>0:et(t.hasActions)&&(t.hasActions=t.hasAvailableItems||t.unavailable.length>0),t.allItemsArePro=t.available.every((function(t){return!!et(t.is_pro)&&t.is_pro})),t},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,o=["set-step","get-step","set-source","update-fields","reset-fields"];if(et(t)&&it(t,o)){var a=[];switch(t){case"set-step":if(it(a=["step"],Object.keys(e)))UncannyAutomator.recipe.userSelector.step=e.step;else{var r=JSON.stringify(at(e,a));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["userSelectorObject",r]))}break;case"get-step":var s="select-source";et(UncannyAutomator.recipe.userSelector.step)?s=UncannyAutomator.recipe.userSelector.step:nt(UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source])||(s="show-sentence",UncannyAutomator.recipe.userSelector.isValid=!0),n=s;break;case"set-source":if(it(a=["source"],Object.keys(e)))UncannyAutomator.recipe.userSelector.source=e.source;else{var c=JSON.stringify(at(e,a));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["userSelectorObject",c]))}break;case"update-fields":if(it(a=["source","data"],Object.keys(e)))["existingUser","newUser"].includes(e.source)?(nt(UncannyAutomator.recipe.userSelector.data)&&(UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}),UncannyAutomator.recipe.userSelector.data[e.source]=i().extend({},UncannyAutomator.recipe.userSelector.data[e.source],e.data)):UncannyAutomator.dev.developerMode&&console.error(O("%s: The source parameter is invalid. Valid values are: %s",["userSelectorObject",["existingUser","newUser"]]));else{var l=JSON.stringify(at(e,a));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["userSelectorObject",l]))}break;case"reset-fields":UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}}}else UncannyAutomator.dev.developerMode&&console.error(O('%s: The action "%s" isn\'t defined',["userSelectorObject",t]));return n},q=function(){["user","anonymous"].includes(UncannyAutomator.recipe.type)&&(UncannyAutomator.dev.developerMode&&(lt("Filter Automator items",!0,{collapseGroup:!0}),console.log(O("Current recipe type: %s",[UncannyAutomator.recipe.type]))),UncannyAutomator.triggers=UncannyAutomator.triggers.filter((function(t){return UncannyAutomator.dev.developerMode&&(console.log(t),t.type==UncannyAutomator.recipe.type?ut("success","Keep"):ut("error","Remove")),t.type==UncannyAutomator.recipe.type})),UncannyAutomator.dev.developerMode&&console.groupEnd())},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=["add","delete","update","change_post_status","recipe_completions_allowed","recipe_max_completions_allowed","change_post_title","change_post_recipe_type","user-selector","set_recipe_terms","schedule_action","remove_schedule","set_recipe_requires_user","actions_order","actions_conditions_update"],s=H();a=Object.assign({requiresRecipesObject:!0,renderUI:!0,errorMessaging:{accessDenied:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,content:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(t,"</strong>")])},notFound:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.title,content:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.content,['<a href="'.concat(UncannyAutomator.dev.permalinksURL,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.sitePermalinks,"</a>"),'<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])},timeout:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.content},serverError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.title,content:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])},parserError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.content},dataMissing:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.title,content:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.contactSupport,"</a>"),'<a href="'.concat(UncannyAutomator.dev.automatorTools,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.automatorTools,"</a>")])},generic:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.title,content:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])}}},a),it(t,r)?i().ajax({method:"POST",url:"".concat(UncannyAutomator.restURL,"/").concat(t,"/"),data:"".concat(i().param(e),"&").concat(i().param({doing_rest:1})),dataType:"json",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",UncannyAutomator.nonce)}}).done((function(i,r,s){UncannyAutomator.dev.developerMode&&(lt("âœ… REST: ".concat(t),!0,{collapseGroup:!0}),console.log("Endpoint: ".concat(t)),console.log("Data:"),console.log(e),console.log("Response:"),console.log(i),console.groupEnd()),i.success?et(i.recipes_object)||!a.requiresRecipesObject?et(n)&&(a.requiresRecipesObject&&a.renderUI&&L("create",{allRecipes:i.recipes_object}),n(i)):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but the new recipes_object is missing."),et(o)&&o(i,"data-missing")):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but there were errors."),et(o)&&o(i,"data-missing"))})).fail((function(n,i,r){var s=i,c=a.errorMessaging.generic;switch(s){case"parsererror":s="parser-error",c=a.errorMessaging.parserError;break;case"error":403==n.status?(s="access-denied",c=a.errorMessaging.accessDenied):404==n.status?(s="not-found",c=a.errorMessaging.notFound):500==n.status&&(s="server-error",c=a.errorMessaging.serverError);break;case"timeout":s="timeout",c=a.errorMessaging.timeOut}UncannyAutomator.dev.developerMode&&(lt("âŒ REST: ".concat(t),!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),console.log(n),console.log(s),console.log(r),console.groupEnd()),et(o)&&o({success:!1},s),bt({title:c.title,warning:c.content,content:"",console:"Data sent:\n"+"".concat(JSON.stringify(e),"\n\n")+"errorCode: \n".concat(s,"\n\n")+"errorThrown:\n".concat(JSON.stringify(r),"\n\n")+"jqXHR: \n".concat(JSON.stringify(n)," \n\n"),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})})):UncannyAutomator.dev.developerMode&&console.error(O("The %s endPoint does not exists. The valid endpoints are %s",[t,r.join(", ")]))},H=function(){return ft(Ct(UncannyAutomator.dev.supportPage,{medium:"error-handler",content:"get-support-link"}),{subject:"technical-support",version:UncannyAutomator.version,site_url:UncannyAutomator.siteURL})},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;et(t)?(e=i().extend(!0,e,{action:t,nonce:UncannyAutomator.nonce}),i().ajax({method:"POST",dataType:"json",url:ajaxurl,data:e,success:function(i){UncannyAutomator.dev.developerMode&&(lt("AJAX call âœ…",!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),console.log(i),console.groupEnd()),et(i.status)&&"auth-failed"==i.status?(et(o)&&o(i),bt({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,warning:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(t,"</strong>")]),content:"",console:"Data sent:\n"+"".concat(JSON.stringify(e),"\n\n")+"errorCode: \naccess-denied\n\n",buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})):et(n)&&n(i,e)},statusCode:{403:function(n){UncannyAutomator.dev.developerMode&&(lt("AJAX call ðŸ”´",!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),lt("403: Access denied",!1,{bgColor:"#ff0000"}),console.groupEnd()),et(o)&&o(n),bt({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,warning:O(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(t,"</strong>")]),content:"",console:"Data sent:\n"+"".concat(JSON.stringify(e),"\n\n")+"errorCode: \naccess-denied\n\n",buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})}},fail:function(t){UncannyAutomator.dev.developerMode&&(lt("AJAX call ðŸ”´",!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),et(o)&&o(t)}})):UncannyAutomator.dev.developerMode&&console.error("We cannot do this AJAX request. {action} is not defined.")},W=function(t){var e={};return i().each(UncannyAutomator.recipe.items[t].options,(function(t,n){i().each(n.fields,(function(t,n){var o=n.getFieldID(),i=n.getValue();et(i)||(i=n.getAttributes().currentValue),"select"==n.getAttributes().fieldType&&"automator_custom_value"==i&&(e["".concat(o,"_custom")]=n.getSelectCustomValue()),e[o]=i,nt(i)||"select"!=n.getAttributes().fieldType||(e["".concat(o,"_readable")]=n.getReadableValue())}))})),e},Z=function(t,e){var n;return i().each(UncannyAutomator.recipe.items[t].options,(function(t,o){i().each(o.fields,(function(t,o){e==o.getFieldID()&&(n=o)}))})),n},G=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!nt(e)&&!nt(n)&&!nt(o)){var a={};if("trigger"==n||"action"==n){if(et(UncannyAutomator.integrations[e])){var r=UncannyAutomator.integrations[e];et(r.items)&&(a="trigger"==n?r.items.triggers.available:r.items.actions.available)}}else"closure"==n&&(a=UncannyAutomator.closures);i().each(a,(function(e,n){if(n.code==o)return t=n,!1}))}return t},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;N("set_recipe_requires_user",{recipePostID:UncannyAutomator.recipe.id,requiresUser:t},(function(n){n.success&&et(e)&&(UncannyAutomator.recipe.requiresUserData=t,z("user-selector").addClass("user-selector--show"),e(n))}),(function(t){UncannyAutomator.dev.developerMode&&console.log("Couldn't set the recipe requires user status"),et(n)&&n(t)}),{requiresRecipesObject:!1})},z=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},a=["metabox","items","item","optionGroup","lastItem","user-selector"];if(et(e)&&it(e,a)){var r=[];switch(e){case"metabox":if(n=i().extend({},n),it(r=["type"],Object.keys(n))){n.cssSelectorMetabox="","trigger"==n.type?n.cssSelectorMetabox="#recipe-triggers-ui":"action"==n.type&&(n.cssSelectorMetabox="#recipe-actions-ui");var s=i()(n.cssSelectorMetabox);o=s}else{var c=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["itemsObject",c]))}break;case"items":if(n=i().extend({},n),it(r=["type"],Object.keys(n))){var l=t("metabox",{type:n.type}),u=l.find(".item:not(.item--user-selector):not(.uap-item--actions-initial):not(.item--closure)");o=u}else{var d=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["itemsObject",d]))}break;case"item":if(n=i().extend({},n),it(r=["id"],Object.keys(n))){n.cssSelector='.uap .item[data-id="'.concat(n.id,'"]');var p=i()(n.cssSelector),m=p.find(".uap-item-inner-content");o.item=p,o.contentContainer=m}else{var f=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["itemsObject",f]))}break;case"optionGroup":if(n=i().extend({},n),it(r=["itemID","groupID"],Object.keys(n))){var h=t("item",{id:n.itemID}).item;n.cssSelectorTokenInSentence='.item-title__token[data-token-id="'.concat(n.groupID,'"]'),n.cssSelectorFieldsContainer='.item-options__group[data-optiongroup="'.concat(n.groupID,'"]');var g=h.find(n.cssSelectorTokenInSentence),y=h.find(n.cssSelectorFieldsContainer),v=h.find(".item-options");o.tokenInSentence=g,o.fieldsContainer=y,o.optionsContainer=v}else{var _=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["itemsObject",_]))}break;case"lastItem":if(n=i().extend({},n),it(r=["type"],Object.keys(n))){var b=t("metabox",{type:n.type}),w=b.find(".item:not(.item--user-selector):not(.uap-item--actions-initial):not(.item--closure)").last();o=w}else{var A=JSON.stringify(at(n,r));UncannyAutomator.dev.developerMode&&console.error(O("%s: Some attributes are missing: %s",["itemsObject",A]))}break;case"user-selector":o=i()(".user-selector")}}else UncannyAutomator.dev.developerMode&&console.error(O('%s: The element "%s" isn\'t defined',["getDOMElements",e]));return o},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={url:"",node:null},n=UncannyAutomator.integrations[t];return et(n)&&(e.node=document.createElement("img"),et(n.icon_svg)?(e.url=n.icon_svg,e.node.setAttribute("src",n.icon_svg),e.node.setAttribute("alt",n.name)):et(n.icon_32)&&et(n.icon_64)&&(e.url={icon16:n.icon_16,icon32:n.icon_32,icon64:n.icon_64},e.node.setAttribute("src",n.icon_32),e.node.setAttribute("srcset",O("%s 1x, %s 2x",[n.icon_32,n.icon_64])),e.node.setAttribute("alt",n.name))),e},X=function(){return["select","textarea","text","url","email","int","float","checkbox","radio","group","date","time","repeater"]},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null;if(o={plain:"",brackets:"",html:i()("<div/>"),elements:{normal:[],token:[]},parts:[]},e=e.trim(),!nt(e)){var a,r=new RegExp(/\{\{(.*?)\}\}/gm),s=[],c=[],l=e,u=0,d=(e=e.replace(r,(function(e,o){var i,a=o.split(":"),r=a[0],s=a[1],d=et(a[2])?a[2]:s;return o={type:"token",id:s,text:r,optionsID:d,hasFields:et(t.options[d])},et(n[o.id])&&("automator_custom_value"==n[o.id]&&et(n[O("%s_custom",[o.id])])?i=n[O("%s_custom",[o.id])]:et(n[O("%s_readable",[o.id])])&&(i=n[O("%s_readable",[o.id])]),o.originalText=o.text,o.text=et(i)?i:n[o.id]),c.push(o),l=l.replace(e,"{{token:".concat(u,"}}")),u++,"{{v}}"}))).split("{{v}}"),p=0;for(i().each(d,(function(t,e){if(""!=e){var n={type:"normal",text:e};s.push(n),l=l.replace(e,"{{normal:".concat(p,"}}")),p++}}));null!==(a=r.exec(l));){var m=a[1].split(":");"normal"==(m={type:m[0],index:m[1]}).type?o.parts.push(s[m.index]):o.parts.push(c[m.index])}var f=null;i().each(o.parts,(function(e,n){if(o.plain+=n.text," "!=n.text){var a,s=n.text,c=!1,l=null;if("normal"==n.type||"token"==n.type&&!n.hasFields&&!t.isMissing)a={class:"item-title__normal"},o.brackets+=n.text;else{if(a={class:"item-title__token","data-token-id":n.id,"data-options-id":n.optionsID},et(t.options[n.optionsID])&&t.options[n.optionsID].isValid&&(a.class+=" item-title__token--filled"),et(n.originalText)){if(r.test(s)){et(f)||(f=new b.Z(t.itemType,"text",{includeGroupName:!1}));var u=f.renderTextWithTokens(s);et(u)&&(c=!0,l=u)}if(!c){var d=pt(s,30);d.isAbbreviated&&(a["uap-tooltip"]=s,s=d.text)}}o.brackets+="{{".concat(gt(s),"}}")}var p=i()("<span/>",a);c?p.append(l):p.text(gt(s)),o.elements[n.type].push(p),o.html.append(p)}else o.brackets+=n.text})),o.elements.normal=i()(o.elements.normal).map((function(t,e){return e.get()})),o.elements.token=i()(o.elements.token).map((function(t,e){return e.get()})).filter(":not(.item-title__normal)")}return UncannyAutomator.recipe.items[t.id].itemSentence=o,o},tt=function(t){var e=t.url,n=t.title,o=t.w,i=t.h,a=t.onClose,r=et(window.screenLeft)?window.screenLeft:window.screenX,s=et(window.screenTop)?window.screenTop:window.screenY,c=document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;window.innerWidth&&(c=window.innerWidth);var l=document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;window.innerHeight&&(l=window.innerHeight);var u=c/window.screen.availWidth,d=(c-o)/2/u+r,p=(l-i)/2/u+s,m=window.open(e,n,"\n\t\tscrollbars=yes,\n\t\twidth=".concat(o/u,", \n\t\theight=").concat(i/u,", \n\t\ttop=").concat(p,", \n\t\tleft=").concat(d,"\n\t\t"));return window.focus&&m.focus(),et(a)&&function t(){m.closed?a():setTimeout((function(){t()}),500)}(),m},et=function(t){return null!=t},nt=function(t){var e=!0;return et(t)&&(e=i().isArray(t)?0==t.length:st(t)?i().isEmptyObject(t):""==t),e},ot=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!0};return n.caseSensitive?t.toString()==e.toString():t.toString().toLowerCase()==e.toString().toLowerCase()},it=function(t,e){return Array.isArray(t)?0==at(t,e).length:-1!==i().inArray(t,e)},at=function(t,e){return i()(t).not(e).get()},rt=function(t){return"string"==typeof t},st=function(t){return null!==t&&"object"===D(t)},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(t=t.replace(/{{/g,e)).replace(/}}/g,n)},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(UncannyAutomator.dev.developerMode){et(n.bgColor)||(n.bgColor="#0790e8");var o="background: ".concat(n.bgColor,'; color: #fff; font-weight: 500; padding: 2px 6px; font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; border-radius: 8px;');e?et(n.collapseGroup)&&n.collapseGroup?console.groupCollapsed("%cAutomator",o,t):console.group("%cAutomator",o,t):console.log("%cAutomator",o,t)}},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(UncannyAutomator.dev.developerMode){var n=["color: #fff","padding: 2px 7px",'font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',"font-weight: normal"].join(";");"error"==t&&(n="background: #f13c3c; ".concat(n)),"success"==t&&(n="background: #40b528; ".concat(n)),console.log("%c".concat(e),n)}},dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={"&":"&amp;","<":"&lt;",">":"&gt;"},n=function(t){return e[t]||t};return t.replace(/[&<>]/g,n)},pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={isAbbreviated:!1,text:t};if(t.length>e){var o=Math.floor(e/2),i={start:t.substring(0,o),end:t.slice(-o)};n.text="".concat(i.start," ... ").concat(i.end),n.isAbbreviated=!0}return n},mt=function(){return"_".concat(Math.random().toString(36).substr(2,9))},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nt(t)&&(t=window.location.href);try{t=new URL(t)}catch(e){return t}for(var o=t.search.substr(1).split("&"),a=0,r=Object.entries(e);a<r.length;a++){var s=S(r[a],2),c=s[0],l=s[1];c=encodeURI(c),l=encodeURI(l);for(var u=o.length,d=void 0;u--;)if((d=o[u].split("="))[0]==c){d[1]=l,o[u]=d.join("=");break}u<0&&(o[o.length]=[c,l].join("="))}if(o=o.filter((function(t){var e=t.split("=");return!(nt(t)||nt(e[1]))})),t.search=o.join("&"),(n=i().extend({},{setAsURL:!1,refresh:!1},n)).setAsURL)if(n.refresh)window.location.href=t.href;else{var p=document.title;window.history.pushState({},p,t.href)}return t.href},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return nt(t)&&(t=window.location.href),(t=new URL(t)).searchParams.get(e)},gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.createElement("textarea");return e.innerHTML=t,e.value},yt=function(t,e){var n=0;return function(){var o=Date.now();if(n+e<o)return n=o,t.apply(undefined,M)}},vt=function(t,e){var n=-1;return function(){clearTimeout(n);var o=M;n=setTimeout((function(){t.apply(void 0,o)}),e)}},_t=function(t){var e=document.createElement("textarea");e.style.width="0px",e.style.height="0px",e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=i().extend(!0,{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.title,warning:"",content:UncannyAutomator.i18n.debugging.fatalErrorHandler.content,console:null,buttons:{confirm:{label:UncannyAutomator.i18n.debugging.learnMore,onClick:function(){window.open(UncannyAutomator.dev.debuggingURL,"_blank")}},cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}},t);var e,n="";try{i().each(UncannyAutomator.recipes_object,(function(t,n){n.ID==UncannyAutomator.recipe.id&&(e=n)}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{var o="====== ".concat(UncannyAutomator.i18n.debugging.recipeTitle," ====== \n"),a=UncannyAutomator.i18n.debugging.recipeTypeUser;"anonymous"==e.recipe_type&&(a=UncannyAutomator.i18n.debugging.recipeTypeAnonymous),o+="".concat(UncannyAutomator.i18n.debugging.recipeType,": ").concat(a);var r=UncannyAutomator.i18n.debugging.recipeStatusDraft;"publish"==e.post_status&&(r=UncannyAutomator.i18n.debugging.recipeStatusLive),n=o+="\n".concat(UncannyAutomator.i18n.debugging.recipeStatus,": ").concat(r)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{var s="=== ".concat(UncannyAutomator.i18n.debugging.recipeItemsTitle," === \n"),c=function(t){var e="publish"==t.post_status?UncannyAutomator.i18n.debugging.itemStatusLive:UncannyAutomator.i18n.debugging.itemStatusDraft;return"> ".concat(t.meta.integration," - ").concat(t.meta.code," - ").concat(e,"\n  (").concat(t.meta.sentence.replace(/\{\{|\:[a-zA-Z0-9]*\}\}/g,""),")\n  ").concat(JSON.stringify(t).replaceAll("<","&lt;").replaceAll(">","&gt;"),"\n")},l=e.triggers.map(c),u=l.length>0,d=e.actions.map(c),p=d.length>0,m=e.closures.map(c),f=m.length>0;u||p||f?(s+="".concat(UncannyAutomator.i18n.debugging.triggersTitle,"\n\n"),s+=u?l.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noTriggers),s+="\n".concat(UncannyAutomator.i18n.debugging.actionsTitle,"\n\n"),s+=p?d.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noActions),s+="\n".concat(UncannyAutomator.i18n.debugging.closuresTitle,"\n\n"),s+=f?m.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noClosures)):s+="".concat(UncannyAutomator.i18n.debugging.noRecipeItemsFound),n=""!==n?"".concat(n,"\n\n").concat(s):n}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{if(et(t.console)){UncannyAutomator.dev.developerMode&&console.error(t.console);var h="====== ".concat(UncannyAutomator.i18n.debugging.jsConsole," ====== \n");try{h+="".concat(t.console.stack.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(e){try{h+="".concat(t.console.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(e){h+=t.console}}n=""!==n?"".concat(n,"\n\n").concat(h):n}}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}var g={};et(t.buttons.cancel)&&(g.cancel=t.buttons.cancel.label),et(t.buttons.confirm)&&(g.confirm=t.buttons.confirm.label);var y=new w.Z({title:'<span class="modal__title-icon"><uo-icon id="exclamation-triangle"></uo-icon></span> '.concat(t.title),warning:"".concat(t.warning),content:"\n\t\t\t<div>\n\t\t\t\t".concat(nt(t.content)?"":t.content,'\n\t\t\t\t<div class="modal__content-code">\n\t\t\t\t\t<pre id="uap-debugging">').concat(n,"</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),buttons:g},{size:"extra-large",warningFirst:!0});y.setEvents({onConfirm:function(){t.buttons.confirm.onClick(y)},onCancel:function(){t.buttons.cancel.onClick(y)},afterSetEvents:function(){var t=i()("#uap-debugging");t.on("click",(function(){var e=document.createRange();e.selectNodeContents(t[0]),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}))}})},wt=function(t,e,n){var o={};return i().each(t,(function(t,i){i.meta[e]&&i.meta[e]==n&&(o[t]=i)})),o},At=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={};return i().each(t,(function(t,i){e in i.meta===n&&(o[t]=i)})),o},kt=function(t){Object.assign(document.createElement("a"),{target:"_blank",href:t}).click()},Ct=function(t,e){var n=e.medium,o=e.campaign,i=e.content,a={};return a.utm_source=et(UncannyAutomator.wp)&&UncannyAutomator.wp?"uncanny_automator_pro":"uncanny_automator",nt(n)||(a.utm_medium=n),nt(o)||(a.utm_campaign=o),nt(i)||(a.utm_content=i),nt(UncannyAutomator.marketing.utmR)||(a.utm_r=UncannyAutomator.marketing.utmR),ft(t,a)}},109:(t,e,n)=>{"use strict";n.d(e,{Z:()=>tt});var o=n(311),i=n.n(o);n(686);const a=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],r={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:t=>"undefined"!=typeof console&&console.warn(t),getWeek:t=>{const e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},s={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:t=>{const e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},c=s,l=(t,e=2)=>`000${t}`.slice(-1*e),u=t=>!0===t?1:0;function d(t,e){let n;return function(){clearTimeout(n),n=setTimeout((()=>t.apply(this,arguments)),e)}}const p=t=>t instanceof Array?t:[t];function m(t,e,n){if(!0===n)return t.classList.add(e);t.classList.remove(e)}function f(t,e,n){const o=window.document.createElement(t);return e=e||"",n=n||"",o.className=e,void 0!==n&&(o.textContent=n),o}function h(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function g(t,e){return e(t)?t:t.parentNode?g(t.parentNode,e):void 0}function y(t,e){const n=f("div","numInputWrapper"),o=f("input","numInput "+t),i=f("span","arrowUp"),a=f("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?o.type="number":(o.type="text",o.pattern="\\d*"),void 0!==e)for(const t in e)o.setAttribute(t,e[t]);return n.appendChild(o),n.appendChild(i),n.appendChild(a),n}function v(t){try{return"function"==typeof t.composedPath?t.composedPath()[0]:t.target}catch(e){return t.target}}const _=()=>{},b=(t,e,n)=>n.months[e?"shorthand":"longhand"][t],w={D:_,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:(t,e)=>{t.setHours(parseFloat(e))},H:(t,e)=>{t.setHours(parseFloat(e))},J:(t,e)=>{t.setDate(parseFloat(e))},K:(t,e,n)=>{t.setHours(t.getHours()%12+12*u(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:(t,e)=>{t.setSeconds(parseFloat(e))},U:(t,e)=>new Date(1e3*parseFloat(e)),W:function(t,e,n){const o=parseInt(e),i=new Date(t.getFullYear(),0,2+7*(o-1),0,0,0,0);return i.setDate(i.getDate()-i.getDay()+n.firstDayOfWeek),i},Y:(t,e)=>{t.setFullYear(parseFloat(e))},Z:(t,e)=>new Date(e),d:(t,e)=>{t.setDate(parseFloat(e))},h:(t,e)=>{t.setHours(parseFloat(e))},i:(t,e)=>{t.setMinutes(parseFloat(e))},j:(t,e)=>{t.setDate(parseFloat(e))},l:_,m:(t,e)=>{t.setMonth(parseFloat(e)-1)},n:(t,e)=>{t.setMonth(parseFloat(e)-1)},s:(t,e)=>{t.setSeconds(parseFloat(e))},u:(t,e)=>new Date(parseFloat(e)),w:_,y:(t,e)=>{t.setFullYear(2e3+parseFloat(e))}},A={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},k={Z:t=>t.toISOString(),D:function(t,e,n){return e.weekdays.shorthand[k.w(t,e,n)]},F:function(t,e,n){return b(k.n(t,e,n)-1,!1,e)},G:function(t,e,n){return l(k.h(t,e,n))},H:t=>l(t.getHours()),J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:(t,e)=>e.amPM[u(t.getHours()>11)],M:function(t,e){return b(t.getMonth(),!0,e)},S:t=>l(t.getSeconds()),U:t=>t.getTime()/1e3,W:function(t,e,n){return n.getWeek(t)},Y:t=>l(t.getFullYear(),4),d:t=>l(t.getDate()),h:t=>t.getHours()%12?t.getHours()%12:12,i:t=>l(t.getMinutes()),j:t=>t.getDate(),l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:t=>l(t.getMonth()+1),n:t=>t.getMonth()+1,s:t=>t.getSeconds(),u:t=>t.getTime(),w:t=>t.getDay(),y:t=>String(t.getFullYear()).substring(2)},C=({config:t=r,l10n:e=s,isMobile:n=!1})=>(o,i,a)=>{const r=a||e;return void 0===t.formatDate||n?i.split("").map(((e,n,i)=>k[e]&&"\\"!==i[n-1]?k[e](o,r,t):"\\"!==e?e:"")).join(""):t.formatDate(o,i,r)},T=({config:t=r,l10n:e=s})=>(n,o,i,a)=>{if(0!==n&&!n)return;const s=a||e;let c;const l=n;if(n instanceof Date)c=new Date(n.getTime());else if("string"!=typeof n&&void 0!==n.toFixed)c=new Date(n);else if("string"==typeof n){const e=o||(t||r).dateFormat,a=String(n).trim();if("today"===a)c=new Date,i=!0;else if(/Z$/.test(a)||/GMT$/.test(a))c=new Date(n);else if(t&&t.parseDate)c=t.parseDate(n,e);else{c=t&&t.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);let o,i=[];for(let t=0,a=0,r="";t<e.length;t++){const l=e[t],u="\\"===l,d="\\"===e[t-1]||u;if(A[l]&&!d){r+=A[l];const t=new RegExp(r).exec(n);t&&(o=!0)&&i["Y"!==l?"push":"unshift"]({fn:w[l],val:t[++a]})}else u||(r+=".");i.forEach((({fn:t,val:e})=>c=t(c,e,s)||c))}c=o?c:void 0}}if(c instanceof Date&&!isNaN(c.getTime()))return!0===i&&c.setHours(0,0,0,0),c;t.errorHandler(new Error(`Invalid date provided: ${l}`))};function U(t,e,n=!0){return!1!==n?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}function E(t){let e=t.defaultHour,n=t.defaultMinute,o=t.defaultSeconds;if(void 0!==t.minDate){const i=t.minDate.getHours(),a=t.minDate.getMinutes(),r=t.minDate.getSeconds();e<i&&(e=i),e===i&&n<a&&(n=a),e===i&&n===a&&o<r&&(o=t.minDate.getSeconds())}if(void 0!==t.maxDate){const i=t.maxDate.getHours(),a=t.maxDate.getMinutes();e=Math.min(e,i),e===i&&(n=Math.min(a,n)),e===i&&n===a&&(o=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:o}}function x(t,e){const n={config:Object.assign(Object.assign({},r),D.defaultConfig),l10n:c};function o(t){return t.bind(n)}function i(){const t=n.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){const e=(n.days.offsetWidth+1)*t.showMonths;n.daysContainer.style.width=e+"px",n.calendarContainer.style.width=e+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function s(t){if(0===n.selectedDates.length){const t=void 0===n.config.minDate||U(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),e=E(n.config);t.setHours(e.hours,e.minutes,e.seconds,t.getMilliseconds()),n.selectedDates=[t],n.latestSelectedDateObj=t}void 0!==t&&"blur"!==t.type&&function(t){t.preventDefault();const e="keydown"===t.type,o=v(t),i=o;void 0!==n.amPM&&o===n.amPM&&(n.amPM.textContent=n.l10n.amPM[u(n.amPM.textContent===n.l10n.amPM[0])]);const a=parseFloat(i.getAttribute("min")),r=parseFloat(i.getAttribute("max")),s=parseFloat(i.getAttribute("step")),c=parseInt(i.value,10);let d=c+s*(t.delta||(e?38===t.which?1:-1:0));if(void 0!==i.value&&2===i.value.length){const t=i===n.hourElement,e=i===n.minuteElement;d<a?(d=r+d+u(!t)+(u(t)&&u(!n.amPM)),e&&$(void 0,-1,n.hourElement)):d>r&&(d=i===n.hourElement?d-r-u(!n.amPM):a,e&&$(void 0,1,n.hourElement)),n.amPM&&t&&(1===s?d+c===23:Math.abs(d-c)>s)&&(n.amPM.textContent=n.l10n.amPM[u(n.amPM.textContent===n.l10n.amPM[0])]),i.value=l(d)}}(t);const e=n._input.value;_(),yt(),n._input.value!==e&&n._debouncedChange()}function _(){if(void 0===n.hourElement||void 0===n.minuteElement)return;let t=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,e=(parseInt(n.minuteElement.value,10)||0)%60,o=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;var i,a;void 0!==n.amPM&&(i=t,a=n.amPM.textContent,t=i%12+12*u(a===n.l10n.amPM[1]));const r=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===U(n.latestSelectedDateObj,n.config.minDate,!0);if(void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===U(n.latestSelectedDateObj,n.config.maxDate,!0)){const i=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;t=Math.min(t,i.getHours()),t===i.getHours()&&(e=Math.min(e,i.getMinutes())),e===i.getMinutes()&&(o=Math.min(o,i.getSeconds()))}if(r){const i=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;t=Math.max(t,i.getHours()),t===i.getHours()&&e<i.getMinutes()&&(e=i.getMinutes()),e===i.getMinutes()&&(o=Math.max(o,i.getSeconds()))}k(t,e,o)}function w(t){const e=t||n.latestSelectedDateObj;e&&k(e.getHours(),e.getMinutes(),e.getSeconds())}function k(t,e,o){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(t%24,e,o||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=l(n.config.time_24hr?t:(12+t)%12+12*u(t%12==0)),n.minuteElement.value=l(e),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[u(t>=12)]),void 0!==n.secondElement&&(n.secondElement.value=l(o)))}function x(t){const e=v(t),n=parseInt(e.value)+(t.delta||0);(n/1e3>1||"Enter"===t.key&&!/[^\d]/.test(n.toString()))&&Y(n)}function M(t,e,o,i){return e instanceof Array?e.forEach((e=>M(t,e,o,i))):t instanceof Array?t.forEach((t=>M(t,e,o,i))):(t.addEventListener(e,o,i),void n._handlers.push({remove:()=>t.removeEventListener(e,o)}))}function S(){pt("onChange")}function I(t,e){const o=void 0!==t?n.parseDate(t):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),i=n.currentYear,a=n.currentMonth;try{void 0!==o&&(n.currentYear=o.getFullYear(),n.currentMonth=o.getMonth())}catch(t){t.message="Invalid date supplied: "+o,n.config.errorHandler(t)}e&&n.currentYear!==i&&(pt("onYearChange"),K()),!e||n.currentYear===i&&n.currentMonth===a||pt("onMonthChange"),n.redraw()}function O(t){const e=v(t);~e.className.indexOf("arrow")&&$(t,e.classList.contains("arrowUp")?1:-1)}function $(t,e,n){const o=t&&v(t),i=n||o&&o.parentNode&&o.parentNode.firstChild,a=mt("increment");a.delta=e,i&&i.dispatchEvent(a)}function L(t,e,o,i){const a=z(e,!0),r=f("span","flatpickr-day "+t,e.getDate().toString());return r.dateObj=e,r.$i=i,r.setAttribute("aria-label",n.formatDate(e,n.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===U(e,n.now)&&(n.todayDateElem=r,r.classList.add("today"),r.setAttribute("aria-current","date")),a?(r.tabIndex=-1,ft(e)&&(r.classList.add("selected"),n.selectedDateElem=r,"range"===n.config.mode&&(m(r,"startRange",n.selectedDates[0]&&0===U(e,n.selectedDates[0],!0)),m(r,"endRange",n.selectedDates[1]&&0===U(e,n.selectedDates[1],!0)),"nextMonthDay"===t&&r.classList.add("inRange")))):r.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(t){return!("range"!==n.config.mode||n.selectedDates.length<2)&&U(t,n.selectedDates[0])>=0&&U(t,n.selectedDates[1])<=0}(e)&&!ft(e)&&r.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==t&&o%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(e)+"</span>"),pt("onDayCreate",r),r}function P(t){t.focus(),"range"===n.config.mode&&tt(t)}function R(t){const e=t>0?0:n.config.showMonths-1,o=t>0?n.config.showMonths:-1;for(let i=e;i!=o;i+=t){const e=n.daysContainer.children[i],o=t>0?0:e.children.length-1,a=t>0?e.children.length:-1;for(let n=o;n!=a;n+=t){const t=e.children[n];if(-1===t.className.indexOf("hidden")&&z(t.dateObj))return t}}}function F(t,e){const o=J(document.activeElement||document.body),i=void 0!==t?t:o?document.activeElement:void 0!==n.selectedDateElem&&J(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&J(n.todayDateElem)?n.todayDateElem:R(e>0?1:-1);void 0===i?n._input.focus():o?function(t,e){const o=-1===t.className.indexOf("Month")?t.dateObj.getMonth():n.currentMonth,i=e>0?n.config.showMonths:-1,a=e>0?1:-1;for(let r=o-n.currentMonth;r!=i;r+=a){const i=n.daysContainer.children[r],s=o-n.currentMonth===r?t.$i+e:e<0?i.children.length-1:0,c=i.children.length;for(let n=s;n>=0&&n<c&&n!=(e>0?c:-1);n+=a){const o=i.children[n];if(-1===o.className.indexOf("hidden")&&z(o.dateObj)&&Math.abs(t.$i-n)>=Math.abs(e))return P(o)}}n.changeMonth(a),F(R(a),0)}(i,e):P(i)}function j(t,e){const o=(new Date(t,e,1).getDay()-n.l10n.firstDayOfWeek+7)%7,i=n.utils.getDaysInMonth((e-1+12)%12,t),a=n.utils.getDaysInMonth(e,t),r=window.document.createDocumentFragment(),s=n.config.showMonths>1,c=s?"prevMonthDay hidden":"prevMonthDay",l=s?"nextMonthDay hidden":"nextMonthDay";let u=i+1-o,d=0;for(;u<=i;u++,d++)r.appendChild(L(c,new Date(t,e-1,u),u,d));for(u=1;u<=a;u++,d++)r.appendChild(L("",new Date(t,e,u),u,d));for(let i=a+1;i<=42-o&&(1===n.config.showMonths||d%7!=0);i++,d++)r.appendChild(L(l,new Date(t,e+1,i%a),i,d));const p=f("div","dayContainer");return p.appendChild(r),p}function V(){if(void 0===n.daysContainer)return;h(n.daysContainer),n.weekNumbers&&h(n.weekNumbers);const t=document.createDocumentFragment();for(let e=0;e<n.config.showMonths;e++){const o=new Date(n.currentYear,n.currentMonth,1);o.setMonth(n.currentMonth+e),t.appendChild(j(o.getFullYear(),o.getMonth()))}n.daysContainer.appendChild(t),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&tt()}function K(){if(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)return;const t=function(t){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&t<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&t>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(let e=0;e<12;e++){if(!t(e))continue;const o=f("option","flatpickr-monthDropdown-month");o.value=new Date(n.currentYear,e).getMonth().toString(),o.textContent=b(e,n.config.shorthandCurrentMonth,n.l10n),o.tabIndex=-1,n.currentMonth===e&&(o.selected=!0),n.monthsDropdownContainer.appendChild(o)}}function q(){const t=f("div","flatpickr-month"),e=window.document.createDocumentFragment();let o;n.config.showMonths>1||"static"===n.config.monthSelectorType?o=f("span","cur-month"):(n.monthsDropdownContainer=f("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),M(n.monthsDropdownContainer,"change",(t=>{const e=v(t),o=parseInt(e.value,10);n.changeMonth(o-n.currentMonth),pt("onMonthChange")})),K(),o=n.monthsDropdownContainer);const i=y("cur-year",{tabindex:"-1"}),a=i.getElementsByTagName("input")[0];a.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&a.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(a.setAttribute("max",n.config.maxDate.getFullYear().toString()),a.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());const r=f("div","flatpickr-current-month");return r.appendChild(o),r.appendChild(i),e.appendChild(r),t.appendChild(e),{container:t,yearElement:a,monthElement:o}}function N(){h(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(let t=n.config.showMonths;t--;){const t=q();n.yearElements.push(t.yearElement),n.monthElements.push(t.monthElement),n.monthNav.appendChild(t.container)}n.monthNav.appendChild(n.nextMonthNav)}function H(){n.weekdayContainer?h(n.weekdayContainer):n.weekdayContainer=f("div","flatpickr-weekdays");for(let t=n.config.showMonths;t--;){const t=f("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(t)}return B(),n.weekdayContainer}function B(){if(!n.weekdayContainer)return;const t=n.l10n.firstDayOfWeek;let e=[...n.l10n.weekdays.shorthand];t>0&&t<e.length&&(e=[...e.splice(t,e.length),...e.splice(0,t)]);for(let t=n.config.showMonths;t--;)n.weekdayContainer.children[t].innerHTML=`\n      <span class='flatpickr-weekday'>\n        ${e.join("</span><span class='flatpickr-weekday'>")}\n      </span>\n      `}function W(t,e=!0){const o=e?t:t-n.currentMonth;o<0&&!0===n._hidePrevMonthArrow||o>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=o,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,pt("onYearChange"),K()),V(),pt("onMonthChange"),ht())}function Z(t){return!(!n.config.appendTo||!n.config.appendTo.contains(t))||n.calendarContainer.contains(t)}function G(t){if(n.isOpen&&!n.config.inline){const e=v(t),o=Z(e),i=e===n.input||e===n.altInput||n.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(n.input)||~t.path.indexOf(n.altInput)),a="blur"===t.type?i&&t.relatedTarget&&!Z(t.relatedTarget):!i&&!o&&!Z(t.relatedTarget),r=!n.config.ignoredFocusElements.some((t=>t.contains(e)));a&&r&&(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&s(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&(n.clear(!1),n.redraw()))}}function Y(t){if(!t||n.config.minDate&&t<n.config.minDate.getFullYear()||n.config.maxDate&&t>n.config.maxDate.getFullYear())return;const e=t,o=n.currentYear!==e;n.currentYear=e||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),o&&(n.redraw(),pt("onYearChange"),K())}function z(t,e=!0){var o;const i=n.parseDate(t,void 0,e);if(n.config.minDate&&i&&U(i,n.config.minDate,void 0!==e?e:!n.minDateHasTime)<0||n.config.maxDate&&i&&U(i,n.config.maxDate,void 0!==e?e:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===i)return!1;const a=!!n.config.enable,r=null!==(o=n.config.enable)&&void 0!==o?o:n.config.disable;for(let t,e=0;e<r.length;e++){if(t=r[e],"function"==typeof t&&t(i))return a;if(t instanceof Date&&void 0!==i&&t.getTime()===i.getTime())return a;if("string"==typeof t){const e=n.parseDate(t,void 0,!0);return e&&e.getTime()===i.getTime()?a:!a}if("object"==typeof t&&void 0!==i&&t.from&&t.to&&i.getTime()>=t.from.getTime()&&i.getTime()<=t.to.getTime())return a}return!a}function J(t){return void 0!==n.daysContainer&&-1===t.className.indexOf("hidden")&&-1===t.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(t)}function X(t){t.target!==n._input||!(n.selectedDates.length>0||n._input.value.length>0)||t.relatedTarget&&Z(t.relatedTarget)||n.setDate(n._input.value,!0,t.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function Q(e){const o=v(e),i=n.config.wrap?t.contains(o):o===n._input,a=n.config.allowInput,r=n.isOpen&&(!a||!i),c=n.config.inline&&i&&!a;if(13===e.keyCode&&i){if(a)return n.setDate(n._input.value,!0,o===n.altInput?n.config.altFormat:n.config.dateFormat),o.blur();n.open()}else if(Z(o)||r||c){const t=!!n.timeContainer&&n.timeContainer.contains(o);switch(e.keyCode){case 13:t?(e.preventDefault(),s(),st()):ct(e);break;case 27:e.preventDefault(),st();break;case 8:case 46:i&&!n.config.allowInput&&(e.preventDefault(),n.clear());break;case 37:case 39:if(t||i)n.hourElement&&n.hourElement.focus();else if(e.preventDefault(),void 0!==n.daysContainer&&(!1===a||document.activeElement&&J(document.activeElement))){const t=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),W(t),F(R(1),0)):F(void 0,t)}break;case 38:case 40:e.preventDefault();const r=40===e.keyCode?1:-1;n.daysContainer&&void 0!==o.$i||o===n.input||o===n.altInput?e.ctrlKey?(e.stopPropagation(),Y(n.currentYear-r),F(R(1),0)):t||F(void 0,7*r):o===n.currentYearElement?Y(n.currentYear-r):n.config.enableTime&&(!t&&n.hourElement&&n.hourElement.focus(),s(e),n._debouncedChange());break;case 9:if(t){const t=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((t=>t)),i=t.indexOf(o);if(-1!==i){const o=t[i+(e.shiftKey?-1:1)];e.preventDefault(),(o||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(o)&&e.shiftKey&&(e.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&o===n.amPM)switch(e.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],_(),yt();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],_(),yt()}(i||Z(o))&&pt("onKeyDown",e)}function tt(t){if(1!==n.selectedDates.length||t&&(!t.classList.contains("flatpickr-day")||t.classList.contains("flatpickr-disabled")))return;const e=t?t.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),o=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),i=Math.min(e,n.selectedDates[0].getTime()),a=Math.max(e,n.selectedDates[0].getTime());let r=!1,s=0,c=0;for(let t=i;t<a;t+=864e5)z(new Date(t),!0)||(r=r||t>i&&t<a,t<o&&(!s||t>s)?s=t:t>o&&(!c||t<c)&&(c=t));for(let i=0;i<n.config.showMonths;i++){const a=n.daysContainer.children[i];for(let i=0,p=a.children.length;i<p;i++){const p=a.children[i],m=p.dateObj.getTime(),f=s>0&&m<s||c>0&&m>c;f?(p.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((t=>{p.classList.remove(t)}))):r&&!f||(["startRange","inRange","endRange","notAllowed"].forEach((t=>{p.classList.remove(t)})),void 0!==t&&(t.classList.add(e<=n.selectedDates[0].getTime()?"startRange":"endRange"),o<e&&m===o?p.classList.add("startRange"):o>e&&m===o&&p.classList.add("endRange"),m>=s&&(0===c||m<=c)&&(u=o,d=e,(l=m)>Math.min(u,d)&&l<Math.max(u,d))&&p.classList.add("inRange")))}}var l,u,d}function et(){!n.isOpen||n.config.static||n.config.inline||at()}function nt(t){return e=>{const o=n.config[`_${t}Date`]=n.parseDate(e,n.config.dateFormat),i=n.config[`_${"min"===t?"max":"min"}Date`];void 0!==o&&(n["min"===t?"minDateHasTime":"maxDateHasTime"]=o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((t=>z(t))),n.selectedDates.length||"min"!==t||w(o),yt()),n.daysContainer&&(rt(),void 0!==o?n.currentYearElement[t]=o.getFullYear().toString():n.currentYearElement.removeAttribute(t),n.currentYearElement.disabled=!!i&&void 0!==o&&i.getFullYear()===o.getFullYear())}}function ot(){return n.config.wrap?t.querySelector("[data-input]"):t}function it(){"object"!=typeof n.config.locale&&void 0===D.l10ns[n.config.locale]&&n.config.errorHandler(new Error(`flatpickr: invalid locale ${n.config.locale}`)),n.l10n=Object.assign(Object.assign({},D.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?D.l10ns[n.config.locale]:void 0),A.K=`(${n.l10n.amPM[0]}|${n.l10n.amPM[1]}|${n.l10n.amPM[0].toLowerCase()}|${n.l10n.amPM[1].toLowerCase()})`,void 0===Object.assign(Object.assign({},e),JSON.parse(JSON.stringify(t.dataset||{}))).time_24hr&&void 0===D.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=C(n),n.parseDate=T({config:n.config,l10n:n.l10n})}function at(t){if("function"==typeof n.config.position)return void n.config.position(n,t);if(void 0===n.calendarContainer)return;pt("onPreCalendarPosition");const e=t||n._positionElement,o=Array.prototype.reduce.call(n.calendarContainer.children,((t,e)=>t+e.offsetHeight),0),i=n.calendarContainer.offsetWidth,a=n.config.position.split(" "),r=a[0],s=a.length>1?a[1]:null,c=e.getBoundingClientRect(),l=window.innerHeight-c.bottom,u="above"===r||"below"!==r&&l<o&&c.top>o,d=window.pageYOffset+c.top+(u?-o-2:e.offsetHeight+2);if(m(n.calendarContainer,"arrowTop",!u),m(n.calendarContainer,"arrowBottom",u),n.config.inline)return;let p=window.pageXOffset+c.left,f=!1,h=!1;"center"===s?(p-=(i-c.width)/2,f=!0):"right"===s&&(p-=i-c.width,h=!0),m(n.calendarContainer,"arrowLeft",!f&&!h),m(n.calendarContainer,"arrowCenter",f),m(n.calendarContainer,"arrowRight",h);const g=window.document.body.offsetWidth-(window.pageXOffset+c.right),y=p+i>window.document.body.offsetWidth,v=g+i>window.document.body.offsetWidth;if(m(n.calendarContainer,"rightMost",y),!n.config.static)if(n.calendarContainer.style.top=`${d}px`,y)if(v){const t=function(){let t=null;for(let e=0;e<document.styleSheets.length;e++){const n=document.styleSheets[e];try{n.cssRules}catch(t){continue}t=n;break}return null!=t?t:function(){const t=document.createElement("style");return document.head.appendChild(t),t.sheet}()}();if(void 0===t)return;const e=window.document.body.offsetWidth,o=Math.max(0,e/2-i/2),a=".flatpickr-calendar.centerMost:before",r=".flatpickr-calendar.centerMost:after",s=t.cssRules.length,l=`{left:${c.left}px;right:auto;}`;m(n.calendarContainer,"rightMost",!1),m(n.calendarContainer,"centerMost",!0),t.insertRule(`${a},${r}${l}`,s),n.calendarContainer.style.left=`${o}px`,n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=`${g}px`;else n.calendarContainer.style.left=`${p}px`,n.calendarContainer.style.right="auto"}function rt(){n.config.noCalendar||n.isMobile||(K(),ht(),V())}function st(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function ct(t){t.preventDefault(),t.stopPropagation();const e=g(v(t),(t=>t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")));if(void 0===e)return;const o=e,i=n.latestSelectedDateObj=new Date(o.dateObj.getTime()),a=(i.getMonth()<n.currentMonth||i.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=o,"single"===n.config.mode)n.selectedDates=[i];else if("multiple"===n.config.mode){const t=ft(i);t?n.selectedDates.splice(parseInt(t),1):n.selectedDates.push(i)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=i,n.selectedDates.push(i),0!==U(i,n.selectedDates[0],!0)&&n.selectedDates.sort(((t,e)=>t.getTime()-e.getTime())));if(_(),a){const t=n.currentYear!==i.getFullYear();n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth(),t&&(pt("onYearChange"),K()),pt("onMonthChange")}if(ht(),V(),yt(),a||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():P(o),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){const t="single"===n.config.mode&&!n.config.enableTime,e="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(t||e)&&st()}S()}n.parseDate=T({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=M,n._setHoursFromDate=w,n._positionCalendar=at,n.changeMonth=W,n.changeYear=Y,n.clear=function(t=!0,e=!0){if(n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===e&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){const{hours:t,minutes:e,seconds:o}=E(n.config);k(t,e,o)}n.redraw(),t&&pt("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),pt("onClose")},n._createElement=f,n.destroy=function(){void 0!==n.config&&pt("onDestroy");for(let t=n._handlers.length;t--;)n._handlers[t].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){const t=n.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((t=>{try{delete n[t]}catch(t){}}))},n.isEnabled=z,n.jumpToDate=I,n.open=function(t,e=n._positionElement){if(!0===n.isMobile){if(t){t.preventDefault();const e=v(t);e&&e.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void pt("onOpen")}if(n._input.disabled||n.config.inline)return;const o=n.isOpen;n.isOpen=!0,o||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),pt("onOpen"),at(e)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==t&&n.timeContainer.contains(t.relatedTarget)||setTimeout((()=>n.hourElement.select()),50))},n.redraw=rt,n.set=function(t,e){if(null!==t&&"object"==typeof t){Object.assign(n.config,t);for(const e in t)void 0!==lt[e]&&lt[e].forEach((t=>t()))}else n.config[t]=e,void 0!==lt[t]?lt[t].forEach((t=>t())):a.indexOf(t)>-1&&(n.config[t]=p(e));n.redraw(),yt(!0)},n.setDate=function(t,e=!1,o=n.config.dateFormat){if(0!==t&&!t||t instanceof Array&&0===t.length)return n.clear(e);ut(t,o),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),I(void 0,e),w(),0===n.selectedDates.length&&n.clear(!1),yt(e),e&&pt("onChange")},n.toggle=function(t){if(!0===n.isOpen)return n.close();n.open(t)};const lt={locale:[it,B],showMonths:[N,i,H],minDate:[I],maxDate:[I],clickOpens:[()=>{!0===n.config.clickOpens?(M(n._input,"focus",n.open),M(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function ut(t,e){let o=[];if(t instanceof Array)o=t.map((t=>n.parseDate(t,e)));else if(t instanceof Date||"number"==typeof t)o=[n.parseDate(t,e)];else if("string"==typeof t)switch(n.config.mode){case"single":case"time":o=[n.parseDate(t,e)];break;case"multiple":o=t.split(n.config.conjunction).map((t=>n.parseDate(t,e)));break;case"range":o=t.split(n.l10n.rangeSeparator).map((t=>n.parseDate(t,e)))}else n.config.errorHandler(new Error(`Invalid date supplied: ${JSON.stringify(t)}`));n.selectedDates=n.config.allowInvalidPreload?o:o.filter((t=>t instanceof Date&&z(t,!1))),"range"===n.config.mode&&n.selectedDates.sort(((t,e)=>t.getTime()-e.getTime()))}function dt(t){return t.slice().map((t=>"string"==typeof t||"number"==typeof t||t instanceof Date?n.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:n.parseDate(t.from,void 0),to:n.parseDate(t.to,void 0)}:t)).filter((t=>t))}function pt(t,e){if(void 0===n.config)return;const o=n.config[t];if(void 0!==o&&o.length>0)for(let t=0;o[t]&&t<o.length;t++)o[t](n.selectedDates,n.input.value,n,e);"onChange"===t&&(n.input.dispatchEvent(mt("change")),n.input.dispatchEvent(mt("input")))}function mt(t){const e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function ft(t){for(let e=0;e<n.selectedDates.length;e++)if(0===U(n.selectedDates[e],t))return""+e;return!1}function ht(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(((t,e)=>{const o=new Date(n.currentYear,n.currentMonth,1);o.setMonth(n.currentMonth+e),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[e].textContent=b(o.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=o.getMonth().toString(),t.value=o.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function gt(t){return n.selectedDates.map((e=>n.formatDate(e,t))).filter(((t,e,o)=>"range"!==n.config.mode||n.config.enableTime||o.indexOf(t)===e)).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function yt(t=!0){void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=gt(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=gt(n.config.altFormat)),!1!==t&&pt("onValueUpdate")}function vt(t){const e=v(t),o=n.prevMonthNav.contains(e),i=n.nextMonthNav.contains(e);o||i?W(o?-1:1):n.yearElements.indexOf(e)>=0?e.select():e.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):e.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=t,n.isOpen=!1,function(){const i=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t.dataset||{}))),e),c={};n.config.parseDate=s.parseDate,n.config.formatDate=s.formatDate,Object.defineProperty(n.config,"enable",{get:()=>n.config._enable,set:t=>{n.config._enable=dt(t)}}),Object.defineProperty(n.config,"disable",{get:()=>n.config._disable,set:t=>{n.config._disable=dt(t)}});const l="time"===s.mode;if(!s.dateFormat&&(s.enableTime||l)){const t=D.defaultConfig.dateFormat||r.dateFormat;c.dateFormat=s.noCalendar||l?"H:i"+(s.enableSeconds?":S":""):t+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||l)&&!s.altFormat){const t=D.defaultConfig.altFormat||r.altFormat;c.altFormat=s.noCalendar||l?"h:i"+(s.enableSeconds?":S K":" K"):t+` h:i${s.enableSeconds?":S":""} K`}Object.defineProperty(n.config,"minDate",{get:()=>n.config._minDate,set:nt("min")}),Object.defineProperty(n.config,"maxDate",{get:()=>n.config._maxDate,set:nt("max")});const u=t=>e=>{n.config["min"===t?"_minTime":"_maxTime"]=n.parseDate(e,"H:i:S")};Object.defineProperty(n.config,"minTime",{get:()=>n.config._minTime,set:u("min")}),Object.defineProperty(n.config,"maxTime",{get:()=>n.config._maxTime,set:u("max")}),"time"===s.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,c,s);for(let t=0;t<i.length;t++)n.config[i[t]]=!0===n.config[i[t]]||"true"===n.config[i[t]];a.filter((t=>void 0!==n.config[t])).forEach((t=>{n.config[t]=p(n.config[t]||[]).map(o)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let t=0;t<n.config.plugins.length;t++){const e=n.config.plugins[t](n)||{};for(const t in e)a.indexOf(t)>-1?n.config[t]=p(e[t]).map(o).concat(n.config[t]):void 0===s[t]&&(n.config[t]=e[t])}s.altInputClass||(n.config.altInputClass=ot().className+" "+n.config.altInputClass),pt("onParseConfig")}(),it(),n.input=ot(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=f(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),n._positionElement=n.config.positionElement||n._input):n.config.errorHandler(new Error("Invalid input element specified")),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;const t=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);t&&ut(t,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:(t=n.currentMonth,e=n.currentYear)=>1===t&&(e%4==0&&e%100!=0||e%400==0)?29:n.l10n.daysInMonth[t]},n.isMobile||function(){const t=window.document.createDocumentFragment();if(n.calendarContainer=f("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(t.appendChild((n.monthNav=f("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=f("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=f("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,N(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:()=>n.__hidePrevMonthArrow,set(t){n.__hidePrevMonthArrow!==t&&(m(n.prevMonthNav,"flatpickr-disabled",t),n.__hidePrevMonthArrow=t)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:()=>n.__hideNextMonthArrow,set(t){n.__hideNextMonthArrow!==t&&(m(n.nextMonthNav,"flatpickr-disabled",t),n.__hideNextMonthArrow=t)}}),n.currentYearElement=n.yearElements[0],ht(),n.monthNav)),n.innerContainer=f("div","flatpickr-innerContainer"),n.config.weekNumbers){const{weekWrapper:t,weekNumbers:e}=function(){n.calendarContainer.classList.add("hasWeeks");const t=f("div","flatpickr-weekwrapper");t.appendChild(f("span","flatpickr-weekday",n.l10n.weekAbbreviation));const e=f("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}();n.innerContainer.appendChild(t),n.weekNumbers=e,n.weekWrapper=t}n.rContainer=f("div","flatpickr-rContainer"),n.rContainer.appendChild(H()),n.daysContainer||(n.daysContainer=f("div","flatpickr-days"),n.daysContainer.tabIndex=-1),V(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),t.appendChild(n.innerContainer)}n.config.enableTime&&t.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");const t=E(n.config);n.timeContainer=f("div","flatpickr-time"),n.timeContainer.tabIndex=-1;const e=f("span","flatpickr-time-separator",":"),o=y("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=o.getElementsByTagName("input")[0];const i=y("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=i.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=l(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?t.hours:function(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}(t.hours)),n.minuteElement.value=l(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():t.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(o),n.timeContainer.appendChild(e),n.timeContainer.appendChild(i),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");const e=y("flatpickr-second");n.secondElement=e.getElementsByTagName("input")[0],n.secondElement.value=l(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():t.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(f("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(e)}return n.config.time_24hr||(n.amPM=f("span","flatpickr-am-pm",n.l10n.amPM[u((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}()),m(n.calendarContainer,"rangeMode","range"===n.config.mode),m(n.calendarContainer,"animate",!0===n.config.animate),m(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(t);const e=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!e&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){const t=f("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(t,n.element),t.appendChild(n.element),n.altInput&&t.appendChild(n.altInput),t.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((t=>{Array.prototype.forEach.call(n.element.querySelectorAll(`[data-${t}]`),(e=>M(e,"click",n[t])))})),n.isMobile)return void function(){const t=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=f("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=t,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(t){}M(n.mobileInput,"change",(t=>{n.setDate(v(t).value,!1,n.mobileFormatStr),pt("onChange"),pt("onClose")}))}();const t=d(et,50);if(n._debouncedChange=d(S,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&M(n.daysContainer,"mouseover",(t=>{"range"===n.config.mode&&tt(v(t))})),M(window.document.body,"keydown",Q),n.config.inline||n.config.static||M(window,"resize",t),void 0!==window.ontouchstart?M(window.document,"touchstart",G):M(window.document,"mousedown",G),M(window.document,"focus",G,{capture:!0}),!0===n.config.clickOpens&&(M(n._input,"focus",n.open),M(n._input,"click",n.open)),void 0!==n.daysContainer&&(M(n.monthNav,"click",vt),M(n.monthNav,["keyup","increment"],x),M(n.daysContainer,"click",ct)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){const t=t=>v(t).select();M(n.timeContainer,["increment"],s),M(n.timeContainer,"blur",s,{capture:!0}),M(n.timeContainer,"click",O),M([n.hourElement,n.minuteElement],["focus","click"],t),void 0!==n.secondElement&&M(n.secondElement,"focus",(()=>n.secondElement&&n.secondElement.select())),void 0!==n.amPM&&M(n.amPM,"click",(t=>{s(t),S()}))}n.config.allowInput&&M(n._input,"blur",X)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&w(n.config.noCalendar?n.latestSelectedDateObj:void 0),yt(!1)),i();const c=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&c&&at(),pt("onReady")}(),n}function M(t,e){const n=Array.prototype.slice.call(t).filter((t=>t instanceof HTMLElement)),o=[];for(let t=0;t<n.length;t++){const i=n[t];try{if(null!==i.getAttribute("data-fp-omit"))continue;void 0!==i._flatpickr&&(i._flatpickr.destroy(),i._flatpickr=void 0),i._flatpickr=x(i,e||{}),o.push(i._flatpickr)}catch(t){console.error(t)}}return 1===o.length?o[0]:o}n(895),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return M(this,t)},HTMLElement.prototype.flatpickr=function(t){return M([this],t)});var D=function(t,e){return"string"==typeof t?M(window.document.querySelectorAll(t),e):t instanceof Node?M([t],e):M(t,e)};D.defaultConfig={},D.l10ns={en:Object.assign({},c),default:Object.assign({},c)},D.localize=t=>{D.l10ns.default=Object.assign(Object.assign({},D.l10ns.default),t)},D.setDefaults=t=>{D.defaultConfig=Object.assign(Object.assign({},D.defaultConfig),t)},D.parseDate=T({}),D.formatDate=C({}),D.compareDates=U,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return M(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=D);var S=n(693),I=n(454),O=n(27),$=n(772);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function R(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}function j(t,e){return j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},j(t,e)}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=N(t);if(e){var i=N(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return K(this,n)}}function K(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N(t){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},N(t)}function H(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var B=n(975).vsprintf,W=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(H(this,t),e.attributes.supportsTokens)return"textarea"==e.type?new G(e,n):new Z(e,n)},Z=function(t){F(n,t);var e=V(n);function n(t){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H(this,n),(o=e.call(this,t.attributes.itemType,t.type,i)).Field=t,o.Field.TokenSelector=q(o),o.render(),o.setData(),o.Field.getField().on("ua-codemirror-ready",(function(){o.getCodeMirrorEditor(),o.editor.setValue(o.editor.getValue()),o.renderTokens(),o.handleAddTokens(),o.renderTokensInRealTime()})),o}return R(n,[{key:"render",value:function(){this.RenderTokenSelector=new Y(this.Field,this.tokens)}},{key:"setData",value:function(){this.data={tokenRenderingDebounce:200}}},{key:"getCodeMirrorEditor",value:function(){this.editor=this.Field.fieldCM}},{key:"handleAddTokens",value:function(){var t=this;this.Field.field.off("ua-add-token").on("ua-add-token",(function(e,n){["date","time"].includes(t.Field.attributes.fieldType)&&t.editor.setValue(""),t.insertTextAtCursor("{{".concat(n.id,"}}")),t.renderTokens({ignoreRequiresUserModal:!0}),["date","time"].includes(t.Field.attributes.fieldType)||t.editor.focus(),["date","time"].includes(t.Field.attributes.fieldType)&&t.Field.setValue("{{".concat(n.id,"}}"))}))}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}},{key:"insertTextAtCursor",value:function(t){this.editor.doc.replaceRange(t,this.editor.doc.getCursor())}},{key:"renderTokensInRealTime",value:function(){var t=this;this.editor.on("changes",(0,S.Ds)((function(e){t.renderTokens()}),this.data.tokenRenderingDebounce))}},{key:"renderTokens",value:function(t){var e=this;t=Object.assign({ignoreRequiresUserModal:!1},t);for(var n=this.editor.getSearchCursor(/\{\{(.*?)\}\}/),o=function(){var o={from:n.from(),to:n.to()},i=e.editor.getRange(o.from,o.to).replace("{{","").replace("}}",""),a=e.createTokenDOMNode(i),r=e.editor.markText(o.from,o.to,{replacedWith:a});if("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(e.tokensThatRequireUser.includes(i)||i.startsWith("USERMETA:"))&&!t.ignoreRequiresUserModal)return e.tokenNeedsUserModal(a,{removeToken:function(){var t=r.find();r.clear(),e.editor.replaceRange("",t.from,t.to)}}),"break";e.Field.attributes.isReadOnly||a.addEventListener("click",(function(){if(!a.classList.contains("uap-token--cm-focused")){a.classList.add("uap-token--cm-focused");var t=function(){a.classList.remove("uap-token--cm-focused"),document.removeEventListener("mouseup",n),document.removeEventListener("copy",o),document.removeEventListener("keydown",s),document.removeEventListener("keydown",c)},n=function(e){a===e.target||a.contains(e.target)||t()};document.addEventListener("mouseup",n);var o=function(e){t(),(0,S.vQ)("{{".concat(i,"}}"))};document.addEventListener("copy",o);var s=function(n){var o=n.keyCode||n.charCode;if(8==o||46==o){var i=r.find();r.clear(),e.editor.replaceRange("",i.from,i.to),t()}};document.addEventListener("keydown",s);var c=function(n){var o=n.keyCode||n.charCode;if(37==o||39==o){t();var i,a=r.find();37==o&&(i=a.from),39==o&&(i=a.to),e.editor.focus(),e.editor.setCursor(i)}};document.addEventListener("keydown",c)}}))};n.findNext()&&"break"!==o(););}},{key:"tokenNeedsUserModal",value:function(t){var e,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,S.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var i=UncannyAutomator.recipe.isLive;(e=new $.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.mustRunOnUser,[t.outerHTML]),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.description,"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var t=e.getElements();t.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,S.R$)(!0,(function(t){e.destroy(),n.renderTokens()}),(function(e){t.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),i&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1),(0,S.$K)(o.allowedConfirm)&&o.allowedConfirm()},onCancel:function(){e.destroy(),(0,S.$K)(o.removeToken)&&o.removeToken(),(0,S.$K)(o.allowedCancel)&&o.allowedCancel()}})}else(e=new $.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.mustRunOnUser,[t.outerHTML]),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.description,[UncannyAutomator.i18n.uncannyAutomatorPro]),' <a href="').concat((0,S.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.upgradeLater,' <a href="').concat((0,S.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){e.destroy(),(0,S.YQ)((0,S.XE)("https://automatorplugin.com/pricing/",{medium:"add_token",campaign:"update_to_pro",content:"requires_user_data"})),(0,S.$K)(o.removeToken)&&o.removeToken(),(0,S.$K)(o.forbiddenConfirm)&&o.forbiddenConfirm()},onCancel:function(){e.destroy(),(0,S.$K)(o.removeToken)&&o.removeToken(),(0,S.$K)(o.forbiddenCancel)&&o.forbiddenCancel()}})}}]),n}(O.Z),G=function(t){F(n,t);var e=V(n);function n(t){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H(this,n),(o=e.call(this,t,i)).Field.attributes.supportsTinyMCE&&o.Field.getField().on("ua-tinymce-ready",(function(){o.getTinyMCEEditor(),o.addStylesToEditor(),setTimeout((function(){o.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),o.data.tokenRenderingDebounce),setTimeout((function(){o.parseHTMLTokensInPlainTextarea()}),o.data.tokenRenderingDebounce),o.handleAddTokens(),o.handleHTMLTokensInPlainTextarea(),o.handlePlainTokensInTinyMCE()})),o}return R(n,[{key:"setData",value:function(){this.data={tokenRenderingDebounce:200,tokenCSSClass:"uap-token-tinymce"}}},{key:"render",value:function(){this.RenderTokenSelector=new Y(this.Field,this.tokens)}},{key:"insertTextAtCursor",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!(0,S.$K)(this.tinyMCEeditor)||(0,S.$K)(this.tinyMCEeditor)&&this.tinyMCEeditor.hidden)this.editor.doc.replaceRange(e,this.editor.doc.getCursor());else{e=e.replace("{{","").replace("}}","");var n=this.createTokenDOMNode(e);"anonymous"!=UncannyAutomator.recipe.type||UncannyAutomator.recipe.requiresUserData||!this.tokensThatRequireUser.includes(e)&&!e.startsWith("USERMETA:")?(this.tinyMCEeditor.execCommand("mceInsertContent",!1,'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(e,'">').concat(n.outerHTML,"</span>")),this.Field.getField().trigger("change input")):this.tokenNeedsUserModal(n,{allowedConfirm:function(){t.tinyMCEeditor.execCommand("mceInsertContent",!1,'<span class="'.concat(t.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(e,'">').concat(n.outerHTML,"</span>")),t.Field.getField().trigger("change input")}})}}},{key:"getTinyMCEEditor",value:function(){this.tinyMCEeditor=this.Field.fieldTinyMCE}},{key:"addStylesToEditor",value:function(){this.tinyMCEeditor.dom.addStyle("\n\t\t\thtml body {\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\tfont-size: 15px;\n\t\t\t\tmargin-left: 12px;\n\t\t\t\tmargin-right: 12px;\n\t\t\t}\n\n\t\t\t.uap-token {\n\t\t\t\tdisplay: inline-flex;\n\t\t\t\talign-items: center;\n\t\t\t\tbackground: #eee;\n\t\t\t\tline-height: 1;\n\t\t\t\tpadding: 3px 8px;\n\t\t\t\tborder-radius: 150px;\n\n\t\t\t\tfont-size: 15px;\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\t-webkit-font-smoothing:antialiased;\n\t\t\t\t-moz-osx-font-smoothing:grayscale;\n\t\t\t}\n\n\t\t\t\t.uap-token-tinymce {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\tborder-radius: 150px;\n\t\t\t\t\tbox-shadow: 0 0 0 2px transparent;\n\t\t\t\t\ttransition: box-shadow 150ms ease-in-out;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\n\t\t\t\t.uap-token-tinymce[data-mce-selected=\"1\"] {\n\t\t\t\t\toutline: 0 !important;\n\t\t\t\t\tbox-shadow: 0 0 0 2px #0790e8;\n\t\t\t\t}\n\n\t\t\t\t.uap-token img {\n\t\t\t\t\twidth: 12px;\n\t\t\t\t\theight: 11px;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\tobject-position: center;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t.uap-token uo-icon {\n\t\t\t\t\twidth: 14px;\n\t\t\t\t\theight: 14px;\n\t\t\t\t\tborder: 1px solid #444;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tfont-size: 9px;\n\t\t\t\t\tcolor: #444;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 15px;\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\topacity: .8;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline-flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\n\t\t\t\t.uap-token__name {\n\t\t\t\t\tcolor: #444444;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid {\n\t\t\t\t\t\tbackground: #f9e2e2;\n\t\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid uo-icon {\n\t\t\t\t\t\tcolor: #c00;\n\t\t\t\t\t\tborder-color: #c00;\n\t\t\t\t\t}\n\n\t\t")}},{key:"handleHTMLTokensInPlainTextarea",value:function(){var t=this;this.Field.getField().on("change input",(0,S.Ds)((function(){t.parseHTMLTokensInPlainTextarea()}),this.data.tokenRenderingDebounce)),this.Field.getField().on("ua-tinymce-activate-text-view",(function(){setTimeout((function(){t.parseHTMLTokensInPlainTextarea()}),t.data.tokenRenderingDebounce)}))}},{key:"handlePlainTokensInTinyMCE",value:function(){var t=this;this.Field.getField().on("ua-tinymce-activate-visual-view",(function(){setTimeout((function(){t.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),t.data.tokenRenderingDebounce)}))}},{key:"parsePlainTokensInTinyMCE",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({parseTokensInAttributes:!0},t);var e=this.tinyMCEeditor.getContent({format:"raw"}),n=this.renderTextWithTokens(e,{template:'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="%2$s">%1$s</span>'),parseTokensInAttributes:t.parseTokensInAttributes});e!=n&&this.tinyMCEeditor.setContent(n.innerHTML)}},{key:"parseHTMLTokensInPlainTextarea",value:function(){var t=this.Field.getField().val(),e=document.createElement("div");e.innerHTML=t;var n=e.querySelectorAll(".".concat(this.data.tokenCSSClass));if(n.length>0){n.forEach((function(t){var e=t.dataset.tokenId;t.outerHTML="{{".concat(e,"}}")})),t=e.innerHTML;try{this.editor.setValue(t)}catch(e){this.Field.getField().val(t)}}}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}}]),n}(Z),Y=function(){function t(e,n){H(this,t),this.Field=e,this.tokens=n,this.getData(),this.getElements(),this.createWrapper(),this.createFilter(),this.createGroupsOfTokens(),this.listenToggleButton(),this.resizeDropdownOnWindowResize(),this.resizeDropdownOnWindowScroll(),this.refreshOnFieldChange(),this.search(),this.shouldSupportFilters()&&this.setFilter(!0)}return R(t,[{key:"getData",value:function(){this.data={isOpen:!1,position:"below"}}},{key:"getElements",value:function(){this.$elements={wrapper:null,toggleButton:null,searchField:null,dropdown:null,allGroups:null,dropdownGroupsContainer:null,dropdownTokens:null,noResultsOption:null}}},{key:"createWrapper",value:function(){var t=i()('\n\t\t\t<div class="form-variable">\n\t\t\t\t<div class="form-variable__element">\n\t\t\t\t\t<div class="form-variable__render-container"></div>\n\t\t\t\t\t<div class="form-variable__toggle">\n\t\t\t\t\t\t<uo-icon id="asterisk"></uo-icon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__dropdown">\n\t\t\t\t\t<div class="form-variable__dropdown-container">\n\t\t\t\t\t\t<div class="form-variable__search">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tclass="form-variable__search-input" \n\t\t\t\t\t\t\t\tplaceholder="'.concat(UncannyAutomator.i18n.tokens.search,'"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form-variable__groups"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t')),e=[];"textarea"==this.Field.type&&e.push(this.Field.getField()),(0,S.$K)(this.Field.getFieldCM())&&e.push(this.Field.getFieldCM()),e.forEach((function(e){t.insertAfter(e),t.find(".form-variable__render-container").append(e)})),this.$elements.wrapper=t,this.$elements.renderContainer=t.find(".form-variable__render-container"),this.$elements.searchFieldContainer=t.find(".form-variable__search"),this.$elements.searchField=t.find(".form-variable__search-input"),this.$elements.toggleButton=t.find(".form-variable__toggle"),this.$elements.dropdown=t.find(".form-variable__dropdown"),this.$elements.dropdownGroupsContainer=t.find(".form-variable__groups")}},{key:"createFilter",value:function(){var t=this;if(this.shouldSupportFilters()){var e=this.Field.attributes.fieldType,n=(0,S.$K)(UncannyAutomator.i18n.tokens.tokenType[e])?UncannyAutomator.i18n.tokens.tokenType[e]:e,o=i()('\n\t\t\t\t<div class="form-variable__filter"></div>\n\t\t\t'),a=new tt("checkbox",{optionCode:"token__enableFilter",currentValue:!0,label:'<span class="form-variable__filter-label">'+B(UncannyAutomator.i18n.tokens.filter,['<span class="form-variable__filter-type">'.concat(n,"</span>")])+"<span>"}),r=a.createFormElement();o.prepend(r),this.$elements.searchFieldContainer.append(o),this.$elements.filterContainer=o,r.on("automator:field:change",(function(){a.getValue()?t.setFilter(!0):t.setFilter(!1)}))}}},{key:"createGroupsOfTokens",value:function(){var t=this,e=this.$elements.wrapper.find(".form-variable__groups");this.tokens.forEach((function(n,o){e.append(t.createIndividualGroupOfTokens(o,n))})),this.$elements.allGroups=e.find(".form-variable__group"),this.$elements.dropdownTokens=e.find(".form-variable__group-item"),this.$elements.noResultsOption=i()('\n\t\t\t<div class="form-variable__group-item-no-results form-variable__group-item-no-results--hide">\n\t\t\t\t<div class="form-variable__group-item-no-results-title">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.tokens.noResults,'\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__group-item-no-results-description">\n\t\t\t\t\t').concat(this.shouldSupportFilters()?UncannyAutomator.i18n.tokens.noResultsDescriptionWithFilter:UncannyAutomator.i18n.tokens.noResultsDescription,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),e.append(this.$elements.noResultsOption)}},{key:"createIndividualGroupOfTokens",value:function(t,e){var n=this,o=i()('\n\t\t\t<div \n\t\t\t\tclass="form-variable__group"\n\t\t\t\tdata-id="'.concat(e.id,'"\n\t\t\t>\n\t\t\t\t<div class="form-variable__group-source">\n\t\t\t\t\t<div class="form-variable-group-source__icon"></div>\n\t\t\t\t\t<div class="form-variable-group-source__description"></div>\n\t\t\t\t\t<div class="form-variable-group-source__toggle">\n\t\t\t\t\t\t<span class="form-variable-group-source__toggle-icon"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span class="form-variable__group-children"></span>\n\t\t\t</div>\n\t\t')),a=e.name;"string"==!L(a)&&(a.html.clone(),function(t){throw new TypeError('"groupName" is read-only')}()),o.find(".form-variable-group-source__description").append(e.name);var r=e.icon.clone();o.find(".form-variable-group-source__icon").append(r);var s=o.find(".form-variable__group-source");s.on("click",(function(){o.toggleClass("form-variable__group--open")}));var c=o.find(".form-variable__group-children");return e.tokens.forEach((function(t){var e=(0,S.xb)(t.name)?"":t.name,o=i()('\n\t\t\t\t<div \n\t\t\t\t\tclass="form-variable__group-item"\n\t\t\t\t\tdata-search="'.concat(e.trim().toLowerCase().replace(/\s/g,""),'"\n\t\t\t\t\tdata-type="').concat(t.type,'"\n\t\t\t\t>\n\t\t\t\t\t<span>').concat(e,"</span>\n\n\t\t\t\t\t").concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(0,S.$K)(t.requiresUser)&&t.requiresUser?'<span class="form-variable__group-item-tag">'+UncannyAutomator.i18n.needsUserData+"</span>":"","\n\t\t\t\t</div>\n\t\t\t")),a=function(t){n.Field.field.trigger("ua-add-token",t)};o.on("click",(function(){n.close(),(0,S.$K)(t.beforeAdded)?t.beforeAdded(a):a(t)})),c.append(o)})),this.tokens[t].$toggleButton=s,o}},{key:"addAllTokensInGroupCallback",value:function(t){var e=this,n=i()("<div></div>"),o=new tt("checkbox",{label:UncannyAutomator.i18n.tokens.includeTokenName,currentValue:!0});n.append(o.createFormElement());var a=new tt("checkbox",{label:UncannyAutomator.i18n.tokens.includeTokenID,currentValue:!1});n.append(a.createFormElement());var r=t.name instanceof jQuery?t.name.text():t.name,s=i()('<div class="description">'.concat(B(UncannyAutomator.i18n.tokens.addAllDescription,[r,(0,S.xb)(this.Field.attributes.label)?UncannyAutomator.i18n.noLabel:this.Field.attributes.label]),"</div>"));n.append(s);var c=new $.Z({title:UncannyAutomator.i18n.tokens.addTokens,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.addTokens}});c.setEvents({onConfirm:function(){try{e.close();var n=o.getValue(),i=a.getValue(),r="",s=e.Field.getValue();r+=s,"textarea"==e.Field.type&&(r+="<hr>"),t.tokens.forEach((function(t){var o="";n&&(o+="".concat(t.name)),i&&(n&&(o+=" "),o+="(".concat(t.id,")")),(n||i)&&(o+=": "),o+="{{".concat(t.id,"}}"),"textarea"==e.Field.type?o+="<br><br>":o+=" | ",r+=o})),e.Field.setValue(r),"textarea"==e.Field.type&&(0,S.$K)(e.Field.fieldTinyMCE)&&!e.Field.fieldTinyMCE.hidden&&e.Field.getField().trigger("ua-tinymce-activate-visual-view")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t),alert("Debugging: Couldn't add all tokens. Enable debug mode and check the console.")}c.destroy()},afterHide:function(){c.destroy()}})}},{key:"listenToggleButton",value:function(){var t=this;this.$elements.toggleButton.on("click",(function(){t.data.isOpen?t.close():t.open()}))}},{key:"search",value:function(){var t=this;this.$elements.searchField.on("input",(0,S.P2)((function(){var e=t.$elements.searchField.val();e=e.trim().toLowerCase().replace(/\s/g,""),(0,S.xb)(e)?(t.$elements.allGroups.removeClass("form-variable__group--open"),t.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-search")):(t.$elements.allGroups.addClass("form-variable__group--open"),t.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-search"),t.$elements.dropdownTokens.filter((function(t,n){return-1!==n.dataset.search.search(e)})).removeClass("form-variable__group-item--hidden-by-search")),t.updateGroupsOfTokensVisibility()}),30)),this.$elements.searchField.on("focus",(function(){t.$elements.wrapper.addClass("form-variable--search-focus")})),this.$elements.searchField.on("blur",(function(){t.$elements.wrapper.removeClass("form-variable--search-focus")}))}},{key:"setFilter",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){this.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-filter");var n=this.$elements.dropdownTokens.filter((function(e,n){return("int"==n.dataset.type&&"float"==t.Field.attributes.fieldType?"float":n.dataset.type)==t.Field.attributes.fieldType}));n.removeClass("form-variable__group-item--hidden-by-filter")}else this.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-filter");this.updateGroupsOfTokensVisibility()}},{key:"updateGroupsOfTokensVisibility",value:function(){var t=!1;this.$elements.allGroups.removeClass("form-variable__group--without-available-tokens"),this.$elements.allGroups.filter((function(e,n){n.querySelectorAll(".form-variable__group-item:not(.form-variable__group-item--hidden-by-filter):not(.form-variable__group-item--hidden-by-search)").length>0?t=!0:n.classList.add("form-variable__group--without-available-tokens")})),t?this.$elements.noResultsOption.addClass("form-variable__group-item-no-results--hide"):this.$elements.noResultsOption.removeClass("form-variable__group-item-no-results--hide")}},{key:"open",value:function(){if(["date","time"].includes(this.Field.attributes.fieldType))try{this.Field.flatpickrInstance.close()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}this.$elements.wrapper.addClass("form-variable--open"),this.data.isOpen=!0,this.closeWhenClickedOutside(),this.$elements.searchField.val("").trigger("input").css({"padding-right":"".concat(((0,S.$K)(this.$elements.filterContainer)?this.$elements.filterContainer.outerWidth():0)+12,"px")}),this.$elements.searchField.focus(),this.setDropdownView(),this.setDropdownDirection(),this.setDropdownHeight(),this.addContextMenus()}},{key:"addContextMenus",value:function(){var t=this;this.tokens.forEach((function(e,n){try{var o=new uap.ContextMenu({id:"tokens",$element:e.$toggleButton[0]});t.tokens[n].contextMenu=o;var i=o.addGroup({id:"testing",name:UncannyAutomator.i18n.debuggingTools});"advanced"==e.id?i.addItem({id:"add-all-tokens",name:UncannyAutomator.i18n.tokens.addAllTokensInGroup,disabled:!0}):i.addItem({id:"add-all-tokens",name:UncannyAutomator.i18n.tokens.addAllTokensInGroup,callback:function(){t.addAllTokensInGroupCallback(e)}})}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}))}},{key:"close",value:function(){this.$elements.wrapper.removeClass("form-variable--open"),this.data.isOpen=!1,this.$elements.searchField.val("").trigger("input"),i()(document).off("mouseup.uap-token-selector-click-outside"),this.tokens.forEach((function(t,e){try{t.contextMenu.destroy()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}))}},{key:"destroy",value:function(){this.$elements.renderContainer.children().insertAfter(this.$elements.wrapper),this.$elements.wrapper.remove()}},{key:"closeWhenClickedOutside",value:function(){var t=this;i()(document).on("mouseup.uap-token-selector-click-outside",(function(e){var n=t.$elements.wrapper;n.is(e.target)||0!==n.has(e.target).length||t.close()}))}},{key:"getDropdownPosition",value:function(){var t=i()(window),e={};e.above=this.$elements.wrapper.offset().top-t.scrollTop(),e.below=t.height()-(e.above+this.$elements.wrapper.outerHeight()),"textarea"==this.Field.type&&(e.below=t.height()-(e.above+38)),this.$elements.dropdown.addClass("uo-realsize");var n=this.$elements.dropdown.outerHeight()+110;return this.$elements.dropdown.removeClass("uo-realsize"),"textarea"==this.Field.type?e.hasSpaceBelow=!0:e.hasSpaceBelow=e.below>=n,e}},{key:"setDropdownView",value:function(){this.$elements.dropdown.width()<350&&this.$elements.wrapper.addClass("form-variable--bubble")}},{key:"setDropdownDirection",value:function(){var t=this.getDropdownPosition();this.$elements.wrapper.removeClass("form-variable--above form-variable--below"),t.below>t.above||t.hasSpaceBelow?(this.$elements.wrapper.addClass("form-variable--below"),this.data.position="below"):(this.$elements.wrapper.addClass("form-variable--above"),this.data.position="above")}},{key:"setDropdownHeight",value:function(){if(this.data.isOpen){var t=this.getDropdownPosition()[this.data.position]-this.$elements.searchField.outerHeight()-45;this.$elements.dropdownGroupsContainer.css({"max-height":"".concat(t,"px")})}}},{key:"focusSearchField",value:function(){this.$elements.searchField.focus()}},{key:"resizeDropdownOnWindowResize",value:function(){var t=this;i()(window).on("resize",(0,S.P2)((function(){t.setDropdownDirection(),t.setDropdownHeight()}),20))}},{key:"resizeDropdownOnWindowScroll",value:function(){var t=this;i()(window).on("scroll",(0,S.Ds)((function(){t.setDropdownDirection(),t.setDropdownHeight()}),300))}},{key:"refreshOnFieldChange",value:function(){var t=this;this.Field.formElement.on("automator:field:change",(function(){t.setDropdownDirection(),t.setDropdownHeight()}))}},{key:"shouldSupportFilters",value:function(){var t=this.Field.attributes.fieldType;return["email","int","float","url","date","time"].includes(t)}}]),t}();function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var X=n(975).vsprintf,Q=function(){function t(e,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;z(this,t),this.type=e,this.attributes=this.setAttributes(n),this.customValidationFunction=i,o&&this.createFormElement()}var e,n;return e=t,n=[{key:"createFormElement",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=null,a=this.type,r=this.attributes;if((0,S.d3)(a,(0,S.ew)())){var s=i()("<div/>",{class:"form-element"});(0,S.$K)(r.formElementClass)&&s.addClass(r.formElementClass);var c,l,u,d={name:r.optionCode,id:r.uniqueFieldID,"data-isajax":r.isAjax,"data-targetfield":r.targetField,"data-integrationid":r.integrationID,"data-endPoint":r.endPoint,"data-supportsTokens":r.supportsTokens,"data-supportsTinymce":r.supportsTinyMCE,"data-required":r.isRequired,"data-item_type":r.itemType,"data-item-id":r.itemId,"data-option-group":r.groupId,"data-is-hidden":r.isHidden,"data-is-child-field":r.isChildField};switch(a){case"select":c=i()("<div/>",{class:"form-select"}),this.fieldContainer=c,l=i()("<select/>",i().extend({},d,{"data-type":"select",class:"form-element__select","data-supports-custom-value":r.supportsCustomValue})),r.supportsMultipleValues&&l.prop("multiple","multiple"),this.field=l;var p,m,f=!1,h=0;r.hasDefaultValue&&(p=(0,S.xb)(r.defaultValue.option_value)||(0,S.xb)(r.defaultValue.option_name)?r.defaultValue:r.defaultValue.option_value);var g=i()('<optgroup\n\t\t\t\t\t\t\ttitle="form-element__select-normal-options"\n\t\t\t\t\t\t\tclass="form-element__select-normal-options">\n\t\t\t\t\t\t</optgroup>');if(r.options=r.options.filter((function(t){return"automator_custom_value"!==t.value})),i().each(r.options,(function(t,e){var n=i()("<option/>",{value:e.value,text:e.text});r.hasDefaultValue&&(0,S.A5)(p,t)&&(n.prop("selected",!0),m=!0,f=!0),r.hasValue&&(0,S.A5)(r.currentValue,e.value)&&(n.prop("selected",!0),f=!0),n.appendTo(g),h++})),g.appendTo(l),r.supportsMultipleValues){if(!(0,S.xb)(r.currentValue))try{l.val(r.currentValue)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,S.xb)(l.val())||(f=!0)}if(r.hasDefaultValue&&!m&&!(0,S.xb)(r.defaultValue.option_value)&&!(0,S.xb)(r.defaultValue.option_name)){var y=i()("<option/>",{value:r.defaultValue.option_value,text:r.defaultValue.option_name});r.hasValue||(0,S.A5)(r.defaultValue.option_value,r.currentValue)||(y.prop("selected",!0),f=!0),y.prependTo(l),h++}if(r.hasPlaceholder&&(l.prepend("<option></option>"),r.hasDefaultValue||r.hasValue||l.find("option:selected").prop("selected",!1)),r.supportsCustomValue){var v=r.customValue,_=i()('\n\t\t\t\t\t\t\t<optgroup label="'.concat(UncannyAutomator.i18n.validation.field.select.otherOptions,'">\n\t\t\t\t\t\t\t\t<option value="automator_custom_value">').concat(UncannyAutomator.i18n.validation.field.select.customValue,"</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t"));l.append(_),r.hasValue&&(0,S.A5)(r.currentValue,"automator_custom_value")&&(_.find("option").attr("selected",!0),f=!0),r.hasValue&&!f&&(_.find("option").attr("selected",!0),f=!0,v=r.currentValue),this.customValueField=new t("text",{itemId:r.itemId,itemType:r.itemType,isRequired:r.isRequired,isReadOnly:!1,supportsTinyMCE:!1,supportsCopyToClipboard:!1,supportsTokens:r.supportsTokens,isAjax:!1,fieldType:"text",optionCode:"".concat(r.optionCode,"_custom"),label:"",description:r.hasCustomValueDescription?r.customValueDescription:void 0,placeholder:"",isHidden:!1,tokenName:X(UncannyAutomator.i18n.validation.field.select.customValueToken,[r.label]),defaultValue:null,currentValue:v,isChildField:!0,parentOptionCode:r.optionCode})}if(this.selectHasSelectedOption=f,0==h){var b=i()(new Option(UncannyAutomator.i18n.noResults,"",!0,!0));b.prop("disabled",!0),this.field.find(".form-element__select-normal-options").append(b),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}l.on("change",(function(t,e){s.trigger("automator:field:change",e)}));break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":var w="form-input form-input--".concat(a);if(c=i()("<div/>",{class:w}),this.$fakeCodemirrorField=i()("<div/>",{class:"form-element__input-cm"}),c.append(this.$fakeCodemirrorField),this.fieldContainer=c,l=i()("<input/>",i().extend({},d,{class:"form-element__input",type:"text","data-type":a})),(0,S.$K)(r.maxLength)&&l.prop("maxlength",r.maxLength),this.field=l,r.supportsTokens&&c.addClass("form-input--token"),r.hasPlaceholder&&l.prop("placeholder",r.placeholder),r.hasValue?l.prop("value",r.currentValue):r.hasDefaultValue&&l.prop("value",r.defaultValue),["date","time"].includes(r.fieldType)){var A=i()('\n\t\t\t\t\t\t\t\t<div class="form-element__input-clear" uap-tooltip="'.concat(UncannyAutomator.i18n.clear,'">\n\t\t\t\t\t\t\t\t\t<uo-icon id="times"></uo-icon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'));c.addClass("form-input--has-clear"),this.$fakeCodemirrorField.append(A),A.on("click",(function(){e.clearValue()}))}l.on("input",(function(){s.trigger("automator:field:change")}));break;case"textarea":c=i()("<div/>",{class:"form-textarea"}),this.fieldContainer=c,l=i()("<textarea/>",i().extend(!0,d,{"data-type":"textarea",class:"form-element__textarea","data-item_type":r.itemType})),(0,S.$K)(r.maxLength)&&l.prop("maxlength",r.maxLength),this.field=l,r.supportsTokens&&c.addClass("form-textarea--token"),r.hasPlaceholder&&l.prop("placeholder",r.placeholder),this.$fakeCodemirrorField=i()("<div/>",{class:"form-element__input-cm"}),c.append(this.$fakeCodemirrorField),r.hasValue?l.text(r.currentValue):r.hasDefaultValue&&l.text(r.defaultValue),l.on("input",(function(){s.trigger("automator:field:change")}));break;case"checkbox":c=i()("<div/>",{class:"form-checkbox"}),this.fieldContainer=c;var k=i()("<label/>",{class:"form-checkbox__container"}),C=i()("<div/>",{class:"checkbox--show"});if(l=i()("<input/>",i().extend({},d,{type:"checkbox","data-type":"checkbox",class:"checkbox--hidden checkbox--primary"})),r.hasValue&&r.currentValue&&l.prop("checked",!0),this.field=l,r.hasLabel&&((0,S.$K)(r.isToggle)&&r.isToggle?c[0].insertAdjacentHTML("afterBegin",'\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\tfor="'.concat(d.id,'"\n\t\t\t\t\t\t\t\t\t\tclass="form-element__label"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t').concat(r.label,"\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t")):k[0].innerHTML=r.label),c.append(k),k.append(l),k.append(C),(0,S.$K)(r.isToggle)&&r.isToggle){c.addClass("form-checkbox--toggle"),(0,S.$K)(r.toggle)||(r.toggle={on:UncannyAutomator.i18n.yes,off:UncannyAutomator.i18n.no});var T=i()("<span/>",{class:"checkbox-label checkbox-label--on"}).text(r.toggle.on);k.append(T);var U=i()("<span/>",{class:"checkbox-label checkbox-label--off"}).text(r.toggle.off);k.append(U)}if((0,S.$K)(r.color))if((0,S.d3)(r.color,["gutenberg","green"]))switch(r.color){case"gutenberg":c.addClass("form-checkbox--toggle-gutenberg");break;case"green":c.addClass("form-checkbox--toggle-green")}else console.error(X("The color %s does not exists. Default color will be used instead.",[r.color]));(0,S.$K)(r.align)&&((0,S.d3)(r.align,["left","right"])?"right"==r.align&&c.addClass("form-checkbox--toggle-right"):console.error(X("The alignment %s does not exists. %s will be used instead.",[r.align,'"left"']))),l.on("change",(function(t,e){s.trigger("automator:field:change",e)})),l=k;break;case"radio":c=i()("<div/>",{class:"form-radio"}),this.fieldContainer=c;var E=i()(),x=i()();i().each(r.options,(function(t,e){var n=i()("<label/>",{class:"form-radio__container"});n.html(e.text);var o=i()("<input/>",i().extend({},d,{type:"radio","data-type":"radio",class:"radio--hidden radio--primary",value:e.value,name:d.id}));E=E.add(o);var a=i()("<div/>",{class:"radio--show"});n.append(o),n.append(a),(r.hasValue&&r.currentValue==e.value||!r.hasValue&&r.hasDefaultValue&&r.defaultValue==e.value)&&o.prop("checked",!0),x=x.add(n)})),this.field=x,l=x,E.on("change",(function(t,e){s.trigger("automator:field:change",e)}))}if(c.append(l),"checkbox"!=a&&(r.hasLabel||r.isRequired)&&(u=i()("<label/>",{class:"form-element__label",for:r.uniqueFieldID}),r.hasLabel&&u.html(r.label)),r.isRequired)if(c.addClass("form-element--required"),"checkbox"==r.fieldType){if(l.find("input").prop("required",!0),r.hasLabel){var M=i()("<span/>",{class:"form-element-label__required"});l.append(M)}}else if(l.prop("required",!0),r.hasLabel){var D=i()("<span/>",{class:"form-element-label__required"});u.append(D)}(0,S.$K)(r.isReadOnly)&&r.isReadOnly&&(["date","time"].includes(this.attributes.fieldType)||c.addClass("form-element--readonly"),"select"==r.fieldType?l.prop("disabled",!0):["checkbox","radio"].includes(r.fieldType)?l.find("input").prop("disabled",!0):l.prop("readonly",!0)),(r.hasLabel||r.isRequired)&&c.prepend(u);var I=i()("<div/>",{class:"form-element__error"});if(c.append(I),this.fieldContainer=c,r.hasDescription){var O=i()("<div/>",{class:"description"});O.html(r.description),c.append(O)}r.isHidden&&c.addClass("form-element--hidden"),s.append(c),"select"==r.fieldType&&(0,S.$K)(this.customValueField)&&(this.customValueFieldContainer=i()('<div class="form-select-custom">\n\t\t\t\t\t\t<div class="form-element-children"></div>\n\t\t\t\t\t</div>'),this.customValueFieldContainer.find(".form-element-children").append(this.customValueField.createFormElement()),s.append(this.customValueFieldContainer),"automator_custom_value"==this.getValue()?this.customValueFieldContainer.addClass("form-select-custom--visible"):this.customValueFieldContainer.removeClass("form-select-custom--visible")),o=s,this.formElement=s,n&&this.initLibraries(),this.onChange(),this.onFocus()}else console.error(X('The field type "%s" is invalid. The valid ones are %s',[a,(0,S.ew)().join(", ")]));return o}},{key:"setAttributes",value:function(t){if(t.fieldType=this.type,t.uniqueFieldID="".concat(t.optionCode,"__").concat((0,S.Ki)()),"checkbox"!=t.fieldType||(0,S.xb)(t.currentValue)||["true","false"].includes(t.currentValue)&&(t.currentValue="true"==t.currentValue,t.currentValue?t.hasValue=!0:t.hasValue=!1),(0,S.$K)(t.hasValue)||((0,S.xb)(t.currentValue)?t.hasValue=!1:t.hasValue=!0),(0,S.$K)(t.hasPlaceholder)||((0,S.xb)(t.placeholder)?t.hasPlaceholder=!1:t.hasPlaceholder=!0),(0,S.$K)(t.hasDefaultValue)||((0,S.xb)(t.defaultValue)?t.hasDefaultValue=!1:t.hasDefaultValue=!0),(0,S.$K)(t.hasLabel)||((0,S.xb)(t.label)?t.hasLabel=!1:t.hasLabel=!0),(0,S.$K)(t.hasDescription)||((0,S.xb)(t.description)?t.hasDescription=!1:t.hasDescription=!0),(0,S.$K)(t.tokenName)||(t.tokenName=t.label),(0,S.$K)(t.supportsCopyToClipboard)||(t.supportsCopyToClipboard=!1),(0,S.$K)(t.isRequired)||(t.isRequired=!1),(0,S.$K)(t.isChildField)||(t.isChildField=!1),(0,S.$K)(t.isReadOnly)||(t.isReadOnly=!1),"select"==t.fieldType){if((0,S.$K)(t.supportsMultipleValues)||(t.supportsMultipleValues=!1),t.supportsMultipleValues?t.supportsCustomValue=!1:(0,S.$K)(t.supportsCustomValue)||(["action","closure"].includes(t.itemType)?t.supportsCustomValue=!0:t.supportsCustomValue=!1),t.supportsMultipleValues)try{t.currentValue=JSON.parse(t.currentValue)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}t.hasCustomValueDescription=!(0,S.xb)(t.customValueDescription)}return["radio","select"].includes(t.fieldType)&&((0,S.$K)(t.options)||(t.options=[])),"date"==t.fieldType&&(t.isReadOnly=!0,(0,S.$K)(t.dateFormat)||(t.dateFormat="Y-m-d"),(0,S.$K)(t.dateAltFormat)||(t.dateAltFormat=UncannyAutomator.format.date),(0,S.$K)(t.minDate)&&(t.minDate=t.minDate),(0,S.$K)(t.maxDate)&&(t.maxDate=t.maxDate),(0,S.$K)(t.supportsRange)||(t.supportsRange=!1)),"time"==t.fieldType&&(t.isReadOnly=!0,(0,S.$K)(t.timeFormat)||(t.timeFormat="h:i K"),(0,S.$K)(t.timeAltFormat)||(t.timeAltFormat="h:i K"),(0,S.$K)(t.minTime)&&(t.minTime=t.minTime),(0,S.$K)(t.maxTime)&&(t.maxTime=t.maxTime)),(0,S.$K)(t.supportsTinyMCE)||(t.supportsTinyMCE=!1),!(0,S.$K)(t.isToggle)&&(0,S.$K)(t.toggle)&&(t.isToggle=!0),(0,S.$K)(t.isAjax)||(t.isAjax=!1),(0,S.$K)(t.isHidden)||(t.isHidden=!1),(0,S.$K)(t.unsupportedTokens)||(t.unsupportedTokens=[]),(0,S.$K)(t.supportsTokens)||(["text","textarea","int","float","email","url","select","date","time"].includes(t.fieldType)&&["action","closure"].includes(t.itemType)&&!t.isReadOnly?t.supportsTokens=!0:t.supportsTokens=!1),t.supportsTokens&&"select"==t.fieldType&&!["action","closure"].includes(t.itemType)&&(t.supportsTokens=!1),t}},{key:"validate",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=null;e?(n=this.getFieldContainer(),t=this.getValue()):t=this.attributes.currentValue,this.type;var o={supportsTokens:this.attributes.supportsTokens,required:this.attributes.isRequired};return(0,I.OP)(n,this.type,t,o,this.customValidationFunction)}},{key:"onChange",value:function(){var t=this;this.formElement.on("automator:field:change",(function(e,n){(0,S.$K)(t.fieldContainer)&&((0,S.xb)(t.getValue())?t.fieldContainer.removeClass("form-input--has-value"):t.fieldContainer.addClass("form-input--has-value")),"select"==t.attributes.fieldType&&t.attributes.supportsCustomValue&&("automator_custom_value"==t.getValue()?t.customValueFieldContainer.addClass("form-select-custom--visible"):t.customValueFieldContainer.removeClass("form-select-custom--visible"));var o=function(){if(t.attributes.isAjax&&t.attributes.targetField!==t.attributes.optionCode&&t.doAJAX(),(0,S.$K)(t.attributes.isChildField)&&t.attributes.isChildField&&(0,S.$K)(t.attributes.parentOptionCode)){var e=(0,S.rz)(t.attributes.itemId,t.attributes.parentOptionCode);(0,S.$K)(e)&&e.doAJAX()}};if(t.attributes.isAjax&&(0,S.$K)(t.attributes.targetField)&&t.attributes.targetField!==t.attributes.optionCode&&(t.attributes.completedFirstLoad||(0,S.xb)(t.attributes.currentValue)&&!t.attributes.hasDefaultValue&&!t.attributes.completedFirstLoad)){var i=(0,S.rz)(t.attributes.itemId,t.attributes.targetField);i.setValue(null,!1),i.setCustomValue(null,!1)}return["select","radio","checkbox"].includes(t.attributes.fieldType)?o():((0,S.$K)(t.onChangeTimeout)&&clearTimeout(t.onChangeTimeout),t.onChangeTimeout=setTimeout((function(){o()}),1500)),!1}))}},{key:"onFocus",value:function(){var t=this;this.field.on("focusin",(function(e){t.attributes.isReadOnly&&i()(e.currentTarget).select()})),this.field.on("focusout",(function(){}))}},{key:"isReady",value:function(){var t=!1;return(0,S.$K)(UncannyAutomator.recipe.items[this.attributes.itemId])&&(t=!0),t}},{key:"doAJAX",value:function(){var t=this;if((0,S.$K)(this.getValue())?this.getValue():this.getMetaValue(),this.attributes.isAjax){var e=this;if(this.attributes.optionCode!=this.attributes.targetField&&(e=(0,S.rz)(this.attributes.itemId,this.attributes.targetField)),!(0,S.xb)(this.attributes.integrationId)&&!(0,S.xb)(this.attributes.endpoint)){this.startLoadingAnimation(),e.startLoadingAnimation();var n=this.getValue(),o=(0,S.$K)(e.getValue())?e.getValue():e.getMetaValue();(0,S.bN)(this.attributes.endpoint,{recipe_id:UncannyAutomator.recipe.id,integration_id:this.attributes.integrationId,item_id:this.attributes.itemId,group_id:this.attributes.groupId,field_id:this.attributes.optionCode,target_field:this.attributes.targetField,value:n,values:(0,S.q7)(this.attributes.itemId)},(function(n){if(t.stopLoadingAnimation(),e.stopLoadingAnimation(),"select"==e.getAttributes().fieldType&&i().isArray(n)){if(t.attributes.isAjax&&(0,S.$K)(t.attributes.targetField)&&t.attributes.targetField!==t.attributes.optionCode&&(t.attributes.completedFirstLoad||(0,S.xb)(t.attributes.currentValue)&&!t.attributes.hasDefaultValue&&!t.attributes.completedFirstLoad)&&(o=null),"automator_custom_value"==o){var a=e.getSelectCustomValue();o=(0,S.xb)(a)?null:a}e.setSelectOptions(n,!1),e.setValue(o)}else e.setValue(n);t.attributes.completedFirstLoad=!0}))}}}},{key:"getFormElement",value:function(){var t=this;if(this.isReady()){this.attributes.completedFirstLoad=!1;var e=!1;try{e=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields.reduce((function(e,n){return e||n.attributes.targetField==t.attributes.optionCode&&n.attributes.optionCode!=t.attributes.optionCode&&n.attributes.isAjax}),!1)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}e||(this.attributes.targetField==this.attributes.optionCode&&this.attributes.isAjax&&this.doAJAX(),this.field.trigger("automator:field:change",{manuallySet:!1}))}return this.formElement}},{key:"$wrapper",get:function(){return this.getFormElement()}},{key:"getFieldContainer",value:function(){return this.fieldContainer}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"id",get:function(){return this.getFieldID()}},{key:"getField",value:function(){return this.field}},{key:"getFieldCM",value:function(){return this.$fakeCodemirrorField}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getValue",value:function(){var t=null;if((0,S.$K)(this.field))switch(this.type){case"select":case"text":case"url":case"email":case"int":case"float":case"date":case"time":t=this.field.val();break;case"textarea":if((0,S.$K)(this.TokenSelector))try{this.TokenSelector.parseHTMLTokensInPlainTextarea()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}t=this.field.val();try{(0,S.$K)(this.fieldTinyMCE)&&!this.fieldTinyMCE.hidden&&(t=this.fieldTinyMCE.getContent({format:"raw"}))}catch(t){}if(this.attributes.supportsTinyMCE)try{t=t.replaceAll("\n","")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}break;case"checkbox":t=this.field.is(":checked");break;case"radio":t=this.field.find("input:checked").val()}return(0,S.$K)(this.field)&&(0,S.$K)(t)||(this.attributes.hasValue?t=this.attributes.currentValue:this.attributes.hasDefaultValue&&(t=this.attributes.defaultValue)),t}},{key:"value",get:function(){return this.getValue()}},{key:"getReadableValue",value:function(){var t=this,e=null,n=this.getValue();switch(this.type){case"select":if((0,S.$K)(this.field))e=this.attributes.supportsMultipleValues&&i().isArray(n)?n.map((function(e){return t.field.find(X('option[value="%s"]',[e])).text()})).join("".concat(UncannyAutomator.i18n.itemSeparator," ")):this.field.find(X('option[value="%s"]',[n])).text();else if(this.attributes.supportsMultipleValues&&i().isArray(n))try{e=n.map((function(e){return t.getSelectOptionByValue(e).text})).join("".concat(UncannyAutomator.i18n.itemSeparator," "))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}else try{e=this.getSelectOptionByValue(n).text}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}break;case"text":case"url":case"email":case"int":case"float":case"textarea":case"date":case"time":n=i()("<p/>").html(n).text();break;case"checkbox":e=n?UncannyAutomator.i18n.trueLabel:UncannyAutomator.i18n.falseLabel;break;case"radio":if((0,S.$K)(this.field)){var o=this.field.find("input:checked");1==o.length&&(e=o.closest(".form-radio__container").text().trim())}else try{e=this.getSelectOptionByValue(n).text}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}return e}},{key:"readableValue",get:function(){return this.getReadableValue()}},{key:"getSelectCustomValue",value:function(){var t=null;if("select"==this.attributes.fieldType&&this.attributes.supportsCustomValue&&"automator_custom_value"==this.getValue())if((0,S.$K)(this.customValueField))t=this.customValueField.getValue();else try{t=UncannyAutomator.recipe.items[this.attributes.itemId].meta["".concat(this.attributes.optionCode,"_custom")]}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}return t}},{key:"getSelectOptionByValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=null,n=this.attributes.options;return this.attributes.supportsCustomValue&&n.push({value:"automator_custom_value",text:UncannyAutomator.i18n.validation.field.select.customValue}),(0,S.xb)(n)||n.forEach((function(n){t==n.value&&(e=n)})),e}},{key:"getMetaValue",value:function(){var t;if((0,S.$K)(UncannyAutomator.recipe.items[this.attributes.itemId])){var e=UncannyAutomator.recipe.items[this.attributes.itemId].meta[this.attributes.optionCode];(0,S.$K)(e)&&(t=e)}return t}},{key:"setValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{updateCodemirror:!0};if((0,S.$K)(this.field))switch(this.type){case"select":(0,S.$K)(t)||(t=this.attributes.supportsMultipleValues?[]:"");var a=this.field.find("option");if(this.attributes.supportsMultipleValues)a.prop("selected",!1),i().isArray(t)&&!(0,S.xb)(t)&&(t.forEach((function(t){var n=e.field.find('option[value="'.concat(t,'"]'));n.length>0&&n.prop("selected",!0)})),n&&this.field.trigger("change",{manuallySet:!1}));else{var r=this.field.find('option[value="'.concat(t,'"]'));r.length>0?(a.prop("selected",!1),r.prop("selected",!0),n&&this.field.trigger("change",{manuallySet:!1})):(a.prop("selected",!1),this.attributes.supportsCustomValue&&!(0,S.xb)(t)&&this.setCustomValue(t,!1),n&&this.field.trigger("change",{manuallySet:!1}))}break;case"text":case"url":case"email":case"int":case"float":if((0,S.$K)(o.updateCodemirror)&&o.updateCodemirror&&(0,S.$K)(this.fieldCM))try{this.fieldCM.setValue(t)}catch(e){this.field.val(t)}else this.field.val(t);n&&this.field.trigger("automator:field:change");break;case"textarea":if(this.field.val(t),(0,S.$K)(this.fieldTinyMCE)&&this.fieldTinyMCE.setContent(t),(0,S.$K)(o.updateCodemirror)&&o.updateCodemirror&&(0,S.$K)(this.fieldCM))try{this.fieldCM.setValue(t)}catch(e){this.field.val(t)}else this.field.val(t);n&&this.field.trigger("automator:field:change");break;case"checkbox":var s=t,c=this.getValue();s&&!c&&this.field.prop("checked",!0),!s&&c&&this.field.prop("checked",!1),n&&(s&&!c||!s&&c)&&this.field.trigger("automator:field:change");break;case"radio":this.field.filter('[name="'.concat(t,'"]')).prop("checked",!0),n&&this.field.trigger("automator:field:change");break;case"date":case"time":this.field.val(t),n&&this.field.trigger("automator:field:change")}}},{key:"clearValue",value:function(){this.setValue("",!0);try{this.fieldCM.setValue("")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if(["date","time"].includes(this.attributes.fieldType))try{this.flatpickrInstance.clear()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}},{key:"setCustomValue",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&(this.field.val("automator_custom_value"),this.customValueField.setValue(t,e),e&&this.field.trigger("change",{manuallySet:!1}))}},{key:"hasSelectedOption",value:function(){return this.selectHasSelectedOption}},{key:"setSelectOptions",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeSelectOptions();try{t=t.filter((function(t){return(0,S.$K)(t.value)&&(0,S.$K)(t.text)}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if((0,S.$K)(this.field)){var n=this.field.find(".form-element__select-normal-options");if(t.length>0){this.field.prop("disabled",!1);var o=(0,S.$K)(this.getValue())?this.getValue():this.getMetaValue(),a=[];i().each(t,(function(t,e){var o=new Option(e.text,e.value,!1,!1);n.append(o),a.push(o)})),(0,S.xb)(o)||i().each(this.field.find("option"),(function(t,e){e.value==o&&i()(e).prop("selected",!0)}))}else{var r=i()(new Option(UncannyAutomator.i18n.noResults,"",!this.attributes.supportsCustomValue,!this.attributes.supportsCustomValue));r.prop("disabled",!0),n.append(r),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}e&&this.field.trigger("change"),this.rerenderSelect2()}}},{key:"removeSelectOptions",value:function(){(0,S.$K)(this.field)&&this.field.find(".form-element__select-normal-options").empty()}},{key:"isLoading",value:function(){return this.formElement.hasClass("form-element--loading")}},{key:"startLoadingAnimation",value:function(){var t="form-element--loading";(0,S.$K)(this.formElement)&&!this.formElement.hasClass(t)&&(this.formElement.addClass(t),"checkbox"!=this.type||(0,S.$K)(this.attributes.isToggle)||this.fieldContainer.addClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"stopLoadingAnimation",value:function(){var t="form-element--loading";(0,S.$K)(this.formElement)&&this.formElement.hasClass(t)&&(this.formElement.removeClass(t),this.fieldContainer.removeClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"initLibraries",value:function(){switch(this.type){case"select":this.initSelect2(this.field);break;case"text":case"url":case"email":case"int":case"float":case"textarea":break;case"date":case"time":this.initFlatpickr(this.field)}}},{key:"getSelect2Settings",value:function(){var t={theme:"uap-select2",searchInputPlaceholder:UncannyAutomator.i18n.search,language:{noResults:function(){return UncannyAutomator.i18n.noResults}},templateResult:function(t){var e=t.text;return(0,S.$K)(t.id)&&Number.isInteger(parseInt(t.id))&&parseInt(t.id)>0&&(e='<span class="uap-select2-item__meta">('.concat(X(UncannyAutomator.i18n.postIDPlaceholder,[t.id.replace("-objectkey","")]),")</span> ").concat(t.text)),e},templateSelection:function(t){var e=t.text;return(0,S.$K)(t.id)&&Number.isInteger(parseInt(t.id))&&parseInt(t.id)>0&&(e='<span class="uap-select2-item__meta">('.concat(X(UncannyAutomator.i18n.postIDPlaceholder,[t.id.replace("-objectkey","")]),")</span> ").concat(e)),e},escapeMarkup:function(t){return t}};return this.attributes.hasPlaceholder&&(t.placeholder=this.attributes.placeholder),this.attributes.customClass&&(t.customClass=this.attributes.customClass),t}},{key:"initSelect2",value:function(t){var e=this.getSelect2Settings();t.hasClass("select2-hidden-accessible")||t.select2(e)}},{key:"initFlatpickr",value:function(t){var e=this;(0,S.$K)(document.getElementById("uap-flatpickr-calendar"))||i()("body").append(i()('<div id="uap-flatpickr-calendar" class="uap uap-flatpickr-calendar"></div>'));var n=document.getElementById("uap-flatpickr-calendar"),o={allowInput:!0,positionElement:this.$fakeCodemirrorField[0],altInput:!0,clickOpens:!1,appendTo:n,locale:{weekdays:{shorthand:[UncannyAutomator.i18n.format.date.weekdays.shorthand.sunday,UncannyAutomator.i18n.format.date.weekdays.shorthand.monday,UncannyAutomator.i18n.format.date.weekdays.shorthand.tuesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.wednesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.thursday,UncannyAutomator.i18n.format.date.weekdays.shorthand.friday,UncannyAutomator.i18n.format.date.weekdays.shorthand.saturday],longhand:[UncannyAutomator.i18n.format.date.weekdays.longhand.sunday,UncannyAutomator.i18n.format.date.weekdays.longhand.monday,UncannyAutomator.i18n.format.date.weekdays.longhand.tuesday,UncannyAutomator.i18n.format.date.weekdays.longhand.wednesday,UncannyAutomator.i18n.format.date.weekdays.longhand.thursday,UncannyAutomator.i18n.format.date.weekdays.longhand.friday,UncannyAutomator.i18n.format.date.weekdays.longhand.saturday]},months:{shorthand:[UncannyAutomator.i18n.format.date.months.shorthand.january,UncannyAutomator.i18n.format.date.months.shorthand.february,UncannyAutomator.i18n.format.date.months.shorthand.march,UncannyAutomator.i18n.format.date.months.shorthand.april,UncannyAutomator.i18n.format.date.months.shorthand.may,UncannyAutomator.i18n.format.date.months.shorthand.june,UncannyAutomator.i18n.format.date.months.shorthand.july,UncannyAutomator.i18n.format.date.months.shorthand.august,UncannyAutomator.i18n.format.date.months.shorthand.september,UncannyAutomator.i18n.format.date.months.shorthand.october,UncannyAutomator.i18n.format.date.months.shorthand.november,UncannyAutomator.i18n.format.date.months.shorthand.december],longhand:[UncannyAutomator.i18n.format.date.months.longhand.january,UncannyAutomator.i18n.format.date.months.longhand.february,UncannyAutomator.i18n.format.date.months.longhand.march,UncannyAutomator.i18n.format.date.months.longhand.april,UncannyAutomator.i18n.format.date.months.longhand.may,UncannyAutomator.i18n.format.date.months.longhand.june,UncannyAutomator.i18n.format.date.months.longhand.july,UncannyAutomator.i18n.format.date.months.longhand.august,UncannyAutomator.i18n.format.date.months.longhand.september,UncannyAutomator.i18n.format.date.months.longhand.october,UncannyAutomator.i18n.format.date.months.longhand.november,UncannyAutomator.i18n.format.date.months.longhand.december]},rangeSeparator:" ".concat(UncannyAutomator.i18n.format.date.rangeSeparator," "),firstDayOfWeek:parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)>=1&&parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)<=7?parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)-1:0,weekAbbreviation:" ".concat(UncannyAutomator.i18n.format.date.weekAbbreviation," "),scrollTitle:UncannyAutomator.i18n.scrollToIncrement,toggleTitle:UncannyAutomator.i18n.clickToToggle,amPM:[UncannyAutomator.i18n.format.date.am,UncannyAutomator.i18n.format.date.pm],yearAriaLabel:UncannyAutomator.i18n.format.date.year,monthAriaLabel:UncannyAutomator.i18n.format.date.month,hourAriaLabel:UncannyAutomator.i18n.format.date.hour,minuteAriaLabel:UncannyAutomator.i18n.format.date.minute},onReady:function(t,n,o){try{var i=function(){e.getValue().includes("}}")||e.fieldCM.getValue()!=o.altInput.value&&e.fieldCM.setValue(o.altInput.value)};(0,S.$K)(e.fieldCM)?i():e.field.on("ua-codemirror-ready",(function(){i()}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}},onChange:function(t,n,o){try{var i=function(){e.fieldCM.setValue(o.altInput.value)};(0,S.$K)(e.fieldCM)?i():e.field.on("ua-codemirror-ready",(function(){i()}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}};"date"==this.attributes.fieldType&&(o=i().extend(o,{dateFormat:this.attributes.dateFormat,altFormat:this.attributes.dateAltFormat}),this.attributes.supportsRange&&(o.mode="range"),(0,S.$K)(this.attributes.minDate)&&(o.minDate=this.attributes.minDate),(0,S.$K)(this.attributes.maxDate)&&(o.maxDate=this.attributes.maxDate)),"time"==this.attributes.fieldType&&(o=i().extend(o,{enableTime:!0,noCalendar:!0,dateFormat:this.attributes.timeFormat,altFormat:this.attributes.timeAltFormat}),(0,S.$K)(this.attributes.minTime)&&(o.minTime=this.attributes.minTime),(0,S.$K)(this.attributes.manTime)&&(o.manTime=this.attributes.manTime)),this.flatpickrInstance=t.flatpickr(o)}},{key:"initCodeMirror",value:function(){var t=this;if(["text","url","email","int","float","date","time","textarea"].includes(this.attributes.fieldType)){this.destroyCodeMirror();var e=this.getValue();this.fieldCM=CodeMirror(this.$fakeCodemirrorField[0],{lineNumbers:0,tabSize:4,value:e,mode:"default",dragDrop:!1,viewportMargin:1/0,lineWrapping:!0,autoRefresh:!0,noNewlines:!("textarea"==this.attributes.fieldType),scrollbarStyle:"textarea"==this.attributes.fieldType?"native":null,extraKeys:{Tab:function(){var e=t.getNextField();return(0,S.$K)(e)&&e.focus(),!1}},readOnly:this.attributes.isReadOnly}),this.attributes.hasPlaceholder&&this.fieldCM.setOption("placeholder",this.attributes.placeholder),this.fieldCM.on("changes",(function(e,n){["date","time"].includes(t.attributes.fieldType)||t.setValue(t.fieldCM.getValue(),!0,{updateCodemirror:!1})})),this.fieldCM.on("focus",(function(){if(["date","time"].includes(t.attributes.fieldType))try{setTimeout((function(){t.flatpickrInstance.open()}),50)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}})),this.field.on("focus",(function(){t.fieldCM.focus()})),this.field.trigger("ua-codemirror-ready")}"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&this.customValueField.initCodeMirror()}},{key:"getNextField",value:function(){var t=null;if((0,S.$K)(this.attributes.itemId)&&(0,S.$K)(this.attributes.groupId)){var e=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields;if((0,S.$K)(e)&&i().isArray(e)){var n=e.indexOf(this);-1!=n&&n!=e.length-1&&(t=e[n+1])}}if((0,S.$K)(this.attributes.itemType)&&"user-selector"==this.attributes.itemType){var o=UncannyAutomator.recipe.userSelector.fields;if((0,S.$K)(o)&&i().isArray(o)){var a=o.indexOf(this);-1!=a&&a!=o.length-1&&(t=o[a+1])}}return t}},{key:"focus",value:function(){if((0,S.$K)(this.field))switch(this.type){case"select":try{this.field.select2("focus")}catch(t){this.field.focus()}break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":(0,S.$K)(this.fieldCM)?this.fieldCM.focus():this.field.focus();break;case"textarea":if((0,S.$K)(this.fieldTinyMCE))if(this.field.is(":visible"))this.field.focus();else try{this.fieldTinyMCE.focus()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}else this.field.focus();break;case"checkbox":case"radio":this.field.focus()}}},{key:"destroyCodeMirror",value:function(){if((0,S.$K)(this.fieldCM))try{var t=this.fieldCM.getWrapperElement();t.parentNode.removeChild(t),this.fieldCM=null}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}},{key:"rerenderSelect2",value:function(){var t=this.getSelect2Settings();!(0,S.xb)(this.field)&&this.field.hasClass("select2-hidden-accessible")&&this.field.select2("destroy").select2(t)}},{key:"initTokenSelector",value:function(){this.attributes.supportsTokens&&(this.destroyTokenSelector(),this.tokenSelector=new W(this,{unsupportedTokens:this.attributes.unsupportedTokens})),"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&this.customValueField.initTokenSelector()}},{key:"destroyTokenSelector",value:function(){(0,S.$K)(this.tokenSelector)&&this.tokenSelector.destroy()}},{key:"initTinyMCE",value:function(){var t=this;if(this.field,(0,S.$K)(this.field)&&"textarea"==this.attributes.fieldType&&this.attributes.supportsTinyMCE){var e=this.field.prop("id"),n=tinymce.get(e);(0,S.$K)(n)&&wp.editor.remove(e),wp.editor.initialize(e,{mediaButtons:!0,tinymce:{toolbar1:"formatselect bold italic bullist numlist blockquote alignleft aligncenter alignright link unlink wp_more",toolbar2:"strikethrough hr forecolor pastetext removeformat visualchars outdent indent undo redo"},quicktags:!0}),(n=tinymce.get(e)).hidden?this.fieldContainer.addClass("form-textarea--tinymce-text"):this.fieldContainer.addClass("form-textarea--tinymce-visual"),this.formElement.find(".switch-tmce").on("click",(function(){t.field.trigger("ua-tinymce-activate-visual-view"),t.fieldContainer.removeClass("form-textarea--tinymce-text").addClass("form-textarea--tinymce-visual")})),this.formElement.find(".switch-html").on("click",(function(){t.field.trigger("ua-tinymce-activate-text-view"),t.fieldContainer.removeClass("form-textarea--tinymce-visual").addClass("form-textarea--tinymce-text");try{t.fieldCM.setValue(n.getContent({format:"raw"}))}catch(e){t.field.val(n.getContent({format:"raw"}))}})),this.fieldTinyMCE=n,n.on("init",(function(){t.field.trigger("ua-tinymce-ready")}))}}}],n&&J(e.prototype,n),t}();const tt=Q;!function(t){var e=t.fn.select2.amd.require("select2/defaults");t.extend(e.defaults,{searchInputPlaceholder:""});var n=t.fn.select2.amd.require("select2/dropdown/search"),o=n.prototype.render;n.prototype.render=function(){var t=o.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr("placeholder",this.options.get("searchInputPlaceholder")),this.$search.addClass(this.options.get("customClass")),t}}(window.jQuery)},515:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var o=n(311),i=n.n(o),a=n(693),r=n(772),s=n(973),c=n(171),l=n(780);function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const d=function(){function t(e,n,o,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.integrationID=n,this.itemCode=o,this.itemId=i,this.item=UncannyAutomator.recipe.items[i],this.createItemActions()}var e,n;return e=t,(n=[{key:"createItemActions",value:function(){var t=this,e=i()("<div/>",{class:"item-actions"}),n=i()("<div/>",{class:"item-actions__btn"}),o=i()("<uo-icon/>",{id:"ellipsis-h"}),u=i()("<div/>",{class:"item-actions__dropdown"}),d=i()("<ul/>",{class:"item-actions-dropdown__ul"});n.append(o),e.append(n);var p=i()("<li/>",{class:"item-actions-dropdown__action"}),m=i()("<span/>").text(UncannyAutomator.i18n.delete);if(p.append(m),d.append(p),(0,a.$K)(this.itemType)&&(0,a.$K)(this.itemCode)&&(!(0,a.$K)(this.item)||(0,a.$K)(this.item)&&!this.item.isMissing)){var f=(0,a.Vx)(this.integrationID,this.itemType,this.itemCode);if((0,a.$K)(f.support_link)){var h="support_menu_link-".concat(this.integrationID,"-").concat(this.integrationID,"_").concat(this.itemCode,"-").concat(this.integrationID,"_").concat((0,a.hF)(f.select_option_name,"","").toLowerCase().replace(/\s+|{|}/g,"_")),g=i()("<a/>",{href:(0,a.XE)(f.support_link,{medium:"action_menu",content:h}),class:"item-actions-dropdown__action",target:"_blank"}),y=i()("<span/>").text(UncannyAutomator.i18n.support);g.append(y),d.append(g)}}return u.append(d),e.append(u),n.on("click",(function(){e.hasClass("item-actions--open")?(e.removeClass("item-actions--open"),i()(document).off("mouseup.uap-actions-click-outside")):(e.addClass("item-actions--open"),i()(document).on("mouseup.uap-actions-click-outside",(function(t){e.is(t.target)||0!==e.has(t.target).length||(e.removeClass("item-actions--open"),i()(document).off("mouseup.uap-actions-click-outside"))})))})),p.on("click",(function(){if((0,a.$K)(t.itemId)&&UncannyAutomator.recipe.isLive&&UncannyAutomator.recipe.items[t.itemId].isLive){e.removeClass("item-actions--open");var n=new r.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,a.hF)(UncannyAutomator.i18n.confirmationModal.deleteWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});n.setEvents({afterSetEvents:function(){n.show()},onConfirm:function(){n.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0);var e={ID:t.itemId};(0,a.L8)("delete",e,(function(){n.destroy(),"trigger"==t.itemType&&(new s.Z,UncannyAutomator.cache.tokens=[],"anonymous"==UncannyAutomator.recipe.type&&new c.Z),"action"!=t.itemType&&"closure"!=t.itemType||(new c.Z,(0,l.Z)()),UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){n.destroy(),console.log("â€¼ï¸ ERROR-TODO. Couldn't delete the item"),"trigger"==t.itemType&&new s.Z,"action"!=t.itemType&&"closure"!=t.itemType||new c.Z}))},afterHide:function(){n.destroy()}})}else if((0,a.$K)(t.itemId)){p.addClass("item-actions-dropdown__action--loading");var o={ID:t.itemId};(0,a.L8)("delete",o,(function(){"trigger"==t.itemType&&(new s.Z,UncannyAutomator.cache.tokens=[],"anonymous"==UncannyAutomator.recipe.type&&new c.Z),"action"!=t.itemType&&"closure"!=t.itemType||(new c.Z,(0,l.Z)({}))}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't delete the item"),"trigger"==t.itemType&&new s.Z,"action"!=t.itemType&&"closure"!=t.itemType||new c.Z}))}else"trigger"==t.itemType&&new s.Z,"action"==t.itemType&&new c.Z})),e}}])&&u(e.prototype,n),t}()},171:(t,e,n)=>{"use strict";n.d(e,{Z:()=>yt});var o=n(311),i=n.n(o),a=n(693),r=n(109),s=n(593),c=n(27);function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u=n(975).vsprintf;const d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),UncannyAutomator.recipe.userSelector.step=(0,a.Cn)("get-step"),this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){var t="";switch(UncannyAutomator.recipe.userSelector.step){case"select-source":UncannyAutomator.recipe.userSelector.isValid=!1,(0,a.Tm)("validate"),t=this.getSelectSourceNodes();break;case"set-options":t=this.getOptionsNodes();break;case"show-sentence":(0,a.Tm)("validate"),UncannyAutomator.recipe.errorMode=!1,new s.Z,t=this.getSentenceNodes()}(0,a.M0)("metabox",{type:"action"}).prepend(t)}},{key:"getSelectSourceNodes",value:function(){var t=i()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t</div>\t\n\t\t'));return t.append(this.createItem()),t.find(".uap-item-inner-content").append(i()('\n\t\t\t<div class="item-integrations">\n\t\t\t\t<div class="item-integration user-selector-option user-selector-option--existing-user" data-source="existingUser">\n\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.userType.existing,'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-integration user-selector-option user-selector-option--new-user" data-source="newUser">\n\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.new,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"))),t.find(".user-selector-option").on("click",(function(t){var e=i()(t.currentTarget).data("source");(0,a.Cn)("set-source",{source:e}),UncannyAutomator.recipe.userSelector.step="set-options",new yt})),t}},{key:"getOptionsNodes",value:function(){var t=i()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t</div>\n\t\t'));return t.prepend(this.createItem()),t.find(".uap-item-inner-content").append(i()('<div class="item-options"></div>')),t.find(".item-options").append(this.getOptionsFields()),t}},{key:"getOptionsFields",value:function(){var t=i()("<div></div>"),e=i()('<div class="item-options__group"></div>'),n=[];(0,a.Cn)("update-fields",{source:"existingUser",data:{}}),(0,a.Cn)("update-fields",{source:"newUser",data:{}});var o=UncannyAutomator.recipe.userSelector.resources.roles;switch(delete o.administrator,UncannyAutomator.recipe.userSelector.source){case"existingUser":var s=i()('<div class="user-selector__field-group user-selector__field-group--two-columns"></div>'),c=new r.Z("select",{itemType:"user-selector",optionCode:"uniqueField",label:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionEmail},{value:"id",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionId},{value:"username",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionUsername}]});n.push(c);var l=new r.Z("text",{itemType:"user-selector",optionCode:"uniqueFieldValue",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue,label:UncannyAutomator.i18n.userSelector.existingUser.valueFieldLabel,isRequired:!0,supportsTokens:!0});n.push(l);var u=c.getFormElement();l.initTokenSelector(),l.initCodeMirror(),s.append(u);var d=l.getFormElement();s.append(d),e.append(s);var p=new r.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-existing-user-fallback",label:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.fallback,options:[{value:"create-new-user",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionCreateUser},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionDoNothing}]});n.push(p);var m=p.getFormElement();if(e.append(m),u.on("automator:field:change",(function(){(0,a.Cn)("update-fields",{source:"existingUser",data:{uniqueField:c.getValue()}})})),d.on("automator:field:change",(function(){(0,a.Cn)("update-fields",{source:"existingUser",data:{uniqueFieldValue:l.getValue()}})})),m.on("automator:field:change",(function(){(0,a.Cn)("update-fields",{source:"existingUser",data:{fallback:p.getValue()}}),new yt})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var f=i()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.existingUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));e.append(f)}else if("create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var h=i()("<div/>",{class:"item-options"});[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,a.xb)(UncannyAutomator.recipe.userSelector.data.existingUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.existingUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(o).map((function(t,e){return{value:t,text:o[t]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,a.xb)(UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(t){var e=new r.Z(t.fieldType,t),o=e.getFormElement();h.append(o),e.initTokenSelector(),e.initCodeMirror(),n.push(e)})),e.append(h)}break;case"newUser":[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,a.xb)(UncannyAutomator.recipe.userSelector.data.newUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.newUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(o).map((function(t,e){return{value:t,text:o[t]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,a.xb)(UncannyAutomator.recipe.userSelector.data.newUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.newUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(t){var o=new r.Z(t.fieldType,t),i=o.getFormElement();e.append(i),o.initTokenSelector(),o.initCodeMirror(),n.push(o)}));var g=new r.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-new-user-fallback",label:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.fallback,options:[{value:"select-existing-user",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionExisting},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionDoNothing}]});n.push(g);var y=g.getFormElement();if(e.append(y),y.on("automator:field:change",(function(){var t={};n.forEach((function(e){t[e.getAttributes().optionCode]=e.getValue()})),(0,a.Cn)("update-fields",{source:"newUser",data:t}),new yt})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var v=i()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.newUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));e.append(v)}else if("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var _=i()("<div/>",{class:"item-options"}),b=new r.Z("select",{itemType:"user-selector",optionCode:"prioritizedField",label:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.prioritizedField,defaultValue:"email",description:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldDescription,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.newUser.email},{value:"username",text:UncannyAutomator.i18n.userSelector.newUser.username}]});n.push(b);var w=b.getFormElement();_.append(w),e.append(_)}}UncannyAutomator.recipe.userSelector.fields=n,t.append(e);var A=i()('<div class="item-options__buttons"></div>'),k=i()('<div class="uap-btn uap-btn--primary">'.concat(UncannyAutomator.i18n.save,"</div>")),C=i()('<div class="uap-btn uap-btn--secondary">'.concat(UncannyAutomator.i18n.cancel,"</div>"));return k.on("click",(function(){var t=!0,e={};n.forEach((function(n){var o=n.validate().isValid;t=t&&o,o&&(e[n.getAttributes().optionCode]=n.getValue())})),(0,a.Cn)("update-fields",{source:UncannyAutomator.recipe.userSelector.source,data:e}),t&&(k.addClass("uap-btn--primary uap-btn--loading uap-btn--disabled"),(0,a.L8)("user-selector",{recipeId:UncannyAutomator.recipe.id,source:UncannyAutomator.recipe.userSelector.source,data:UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source]},(function(t){UncannyAutomator.recipe.userSelector.isValid=!0,(0,a.Cn)("set-step",{step:"show-sentence"}),new yt}),(function(t){})))})),C.on("click",(function(){(0,a.Cn)("set-step",{step:"select-source"}),new yt})),A.append(k),A.append(C),t.append(A),t}},{key:"getSentenceNodes",value:function(){var t=i()('\n\t\t\t<div class="user-selector user-selector--summary '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t</div>\n\t\t'));t.prepend(this.createItem()),t.find(".uap-item-inner-content").append(i()('<div class="user-selector-summary"></div>'));var e=t.find(".user-selector-summary"),n=i()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<uo-icon id="atom"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),o=i()('\n\t\t\t<div class="user-selector-summary-row__token"></div>\n\t\t');n.find(".user-selector-summary-row__content").append(o),"existingUser"==UncannyAutomator.recipe.userSelector.source?o.text(UncannyAutomator.i18n.userSelector.userType.existing):"newUser"==UncannyAutomator.recipe.userSelector.source&&o.text(UncannyAutomator.i18n.userSelector.userType.new),o.on("click",(function(){(0,a.Cn)("set-step",{step:"select-source"}),new yt})),e.append(n);var r,s=i()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<uo-icon id="fingerprint"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),l=UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue;try{l=new c.Z("user-selector").renderTextWithTokens(l).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if("existingUser"==UncannyAutomator.recipe.userSelector.source)r=i()("\n\t\t\t\t<div>\n\t\t\t\t".concat(u(UncannyAutomator.i18n.userSelector.summary.matches,['<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.i18n.userSelector.summary[UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField],"</div>"),'<div class="user-selector-summary-row__token">'.concat(l,"</div>")]),"\n\t\t\t\t</div>"));else if("newUser"==UncannyAutomator.recipe.userSelector.source){var d=UncannyAutomator.recipe.userSelector.data.newUser.email;try{d=new c.Z("user-selector").renderTextWithTokens(d).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}r=i()("\n\t\t\t\t<div>\n\t\t\t\t".concat(u(UncannyAutomator.i18n.userSelector.summary.withEmail,['<div class="user-selector-summary-row__token">'.concat(d,"</div>")]),"\n\t\t\t\t</div>\n\t\t\t\t"))}s.find(".user-selector-summary-row__content").append(r),r.find(".user-selector-summary-row__token").on("click",(function(){(0,a.Cn)("set-step",{step:"set-options"}),new yt})),e.append(s);var p=i()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<uo-icon id="directions"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),m="";"existingUser"==UncannyAutomator.recipe.userSelector.source?"create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback?m=UncannyAutomator.i18n.userSelector.summary.createNewUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback&&(m=UncannyAutomator.i18n.userSelector.summary.doNothing):"newUser"==UncannyAutomator.recipe.userSelector.source&&("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback?m=UncannyAutomator.i18n.userSelector.summary.selectExistingUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback&&(m=UncannyAutomator.i18n.userSelector.summary.doNothing));var f=i()("\n\t\t\t<div>\n\t\t\t".concat(u(UncannyAutomator.i18n.userSelector.summary.otherwise,['<div class="user-selector-summary-row__token">'.concat(m,"</div>")]),"\n\t\t\t</div>"));return p.find(".user-selector-summary-row__content").append(f),p.find(".user-selector-summary-row__token").on("click",(function(){(0,a.Cn)("set-step",{step:"set-options"}),new yt})),e.append(p),t}},{key:"createItem",value:function(){var t={stepTitle:"set-options"==UncannyAutomator.recipe.userSelector.step?UncannyAutomator.i18n.userSelector.setOptions:UncannyAutomator.i18n.userSelector.sentenceTitle,supportUrl:(0,a.XE)("https://automatorplugin.com/knowledge-base/anonymous-recipes/#Introducing_the_User_Selector",{medium:"user_selector",content:"support_menu_link"})},e=document.createElement("div");return e.classList.add("uap-item","uap-item--user-selector","item","item--user-selector"),e.innerHTML='\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar">\n\t\t\t\t\t<div class="uap-item-icon"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-top-header">\n\t\t\t\t\t<div class="uap-item-top-header-left">\n\t\t\t\t\t\t'.concat(t.stepTitle,'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="uap-item-top-header-right">\n\t\t\t\t\t\t<uo-dropdown align="right" items-close-dropdown>\n\t\t\t\t\t\t\t<uo-icon id="ellipsis-h" slot="button"></uo-icon>\n\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="').concat(t.supportUrl,'" target="_blank">\n\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.support,'\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</uo-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-inner-content"></div>\n\t\t\t</div>\n\t\t'),e}}])&&l(e.prototype,n),t}();var p=n(977),m=n(911),f=n(464),h=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=document.createElement("div");e.classList.add("item","uap-item","uap-item--actions-initial"),e.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar">\n\t\t\t\t\t<div class="uap-item-icon"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-main">\n\t\t\t\t\t<div class="uap-btn uap-btn--secondary uap-btn--small">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.action.add,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),(0,a.M0)("metabox",{type:"action"}).get(0).appendChild(e),e.querySelector(".uap-btn").addEventListener("click",(function(){new f.Z("action")}))},g=n(515),y=n(214),v=n(104),_=n(865);function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(975).vsprintf;const w=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={$metabox:(0,a.M0)("metabox",{type:"action"})},i().each(UncannyAutomator.closures,(function(t,o){return n.createClosure(o,e)}))}var e,n;return e=t,(n=[{key:"createClosure",value:function(t,e){var n=!1,o=i()('\n\t\t\t<div class="metabox__footer metabox__closures"></div>\n\t\t'),s={label:e,formElementClass:"form-element--nomargin"},c=this.getClosureByCodeFromItemsObject(t.code);(0,a.$K)(c)&&(n=!0,s.currentValue=!0,s.itemid=c.id);var l=new r.Z("checkbox",s),u=l.getFormElement();u.on("change",(function(){var e=l.getValue();l.startLoadingAnimation(),e?(0,a.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:"add-new-closure",item_code:t.code,default_meta:{integration_name:UncannyAutomator.integrations[t.integration].name,sentence:t.sentence}},(function(t){new yt,(0,a.$K)(t.post_ID)&&(0,a.M0)("item",{id:t.post_ID}).item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(t){console.log("â€¼ï¸ ERROR-TODO. Couldn't add the closure"),l.stopLoadingAnimation(),l.setValue(!1,!1)})):(0,a.L8)("delete",{ID:c.id},(function(){new yt}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't delete the closure"),new yt}))})),o.append(u);var d=i()("<div/>",{class:"uo-toggle uo-toggle--show"});if(n){d.addClass("uo-toggle--show");var p=i()("<div/>",{class:"item item--closure item--margintop uap-item uap-item--closure uap-item--margintop","data-id":c.id});p.append(this.createInnerContent(UncannyAutomator.recipe.items[c.id].integrationCode,"closure",t.code,c.id)),d.append(p)}o.append(d),this.elements.$metabox.append(o)}},{key:"createInnerContent",value:function(t,e,n,o){var i={$icon:new y.Z(t),$integrationNameTag:new v.Z({integrationId:t}),$actionMenu:new g.Z(e,t,n,o),$sentence:new _.Z(e,t,n,o)},a=document.createElement("div");return a.classList.add("uap-item-inner"),a.innerHTML='\n\t\t\t<div class="uap-item-sidebar"></div>\n\t\t\t<div class="uap-item-top-header">\n\t\t\t\t<div class="uap-item-top-header-left"></div>\n\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t</div>\n\t\t\t<div class="uap-item-main"></div>\n\t\t\t<div class="uap-item-inner-content"></div>\n\t\t',a.querySelector(".uap-item-sidebar").appendChild(i.$icon),a.querySelector(".uap-item-top-header-left").appendChild(i.$integrationNameTag),a.querySelector(".uap-item-top-header-right").appendChild(i.$actionMenu.get(0)),a.querySelector(".uap-item-main").appendChild(i.$sentence.get(0)),a}},{key:"getClosureByCodeFromItemsObject",value:function(t){var e;return i().each(UncannyAutomator.recipe.items,(function(n,o){o.itemCode==t&&(e=o)})),e}}])&&b(e.prototype,n),t}();var A=n(575),k=n(303),C=n(963),T=n(164),U=n(976),E=n(780);var x=n(408);function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function D(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var I=new WeakSet,O=new WeakSet,$=new WeakSet,L=function(){function t(e){var n=e.conditionsGroupId,o=e.conditionId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,$),D(this,O),D(this,I),this.conditionsGroupId=n,this.conditionId=o,this.conditionsGroup=(0,k.Z)({conditionsGroupId:n}),this.condition=(0,U.Z)({conditionsGroupId:n,conditionId:o}),S(this,I,P).call(this)}var e,n;return e=t,(n=[{key:"removeCondition",value:function(){this.conditionsGroup.removeCondition({conditionId:this.conditionId}),(0,E.Z)({})}},{key:"editCondition",value:function(){this.conditionsGroup.editCondition({conditionId:this.conditionId})}},{key:"$removeButton",get:function(){return this.$pill.querySelector(".uap-conditions-pill-actions-remove")}},{key:"$editButton",get:function(){return this.$pill.querySelector(".uap-conditions-pill-actions-edit")}},{key:"createIntegrationIcon",value:function(){var t=document.createElement("div");t.classList.add("uap-conditions-pill-logo");var e=function(t){var e=t.integrationCode,n=null;return(0,a.$K)(UncannyAutomator.integrations[e])&&(n=UncannyAutomator.integrations[e]),n}({integrationCode:this.condition.integrationCode});if((0,a.$K)(e)){var n=function(t){var e=t.integrationCode,n="";if((0,a.$K)(UncannyAutomator.integrations[e])){var o=UncannyAutomator.integrations[e];(0,a.$K)(o.icon_svg)?n=o.icon_svg:(0,a.$K)(o.icon_64)&&(n=o.icon_64)}return n}({integrationCode:this.condition.integrationCode});t.setAttribute("uap-tooltip",e.name),t.innerHTML='\n\t\t\t\t<img src="'.concat(n,'">\n\t\t\t')}return t}},{key:"createSentence",value:function(){var t=document.createElement("div");return t.classList.add("uap-conditions-pill-sentence"),t.appendChild(this.condition.$dynamicSentence),t}},{key:"createActionsTooltip",value:function(){var t=document.createElement("div");return t.classList.add("uap-conditions-pill-actions"),t.innerHTML='\n\t\t\t<span class="uap-conditions-pill-actions-edit">\n\t\t\t\t<uo-icon id="pencil"></uo-icon>\n\t\t\t</span>\n\n\t\t\t<span class="uap-conditions-pill-actions-remove">\n\t\t\t\t<uo-icon id="trash"></uo-icon>\n\t\t\t</span>\n\t\t',t}}])&&M(e.prototype,n),t}();function P(){var t=document.createElement("div");t.classList.add("uap-conditions-pill"),t.setAttribute("data-integration",this.condition.integrationCode),t.setAttribute("data-condition",this.condition.conditionCode),this.$pill=t,t.insertAdjacentElement("beforeEnd",this.createIntegrationIcon()),t.insertAdjacentElement("beforeEnd",this.createSentence()),(0,x.Z)()&&t.insertAdjacentElement("beforeEnd",this.createActionsTooltip()),S(this,O,R).call(this),S(this,$,F).call(this)}function R(){var t=this;(0,x.Z)()&&this.$removeButton.addEventListener("click",(function(){t.removeCondition()}))}function F(){var t=this;(0,x.Z)()&&this.$editButton.addEventListener("click",(function(){t.editCondition()}))}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function V(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function K(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function q(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var N=n(975).sprintf,H=new WeakSet,B=new WeakSet,W=new WeakSet,Z=new WeakSet,G=new WeakSet,Y=new WeakSet,z=new WeakSet,J=new WeakSet,X=new WeakSet,Q=new WeakSet,tt=new WeakSet,et=function(){function t(e){var n=e.conditionsGroupId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,tt),K(this,Q),K(this,X),K(this,J),K(this,z),K(this,Y),K(this,G),K(this,Z),K(this,W),K(this,B),K(this,H),this.conditionsGroupId=n;var o=(0,k.Z)({conditionsGroupId:n});(0,a.$K)(o)&&(this.conditionsGroup=o,this.conditionsGroup.hasActions&&q(this,H,nt).call(this))}var e,n;return e=t,(n=[{key:"$addConditionButton",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-add-condition-btn")}},{key:"$conditionPillsWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-content")}},{key:"$logicHeader",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header")}},{key:"$logicHeaderModeWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header-mode")}},{key:"$logicHeaderDropdownWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header-dropdown")}},{key:"$logicOperatorSelect",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header uo-select")}},{key:"$logicFooter",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-footer")}},{key:"$actionsWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-actions")}}])&&V(e.prototype,n),t}();function nt(){var t=document.createElement("div");t.classList.add("uap-conditions-block"),this.$block=t,t.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-conditions-block-logic">\n\t\t\t\t<div class="uap-conditions-block-logic-header">\n\t\t\t\t\t<div class="uap-conditions-block-logic-header-mode"></div>\n\t\t\t\t\t<div class="uap-conditions-block-logic-header-dropdown"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-conditions-block-logic-content"></div>\n\t\t\t\t<div class="uap-conditions-block-logic-footer"></div>\n\t\t\t</div>\n\t\t\t<div class="uap-conditions-block-actions"></div>\n\t\t'),(0,x.Z)()||(this.$block.classList.add("uap-conditions-block--cannot-manage"),this.$block.setAttribute("disabled","")),q(this,W,it).call(this),q(this,Z,at).call(this),q(this,Q,dt).call(this),q(this,G,rt).call(this),q(this,tt,pt).call(this),q(this,Y,st).call(this),q(this,B,ot).call(this),q(this,X,ut).call(this)}function ot(){this.conditionsGroup.hasActions&&(0,a.M0)("item",{id:this.conditionsGroup.actions[0]}).item.get(0).insertAdjacentElement("beforeBegin",this.$block)}function it(){if(this.conditionsGroup.numberOfConditions<=1)this.$logicHeaderModeWrapper.insertAdjacentHTML("beforeEnd","\n\t\t\t\t".concat(UncannyAutomator.i18n.conditions.runIf,"\n\t\t\t"));else if(this.conditionsGroup.numberOfConditions>1){var t=this.conditionsGroup.mode,e=UncannyAutomator.i18n.conditions.runIfAnyFull.replaceAll(/\{\{(.*)\}\}/gm,(function(t,e){return"<span>".concat(e,"</span>")})),n=N(e,'\n\t\t\t\t<uo-select>\n\t\t\t\t\t<uo-select-option\n\t\t\t\t\t\tvalue="any"\n\t\t\t\t\t\ttext="'.concat(UncannyAutomator.i18n.conditions.any,'"\n\t\t\t\t\t\t').concat("any"==t?"selected":"",'\n\t\t\t\t\t></uo-select-option>\n\n\t\t\t\t\t<uo-select-option\n\t\t\t\t\t\tvalue="all"\n\t\t\t\t\t\ttext="').concat(UncannyAutomator.i18n.conditions.all,'"\n\t\t\t\t\t\t').concat("all"==t?"selected":"","\n\t\t\t\t\t></uo-select-option>\n\t\t\t\t</uo-select>\n\t\t\t"));this.$logicHeaderModeWrapper.insertAdjacentHTML("beforeEnd",n),q(this,z,ct).call(this)}}function at(){var t=this;this.$logicHeaderDropdownWrapper.innerHTML='\n\t\t\t<uo-dropdown align="right">\n\t\t\t\t<uo-icon id="ellipsis-h" slot="button"></uo-icon>\n\n\t\t\t\t<ul>\n\t\t\t\t\t<li data-action="delete">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.delete,"\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</uo-dropdown>\n\t\t"),this.$logicHeaderDropdownWrapper.querySelector("uo-dropdown").addEventListener("automator/dropdown/item-clicked",(function(e){"delete"==e.detail.item.dataset.action&&(e.detail.item.setAttribute("loading",""),t.conditionsGroup.destroy(),(0,E.Z)({}))}))}function rt(){(0,x.Z)()&&(this.$logicFooter.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t<uo-button \n\t\t\t\t\tsize="extra-small"\n\t\t\t\t\tclass="uap-conditions-block-logic-add-condition-btn"\n\t\t\t\t>\n\t\t\t\t\t<uo-icon id="plus"></uo-icon>'.concat(UncannyAutomator.i18n.conditions.addBtnLabel,"\n\t\t\t\t</uo-button>\n\t\t\t")),q(this,J,lt).call(this))}function st(){if(!(0,x.Z)()){var t=1==this.conditionsGroup.numberOfActions?UncannyAutomator.i18n.conditions.actionWontRun:UncannyAutomator.i18n.conditions.actionsWontRun,e=1==this.conditionsGroup.numberOfActions?UncannyAutomator.i18n.conditions.actionWontRunContent:UncannyAutomator.i18n.conditions.actionsWontRunContent;this.$actionsWrapper.insertAdjacentHTML("beforeBegin",'\n\t\t\t\t<div class="uap-conditions-block-warning">\n\t\t\t\t\t<uo-alert \n\t\t\t\t\t\ttype="warning" \n\t\t\t\t\t\theading="'.concat(t,'" \n\t\t\t\t\t\tno-radius\n\t\t\t\t\t>\n\t\t\t\t\t\t').concat(N(e,"<strong>"+UncannyAutomator.i18n.uncannyAutomatorPro+"</strong>"),"\n\t\t\t\t\t</uo-alert>\n\t\t\t\t</div>\n\t\t\t"))}}function ct(){var t=this;this.$logicOperatorSelect.addEventListener("change",(function(){var e=t.$logicOperatorSelect.value;t.conditionsGroup.mode=e,(0,E.Z)({})}))}function lt(){var t=this;(0,x.Z)()&&this.$addConditionButton.addEventListener("click",(function(){new C.Z({conditionsGroupId:t.conditionsGroupId,comingFrom:"conditions-block-add-condition-button"})}))}function ut(){var t=this;this.conditionsGroup.actions.forEach((function(e){var n=(0,a.M0)("item",{id:e}).item.get(0);t.$actionsWrapper.appendChild(n)}))}function dt(){var t=this;this.conditionsGroup.hasConditions?Object.entries(this.conditionsGroup.conditions).forEach((function(e){var n,o,i=(o=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(n,o)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],r=(i[1],new L({conditionsGroupId:t.conditionsGroupId,conditionId:a}));t.$conditionPillsWrapper.appendChild(r.$pill)})):this.$conditionPillsWrapper.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t<span class="uap-conditions-block-logic-content-empty">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.conditions.noConditions,"\n\t\t\t\t</span>\n\t\t\t"))}function pt(){if((0,T.Z)()){var t=document.createElement("div");t.classList.add("uap-conditions-block-drag-handle"),t.innerHTML='<uo-icon id="sort-circle"></uo-icon>',this.$block.insertAdjacentElement("afterBegin",t)}}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function ft(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var ht=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,A.Z)()&&this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){Object.entries(UncannyAutomator.recipe.conditions).forEach((function(t){var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0];o[1],new et({conditionsGroupId:i})}))}}])&&ft(e.prototype,n),t}();function gt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,a.M0)("metabox",{type:"action"}).empty(),"anonymous"==UncannyAutomator.recipe.type&&new d;var e=(0,a.Wr)("get",{filter:{itemType:"action"}});if(!(0,a.xb)(e)&&(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var n=(0,a.p5)(e,"async_mode",!1),o=(0,a.PT)(e,"async_mode","delay"),i=(0,a.PT)(e,"async_mode","schedule");(0,a.xb)(o)&&(0,a.xb)(i)?(this.metaboxItems=new p.Z("action",n,!0),new m.Z("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):((0,a.xb)(n)||(this.metaboxItems=new p.Z("action",n,!0)),new m.Z("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly),this.metaboxItems=new p.Z("action",o,!1),this.metaboxItems=new p.Z("action",i,!1))}else(0,a.xb)(e)?(new h,this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):(this.metaboxItems=new p.Z("action",e,!0),new m.Z("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly));new ht;try{this.metaboxItems.makeSortable()}catch(t){}}var e,n;return e=t,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==(0,a.Tb)(null,"ua_connecting_integration")&&"action"==(0,a.Tb)(null,"ua_connecting_integration_context")}}])&&gt(e.prototype,n),t}()},921:(t,e,n)=>{"use strict";n.d(e,{Z:()=>x});var o=n(693);const i=function t(){var e=Date.now().toString(36)+Math.random().toString(36).substr(2);return(0,o.$K)(window._uap_unique_hash)||(window._uap_unique_hash=[]),window._uap_unique_hash.includes(e)?t():(window._uap_unique_hash.push(e),e)};var a=n(799),r=n(27);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const c=function(t){var e=t.dynamicSentence,n=void 0===e?"":e,i=t.fields,a=void 0===i?{}:i,c=document.createElement("span"),l=new RegExp(/\{\{(.*?)\:(.*?)(?:\:(.*?))?\}\}/gm),u=new r.Z;return n=n.replaceAll(l,(function(t,e,n,i){var a=document.createElement("span");return a.innerText=e,a.setAttribute("data-field",n),(0,o.xb)(i)||a.setAttribute("data-field-group",i),a.outerHTML})),c.innerHTML=n,Object.entries(a).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],l=i[1],d=c.querySelector('span[data-field="'.concat(r,'"]'));if((0,o.$K)(a["".concat(r,"_readable")])&&(l=a["".concat(r,"_readable")]),(0,o.$K)(d))try{d.innerText="",d.appendChild(l)}catch(t){if((0,o.xb)(l))d.innerHTML='\n\t\t\t\t\t\t<em class="uap-empty-value">'.concat(UncannyAutomator.i18n.emptyValue,"</em>\n\t\t\t\t\t");else try{var p=u.renderTextWithTokens(l);d.appendChild(p)}catch(t){d.innerText=l}}})),c};function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function d(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,m(t,e,"get"))}function p(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,m(t,e,"set"),n),n}function m(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var f=new WeakMap,h=new WeakMap,g=new WeakMap,y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,f,{writable:!0,value:""}),u(this,h,{writable:!0,value:""}),u(this,g,{writable:!0,value:{}}),this.id=i()}var e,n;return e=t,(n=[{key:"integrationCode",get:function(){return d(this,f)},set:function(t){(0,o.$K)(UncannyAutomator.integrations[t])&&p(this,f,t)}},{key:"conditionCode",get:function(){return d(this,h)},set:function(t){p(this,h,t)}},{key:"fields",get:function(){return d(this,g)},set:function(t){p(this,g,t)}},{key:"formattedForMeta",get:function(){return{integration:this.integrationCode,condition:this.conditionCode,fields:this.fields}}},{key:"$dynamicSentence",get:function(){var t=(0,a.Z)({integrationCode:this.integrationCode,conditionCode:this.conditionCode});return c({dynamicSentence:t.dynamic_name,fields:this.fields})}}])&&l(e.prototype,n),t}(),v=n(790);function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function w(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function A(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,C(t,e,"set"),n),n}function k(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,C(t,e,"get"))}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var T=new WeakMap,U=new WeakMap,E=new WeakMap,x=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,T,{writable:!0,value:"any"}),w(this,U,{writable:!0,value:[]}),w(this,E,{writable:!0,value:{}}),this.id=i(),UncannyAutomator.recipe.conditions[this.id]=this}var e,n;return e=t,(n=[{key:"addCondition",value:function(t){var e=t.integrationCode,n=t.conditionCode,o=t.fields,i=new y;return i.integrationCode=e,i.conditionCode=n,i.fields=o,k(this,E)[i.id]=i,i}},{key:"removeCondition",value:function(t){var e=t.conditionId;(0,o.$K)(this.conditions[e])&&delete k(this,E)[e]}},{key:"editCondition",value:function(t){var e=t.conditionId;new v.Z({conditionsGroupId:this.id,conditionId:e,comingFrom:"edit-condition-pill"})}},{key:"mode",get:function(){return k(this,T)},set:function(t){["all","any"].includes(t)?A(this,T,t):A(this,T,"any")}},{key:"actions",get:function(){return A(this,U,k(this,U).filter((function(t){return(0,o.$K)(UncannyAutomator.recipe.items[t])}))),k(this,U)},set:function(t){var e=this;A(this,U,[]);try{t.forEach((function(t){(0,o.$K)(UncannyAutomator.recipe.items[t])&&k(e,U).push(t)}))}catch(t){UncannyAutomator.dev.developerMode&&console.error("ConditionsGroup: Couldn't set the actions. Make sure the array is valid.")}}},{key:"conditions",get:function(){return k(this,E)},set:function(t){var e=this;A(this,E,{});try{t.forEach((function(t){e.addCondition({integrationCode:t.integration,conditionCode:t.condition,fields:t.fields})}))}catch(t){UncannyAutomator.dev.developerMode&&(console.error("ConditionsGroup: Couldn't set the conditions. Make sure the array is valid."),console.error(t))}}},{key:"formattedForMeta",get:function(){var t={};return t={actions:this.actions,mode:this.mode,conditions:[]},Object.entries(this.conditions).forEach((function(e){var n,o,i=(o=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(n,o)||function(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=(i[0],i[1]);t.conditions.push(a.formattedForMeta)})),t}},{key:"hasAction",value:function(t){return this.actions.includes(t)}},{key:"hasCondition",value:function(t){return(0,o.$K)(this.conditions[t])}},{key:"getCondition",value:function(t){return this.conditions[t]}},{key:"destroy",value:function(){delete UncannyAutomator.recipe.conditions[this.id]}},{key:"hasActions",get:function(){return!(0,o.xb)(this.actions)}},{key:"hasConditions",get:function(){return!(0,o.xb)(this.conditions)}},{key:"numberOfActions",get:function(){return Object.keys(this.actions).length}},{key:"numberOfConditions",get:function(){return Object.keys(this.conditions).length}}])&&b(e.prototype,n),t}()},963:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(790);function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(e){var n=e.conditionsGroupId,o=e.comingFrom;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.conditionsGroupId=n,this.comingFrom=o,this.selectCondition({integrationCode:"WP",conditionCode:"TOKEN_MEETS_CONDITION"})}var e,n;return e=t,(n=[{key:"selectCondition",value:function(t){var e=t.integrationCode,n=t.conditionCode,i=new CustomEvent("automator/action/conditions/add/select",{detail:{conditionsGroupId:this.conditionsGroupId,integrationCode:e,conditionCode:n}});document.dispatchEvent(i),new o.Z({conditionsGroupId:this.conditionsGroupId,integrationCode:e,conditionCode:n,comingFrom:this.comingFrom})}}])&&i(e.prototype,n),t}()},790:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var o=n(772),i=n(109),a=n(693),r=n(799),s=n(303),c=n(780),l=n(976);function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var d=function(){function t(e){var n=e.conditionsGroupId,o=e.integrationCode,i=e.conditionCode,c=e.conditionId,u=e.comingFrom;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var d=(0,s.Z)({conditionsGroupId:n});(0,a.xb)(d)||(this.conditionsGroup=d,this.comingFrom=u,(0,a.xb)(c)?(this.integrationCode=o,this.conditionCode=i,this.condition=this.createCondition(),this.modalMode="create"):(this.condition=(0,l.Z)({conditionsGroupId:n,conditionId:c}),(0,a.$K)(this.condition)&&(this.integrationCode=this.condition.integrationCode,this.conditionCode=this.condition.conditionCode),this.modalMode="edit"),(0,a.xb)(this.condition)||(this.conditionPostData=(0,r.Z)({integrationCode:this.integrationCode,conditionCode:this.conditionCode}),(0,a.xb)(this.conditionPostData)||this.render()))}var e,n;return e=t,(n=[{key:"render",value:function(){var t=this,e=document.createElement("div");e.classList.add("uap-conditions-options"),e.setAttribute("data-integration",this.integrationCode),e.setAttribute("data-condition",this.conditionCode),e.appendChild(this.createHeader()),e.appendChild(this.createFields());var n=new o.Z({title:UncannyAutomator.i18n.conditions.options.modalTitle,content:e,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.conditions.options.saveCondition}},{size:"xx-large",allowContentOverflow:!0});this.modal=n,n.setEvents({onConfirm:function(){t.saveOptions()},onCancel:function(){t.maybeRemoveCondition(),t.maybeRemoveConditionsGroup(),n.hide()},afterHide:function(){n.destroy()}})}},{key:"createHeader",value:function(){var t=document.createElement("div");return t.classList.add("uap-conditions-options-header"),t}},{key:"createFields",value:function(){var t=this,e=document.createElement("div");return e.classList.add("uap-conditions-options-fields"),this.fields={},this.conditionPostData.fields.forEach((function(n){var o=Object.assign({},n);(0,a.$K)(t.condition.fields[o.optionCode])&&(o.currentValue=t.condition.fields[o.optionCode]);var r=new i.Z(o.fieldType,o);t.fields[o.optionCode]=r,e.appendChild(r.$wrapper.get(0)),r.initTokenSelector(),r.initCodeMirror()})),e}},{key:"saveOptions",value:function(){var t=this;this.areFieldsValid()&&(this.condition.fields=this.getFieldsValues(),this.$submitButton.classList.add("uap-btn--loading"),this.$submitButton.setAttribute("disabled",""),(0,c.Z)({onSuccess:function(e){t.$submitButton.classList.remove("uap-btn--loading"),t.$submitButton.removeAttribute("disabled"),e.success&&t.modal.hide()},onFail:function(){t.$submitButton.classList.remove("uap-btn--loading"),t.$submitButton.removeAttribute("disabled")}}))}},{key:"createCondition",value:function(){return this.conditionsGroup.addCondition({integrationCode:this.integrationCode,conditionCode:this.conditionCode,fields:{}})}},{key:"getFieldsValues",value:function(){var t={};return Object.values(this.fields).forEach((function(e){t[e.id]=e.value,"select"==e.type&&(t["".concat(e.id,"_readable")]=e.readableValue)})),t}},{key:"areFieldsValid",value:function(){var t=!0;return Object.values(this.fields).forEach((function(e){var n=e.validate();t=t&&n.isValid})),t}},{key:"maybeRemoveCondition",value:function(){"create"==this.modalMode&&this.conditionsGroup.removeCondition({conditionId:this.condition.id})}},{key:"maybeRemoveConditionsGroup",value:function(){"action-filter-button"==this.comingFrom&&(this.conditionsGroup.hasConditions||this.conditionsGroup.destroy())}},{key:"$submitButton",get:function(){return this.modal.elements.modal.box.buttons.confirm.get(0)}}])&&u(e.prototype,n),t}()},408:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(693);const i=function(){return(0,o.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp}},976:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(693),i=n(303);const a=function(t){var e=t.conditionsGroupId,n=t.conditionId,a={},r=(0,i.Z)({conditionsGroupId:e});return(0,o.$K)(r)&&r.hasCondition(n)&&(a=r.getCondition(n)),a}},799:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(693);const i=function(t){var e,n=t.integrationCode,i=t.conditionCode;if((0,o.$K)(UncannyAutomator.integrations[n])){var a=UncannyAutomator.integrations[n].items.conditions.available;(0,o.$K)(a[i])&&(e=a[i])}return e}},303:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(693),i=n(575);const a=function(t){var e=t.conditionsGroupId,n={};return(0,i.Z)()&&(0,o.$K)(UncannyAutomator.recipe.conditions[e])&&(n=UncannyAutomator.recipe.conditions[e]),n}},575:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(693);const i=function(){return!(0,o.xb)(UncannyAutomator.recipe.conditions)}},780:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o=n(693);var i=n(575);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const r=function(){var t=[];return(0,i.Z)()&&Object.entries(UncannyAutomator.recipe.conditions).forEach((function(e){var n,o,i=(o=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(n,o)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=(i[0],i[1]);r.hasActions&&t.push(r.formattedForMeta)})),t};var s=n(171);const c=function(t){var e=t.onSuccess,n=t.onFail;if((0,o.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var i=r();(0,o.L8)("actions_conditions_update",{recipe_id:UncannyAutomator.recipe.id,actions_conditions:JSON.stringify(i)},(function(t){if(t.success){if((0,o.$K)(e))try{e(t)}catch(t){UncannyAutomator.dev.developerMode&&(console.error("updateRemoteConditionsMeta: Couldn't execute the onSuccess callback."),console.error(t))}var n=new CustomEvent("automator/action/conditions/update",{detail:{conditions:i}});document.dispatchEvent(n),new s.Z}}),(function(){if(UncannyAutomator.dev.developerMode&&console.error("updateRemoteConditionsMeta: Couldn't update remote conditions meta. UI might be outdated."),(0,o.$K)(n))try{n()}catch(t){UncannyAutomator.dev.developerMode&&(console.error("updateRemoteConditionsMeta: Couldn't execute the onFail callback."),console.error(t))}}))}}},214:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r}),n(311);var o=n(693);function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=n(975).vsprintf;const r=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.integrationCode=e,this.createItemIcon()}var e,n;return e=t,(n=[{key:"createItemIcon",value:function(){var t=document.createElement("div");if(t.classList.add("uap-item-icon"),(0,o.$K)(UncannyAutomator.integrations[this.integrationCode])){var e=UncannyAutomator.integrations[this.integrationCode];(0,o.$K)(e.icon_svg)?t.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t\t<img src="'.concat(e.icon_svg,'" alt="').concat(e.name,'">\n\t\t\t\t')):(0,o.$K)(e.icon_32)&&(0,o.$K)(e.icon_64)&&t.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t\t<img \n\t\t\t\t\t\tsrc="'.concat(e.icon_32,'" \n\t\t\t\t\t\tsrcset="').concat(a("%s 1x, %s 2x",[e.icon_32,e.icon_64]),'" \n\t\t\t\t\t\talt="').concat(e.name,'"\n\t\t\t\t\t>\n\t\t\t\t'))}return t}}])&&i(e.prototype,n),t}()},104:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(693);function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var a=function(){function t(e){var n=e.integrationId,o=e.customIntegrationName;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.integrationId=n,this.customIntegrationName=o,this.createItemTag(),this.$tag}var e,n;return e=t,(n=[{key:"createItemTag",value:function(){var t=UncannyAutomator.integrations[this.integrationId],e=document.createElement("div");e.classList.add("uap-item-tag"),e.innerText=(0,o.$K)(t)?t.name:this.customIntegrationName,this.$tag=e}}])&&i(e.prototype,n),t}()},464:(t,e,n)=>{"use strict";n.d(e,{Z:()=>v});var o=n(311),i=n.n(o),a=n(693),r=n(772),s=n(515),c=n(214),l=n(104),u=n(973),d=n(171);function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var m=n(975).vsprintf;const f=function(){function t(e,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.integrationID=n,this.$currentItem=o,this.removeConnectingIntegrationsParameters(),this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){var t={title:"trigger"==this.itemType?UncannyAutomator.i18n.trigger.select:UncannyAutomator.i18n.action.select,$icon:new c.Z(this.integrationID),$integrationNameTag:new l.Z({integrationId:this.integrationID}),$actionMenu:new s.Z(this.itemType)},e=document.createElement("div");e.classList.add("item","uap-item"),e.setAttribute("data-integration",this.integrationID),this.$item=e,e.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar"></div>\n\t\t\t\t<div class="uap-item-top-header">\n\t\t\t\t\t<div class="uap-item-top-header-left"></div>\n\t\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-inner-content"></div>\n\t\t\t</div>\n\t\t'),e.querySelector(".uap-item-sidebar").appendChild(t.$icon),e.querySelector(".uap-item-top-header-left").appendChild(t.$integrationNameTag),e.querySelector(".uap-item-top-header-right").appendChild(t.$actionMenu.get(0)),e.querySelector(".uap-item-inner-content").appendChild(this.createItemsList().get(0)),this.$currentItem.replaceWith(e)}},{key:"createItemsList",value:function(){var t,e,n=this;"trigger"==this.itemType?(t=(0,a.eU)(this.integrationID,"triggers"),e=UncannyAutomator.i18n.trigger.search,UncannyAutomator.i18n.proOnly.unlockTriggers):"action"==this.itemType&&(t=(0,a.eU)(this.integrationID,"actions"),e=UncannyAutomator.i18n.action.search,UncannyAutomator.i18n.proOnly.unlockActions);var o=i()('\n\t\t\t<div class="item-options item-options--nopadding item-options--noborder">\n\t\t\t\t<div class="form-element">\n\t\t\t\t\t<div class="item__task-selector">\n\t\t\t\t\t\t<div class="item-task-selector__search">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tclass="item-task-selector__search-input"\n\t\t\t\t\t\t\t\tplaceholder="'.concat(e,'"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="item-task-selector__options">\n\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--available"></div>\n\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--unavailable">\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group-items"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide">\n\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.noResults,"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),s=o.find(".item-options"),c=o.find(".item__task-selector"),l=o.find(".item-task-selector__search-input"),p={container:o.find(".item-task-selector__options"),available:o.find(".item-task-selector-options__group--available"),unavailable:{container:o.find(".item-task-selector-options__group--unavailable"),list:o.find(".item-task-selector-options__group-items")},noResults:o.find(".item-task-selector__option--no-results")};if(t.hasAvailableItems){if(!((0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type)){var f=[],h=[];t.available.forEach((function(t){t.requires_user?f.push(t):h.push(t)})),t.available=[].concat(h,f)}p.available.append(t.available.map((function(t){var e=t.is_pro,o=(!(0,a.$K)(UncannyAutomator.wp)||!UncannyAutomator.wp)&&"anonymous"==UncannyAutomator.recipe.type&&t.requires_user,s=i()('\n\t\t\t\t\t<div class="item-task-selector__option '.concat(e?"item-task-selector__option--pro":""," ").concat(t.requires_user?"item-task-selector__option--requires-user":""," ").concat(o?"item-task-selector__option-cannot-add":"",'"\n\t\t\t\t\t\tdata-search="').concat(t.select_option_name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t').concat(o?'<uo-icon id="lock"></uo-icon>':"","\n\t\t\t\t\t\t\t").concat((0,a.hF)(t.select_option_name,'<span class="item-task-selector__option-variable">',"</span>")," ").concat(e?'<span class="item-task-selector-option__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</span>"):"",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="item-task-selector__option-properties">\n\t\t\t\t\t\t\t').concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&t.requires_user?'<span class="item-task-selector-option__requires-user">'.concat(UncannyAutomator.i18n.needsUserData,"</span>"):"","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"));return s.on("click",(function(){c.addClass("item__task-selector--loading"),s.addClass("item-task-selector__option--loading");var e=["trigger","action"].includes(n.itemType)?"add-new-".concat(n.itemType):"",o={};i().each(t.options,(function(t,e){(0,a.$K)(e.default_value)&&(o[e.option_code]=e.default_value)})),"anonymous"==t.type&&(o.can_log_in_new_user=!(0,a.$K)(t.can_log_in_new_user)||t.can_log_in_new_user);var l,p=function(r,l){(0,a.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:e,item_code:t.code,default_meta:i().extend({},o,{integration_name:UncannyAutomator.integrations[n.integrationID].name,sentence:t.sentence})},(function(t){if(new u.Z,new d.Z,"trigger"==n.itemType&&(UncannyAutomator.cache.tokens=[]),(0,a.$K)(t.post_ID)){var e=(0,a.M0)("item",{id:t.post_ID});UncannyAutomator.recipe.items[t.post_ID].isValid?UncannyAutomator.recipe.isLive||e.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):e.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}(0,a.$K)(r)&&r(t)}),(function(t){console.log("ERROR-TODO. Couldn't add the item"),c.removeClass("item__task-selector--loading"),s.removeClass("item-task-selector__option--loading"),0==t.success&&new u.Z,(0,a.$K)(l)&&l(t)}))};if("action"==n.itemType&&"anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&t.requires_user)if(c.removeClass("item__task-selector--loading"),s.removeClass("item-task-selector__option--loading"),(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var f=UncannyAutomator.recipe.isLive;(l=new r.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,a.hF)(t.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.description,"</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var t=l.getElements();t.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,a.R$)(!0,(function(e){p((function(){l.destroy()}),(function(){t.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)}))}),(function(e){t.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),f&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)},onCancel:function(){l.destroy()}})}else(l=new r.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,a.hF)(t.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(m(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.description,[UncannyAutomator.i18n.uncannyAutomatorPro]),' <a href="').concat((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.upgradeLater,' <a href="').concat((0,a.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){l.destroy(),(0,a.YQ)((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}))},onCancel:function(){l.destroy()}});else p()})),s})))}else p.available.remove();t.hasUnavailableItems?p.unavailable.list.append(t.unavailable.map((function(t){var e="unavailable_item-".concat(n.integrationID,"-").concat(n.integrationID,"_").concat((0,a.hF)(t.name,"","").toLowerCase().replace(/\s+|{|}/g,"_"));return i()('\n\t\t\t\t\t<a href="'.concat((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:e}),'"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\tclass="item-task-selector__option item-task-selector__option--pro"\n\t\t\t\t\t\tdata-search="').concat(t.name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t<uo-icon id="lock"></uo-icon>\n\t\t\t\t\t\t\t').concat((0,a.hF)(t.name,'<span class="item-task-selector__option-variable">',"</span>"),'\n\t\t\t\t\t\t\t<span class="item-task-selector-option__badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t"))}))):p.unavailable.container.remove();var g=p.container.find(".item-task-selector__option:not(.item-task-selector__option--no-results)");return l.on("input",(function(){var t=l.val().toLowerCase().replace(/\s+|{|}/g,"");g.removeClass("item-task-selector__option--show item-task-selector__option--hide");var e=!0;(0,a.xb)(t)||(e=!1,i().each(g,(function(n,o){var a=i()(o);-1!==a.data("search").search(t)?(a.addClass("item-task-selector__option--show"),e=!0):a.addClass("item-task-selector__option--hide")}))),p.noResults.removeClass("item-task-selector__option--hide item-task-selector__option--show"),e?p.noResults.addClass("item-task-selector__option--hide"):p.noResults.addClass("item-task-selector__option--show")})),s.append(this.createCancelButton()),o}},{key:"createCancelButton",value:function(){var t=this,e=i()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return e.on("click",(function(){new v(t.itemType,t.$item)})),e}},{key:"removeConnectingIntegrationsParameters",value:function(){(0,a.hl)(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}}])&&p(e.prototype,n),t}();function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function g(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var y=n(975).vsprintf;const v=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.$currentItem=n,this.integrations=[],this.render(),this.handleContinueIntegrationConnection()}var e,n;return e=t,n=[{key:"render",value:function(){var t={$actionMenu:new s.Z(this.itemType)},e=document.createElement("div");if(e.classList.add("item","uap-item"),this.$item=e,e.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar">\n\t\t\t\t\t<div class="uap-item-icon"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-top-header">\n\t\t\t\t\t<div class="uap-item-top-header-left">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.integration.select,'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-inner-content"></div>\n\t\t\t</div>\n\t\t')),e.querySelector(".uap-item-top-header-right").appendChild(t.$actionMenu.get(0)),e.querySelector(".uap-item-inner-content").appendChild(this.createIntegrations().get(0)),e.querySelector(".uap-item-inner-content").appendChild(this.createFooter()),(0,a.$K)(this.$currentItem))this.$currentItem.replaceWith(e);else{var n=(0,a.M0)("lastItem",{type:this.itemType}).get(0);if("trigger"==this.itemType&&((0,a.$K)(n)?n.insertAdjacentElement("afterEnd",e):(0,a.M0)("metabox",{type:this.itemType}).get(0).appendChild(e)),"action"==this.itemType){var o=(0,a.M0)("items",{type:this.itemType}),i=(0,a.M0)("metabox",{type:this.itemType}).get(0);o.length>0?i.querySelector(".add-action-btn").insertAdjacentElement("beforeBegin",e):i.querySelector(".uap-item--actions-initial").replaceWith(e)}}}},{key:"createIntegrations",value:function(){var t=this,e=i()("<div/>",{class:"item-integrations"});return this.filterByNonEmptyIntegrations(this.itemType),this.sortIntegrationsAlphabetically(),this.integrations.forEach((function(n){var o=n.id,i=t.createIntegration(o,n),r=function(){new f(t.itemType,o,t.$item)};if((0,a.$K)(n.connected))switch(t.integrationModalCurrentStep(n)){case 1:r=function(){(0,a.hl)(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:o,ua_connecting_integration_context:t.itemType},{setAsURL:!0,refresh:!1}),t.connectIntegrationModal(o,n,{currentStep:1})};break;case 2:r=function(){(0,a.hl)(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:o,ua_connecting_integration_context:t.itemType},{setAsURL:!0,refresh:!1}),t.connectIntegrationModal(o,n,{currentStep:2})}}i.on("click",(function(){r()})),e.append(i)})),e}},{key:"connectIntegrationModal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({currentStep:1},n);var o=(0,a.hl)(UncannyAutomator.connectApiUrl,{redirect_url:(0,a.hl)(UncannyAutomator.dashboardUrl,{ua_close_window:1})}),i="";i=(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp?'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<uo-icon id="check-circle"></uo-icon>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat(y(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1Pro,[UncannyAutomator.i18n.uncannyAutomatorPro]),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-activate-license" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.activate,' <uo-icon id="arrow-circle-right"></uo-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'):'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<uo-icon id="smile-plus"></uo-icon>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat(y(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1,[UncannyAutomator.i18n.uncannyAutomator]),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-sign-up" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.signUp,' <uo-icon id="arrow-circle-right"></uo-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t');var s=new r.Z({title:"".concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectIntegration),content:'\n\t\t\t\t<div class="connect-integration-modal">\n\t\t\t\t\t<div class="connect-integration-modal-steps__counter">\n\t\t\t\t\t\t'.concat(y(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.stepCounter,[n.currentStep-1,"2"]),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-steps">\n\t\t\t\t\t\t<div class="connect-integration-modal-steps__list">\n\t\t\t\t\t\t\t').concat(i,'\n\t\t\t\t\t\t\t<div class="connect-integration-modal-step ').concat(n.currentStep>2?"connect-integration-modal-step--completed":""," ").concat(1==n.currentStep?"connect-integration-modal-step--previous-not-completed":"",'">\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t\t\t\t<uo-icon id="plug"></uo-icon>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t\t\t\t<strong>2.</strong> ').concat(y(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step2,['<span class="connect-integration-modal-step-integration-name">'+(0,a.Y6)(t).node.outerHTML+e.name+"</span>",UncannyAutomator.i18n.uncannyAutomator]),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t\t\t\t<span ').concat(1==n.currentStep?'uap-tooltip="'+UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.completePrevious+'"':"",'>\n\t\t\t\t\t\t\t\t\t\t<a id="connect-integration-modal-connect-account" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectAccount,' <uo-icon id="arrow-circle-right"></uo-icon>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:null}},{size:"extra-large"});s.setEvents({onCancel:function(){s.destroy(),setTimeout((function(){(0,a.hl)(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}),10)}}),s.getElements().modal.container.find("#connect-integration-modal-sign-up").on("click",(function(t){t.preventDefault(),t.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:o,w:550,h:600,onClose:function(){location.reload()}})})),s.getElements().modal.container.find("#connect-integration-modal-activate-license").on("click",(function(t){t.preventDefault(),t.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:UncannyAutomator.licenseUrl,w:550,h:600,onClose:function(){location.reload()}})})),2==n.currentStep&&s.getElements().modal.container.find("#connect-integration-modal-connect-account").on("click",(function(t){t.preventDefault(),t.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:(0,a.hl)(e.settings_url,{automator_minimal:1,automator_hide_settings_tabs:1}),w:550,h:600,onClose:function(){location.reload()}})}))}},{key:"handleContinueIntegrationConnection",value:function(){if(1==(0,a.Tb)(null,"ua_connecting_integration")&&(0,a.Tb)(null,"ua_connecting_integration_context")==this.itemType){var t=(0,a.Tb)(null,"ua_connecting_integration_id");if(!(0,a.xb)(t)){var e=UncannyAutomator.integrations[t];if((0,a.$K)(e)&&(0,a.$K)(e.connected))switch(this.integrationModalCurrentStep(e)){case 1:this.connectIntegrationModal(t,e,{currentStep:1});break;case 2:this.connectIntegrationModal(t,e,{currentStep:2});break;case 3:new f(this.itemType,t,this.$item)}}}}},{key:"createIntegration",value:function(t,e){var n,o=i()("<div/>",{class:"item-integration"}),r=i()("<div/>",{class:"item-integration__logo"}),s=i()("<div/>",{class:"item-integration__name"});return e.isProOnly&&(o.addClass("item-integration--pro"),o.append(i()('\n\t\t\t\t<div class="item-integration__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</div>\n\t\t\t")))),e.isAvailable?(0,a.$K)(e.connected)?UncannyAutomator.hasAccountConnected?e.connected?o.addClass("item-integration--available"):(o.addClass("item-integration--unavailable item-integration--unavailable-integration-not-connected"),o.attr("uap-tooltip",y(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,[e.name])),o.append(i()('\n\t\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t\t")))):(o.addClass("item-integration--unavailable item-integration--unavailable-ap-account-not-connected"),o.attr("uap-tooltip",y(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,[e.name])),o.append(i()('\n\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t")))):"action"==this.itemType?(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type?o.addClass("item-integration--available"):0==e.items.actions.available.filter((function(t){return 0==t.requires_user})).length?(o.addClass("item-integration--unavailable item-integration--unavailable-requires-user-data"),o.attr("uap-tooltip",UncannyAutomator.i18n.apiIntegrations.allActionsRequireUserData)):o.addClass("item-integration--available"):o.addClass("item-integration--available"):(o.addClass("item-integration--unavailable item-integration--unavailable-requires-pro"),o.attr("uap-tooltip",y(UncannyAutomator.i18n.proOnly.requiresPro,[UncannyAutomator.i18n.uncannyAutomatorPro]))),(0,a.$K)(e.icon_svg)?n=i()('<img src="'.concat(e.icon_svg,'" alt="').concat(e.name,'">')):(0,a.$K)(e.icon_32)&&(0,a.$K)(e.icon_64)&&(n=i()('<img src="'.concat(e.icon_32,'" srcset="').concat(y("%s 1x, %s 2x",[e.icon_32,e.icon_64]),'" alt="').concat(e.name,'">'))),s.text(e.name),r.append(n),o.append(r),o.append(s),o}},{key:"createFooter",value:function(){var t={text:""};if("anonymous"==UncannyAutomator.recipe.type)t.text=UncannyAutomator.i18n.integration.dontSeeTrigger;else{var e=(0,a.XE)("https://automatorplugin.com/integrations/",{medium:"select_an_integration",content:"discover_more_integrations"});t.text="".concat(UncannyAutomator.i18n.integration.discoverMore,' <a href="').concat(e,'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a>')}var n=document.createElement("div");return n.classList.add("item-content__description"),n.innerHTML=t.text,n}},{key:"filterByNonEmptyIntegrations",value:function(t){var e=this;if(["trigger","action"].includes(t)){var n=i().extend(!0,{},UncannyAutomator.integrations);Object.entries(n).forEach((function(n){var o,r,s,c=(s=2,function(t){if(Array.isArray(t))return t}(r=n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(r,s)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],u=c[1],d=!1,p=!1,m=!1;"trigger"==t?(d=(o=(0,a.IL)(u.items.triggers)).hasTriggers,m=o.hasAvailableItems,p=o.allItemsArePro):"action"==t&&(d=(o=(0,a.IL)(u.items.actions)).hasActions,m=o.hasAvailableItems,p=o.allItemsArePro),d&&e.integrations.push(i().extend({},u,{id:l,isAvailable:m,isProOnly:p}))}))}}},{key:"sortIntegrationsAlphabetically",value:function(){this.integrations=(0,a.yv)(this.integrations,"name")}},{key:"integrationModalCurrentStep",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!(0,a.$K)(UncannyAutomator.wp)||(0,a.$K)(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&!UncannyAutomator.hasAccountConnected||(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&!UncannyAutomator.hasAccountConnected&&!UncannyAutomator.hasValidProLicense?t=1:((!(0,a.$K)(UncannyAutomator.wp)||(0,a.$K)(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&UncannyAutomator.hasAccountConnected||(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&(UncannyAutomator.hasAccountConnected||UncannyAutomator.hasValidProLicense))&&(t=e.connected?3:2),t}}],n&&g(e.prototype,n),t}()},313:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(693),_common_modal_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(772),_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(235),_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(454),_triggers_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(973),_actions_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(171);function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var vsprintf=__webpack_require__(975).vsprintf,ItemOptions=function(){function ItemOptions(t,e){_classCallCheck(this,ItemOptions),this.itemId=t,this.optionId=e,this.item=UncannyAutomator.recipe.items[t],this.fields=this.item.options[this.optionId].fields,this.buttons=this.item.options[this.optionId].buttons,this.create(),this.initTokenSelector(),this.initTinyMCE(),this.initCodeMirror(),document.dispatchEvent(new CustomEvent("automator/item/options/open",{detail:{itemId:this.itemId,librariesReady:!0}}))}return _createClass(ItemOptions,[{key:"create",value:function(){var t=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:this.itemId}).contentContainer,e=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options"}),n=this.createButtons(),o=this.createFields();if(this.fieldsContainer=o,e.append(o),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.item.customHTML))try{try{this.item.customHTML=this.item.customHTML.replaceAll("{{item_id}}",this.itemId)}catch(t){console.log(t)}e.get(0).insertAdjacentHTML("beforeEnd",this.item.customHTML)}catch(t){console.log(t)}var i=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__notices"});this.noticeContainer=i,e.append(i),e.append(n),t.html(e)}},{key:"createFields",value:function(){var t=this,e=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__group"});return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(n,o){var i=o.getAttributes().fieldType;"repeater"==i&&o.createFields(),o.createFormElement(),e.append(o.getFormElement()),["textarea","group","repeater"].includes(i)?"group"==i?o.fields.forEach((function(e){"textarea"!==e.getAttributes().fieldType&&e.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))})):"repeater"==i&&o.fieldRows.forEach((function(e,n){e.forEach((function(e,n){e.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))}))})):o.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))})),e}},{key:"createButtons",value:function createButtons(){var _this2=this,container=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__buttons"}),automatorButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__uo-buttons"}),developerButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__developer-buttons"}),saveButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--primary"}),cancelButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return"trigger"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"action"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"closure"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),this.saveButton=saveButton,automatorButtons.append(saveButton),automatorButtons.append(cancelButton),jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.buttons,(function(index,button){var $buttonElement=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn"}).text(button.text);(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.css_classes)&&$buttonElement.addClass(button.css_classes);var doOnClick=function(){};if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.on_click))try{doOnClick=eval("(".concat(button.on_click.replace("<script>","").replace("<\/script>","").trim(),")"))}catch(t){UncannyAutomator.dev.developerMode&&(console.warn(t),console.warn(button.on_click))}$buttonElement.on("click",(function(){var t;doOnClick($buttonElement,{item:_this2.item,values:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)(_this2.itemId)},(t={},(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.modules)&&(button.modules.includes("modal")&&(t.Modal=_common_modal_js__WEBPACK_IMPORTED_MODULE_2__.Z),button.modules.includes("markdown")&&(t.Markdown=_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__.Z)),t))})),developerButtons.append($buttonElement)})),container.append(automatorButtons),container.append(developerButtons),saveButton.on("click",(function(){if((0,_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__.R3)(_this2.fieldsContainer).isValid){saveButton.addClass("uap-btn--loading uap-btn--disabled");var t,e=_this2.itemId,n=_this2.optionId,o=_this2.getOptionValue(),i=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(_this2.item,_this2.item.meta.sentence,jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},_this2.item.meta,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)(_this2.itemId)));try{t=i.html.get(0).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.L8)("update",{itemId:e,optionCode:n,optionValue:o,sentence_human_readable:i.brackets,sentence_human_readable_html:t},(function(t){_this2.fields.forEach((function(t){t.getFormElement().trigger("saved")})),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;var e=UncannyAutomator.recipe.items[_this2.item.id].isValid,n=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.item.id});e?UncannyAutomator.recipe.isLive||_this2.item.isLive||n.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):n.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(t){console.log("â€¼ï¸ ERROR-TODO. Couldn't save the options of the item"),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;try{(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.itemId}).item.find('.item-title__token[data-options-id="'.concat(n,'"]')).trigger("click")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}))}})),cancelButton.on("click",(function(){"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z})),container}},{key:"initTokenSelector",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(t,e){e.initTokenSelector()}))}},{key:"initTinyMCE",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(t,e){"textarea"==e.getAttributes().fieldType&&e.initTinyMCE()}))}},{key:"initCodeMirror",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(t,e){e.initCodeMirror()}))}},{key:"getOptionValue",value:function(){var t={},e=!1,n=!1;return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(o,i){var a=i.getAttributes().optionCode,r=i.getValue();if(["select","radio"].includes(i.getAttributes().fieldType)){if(e=!0,i.getAttributes().supportsMultipleValues)try{r=JSON.stringify(r)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}t[vsprintf("%s_readable",[a])]=i.getReadableValue();var s=i.getSelectCustomValue();"automator_custom_value"==r&&(t[vsprintf("%s_custom",[a])]=s)}else"repeater"==i.getAttributes().fieldType&&(n=!0,r=JSON.stringify(r));t[a]=r})),n||e||1!=Object.keys(t).length||(t=t[Object.keys(t)[0]]),t}}]),ItemOptions}();const __WEBPACK_DEFAULT_EXPORT__=ItemOptions},865:(t,e,n)=>{"use strict";n.d(e,{Z:()=>f});var o=n(311),i=n.n(o),a=n(693),r=n(772),s=n(109),c=n(313),l=n(973),u=n(171),d=n(454),p=n(593);function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const f=function(){function t(e,n,o,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.integrationID=n,this.itemCode=o,this.itemId=i,this.item=UncannyAutomator.recipe.items[i],this.createItemSentence(e,o,i)}var e,n;return e=t,(n=[{key:"createItemSentence",value:function(t,e,n){var o,m=(0,a.Vx)(this.integrationID,t,e);this.globalItem=m,o=this.item.isMissing?this.item.sentence:(0,a.Vx)(this.integrationID,this.item.itemType,this.item.itemCode).sentence,o=(0,a.qh)(this.item,o,UncannyAutomator.recipe.items[this.itemId].meta,!0),this.item.isMissing||o.elements.token.on("click",(function(t){var e=i()(t.currentTarget);o.elements.token.removeClass("item-title__token--open"),e.addClass("item-title__token--open");var r=e.parents(".item");r.addClass("item--open uap-item--open"),r.trigger("automator:item:open",!0);var s=e.data("options-id");(0,a.M0)("optionGroup",{itemID:n,groupID:s}),new c.Z(n,s)}));var f=i()("<div/>",{class:"item-title__describe-container"}),h=i()("<div/>",{class:"item-status"});f.append(o.html.addClass("item-title__describe"));var g=new s.Z("checkbox",{color:"green",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipeItem,off:UncannyAutomator.i18n.status.draftRecipeItem},currentValue:UncannyAutomator.recipe.items[n].isLive}),y=g.getFormElement();return h.append(y),f.append(h),this.item.isMissing||y.on("automator:field:change",(function(){var t=g.getValue(),e=!0;if(t&&(e=(0,d.RC)(n).isValid),g.startLoadingAnimation(),e){var i=t?"publish":"draft";if(!t&&UncannyAutomator.recipe.isLive){var s=new r.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,a.hF)(UncannyAutomator.i18n.confirmationModal.statusWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});s.setEvents({afterSetEvents:function(){s.show()},onConfirm:function(){var e;s.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),g.startLoadingAnimation();try{e=o.html.get(0).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,a.L8)("change_post_status",{post_ID:n,post_status:i,sentence_human_readable:o.brackets,sentence_human_readable_html:e},(function(){s.destroy(),new l.Z,new u.Z,new p.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't set the item status"),s.destroy(),g.stopLoadingAnimation(),g.setValue(!t,!1)}))},onCancel:function(){s.destroy(),g.setValue(!t,!1),g.stopLoadingAnimation()},afterHide:function(){s.destroy()}})}else{var c;try{c=o.html.get(0).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,a.L8)("change_post_status",{post_ID:n,post_status:i,sentence_human_readable:o.brackets,sentence_human_readable_html:c},(function(){new u.Z,new l.Z,new p.Z}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't set the item status"),g.stopLoadingAnimation(),g.setValue(!t,!1)}))}}else setTimeout((function(){g.stopLoadingAnimation(),g.setValue(!1,!1)}),1e3)})),f}}])&&m(e.prototype,n),t}()},164:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(693),i=n(575);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const r=function(){var t={},e=(0,o.Wr)("get",{filter:{itemType:"action"}});return(0,i.Z)()?Object.entries(e).forEach((function(e){var n,o,i=(o=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}(n,o)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],s=i[1];s.hasConditions||(t[r]=s)})):t=e,t},s=function(){var t=!1;if((0,o.Wr)("get",{filter:{itemType:"action"}}).length>1)t=!0;else{var e=r(),n=UncannyAutomator.recipe.conditions;Object.keys(e).length+Object.keys(n).length>1&&(t=!0)}return t}},973:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l}),n(311);var o=n(693),i=n(464);n(975).vsprintf;var a=n(977),r=n(911);function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(975).vsprintf;var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,o.M0)("metabox",{type:"trigger"}).empty();var e=(0,o.Wr)("get",{filter:{itemType:"trigger"}});(0,o.xb)(e)?(new i.Z("trigger"),new r.Z("trigger")):(new a.Z("trigger",e,!1),new r.Z("trigger"),this.isContinuingIntegrationConnection()&&new i.Z("trigger"))}var e,n;return e=t,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==(0,o.Tb)(null,"ua_connecting_integration")&&"trigger"==(0,o.Tb)(null,"ua_connecting_integration_context")}}])&&s(e.prototype,n),t}();const l=c},911:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var o=n(311),i=n.n(o),a=n(693),r=n(464);function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(973),n(171),n(977),n(975).vsprintf;const c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.shouldCreateMetaboxFooter()&&this.createFooter()}var e,n;return e=t,(n=[{key:"shouldCreateMetaboxFooter",value:function(){var t=!1;if("trigger"==this.itemType){var e=(0,a.Wr)("get",{filter:{itemType:"trigger"}});(0,a.xb)(e)&&(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&"anonymous"!=UncannyAutomator.recipe.type||(t=!0)}if("action"==this.itemType){var n=(0,a.Wr)("get",{filter:{itemType:"action"}});!(0,a.xb)(n)&&(t=!0)}return t}},{key:"createFooter",value:function(){var t=this,e=i()("<div/>",{class:"metabox__footer"}),n=i()("<div/>",{class:"uap-btn uap-btn--secondary"});if(("action"==this.itemType||"trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type)&&e.append(n),"trigger"==this.itemType&&("user"==UncannyAutomator.recipe.type&&n.text(UncannyAutomator.i18n.trigger.addAnother),"anonymous"==UncannyAutomator.recipe.type)){var o=this.createAnonymousNotice();e.append(o)}"action"==this.itemType&&(n.text(UncannyAutomator.i18n.action.addAnother),e.addClass("add-action-btn")),("trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type||"action"==this.itemType)&&n.on("click",(function(){new r.Z(t.itemType)})),(0,a.M0)("metabox",{type:this.itemType}).append(e)}},{key:"createAnonymousNotice",value:function(){return i()('\n\t\t\t<div class="description">\n\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.everyoneOnlyOneTrigger,' <a href="').concat((0,a.XE)("https://automatorplugin.com/knowledge-base/managing-triggers/",{medium:"anonymous_recipe_one_trigger",content:"learn_more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a>\n\t\t\t</div>\n\t\t'))}}])&&s(e.prototype,n),t}()},977:(t,e,n)=>{"use strict";n.d(e,{Z:()=>S});var o=n(311),i=n.n(o),a=n(693),r=n(515),s=n(214),c=n(104),l=n(109),u=n(772),d=n(171);function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=function(){function t(e,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"buttonContainer",void 0),m(this,"button",void 0),m(this,"buttonIcon",void 0),m(this,"removeButton",void 0),m(this,"asyncModeField",void 0),m(this,"asyncModeHTML",void 0),m(this,"delayNumberField",void 0),m(this,"delayNumberHTML",void 0),m(this,"delayUnitField",void 0),m(this,"delayUnitHTML",void 0),m(this,"scheduleDateField",void 0),m(this,"scheduleDateHTML",void 0),m(this,"scheduleTimeField",void 0),m(this,"scheduleTimeHTML",void 0),m(this,"scheduleNoticeHTML",void 0),m(this,"modal",void 0),this.itemType=e,this.integrationID=n,this.itemCode=o,this.itemId=i,this.item=UncannyAutomator.recipe.items[i],this.asyncMode=this.item.meta.async_mode,UncannyAutomator.proVersion.startsWith("2"))return null;this.createAsyncButton()}var e,n;return e=t,n=[{key:"hasSchedule",value:function(){return!!this.asyncMode&&("delay"==this.asyncMode?this.item.meta.async_delay_number&&this.item.meta.async_delay_unit:"schedule"==this.asyncMode&&this.item.meta.async_schedule_time&&this.item.meta.async_schedule_date)}},{key:"getButtonText",value:function(){if(this.hasSchedule()){var t=UncannyAutomator.i18n.action.asyncActions[this.asyncMode];return(t+=" ")+"<strong>".concat(this.item.meta.async_sentence,"</strong>")}return UncannyAutomator.i18n.action.asyncActions.delay}},{key:"createAsyncButton",value:function(){var t=this;this.buttonContainer=i()("<div/>",{class:"item-async"}),this.button=i()("<uo-button/>"),this.button.prop("size","extra-small"),this.button.prop("color","secondary"),this.buttonIcon=i()("<uo-icon/>",{id:"clock"}),this.button.html(this.getButtonText()),this.button.prepend(this.buttonIcon),this.buttonContainer.append(this.button),this.hasSchedule()&&this.createRemoveButton(),this.button.on("click",(function(){t.buttonContainer.hasClass("disabled")||t.showModal()})),this.buttonContainer.on("automator:asyncButton:maybeDisable",(function(e,n){var o=i()(e.currentTarget);n?(o.attr("uap-tooltip",UncannyAutomator.i18n.action.asyncActions.pleaseSave),t.button.prop("disabled",!0)):(t.button.prop("disabled",!1),t.button.removeAttr("uap-tooltip",!1))})),this.$button=this.buttonContainer.get(0)}},{key:"enable",value:function(){this.button.removeAttr("uap-tooltip"),this.button.removeAttr("disabled")}},{key:"createRemoveButton",value:function(){var t=this;this.removeButton=i()("<span/>",{class:"async-remove"}),this.removeButtonIcon=i()("<uo-icon/>",{id:"times"}),this.removeButton.text(UncannyAutomator.i18n.action.asyncActions.remove),this.removeButton.on("click",(function(){t.removeSchedule()})),this.removeButton.prepend(this.removeButtonIcon),this.buttonContainer.append(this.removeButton)}},{key:"createModalContent",value:function(){var t=i()("<div/>",{class:"async-action-modal"});if(this.asyncModeHTML=this.createAsyncModeHTML(),this.asyncModeHTML.find(".form-radio__container:first").after(this.createDelayOptions()),this.asyncModeHTML.find(".form-radio__container:last").after(this.createScheduleOptions()),this.attachModeChangeEvent(),t.append(this.asyncModeHTML),this.hasSchedule()){var e=i()("<div/>",{class:"async-notice async-notice__blue"}),n=i()("<uo-icon/>",{id:"exclamation-triangle"});e.append(n),e.append(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice2),t.append(e)}return t}},{key:"showModal",value:function(){var t=UncannyAutomator.i18n.action.asyncActions.modal.confirm;this.hasSchedule()&&"schedule"==this.asyncMode&&(t=UncannyAutomator.i18n.action.asyncActions.schedule),this.modal=new u.Z({title:UncannyAutomator.i18n.action.asyncActions.modal.title,content:this.createModalContent(),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:t}},{size:"large",customClass:"async-action"}),this.modalEvents()}},{key:"modalEvents",value:function(){var t=this;this.modal.setEvents({afterSetEvents:function(){t.modal.show()},onConfirm:function(){t.submitModal()},afterHide:function(){t.modal.destroy()}})}},{key:"submitModal",value:function(){var t=this.modal.getElements().modal.box.buttons.confirm;if(t.addClass("uap-btn--loading").prop("disabled",!0),this.validateForm().isValid){var e,n=this.asyncModeField.getValue(),o=this.delayNumberField.getValue(),i=this.delayUnitField.getValue(),a=this.scheduleTimeField.getValue(),r=this.scheduleDateField.getValue();e="delay"==n?this.delaySentence():this.scheduleSentence(),this.saveSchedule(n,o,i,a,r,e)}else t.removeClass("uap-btn--loading").prop("disabled",!1)}},{key:"delaySeconds",value:function(){var t,e=this.delayUnitField.getValue(),n=this.delayNumberField.getValue();switch(e){default:t=1;break;case"minutes":t=60;break;case"hours":t=3600;break;case"days":t=86400;break;case"years":t=31536e3}return n*t}},{key:"delaySentence",value:function(){var t=this.delayUnitField.getValue();return 1==this.delayNumberField.getValue()&&(t=t.slice(0,-1)),"".concat(this.delayNumberField.getValue()," ").concat(UncannyAutomator.i18n.action.asyncActions.modal[t].toLowerCase())}},{key:"scheduleSeconds",value:function(){return Date.parse("".concat(this.scheduleDateField.getValue()," ").concat(this.scheduleTimeField.getValue()))}},{key:"scheduleSentence",value:function(){return"".concat(this.scheduleDateField.getValue()," @ ").concat(this.scheduleTimeField.getValue())}},{key:"saveSchedule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,a.L8)("schedule_action",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId,asyncMode:t,delayNumber:n,delayUnit:o,scheduleTime:i,scheduleDate:r,scheduleSentence:s},(function(){e.modal.destroy(),new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){e.modal.destroy(),console.log("â€¼ï¸ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"removeSchedule",value:function(){(0,a.L8)("remove_schedule",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId},(function(){new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("â€¼ï¸ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"createTimeZone",value:function(){var t=i()("<a/>",{href:UncannyAutomator.i18n.action.asyncActions.modal.timezoneLink,target:"_blank"}),e=i()("<uo-icon/>",{id:"question-circle"}),n=i()("<span/>",{class:"schedule-fields__description"}).html("<strong>".concat(UncannyAutomator.i18n.action.asyncActions.modal.timezone,"</strong>: ").concat(UncannyAutomator.i18n.action.asyncActions.modal.timezoneString));return t.append(e),n.append(t),n}},{key:"createAsyncModeHTML",value:function(){return this.asyncModeField=new l.Z("radio",{itemType:"action",optionCode:"schedule_type",name:"schedule-type",isRequired:!0,currentValue:this.asyncMode?this.asyncMode:"delay",options:[{value:"delay",text:UncannyAutomator.i18n.action.asyncActions.delay},{value:"schedule",text:UncannyAutomator.i18n.action.asyncActions.schedule}]}),this.asyncModeField.createFormElement().addClass("schedule-type-radio")}},{key:"attachModeChangeEvent",value:function(){var t=this;this.asyncModeHTML.on("automator:field:change",(function(){var e,n=t.asyncModeField.getValue();e="schedule"==n?UncannyAutomator.i18n.action.asyncActions.schedule:UncannyAutomator.i18n.action.asyncActions.modal.confirm,t.hasSchedule()||("schedule"==n?t.scheduleNoticeHTML.removeClass("hidden"):t.scheduleNoticeHTML.addClass("hidden")),t.modal.elements.modal.box.buttons.confirm.text(e)}))}},{key:"createScheduleOptions",value:function(){var t=i()("<div/>",{class:"schedule-options"}),e=i()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleDesc),n=i()("<div/>",{class:"schedule-fields"});return this.hasSchedule()||(this.scheduleNoticeHTML=i()("<div/>",{class:"schedule-notice hidden"}),i()("<uo-icon/>",{id:"question-circle"}),this.scheduleNoticeHTML.text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice1),this.scheduleNoticeHTML.addClass("schedule-notice__yellow")),t.append(e),n.append(this.createScheduleDateHTML()),n.append(this.createScheduleTimeHTML()),t.append(n),t.append(this.createTimeZone()),t.append(this.scheduleNoticeHTML),t}},{key:"createDelayOptions",value:function(){var t=i()("<div/>",{class:"delay-options"}),e=i()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.delayDesc),n=i()("<div/>",{class:"delay-fields"});this.delayNumberHTML=this.createDelayNumberHTML(),this.delayUnitHTML=this.createDelayUnitHTML();var o=i()("<span/>",{class:"delay-fields__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.after);return n.append(this.delayNumberHTML),n.append(this.delayUnitHTML),n.append(o),t.append(e),t.append(n),t}},{key:"createDelayNumberHTML",value:function(){this.delayNumberField=new l.Z("int",{itemType:"action",optionCode:"delay-number",isRequired:!0,placeholder:"10",supportsTokens:!1,currentValue:this.item.meta.async_delay_number?this.item.meta.async_delay_number:""},!0,this.validateDelayNumber);var t=this.delayNumberField.createFormElement();return t.addClass("delay-fields__number"),this.delayNumberField.initCodeMirror(),t}},{key:"createDelayUnitHTML",value:function(){return this.delayUnitField=new l.Z("select",{itemType:"action",optionCode:"delay-unit",currentValue:this.item.meta.async_delay_unit?this.item.meta.async_delay_unit:"minutes",customClass:"hide-this",supportsCustomValue:!1,isRequired:!0,options:[{value:"seconds",text:UncannyAutomator.i18n.action.asyncActions.modal.seconds},{value:"minutes",text:UncannyAutomator.i18n.action.asyncActions.modal.minutes},{value:"hours",text:UncannyAutomator.i18n.action.asyncActions.modal.hours},{value:"days",text:UncannyAutomator.i18n.action.asyncActions.modal.days},{value:"years",text:UncannyAutomator.i18n.action.asyncActions.modal.years}]}),this.delayUnitField.createFormElement().addClass("delay-fields__unit")}},{key:"createScheduleDateHTML",value:function(){this.scheduleDateField=new l.Z("date",m({itemType:"action",optionCode:"schedule-date",isRequired:!0,placeholder:UncannyAutomator.i18n.action.asyncActions.modal.today,dateFormat:UncannyAutomator.i18n.action.asyncActions.modal.dateFormat,supportsTokens:!1,currentValue:this.item.meta.async_schedule_date?this.item.meta.async_schedule_date:""},"placeholder",UncannyAutomator.i18n.format.date.selectDate));var t=this.scheduleDateField.createFormElement();return t.addClass("schedule-fields__date"),this.scheduleDateField.initCodeMirror(),t}},{key:"createScheduleTimeHTML",value:function(){this.scheduleTimeField=new l.Z("time",m({itemType:"action",optionCode:"schedule-time",isRequired:!0,placeholder:"11:00 AM",timeFormat:"h:i K",timeAltFormat:"h:i K",supportsTokens:!1,currentValue:this.item.meta.async_schedule_time?this.item.meta.async_schedule_time:""},"placeholder",UncannyAutomator.i18n.format.date.selectTime));var t=this.scheduleTimeField.createFormElement();return t.addClass("schedule-fields__time"),this.scheduleTimeField.initCodeMirror(),t}},{key:"validateForm",value:function(){var t;switch(this.asyncModeField.getValue()){case"schedule":t=this.validateScheduleFields();break;case"delay":t=this.delayNumberField.validate();break;default:t={isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.unsupported}}return t.isValid?{isValid:!0}:t}},{key:"validateScheduleFields",value:function(){var t=this.scheduleDateField.validate();return t.isValid&&(t=this.scheduleTimeField.validate()),t}},{key:"validateDelayNumber",value:function(t,e){return t<1?{isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.positiveNumber}:{isValid:!0}}},{key:"shouldAddButton",value:function(){return"action"==this.itemType&&(0,a.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp}}],n&&p(e.prototype,n),t}();const h=f;var g=n(865);function y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const v=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createDragHandle()}var e,n;return e=t,(n=[{key:"createDragHandle",value:function(){return this.handle=document.createElement("div"),this.handle.setAttribute("class","item-handle"),this.handleIcon=document.createElement("uo-icon"),this.handleIcon.setAttribute("id","sort-circle"),this.handle.append(this.handleIcon),this.handle}}])&&y(e.prototype,n),t}();var _=n(164),b=n(408),w=n(963),A=n(921);function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var C=new WeakSet,T=function(){function t(e){var n,o,i=e.itemId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,o=C),o.add(n),this.item=UncannyAutomator.recipe.items[i],this.createButton(),this.handleClick(),this.disableWhenUserEditsAction()}var e,n;return e=t,(n=[{key:"createButton",value:function(){var t=document.createElement("div");t.classList.add("uap-item-button","uap-item-button--conditions"),t.innerHTML='\n\t\t\t<uo-button\n\t\t\t\tcolor="secondary"\n\t\t\t\tsize="extra-small"\n\t\t\t\tclass="uap-conditions-action-button"\n\t\t\t>\n\t\t\t\t<uo-icon id="code-merge"></uo-icon>'.concat(UncannyAutomator.i18n.conditions.filter,"\n\t\t\t</uo-button>\n\t\t");var e=t.querySelector("uo-button");(0,b.Z)()||(e.setAttribute("disabled",""),t.setAttribute("uap-tooltip",UncannyAutomator.i18n.conditions.unlockConditions)),this.$wrapper=t,this.$button=e}},{key:"handleClick",value:function(){var t=this;this.$button.addEventListener("click",(function(){(0,b.Z)()?(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(t,C,U).call(t),t.renderListOfConditions()):t.promotePro()}))}},{key:"renderListOfConditions",value:function(){var t=new CustomEvent("automator/action/conditions/add",{detail:{conditionsGroupId:this.conditionsGroupId}});document.dispatchEvent(t),new w.Z({conditionsGroupId:this.conditionsGroupId,comingFrom:"action-filter-button"})}},{key:"disableWhenUserEditsAction",value:function(){var t=this;document.addEventListener("automator/item/options/open",(function(e){t.item.id==e.detail.itemId&&(t.$button.setAttribute("disabled",""),t.$wrapper.setAttribute("uap-tooltip",UncannyAutomator.i18n.conditions.pleaseSaveActionFirst))}))}},{key:"promotePro",value:function(){(0,a.YQ)((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"recipe_creator",content:"add_condition_btn"}))}},{key:"shouldAddButton",value:function(){return"action"==this.item.itemType&&!this.item.hasConditions&&!this.item.isMissing}}])&&k(e.prototype,n),t}();function U(){var t=new A.Z;t.actions=[this.item.id],this.conditionsGroupId=t.id}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var M=n(771),D=function(){function t(e,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];E(this,t);var s=(0,a.M0)("metabox",{type:e});if(Object.keys(n).length,(0,_.Z)()){var c=i()("<div/>",{class:"ua-sortable"});this.innerContainerSortable=c;var l=Object.values(n).sort((function(t,e){return t.menuOrder-e.menuOrder}));i().each(l,(function(t,n){if(e==n.itemType){var i=o.createItem(n.id,r);c.append(i)}})),s.append(c)}else i().each(n,(function(t,n){if(e==n.itemType){var i=o.createItem(t);s.append(i)}}))}var e,n;return e=t,n=[{key:"createItem",value:function(t,e){var n=UncannyAutomator.recipe.items[t],o=i()("<div/>",{class:"item uap-item","data-id":t});o[0].setAttribute("data-integration",n.integrationCode),o[0].setAttribute("data-item",n.itemCode),o[0].itemId=t,n.isMissing&&o.addClass("item--missing"),n.meta.async_mode&&o.addClass("item--hasSchedule"),(0,a.xb)(n.inlineCss)||(n.inlineCss=n.inlineCss.replace(/{{item_id}}/g,t),o.prepend(n.inlineCss));var r=this.createInner(t),s=this.createNotice(n);if(e&&"action"==n.itemType&&!n.hasConditions){var c=new v(t);o.append(c)}return o.append(r),o.append(s),o.on("automator:item:open",(function(t,e){var n=o.find(".item-async");i()(n[0]).trigger("automator:asyncButton:maybeDisable",e)})),o}},{key:"createInner",value:function(t){var e=UncannyAutomator.recipe.items[t],n=e.isMissing?null:e.integrationCode,o={$sentence:new g.Z(e.itemType,n,e.itemCode,t),$icon:new s.Z(n),$integrationNameTag:new c.Z({integrationId:n,customIntegrationName:e.integrationName}),$actionMenu:new r.Z(e.itemType,n,e.itemCode,t),buttons:[]},i=new T({itemId:t});i.shouldAddButton()&&o.buttons.push(i.$wrapper);var l=new h(e.itemType,n,e.itemCode,t);l.shouldAddButton()&&o.buttons.push(l.$button);var u=document.createElement("div");return u.classList.add("uap-item-inner"),u.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-sidebar"></div>\n\t\t\t<div class="uap-item-top-header">\n\t\t\t\t<div class="uap-item-top-header-left"></div>\n\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t</div>\n\t\t\t<div class="uap-item-main"></div>\n\t\t\t<div class="uap-item-inner-content"></div>\n\t\t'),u.querySelector(".uap-item-sidebar").appendChild(o.$icon),u.querySelector(".uap-item-top-header-left").appendChild(o.$integrationNameTag),u.querySelector(".uap-item-top-header-right").appendChild(o.$actionMenu.get(0)),u.querySelector(".uap-item-main").appendChild(o.$sentence.get(0)),o.buttons.forEach((function(t){u.querySelector(".uap-item-top-header-right").appendChild(t)})),(0,a.$K)(e.shouldShowItemId)&&e.shouldShowItemId&&u.querySelector(".uap-item-top-header-left").appendChild(this.$createItemID(t)),u}},{key:"createNotice",value:function(t){var e;return t.isMissing&&(e=i()("<uo-alert/>",{type:"warning"})).text(UncannyAutomator.i18n.itemMissing),e}},{key:"makeSortable",value:function(){var t=this;M(this.innerContainerSortable,{placeholder:'<div class="item"></div>',handle:".item-handle, .uap-conditions-block-drag-handle",items:"#recipe-actions-ui .ua-sortable > .uap-item, .uap-conditions-block",hoverClass:"hover"})[0].addEventListener("sortupdate",(function(e){t.orderUpdated(e)}))}},{key:"orderUpdated",value:function(t){var e=function(){var t=[];return(0,a.M0)("metabox",{type:"action"}).get(0).querySelectorAll(".uap-item").forEach((function(e){var n=e.itemId;t.push(n)})),t}();(0,a.L8)("actions_order",{recipeID:UncannyAutomator.recipe.id,newOrder:e},(function(t){new d.Z}),(function(t){new d.Z}))}},{key:"$createItemID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.createElement("div");return e.classList.add("uap-item-id"),e.innerText=sprintf("#%1$s",t),e}}],n&&x(e.prototype,n),t}();const S=D},838:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var o=n(311),i=n.n(o),a=n(693),r=n(593),s=n(109),c=n(973),l=n(171);function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(975).vsprintf;const d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={metabox:i()("#uo-automator-publish-metabox"),timesPerUser:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_completions_allowed"},timesPerRecipe:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_max_completions_allowed"},toggle:null},this.createMetabox()}var e,n;return e=t,(n=[{key:"createMetabox",value:function(){var t=i()("<div/>",{id:"uap-publish-metabox"}),e=i()("<div/>",{class:"metabox__content"}),n=i()("<div/>",{class:"metabox__footer"});if("anonymous"!=UncannyAutomator.recipe.type){var o=i()("<div/>",{class:"publish-row"}),c=i()("<div/>",{class:"publish-row__visible"}),l=i()("<span/>",{class:"publish-row__icon"}),u=i()("<uo-icon/>",{id:"repeat"}),d=i()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerUser);UncannyAutomator.recipe.publish.timesPerUser=-1==UncannyAutomator.recipe.publish.timesPerUser?"":UncannyAutomator.recipe.publish.timesPerUser;var p=(0,a.xb)(UncannyAutomator.recipe.publish.timesPerUser)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerUser,m=i()("<span/>",{class:"publish-row__value"}).text(p),f=i()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),h=i()("<div/>",{class:"publish-row__hidden"}),g=i()("<div/>",{class:"publish-row__settings"});this.elements.timesPerUser.editLink=f,this.elements.timesPerUser.hiddenBox=h;var y=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerUser,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(t){var e={isValid:!1,message:""};return t>=1?e.isValid=!0:e.message=UncannyAutomator.i18n.publish.oneOrBigger,e}));this.timesField=y;var v=i()("<div/>",{class:"publish-row__buttons"}),_=i()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),b=i()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);this.elements.timesPerUser.saveButton=_,this.elements.timesPerUser.cancelButton=b,v.append(_),v.append(b),g.append(y.getFormElement()),g.append(v),h.append(g),l.append(u),c.append(l),c.append(d),c.append(m),c.append(f),o.append(c),o.append(h),e.append(o)}var w=this.timesPerRecipe();e.append(w);var A=i()("<div/>",{class:"publish-row"}),k=i()("<div/>",{class:"publish-row__visible"}),C=i()("<span/>",{class:"publish-row__icon"}),T=i()("<uo-icon/>",{id:"user-astronaut"}),U=i()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeType),E=i()("<span/>",{class:"publish-row__value"}),x=i()('\n\t\t\t\t<a href="'.concat((0,a.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/",{medium:"publish_metabox",content:"recipe_type_question_icon"}),'" class="publish-row__learn-more" target="_blank"><uo-icon id="question-circle"></uo-icon></a>\n\t\t\t'));"user"==UncannyAutomator.recipe.type&&E.text(UncannyAutomator.i18n.recipeType.userRecipeName),"anonymous"==UncannyAutomator.recipe.type&&E.text(UncannyAutomator.i18n.recipeType.everyoneRecipeName),C.append(T),k.append(C),k.append(U),k.append(E),k.append(x),A.append(k),e.append(A);var M=i()("<div/>",{class:"publish-row"}),D=i()("<div/>",{class:"publish-row__visible"}),S=i()("<span/>",{class:"publish-row__icon"}),I=i()("<uo-icon/>",{id:"calendar"}),O=i()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.createdOn),$=i()("<span/>",{class:"publish-row__value"}).text(UncannyAutomator.recipe.publish.createdOn);S.append(I),D.append(S),D.append(O),D.append($),M.append(D),e.append(M);var L=UncannyAutomator.recipe.publish.recipeRunTimes,P=i()("<a/>",{class:"publish-row__recipe-runs",target:"_blank",href:UncannyAutomator.recipe.publish.recipeRunTimesUrl.replace(/&amp;/g,"&")}).text(UncannyAutomator.recipe.publish.recipeRunTimesViewLogs),R=i()("<div/>",{class:"publish-row"}),F=i()("<div/>",{class:"publish-row__visible"}),j=i()("<span/>",{class:"publish-row__icon"}),V=i()("<uo-icon/>",{id:"repeat"}),K=i()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeRunTimes);j.append(V),F.append(j),F.append(K),F.append(i()("<span/>",{class:"publish-row__value"}).text(L)),L>0&&F.append(P),R.append(F),e.append(R);var q=i()("<div/>",{class:"publish-row"}),N=i()("<div/>",{class:"publish-row__visible"}),H=i()("<a/>",{class:"publish-row__copy-to-draft button button-secondary",href:UncannyAutomator.recipe.publish.copyToDraft.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.publish.copyRecipe);N.append(H),q.append(N),e.append(q);var B=i()("<div/>",{class:"publish-footer__row uap-clear"}),W=i()("<div/>",{class:"publish-footer__left"}),Z=i()("<a/>",{class:"publish-footer__move-to-draft",href:UncannyAutomator.recipe.publish.moveToTrash.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.proOnly.moveToTrash),G=i()("<div/>",{class:"publish-footer__right"}),Y=new s.Z("checkbox",{color:"gutenberg",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipe,off:UncannyAutomator.i18n.status.draftRecipe},currentValue:UncannyAutomator.recipe.isLive});UncannyAutomator.recipe.publish.statusToggle=Y;var z=Y.getFormElement();this.recipeStatusToggle=Y,this.elements.toggle=z,W.append(Z),G.append(z),B.append(W),B.append(G),n.append(B),t.append(e),t.append(n),this.elements.metabox.html(t),new r.Z,this.bind(),this.validateStatus()}},{key:"timesPerRecipe",value:function(){var t=i()("<div/>",{class:"publish-row"}),e=i()("<div/>",{class:"publish-row__visible"}),n=i()("<span/>",{class:"publish-row__icon"}),o=i()("<uo-icon/>",{id:"stopwatch"}),r=i()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerRecipe);UncannyAutomator.recipe.publish.timesPerRecipe=-1==UncannyAutomator.recipe.publish.timesPerRecipe?"":UncannyAutomator.recipe.publish.timesPerRecipe;var c=(0,a.xb)(UncannyAutomator.recipe.publish.timesPerRecipe)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerRecipe,l=i()("<span/>",{class:"publish-row__value"}).text(c),u=i()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),d=i()("<div/>",{class:"publish-row__hidden"}),p=i()("<div/>",{class:"publish-row__settings"});this.elements.timesPerRecipe.editLink=u,this.elements.timesPerRecipe.hiddenBox=d;var m=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerRecipe,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(t){var e={isValid:!1,message:""};return t>=1?e.isValid=!0:e.message=UncannyAutomator.i18n.publish.oneOrBigger,e}));this.timesRecipeField=m;var f=i()("<div/>",{class:"publish-row__buttons"}),h=i()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),g=i()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return this.elements.timesPerRecipe.saveButton=h,this.elements.timesPerRecipe.cancelButton=g,f.append(h),f.append(g),p.append(m.getFormElement()),p.append(f),d.append(p),n.append(o),e.append(n),e.append(r),e.append(l),e.append(u),t.append(e),t.append(d),t}},{key:"validateStatus",value:function(){UncannyAutomator.recipe.isLive&&!UncannyAutomator.recipe.isValid&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}},{key:"validateTimesPerFields",value:function(e,n,o){e.editLink.on("click",(function(){e.hiddenBox.slideToggle(300)})),e.cancelButton.on("click",(function(){e.hiddenBox.slideToggle(300,(function(){new t}))})),e.saveButton.on("click",(function(){if(o.validate().isValid){e.saveButton.addClass("uap-btn--loading uap-btn--disabled");var i=o.getValue();(0,a.xb)(i)&&(i=-1),(0,a.L8)(e.endPoint,{post_ID:UncannyAutomator.recipe.id,recipe_completions_allowed:i},(function(){"recipe_completions_allowed"==e.endPoint?UncannyAutomator.recipe.publish.timesPerUser=i:UncannyAutomator.recipe.publish.timesPerRecipe=i,e.hiddenBox.slideToggle(300,(function(){new t,new l.Z,new c.Z}))}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save times per user"),o.setValue(n),e.saveButton.removeClass("uap-btn--loading uap-btn--disabled")}))}})),o.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))}},{key:"bind",value:function(){var e=this;"anonymous"!=UncannyAutomator.recipe.type&&this.validateTimesPerFields(this.elements.timesPerUser,UncannyAutomator.recipe.publish.timesPerUser,this.timesField),this.validateTimesPerFields(this.elements.timesPerRecipe,UncannyAutomator.recipe.publish.timesPerRecipe,this.timesRecipeField),this.elements.toggle.on("automator:field:change",(function(){e.recipeStatusToggle.startLoadingAnimation();var n=e.recipeStatusToggle.getValue(),o=n?"publish":"draft";!n||n&&UncannyAutomator.recipe.isValid?(0,a.L8)("change_post_status",{post_ID:UncannyAutomator.recipe.id,post_status:o},(function(){UncannyAutomator.recipe.isLive=n,new t,new l.Z,new c.Z}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't set the recipe status"),setTimeout((function(){e.recipeStatusToggle.stopLoadingAnimation(),e.recipeStatusToggle.setValue(!1,!1)}),1e3)})):(UncannyAutomator.recipe.errorMode=!0,new r.Z,setTimeout((function(){e.recipeStatusToggle.stopLoadingAnimation(),e.recipeStatusToggle.setValue(!1,!1)}),1e3))}))}}])&&u(e.prototype,n),t}()},593:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(311),i=n.n(o),a=n(693);function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={container:i()("#uo-uap-notices")},0==this.elements.container.length&&(this.createContainer(),this.elements.container=i()("#uo-uap-notices")),this.emptyContainer(),this.createWarning(),UncannyAutomator.recipe.errorMode&&this.createError()}var e,n;return e=t,(n=[{key:"emptyContainer",value:function(){this.elements.container.empty()}},{key:"createContainer",value:function(){var t=i()("<div/>",{id:"uo-uap-notices",class:"uap"});i()("#uap-publish-metabox").prepend(t)}},{key:"createError",value:function(){if(!(0,a.xb)(UncannyAutomator.recipe.message.error)){var t=i()("<div/>",{class:"uo-notice uo-notice--error"}).text(UncannyAutomator.recipe.message.error);this.elements.container.append(t)}}},{key:"createWarning",value:function(){if(!(0,a.xb)(UncannyAutomator.recipe.message.warning)){var t=i()("<div/>",{class:"uo-notice uo-notice--warning"}).text(UncannyAutomator.recipe.message.warning);this.elements.container.append(t)}}}])&&r(e.prototype,n),t}()},347:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o=n(311),i=n.n(o),a=n(693);function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doWhenReady=e,this.render(),this.getElements(),this.listenSubmission()}var e,n;return e=t,(n=[{key:"render",value:function(){var t=i()('\n\t\t\t<div class="uap">\n\t\t\t\t<div id="uap-type-selector" class="uap-type-selector">\n\t\t\t\t\t<div class="uap-type-selector__box">\n\t\t\t\t\t\t<form id="uap-type-selector-form" class="uap-type-selector__form">\n\t\t\t\t\t\t\t<div class="uap-type-selector__title">\n\t\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.title,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__content">\n\t\t\t\t\t\t\t\t<div class="uap-type-selector__types">\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--user">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="user" id="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--user"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--anonymous">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="anonymous" id="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--anonymous"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.everyoneRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.everyoneRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__warning">\n\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.cantChangeLaterNotice,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__buttons">\n\t\t\t\t\t\t\t\t<button type="submit" id="uap-type-selector-submit-button" class="uap-btn uap-btn--primary">').concat(UncannyAutomator.i18n.confirm,"</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"));i()("body").append(t)}},{key:"getElements",value:function(){this.$elements={container:i()("#uap-type-selector"),form:i()("#uap-type-selector-form"),warning:i()("#uap-type-selector .uap-type-selector__warning"),submitButton:i()("#uap-type-selector-submit-button")}}},{key:"listenSubmission",value:function(){var t=this;this.$elements.form.on("submit",(function(e){e.preventDefault();var n=t.$elements.form.find('input[name="uap-recipe-type"]:checked').val();(0,a.xb)(n)?t.showError(UncannyAutomator.i18n.recipeType.errorDidNotSelectType):["user","anonymous"].includes(n)?t.saveRecipeType(n):t.showError(UncannyAutomator.i18n.recipeType.errorTryingToSaveOtherValue)}))}},{key:"saveRecipeType",value:function(t){var e=this,n={post_ID:UncannyAutomator.recipe.id,recipe_type:t};this.$elements.submitButton.addClass("uap-btn--loading uap-btn--disabled"),(0,a.L8)("change_post_recipe_type",n,(function(n){if(n.success){e.$elements.container.remove(),UncannyAutomator.recipe.type=t;var o=i()("#uo-recipe-triggers-meta-box-ui h2.hndle.ui-sortable-handle"),a=UncannyAutomator.i18n.trigger.userTriggers;"anonymous"==UncannyAutomator.recipe.type&&(a=UncannyAutomator.i18n.trigger.everyoneTrigger),o.text(a),e.doWhenReady(t)}else e.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save the recipe type"),e.$elements.submitButton.removeClass("uap-btn--loading uap-btn--disabled"),e.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}))}},{key:"showError",value:function(t){var e=i()('\n\t\t\t<div class="uap-type-selector__error">\n\t\t\t\t'.concat(t,"\n\t\t\t</div>\n\t\t")),n=this.$elements.container.find(".uap-type-selector__error");n.length>0&&n.remove(),e.insertAfter(this.$elements.warning),setTimeout((function(){e.addClass("uap-type-selector__error--shake")}),10)}}])&&r(e.prototype,n),t}()},27:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Tokens});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(693),_common_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(772),_field__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(109);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,a=[],r=!0,s=!1;try{for(n=n.call(t);!(r=(o=n.next()).done)&&(a.push(o.value),!e||a.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}var vsprintf=__webpack_require__(975).vsprintf,Tokens=function(){function Tokens(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Tokens),this.saveData(t,e,n),this.getData()}return _createClass(Tokens,[{key:"saveData",value:function(t,e,n){this.itemType=t,this.fieldType=e,this.options=Object.assign({includeGroupName:!0,includeGroupIcon:!0,includeGroupTokens:!0,unsupportedTokens:[]},n),this.tokensRegEx=new RegExp(/\{\{(.*?)\}\}/gm),this.tokensRegExNoAttributes=new RegExp(/[^\="]\{\{(.*?)\}\}[^\"]/gm),this.tokensThatRequireUser=[]}},{key:"getData",value:function(){this.tokens=this.getAllTokens()}},{key:"getAllTokens",value:function(){var t=[],e=this.getCommonTokens();e.tokens.length>0&&t.push(e);var n=this.getAdvancedTokens();n.tokens.length>0&&t.push(n);var o=this.getItemsTokens();return[].concat(_toConsumableArray(t),_toConsumableArray(o))}},{key:"filterUnsupportedTokens",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(this.options.unsupportedTokens)||(e=e.filter((function(e){return!t.options.unsupportedTokens.includes(e.id)}))),e}},{key:"getCommonTokens",value:function(){var t=this,e={id:"common"};return this.options.includeGroupName&&(e.name=UncannyAutomator.i18n.tokens.global.common),this.options.includeGroupIcon&&(e.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<uo-icon id="bolt"></uo-icon>\n\t\t\t')),this.options.includeGroupTokens&&(e.tokens=[{id:"site_name",type:"text",name:UncannyAutomator.i18n.tokens.global.siteName,cacheable:!0}],("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&e.tokens.push(new Token({id:"user_id",type:"int",name:UncannyAutomator.i18n.tokens.global.userID,requiresUser:!0}),new Token({id:"user_username",type:"text",name:UncannyAutomator.i18n.tokens.global.userUsername,requiresUser:!0}),new Token({id:"user_firstname",type:"text",name:UncannyAutomator.i18n.tokens.global.userFirstName,requiresUser:!0}),new Token({id:"user_lastname",type:"text",name:UncannyAutomator.i18n.tokens.global.userLastName,requiresUser:!0}),new Token({id:"user_email",type:"email",name:UncannyAutomator.i18n.tokens.global.userEmail,requiresUser:!0}),new Token({id:"user_displayname",type:"text",name:UncannyAutomator.i18n.tokens.global.userDisplay,requiresUser:!0}),new Token({id:"user_role",type:"text",name:UncannyAutomator.i18n.tokens.global.userRole,requiresUser:!0}),new Token({id:"reset_pass_link",type:"url",name:UncannyAutomator.i18n.tokens.global.userResetPassLink,requiresUser:!0})),e.tokens.push(new Token({id:"admin_email",type:"email",name:UncannyAutomator.i18n.tokens.global.adminEmail}),new Token({id:"site_url",type:"url",name:UncannyAutomator.i18n.tokens.global.siteUrl}),new Token({id:"recipe_name",name:UncannyAutomator.i18n.tokens.global.recipeName}),new Token({id:"recipe_id",type:"int",name:UncannyAutomator.i18n.tokens.global.recipeId}),new Token({id:"current_date",name:UncannyAutomator.i18n.tokens.global.currentDate}),new Token({id:"current_time",name:UncannyAutomator.i18n.tokens.global.currentTime}),new Token({id:"user_ip_address",name:UncannyAutomator.i18n.tokens.global.user_ip_address}),new Token({id:"user_reset_pass_url",name:UncannyAutomator.i18n.tokens.global.user_reset_pass_url}))),e.tokens=this.filterUnsupportedTokens(e.tokens),e.tokens.forEach((function(e){e.requiresUser&&t.tokensThatRequireUser.push(e.id)})),e}},{key:"getAdvancedTokens",value:function(){var t=this,e={id:"advanced",tokens:[]};return this.options.includeGroupName&&(e.name=UncannyAutomator.i18n.tokens.global.advanced),this.options.includeGroupIcon&&(e.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<uo-icon id="bolt"></uo-icon>\n\t\t\t')),this.options.includeGroupTokens&&(e.tokens.push(new PostMetaToken({context:this.itemType})),("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&(e.tokens.push(new UserMetaToken({context:this.itemType})),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.wp)&&"1"===UncannyAutomator.wp&&e.tokens.push(new Token({id:"AUTOLOGINLINK",type:"text",name:UncannyAutomator.i18n.tokens.global.autoLoginLink,cacheable:!0,requiresUser:!0}))),e.tokens.push(new Token({id:"recipe_total_run",type:"int",name:UncannyAutomator.i18n.tokens.global.recipeTotalRunToken,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"recipe_run",type:"int",name:UncannyAutomator.i18n.tokens.global.recipeRunToken,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"current_unix_timestamp",type:"text",name:UncannyAutomator.i18n.tokens.global.current_unix_timestamp,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"currentdate_unix_timestamp",type:"text",name:UncannyAutomator.i18n.tokens.global.currentdate_unix_timestamp,cacheable:!0,requiresUser:!1}))),e.tokens=this.filterUnsupportedTokens(e.tokens),e.tokens.forEach((function(e){e.requiresUser&&t.tokensThatRequireUser.push(e.id)})),e}},{key:"getItemsTokens",value:function(){var t=this,e=[],n=UncannyAutomator.recipe.items;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.itemType)&&(n={},["action","closure","user-selector"].includes(this.itemType)&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Wr)("get",{filter:{itemType:"trigger"}}))),"closure"==this.itemType&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Wr)("get",{filter:{itemType:"action"}})))),Object.entries(n).forEach((function(n){var o=_slicedToArray(n,2),i=(o[0],o[1]),a=t.getItemTokens(i);(a.tokens.length>0||!t.options.includeGroupTokens)&&e.push(a)})),e}},{key:"getItemTokens",value:function getItemTokens(item){var tokensGroup={id:item.itemCode,integrationId:item.integrationCode};if(this.options.includeGroupName){var itemSentence=item.sentence;item.isMissing||(itemSentence=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Vx)(item.integrationCode,item.itemType,item.itemCode).sentence),tokensGroup.name=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(item,itemSentence,UncannyAutomator.recipe.items[item.id].meta).html}if(this.options.includeGroupIcon){var $icon;if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.integrations[item.integrationCode])){var integration=UncannyAutomator.integrations[item.integrationCode];(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_svg)?$icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_svg,'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')):(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_16)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_32)&&($icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_16,'"\n\t\t\t\t\t\t\tsrcset="').concat(vsprintf("%s 1x, %s 2x",[integration.icon_16,integration.icon_32]),'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')))}tokensGroup.icon=$icon}if(this.options.includeGroupTokens){var itemTokens=[];if(Object.entries(item.options).forEach((function(t){var e=_slicedToArray(t,2);e[0],e[1].fields.forEach((function(t){var e=t.getAttributes();"repeater"==e.fieldType?t.fieldRows.forEach((function(t,n){var o=n;t.forEach((function(t){itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(e.optionCode,":").concat(o,":").concat(t.getAttributes().optionCode),name:"".concat(e.tokenName," - ").concat(vsprintf(UncannyAutomator.i18n.rowNumber,[o+1])," - ").concat(t.getAttributes().tokenName),type:"select"==t.getAttributes().fieldType||"textarea"==t.getAttributes().fieldType?"text":t.getAttributes().fieldType,value:t.getValue(),fieldId:t.getAttributes().optionCode,itemID:item.id,itemType:item.itemType,cacheable:!1})}))})):(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(e.customFieldTokens)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Kn)(e.customFieldTokens)?Object.entries(e.customFieldTokens).forEach((function(n){var o=_slicedToArray(n,2),i=o[0],a=o[1];itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(i),name:a,type:"select"==e.fieldType||"textarea"==e.fieldType?"text":e.fieldType,value:t.getValue(),fieldId:e.optionCode,itemID:item.id,cacheable:!0})})):itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(e.optionCode),name:e.tokenName,type:"select"==e.fieldType||"textarea"==e.fieldType?"text":e.fieldType,value:t.getValue(),fieldId:e.optionCode,itemID:item.id,cacheable:!0})}))})),item.tokens.forEach((function(t){itemTokens.push({id:"".concat(item.id,":").concat(t.tokenIdentifier,":").concat(t.tokenId),name:t.tokenName,type:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(t.tokenType)?t.tokenType:"text",itemID:item.id,cacheable:!0})})),tokensGroup.tokens=itemTokens,tokensGroup.tokens=this.filterUnsupportedTokens(tokensGroup.tokens),!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(item.filterTokens))try{var filterTokens=eval("(".concat(item.filterTokens.replace("<script>","").replace("<\/script>","").trim(),")"));itemTokens=filterTokens(tokensGroup,item)}catch(t){UncannyAutomator.dev.developerMode&&(console.warn(t),console.log(item.filterTokens))}}return tokensGroup}},{key:"filterTokensByType",value:function(t){var e=this;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.fieldType)&&(["text","textarea","url"].includes(this.fieldType)||(t=t.filter((function(t){var n=t.type;return"float"==e.fieldType&&"int"==n&&(n="float"),e.fieldType==n})))),t}},{key:"createTokenDOMNode",value:function(t){var e=null,n=this.getTokenDataByID(t);if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n)){if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.cache.tokens[n.id]))e=UncannyAutomator.cache.tokens[n.id];else{(e=document.createElement("span")).classList.add("uap-token"),e.appendChild(n.group.icon[0].cloneNode());var o=document.createElement("span");o.classList.add("uap-token__name"),o.innerHTML=n.name,e.appendChild(o),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n.itemID)&&UncannyAutomator.recipe.items[n.itemID].shouldShowItemId&&o.insertAdjacentHTML("afterBegin",'\n\t\t\t\t\t\t\t<span class="uap-token__id">'.concat(sprintf("#%s: ",n.itemID),"</span>\n\t\t\t\t\t\t")),n.cacheable&&(UncannyAutomator.cache.tokens[n.id]=e)}e=e.cloneNode(!0)}else{(e=document.createElement("span")).classList.add("uap-token","uap-token--invalid");var i=document.createElement("uo-icon");i.setAttribute("id","exclamation-triangle"),e.appendChild(i);var a=document.createElement("span");a.classList.add("uap-token__name"),a.innerHTML=t,e.appendChild(a)}return e}},{key:"getTokenDataByID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=null;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(t)||this.tokens.some((function(n){return e=n.tokens.reduce((function(e,n){return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n.is)?n.is(t)?n:e:n.id==t?n:e}),null),!!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(e)&&((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(e)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(e.getVariation)&&(e=e.getVariation(t)),e.group={id:n.id,name:n.name,icon:n.icon},!0)})),e}},{key:"renderTextWithTokens",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({template:"",parseTokensInAttributes:!0},n);var o=!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(n.template),i=document.createElement("span");return t=t.replace(n.parseTokensInAttributes?this.tokensRegEx:this.tokensRegExNoAttributes,(function(t,i){var a=e.createTokenDOMNode(i).outerHTML;return o&&(a=vsprintf(n.template,[a,i])),t.replace("{{".concat(i,"}}"),a)})),i.innerHTML=t,i}}]),Tokens}(),Token=function(){function t(e){var n=e.id,o=e.type,i=void 0===o?"text":o,a=e.name,r=e.cacheable,s=void 0===r||r,c=e.requiresUser,l=void 0!==c&&c;_classCallCheck(this,t),this.id=n,this.type=i,this.name=a,this.cacheable=s,this.requiresUser=l}return _createClass(t,[{key:"is",value:function(t){return t==this.id}}]),t}(),PostMetaToken=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var o,i=t.customID,a=t.customName,r=t.context,s=void 0===r?"trigger":r;return _classCallCheck(this,n),(o=e.call(this,{id:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(i)?i:"POSTMETA:POSTID:KEY",name:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(a)?a:UncannyAutomator.i18n.tokens.global.postMetaKey,type:"text",cacheable:!1,requiresUser:!1})).context=s,o}return _createClass(n,[{key:"unmodifiedID",get:function(){return"POSTMETA:POSTID:KEY"}},{key:"defaultName",get:function(){return UncannyAutomator.i18n.tokens.global.postMetaKey}},{key:"beforeAdded",value:function(t){var e=this,n=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div></div>"),o=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.XE)("https://automatorplugin.com/knowledge-base/post-meta-tokens/",{medium:"add_token",content:"post_meta_post_id_learn_more"}),i=new _field__WEBPACK_IMPORTED_MODULE_3__.Z("int",{itemType:this.context,optionCode:"token__postMetaPostField",label:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldLabel,description:vsprintf(UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldDescription,['<a href="'.concat(o,'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a>')]),isRequired:!0,supportsTokens:!0,unsupportedTokens:["USERMETA:KEY","POSTMETA:POSTID:KEY"]});n.append(i.createFormElement());var a=new _field__WEBPACK_IMPORTED_MODULE_3__.Z("text",{itemType:this.context,optionCode:"token__postMetaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldLabel,description:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldDescription,isRequired:!0,supportsTokens:!0,unsupportedTokens:["USERMETA:KEY","POSTMETA:POSTID:KEY"]});n.append(a.createFormElement()),i.initTokenSelector(),i.initCodeMirror(),a.initTokenSelector(),a.initCodeMirror();var r=new _common_modal__WEBPACK_IMPORTED_MODULE_2__.Z({title:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.confirmButton}},{size:"extra-large",allowContentOverflow:!0});r.setEvents({afterSetEvents:function(){r.show()},onConfirm:function(){var n=i.validate(),o=a.validate();if(n.isValid&&o.isValid){var s=i.getValue(),c=a.getValue(),l=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},e),u=s.replaceAll("{","[").replaceAll("}","]").replaceAll(":",";"),d=c.replaceAll("{","[").replaceAll("}","]").replaceAll(":",";");l.id=l.id.replace("POSTID",u).replace("KEY",d);var p=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[u,d]);if(s.includes("{{")||c.includes("{{"))try{var m=new Tokens("action"),f=m.renderTextWithTokens(s),h=m.renderTextWithTokens(c);p=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[f.outerHTML,h.outerHTML])}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}l.name=p,r.destroy(),t(l)}},afterHide:function(){r.destroy()}})}},{key:"getDynamicTokenName",value:function(t){var e=_slicedToArray(t.split(":"),3),n=(e[0],e[1]),o=e[2],i=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[n,o]);if(n.includes("[[")||o.includes("[["))try{var a=new Tokens("action"),r=a.renderTextWithTokens(n.replaceAll("[","{").replaceAll("]","}").replaceAll(";",":")),s=a.renderTextWithTokens(o.replaceAll("[","{").replaceAll("]","}").replaceAll(";",":"));i=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[r.outerHTML,s.outerHTML])}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}return i}},{key:"is",value:function(t){return t.startsWith("POSTMETA:")}},{key:"getVariation",value:function(t){return new n({customID:t,customName:this.getDynamicTokenName(t),context:this.context})}}]),n}(Token),UserMetaToken=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var o,i=t.customID,a=t.customName,r=t.context,s=void 0===r?"trigger":r;return _classCallCheck(this,n),(o=e.call(this,{id:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(i)?i:"USERMETA:KEY",name:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(a)?a:UncannyAutomator.i18n.tokens.global.userMetaKey,type:"text",cacheable:!1,requiresUser:!0})).context=s,o}return _createClass(n,[{key:"beforeAdded",value:function(t){var e=this,n=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div></div>"),o=new _field__WEBPACK_IMPORTED_MODULE_3__.Z("text",{optionCode:"token__metaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKey,description:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKeyDescription,isRequired:!0});n.append(o.createFormElement());var i=new _common_modal__WEBPACK_IMPORTED_MODULE_2__.Z({title:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.confirmButton}});i.setEvents({afterSetEvents:function(){i.show()},onConfirm:function(){var n=o.validate(),a=o.getValue();if(n.isValid){var r=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},e);r.id=r.id.replace("KEY",a),r.name=vsprintf(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[a]),i.destroy(),t(r)}},afterHide:function(){i.destroy()}})}},{key:"getDynamicTokenName",value:function(t){var e=t.replace("USERMETA:","");return vsprintf(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[e])}},{key:"is",value:function(t){return t.startsWith("USERMETA:")}},{key:"getVariation",value:function(t){return new n({customID:t,customName:this.getDynamicTokenName(t),context:this.context})}}]),n}(Token)},454:(t,e,n)=>{"use strict";n.d(e,{RC:()=>s,R3:()=>c,OP:()=>l});var o=n(311),i=n.n(o),a=n(693),r=(n(838),n(27));function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={isValid:!1};if((0,a.$K)(t)){var o=UncannyAutomator.recipe.items[t];if(!o.isMissing&&!(0,a.xb)(o)&&(n.isValid=o.isValid,!o.isValid)){var r=(0,a.M0)("item",{id:t}).item;r.addClass("item--error"),i().each(o.options,(function(e,n){if(!n.isValid){var o=(0,a.M0)("optionGroup",{itemID:t,groupID:e});o.tokenInSentence.addClass("item-title__token--error item-title__token--error-shake"),o.fieldsContainer.addClass("item-options__group--error"),o.optionsContainer.addClass("item-options--error"),setTimeout((function(){o.tokenInSentence.removeClass("item-title__variable--error-shake")}),1e3),(0,a.$K)(o.optionsContainer)&&c(o.optionsContainer)}}))}}else n.isValid=!1,(0,a.xb)(e)&&console.error("Neither itemID nor the $item are defined. One of them must be defined.");return n}function c(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={isValid:!1},o=t.find('\n\t\tinput.form-element__input[data-is-child-field="'.concat(e?"true":"false",'"],\n\t\ttextarea.form-element__textarea[data-is-child-field="').concat(e?"true":"false",'"],\n\t\tselect.form-element__select[data-is-child-field="').concat(e?"true":"false",'"],\n\t\t.form-checkbox input,\n\t\t.form-radio')),a=!0;return o.each((function(){var e=i()(this),n=(e.data("type"),{});if(e.hasClass("form-radio")){var o=e.find("input").first(),r=e.find("input:checked");n={field_type:"radio",value:r.length>0?r.val():"",attributes:{supportsTokens:o.data("supportstokens"),required:o.data("required")}}}else n=e.hasClass("form-element__select")?{field_type:"select",value:e.val(),attributes:{supportsTokens:e.data("supportstokens"),required:e.data("required"),supportsCustomValue:e.data("supports-custom-value")}}:{field_type:e.data("type"),value:e.val(),attributes:{supportsTokens:e.data("supportstokens"),required:e.data("required")}};"checkbox"==n.field_type&&(n.value=e.is(":checked")),l(e,n.field_type,n.value,n.attributes).isValid||(a=!1,t.addClass("item-options--error"))})),n.isValid=a,n}function l(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{supportsTokens:!1,required:!1},r=arguments.length>4?arguments[4]:void 0,s={isValid:!1,message:""},l=(0,a.ew)(),d={select:{empty:UncannyAutomator.i18n.validation.field.select.empty,invalid:UncannyAutomator.i18n.validation.field.select.invalid},text:{empty:UncannyAutomator.i18n.validation.field.text.empty,invalid:UncannyAutomator.i18n.validation.field.text.invalid},textarea:{empty:UncannyAutomator.i18n.validation.field.textarea.empty,invalid:UncannyAutomator.i18n.validation.field.textarea.invalid},int:{empty:UncannyAutomator.i18n.validation.field.int.empty,invalid:UncannyAutomator.i18n.validation.field.int.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.int.multipleTokens},float:{empty:UncannyAutomator.i18n.validation.field.float.empty,invalid:UncannyAutomator.i18n.validation.field.float.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.float.multipleTokens},email:{empty:UncannyAutomator.i18n.validation.field.email.empty,single:{invalid:UncannyAutomator.i18n.validation.field.email.single.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.single.multipleTokens},multiple:{invalid:UncannyAutomator.i18n.validation.field.email.multiple.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens}},url:{empty:UncannyAutomator.i18n.validation.field.url.empty,invalid:UncannyAutomator.i18n.validation.field.url.invalid},checkbox:{empty:UncannyAutomator.i18n.validation.field.checkbox.empty,invalid:UncannyAutomator.i18n.validation.field.checkbox.invalid},radio:{empty:UncannyAutomator.i18n.validation.field.radio.empty,invalid:UncannyAutomator.i18n.validation.field.radio.invalid},date:{empty:UncannyAutomator.i18n.validation.field.date.empty,invalid:UncannyAutomator.i18n.validation.field.date.invalid},time:{empty:UncannyAutomator.i18n.validation.field.time.empty,invalid:UncannyAutomator.i18n.validation.field.time.invalid},invalidType:UncannyAutomator.i18n.validation.field.invalidType};try{if("textarea"==e&&!(0,a.xb)(t)&&t.is(":not(:visible)")){var p=t.closest(".form-element");p.find(".switch-html").trigger("click"),n=t.val(),p.find(".switch-tmce").trigger("click")}}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if((0,a.d3)(e,l)){if("checkbox"!=e||(0,a.xb)(n)||["true","false"].includes(n)&&(n="true"==n),o.required&&((0,a.xb)(n)||"checkbox"==e&&!1===n))s.message=d[e].empty;else if(!o.required&&(0,a.xb)(n))s.isValid=!0;else if(""!=n){var m;switch(e){case"select":if(s.isValid=!0,o.supportsCustomValue&&"automator_custom_value"==n){var f=t.closest(".form-element").find(".form-element-children");1==f.length&&(s.isValid=c(f,!0).isValid)}if(s.isValid&&(0,a.$K)(r)){var h=r(n);s.isValid=h.isValid,h.isValid||(s.message=h.message)}break;case"text":case"textarea":if(s.isValid=!0,(0,a.$K)(r)){var g=r(n);s.isValid=g.isValid,g.isValid||(s.message=g.message)}break;case"int":var y,v=new RegExp(/^([+-]?[1-9]\d*|0)$/gm);if(m=u(n),o.supportsTokens&&m.hasTokens?1==m.tokens.length?s.isValid=!0:s.message=d.int.multipleTokens:v.test(n)?s.isValid=!0:s.message=d.int.invalid,s.isValid&&(0,a.$K)(r)){var _=r(n,y);s.isValid=_.isValid,_.isValid||(s.message=_.message)}break;case"float":var b,w=new RegExp(/^[+-]?((\d+(\.|\,)?\d*)|(\.\d+))$/gm);if(m=u(n),o.supportsTokens&&m.hasTokens?1==m.tokens.length?s.isValid=!0:s.message=d.float.multipleTokens:w.test(n)?s.isValid=!0:s.message=d.float.invalid,s.isValid&&(0,a.$K)(r)){var A=r(n,b);s.isValid=A.isValid,A.isValid||(s.message=A.message)}break;case"email":var k,C=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),T=[];n.includes(",")?(T=n.split(","),i().each(T,(function(t,e){T[t]=e.trim()}))):T.push(n.trim()),m=u(n);var U=!0,E=T.length>1;if(o.supportsTokens&&m.hasTokens){var x=!1;i().each(T,(function(t,e){if(!((m=u(e)).tokens.length<=1))return x=!0,!1})),U&&!x?s.isValid=!0:s.message=x?E?d.email.multiple.multipleTokens:d.email.single.multipleTokens:E?d.email.multiple.invalid:d.email.single.invalid}else i().each(T,(function(t,e){C.test(e)||(U=!1)})),U?s.isValid=!0:s.message=E?d.email.multiple.invalid:d.email.single.invalid;if(s.isValid&&(0,a.$K)(r)){var M=r(n,k);s.isValid=M.isValid,M.isValid||(s.message=M.message)}break;case"url":if(s.isValid=!0,s.isValid&&(0,a.$K)(r)){var D=r(n);s.isValid=D.isValid,D.isValid||(s.message=D.message)}break;case"checkbox":if(s.isValid=!0,(0,a.$K)(r)){var S=r(n);s.isValid=S.isValid,S.isValid||(s.message=S.message)}break;case"radio":if(s.isValid=!0,(0,a.$K)(r)){var I=r(n);s.isValid=I.isValid,I.isValid||(s.message=I.message)}break;case"date":if(s.isValid=!0,(0,a.$K)(r)){var O=r(n);s.isValid=O.isValid,O.isValid||(s.message=O.message)}break;case"time":if(s.isValid=!0,(0,a.$K)(r)){var $=r(n);s.isValid=$.isValid,$.isValid||(s.message=$.message)}break;default:s.isValid=!1,s.message=""}}}else s.message=d.invalidType;if(!(0,a.xb)(t)){var L=t.closest(".form-element"),P=L.find(".form-element__error").filter((function(){return i()(this).closest(".form-element").is(L)}));s.isValid?(L.removeClass("form-element--error"),L.addClass("form-element--success")):(L.removeClass("form-element--success"),L.addClass("form-element--error")),""!=s.message?(P.addClass("form-element__error--show"),P.text(s.message)):(P.removeClass("form-element__error--show"),P.text(""))}return s}function u(t){var e={hasTokens:!1,tokens:[]},n=new RegExp(/\{\{(.*?)\}\}/gm),o=new r.Z(null,null,{includeGroupName:!1,includeGroupIcon:!1}).tokens;return(0,a.$K)(t)?(0,a.xb)(t)||function(){(0,a.HD)(t)||(t=t.toString());for(var r,s=[],c=function(){var t=r[1];i().each(o,(function(e,n){i().each(n.tokens,(function(e,n){try{n.is(t)&&s.push(n)}catch(e){t==n.id&&s.push(n)}}))}))};null!==(r=n.exec(t));)c();e.tokens=s,e.tokens.length>0&&(e.hasTokens=!0)}():console.error("Undefined string attribute"),e}n(975).vsprintf},895:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t,...e){if(!t)throw TypeError("Cannot convert undefined or null to object");for(const n of e)n&&Object.keys(n).forEach((e=>t[e]=n[e]));return t})},771:t=>{"use strict";function e(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}var n=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},o=new Map,i=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,n){t[n]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!1,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!1,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),a=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return o.has(t)||o.set(t,new i),o.get(t)};function r(t,e,n){if(t instanceof Array)for(var o=0;o<t.length;++o)r(t[o],e,n);else t.addEventListener(e,n),a(t).setData("event"+e,n)}function s(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)s(t[n],e);else t.removeEventListener(e,a(t).getData("event"+e)),a(t).deleteData("event"+e)}function c(t,e,n){if(t instanceof Array)for(var o=0;o<t.length;++o)c(t[o],e,n);else t.setAttribute(e,n)}function l(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)l(t[n],e);else t.removeAttribute(e)}var u,d,p,m,f,h,g,y,v,_=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},b=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},w=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},A=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},k=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return"border-box"===e.getPropertyValue("box-sizing")?parseInt(e.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},C=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["width","padding-left","padding-right"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},T=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},U=function(t){return t.composedPath&&t.composedPath()[0]||t.target},E=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}},x=function(t,e){if(!0===t.isSortable){var n=a(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==a(t).getConfig("connectWith")&&null!==a(t).getConfig("connectWith"))return a(t).getConfig("connectWith")===a(e).getConfig("connectWith")}return!1},M={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"},D=function(t,e){if("string"==typeof a(t).getConfig("hoverClass")){var o=a(t).getConfig("hoverClass").split(" ");!0===e?(r(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var o=null;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var r=Date.now();(null===o||r-o>=e)&&(o=r,t.apply(n,i))}}((function(e){0===e.buttons&&n(t.children,a(t).getConfig("items")).forEach((function(t){var n,i;t===e.target||t.contains(e.target)?(n=t.classList).add.apply(n,o):(i=t.classList).remove.apply(i,o)}))}),a(t).getConfig("throttleTime"))),r(t,"mouseleave",(function(){n(t.children,a(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,o)}))}))):(s(t,"mousemove"),s(t,"mouseleave"))}},S=function(t){s(t,"dragstart"),s(t,"dragend"),s(t,"dragover"),s(t,"dragenter"),s(t,"drop"),s(t,"mouseenter"),s(t,"mouseleave")},I=function(t,e){t&&s(t,"dragleave"),e&&e!==t&&s(e,"dragleave")},O=function(t){var e;(e=t).h5s&&delete e.h5s.data,l(t,"aria-dropeffect")},$=function(t){l(t,"aria-grabbed"),l(t,"aria-copied"),l(t,"draggable"),l(t,"role")};function L(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function P(t,o){var i=e(t,"opts"),a=n(t.children,i.items).filter((function(t){return t.contains(o)||t.shadowRoot&&t.shadowRoot.contains(o)}));return a.length>0?a[0]:o}var R=function(t){var o=e(t,"opts"),i=n(t.children,o.items),a=T(i,o.handle);c(t,"aria-dropeffect","move"),e(t,"_disabled","false"),c(a,"draggable","true"),D(t,!0),!1===o.disableIEFix&&"function"==typeof(document||window.document).createElement("span").dragDrop&&r(a,"mousedown",(function(){if(-1!==i.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===i.indexOf(t);)t=t.parentElement;t.dragDrop()}}))};function F(t,i){var l=String(i);return i=i||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(l)?t.map((function(t){var o=e(t,"opts");return function(t,o,i){if(void 0===o&&(o=function(t,e){return t}),void 0===i&&(i=function(t){return t}),!(t instanceof HTMLElement)||1==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof o||"function"!=typeof i)throw new Error("You need to provide a valid serializer for items and the container.");var a=e(t,"opts").items,r=n(t.children,a),s=r.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:b(e,r)}}));return{container:i({node:t,itemCount:s.length}),items:s.map((function(e){return o(e,t)}))}}(t,o.itemSerializer,o.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(l))return F[l](t);["connectWith","disableIEFix"].forEach((function(t){Object.prototype.hasOwnProperty.call(i,t)&&null!==i[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),i=Object.assign({},M,a(t).config,i),a(t).config=i,e(t,"opts",i),t.isSortable=!0,function(t){var o=e(t,"opts"),i=n(t.children,o.items),a=T(i,o.handle);e(t,"_disabled","false"),S(i),I(m,y),s(a,"mousedown"),s(t,"dragover"),s(t,"dragenter"),s(t,"drop")}(t);var D,O=n(t.children,i.items);if(null!==i.placeholder&&void 0!==i.placeholder){var $=document.createElement(t.tagName);i.placeholder instanceof HTMLElement?$.appendChild(i.placeholder):$.innerHTML=i.placeholder,D=$.children[0]}a(t).placeholder=function(t,e,n){var o;if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(o=e.classList).add.apply(o,n.split(" ")),e}(t,D,i.placeholderClass),e(t,"items",i.items),i.acceptFrom?e(t,"acceptFrom",i.acceptFrom):i.connectWith&&e(t,"connectWith",i.connectWith),R(t),c(O,"role","option"),c(O,"aria-grabbed","false"),r(t,"dragstart",(function(t){var e=U(t);if(!0!==e.isSortable&&(t.stopImmediatePropagation(),(!i.handle||e.matches(i.handle))&&"false"!==e.getAttribute("draggable"))){var o=L(e,t),r=P(o,e);g=n(o.children,i.items),f=g.indexOf(r),h=b(r,o.children),m=o,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=E),t.dataTransfer&&t.dataTransfer.setDragImage){var o=n(e,_(e),t);if(!(o.element instanceof HTMLElement)||"number"!=typeof o.posX||"number"!=typeof o.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",U(t).id),t.dataTransfer.setDragImage(o.element,o.posX,o.posY)}}(t,r,i.customDragImage),d=k(r),p=C(r),r.classList.add(i.draggingClass),u=function(t,e){var n=t;return!0===a(e).getConfig("copy")&&(c(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n}(r,o),c(u,"aria-grabbed","true"),o.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:h,index:f,container:m},item:u,originalTarget:e}}))}})),r(t,"dragenter",(function(o){var s=U(o),c=L(s,o);c&&c!==y&&(v=n(c.children,e(c,"items")).filter((function(e){return e!==a(t).placeholder})),i.dropTargetContainerClass&&c.classList.add(i.dropTargetContainerClass),c.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:h,index:f,container:m},destination:{container:c,itemsBeforeUpdate:v},item:u,originalTarget:s}})),r(c,"dragleave",(function(t){var e=t.relatedTarget||t.fromElement;t.currentTarget.contains(e)||(i.dropTargetContainerClass&&c.classList.remove(i.dropTargetContainerClass),c.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:h,index:f,container:c},item:u,originalTarget:s}})))}))),y=c})),r(t,"dragend",(function(n){if(u){u.classList.remove(i.draggingClass),c(u,"aria-grabbed","false"),"true"===u.getAttribute("aria-copied")&&"true"!==e(u,"dropped")&&u.remove(),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay);var a=Array.from(o.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(w)[0];a&&a.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}})),y=null,u=null,d=null,p=null}})),r(t,"drop",(function(r){if(x(t,u.parentElement)){r.preventDefault(),r.stopPropagation(),e(u,"dropped","true");var s=Array.from(o.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(w)[0];if(s){s.replaceWith(u),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}}));var c=a(t).placeholder,l=n(m.children,i.items).filter((function(t){return t!==c})),d=!0===this.isSortable?this:this.parentElement,p=n(d.children,e(d,"items")).filter((function(t){return t!==c})),y=b(u,Array.from(u.parentElement.children).filter((function(t){return t!==c}))),_=b(u,p);i.dropTargetContainerClass&&d.classList.remove(i.dropTargetContainerClass),h===y&&m===d||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:h,index:f,container:m,itemsBeforeUpdate:g,items:l},destination:{index:_,elementIndex:y,container:d,itemsBeforeUpdate:v,items:p},item:u}}))}else e(u,"dropped","false")}}));var j,V,K,q=(j=function(t,e,r,s){if(u)if(i.forcePlaceholderSize&&(a(t).placeholder.style.height=d+"px",a(t).placeholder.style.width=p+"px"),Array.from(t.children).indexOf(e)>-1){var c=k(e),l=C(e),m=b(a(t).placeholder,e.parentElement.children),f=b(e,e.parentElement.children);if(c>d||l>p){var h=c-d,g=l-p,y=_(e).top,v=_(e).left;if(m<f&&("vertical"===i.orientation&&s<y||"horizontal"===i.orientation&&r<v))return;if(m>f&&("vertical"===i.orientation&&s>y+c-h||"horizontal"===i.orientation&&r>v+l-g))return}void 0===u.oldDisplay&&(u.oldDisplay=u.style.display),"none"!==u.style.display&&(u.style.display="none");var w=!1;try{var T=_(e).top+e.offsetHeight/2,U=_(e).left+e.offsetWidth/2;w="vertical"===i.orientation&&s>=T||"horizontal"===i.orientation&&r>=U}catch(t){w=m<f}w?function(t,e){A(t,e,"after")}(e,a(t).placeholder):function(t,e){A(t,e,"before")}(e,a(t).placeholder),Array.from(o.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==a(t).placeholder&&e.placeholder.remove()}))}else{var E=Array.from(o.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==E.indexOf(e)||t!==e||n(e.children,i.items).length||(E.forEach((function(t){return t.remove()})),e.appendChild(a(t).placeholder))}},void 0===(V=i.debounce)&&(V=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(K),K=setTimeout((function(){j.apply(void 0,t)}),V)}),N=function(t){var o=t.target,i=!0===o.isSortable?o:L(o,t);if(o=P(i,o),u&&x(i,u.parentElement)&&"true"!==e(i,"_disabled")){var r=e(i,"opts");parseInt(r.maxItems)&&n(i.children,e(i,"items")).length>parseInt(r.maxItems)&&u.parentElement!==i||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===a(i).getConfig("copy")?"copy":"move",q(i,o,t.pageX,t.pageY))}};r(O.concat(t),"dragover",N),r(O.concat(t),"dragenter",N)})),t)}F.destroy=function(t){!function(t){var o=e(t,"opts")||{},i=n(t.children,o.items),a=T(i,o.handle);D(t,!1),s(t,"dragover"),s(t,"dragenter"),s(t,"dragstart"),s(t,"dragend"),s(t,"drop"),O(t),s(a,"mousedown"),S(i),$(i),I(m,y),t.isSortable=!1}(t)},F.enable=function(t){R(t)},F.disable=function(t){!function(t){var o=e(t,"opts"),i=n(t.children,o.items),a=T(i,o.handle);c(t,"aria-dropeffect","none"),e(t,"_disabled","true"),c(a,"draggable","false"),s(a,"mousedown"),D(t,!1)}(t)},F.__testing={data:e,removeItemEvents:S,removeItemData:$,removeSortableData:O,removeContainerEvents:I},t.exports=F},686:(t,e,n)=>{var o,i;o=[n(311)],void 0===(i=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var n,o,i;return e&&e.requirejs||(e?o=e:e={},function(t){var e,a,r,s,c={},l={},u={},d={},p=Object.prototype.hasOwnProperty,m=[].slice,f=/\.js$/;function h(t,e){return p.call(t,e)}function g(t,e){var n,o,i,a,r,s,c,l,d,p,m,h=e&&e.split("/"),g=u.map,y=g&&g["*"]||{};if(t){for(r=(t=t.split("/")).length-1,u.nodeIdCompat&&f.test(t[r])&&(t[r]=t[r].replace(f,"")),"."===t[0].charAt(0)&&h&&(t=h.slice(0,h.length-1).concat(t)),d=0;d<t.length;d++)if("."===(m=t[d]))t.splice(d,1),d-=1;else if(".."===m){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((h||y)&&g){for(d=(n=t.split("/")).length;d>0;d-=1){if(o=n.slice(0,d).join("/"),h)for(p=h.length;p>0;p-=1)if((i=g[h.slice(0,p).join("/")])&&(i=i[o])){a=i,s=d;break}if(a)break;!c&&y&&y[o]&&(c=y[o],l=d)}!a&&c&&(a=c,s=l),a&&(n.splice(0,s,a),t=n.join("/"))}return t}function y(e,n){return function(){var o=m.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),a.apply(t,o.concat([e,n]))}}function v(t){return function(e){c[t]=e}}function _(n){if(h(l,n)){var o=l[n];delete l[n],d[n]=!0,e.apply(t,o)}if(!h(c,n)&&!h(d,n))throw new Error("No "+n);return c[n]}function b(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function w(t){return t?b(t):[]}function A(t){return function(){return u&&u.config&&u.config[t]||{}}}r=function(t,e){var n,o,i=b(t),a=i[0],r=e[1];return t=i[1],a&&(n=_(a=g(a,r))),a?t=n&&n.normalize?n.normalize(t,(o=r,function(t){return g(t,o)})):g(t,r):(a=(i=b(t=g(t,r)))[0],t=i[1],a&&(n=_(a))),{f:a?a+"!"+t:t,n:t,pr:a,p:n}},s={require:function(t){return y(t)},exports:function(t){var e=c[t];return void 0!==e?e:c[t]={}},module:function(t){return{id:t,uri:"",exports:c[t],config:A(t)}}},e=function(e,n,o,i){var a,u,p,m,f,g,b,A=[],k=typeof o;if(g=w(i=i||e),"undefined"===k||"function"===k){for(n=!n.length&&o.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if("require"===(u=(m=r(n[f],g)).f))A[f]=s.require(e);else if("exports"===u)A[f]=s.exports(e),b=!0;else if("module"===u)a=A[f]=s.module(e);else if(h(c,u)||h(l,u)||h(d,u))A[f]=_(u);else{if(!m.p)throw new Error(e+" missing "+u);m.p.load(m.n,y(i,!0),v(u),{}),A[f]=c[u]}p=o?o.apply(c[e],A):void 0,e&&(a&&a.exports!==t&&a.exports!==c[e]?c[e]=a.exports:p===t&&b||(c[e]=p))}else e&&(c[e]=o)},n=o=a=function(n,o,i,c,l){if("string"==typeof n)return s[n]?s[n](o):_(r(n,w(o)).f);if(!n.splice){if((u=n).deps&&a(u.deps,u.callback),!o)return;o.splice?(n=o,o=i,i=null):n=t}return o=o||function(){},"function"==typeof i&&(i=c,c=l),c?e(t,n,o,i):setTimeout((function(){e(t,n,o,i)}),4),a},a.config=function(t){return a(t)},n._defined=c,(i=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),h(c,t)||h(l,t)||(l[t]=[t,e,n])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=o,e.define=i),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var o in e)"function"==typeof e[o]&&"constructor"!==o&&n.push(o);return n}e.Extend=function(t,e){var n={}.hasOwnProperty;function o(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t},e.Decorate=function(t,e){var o=n(e),i=n(t);function a(){var n=Array.prototype.unshift,o=e.prototype.constructor.length,i=t.prototype.constructor;o>0&&(n.call(arguments,t.prototype.constructor),i=e.prototype.constructor),i.apply(this,arguments)}e.displayName=t.displayName,a.prototype=new function(){this.constructor=a};for(var r=0;r<i.length;r++){var s=i[r];a.prototype[s]=t.prototype[s]}for(var c=function(t){var n=function(){};t in a.prototype&&(n=a.prototype[t]);var o=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,n),o.apply(this,arguments)}},l=0;l<o.length;l++){var u=o[l];a.prototype[u]=c(u)}return a};var o=function(){this.listeners={}};o.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},o.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},o.prototype.invoke=function(t,e){for(var n=0,o=t.length;n<o;n++)t[n].apply(this,e)},e.Observable=o,e.generateChars=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),o=t;if(1!==n.length){for(var i=0;i<n.length;i++){var a=n[i];(a=a.substring(0,1).toLowerCase()+a.substring(1))in o||(o[a]={}),i==n.length-1&&(o[a]=t[e]),o=o[a]}delete t[e]}}return t},e.hasScroll=function(e,n){var o=t(n),i=n.style.overflowX,a=n.style.overflowY;return(i!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===i||"scroll"===a||o.innerHeight()<n.scrollHeight||o.innerWidth()<n.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.__cache={};var i=0;return e.GetUniqueElementId=function(t){var n=t.getAttribute("data-select2-id");return null!=n||(n=t.id?"select2-data-"+t.id:"select2-data-"+(++i).toString()+"-"+e.generateChars(4),t.setAttribute("data-select2-id",n)),n},e.StoreData=function(t,n,o){var i=e.GetUniqueElementId(t);e.__cache[i]||(e.__cache[i]={}),e.__cache[i][n]=o},e.GetData=function(n,o){var i=e.GetUniqueElementId(n);return o?e.__cache[i]&&null!=e.__cache[i][o]?e.__cache[i][o]:t(n).data(o):e.__cache[i]},e.RemoveData=function(t){var n=e.GetUniqueElementId(t);null!=e.__cache[n]&&delete e.__cache[n],t.removeAttribute("data-select2-id")},e.copyNonInternalCssClasses=function(t,e){var n=t.getAttribute("class").trim().split(/\s+/);n=n.filter((function(t){return 0===t.indexOf("select2-")}));var o=e.getAttribute("class").trim().split(/\s+/);o=o.filter((function(t){return 0!==t.indexOf("select2-")}));var i=n.concat(o);t.setAttribute("class",i.join(" "))},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,o){this.$element=t,this.data=o,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var o=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(e.message);o.append(n(i(e.args))),o[0].className+=" select2-results__message",this.$results.append(o)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var o=t.results[n],i=this.option(o);e.push(i)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option--selectable"),e=t.filter(".select2-results__option--selected");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(o){var i=o.map((function(t){return t.id.toString()}));n.$results.find(".select2-results__option--selectable").each((function(){var n=t(this),o=e.GetData(this,"data"),a=""+o.id;null!=o.element&&o.element.selected||null==o.element&&i.indexOf(a)>-1?(this.classList.add("select2-results__option--selected"),n.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),n.attr("aria-selected","false"))}))}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var o=document.createElement("li");o.classList.add("select2-results__option"),o.classList.add("select2-results__option--selectable");var i={role:"option"},a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var r in(null!=n.element&&a.call(n.element,":disabled")||null==n.element&&n.disabled)&&(i["aria-disabled"]="true",o.classList.remove("select2-results__option--selectable"),o.classList.add("select2-results__option--disabled")),null==n.id&&o.classList.remove("select2-results__option--selectable"),null!=n._resultId&&(o.id=n._resultId),n.title&&(o.title=n.title),n.children&&(i.role="group",i["aria-label"]=n.text,o.classList.remove("select2-results__option--selectable"),o.classList.add("select2-results__option--group")),i){var s=i[r];o.setAttribute(r,s)}if(n.children){var c=t(o),l=document.createElement("strong");l.className="select2-results__group",this.template(n,l);for(var u=[],d=0;d<n.children.length;d++){var p=n.children[d],m=this.option(p);u.push(m)}var f=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});f.append(u),c.append(l),c.append(f)}else this.template(n,o);return e.StoreData(o,"data",n),o},n.prototype.bind=function(n,o){var i=this,a=n.id+"-results";this.$results.attr("id",a),n.on("results:all",(function(t){i.clear(),i.append(t.data),n.isOpen()&&(i.setClasses(),i.highlightFirstItem())})),n.on("results:append",(function(t){i.append(t.data),n.isOpen()&&i.setClasses()})),n.on("query",(function(t){i.hideMessages(),i.showLoading(t)})),n.on("select",(function(){n.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect")&&i.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(i.setClasses(),i.options.get("scrollAfterSelect")&&i.highlightFirstItem())})),n.on("open",(function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()})),n.on("close",(function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var t=i.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),n.on("results:select",(function(){var t=i.getHighlightedResults();if(0!==t.length){var n=e.GetData(t[0],"data");t.hasClass("select2-results__option--selected")?i.trigger("close",{}):i.trigger("select",{data:n})}})),n.on("results:previous",(function(){var t=i.getHighlightedResults(),e=i.$results.find(".select2-results__option--selectable"),n=e.index(t);if(!(n<=0)){var o=n-1;0===t.length&&(o=0);var a=e.eq(o);a.trigger("mouseenter");var r=i.$results.offset().top,s=a.offset().top,c=i.$results.scrollTop()+(s-r);0===o?i.$results.scrollTop(0):s-r<0&&i.$results.scrollTop(c)}})),n.on("results:next",(function(){var t=i.getHighlightedResults(),e=i.$results.find(".select2-results__option--selectable"),n=e.index(t)+1;if(!(n>=e.length)){var o=e.eq(n);o.trigger("mouseenter");var a=i.$results.offset().top+i.$results.outerHeight(!1),r=o.offset().top+o.outerHeight(!1),s=i.$results.scrollTop()+r-a;0===n?i.$results.scrollTop(0):r>a&&i.$results.scrollTop(s)}})),n.on("results:focus",(function(t){t.element[0].classList.add("select2-results__option--highlighted"),t.element[0].setAttribute("aria-selected","true")})),n.on("results:message",(function(t){i.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-e+t.deltaY,o=t.deltaY>0&&e-t.deltaY<=0,a=t.deltaY<0&&n<=i.$results.height();o?(i.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):a&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(n){var o=t(this),a=e.GetData(this,"data");o.hasClass("select2-results__option--selected")?i.options.get("multiple")?i.trigger("unselect",{originalEvent:n,data:a}):i.trigger("close",{}):i.trigger("select",{originalEvent:n,data:a})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(n){var o=e.GetData(this,"data");i.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),i.trigger("results:focus",{data:o,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find(".select2-results__option--selectable").index(t),n=this.$results.offset().top,o=t.offset().top,i=this.$results.scrollTop()+(o-n),a=o-n;i-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(a>this.$results.outerHeight()||a<0)&&this.$results.scrollTop(i)}},n.prototype.template=function(e,n){var o=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),a=o(e,n);null==a?n.style.display="none":"string"==typeof a?n.innerHTML=i(a):t(n).append(a)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function o(t,e){this.$element=t,this.options=e,o.__super__.constructor.call(this)}return e.Extend(o,e.Observable),o.prototype.render=function(){var n=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n,n},o.prototype.bind=function(t,e){var o=this,i=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){o.trigger("focus",t)})),this.$selection.on("blur",(function(t){o._handleBlur(t)})),this.$selection.on("keydown",(function(t){o.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){o.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){o.update(t.data)})),t.on("open",(function(){o.$selection.attr("aria-expanded","true"),o.$selection.attr("aria-owns",i),o._attachCloseHandler(t)})),t.on("close",(function(){o.$selection.attr("aria-expanded","false"),o.$selection.removeAttr("aria-activedescendant"),o.$selection.removeAttr("aria-owns"),o.$selection.trigger("focus"),o._detachCloseHandler(t)})),t.on("enable",(function(){o.$selection.attr("tabindex",o._tabindex),o.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){o.$selection.attr("tabindex","-1"),o.$selection.attr("aria-disabled","true")}))},o.prototype._handleBlur=function(e){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)}),1)},o.prototype._attachCloseHandler=function(n){t(document.body).on("mousedown.select2."+n.id,(function(n){var o=t(n.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=o[0]&&e.GetData(this,"element").select2("close")}))}))},o.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},o.prototype.position=function(t,e){e.find(".selection").append(t)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,o){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t[0].classList.add("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},i.prototype.bind=function(t,e){var n=this;i.__super__.bind.apply(this,arguments);var o=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",o).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",o),this.$selection.attr("aria-controls",o),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||n.$selection.trigger("focus")}))},i.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t("<span></span>")},i.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),o=this.display(e,n);n.empty().append(o);var i=e.title||e.text;i?n.attr("title",i):n.removeAttr("title")}else this.clear()},i})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function o(t,e){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t[0].classList.add("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},o.prototype.bind=function(e,i){var a=this;o.__super__.bind.apply(this,arguments);var r=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.on("click",(function(t){a.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!a.isDisabled()){var o=t(this).parent(),i=n.GetData(o[0],"data");a.trigger("unselect",{originalEvent:e,data:i})}})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(t){a.isDisabled()||t.stopPropagation()}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},o.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},o.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],o=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",i=0;i<t.length;i++){var a=t[i],r=this.selectionContainer(),s=this.display(a,r),c=o+n.generateChars(4)+"-";a.id?c+=a.id:c+=n.generateChars(4),r.find(".select2-selection__choice__display").append(s).attr("id",c);var l=a.title||a.text;l&&r.attr("title",l);var u=this.options.get("translations").get("removeItem"),d=r.find(".select2-selection__choice__remove");d.attr("title",u()),d.attr("aria-label",u()),d.attr("aria-describedby",c),n.StoreData(r[0],"data",a),e.push(r)}this.$selection.find(".select2-selection__rendered").append(e)}},o})),e.define("select2/selection/placeholder",[],(function(){function t(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();n.html(this.display(e)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");var o=e.title||e.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",o),n},t.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var o=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(o)},t})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,n){function o(){}return o.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){o._handleClear(t)})),e.on("keypress",(function(t){o._handleKeyboardClear(t,e)}))},o.prototype._handleClear=function(t,e){if(!this.isDisabled()){var o=this.$selection.find(".select2-selection__clear");if(0!==o.length){e.stopPropagation();var i=n.GetData(o[0],"data"),a=this.$element.val();this.$element.val(this.placeholder.id);var r={data:i};if(this.trigger("clear",r),r.prevented)this.$element.val(a);else{for(var s=0;s<i.length;s++)if(r={data:i[s]},this.trigger("unselect",r),r.prevented)return void this.$element.val(a);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},o.prototype._handleKeyboardClear=function(t,n,o){o.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},o.prototype.update=function(e,o){if(e.call(this,o),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===o.length)){var i=this.$selection.find(".select2-selection__rendered").attr("id"),a=this.options.get("translations").get("removeAllItems"),r=t('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');r.attr("title",a()),r.attr("aria-label",a()),r.attr("aria-describedby",i),n.StoreData(r[0],"data",o),this.$selection.prepend(r),this.$selection[0].classList.add("select2-selection--clearable")}},o})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,n){function o(t,e,n){t.call(this,e,n)}return o.prototype.render=function(e){var n=this.options.get("translations").get("search"),o=t('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=o,this.$search=o.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n());var i=e.call(this);return this._transferTabIndex(),i.append(this.$searchContainer),i},o.prototype.bind=function(t,o,i){var a=this,r=o.id+"-results",s=o.id+"-container";t.call(this,o,i),a.$search.attr("aria-describedby",s),o.on("open",(function(){a.$search.attr("aria-controls",r),a.$search.trigger("focus")})),o.on("close",(function(){a.$search.val(""),a.resizeSearch(),a.$search.removeAttr("aria-controls"),a.$search.removeAttr("aria-activedescendant"),a.$search.trigger("focus")})),o.on("enable",(function(){a.$search.prop("disabled",!1),a._transferTabIndex()})),o.on("disable",(function(){a.$search.prop("disabled",!0)})),o.on("focus",(function(t){a.$search.trigger("focus")})),o.on("results:focus",(function(t){t.data._resultId?a.$search.attr("aria-activedescendant",t.data._resultId):a.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){a.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){a._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),a.trigger("keypress",t),a._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===a.$search.val()){var o=a.$selection.find(".select2-selection__choice").last();if(o.length>0){var i=e.GetData(o[0],"data");a.searchRemoveChoice(i),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){a.$search.val()&&t.stopPropagation()}));var c=document.documentMode,l=c&&c<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?a.$selection.off("input.search input.searchcheck"):a.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)a.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&a.handleSearch(t)}}))},o.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},o.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},o.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.resizeSearch(),n&&this.$search.trigger("focus")},o.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},o.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},o.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="100%";""===this.$search.attr("placeholder")&&(t=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",t)},o})),e.define("select2/selection/selectionCss",["../utils"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),o=this.options.get("selectionCssClass")||"";return-1!==o.indexOf(":all:")&&(o=o.replace(":all:",""),t.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(o),n},e})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,o){var i=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],r=["opening","closing","selecting","unselecting","clearing"];e.call(this,n,o),n.on("*",(function(e,n){if(-1!==a.indexOf(e)){n=n||{};var o=t.Event("select2:"+e,{params:n});i.$element.trigger(o),-1!==r.indexOf(e)&&(n.prevented=o.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var o=e(t);n._cache[t]=o}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"â’¶":"A",ï¼¡:"A",Ã€:"A",Ã:"A",Ã‚:"A",áº¦:"A",áº¤:"A",áºª:"A",áº¨:"A",Ãƒ:"A",Ä€:"A",Ä‚:"A",áº°:"A",áº®:"A",áº´:"A",áº²:"A",È¦:"A",Ç :"A",Ã„:"A",Çž:"A",áº¢:"A",Ã…:"A",Çº:"A",Ç:"A",È€:"A",È‚:"A",áº :"A",áº¬:"A",áº¶:"A",á¸€:"A",Ä„:"A",Èº:"A",â±¯:"A",êœ²:"AA",Ã†:"AE",Ç¼:"AE",Ç¢:"AE",êœ´:"AO",êœ¶:"AU",êœ¸:"AV",êœº:"AV",êœ¼:"AY","â’·":"B",ï¼¢:"B",á¸‚:"B",á¸„:"B",á¸†:"B",Éƒ:"B",Æ‚:"B",Æ:"B","â’¸":"C",ï¼£:"C",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ã‡:"C",á¸ˆ:"C",Æ‡:"C",È»:"C",êœ¾:"C","â’¹":"D",ï¼¤:"D",á¸Š:"D",ÄŽ:"D",á¸Œ:"D",á¸:"D",á¸’:"D",á¸Ž:"D",Ä:"D",Æ‹:"D",ÆŠ:"D",Æ‰:"D",ê¹:"D",Ç±:"DZ",Ç„:"DZ",Ç²:"Dz",Ç…:"Dz","â’º":"E",ï¼¥:"E",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",á»€:"E",áº¾:"E",á»„:"E",á»‚:"E",áº¼:"E",Ä’:"E",á¸”:"E",á¸–:"E",Ä”:"E",Ä–:"E",Ã‹:"E",áºº:"E",Äš:"E",È„:"E",È†:"E",áº¸:"E",á»†:"E",È¨:"E",á¸œ:"E",Ä˜:"E",á¸˜:"E",á¸š:"E",Æ:"E",ÆŽ:"E","â’»":"F",ï¼¦:"F",á¸ž:"F",Æ‘:"F",ê»:"F","â’¼":"G",ï¼§:"G",Ç´:"G",Äœ:"G",á¸ :"G",Äž:"G",Ä :"G",Ç¦:"G",Ä¢:"G",Ç¤:"G",Æ“:"G",êž :"G",ê½:"G",ê¾:"G","â’½":"H",ï¼¨:"H",Ä¤:"H",á¸¢:"H",á¸¦:"H",Èž:"H",á¸¤:"H",á¸¨:"H",á¸ª:"H",Ä¦:"H",â±§:"H",â±µ:"H",êž:"H","â’¾":"I",ï¼©:"I",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ä¨:"I",Äª:"I",Ä¬:"I",Ä°:"I",Ã:"I",á¸®:"I",á»ˆ:"I",Ç:"I",Èˆ:"I",ÈŠ:"I",á»Š:"I",Ä®:"I",á¸¬:"I",Æ—:"I","â’¿":"J",ï¼ª:"J",Ä´:"J",Éˆ:"J","â“€":"K",ï¼«:"K",á¸°:"K",Ç¨:"K",á¸²:"K",Ä¶:"K",á¸´:"K",Æ˜:"K",â±©:"K",ê€:"K",ê‚:"K",ê„:"K",êž¢:"K","â“":"L",ï¼¬:"L",Ä¿:"L",Ä¹:"L",Ä½:"L",á¸¶:"L",á¸¸:"L",Ä»:"L",á¸¼:"L",á¸º:"L",Å:"L",È½:"L",â±¢:"L",â± :"L",êˆ:"L",ê†:"L",êž€:"L",Ç‡:"LJ",Çˆ:"Lj","â“‚":"M",ï¼­:"M",á¸¾:"M",á¹€:"M",á¹‚:"M",â±®:"M",Æœ:"M","â“ƒ":"N",ï¼®:"N",Ç¸:"N",Åƒ:"N",Ã‘:"N",á¹„:"N",Å‡:"N",á¹†:"N",Å…:"N",á¹Š:"N",á¹ˆ:"N",È :"N",Æ:"N",êž:"N",êž¤:"N",ÇŠ:"NJ",Ç‹:"Nj","â“„":"O",ï¼¯:"O",Ã’:"O",Ã“:"O",Ã”:"O",á»’:"O",á»:"O",á»–:"O",á»”:"O",Ã•:"O",á¹Œ:"O",È¬:"O",á¹Ž:"O",ÅŒ:"O",á¹:"O",á¹’:"O",ÅŽ:"O",È®:"O",È°:"O",Ã–:"O",Èª:"O",á»Ž:"O",Å:"O",Ç‘:"O",ÈŒ:"O",ÈŽ:"O",Æ :"O",á»œ:"O",á»š:"O",á» :"O",á»ž:"O",á»¢:"O",á»Œ:"O",á»˜:"O",Çª:"O",Ç¬:"O",Ã˜:"O",Ç¾:"O",Æ†:"O",ÆŸ:"O",êŠ:"O",êŒ:"O",Å’:"OE",Æ¢:"OI",êŽ:"OO",È¢:"OU","â“…":"P",ï¼°:"P",á¹”:"P",á¹–:"P",Æ¤:"P",â±£:"P",ê:"P",ê’:"P",ê”:"P","â“†":"Q",ï¼±:"Q",ê–:"Q",ê˜:"Q",ÉŠ:"Q","â“‡":"R",ï¼²:"R",Å”:"R",á¹˜:"R",Å˜:"R",È:"R",È’:"R",á¹š:"R",á¹œ:"R",Å–:"R",á¹ž:"R",ÉŒ:"R",â±¤:"R",êš:"R",êž¦:"R",êž‚:"R","â“ˆ":"S",ï¼³:"S",áºž:"S",Åš:"S",á¹¤:"S",Åœ:"S",á¹ :"S",Å :"S",á¹¦:"S",á¹¢:"S",á¹¨:"S",È˜:"S",Åž:"S",â±¾:"S",êž¨:"S",êž„:"S","â“‰":"T",ï¼´:"T",á¹ª:"T",Å¤:"T",á¹¬:"T",Èš:"T",Å¢:"T",á¹°:"T",á¹®:"T",Å¦:"T",Æ¬:"T",Æ®:"T",È¾:"T",êž†:"T",êœ¨:"TZ","â“Š":"U",ï¼µ:"U",Ã™:"U",Ãš:"U",Ã›:"U",Å¨:"U",á¹¸:"U",Åª:"U",á¹º:"U",Å¬:"U",Ãœ:"U",Ç›:"U",Ç—:"U",Ç•:"U",Ç™:"U",á»¦:"U",Å®:"U",Å°:"U",Ç“:"U",È”:"U",È–:"U",Æ¯:"U",á»ª:"U",á»¨:"U",á»®:"U",á»¬:"U",á»°:"U",á»¤:"U",á¹²:"U",Å²:"U",á¹¶:"U",á¹´:"U",É„:"U","â“‹":"V",ï¼¶:"V",á¹¼:"V",á¹¾:"V",Æ²:"V",êž:"V",É…:"V",ê :"VY","â“Œ":"W",ï¼·:"W",áº€:"W",áº‚:"W",Å´:"W",áº†:"W",áº„:"W",áºˆ:"W",â±²:"W","â“":"X",ï¼¸:"X",áºŠ:"X",áºŒ:"X","â“Ž":"Y",ï¼¹:"Y",á»²:"Y",Ã:"Y",Å¶:"Y",á»¸:"Y",È²:"Y",áºŽ:"Y",Å¸:"Y",á»¶:"Y",á»´:"Y",Æ³:"Y",ÉŽ:"Y",á»¾:"Y","â“":"Z",ï¼º:"Z",Å¹:"Z",áº:"Z",Å»:"Z",Å½:"Z",áº’:"Z",áº”:"Z",Æµ:"Z",È¤:"Z",â±¿:"Z",â±«:"Z",ê¢:"Z","â“":"a",ï½:"a",áºš:"a",Ã :"a",Ã¡:"a",Ã¢:"a",áº§:"a",áº¥:"a",áº«:"a",áº©:"a",Ã£:"a",Ä:"a",Äƒ:"a",áº±:"a",áº¯:"a",áºµ:"a",áº³:"a",È§:"a",Ç¡:"a",Ã¤:"a",ÇŸ:"a",áº£:"a",Ã¥:"a",Ç»:"a",ÇŽ:"a",È:"a",Èƒ:"a",áº¡:"a",áº­:"a",áº·:"a",á¸:"a",Ä…:"a",â±¥:"a",É:"a",êœ³:"aa",Ã¦:"ae",Ç½:"ae",Ç£:"ae",êœµ:"ao",êœ·:"au",êœ¹:"av",êœ»:"av",êœ½:"ay","â“‘":"b",ï½‚:"b",á¸ƒ:"b",á¸…:"b",á¸‡:"b",Æ€:"b",Æƒ:"b",É“:"b","â“’":"c",ï½ƒ:"c",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",Ã§:"c",á¸‰:"c",Æˆ:"c",È¼:"c",êœ¿:"c",â†„:"c","â““":"d",ï½„:"d",á¸‹:"d",Ä:"d",á¸:"d",á¸‘:"d",á¸“:"d",á¸:"d",Ä‘:"d",ÆŒ:"d",É–:"d",É—:"d",êº:"d",Ç³:"dz",Ç†:"dz","â“”":"e",ï½…:"e",Ã¨:"e",Ã©:"e",Ãª:"e",á»:"e",áº¿:"e",á»…:"e",á»ƒ:"e",áº½:"e",Ä“:"e",á¸•:"e",á¸—:"e",Ä•:"e",Ä—:"e",Ã«:"e",áº»:"e",Ä›:"e",È…:"e",È‡:"e",áº¹:"e",á»‡:"e",È©:"e",á¸:"e",Ä™:"e",á¸™:"e",á¸›:"e",É‡:"e",É›:"e",Ç:"e","â“•":"f",ï½†:"f",á¸Ÿ:"f",Æ’:"f",ê¼:"f","â“–":"g",ï½‡:"g",Çµ:"g",Ä:"g",á¸¡:"g",ÄŸ:"g",Ä¡:"g",Ç§:"g",Ä£:"g",Ç¥:"g",É :"g",êž¡:"g",áµ¹:"g",ê¿:"g","â“—":"h",ï½ˆ:"h",Ä¥:"h",á¸£:"h",á¸§:"h",ÈŸ:"h",á¸¥:"h",á¸©:"h",á¸«:"h",áº–:"h",Ä§:"h",â±¨:"h",â±¶:"h",É¥:"h",Æ•:"hv","â“˜":"i",ï½‰:"i",Ã¬:"i",Ã­:"i",Ã®:"i",Ä©:"i",Ä«:"i",Ä­:"i",Ã¯:"i",á¸¯:"i",á»‰:"i",Ç:"i",È‰:"i",È‹:"i",á»‹:"i",Ä¯:"i",á¸­:"i",É¨:"i",Ä±:"i","â“™":"j",ï½Š:"j",Äµ:"j",Ç°:"j",É‰:"j","â“š":"k",ï½‹:"k",á¸±:"k",Ç©:"k",á¸³:"k",Ä·:"k",á¸µ:"k",Æ™:"k",â±ª:"k",ê:"k",êƒ:"k",ê…:"k",êž£:"k","â“›":"l",ï½Œ:"l",Å€:"l",Äº:"l",Ä¾:"l",á¸·:"l",á¸¹:"l",Ä¼:"l",á¸½:"l",á¸»:"l",Å¿:"l",Å‚:"l",Æš:"l",É«:"l",â±¡:"l",ê‰:"l",êž:"l",ê‡:"l",Ç‰:"lj","â“œ":"m",ï½:"m",á¸¿:"m",á¹:"m",á¹ƒ:"m",É±:"m",É¯:"m","â“":"n",ï½Ž:"n",Ç¹:"n",Å„:"n",Ã±:"n",á¹…:"n",Åˆ:"n",á¹‡:"n",Å†:"n",á¹‹:"n",á¹‰:"n",Æž:"n",É²:"n",Å‰:"n",êž‘:"n",êž¥:"n",ÇŒ:"nj","â“ž":"o",ï½:"o",Ã²:"o",Ã³:"o",Ã´:"o",á»“:"o",á»‘:"o",á»—:"o",á»•:"o",Ãµ:"o",á¹:"o",È­:"o",á¹:"o",Å:"o",á¹‘:"o",á¹“:"o",Å:"o",È¯:"o",È±:"o",Ã¶:"o",È«:"o",á»:"o",Å‘:"o",Ç’:"o",È:"o",È:"o",Æ¡:"o",á»:"o",á»›:"o",á»¡:"o",á»Ÿ:"o",á»£:"o",á»:"o",á»™:"o",Ç«:"o",Ç­:"o",Ã¸:"o",Ç¿:"o",É”:"o",ê‹:"o",ê:"o",Éµ:"o",Å“:"oe",Æ£:"oi",È£:"ou",ê:"oo","â“Ÿ":"p",ï½:"p",á¹•:"p",á¹—:"p",Æ¥:"p",áµ½:"p",ê‘:"p",ê“:"p",ê•:"p","â“ ":"q",ï½‘:"q",É‹:"q",ê—:"q",ê™:"q","â“¡":"r",ï½’:"r",Å•:"r",á¹™:"r",Å™:"r",È‘:"r",È“:"r",á¹›:"r",á¹:"r",Å—:"r",á¹Ÿ:"r",É:"r",É½:"r",ê›:"r",êž§:"r",êžƒ:"r","â“¢":"s",ï½“:"s",ÃŸ:"s",Å›:"s",á¹¥:"s",Å:"s",á¹¡:"s",Å¡:"s",á¹§:"s",á¹£:"s",á¹©:"s",È™:"s",ÅŸ:"s",È¿:"s",êž©:"s",êž…:"s",áº›:"s","â“£":"t",ï½”:"t",á¹«:"t",áº—:"t",Å¥:"t",á¹­:"t",È›:"t",Å£:"t",á¹±:"t",á¹¯:"t",Å§:"t",Æ­:"t",Êˆ:"t",â±¦:"t",êž‡:"t",êœ©:"tz","â“¤":"u",ï½•:"u",Ã¹:"u",Ãº:"u",Ã»:"u",Å©:"u",á¹¹:"u",Å«:"u",á¹»:"u",Å­:"u",Ã¼:"u",Çœ:"u",Ç˜:"u",Ç–:"u",Çš:"u",á»§:"u",Å¯:"u",Å±:"u",Ç”:"u",È•:"u",È—:"u",Æ°:"u",á»«:"u",á»©:"u",á»¯:"u",á»­:"u",á»±:"u",á»¥:"u",á¹³:"u",Å³:"u",á¹·:"u",á¹µ:"u",Ê‰:"u","â“¥":"v",ï½–:"v",á¹½:"v",á¹¿:"v",Ê‹:"v",êŸ:"v",ÊŒ:"v",ê¡:"vy","â“¦":"w",ï½—:"w",áº:"w",áºƒ:"w",Åµ:"w",áº‡:"w",áº…:"w",áº˜:"w",áº‰:"w",â±³:"w","â“§":"x",ï½˜:"x",áº‹:"x",áº:"x","â“¨":"y",ï½™:"y",á»³:"y",Ã½:"y",Å·:"y",á»¹:"y",È³:"y",áº:"y",Ã¿:"y",á»·:"y",áº™:"y",á»µ:"y",Æ´:"y",É:"y",á»¿:"y","â“©":"z",ï½š:"z",Åº:"z",áº‘:"z",Å¼:"z",Å¾:"z",áº“:"z",áº•:"z",Æ¶:"z",È¥:"z",É€:"z",â±¬:"z",ê£:"z",Î†:"Î‘",Îˆ:"Î•",Î‰:"Î—",ÎŠ:"Î™",Îª:"Î™",ÎŒ:"ÎŸ",ÎŽ:"Î¥",Î«:"Î¥",Î:"Î©",Î¬:"Î±",Î­:"Îµ",Î®:"Î·",Î¯:"Î¹",ÏŠ:"Î¹",Î:"Î¹",ÏŒ:"Î¿",Ï:"Ï…",Ï‹:"Ï…",Î°:"Ï…",ÏŽ:"Ï‰",Ï‚:"Ïƒ","â€™":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var o=e.id+"-result-";return o+=t.generateChars(4),null!=n.id?o+="-"+n.id.toString():o+="-"+t.generateChars(4),o},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function o(t,e){this.$element=t,this.options=e,o.__super__.constructor.call(this)}return e.Extend(o,t),o.prototype.current=function(t){var e=this;t(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(t){return e.item(n(t))})))},o.prototype.select=function(t){var e=this;if(t.selected=!0,null!=t.element&&"option"===t.element.tagName.toLowerCase())return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var o=[];(t=[t]).push.apply(t,n);for(var i=0;i<t.length;i++){var a=t[i].id;-1===o.indexOf(a)&&o.push(a)}e.$element.val(o),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},o.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,null!=t.element&&"option"===t.element.tagName.toLowerCase())return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var o=[],i=0;i<n.length;i++){var a=n[i].id;a!==t.id&&-1===o.indexOf(a)&&o.push(a)}e.$element.val(o),e.$element.trigger("input").trigger("change")}))}},o.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},o.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},o.prototype.query=function(t,e){var o=[],i=this;this.$element.children().each((function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var e=n(this),a=i.item(e),r=i.matches(t,a);null!==r&&o.push(r)}})),e({results:o})},o.prototype.addOptions=function(t){this.$element.append(t)},o.prototype.option=function(t){var o;t.children?(o=document.createElement("optgroup")).label=t.text:void 0!==(o=document.createElement("option")).textContent?o.textContent=t.text:o.innerText=t.text,void 0!==t.id&&(o.value=t.id),t.disabled&&(o.disabled=!0),t.selected&&(o.selected=!0),t.title&&(o.title=t.title);var i=this._normalizeItem(t);return i.element=o,e.StoreData(o,"data",i),n(o)},o.prototype.item=function(t){var o={};if(null!=(o=e.GetData(t[0],"data")))return o;var i=t[0];if("option"===i.tagName.toLowerCase())o={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if("optgroup"===i.tagName.toLowerCase()){o={text:t.prop("label"),children:[],title:t.prop("title")};for(var a=t.children("option"),r=[],s=0;s<a.length;s++){var c=n(a[s]),l=this.item(c);r.push(l)}o.children=r}return(o=this._normalizeItem(o)).element=t[0],e.StoreData(t[0],"data",o),o},o.prototype._normalizeItem=function(t){t!==Object(t)&&(t={id:t,text:t});return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},o.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},o})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function o(t,e){this._dataToConvert=e.get("data")||[],o.__super__.constructor.call(this,t,e)}return e.Extend(o,t),o.prototype.bind=function(t,e){o.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},o.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),o.__super__.select.call(this,t)},o.prototype.convertToOptions=function(t){var e=this,o=this.$element.find("option"),i=o.map((function(){return e.item(n(this)).id})).get(),a=[];function r(t){return function(){return n(this).val()==t.id}}for(var s=0;s<t.length;s++){var c=this._normalizeItem(t[s]);if(i.indexOf(c.id)>=0){var l=o.filter(r(c)),u=this.item(l),d=n.extend(!0,{},c,u),p=this.option(d);l.replaceWith(p)}else{var m=this.option(c);if(c.children){var f=this.convertToOptions(c.children);m.append(f)}a.push(m)}}return a},o})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function o(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),o.__super__.constructor.call(this,t,e)}return e.Extend(o,t),o.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,o){var i=n.ajax(t);return i.then(e),i.fail(o),i}};return n.extend({},e,t,!0)},o.prototype.processResults=function(t){return t},o.prototype.query=function(t,e){var o=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var i=n.extend({type:"GET"},this.ajaxOptions);function a(){var n=i.transport(i,(function(n){var i=o.processResults(n,t);o.options.get("debug")&&window.console&&console.error&&(i&&i.results&&Array.isArray(i.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(i)}),(function(){(!("status"in n)||0!==n.status&&"0"!==n.status)&&o.trigger("results:message",{message:"errorLoading"})}));o._request=n}"function"==typeof i.url&&(i.url=i.url.call(this.$element,t)),"function"==typeof i.data&&(i.data=i.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(a,this.ajaxOptions.delay)):a()},o})),e.define("select2/data/tags",["jquery"],(function(t){function e(t,e,n){var o=n.get("tags"),i=n.get("createTag");void 0!==i&&(this.createTag=i);var a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),t.call(this,e,n),Array.isArray(o))for(var r=0;r<o.length;r++){var s=o[r],c=this._normalizeItem(s),l=this.option(c);this.$element.append(l)}}return e.prototype.query=function(t,e,n){var o=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(i,a){for(var r=i.results,s=0;s<r.length;s++){var c=r[s],l=null!=c.children&&!t({results:c.children},!0);if((c.text||"").toUpperCase()===(e.term||"").toUpperCase()||l)return!a&&(i.data=r,void n(i))}if(a)return!0;var u=o.createTag(e);if(null!=u){var d=o.option(u);d.attr("data-select2-tag","true"),o.addOptions([d]),o.insertTag(r,u)}i.results=r,n(i)})):t.call(this,e,n)},e.prototype.createTag=function(t,e){if(null==e.term)return null;var n=e.term.trim();return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var o=n.get("tokenizer");void 0!==o&&(this.tokenizer=o),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,o){var i=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,(function(e){var n=i._normalizeItem(e);if(!i.$element.find("option").filter((function(){return t(this).val()===n.id})).length){var o=i.option(n);o.attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([o])}!function(t){i.trigger("select",{data:t})}(n)}));a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.trigger("focus")),n.term=a.term),e.call(this,n,o)},e.prototype.tokenizer=function(e,n,o,i){for(var a=o.get("tokenSeparators")||[],r=n.term,s=0,c=this.createTag||function(t){return{id:t.term,text:t.term}};s<r.length;){var l=r[s];if(-1!==a.indexOf(l)){var u=r.substr(0,s),d=c(t.extend({},n,{term:u}));null!=d?(i(d),r=r.substr(s+1)||"",s=0):s++}else s++}return{term:r}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("select",(function(){o._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,n){var o=this;this._checkIfMaximumSelected((function(){t.call(o,e,n)}))},t.prototype._checkIfMaximumSelected=function(t,e){var n=this;this.current((function(t){var o=null!=t?t.length:0;n.maximumSelectionLength>0&&o>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),o=this.options.get("translations").get("search"),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",o()),n.prepend(i),n},e.prototype.bind=function(e,n,o){var i=this,a=n.id+"-results";e.call(this,n,o),this.$search.on("keydown",(function(t){i.trigger("keypress",t),i._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){i.handleSearch(t)})),n.on("open",(function(){i.$search.attr("tabindex",0),i.$search.attr("aria-controls",a),i.$search.trigger("focus"),window.setTimeout((function(){i.$search.trigger("focus")}),0)})),n.on("close",(function(){i.$search.attr("tabindex",-1),i.$search.removeAttr("aria-controls"),i.$search.removeAttr("aria-activedescendant"),i.$search.val(""),i.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||i.$search.trigger("focus")})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(i.showSearch(t)?i.$searchContainer[0].classList.remove("select2-search--hide"):i.$searchContainer[0].classList.add("select2-search--hide"))})),n.on("results:focus",(function(t){t.data._resultId?i.$search.attr("aria-activedescendant",t.data._resultId):i.$search.removeAttr("aria-activedescendant")}))},e.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.showSearch=function(t,e){return!0},e})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,o){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,o)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),o=e.length-1;o>=0;o--){var i=e[o];this.placeholder.id===i.id&&n.splice(o,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,o){this.lastParams={},t.call(this,e,n,o),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("query",(function(t){o.lastParams=t,o.loading=!0})),e.on("query:append",(function(t){o.lastParams=t,o.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(e,n,o){this.$dropdownParent=t(o.get("dropdownParent")||document.body),e.call(this,n,o)}return n.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("open",(function(){o._showDropdown(),o._attachPositioningHandler(e),o._bindContainerResultHandlers(e)})),e.on("close",(function(){o._hideDropdown(),o._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e[0].classList.remove("select2"),e[0].classList.add("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),o=e.call(this);return n.append(o),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var n=this;e.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,o){var i=this,a="scroll.select2."+o.id,r="resize.select2."+o.id,s="orientationchange.select2."+o.id,c=this.$container.parents().filter(e.hasScroll);c.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),c.on(a,(function(n){var o=e.GetData(this,"select2-scroll-position");t(this).scrollTop(o.y)})),t(window).on(a+" "+r+" "+s,(function(t){i._positionDropdown(),i._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,o){var i="scroll.select2."+o.id,a="resize.select2."+o.id,r="orientationchange.select2."+o.id;this.$container.parents().filter(e.hasScroll).off(i),t(window).off(i+" "+a+" "+r)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown[0].classList.contains("select2-dropdown--above"),o=this.$dropdown[0].classList.contains("select2-dropdown--below"),i=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=a.top,r.bottom=a.top+r.height;var s=this.$dropdown.outerHeight(!1),c=e.scrollTop(),l=e.scrollTop()+e.height(),u=c<a.top-s,d=l>a.bottom+s,p={left:a.left,top:r.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var f={top:0,left:0};(t.contains(document.body,m[0])||m[0].isConnected)&&(f=m.offset()),p.top-=f.top,p.left-=f.left,n||o||(i="below"),d||!u||n?!u&&d&&n&&(i="below"):i="above",("above"==i||n&&"below"!==i)&&(p.top=r.top-f.top-s),null!=i&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+i),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+i)),this.$dropdownContainer.css(p)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var n=0,o=0;o<e.length;o++){var i=e[o];i.children?n+=t(i.children):n++}return n}function e(t,e,n,o){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,o)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("close",(function(t){o._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,n){if(n&&null!=n.originalSelect2Event){var o=n.originalSelect2Event;if("select"===o._type||"unselect"===o._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var a=t.GetData(i[0],"data");null!=a.element&&a.element.selected||null==a.element&&a.selected||this.trigger("select",{data:a})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var o=this;t.call(this,e,n),e.on("select",(function(t){o._selectTriggered(t)})),e.on("unselect",(function(t){o._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t})),e.define("select2/dropdown/dropdownCss",["../utils"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),o=this.options.get("dropdownCssClass")||"";return-1!==o.indexOf(":all:")&&(o=o.replace(":all:",""),t.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(o),n},e})),e.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(t){function e(){}return e.prototype.highlightFirstItem=function(e){var n=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(n.length>0){var o=n.first(),i=t.GetData(o[0],"data").element;if(i&&i.getAttribute&&"true"===i.getAttribute("data-select2-tag"))return void o.trigger("mouseenter")}e.call(this)},e})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more resultsâ€¦"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searchingâ€¦"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),e.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(t,e,n,o,i,a,r,s,c,l,u,d,p,m,f,h,g,y,v,_,b,w,A,k,C,T,U,E,x,M,D){function S(){this.reset()}return S.prototype.apply=function(u){if(null==(u=t.extend(!0,{},this.defaults,u)).dataAdapter&&(null!=u.ajax?u.dataAdapter=f:null!=u.data?u.dataAdapter=m:u.dataAdapter=p,u.minimumInputLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,y)),u.maximumInputLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,v)),u.maximumSelectionLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,_)),u.tags&&(u.dataAdapter=l.Decorate(u.dataAdapter,h)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=l.Decorate(u.dataAdapter,g))),null==u.resultsAdapter&&(u.resultsAdapter=e,null!=u.ajax&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,k)),null!=u.placeholder&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,A)),u.selectOnClose&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,U)),u.tags&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,M))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=b;else{var d=l.Decorate(b,w);u.dropdownAdapter=d}0!==u.minimumResultsForSearch&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,T)),u.closeOnSelect&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,E)),null!=u.dropdownCssClass&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,x)),u.dropdownAdapter=l.Decorate(u.dropdownAdapter,C)}null==u.selectionAdapter&&(u.multiple?u.selectionAdapter=o:u.selectionAdapter=n,null!=u.placeholder&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,i)),u.allowClear&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,a)),u.multiple&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,r)),null!=u.selectionCssClass&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,s)),u.selectionAdapter=l.Decorate(u.selectionAdapter,c)),u.language=this._resolveLanguage(u.language),u.language.push("en");for(var D=[],S=0;S<u.language.length;S++){var I=u.language[S];-1===D.indexOf(I)&&D.push(I)}return u.language=D,u.translations=this._processTranslations(u.language,u.debug),u},S.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return d[t]||t}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:l.escapeMarkup,language:{},matcher:function n(o,i){if(null==o.term||""===o.term.trim())return i;if(i.children&&i.children.length>0){for(var a=t.extend(!0,{},i),r=i.children.length-1;r>=0;r--)null==n(o,i.children[r])&&a.children.splice(r,1);return a.children.length>0?a:n(o,a)}var s=e(i.text).toUpperCase(),c=e(o.term).toUpperCase();return s.indexOf(c)>-1?i:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},S.prototype.applyFromElement=function(t,e){var n=t.language,o=this.defaults.language,i=e.prop("lang"),a=e.closest("[lang]").prop("lang"),r=Array.prototype.concat.call(this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(o),this._resolveLanguage(a));return t.language=r,t},S.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var n;n=Array.isArray(e)?e:[e];for(var o=[],i=0;i<n.length;i++)if(o.push(n[i]),"string"==typeof n[i]&&n[i].indexOf("-")>0){var a=n[i].split("-")[0];o.push(a)}return o},S.prototype._processTranslations=function(e,n){for(var o=new u,i=0;i<e.length;i++){var a=new u,r=e[i];if("string"==typeof r)try{a=u.loadPath(r)}catch(t){try{r=this.defaults.amdLanguageBase+r,a=u.loadPath(r)}catch(t){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else a=t.isPlainObject(r)?new u(r):r;o.extend(a)}return o},S.prototype.set=function(e,n){var o={};o[t.camelCase(e)]=n;var i=l._convertData(o);t.extend(!0,this.defaults,i)},new S})),e.define("select2/options",["jquery","./defaults","./utils"],(function(t,e,n){function o(t,n){this.options=t,null!=n&&this.fromElement(n),null!=n&&(this.options=e.applyFromElement(this.options,n)),this.options=e.apply(this.options)}return o.prototype.fromElement=function(e){var o=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),n.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(e[0],"data",n.GetData(e[0],"select2Tags")),n.StoreData(e[0],"tags",!0)),n.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",n.GetData(e[0],"ajaxUrl")),n.StoreData(e[0],"ajax-Url",n.GetData(e[0],"ajaxUrl")));var i={};function a(t,e){return e.toUpperCase()}for(var r=0;r<e[0].attributes.length;r++){var s=e[0].attributes[r].name,c="data-";if(s.substr(0,c.length)==c){var l=s.substring(c.length),u=n.GetData(e[0],l);i[l.replace(/-([a-z])/g,a)]=u}}t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset&&(i=t.extend(!0,{},e[0].dataset,i));var d=t.extend(!0,{},n.GetData(e[0]),i);for(var p in d=n._convertData(d))o.indexOf(p)>-1||(t.isPlainObject(this.options[p])?t.extend(this.options[p],d[p]):this.options[p]=d[p]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,o){var i=function(t,o){null!=n.GetData(t[0],"select2")&&n.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),o=o||{},this.options=new e(o,t),i.__super__.constructor.call(this);var a=t.attr("tabindex")||0;n.StoreData(t[0],"old-tabindex",a),t.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(t,this.options);var s=this.render();this._placeContainer(s);var c=this.options.get("selectionAdapter");this.selection=new c(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var u=this.options.get("resultsAdapter");this.results=new u(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){d.trigger("selection:update",{data:t})})),t[0].classList.add("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(t[0],"select2",this),t.data("select2",this)};return n.Extend(i,n.Observable),i.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},i.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},i.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var o=this._resolveWidth(t,"style");return null!=o?o:this._resolveWidth(t,"element")}if("element"==e){var i=t.outerWidth(!1);return i<=0?"auto":i+"px"}if("style"==e){var a=t.attr("style");if("string"!=typeof a)return null;for(var r=a.split(";"),s=0,c=r.length;s<c;s+=1){var l=r[s].replace(/\s/g,"").match(n);if(null!==l&&l.length>=1)return l[1]}return null}return"computedstyle"==e?window.getComputedStyle(t[0]).width:e},i.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},i.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(e){t._syncA(),t._syncS(e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},i.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},i.prototype._registerSelectionEvents=function(){var t=this,e=["toggle","focus"];this.selection.on("toggle",(function(){t.toggleDropdown()})),this.selection.on("focus",(function(e){t.focus(e)})),this.selection.on("*",(function(n,o){-1===e.indexOf(n)&&t.trigger(n,o)}))},i.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},i.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},i.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){t.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){t.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){t.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){t.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===o.ESC||n===o.UP&&e.altKey?(t.close(e),e.preventDefault()):n===o.ENTER||n===o.TAB?(t.trigger("results:select",{}),e.preventDefault()):n===o.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===o.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===o.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===o.ENTER||n===o.SPACE||n===o.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},i.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},i.prototype._isChangeMutation=function(t){var e=this;if(t.addedNodes&&t.addedNodes.length>0){for(var n=0;n<t.addedNodes.length;n++)if(t.addedNodes[n].selected)return!0}else{if(t.removedNodes&&t.removedNodes.length>0)return!0;if(Array.isArray(t))return t.some((function(t){return e._isChangeMutation(t)}))}return!1},i.prototype._syncSubtree=function(t){var e=this._isChangeMutation(t),n=this;e&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},i.prototype.trigger=function(t,e){var n=i.__super__.trigger,o={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in o){var a=o[t],r={prevented:!1,name:t,args:e};if(n.call(this,a,r),r.prevented)return void(e.prevented=!0)}n.call(this,t,e)},i.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},i.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},i.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},i.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},i.prototype.focus=function(t){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},i.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},i.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},i.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var e=t[0];Array.isArray(e)&&(e=e.map((function(t){return t.toString()}))),this.$element.val(e).trigger("input").trigger("change")},i.prototype.destroy=function(){n.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},i.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),n.StoreData(e[0],"element",this.$element),e},i})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,n,o,i){if(null==t.fn.select2){var a=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var o=t.extend(!0,{},e);new n(t(this),o)})),this;if("string"==typeof e){var o,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=i.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),o=t[e].apply(t,r)})),a.indexOf(e)>-1?this:o}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=o),n})),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}.apply(e,o))||(t.exports=i)},975:(t,e,n)=>{var o;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(t){return s(l(t),arguments)}function r(t,e){return a.apply(null,[t].concat(e||[]))}function s(t,e){var n,o,r,s,c,l,u,d,p,m=1,f=t.length,h="";for(o=0;o<f;o++)if("string"==typeof t[o])h+=t[o];else if("object"==typeof t[o]){if((s=t[o]).keys)for(n=e[m],r=0;r<s.keys.length;r++){if(null==n)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[r],s.keys[r-1]));n=n[s.keys[r]]}else n=s.param_no?e[s.param_no]:e[m++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),i.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(a("[sprintf] expecting number but found %T",n));switch(i.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?h+=n:(!i.number.test(s.type)||d&&!s.sign?p="":(p=d?"+":"-",n=n.toString().replace(i.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(p+n).length,c=s.width&&u>0?l.repeat(u):"",h+=s.align?p+n+c:"0"===l?p+c+n:c+p+n)}return h}var c=Object.create(null);function l(t){if(c[t])return c[t];for(var e,n=t,o=[],a=0;n;){if(null!==(e=i.text.exec(n)))o.push(e[0]);else if(null!==(e=i.modulo.exec(n)))o.push("%");else{if(null===(e=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){a|=1;var r=[],s=e[2],l=[];if(null===(l=i.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r.push(l[1]);""!==(s=s.substring(l[0].length));)if(null!==(l=i.key_access.exec(s)))r.push(l[1]);else{if(null===(l=i.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(l[1])}e[2]=r}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}n=n.substring(e[0].length)}return c[t]=o}e.sprintf=a,e.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=r,void 0===(o=function(){return{sprintf:a,vsprintf:r}}.call(e,n,e,t))||(t.exports=o))}()},311:t=>{"use strict";t.exports=jQuery}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(311),e=__webpack_require__.n(t),n=__webpack_require__(693),o=__webpack_require__(838),i=__webpack_require__(973),a=__webpack_require__(171);function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.render()}var o,i;return o=t,(i=[{key:"render",value:function(){var t=e()('\n\t\t\t<div class="uap-report-bug">\n\t\t\t\t<a\n\t\t\t\t\tclass="uap-report-bug__btn"\n\n\t\t\t\t\tuap-tooltip="'.concat(UncannyAutomator.i18n.sendFeedback.title,'"\n\t\t\t\t\tuap-tooltip-flow="left"\n\n\t\t\t\t\ttarget="_blank"\n\t\t\t\t\thref="').concat((0,n.hl)("https://automatorplugin.com/feedback/",this.utmBtnParameters),'"\n\t\t\t\t>\n\t\t\t\t\t<span class="uap-report-bug__icon"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'));e()("body").append(t)}},{key:"utmBtnParameters",get:function(){var t,e;return(0,n.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp?(t="Uncanny Automator Pro ".concat(UncannyAutomator.version),e="uncanny_automator_pro"):(t="Uncanny Automator ".concat(UncannyAutomator.version),e="uncanny_automator"),{version:t,utm_source:e,utm_medium:"send_feedback",utm_content:"bulb_icon"}}}])&&r(o.prototype,i),t}();function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}__webpack_require__(347);var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listenField()}var e,o;return e=t,(o=[{key:"listenField",value:function(){var t=this;this.$field.addEventListener("input",(0,n.Ds)((function(){t.saveTitle()}),1500))}},{key:"saveTitle",value:function(){var t=this;this.$wrapper.classList.add("uap-title--loading"),(0,n.L8)("change_post_title",{post_ID:UncannyAutomator.recipe.id,post_title:this.title},(function(e){t.$wrapper.classList.remove("uap-title--loading"),t.$wrapper.classList.add("uap-title--success"),setTimeout((function(){t.$wrapper.classList.remove("uap-title--success")}),3e3)}),(function(){t.$wrapper.classList.remove("uap-title--loading"),UncannyAutomator.dev.developerMode&&console.error("Couldn't save the title")}),{requiresRecipesObject:!1})}},{key:"title",get:function(){return this.$field.value}},{key:"$wrapper",get:function(){return document.getElementById("titlewrap")}},{key:"$field",get:function(){return document.getElementById("title")}}])&&c(e.prototype,o),t}();function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasMetabox&&this.listenCheckboxes()}var o,i;return o=t,i=[{key:"$container",get:function(){return e()("#recipe_categorydiv")}},{key:"$allCategoriesList",get:function(){return e()("#recipe_categorychecklist")}},{key:"hasMetabox",get:function(){return(0,n.$K)(this.$allCategoriesList)}},{key:"listenCheckboxes",value:function(){var t=this;this.$container.on("change",'input[type="checkbox"][name="tax_input[recipe_category][]"], .popular-category input[type="checkbox"]',(function(n){var o=e()(n.currentTarget);t.saveCategory(o)})),new MutationObserver((function(n){n.forEach((function(n){n.addedNodes.forEach((function(n){var o=e()(n).find('input[type="checkbox"][name="tax_input[recipe_category][]"]');t.saveCategory(o)}))}))})).observe(this.$allCategoriesList[0],{childList:!0})}},{key:"saveCategory",value:function(t){var e=this,o={id:t.val(),isChecked:t.is(":checked")};this.setStatus("loading",!0,t),(0,n.L8)("set_recipe_terms",{term_id:"recipe_category",recipe_id:UncannyAutomator.recipe.id,category_id:o.id,set_category:o.isChecked},(function(n){n.success?(e.setStatus("success",!0,t),setTimeout((function(){e.setStatus("success",!1,t)}),2e3)):(UncannyAutomator.dev.developerMode&&console.error("Couldn't change the status of the recipe category"),e.revertCheckboxValue(t),e.setStatus("error",!0,t),setTimeout((function(){e.setStatus("error",!1,t)}))),e.setStatus("loading",!1,t)}),(function(){e.revertCheckboxValue(t),e.setStatus("loading",!1,t),e.setStatus("error",!0,t),setTimeout((function(){e.setStatus("error",!1,t)}))}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"revertCheckboxValue",value:function(t){t.prop("checked",!t.is(":checked"))}},{key:"setStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,o=n.closest(".selectit");"loading"==t?e?(o.addClass("uap-taxonomy-loading"),n.prop("disabled",!0)):(o.removeClass("uap-taxonomy-loading"),n.prop("disabled",!1)):"success"==t?e?o.addClass("uap-taxonomy-success"):o.removeClass("uap-taxonomy-success"):"error"==t&&(e?o.addClass("uap-taxonomy-error"):o.removeClass("uap-taxonomy-error"))}}],i&&u(o.prototype,i),t}();function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getElements(),1==this.$elements.tagsTextarea.length&&this.listenModificationsToTags()}var o,i;return o=t,i=[{key:"getElements",value:function(){this.$elements={container:e()("#tagsdiv-recipe_tag"),tagsTextarea:e()("textarea#tax-input-recipe_tag"),tagsList:e()("#tagsdiv-recipe_tag .tagchecklist")}}},{key:"listenModificationsToTags",value:function(){var t=this;new MutationObserver((function(e){t.saveTags()})).observe(this.$elements.tagsList[0],{childList:!0})}},{key:"saveTags",value:function(){var t=this,e=this.getTags();this.setStatus("loading",!0),(0,n.L8)("set_recipe_terms",{term_id:"recipe_tag",recipe_id:UncannyAutomator.recipe.id,tags:e},(function(e){e.success?(t.setStatus("success",!0),setTimeout((function(){t.setStatus("success",!1)}),2e3)):(0,n.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:vsprintf(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat((0,n.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")]),content:"",console:"Data sent:\n ".concat(JSON.stringify(e)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}}),t.setStatus("loading",!1)}),(function(t){(0,n.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:vsprintf(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat((0,n.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")]),content:"",console:"Data sent:\n ".concat(JSON.stringify(t)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"setStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"loading"==t?e?this.$elements.container.addClass("uap-tags-loading"):this.$elements.container.removeClass("uap-tags-loading"):"success"==t?e?this.$elements.container.addClass("uap-tags-success"):this.$elements.container.removeClass("uap-tags-success"):"error"==t&&(e?this.$elements.container.addClass("uap-tags-error"):this.$elements.container.removeClass("uap-tags-error"))}},{key:"getTags",value:function(){var t=this.$elements.tagsTextarea.val();return{asArray:t.split(","),commaSeparated:t}}}],i&&p(o.prototype,i),t}(),f=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new d,new m};UncannyAutomator.cache={tokens:{}};try{(0,n.iK)((function(){(0,n.Dh)("Render the UI",!1,{bgColor:"#579f49"}),new i.Z,new a.Z,new o.Z,new s,new l,new f}))}catch(t){(0,n.C2)({title:UncannyAutomator.i18n.debugging.uiCantLoad.title,warning:UncannyAutomator.i18n.debugging.uiCantLoad.warning,content:UncannyAutomator.i18n.debugging.uiCantLoad.content,console:t})}jQuery(document).ready((function(){jQuery(window).off("beforeunload.edit-post",null)}))})()})();
//# sourceMappingURL=bundle.min.js.map