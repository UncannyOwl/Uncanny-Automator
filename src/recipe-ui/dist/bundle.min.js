/*! For license information please see bundle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={235:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(756);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";a(this,e),this.content=t}var t,n;return t=e,n=[{key:"getHTML",value:function(){var e=(0,o.r)(this.content);return e=this.parseItalicsAndBold(e),this.parseAnchors(e)}},{key:"parseItalicsAndBold",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={doubleUnderscores:/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,singleUnderscores:/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,doubleAsterisks:/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,singleAsterisks:/(\*)(?=\S)([^\r]*?\S)\1/g};return(e=(e=(e=e.replace(t.doubleUnderscores,"$1<strong>$2</strong>")).replace(t.singleUnderscores,"$1<em>$2</em>")).replace(t.doubleAsterisks,"<strong>$2</strong>")).replace(t.singleAsterisks,"<em>$2</em>")}},{key:"parseAnchors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n=function(e,t,n,a,i,r,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(e=t,a=a.toLowerCase(),!i){if(a||(a=n.toLowerCase().replace(/ ?\n/g," ")),i="#".concat(a),!(e.search(/\(\s*\)$/m)>-1))return e;i=""}i=encodeURI(i,"*_",!1),(0,o.xb)(l)?l="":(l=l.replace(/"/g,"&quot;"),l=encodeURI(l,"*_",!1),l=' title="'.concat(l,'"'));var c='\n\t\t\t\t<a href="'.concat(i,'" target="_blank" ').concat(l,">\n\t\t\t\t\t").concat(n,"\n\t\t\t\t</a>\n\t\t\t");return c};return e.replace(t,n)}}],n&&i(t.prototype,n),e}()},772:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(311),a=n.n(o),i=n(756);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,e),this.elements={container:null,automatorContainer:null,modal:{container:null,box:{container:null,title:null,warning:null,buttons:{container:null,cancel:null,confirm:null}}}},this.elements.container=a()("body"),this.isVisible=!1,this.config=a().extend(!0,{fadeDuration:150,size:"medium",warningFirst:!1,customClass:"",allowContentOverflow:!1},n),this.content=a().extend({},{buttons:{cancel:UncannyAutomator.i18n.cancel}},t),this.create(),this}var t,n;return t=e,n=[{key:"create",value:function(){var e,t,n=a()("<div/>",{class:"uap"}),o=a()("<div/>",{class:"modal"}),r=a()("<div/>",{class:"modal__box"});if((0,i.$K)(this.config.size)&&["small","medium","large","extra-large"].includes(this.config.size)&&o.addClass("modal--".concat(this.config.size)),this.config.allowContentOverflow&&o.addClass("modal--allow-content-overflow"),(0,i.$K)(this.config.customClass)&&o.addClass("modal--".concat(this.config.customClass)),this.elements.automatorContainer=n,this.elements.modal.container=o,this.elements.modal.box.container=r,(0,i.$K)(this.content.title)){var s=a()("<div/>",{class:"modal__title"}).html(this.content.title);r.append(s),this.elements.modal.box.title=s}if((0,i.$K)(this.content.content)){e=a()("<div/>",{class:"modal__content"});try{e.append(this.content.content)}catch(t){e.html(this.content.content)}r.append(e),this.elements.modal.box.content=e}(0,i.$K)(this.content.warning)&&(t=a()("<div/>",{class:"modal__warning"}).html(this.content.warning),this.elements.modal.box.warning=t),(0,i.$K)(this.config.warningFirst)&&this.config.warningFirst?((0,i.$K)(this.content.warning)&&r.append(t),(0,i.$K)(this.content.content)&&r.append(e)):((0,i.$K)(this.content.content)&&r.append(e),(0,i.$K)(this.content.warning)&&r.append(t));var l=a()("<div/>",{class:"modal__buttons"}),c=a()("<button/>",{class:"uap-btn uap-btn--secondary"}).html(this.content.buttons.cancel);if(l.append(c),this.elements.modal.box.buttons.container=l,this.elements.modal.box.buttons.cancel=c,(0,i.$K)(this.content.buttons.confirm)){var u=a()("<button/>",{class:"uap-btn uap-btn--primary"}).html(this.content.buttons.confirm);l.append(u),this.elements.modal.box.buttons.confirm=u}r.append(l),o.append(r),n.append(o),this.elements.container.append(n),a()("html").addClass("automator-modal-open"),this.bind()}},{key:"setEvents",value:function(e){var t=this;this.events={afterSetEvents:(0,i.$K)(e.afterSetEvents)?e.afterSetEvents:function(){},afterShow:(0,i.$K)(e.afterShow)?e.afterShow:function(){},afterHide:(0,i.$K)(e.afterHide)?e.afterHide:function(){},onConfirm:(0,i.$K)(e.onConfirm)?e.onConfirm:function(){},onCancel:(0,i.$K)(e.onCancel)?e.onCancel:function(){}},(0,i.$K)(e.onCancel)||(this.events.onCancel=function(){t.hide()}),this.events.afterSetEvents()}},{key:"destroy",value:function(){var e=this;this.unbind(),this.isVisible?this.hide((function(){e.elements.automatorContainer.remove()})):e.elements.automatorContainer.remove(),a()("html").removeClass("automator-modal-open")}},{key:"bind",value:function(){var e=this;(0,i.$K)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.on("click",(function(){e.events.onCancel()})),(0,i.$K)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.on("click",(function(){e.events.onConfirm()}))}},{key:"unbind",value:function(){(0,i.$K)(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.unbind("click"),(0,i.$K)(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.unbind("click")}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;e=(0,i.$K)(e)?e:this.events.afterShow,this.isVisible=!0,this.elements.modal.container.fadeIn(t.config.fadeDuration,e)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=(0,i.$K)(e)?e:this.events.afterHide,this.isVisible=!1,this.elements.modal.container.fadeOut(this.config.fadeDuration,e),a()("html").removeClass("automator-modal-open")}},{key:"getElements",value:function(){return this.elements}}],n&&s(t.prototype,n),e}()},756:(e,t,n)=>{"use strict";n.d(t,{bN:()=>S,hl:()=>ee,XE:()=>ue,A5:()=>q,Dh:()=>z,vQ:()=>ie,iK:()=>b,Ds:()=>ae,r:()=>J,IL:()=>U,p5:()=>le,PT:()=>se,q7:()=>O,M0:()=>P,rz:()=>I,ew:()=>F,Vx:()=>$,Y6:()=>R,eU:()=>T,Tb:()=>te,Ki:()=>Q,C2:()=>re,d3:()=>H,$K:()=>K,xb:()=>N,Kn:()=>Z,HD:()=>W,Wr:()=>A,Lc:()=>j,YQ:()=>ce,qh:()=>V,Tm:()=>w,R$:()=>L,hF:()=>Y,L8:()=>D,yv:()=>C,gy:()=>M,P2:()=>oe,Cn:()=>x});var o=n(311),a=n.n(o),i=n(605);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const s=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setAttributes(t),this.createFields()}var t,n;return t=e,n=[{key:"setAttributes",value:function(e){K(e.hasLabel)||(N(e.label)?e.hasLabel=!1:e.hasLabel=!0),K(e.hasDescription)||(N(e.description)?e.hasDescription=!1:e.hasDescription=!0),this.attributes=e}},{key:"createFields",value:function(){this.fields=this.attributes.fields.map((function(e){return new i.Z(e.fieldType,e)}))}},{key:"createFormElement",value:function(){var e=a()('<div class="form-group"></div>');if(this.attributes.hasLabel){var t=a()('<div class="form-group__label">'.concat(this.attributes.label,"</div>"));e.append(t)}var n=a()('<div class="form-group__fields"></div>');if(this.fields.forEach((function(e){var t=e.createFormElement();n.append(t)})),e.append(n),this.attributes.hasLabel){var o=a()('<div class="form-group__description">'.concat(this.attributes.description,"</div>"));e.append(o)}return this.formElement=e,e}},{key:"getValue",value:function(){var e={};return this.fields.forEach((function(t){e[t.getFieldID()]=t.getValue()})),e}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isValid:!0,message:""};return this.fields.forEach((function(n){t[n.getFieldID()]=n.validate(e),t.isValid=t.isValid&&t[n.getFieldID()].isValid})),t}}],n&&r(t.prototype,n),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=n(771),u=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.setAttributes(t),this.createFields()}var t,n;return t=e,n=[{key:"setAttributes",value:function(e){K(e.hasLabel)||(N(e.label)?e.hasLabel=!1:e.hasLabel=!0),K(e.hasDescription)||(N(e.description)?e.hasDescription=!1:e.hasDescription=!0),this.attributes=e}},{key:"createFields",value:function(){var e=this.attributes.fields,t=[];if(Array.isArray(this.attributes.currentValue)&&this.attributes.currentValue.length>0)this.attributes.currentValue.forEach((function(n){var o=JSON.parse(JSON.stringify(e));o=o.map((function(e){return K(n[e.optionCode])?e.currentValue=n[e.optionCode]:e.currentValue="",e})),t.push(o)}));else if(this.attributes.isRequired){var n=JSON.parse(JSON.stringify(e));n.currentValue="",t.push(n)}t=t.map((function(e){return e.map((function(e){return e.label="",e.description="",new i.Z(e.fieldType,e)}))})),this.fieldRows=t}},{key:"createFormElement",value:function(){var e,t=a()('<div class="form-repeater"></div>');if(this.attributes.hasLabel){var n=a()('\n\t\t\t\t<div class="form-repeater__label">\n\t\t\t\t\t'.concat(this.attributes.label,"\n\t\t\t\t\t").concat(this.attributes.isRequired?'<span class="form-repeater__label-required"></span>':"","\n\t\t\t\t</div>\n\t\t\t"));t.append(n)}var o=this.getFieldsTable();if(t.append(o),o.append(a()('<div class="form-element__error"></div>')),this.attributes.hasDescription){var i=a()('<div class="form-repeater__description">'.concat(this.attributes.description,"</div>"));t.append(i)}return this.formElement=t,e=t,this.fieldRows.length>1&&this.makeRowsSortable(),this.listenSave(),e}},{key:"listenSave",value:function(){var e=this;this.formElement.on("saved",(function(t){e.updateAttributesFieldsFromRow()}))}},{key:"updateAttributesFieldsFromRow",value:function(){var e=[];this.fieldRows.forEach((function(t){var n=[];t.forEach((function(e){n.push(e.attributes)})),e.push(n)})),this.attributes.fields=e}},{key:"makeRowsSortable",value:function(){var e=this;c(this.formElement.find(".form-repeater-fields__table-rows"),{forcePlaceholderSize:!0,handle:".form-repeater-fields__table-rows-cell--number",placeholder:'<tr><td colspan="'.concat(this.fieldRows[0].length+2,'">&nbsp;</td></tr>'),itemSerializer:function(e,t){return{position:e.index,html:e.html}}}),this.formElement.find(".form-repeater-fields__table-rows").on("sortupdate",(function(t){var n=[];a().each(t.detail.destination.items,(function(e,t){n.push(a()(t).data("order"))}));var o=[];n.forEach((function(t){o.push(e.fieldRows[t])})),e.fieldRows=o,e.reRender()}))}},{key:"getFieldsTable",value:function(){var e=this,t=a()('\n\t\t\t<div class="form-repeater-fields">\n\t\t\t\t<table class="form-repeater-fields__table">\n\t\t\t\t\t<thead class="form-repeater-fields__table-heading"></thead>\n\t\t\t\t\t<tbody class="form-repeater-fields__table-rows"></tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class="form-repeater-fields__actions"></div>\n\t\t\t</div>\n\t\t'),n=[];this.attributes.fields.forEach((function(e){var t=K(e.label)?e.label:"",o=!!K(e.isRequired)&&e.isRequired,a=K(e.description)?e.description:"";n.push({title:t,description:a,isRequired:o})}));var o=a()("<tr></tr>");o.append(a()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--number">#</th>')),n.forEach((function(e){var t=a()('<th class="form-repeater-fields__table-heading-cell"></th>');N(e.title)||t.append(a()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-title">\n\t\t\t\t\t\t'.concat(e.title,"\n\t\t\t\t\t\t").concat(e.isRequired?'<span class="form-repeater-fields__table-heading-cell-required"></span>':"","\n\t\t\t\t\t</div>\n\t\t\t\t"))),N(e.description)||t.append(a()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-description">\n\t\t\t\t\t\t'.concat(e.description,"\n\t\t\t\t\t</div>\n\t\t\t\t"))),o.append(t)})),o.append(a()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--actions"></th>')),t.find(".form-repeater-fields__table-heading").append(o);var i=t.find(".form-repeater-fields__table-rows"),r=this.fieldRows.length;if(this.fieldRows.forEach((function(t,n){var o=a()('<tr data-order="'.concat(n,'"></tr>'));o.append(a()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--number">'.concat(n+1,"</td>"))),t.forEach((function(e){var t=a()('<td class="form-repeater-fields__table-rows-cell"></td>'),n=e.getFormElement();e.initLibraries(),t.append(n),o.append(t)}));var s=a()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--actions"></td>');o.append(s);var l=e.getAttributes();if(0!=n||0==n&&(!e.attributes.isRequired||r>1)){var c=K(e.attributes.removeRowButtonLabel)?e.attributes.removeRowButtonLabel:UncannyAutomator.i18n.removeRow,u=a()('<div class="form-repeater-fields__table-rows-cell-remove" uap-tooltip="'.concat(c,'"><span></span></div>'));u.on("click",(function(){e.deleteRow(n)})),l.hideActions||s.append(u)}i.append(o)})),!this.getAttributes().hideActions){var s=a()('\n\t\t\t\t<div class="uap-btn uap-btn--primary uap-btn--small">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.addRow,"\n\t\t\t\t</div>\n\t\t\t"));K(this.attributes.addRowButtonLabel)&&s.text(this.attributes.addRowButtonLabel),s.on("click",(function(){s.addClass("uap-btn--loading"),e.addRow()})),t.find(".form-repeater-fields__actions").append(s)}return t}},{key:"getValue",value:function(){var e=[];return this.fieldRows.forEach((function(t){var n={};t.forEach((function(e){n[e.getFieldID()]=e.getValue()})),e.push(n)})),e}},{key:"addRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JSON.parse(JSON.stringify(this.attributes.fields));n.currentValue="",n=n.map((function(t){return t.label="",t.description="",K(e[t.optionCode])&&(t.currentValue=e[t.optionCode]),new i.Z(t.fieldType,t)})),this.fieldRows.push(n),t&&this.reRender(!0)}},{key:"reRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyCodeMirror(),this.destroyTokenSelector();var t=this.formElement,n=this.createFormElement(!1);if(t.replaceWith(n),this.initTokenSelector(),this.initCodeMirror(),e){var o=this.fieldRows[this.fieldRows.length-1];if(K(o)){var a=o[0];K(a)&&a.focus()}}}},{key:"deleteRow",value:function(e){K(this.fieldRows[e])&&this.fieldRows.splice(e,1),this.formElement.replaceWith(this.createFormElement())}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"validate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={isValid:!0,message:""},n=[];return this.fieldRows.forEach((function(o){var a={};o.forEach((function(n){a[n.getFieldID()]=n.validate(e),t.isValid=t.isValid&&a[n.getFieldID()].isValid})),n.push(a)})),t}},{key:"initTokenSelector",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.initTokenSelector()}))}))}},{key:"destroyTokenSelector",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.destroyTokenSelector()}))}))}},{key:"initCodeMirror",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.initCodeMirror()}))}))}},{key:"destroyCodeMirror",value:function(){this.fieldRows.forEach((function(e){e.forEach((function(e){e.destroyCodeMirror()}))}))}}],n&&l(t.prototype,n),e}();const d=u;var p=n(347),m=n(463),f=n(772),h="undefined"==typeof arguments?void 0:arguments;function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var _=n(975).vsprintf,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";UncannyAutomator.dev.developerMode&&z("Start creating the main object"),e=N(e)?function(){}:e;var t=function(){E(),k(),w("create",{allRecipes:UncannyAutomator.recipes_object}),delete UncannyAutomator.triggers,delete UncannyAutomator.actions,UncannyAutomator.dev.developerMode&&z("Ended creating the main object"),e()};N(UncannyAutomator.recipe.type)?new p.Z((function(){t()})):t()},w=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!1,r=["create","validate"];if(K(t)&&H(t,r))switch(t){case"create":var l=["allRecipes"];if(H(l,Object.keys(n))){var c,u=n.allRecipes;a().each(u,(function(e,t){t.ID==UncannyAutomator.recipe.id&&(c=t)})),K(c.extra_options)&&!N(c.extra_options)&&(UncannyAutomator.recipes_object[c.ID].extra_options=c.extra_options),a().each(c.triggers,(function(e,t){return t.itemType="trigger"})),a().each(c.actions,(function(e,t){return t.itemType="action"})),a().each(c.closures,(function(e,t){return t.itemType="closure"}));var p=[].concat.apply([],[c.triggers,c.actions,c.closures]);A("reset");var m="anonymous"==UncannyAutomator.recipe.type;if(a().each(p,(function(e,t){var n,o,r=t.meta.integration,l=t.meta.code;try{o=UncannyAutomator.recipes_object[c.ID].extra_options[r][l]}catch(e){}var u=$(r,t.itemType,l);if(K(u)){var p={};N(o)?(K(u.options)&&a().each(u.options,(function(e,t){p[t.option_code]=[t]})),K(u.options_group)&&a().extend(!0,p,u.options_group)):(K(o.options)&&a().each(o.options,(function(e,t){p[t.option_code]=[t]})),K(o.options_group)&&a().extend(!0,p,o.options_group));var f={};a().each(p,(function(e,n){var o=[],r=n.length>1;a().each(n,(function(n,a){var l,c,p=function(n){var o={isGroup:r,itemId:t.ID,itemType:t.itemType,isRequired:!!K(n.required)&&n.required,isReadOnly:!!K(n.read_only)&&n.read_only,supportsTinyMCE:!!K(n.supports_tinymce)&&n.supports_tinymce,supportsCopyToClipboard:!!K(n.copy_to_clipboard)&&n.copy_to_clipboard,isAjax:!!K(n.is_ajax)&&n.is_ajax,groupId:e,optionCode:n.option_code,fieldType:n.input_type,label:n.label,description:n.description,placeholder:n.placeholder,isHidden:!!K(n.is_hidden)&&n.is_hidden,tokenName:K(n.token_name)?n.token_name:n.label,defaultValue:n.default_value,currentValue:K(t.meta[n.option_code])?t.meta[n.option_code]:n.default_value,customFieldTokens:!!K(n.relevant_tokens)&&n.relevant_tokens,relevantTokens:!!K(n.relevant_tokens)&&n.relevant_tokens,maxLength:K(n.max_length)?n.max_length:null};return"date"==o.fieldType&&(o.dateFormat=K(n.date_format)?n.date_format:"Y-m-d",o.dateAltFormat=K(n.date_alt_format)?n.date_alt_format:UncannyAutomator.format.date,o.supportsRange=!!K(n.supports_range)&&n.supports_range,K(n.min_date)&&(o.minDate=n.min_date),K(n.max_date)&&(o.maxDate=n.max_date)),"time"==o.fieldType&&(o.timeFormat=K(n.time_format)?n.time_format:"h:i K",o.timeAltFormat=K(n.time_alt_format)?n.time_alt_format:"h:i K",K(n.min_time)&&(o.minTime=n.min_time),K(n.max_date)&&(o.maxTime=n.max_time)),["text","textarea","int","float","email","url","select","date","time"].includes(o.fieldType)&&["action","closure"].includes(o.itemType)&&!o.isReadOnly?o.supportsTokens=!K(n.supports_tokens)||n.supports_tokens:o.supportsTokens=!1,"select"==o.fieldType&&(K(n.supports_custom_value)?o.supportsCustomValue=n.supports_custom_value:["action","closure"].includes(o.itemType)?o.supportsCustomValue=!0:o.supportsCustomValue=!1,o.supportsCustomValue&&(o.customValue=K(t.meta["".concat(o.optionCode,"_custom")])?t.meta["".concat(o.optionCode,"_custom")]:""),K(n.custom_value_description)&&(o.customValueDescription=n.custom_value_description),K(n.supports_multiple_values)&&(o.supportsMultipleValues=n.supports_multiple_values)),o.isAjax&&(o.targetField=K(n.fill_values_in)?n.fill_values_in:"",o.endpoint=K(n.endpoint)?n.endpoint:"",o.integrationId=u.integration,N(o.targetField)&&(o.targetField=n.option_code)),["select","radio"].includes(o.fieldType)&&(o.options=K(n.options)?n.options:[]),o};if("group"==a.input_type)l={groupId:e,optionCode:a.option_code,fieldType:a.input_type,isGroup:r,itemId:t.ID,itemType:t.itemType,label:a.label,description:a.description,tokenName:K(a.token_name)?a.token_name:a.label,isRequired:!!K(a.required)&&a.required,fields:a.fields.map((function(e){return p(e)}))},c=new s(l);else if("repeater"==a.input_type){try{t.meta[a.option_code]=JSON.parse(t.meta[a.option_code])}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}l={groupId:e,optionCode:a.option_code,fieldType:a.input_type,isGroup:r,itemId:t.ID,itemType:t.itemType,label:a.label,description:a.description,tokenName:K(a.token_name)?a.token_name:a.label,defaultValue:a.default_value,currentValue:K(t.meta[a.option_code])?t.meta[a.option_code]:a.default_value,isRequired:!!K(a.required)&&a.required,hideActions:!!K(a.hide_actions)&&a.hide_actions,fields:a.fields.map((function(e){return p(e)}))},K(a.add_row_button)&&(l.addRowButtonLabel=a.add_row_button),K(a.remove_row_button)&&(l.removeRowButtonLabel=a.remove_row_button),c=new d(l)}else l=p(a),c=new i.Z(l.fieldType,l,!1);o.push(c)}));var l=[];K(u.buttons)&&a().each(u.buttons,(function(t,n){n.show_in==e&&l.push(n)})),f[e]={fields:o,isValid:!1,buttons:l}})),n={id:t.ID,itemType:t.itemType,itemCode:l,integrationCode:u.integration,isLive:"publish"==t.post_status,options:f,meta:t.meta,isMissing:!1,tokens:K(t.tokens)?t.tokens:[],inlineCss:K(u.inline_css)?u.inline_css:"",filterTokens:K(u.filter_tokens)?u.filter_tokens:"",menuOrder:t.menu_order?parseInt(t.menu_order):9999},K(u.support)&&(n.support=u.support);var h={};a().each(f,(function(e,t){a().each(t.fields,(function(e,t){h[t.getAttributes().optionCode]=t}))})),a().each(h,(function(e,t){var o=t.getAttributes();K(n.meta[o.optionCode])&&!N(n.meta[o.optionCode])||N(o.currentValue)||(n.meta[o.optionCode]=o.currentValue)})),m&&(n.canLogNewUserIn=!K(u.can_log_in_new_user)||u.can_log_in_new_user)}else n={id:t.ID,itemType:t.itemType,itemCode:t.meta.code,integrationCode:t.meta.integration,integrationName:t.meta.integration_name,sentence:t.meta.sentence,isLive:"publish"==t.post_status,tokens:[],options:{},meta:t.meta,isMissing:!0,menuOrder:t.menu_order?parseInt(t.menu_order):9999},m&&(n.canLogNewUserIn=!K(t.meta.can_log_in_new_user)||"true"==t.meta.can_log_in_new_user);A("add",n)})),m){UncannyAutomator.recipe.canLogNewUserIn=!1;var f=A("get",{filter:{itemType:"trigger"}});Object.keys(f)>0&&(UncannyAutomator.recipe.canLogNewUserIn=!0,a().each(f,(function(e,t){UncannyAutomator.recipe.canLogNewUserIn=UncannyAutomator.recipe.canLogNewUserIn&&t.canLogNewUserIn})))}(!K(n.validate)||K(n.validate)&&n.validate)&&e("validate")}else{var h=JSON.stringify(B(n,l));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["recipeObject",h]))}break;case"validate":var g=!0;a().each(UncannyAutomator.recipe.hasLive,(function(e){UncannyAutomator.recipe.hasLive[e]=!1})),a().each(UncannyAutomator.recipe.items,(function(e,t){t.isLive&&(UncannyAutomator.recipe.hasLive[t.itemType]=!0)})),a().each(UncannyAutomator.recipe.items,(function(e,t){var n=!0;a().each(t.options,(function(t,o){var i=!0;a().each(o.fields,(function(e,t){t.validate(!1).isValid||(i=!1)})),UncannyAutomator.recipe.items[e].options[t].isValid=i,i||(n=!1)})),UncannyAutomator.recipe.items[e].isValid=n,t.isLive&&!n&&(g=!1)})),UncannyAutomator.recipe.hasLive.trigger?"anonymous"==UncannyAutomator.recipe.type&&UncannyAutomator.recipe.requiresUserData&&!UncannyAutomator.recipe.userSelector.isValid?(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.userSelector):UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure?UncannyAutomator.recipe.hasLive.trigger||UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.liveItems):(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneAction):(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneTrigger),UncannyAutomator.recipe.isValid=g,g&&(UncannyAutomator.recipe.message.error=""),o=!0}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The action "%s" isn\'t defined',["recipeObject",t]));return o},A=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!1,i=["add","delete","clean","reset","update","get"];if(K(t)&&H(t,i))switch(t){case"add":n=a().extend({isValid:!1,isLive:!1},n);var r=["id","itemType"];if(H(r,Object.keys(n)))K(UncannyAutomator.recipe.items[n.id])||(UncannyAutomator.recipe.items[n.id]=n,e("clean",{}),o=!0);else{var s=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",s]))}break;case"delete":n=a().extend({isValid:!1},n),N(n.id)?UncannyAutomator.dev.developerMode&&console.error(_("%s: Invalid item ID",["itemsObject"])):K(UncannyAutomator.recipe.items[n.id])?(delete UncannyAutomator.recipe.items[n.id],o=!0):UncannyAutomator.dev.developerMode&&console.error(_("%s: We didn't find an item with this the ID %s",["itemsObject",n.id]));break;case"clean":var l={};a().each(UncannyAutomator.recipe.items,(function(e,t){K(t)&&(l[e]=t)})),UncannyAutomator.recipe.items=l,o=!0;break;case"update":N(n.id)?UncannyAutomator.dev.developerMode&&console.error(_("%s: Invalid item ID",["itemsObject"])):K(UncannyAutomator.recipe.items[n.id])?(UncannyAutomator.recipe.items[n.id]=a().extend({},UncannyAutomator.recipe.items[n.id],n),o=!0):UncannyAutomator.dev.developerMode&&console.error(_("%s: We didn't find an item with this the ID %s",["itemsObject",n.id]));break;case"reset":UncannyAutomator.recipe.items={},o=!0;break;case"get":if(N(n.filter))o=UncannyAutomator.recipe.items;else{var c={};a().each(UncannyAutomator.recipe.items,(function(e,t){var o=!0;a().each(n.filter,(function(e,n){t[e]!=n&&(o=!1)})),o&&(c[e]=t)})),o=c}}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The action "%s" isn\'t defined',["itemsObject",t]));return o},k=function(){Object.entries(UncannyAutomator.integrations).forEach((function(e){var t=v(e,2),n=t[0],o=(t[1],{available:C(UncannyAutomator.triggers.filter((function(e){return e.integration==n})),"select_option_name",(function(e){return Y(e)})),unavailable:[]}),a={available:C(UncannyAutomator.actions.filter((function(e){return e.integration==n})),"select_option_name",(function(e){return Y(e)})),unavailable:[]};if((!K(UncannyAutomator.wp)||!UncannyAutomator.wp)&&K(UncannyAutomator.proFeatures)&&K(UncannyAutomator.proFeatures[n])){var i=UncannyAutomator.recipe.type;i="user"==i?"logged-in":i,o.unavailable=C(UncannyAutomator.proFeatures[n].triggers.filter((function(e){return e.type==i})),"name",(function(e){return Y(e)})),a.unavailable=C(UncannyAutomator.proFeatures[n].actions,"name",(function(e){return Y(e)}))}o.allItemsArePro=o.available.every((function(e){return!!K(e.is_pro)&&e.is_pro})),a.allItemsArePro=a.available.every((function(e){return!!K(e.is_pro)&&e.is_pro})),o.hasAvailableItems=o.available.length>0,a.hasAvailableItems=a.available.length>0,o.hasUnavailableItems=o.unavailable.length>0,a.hasUnavailableItems=a.unavailable.length>0,o.hasTriggers=o.hasAvailableItems||o.unavailable.length>0,a.hasActions=a.hasAvailableItems||a.unavailable.length>0,UncannyAutomator.integrations[n].items={triggers:o,actions:a}}))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return K(n)||(n=function(e){return e}),Array.isArray(e)&&!N(e)&&(e=e.sort((function(e,o){var a=0;if(K(e[t])&&K(o[t])){var i=n(e[t]),r=n(o[t]);a=(a=(a=i.localeCompare(r))>0?1:a)<0?-1:a}return a}))),e},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggers",n=arguments.length>2?arguments[2]:void 0;n=Object.assign({addDeprecatedItems:!1},n);var o={available:{},unavailable:{}};return["triggers","actions"].includes(t="action"==(t="trigger"==t?"triggers":t)?"actions":t)&&(N(e)||K(UncannyAutomator.integrations[e])&&(o=a().extend(!0,{},UncannyAutomator.integrations[e].items[t]),n.addDeprecatedItems||(o=U(o)))),o},U=function(e){return e.available=e.available.filter((function(e){return!e.is_deprecated})),e.hasAvailableItems=e.available.length>0,K(e.hasTriggers)?e.hasTriggers=e.hasAvailableItems||e.unavailable.length>0:K(e.hasActions)&&(e.hasActions=e.hasAvailableItems||e.unavailable.length>0),e.allItemsArePro=e.available.every((function(e){return!!K(e.is_pro)&&e.is_pro})),e},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,o=["set-step","get-step","set-source","update-fields","reset-fields"];if(K(e)&&H(e,o)){var i=[];switch(e){case"set-step":if(H(i=["step"],Object.keys(t)))UncannyAutomator.recipe.userSelector.step=t.step;else{var r=JSON.stringify(B(t,i));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["userSelectorObject",r]))}break;case"get-step":var s="select-source";K(UncannyAutomator.recipe.userSelector.step)?s=UncannyAutomator.recipe.userSelector.step:N(UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source])||(s="show-sentence",UncannyAutomator.recipe.userSelector.isValid=!0),n=s;break;case"set-source":if(H(i=["source"],Object.keys(t)))UncannyAutomator.recipe.userSelector.source=t.source;else{var l=JSON.stringify(B(t,i));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["userSelectorObject",l]))}break;case"update-fields":if(H(i=["source","data"],Object.keys(t)))["existingUser","newUser"].includes(t.source)?(N(UncannyAutomator.recipe.userSelector.data)&&(UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}),UncannyAutomator.recipe.userSelector.data[t.source]=a().extend({},UncannyAutomator.recipe.userSelector.data[t.source],t.data)):UncannyAutomator.dev.developerMode&&console.error(_("%s: The source parameter is invalid. Valid values are: %s",["userSelectorObject",["existingUser","newUser"]]));else{var c=JSON.stringify(B(t,i));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["userSelectorObject",c]))}break;case"reset-fields":UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}}}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The action "%s" isn\'t defined',["userSelectorObject",e]));return n},E=function(){["user","anonymous"].includes(UncannyAutomator.recipe.type)&&(UncannyAutomator.dev.developerMode&&(z("Filter Automator items",!0,{collapseGroup:!0}),console.log(_("Current recipe type: %s",[UncannyAutomator.recipe.type]))),UncannyAutomator.triggers=UncannyAutomator.triggers.filter((function(e){return UncannyAutomator.dev.developerMode&&(console.log(e),e.type==UncannyAutomator.recipe.type?G("success","Keep"):G("error","Remove")),e.type==UncannyAutomator.recipe.type})),UncannyAutomator.dev.developerMode&&console.groupEnd())},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=["add","delete","update","change_post_status","recipe_completions_allowed","recipe_max_completions_allowed","change_post_title","change_post_recipe_type","user-selector","set_recipe_terms","schedule_action","remove_schedule","set_recipe_requires_user","actions_order"],s=M();i=Object.assign({requiresRecipesObject:!0,renderUI:!0,errorMessaging:{accessDenied:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(e,"</strong>")])},notFound:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.content,['<a href="'.concat(UncannyAutomator.dev.permalinksURL,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.sitePermalinks,"</a>"),'<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])},timeout:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.content},serverError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])},parserError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.content},dataMissing:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.contactSupport,"</a>"),'<a href="'.concat(UncannyAutomator.dev.automatorTools,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.automatorTools,"</a>")])},generic:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.title,content:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat(s,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")])}}},i),H(e,r)?a().ajax({method:"POST",url:"".concat(UncannyAutomator.restURL,"/").concat(e,"/"),data:"".concat(a().param(t),"&").concat(a().param({doing_rest:1})),dataType:"json",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",UncannyAutomator.nonce)}}).done((function(a,r,s){UncannyAutomator.dev.developerMode&&(z("✅ REST: ".concat(e),!0,{collapseGroup:!0}),console.log("Endpoint: ".concat(e)),console.log("Data:"),console.log(t),console.log("Response:"),console.log(a),console.groupEnd()),a.success?K(a.recipes_object)||!i.requiresRecipesObject?K(n)&&(i.renderUI&&w("create",{allRecipes:a.recipes_object}),n(a)):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but the new recipes_object is missing."),K(o)&&o(a,"data-missing")):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but there were errors."),K(o)&&o(a,"data-missing"))})).fail((function(n,a,r){var s=a,l=i.errorMessaging.generic;switch(s){case"parsererror":s="parser-error",l=i.errorMessaging.parserError;break;case"error":403==n.status?(s="access-denied",l=i.errorMessaging.accessDenied):404==n.status?(s="not-found",l=i.errorMessaging.notFound):500==n.status&&(s="server-error",l=i.errorMessaging.serverError);break;case"timeout":s="timeout",l=i.errorMessaging.timeOut}UncannyAutomator.dev.developerMode&&(z("❌ REST: ".concat(e),!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log(n),console.log(s),console.log(r),console.groupEnd()),K(o)&&o({success:!1},s),re({title:l.title,warning:l.content,content:"",console:"Data sent:\n"+"".concat(JSON.stringify(t),"\n\n")+"errorCode: \n".concat(s,"\n\n")+"errorThrown:\n".concat(JSON.stringify(r),"\n\n")+"jqXHR: \n".concat(JSON.stringify(n)," \n\n"),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}})})):UncannyAutomator.dev.developerMode&&console.error(_("The %s endPoint does not exists. The valid endpoints are %s",[e,r.join(", ")]))},M=function(){return ee(ue(UncannyAutomator.dev.supportPage,{medium:"error-handler",content:"get-support-link"}),{subject:"technical-support",version:UncannyAutomator.version,site_url:UncannyAutomator.siteURL})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;K(e)?(t=a().extend(!0,t,{action:e,nonce:UncannyAutomator.nonce}),a().ajax({method:"POST",dataType:"json",url:ajaxurl,data:t,success:function(a){UncannyAutomator.dev.developerMode&&(z("AJAX call ✅",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log(a),console.groupEnd()),K(a.status)&&"auth-failed"==a.status?(K(o)&&o(a),re({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,warning:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(e,"</strong>")]),content:"",console:"Data sent:\n"+"".concat(JSON.stringify(t),"\n\n")+"errorCode: \naccess-denied\n\n",buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}})):K(n)&&n(a,t)},statusCode:{403:function(n){UncannyAutomator.dev.developerMode&&(z("AJAX call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),z("403: Access denied",!1,{bgColor:"#ff0000"}),console.groupEnd()),K(o)&&o(n),re({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,warning:_(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,["<strong>".concat(e,"</strong>")]),content:"",console:"Data sent:\n"+"".concat(JSON.stringify(t),"\n\n")+"errorCode: \naccess-denied\n\n",buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}})}},fail:function(e){UncannyAutomator.dev.developerMode&&(z("AJAX call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(t),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),K(o)&&o(e)}})):UncannyAutomator.dev.developerMode&&console.error("We cannot do this AJAX request. {action} is not defined.")},O=function(e){var t={};return a().each(UncannyAutomator.recipe.items[e].options,(function(e,n){a().each(n.fields,(function(e,n){var o=n.getFieldID(),a=n.getValue();K(a)||(a=n.getAttributes().currentValue),"select"==n.getAttributes().fieldType&&"automator_custom_value"==a&&(t["".concat(o,"_custom")]=n.getSelectCustomValue()),t[o]=a,N(a)||"select"!=n.getAttributes().fieldType||(t["".concat(o,"_readable")]=n.getReadableValue())}))})),t},I=function(e,t){var n;return a().each(UncannyAutomator.recipe.items[e].options,(function(e,o){a().each(o.fields,(function(e,o){t==o.getFieldID()&&(n=o)}))})),n},$=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!N(t)&&!N(n)&&!N(o)){var i={};if("trigger"==n||"action"==n){if(K(UncannyAutomator.integrations[t])){var r=UncannyAutomator.integrations[t];K(r.items)&&(i="trigger"==n?r.items.triggers.available:r.items.actions.available)}}else"closure"==n&&(i=UncannyAutomator.closures);a().each(i,(function(t,n){if(n.code==o)return e=n,!1}))}return e},L=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;D("set_recipe_requires_user",{recipePostID:UncannyAutomator.recipe.id,requiresUser:e},(function(n){n.success&&K(t)&&(UncannyAutomator.recipe.requiresUserData=e,P("user-selector").addClass("user-selector--show"),t(n))}),(function(e){UncannyAutomator.dev.developerMode&&console.log("Couldn't set the recipe requires user status"),K(n)&&n(e)}))},P=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o={},i=["metabox","items","item","optionGroup","lastItem","user-selector"];if(K(t)&&H(t,i)){var r=[];switch(t){case"metabox":if(n=a().extend({},n),H(r=["type"],Object.keys(n))){n.cssSelectorMetabox="","trigger"==n.type?n.cssSelectorMetabox="#recipe-triggers-ui":"action"==n.type&&(n.cssSelectorMetabox="#recipe-actions-ui");var s=a()(n.cssSelectorMetabox);o=s}else{var l=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",l]))}break;case"items":if(n=a().extend({},n),H(r=["type"],Object.keys(n))){var c=e("metabox",{type:n.type}),u=c.find(".item:not(.item--user-selector):not(.item--start):not(.item--closure)");o=u}else{var d=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",d]))}break;case"item":if(n=a().extend({},n),H(r=["id"],Object.keys(n))){n.cssSelector='.uap .item[data-id="'.concat(n.id,'"]');var p=a()(n.cssSelector),m=p.find(".item__content");o.item=p,o.contentContainer=m}else{var f=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",f]))}break;case"optionGroup":if(n=a().extend({},n),H(r=["itemID","groupID"],Object.keys(n))){var h=e("item",{id:n.itemID}).item;n.cssSelectorTokenInSentence='.item-title__token[data-token-id="'.concat(n.groupID,'"]'),n.cssSelectorFieldsContainer='.item-options__group[data-optiongroup="'.concat(n.groupID,'"]');var g=h.find(n.cssSelectorTokenInSentence),v=h.find(n.cssSelectorFieldsContainer),y=h.find(".item-options");o.tokenInSentence=g,o.fieldsContainer=v,o.optionsContainer=y}else{var b=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",b]))}break;case"lastItem":if(n=a().extend({},n),H(r=["type"],Object.keys(n))){var w=e("metabox",{type:n.type}),A=w.find(".item:not(.item--user-selector):not(.item--start):not(.item--closure)").last();o=A}else{var k=JSON.stringify(B(n,r));UncannyAutomator.dev.developerMode&&console.error(_("%s: Some attributes are missing: %s",["itemsObject",k]))}break;case"user-selector":o=a()(".user-selector")}}else UncannyAutomator.dev.developerMode&&console.error(_('%s: The element "%s" isn\'t defined',["getDOMElements",t]));return o},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={url:"",node:null},n=UncannyAutomator.integrations[e];return K(n)&&(t.node=document.createElement("img"),K(n.icon_svg)?(t.url=n.icon_svg,t.node.setAttribute("src",n.icon_svg),t.node.setAttribute("alt",n.name)):K(n.icon_32)&&K(n.icon_64)&&(t.url={icon16:n.icon_16,icon32:n.icon_32,icon64:n.icon_64},t.node.setAttribute("src",n.icon_32),t.node.setAttribute("srcset",_("%s 1x, %s 2x",[n.icon_32,n.icon_64])),t.node.setAttribute("alt",n.name))),t},F=function(){return["select","textarea","text","url","email","int","float","checkbox","radio","group","date","time","repeater"]},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null;if(o={plain:"",brackets:"",html:a()("<div/>"),elements:{normal:[],token:[]},parts:[]},t=t.trim(),!N(t)){var i,r=new RegExp(/\{\{(.*?)\}\}/gm),s=[],l=[],c=t,u=0,d=(t=t.replace(r,(function(t,o){var a,i=o.split(":"),r=i[0],s=i[1],d=K(i[2])?i[2]:s;return o={type:"token",id:s,text:r,optionsID:d,hasFields:K(e.options[d])},K(n[o.id])&&("automator_custom_value"==n[o.id]&&K(n[_("%s_custom",[o.id])])?a=n[_("%s_custom",[o.id])]:K(n[_("%s_readable",[o.id])])&&(a=n[_("%s_readable",[o.id])]),o.originalText=o.text,o.text=K(a)?a:n[o.id]),l.push(o),c=c.replace(t,"{{token:".concat(u,"}}")),u++,"{{v}}"}))).split("{{v}}"),p=0;for(a().each(d,(function(e,t){if(""!=t){var n={type:"normal",text:t};s.push(n),c=c.replace(t,"{{normal:".concat(p,"}}")),p++}}));null!==(i=r.exec(c));){var f=i[1].split(":");"normal"==(f={type:f[0],index:f[1]}).type?o.parts.push(s[f.index]):o.parts.push(l[f.index])}var h=null;a().each(o.parts,(function(t,n){if(o.plain+=n.text," "!=n.text){var i,s=n.text,l=!1,c=null;if("normal"==n.type||"token"==n.type&&!n.hasFields&&!e.isMissing)i={class:"item-title__normal"},o.brackets+=n.text;else{if(i={class:"item-title__token","data-token-id":n.id,"data-options-id":n.optionsID},K(e.options[n.optionsID])&&e.options[n.optionsID].isValid&&(i.class+=" item-title__token--filled"),K(n.originalText)){if(r.test(s)){K(h)||(h=new m.Z(e.itemType,"text",{includeGroupName:!1}));var u=h.renderTextWithTokens(s);K(u)&&(l=!0,c=u)}if(!l){var d=X(s,30);d.isAbbreviated&&(i["uap-tooltip"]=s,s=d.text)}}o.brackets+="{{".concat(ne(s),"}}")}var p=a()("<span/>",i);l?p.append(c):p.text(ne(s)),o.elements[n.type].push(p),o.html.append(p)}else o.brackets+=n.text})),o.elements.normal=a()(o.elements.normal).map((function(e,t){return t.get()})),o.elements.token=a()(o.elements.token).map((function(e,t){return t.get()})).filter(":not(.item-title__normal)")}return UncannyAutomator.recipe.items[e.id].itemSentence=o,o},j=function(e){var t=e.url,n=e.title,o=e.w,a=e.h,i=e.onClose,r=K(window.screenLeft)?window.screenLeft:window.screenX,s=K(window.screenTop)?window.screenTop:window.screenY,l=document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;window.innerWidth&&(l=window.innerWidth);var c=document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;window.innerHeight&&(c=window.innerHeight);var u=l/window.screen.availWidth,d=(l-o)/2/u+r,p=(c-a)/2/u+s,m=window.open(t,n,"\n\t\tscrollbars=yes,\n\t\twidth=".concat(o/u,", \n\t\theight=").concat(a/u,", \n\t\ttop=").concat(p,", \n\t\tleft=").concat(d,"\n\t\t"));return window.focus&&m.focus(),K(i)&&function e(){m.closed?i():setTimeout((function(){e()}),500)}(),m},K=function(e){return null!=e},N=function(e){var t=!0;return K(e)&&(t=a().isArray(e)?0==e.length:Z(e)?a().isEmptyObject(e):""==e),t},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!0};return n.caseSensitive?e.toString()==t.toString():e.toString().toLowerCase()==t.toString().toLowerCase()},H=function(e,t){return Array.isArray(e)?0==B(e,t).length:-1!==a().inArray(e,t)},B=function(e,t){return a()(e).not(t).get()},W=function(e){return"string"==typeof e},Z=function(e){return null!==e&&"object"===g(e)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(e=e.replace(/{{/g,t)).replace(/}}/g,n)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(UncannyAutomator.dev.developerMode){K(n.bgColor)||(n.bgColor="#0790e8");var o="background: ".concat(n.bgColor,'; color: #fff; font-weight: 500; padding: 2px 6px; font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; border-radius: 8px;');t?K(n.collapseGroup)&&n.collapseGroup?console.groupCollapsed("%cAutomator",o,e):console.group("%cAutomator",o,e):console.log("%cAutomator",o,e)}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(UncannyAutomator.dev.developerMode){var n=["color: #fff","padding: 2px 7px",'font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',"font-weight: normal"].join(";");"error"==e&&(n="background: #f13c3c; ".concat(n)),"success"==e&&(n="background: #40b528; ".concat(n)),console.log("%c".concat(t),n)}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={"&":"&amp;","<":"&lt;",">":"&gt;"},n=function(e){return t[e]||e};return e.replace(/[&<>]/g,n)},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={isAbbreviated:!1,text:e};if(e.length>t){var o=Math.floor(t/2),a={start:e.substring(0,o),end:e.slice(-o)};n.text="".concat(a.start," ... ").concat(a.end),n.isAbbreviated=!0}return n},Q=function(){return"_".concat(Math.random().toString(36).substr(2,9))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};N(e)&&(e=window.location.href);try{e=new URL(e)}catch(t){return e}for(var o=e.search.substr(1).split("&"),i=0,r=Object.entries(t);i<r.length;i++){var s=v(r[i],2),l=s[0],c=s[1];l=encodeURI(l),c=encodeURI(c);for(var u=o.length,d=void 0;u--;)if((d=o[u].split("="))[0]==l){d[1]=c,o[u]=d.join("=");break}u<0&&(o[o.length]=[l,c].join("="))}if(o=o.filter((function(e){var t=e.split("=");return!(N(e)||N(t[1]))})),e.search=o.join("&"),(n=a().extend({},{setAsURL:!1,refresh:!1},n)).setAsURL)if(n.refresh)window.location.href=e.href;else{var p=document.title;window.history.pushState({},p,e.href)}return e.href},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return N(e)&&(e=window.location.href),(e=new URL(e)).searchParams.get(t)},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.createElement("textarea");return t.innerHTML=e,t.value},oe=function(e,t){var n=0;return function(){var o=Date.now();if(n+t<o)return n=o,e.apply(undefined,h)}},ae=function(e,t){var n=-1;return function(){clearTimeout(n);var o=h;n=setTimeout((function(){e.apply(void 0,o)}),t)}},ie=function(e){var t=document.createElement("textarea");t.style.width="0px",t.style.height="0px",t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=a().extend(!0,{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.title,warning:"",content:UncannyAutomator.i18n.debugging.fatalErrorHandler.content,console:null,buttons:{confirm:{label:UncannyAutomator.i18n.debugging.learnMore,onClick:function(){window.open(UncannyAutomator.dev.debuggingURL,"_blank")}},cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}},e);var t,n="";try{a().each(UncannyAutomator.recipes_object,(function(e,n){n.ID==UncannyAutomator.recipe.id&&(t=n)}))}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{var o="====== ".concat(UncannyAutomator.i18n.debugging.recipeTitle," ====== \n"),i=UncannyAutomator.i18n.debugging.recipeTypeUser;"anonymous"==t.recipe_type&&(i=UncannyAutomator.i18n.debugging.recipeTypeAnonymous),o+="".concat(UncannyAutomator.i18n.debugging.recipeType,": ").concat(i);var r=UncannyAutomator.i18n.debugging.recipeStatusDraft;"publish"==t.post_status&&(r=UncannyAutomator.i18n.debugging.recipeStatusLive),n=o+="\n".concat(UncannyAutomator.i18n.debugging.recipeStatus,": ").concat(r)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{var s="=== ".concat(UncannyAutomator.i18n.debugging.recipeItemsTitle," === \n"),l=function(e){var t="publish"==e.post_status?UncannyAutomator.i18n.debugging.itemStatusLive:UncannyAutomator.i18n.debugging.itemStatusDraft;return"> ".concat(e.meta.integration," - ").concat(e.meta.code," - ").concat(t,"\n  (").concat(e.meta.sentence.replace(/\{\{|\:[a-zA-Z0-9]*\}\}/g,""),")\n  ").concat(JSON.stringify(e).replaceAll("<","&lt;").replaceAll(">","&gt;"),"\n")},c=t.triggers.map(l),u=c.length>0,d=t.actions.map(l),p=d.length>0,m=t.closures.map(l),h=m.length>0;u||p||h?(s+="".concat(UncannyAutomator.i18n.debugging.triggersTitle,"\n\n"),s+=u?c.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noTriggers),s+="\n".concat(UncannyAutomator.i18n.debugging.actionsTitle,"\n\n"),s+=p?d.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noActions),s+="\n".concat(UncannyAutomator.i18n.debugging.closuresTitle,"\n\n"),s+=h?m.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noClosures)):s+="".concat(UncannyAutomator.i18n.debugging.noRecipeItemsFound),n=""!==n?"".concat(n,"\n\n").concat(s):n}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{if(K(e.console)){UncannyAutomator.dev.developerMode&&console.log(e.console);var g="====== ".concat(UncannyAutomator.i18n.debugging.jsConsole," ====== \n");try{g+="".concat(e.console.stack.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(t){try{g+="".concat(e.console.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(t){g+=e.console}}n=""!==n?"".concat(n,"\n\n").concat(g):n}}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}try{n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}var v={};K(e.buttons.cancel)&&(v.cancel=e.buttons.cancel.label),K(e.buttons.confirm)&&(v.confirm=e.buttons.confirm.label);var y=new f.Z({title:'<span class="modal__title-icon uap-icon uap-icon--exclamation-triangle"></span> '.concat(e.title),warning:"".concat(e.warning),content:"\n\t\t\t<div>\n\t\t\t\t".concat(N(e.content)?"":e.content,'\n\t\t\t\t<div class="modal__content-code">\n\t\t\t\t\t<pre id="uap-debugging">').concat(n,"</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),buttons:v},{size:"extra-large",warningFirst:!0});y.setEvents({onConfirm:function(){e.buttons.confirm.onClick(y)},onCancel:function(){e.buttons.cancel.onClick(y)},afterSetEvents:function(){var e=a()("#uap-debugging");e.on("click",(function(){var t=document.createRange();t.selectNodeContents(e[0]),window.getSelection().removeAllRanges(),window.getSelection().addRange(t)}))}})},se=function(e,t,n){var o={};return a().each(e,(function(e,a){a.meta[t]&&a.meta[t]==n&&(o[e]=a)})),o},le=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o={};return a().each(e,(function(e,a){t in a.meta===n&&(o[e]=a)})),o},ce=function(e){Object.assign(document.createElement("a"),{target:"_blank",href:e}).click()},ue=function(e,t){var n=t.medium,o=t.campaign,a=t.content,i={};return i.utm_source=K(UncannyAutomator.wp)&&UncannyAutomator.wp?"uncanny_automator_pro":"uncanny_automator",N(n)||(i.utm_medium=n),N(o)||(i.utm_campaign=o),N(a)||(i.utm_content=a),N(UncannyAutomator.marketing.utmR)||(i.utm_r=UncannyAutomator.marketing.utmR),ee(e,i)}},605:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ee});var o=n(311),a=n.n(o);n(686);const i=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],r={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:e=>"undefined"!=typeof console&&console.warn(e),getWeek:e=>{const t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},s={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:e=>{const t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},l=s,c=(e,t=2)=>`000${e}`.slice(-1*t),u=e=>!0===e?1:0;function d(e,t){let n;return function(){clearTimeout(n),n=setTimeout((()=>e.apply(this,arguments)),t)}}const p=e=>e instanceof Array?e:[e];function m(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function f(e,t,n){const o=window.document.createElement(e);return t=t||"",n=n||"",o.className=t,void 0!==n&&(o.textContent=n),o}function h(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function g(e,t){return t(e)?e:e.parentNode?g(e.parentNode,t):void 0}function v(e,t){const n=f("div","numInputWrapper"),o=f("input","numInput "+e),a=f("span","arrowUp"),i=f("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?o.type="number":(o.type="text",o.pattern="\\d*"),void 0!==t)for(const e in t)o.setAttribute(e,t[e]);return n.appendChild(o),n.appendChild(a),n.appendChild(i),n}function y(e){try{return"function"==typeof e.composedPath?e.composedPath()[0]:e.target}catch(t){return e.target}}const _=()=>{},b=(e,t,n)=>n.months[t?"shorthand":"longhand"][e],w={D:_,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:(e,t)=>{e.setHours(parseFloat(t))},H:(e,t)=>{e.setHours(parseFloat(t))},J:(e,t)=>{e.setDate(parseFloat(t))},K:(e,t,n)=>{e.setHours(e.getHours()%12+12*u(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:(e,t)=>{e.setSeconds(parseFloat(t))},U:(e,t)=>new Date(1e3*parseFloat(t)),W:function(e,t,n){const o=parseInt(t),a=new Date(e.getFullYear(),0,2+7*(o-1),0,0,0,0);return a.setDate(a.getDate()-a.getDay()+n.firstDayOfWeek),a},Y:(e,t)=>{e.setFullYear(parseFloat(t))},Z:(e,t)=>new Date(t),d:(e,t)=>{e.setDate(parseFloat(t))},h:(e,t)=>{e.setHours(parseFloat(t))},i:(e,t)=>{e.setMinutes(parseFloat(t))},j:(e,t)=>{e.setDate(parseFloat(t))},l:_,m:(e,t)=>{e.setMonth(parseFloat(t)-1)},n:(e,t)=>{e.setMonth(parseFloat(t)-1)},s:(e,t)=>{e.setSeconds(parseFloat(t))},u:(e,t)=>new Date(parseFloat(t)),w:_,y:(e,t)=>{e.setFullYear(2e3+parseFloat(t))}},A={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},k={Z:e=>e.toISOString(),D:function(e,t,n){return t.weekdays.shorthand[k.w(e,t,n)]},F:function(e,t,n){return b(k.n(e,t,n)-1,!1,t)},G:function(e,t,n){return c(k.h(e,t,n))},H:e=>c(e.getHours()),J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:(e,t)=>t.amPM[u(e.getHours()>11)],M:function(e,t){return b(e.getMonth(),!0,t)},S:e=>c(e.getSeconds()),U:e=>e.getTime()/1e3,W:function(e,t,n){return n.getWeek(e)},Y:e=>c(e.getFullYear(),4),d:e=>c(e.getDate()),h:e=>e.getHours()%12?e.getHours()%12:12,i:e=>c(e.getMinutes()),j:e=>e.getDate(),l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:e=>c(e.getMonth()+1),n:e=>e.getMonth()+1,s:e=>e.getSeconds(),u:e=>e.getTime(),w:e=>e.getDay(),y:e=>String(e.getFullYear()).substring(2)},C=({config:e=r,l10n:t=s,isMobile:n=!1})=>(o,a,i)=>{const r=i||t;return void 0===e.formatDate||n?a.split("").map(((t,n,a)=>k[t]&&"\\"!==a[n-1]?k[t](o,r,e):"\\"!==t?t:"")).join(""):e.formatDate(o,a,r)},T=({config:e=r,l10n:t=s})=>(n,o,a,i)=>{if(0!==n&&!n)return;const s=i||t;let l;const c=n;if(n instanceof Date)l=new Date(n.getTime());else if("string"!=typeof n&&void 0!==n.toFixed)l=new Date(n);else if("string"==typeof n){const t=o||(e||r).dateFormat,i=String(n).trim();if("today"===i)l=new Date,a=!0;else if(/Z$/.test(i)||/GMT$/.test(i))l=new Date(n);else if(e&&e.parseDate)l=e.parseDate(n,t);else{l=e&&e.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);let o,a=[];for(let e=0,i=0,r="";e<t.length;e++){const c=t[e],u="\\"===c,d="\\"===t[e-1]||u;if(A[c]&&!d){r+=A[c];const e=new RegExp(r).exec(n);e&&(o=!0)&&a["Y"!==c?"push":"unshift"]({fn:w[c],val:e[++i]})}else u||(r+=".");a.forEach((({fn:e,val:t})=>l=e(l,t,s)||l))}l=o?l:void 0}}if(l instanceof Date&&!isNaN(l.getTime()))return!0===a&&l.setHours(0,0,0,0),l;e.errorHandler(new Error(`Invalid date provided: ${c}`))};function U(e,t,n=!0){return!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}function x(e){let t=e.defaultHour,n=e.defaultMinute,o=e.defaultSeconds;if(void 0!==e.minDate){const a=e.minDate.getHours(),i=e.minDate.getMinutes(),r=e.minDate.getSeconds();t<a&&(t=a),t===a&&n<i&&(n=i),t===a&&n===i&&o<r&&(o=e.minDate.getSeconds())}if(void 0!==e.maxDate){const a=e.maxDate.getHours(),i=e.maxDate.getMinutes();t=Math.min(t,a),t===a&&(n=Math.min(i,n)),t===a&&n===i&&(o=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:o}}function E(e,t){const n={config:Object.assign(Object.assign({},r),M.defaultConfig),l10n:l};function o(e){return e.bind(n)}function a(){const e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){const t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function s(e){if(0===n.selectedDates.length){const e=void 0===n.config.minDate||U(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),t=x(n.config);e.setHours(t.hours,t.minutes,t.seconds,e.getMilliseconds()),n.selectedDates=[e],n.latestSelectedDateObj=e}void 0!==e&&"blur"!==e.type&&function(e){e.preventDefault();const t="keydown"===e.type,o=y(e),a=o;void 0!==n.amPM&&o===n.amPM&&(n.amPM.textContent=n.l10n.amPM[u(n.amPM.textContent===n.l10n.amPM[0])]);const i=parseFloat(a.getAttribute("min")),r=parseFloat(a.getAttribute("max")),s=parseFloat(a.getAttribute("step")),l=parseInt(a.value,10);let d=l+s*(e.delta||(t?38===e.which?1:-1:0));if(void 0!==a.value&&2===a.value.length){const e=a===n.hourElement,t=a===n.minuteElement;d<i?(d=r+d+u(!e)+(u(e)&&u(!n.amPM)),t&&$(void 0,-1,n.hourElement)):d>r&&(d=a===n.hourElement?d-r-u(!n.amPM):i,t&&$(void 0,1,n.hourElement)),n.amPM&&e&&(1===s?d+l===23:Math.abs(d-l)>s)&&(n.amPM.textContent=n.l10n.amPM[u(n.amPM.textContent===n.l10n.amPM[0])]),a.value=c(d)}}(e);const t=n._input.value;_(),ve(),n._input.value!==t&&n._debouncedChange()}function _(){if(void 0===n.hourElement||void 0===n.minuteElement)return;let e=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(n.minuteElement.value,10)||0)%60,o=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;var a,i;void 0!==n.amPM&&(a=e,i=n.amPM.textContent,e=a%12+12*u(i===n.l10n.amPM[1]));const r=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===U(n.latestSelectedDateObj,n.config.minDate,!0);if(void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===U(n.latestSelectedDateObj,n.config.maxDate,!0)){const a=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;e=Math.min(e,a.getHours()),e===a.getHours()&&(t=Math.min(t,a.getMinutes())),t===a.getMinutes()&&(o=Math.min(o,a.getSeconds()))}if(r){const a=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;e=Math.max(e,a.getHours()),e===a.getHours()&&t<a.getMinutes()&&(t=a.getMinutes()),t===a.getMinutes()&&(o=Math.max(o,a.getSeconds()))}k(e,t,o)}function w(e){const t=e||n.latestSelectedDateObj;t&&k(t.getHours(),t.getMinutes(),t.getSeconds())}function k(e,t,o){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,o||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=c(n.config.time_24hr?e:(12+e)%12+12*u(e%12==0)),n.minuteElement.value=c(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[u(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=c(o)))}function E(e){const t=y(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&z(n)}function D(e,t,o,a){return t instanceof Array?t.forEach((t=>D(e,t,o,a))):e instanceof Array?e.forEach((e=>D(e,t,o,a))):(e.addEventListener(t,o,a),void n._handlers.push({remove:()=>e.removeEventListener(t,o)}))}function S(){pe("onChange")}function O(e,t){const o=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),a=n.currentYear,i=n.currentMonth;try{void 0!==o&&(n.currentYear=o.getFullYear(),n.currentMonth=o.getMonth())}catch(e){e.message="Invalid date supplied: "+o,n.config.errorHandler(e)}t&&n.currentYear!==a&&(pe("onYearChange"),K()),!t||n.currentYear===a&&n.currentMonth===i||pe("onMonthChange"),n.redraw()}function I(e){const t=y(e);~t.className.indexOf("arrow")&&$(e,t.classList.contains("arrowUp")?1:-1)}function $(e,t,n){const o=e&&y(e),a=n||o&&o.parentNode&&o.parentNode.firstChild,i=me("increment");i.delta=t,a&&a.dispatchEvent(i)}function L(e,t,o,a){const i=G(t,!0),r=f("span","flatpickr-day "+e,t.getDate().toString());return r.dateObj=t,r.$i=a,r.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===U(t,n.now)&&(n.todayDateElem=r,r.classList.add("today"),r.setAttribute("aria-current","date")),i?(r.tabIndex=-1,fe(t)&&(r.classList.add("selected"),n.selectedDateElem=r,"range"===n.config.mode&&(m(r,"startRange",n.selectedDates[0]&&0===U(t,n.selectedDates[0],!0)),m(r,"endRange",n.selectedDates[1]&&0===U(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&r.classList.add("inRange")))):r.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&U(e,n.selectedDates[0])>=0&&U(e,n.selectedDates[1])<=0}(t)&&!fe(t)&&r.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&o%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),pe("onDayCreate",r),r}function P(e){e.focus(),"range"===n.config.mode&&ee(e)}function R(e){const t=e>0?0:n.config.showMonths-1,o=e>0?n.config.showMonths:-1;for(let a=t;a!=o;a+=e){const t=n.daysContainer.children[a],o=e>0?0:t.children.length-1,i=e>0?t.children.length:-1;for(let n=o;n!=i;n+=e){const e=t.children[n];if(-1===e.className.indexOf("hidden")&&G(e.dateObj))return e}}}function F(e,t){const o=J(document.activeElement||document.body),a=void 0!==e?e:o?document.activeElement:void 0!==n.selectedDateElem&&J(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&J(n.todayDateElem)?n.todayDateElem:R(t>0?1:-1);void 0===a?n._input.focus():o?function(e,t){const o=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,a=t>0?n.config.showMonths:-1,i=t>0?1:-1;for(let r=o-n.currentMonth;r!=a;r+=i){const a=n.daysContainer.children[r],s=o-n.currentMonth===r?e.$i+t:t<0?a.children.length-1:0,l=a.children.length;for(let n=s;n>=0&&n<l&&n!=(t>0?l:-1);n+=i){const o=a.children[n];if(-1===o.className.indexOf("hidden")&&G(o.dateObj)&&Math.abs(e.$i-n)>=Math.abs(t))return P(o)}}n.changeMonth(i),F(R(i),0)}(a,t):P(a)}function V(e,t){const o=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,a=n.utils.getDaysInMonth((t-1+12)%12,e),i=n.utils.getDaysInMonth(t,e),r=window.document.createDocumentFragment(),s=n.config.showMonths>1,l=s?"prevMonthDay hidden":"prevMonthDay",c=s?"nextMonthDay hidden":"nextMonthDay";let u=a+1-o,d=0;for(;u<=a;u++,d++)r.appendChild(L(l,new Date(e,t-1,u),u,d));for(u=1;u<=i;u++,d++)r.appendChild(L("",new Date(e,t,u),u,d));for(let a=i+1;a<=42-o&&(1===n.config.showMonths||d%7!=0);a++,d++)r.appendChild(L(c,new Date(e,t+1,a%i),a,d));const p=f("div","dayContainer");return p.appendChild(r),p}function j(){if(void 0===n.daysContainer)return;h(n.daysContainer),n.weekNumbers&&h(n.weekNumbers);const e=document.createDocumentFragment();for(let t=0;t<n.config.showMonths;t++){const o=new Date(n.currentYear,n.currentMonth,1);o.setMonth(n.currentMonth+t),e.appendChild(V(o.getFullYear(),o.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&ee()}function K(){if(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)return;const e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(let t=0;t<12;t++){if(!e(t))continue;const o=f("option","flatpickr-monthDropdown-month");o.value=new Date(n.currentYear,t).getMonth().toString(),o.textContent=b(t,n.config.shorthandCurrentMonth,n.l10n),o.tabIndex=-1,n.currentMonth===t&&(o.selected=!0),n.monthsDropdownContainer.appendChild(o)}}function N(){const e=f("div","flatpickr-month"),t=window.document.createDocumentFragment();let o;n.config.showMonths>1||"static"===n.config.monthSelectorType?o=f("span","cur-month"):(n.monthsDropdownContainer=f("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),D(n.monthsDropdownContainer,"change",(e=>{const t=y(e),o=parseInt(t.value,10);n.changeMonth(o-n.currentMonth),pe("onMonthChange")})),K(),o=n.monthsDropdownContainer);const a=v("cur-year",{tabindex:"-1"}),i=a.getElementsByTagName("input")[0];i.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&i.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(i.setAttribute("max",n.config.maxDate.getFullYear().toString()),i.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());const r=f("div","flatpickr-current-month");return r.appendChild(o),r.appendChild(a),t.appendChild(r),e.appendChild(t),{container:e,yearElement:i,monthElement:o}}function q(){h(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(let e=n.config.showMonths;e--;){const e=N();n.yearElements.push(e.yearElement),n.monthElements.push(e.monthElement),n.monthNav.appendChild(e.container)}n.monthNav.appendChild(n.nextMonthNav)}function H(){n.weekdayContainer?h(n.weekdayContainer):n.weekdayContainer=f("div","flatpickr-weekdays");for(let e=n.config.showMonths;e--;){const e=f("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(e)}return B(),n.weekdayContainer}function B(){if(!n.weekdayContainer)return;const e=n.l10n.firstDayOfWeek;let t=[...n.l10n.weekdays.shorthand];e>0&&e<t.length&&(t=[...t.splice(e,t.length),...t.splice(0,e)]);for(let e=n.config.showMonths;e--;)n.weekdayContainer.children[e].innerHTML=`\n      <span class='flatpickr-weekday'>\n        ${t.join("</span><span class='flatpickr-weekday'>")}\n      </span>\n      `}function W(e,t=!0){const o=t?e:e-n.currentMonth;o<0&&!0===n._hidePrevMonthArrow||o>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=o,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,pe("onYearChange"),K()),j(),pe("onMonthChange"),he())}function Z(e){return!(!n.config.appendTo||!n.config.appendTo.contains(e))||n.calendarContainer.contains(e)}function Y(e){if(n.isOpen&&!n.config.inline){const t=y(e),o=Z(t),a=t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)),i="blur"===e.type?a&&e.relatedTarget&&!Z(e.relatedTarget):!a&&!o&&!Z(e.relatedTarget),r=!n.config.ignoredFocusElements.some((e=>e.contains(t)));i&&r&&(void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&s(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&(n.clear(!1),n.redraw()))}}function z(e){if(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())return;const t=e,o=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),o&&(n.redraw(),pe("onYearChange"),K())}function G(e,t=!0){var o;const a=n.parseDate(e,void 0,t);if(n.config.minDate&&a&&U(a,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&a&&U(a,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===a)return!1;const i=!!n.config.enable,r=null!==(o=n.config.enable)&&void 0!==o?o:n.config.disable;for(let e,t=0;t<r.length;t++){if(e=r[t],"function"==typeof e&&e(a))return i;if(e instanceof Date&&void 0!==a&&e.getTime()===a.getTime())return i;if("string"==typeof e){const t=n.parseDate(e,void 0,!0);return t&&t.getTime()===a.getTime()?i:!i}if("object"==typeof e&&void 0!==a&&e.from&&e.to&&a.getTime()>=e.from.getTime()&&a.getTime()<=e.to.getTime())return i}return!i}function J(e){return void 0!==n.daysContainer&&-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e)}function X(e){e.target!==n._input||!(n.selectedDates.length>0||n._input.value.length>0)||e.relatedTarget&&Z(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function Q(t){const o=y(t),a=n.config.wrap?e.contains(o):o===n._input,i=n.config.allowInput,r=n.isOpen&&(!i||!a),l=n.config.inline&&a&&!i;if(13===t.keyCode&&a){if(i)return n.setDate(n._input.value,!0,o===n.altInput?n.config.altFormat:n.config.dateFormat),o.blur();n.open()}else if(Z(o)||r||l){const e=!!n.timeContainer&&n.timeContainer.contains(o);switch(t.keyCode){case 13:e?(t.preventDefault(),s(),se()):le(t);break;case 27:t.preventDefault(),se();break;case 8:case 46:a&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(e||a)n.hourElement&&n.hourElement.focus();else if(t.preventDefault(),void 0!==n.daysContainer&&(!1===i||document.activeElement&&J(document.activeElement))){const e=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),W(e),F(R(1),0)):F(void 0,e)}break;case 38:case 40:t.preventDefault();const r=40===t.keyCode?1:-1;n.daysContainer&&void 0!==o.$i||o===n.input||o===n.altInput?t.ctrlKey?(t.stopPropagation(),z(n.currentYear-r),F(R(1),0)):e||F(void 0,7*r):o===n.currentYearElement?z(n.currentYear-r):n.config.enableTime&&(!e&&n.hourElement&&n.hourElement.focus(),s(t),n._debouncedChange());break;case 9:if(e){const e=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((e=>e)),a=e.indexOf(o);if(-1!==a){const o=e[a+(t.shiftKey?-1:1)];t.preventDefault(),(o||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(o)&&t.shiftKey&&(t.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&o===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],_(),ve();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],_(),ve()}(a||Z(o))&&pe("onKeyDown",t)}function ee(e){if(1!==n.selectedDates.length||e&&(!e.classList.contains("flatpickr-day")||e.classList.contains("flatpickr-disabled")))return;const t=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),o=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),a=Math.min(t,n.selectedDates[0].getTime()),i=Math.max(t,n.selectedDates[0].getTime());let r=!1,s=0,l=0;for(let e=a;e<i;e+=864e5)G(new Date(e),!0)||(r=r||e>a&&e<i,e<o&&(!s||e>s)?s=e:e>o&&(!l||e<l)&&(l=e));for(let a=0;a<n.config.showMonths;a++){const i=n.daysContainer.children[a];for(let a=0,p=i.children.length;a<p;a++){const p=i.children[a],m=p.dateObj.getTime(),f=s>0&&m<s||l>0&&m>l;f?(p.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((e=>{p.classList.remove(e)}))):r&&!f||(["startRange","inRange","endRange","notAllowed"].forEach((e=>{p.classList.remove(e)})),void 0!==e&&(e.classList.add(t<=n.selectedDates[0].getTime()?"startRange":"endRange"),o<t&&m===o?p.classList.add("startRange"):o>t&&m===o&&p.classList.add("endRange"),m>=s&&(0===l||m<=l)&&(u=o,d=t,(c=m)>Math.min(u,d)&&c<Math.max(u,d))&&p.classList.add("inRange")))}}var c,u,d}function te(){!n.isOpen||n.config.static||n.config.inline||ie()}function ne(e){return t=>{const o=n.config[`_${e}Date`]=n.parseDate(t,n.config.dateFormat),a=n.config[`_${"min"===e?"max":"min"}Date`];void 0!==o&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=o.getHours()>0||o.getMinutes()>0||o.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((e=>G(e))),n.selectedDates.length||"min"!==e||w(o),ve()),n.daysContainer&&(re(),void 0!==o?n.currentYearElement[e]=o.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!a&&void 0!==o&&a.getFullYear()===o.getFullYear())}}function oe(){return n.config.wrap?e.querySelector("[data-input]"):e}function ae(){"object"!=typeof n.config.locale&&void 0===M.l10ns[n.config.locale]&&n.config.errorHandler(new Error(`flatpickr: invalid locale ${n.config.locale}`)),n.l10n=Object.assign(Object.assign({},M.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?M.l10ns[n.config.locale]:void 0),A.K=`(${n.l10n.amPM[0]}|${n.l10n.amPM[1]}|${n.l10n.amPM[0].toLowerCase()}|${n.l10n.amPM[1].toLowerCase()})`,void 0===Object.assign(Object.assign({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr&&void 0===M.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=C(n),n.parseDate=T({config:n.config,l10n:n.l10n})}function ie(e){if("function"==typeof n.config.position)return void n.config.position(n,e);if(void 0===n.calendarContainer)return;pe("onPreCalendarPosition");const t=e||n._positionElement,o=Array.prototype.reduce.call(n.calendarContainer.children,((e,t)=>e+t.offsetHeight),0),a=n.calendarContainer.offsetWidth,i=n.config.position.split(" "),r=i[0],s=i.length>1?i[1]:null,l=t.getBoundingClientRect(),c=window.innerHeight-l.bottom,u="above"===r||"below"!==r&&c<o&&l.top>o,d=window.pageYOffset+l.top+(u?-o-2:t.offsetHeight+2);if(m(n.calendarContainer,"arrowTop",!u),m(n.calendarContainer,"arrowBottom",u),n.config.inline)return;let p=window.pageXOffset+l.left,f=!1,h=!1;"center"===s?(p-=(a-l.width)/2,f=!0):"right"===s&&(p-=a-l.width,h=!0),m(n.calendarContainer,"arrowLeft",!f&&!h),m(n.calendarContainer,"arrowCenter",f),m(n.calendarContainer,"arrowRight",h);const g=window.document.body.offsetWidth-(window.pageXOffset+l.right),v=p+a>window.document.body.offsetWidth,y=g+a>window.document.body.offsetWidth;if(m(n.calendarContainer,"rightMost",v),!n.config.static)if(n.calendarContainer.style.top=`${d}px`,v)if(y){const e=function(){let e=null;for(let t=0;t<document.styleSheets.length;t++){const n=document.styleSheets[t];try{n.cssRules}catch(e){continue}e=n;break}return null!=e?e:function(){const e=document.createElement("style");return document.head.appendChild(e),e.sheet}()}();if(void 0===e)return;const t=window.document.body.offsetWidth,o=Math.max(0,t/2-a/2),i=".flatpickr-calendar.centerMost:before",r=".flatpickr-calendar.centerMost:after",s=e.cssRules.length,c=`{left:${l.left}px;right:auto;}`;m(n.calendarContainer,"rightMost",!1),m(n.calendarContainer,"centerMost",!0),e.insertRule(`${i},${r}${c}`,s),n.calendarContainer.style.left=`${o}px`,n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=`${g}px`;else n.calendarContainer.style.left=`${p}px`,n.calendarContainer.style.right="auto"}function re(){n.config.noCalendar||n.isMobile||(K(),he(),j())}function se(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function le(e){e.preventDefault(),e.stopPropagation();const t=g(y(e),(e=>e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")));if(void 0===t)return;const o=t,a=n.latestSelectedDateObj=new Date(o.dateObj.getTime()),i=(a.getMonth()<n.currentMonth||a.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=o,"single"===n.config.mode)n.selectedDates=[a];else if("multiple"===n.config.mode){const e=fe(a);e?n.selectedDates.splice(parseInt(e),1):n.selectedDates.push(a)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=a,n.selectedDates.push(a),0!==U(a,n.selectedDates[0],!0)&&n.selectedDates.sort(((e,t)=>e.getTime()-t.getTime())));if(_(),i){const e=n.currentYear!==a.getFullYear();n.currentYear=a.getFullYear(),n.currentMonth=a.getMonth(),e&&(pe("onYearChange"),K()),pe("onMonthChange")}if(he(),j(),ve(),i||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():P(o),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){const e="single"===n.config.mode&&!n.config.enableTime,t="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(e||t)&&se()}S()}n.parseDate=T({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=D,n._setHoursFromDate=w,n._positionCalendar=ie,n.changeMonth=W,n.changeYear=z,n.clear=function(e=!0,t=!0){if(n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){const{hours:e,minutes:t,seconds:o}=x(n.config);k(e,t,o)}n.redraw(),e&&pe("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),pe("onClose")},n._createElement=f,n.destroy=function(){void 0!==n.config&&pe("onDestroy");for(let e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){const e=n.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((e=>{try{delete n[e]}catch(e){}}))},n.isEnabled=G,n.jumpToDate=O,n.open=function(e,t=n._positionElement){if(!0===n.isMobile){if(e){e.preventDefault();const t=y(e);t&&t.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void pe("onOpen")}if(n._input.disabled||n.config.inline)return;const o=n.isOpen;n.isOpen=!0,o||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),pe("onOpen"),ie(t)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((()=>n.hourElement.select()),50))},n.redraw=re,n.set=function(e,t){if(null!==e&&"object"==typeof e){Object.assign(n.config,e);for(const t in e)void 0!==ce[t]&&ce[t].forEach((e=>e()))}else n.config[e]=t,void 0!==ce[e]?ce[e].forEach((e=>e())):i.indexOf(e)>-1&&(n.config[e]=p(t));n.redraw(),ve(!0)},n.setDate=function(e,t=!1,o=n.config.dateFormat){if(0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);ue(e,o),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),O(void 0,t),w(),0===n.selectedDates.length&&n.clear(!1),ve(t),t&&pe("onChange")},n.toggle=function(e){if(!0===n.isOpen)return n.close();n.open(e)};const ce={locale:[ae,B],showMonths:[q,a,H],minDate:[O],maxDate:[O],clickOpens:[()=>{!0===n.config.clickOpens?(D(n._input,"focus",n.open),D(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function ue(e,t){let o=[];if(e instanceof Array)o=e.map((e=>n.parseDate(e,t)));else if(e instanceof Date||"number"==typeof e)o=[n.parseDate(e,t)];else if("string"==typeof e)switch(n.config.mode){case"single":case"time":o=[n.parseDate(e,t)];break;case"multiple":o=e.split(n.config.conjunction).map((e=>n.parseDate(e,t)));break;case"range":o=e.split(n.l10n.rangeSeparator).map((e=>n.parseDate(e,t)))}else n.config.errorHandler(new Error(`Invalid date supplied: ${JSON.stringify(e)}`));n.selectedDates=n.config.allowInvalidPreload?o:o.filter((e=>e instanceof Date&&G(e,!1))),"range"===n.config.mode&&n.selectedDates.sort(((e,t)=>e.getTime()-t.getTime()))}function de(e){return e.slice().map((e=>"string"==typeof e||"number"==typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"==typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e)).filter((e=>e))}function pe(e,t){if(void 0===n.config)return;const o=n.config[e];if(void 0!==o&&o.length>0)for(let e=0;o[e]&&e<o.length;e++)o[e](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(me("change")),n.input.dispatchEvent(me("input")))}function me(e){const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function fe(e){for(let t=0;t<n.selectedDates.length;t++)if(0===U(n.selectedDates[t],e))return""+t;return!1}function he(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach(((e,t)=>{const o=new Date(n.currentYear,n.currentMonth,1);o.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=b(o.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=o.getMonth().toString(),e.value=o.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function ge(e){return n.selectedDates.map((t=>n.formatDate(t,e))).filter(((e,t,o)=>"range"!==n.config.mode||n.config.enableTime||o.indexOf(e)===t)).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function ve(e=!0){void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=ge(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=ge(n.config.altFormat)),!1!==e&&pe("onValueUpdate")}function ye(e){const t=y(e),o=n.prevMonthNav.contains(t),a=n.nextMonthNav.contains(t);o||a?W(o?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=e,n.isOpen=!1,function(){const a=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e.dataset||{}))),t),l={};n.config.parseDate=s.parseDate,n.config.formatDate=s.formatDate,Object.defineProperty(n.config,"enable",{get:()=>n.config._enable,set:e=>{n.config._enable=de(e)}}),Object.defineProperty(n.config,"disable",{get:()=>n.config._disable,set:e=>{n.config._disable=de(e)}});const c="time"===s.mode;if(!s.dateFormat&&(s.enableTime||c)){const e=M.defaultConfig.dateFormat||r.dateFormat;l.dateFormat=s.noCalendar||c?"H:i"+(s.enableSeconds?":S":""):e+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||c)&&!s.altFormat){const e=M.defaultConfig.altFormat||r.altFormat;l.altFormat=s.noCalendar||c?"h:i"+(s.enableSeconds?":S K":" K"):e+` h:i${s.enableSeconds?":S":""} K`}Object.defineProperty(n.config,"minDate",{get:()=>n.config._minDate,set:ne("min")}),Object.defineProperty(n.config,"maxDate",{get:()=>n.config._maxDate,set:ne("max")});const u=e=>t=>{n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")};Object.defineProperty(n.config,"minTime",{get:()=>n.config._minTime,set:u("min")}),Object.defineProperty(n.config,"maxTime",{get:()=>n.config._maxTime,set:u("max")}),"time"===s.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,l,s);for(let e=0;e<a.length;e++)n.config[a[e]]=!0===n.config[a[e]]||"true"===n.config[a[e]];i.filter((e=>void 0!==n.config[e])).forEach((e=>{n.config[e]=p(n.config[e]||[]).map(o)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let e=0;e<n.config.plugins.length;e++){const t=n.config.plugins[e](n)||{};for(const e in t)i.indexOf(e)>-1?n.config[e]=p(t[e]).map(o).concat(n.config[e]):void 0===s[e]&&(n.config[e]=t[e])}s.altInputClass||(n.config.altInputClass=oe().className+" "+n.config.altInputClass),pe("onParseConfig")}(),ae(),n.input=oe(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=f(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),n._positionElement=n.config.positionElement||n._input):n.config.errorHandler(new Error("Invalid input element specified")),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;const e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&ue(e,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:(e=n.currentMonth,t=n.currentYear)=>1===e&&(t%4==0&&t%100!=0||t%400==0)?29:n.l10n.daysInMonth[e]},n.isMobile||function(){const e=window.document.createDocumentFragment();if(n.calendarContainer=f("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild((n.monthNav=f("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=f("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=f("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,q(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:()=>n.__hidePrevMonthArrow,set(e){n.__hidePrevMonthArrow!==e&&(m(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:()=>n.__hideNextMonthArrow,set(e){n.__hideNextMonthArrow!==e&&(m(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],he(),n.monthNav)),n.innerContainer=f("div","flatpickr-innerContainer"),n.config.weekNumbers){const{weekWrapper:e,weekNumbers:t}=function(){n.calendarContainer.classList.add("hasWeeks");const e=f("div","flatpickr-weekwrapper");e.appendChild(f("span","flatpickr-weekday",n.l10n.weekAbbreviation));const t=f("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}();n.innerContainer.appendChild(e),n.weekNumbers=t,n.weekWrapper=e}n.rContainer=f("div","flatpickr-rContainer"),n.rContainer.appendChild(H()),n.daysContainer||(n.daysContainer=f("div","flatpickr-days"),n.daysContainer.tabIndex=-1),j(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");const e=x(n.config);n.timeContainer=f("div","flatpickr-time"),n.timeContainer.tabIndex=-1;const t=f("span","flatpickr-time-separator",":"),o=v("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=o.getElementsByTagName("input")[0];const a=v("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=a.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=c(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:function(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}(e.hours)),n.minuteElement.value=c(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(o),n.timeContainer.appendChild(t),n.timeContainer.appendChild(a),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");const t=v("flatpickr-second");n.secondElement=t.getElementsByTagName("input")[0],n.secondElement.value=c(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(f("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(t)}return n.config.time_24hr||(n.amPM=f("span","flatpickr-am-pm",n.l10n.amPM[u((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}()),m(n.calendarContainer,"rangeMode","range"===n.config.mode),m(n.calendarContainer,"animate",!0===n.config.animate),m(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);const t=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!t&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){const e=f("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(e,n.element),e.appendChild(n.element),n.altInput&&e.appendChild(n.altInput),e.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((e=>{Array.prototype.forEach.call(n.element.querySelectorAll(`[data-${e}]`),(t=>D(t,"click",n[e])))})),n.isMobile)return void function(){const e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=f("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(e){}D(n.mobileInput,"change",(e=>{n.setDate(y(e).value,!1,n.mobileFormatStr),pe("onChange"),pe("onClose")}))}();const e=d(te,50);if(n._debouncedChange=d(S,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&D(n.daysContainer,"mouseover",(e=>{"range"===n.config.mode&&ee(y(e))})),D(window.document.body,"keydown",Q),n.config.inline||n.config.static||D(window,"resize",e),void 0!==window.ontouchstart?D(window.document,"touchstart",Y):D(window.document,"mousedown",Y),D(window.document,"focus",Y,{capture:!0}),!0===n.config.clickOpens&&(D(n._input,"focus",n.open),D(n._input,"click",n.open)),void 0!==n.daysContainer&&(D(n.monthNav,"click",ye),D(n.monthNav,["keyup","increment"],E),D(n.daysContainer,"click",le)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){const e=e=>y(e).select();D(n.timeContainer,["increment"],s),D(n.timeContainer,"blur",s,{capture:!0}),D(n.timeContainer,"click",I),D([n.hourElement,n.minuteElement],["focus","click"],e),void 0!==n.secondElement&&D(n.secondElement,"focus",(()=>n.secondElement&&n.secondElement.select())),void 0!==n.amPM&&D(n.amPM,"click",(e=>{s(e),S()}))}n.config.allowInput&&D(n._input,"blur",X)}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&w(n.config.noCalendar?n.latestSelectedDateObj:void 0),ve(!1)),a();const l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&l&&ie(),pe("onReady")}(),n}function D(e,t){const n=Array.prototype.slice.call(e).filter((e=>e instanceof HTMLElement)),o=[];for(let e=0;e<n.length;e++){const a=n[e];try{if(null!==a.getAttribute("data-fp-omit"))continue;void 0!==a._flatpickr&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=E(a,t||{}),o.push(a._flatpickr)}catch(e){console.error(e)}}return 1===o.length?o[0]:o}n(895),"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return D(this,e)},HTMLElement.prototype.flatpickr=function(e){return D([this],e)});var M=function(e,t){return"string"==typeof e?D(window.document.querySelectorAll(e),t):e instanceof Node?D([e],t):D(e,t)};M.defaultConfig={},M.l10ns={en:Object.assign({},l),default:Object.assign({},l)},M.localize=e=>{M.l10ns.default=Object.assign(Object.assign({},M.l10ns.default),e)},M.setDefaults=e=>{M.defaultConfig=Object.assign(Object.assign({},M.defaultConfig),e)},M.parseDate=T({}),M.formatDate=C({}),M.compareDates=U,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(e){return D(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof e?parseInt(e,10):e))},"undefined"!=typeof window&&(window.flatpickr=M);var S=n(756),O=n(454),I=n(463),$=n(772);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function R(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=q(e);if(t){var a=q(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return K(this,n)}}function K(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var B=n(975).vsprintf,W=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(H(this,e),t.attributes.supportsTokens)return"textarea"==t.type?new Y(t,n):new Z(t,n)},Z=function(e){F(n,e);var t=j(n);function n(e){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H(this,n),(o=t.call(this,e.attributes.itemType,e.type,a)).Field=e,o.Field.TokenSelector=N(o),o.render(),o.setData(),o.Field.getField().on("ua-codemirror-ready",(function(){o.getCodeMirrorEditor(),o.editor.setValue(o.editor.getValue()),o.renderTokens(),o.handleAddTokens(),o.renderTokensInRealTime()})),o}return R(n,[{key:"render",value:function(){this.RenderTokenSelector=new z(this.Field,this.tokens)}},{key:"setData",value:function(){this.data={tokenRenderingDebounce:200}}},{key:"getCodeMirrorEditor",value:function(){this.editor=this.Field.fieldCM}},{key:"handleAddTokens",value:function(){var e=this;this.Field.field.off("ua-add-token").on("ua-add-token",(function(t,n){["date","time"].includes(e.Field.attributes.fieldType)&&e.editor.setValue(""),e.insertTextAtCursor("{{".concat(n.id,"}}")),e.renderTokens({ignoreRequiresUserModal:!0}),["date","time"].includes(e.Field.attributes.fieldType)||e.editor.focus(),["date","time"].includes(e.Field.attributes.fieldType)&&e.Field.setValue("{{".concat(n.id,"}}"))}))}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}},{key:"insertTextAtCursor",value:function(e){this.editor.doc.replaceRange(e,this.editor.doc.getCursor())}},{key:"renderTokensInRealTime",value:function(){var e=this;this.editor.on("changes",(0,S.Ds)((function(t){e.renderTokens()}),this.data.tokenRenderingDebounce))}},{key:"renderTokens",value:function(e){var t=this;e=Object.assign({ignoreRequiresUserModal:!1},e);for(var n=this.editor.getSearchCursor(/\{\{(.*?)\}\}/),o=function(){var o={from:n.from(),to:n.to()},a=t.editor.getRange(o.from,o.to).replace("{{","").replace("}}",""),i=t.createTokenDOMNode(a),r=t.editor.markText(o.from,o.to,{replacedWith:i});if("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(t.tokensThatRequireUser.includes(a)||a.startsWith("USERMETA:")||a.startsWith("POSTMETA:"))&&!e.ignoreRequiresUserModal)return t.tokenNeedsUserModal(i,{removeToken:function(){var e=r.find();r.clear(),t.editor.replaceRange("",e.from,e.to)}}),"break";t.Field.attributes.isReadOnly||i.addEventListener("click",(function(){if(!i.classList.contains("uap-token--cm-focused")){i.classList.add("uap-token--cm-focused");var e=function(){i.classList.remove("uap-token--cm-focused"),document.removeEventListener("mouseup",n),document.removeEventListener("copy",o),document.removeEventListener("keydown",s),document.removeEventListener("keydown",l)},n=function(t){i===t.target||i.contains(t.target)||e()};document.addEventListener("mouseup",n);var o=function(t){e(),(0,S.vQ)("{{".concat(a,"}}"))};document.addEventListener("copy",o);var s=function(n){var o=n.keyCode||n.charCode;if(8==o||46==o){var a=r.find();r.clear(),t.editor.replaceRange("",a.from,a.to),e()}};document.addEventListener("keydown",s);var l=function(n){var o=n.keyCode||n.charCode;if(37==o||39==o){e();var a,i=r.find();37==o&&(a=i.from),39==o&&(a=i.to),t.editor.focus(),t.editor.setCursor(a)}};document.addEventListener("keydown",l)}}))};n.findNext()&&"break"!==o(););}},{key:"tokenNeedsUserModal",value:function(e){var t,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,S.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var a=UncannyAutomator.recipe.isLive;(t=new $.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.mustRunOnUser,[e.outerHTML]),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.description,"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var e=t.getElements();e.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,S.R$)(!0,(function(e){t.destroy(),n.renderTokens()}),(function(t){e.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),a&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1),(0,S.$K)(o.allowedConfirm)&&o.allowedConfirm()},onCancel:function(){t.destroy(),(0,S.$K)(o.removeToken)&&o.removeToken(),(0,S.$K)(o.allowedCancel)&&o.allowedCancel()}})}else(t=new $.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.mustRunOnUser,[e.outerHTML]),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(B(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.description,[UncannyAutomator.i18n.uncannyAutomatorPro]),' <a href="').concat((0,S.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <span class="uap-icon uap-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.upgradeLater,' <a href="').concat((0,S.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uap-icon uap-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){t.destroy(),(0,S.YQ)((0,S.XE)("https://automatorplugin.com/pricing/",{medium:"add_token",campaign:"update_to_pro",content:"requires_user_data"})),(0,S.$K)(o.removeToken)&&o.removeToken(),(0,S.$K)(o.forbiddenConfirm)&&o.forbiddenConfirm()},onCancel:function(){t.destroy(),(0,S.$K)(o.removeToken)&&o.removeToken(),(0,S.$K)(o.forbiddenCancel)&&o.forbiddenCancel()}})}}]),n}(I.Z),Y=function(e){F(n,e);var t=j(n);function n(e){var o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H(this,n),(o=t.call(this,e,a)).Field.attributes.supportsTinyMCE&&o.Field.getField().on("ua-tinymce-ready",(function(){o.getTinyMCEEditor(),o.addStylesToEditor(),setTimeout((function(){o.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),o.data.tokenRenderingDebounce),setTimeout((function(){o.parseHTMLTokensInPlainTextarea()}),o.data.tokenRenderingDebounce),o.handleAddTokens(),o.handleHTMLTokensInPlainTextarea(),o.handlePlainTokensInTinyMCE()})),o}return R(n,[{key:"setData",value:function(){this.data={tokenRenderingDebounce:200,tokenCSSClass:"uap-token-tinymce"}}},{key:"render",value:function(){this.RenderTokenSelector=new z(this.Field,this.tokens)}},{key:"insertTextAtCursor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!(0,S.$K)(this.tinyMCEeditor)||(0,S.$K)(this.tinyMCEeditor)&&this.tinyMCEeditor.hidden)this.editor.doc.replaceRange(t,this.editor.doc.getCursor());else{t=t.replace("{{","").replace("}}","");var n=this.createTokenDOMNode(t);"anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(this.tokensThatRequireUser.includes(t)||t.startsWith("USERMETA:")||t.startsWith("POSTMETA:"))?this.tokenNeedsUserModal(n,{allowedConfirm:function(){e.tinyMCEeditor.execCommand("mceInsertContent",!1,'<span class="'.concat(e.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(t,'">').concat(n.outerHTML,"</span>")),e.Field.getField().trigger("change input")}}):(this.tinyMCEeditor.execCommand("mceInsertContent",!1,'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="').concat(t,'">').concat(n.outerHTML,"</span>")),this.Field.getField().trigger("change input"))}}},{key:"getTinyMCEEditor",value:function(){this.tinyMCEeditor=this.Field.fieldTinyMCE}},{key:"addStylesToEditor",value:function(){this.tinyMCEeditor.dom.addStyle("\n\t\t\thtml body {\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\tfont-size: 15px;\n\t\t\t\tmargin-left: 12px;\n\t\t\t\tmargin-right: 12px;\n\t\t\t}\n\n\t\t\t.uap-token {\n\t\t\t\tdisplay: inline-flex;\n\t\t\t\talign-items: center;\n\t\t\t\tbackground: #eee;\n\t\t\t\tline-height: 1;\n\t\t\t\tpadding: 3px 8px;\n\t\t\t\tborder-radius: 150px;\n\n\t\t\t\tfont-size: 15px;\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\t-webkit-font-smoothing:antialiased;\n\t\t\t\t-moz-osx-font-smoothing:grayscale;\n\t\t\t}\n\n\t\t\t\t.uap-token-tinymce {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\tborder-radius: 150px;\n\t\t\t\t\tbox-shadow: 0 0 0 2px transparent;\n\t\t\t\t\ttransition: box-shadow 150ms ease-in-out;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\n\t\t\t\t.uap-token-tinymce[data-mce-selected=\"1\"] {\n\t\t\t\t\toutline: 0 !important;\n\t\t\t\t\tbox-shadow: 0 0 0 2px #0790e8;\n\t\t\t\t}\n\n\t\t\t\t.uap-token img {\n\t\t\t\t\twidth: 12px;\n\t\t\t\t\theight: 11px;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\tobject-position: center;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t.uap-token .uap-icon {\n\t\t\t\t\twidth: 14px;\n\t\t\t\t\theight: 14px;\n\t\t\t\t\tborder: 1px solid #444;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tfont-size: 9px;\n\t\t\t\t\tcolor: #444;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 15px;\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\topacity: .8;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\t\t.uap-token .uap-icon.uap-icon--bolt:before {\n\t\t\t\t\t\tcontent: '';\n\n\t\t\t\t\t\twidth: 9px;\n\t\t\t\t\t\theight: 9px;\n\n\t\t\t\t\t\tbackground-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 384 512'%3E%3Cpath fill='%23444' d='M377.8 167.9c-8.2-14.3-23.1-22.9-39.6-22.9h-94.4l28.7-87.5c3.7-13.8.8-28.3-7.9-39.7C255.8 6.5 242.5 0 228.2 0H97.7C74.9 0 55.4 17.1 52.9 37.1L.5 249.3c-1.9 13.8 2.2 27.7 11.3 38.2C20.9 298 34.1 304 48 304h98.1l-34.9 151.7c-3.2 13.7-.1 27.9 8.6 38.9 8.7 11.1 21.8 17.4 35.9 17.4 16.3 0 31.5-8.8 38.8-21.6l183.2-276.7c8.4-14.3 8.4-31.5.1-45.8zM160.1 457.4L206.4 256H47.5L97.7 48l127.6-.9L177.5 193H334L160.1 457.4z'%3E%3C/path%3E%3C/svg%3E\");\n\n\t\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t\tbackground-position: center;\n\t\t\t\t\t\tbackground-repeat: no-repeat;\n\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 50%;\n\t\t\t\t\t\tleft: 50%;\n\t\t\t\t\t\ttransform: translate(-50%,-50%);\n\t\t\t\t\t}\n\n\t\t\t\t.uap-token__name {\n\t\t\t\t\tcolor: #444444;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid {\n\t\t\t\t\t\tbackground: #f9e2e2;\n\t\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid .uap-icon {\n\t\t\t\t\t\tcolor: #c00;\n\t\t\t\t\t\tborder-color: #c00;\n\t\t\t\t\t}\n\n\t\t")}},{key:"handleHTMLTokensInPlainTextarea",value:function(){var e=this;this.Field.getField().on("change input",(0,S.Ds)((function(){e.parseHTMLTokensInPlainTextarea()}),this.data.tokenRenderingDebounce)),this.Field.getField().on("ua-tinymce-activate-text-view",(function(){setTimeout((function(){e.parseHTMLTokensInPlainTextarea()}),e.data.tokenRenderingDebounce)}))}},{key:"handlePlainTokensInTinyMCE",value:function(){var e=this;this.Field.getField().on("ua-tinymce-activate-visual-view",(function(){setTimeout((function(){e.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),e.data.tokenRenderingDebounce)}))}},{key:"parsePlainTokensInTinyMCE",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({parseTokensInAttributes:!0},e);var t=this.tinyMCEeditor.getContent({format:"raw"}),n=this.renderTextWithTokens(t,{template:'<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="%2$s">%1$s</span>'),parseTokensInAttributes:e.parseTokensInAttributes});t!=n&&this.tinyMCEeditor.setContent(n.innerHTML)}},{key:"parseHTMLTokensInPlainTextarea",value:function(){var e=this.Field.getField().val(),t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll(".".concat(this.data.tokenCSSClass));if(n.length>0){n.forEach((function(e){var t=e.dataset.tokenId;e.outerHTML="{{".concat(t,"}}")})),e=t.innerHTML;try{this.editor.setValue(e)}catch(t){this.Field.getField().val(e)}}}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}}]),n}(Z),z=function(){function e(t,n){H(this,e),this.Field=t,this.tokens=n,this.getData(),this.getElements(),this.createWrapper(),this.createFilter(),this.createGroupsOfTokens(),this.listenToggleButton(),this.resizeDropdownOnWindowResize(),this.resizeDropdownOnWindowScroll(),this.refreshOnFieldChange(),this.search(),this.shouldSupportFilters()&&this.setFilter(!0)}return R(e,[{key:"getData",value:function(){this.data={isOpen:!1,position:"below"}}},{key:"getElements",value:function(){this.$elements={wrapper:null,toggleButton:null,searchField:null,dropdown:null,allGroups:null,dropdownGroupsContainer:null,dropdownTokens:null,noResultsOption:null}}},{key:"createWrapper",value:function(){var e=a()('\n\t\t\t<div class="form-variable">\n\t\t\t\t<div class="form-variable__element">\n\t\t\t\t\t<div class="form-variable__render-container"></div>\n\t\t\t\t\t<div class="form-variable__toggle">\n\t\t\t\t\t\t<span class="uap-icon uap-icon--asterisk"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__dropdown">\n\t\t\t\t\t<div class="form-variable__dropdown-container">\n\t\t\t\t\t\t<div class="form-variable__search">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tclass="form-variable__search-input" \n\t\t\t\t\t\t\t\tplaceholder="'.concat(UncannyAutomator.i18n.tokens.search,'"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form-variable__groups"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t')),t=[];"textarea"==this.Field.type&&t.push(this.Field.getField()),(0,S.$K)(this.Field.getFieldCM())&&t.push(this.Field.getFieldCM()),t.forEach((function(t){e.insertAfter(t),e.find(".form-variable__render-container").append(t)})),this.$elements.wrapper=e,this.$elements.renderContainer=e.find(".form-variable__render-container"),this.$elements.searchFieldContainer=e.find(".form-variable__search"),this.$elements.searchField=e.find(".form-variable__search-input"),this.$elements.toggleButton=e.find(".form-variable__toggle"),this.$elements.dropdown=e.find(".form-variable__dropdown"),this.$elements.dropdownGroupsContainer=e.find(".form-variable__groups")}},{key:"createFilter",value:function(){var e=this;if(this.shouldSupportFilters()){var t=this.Field.attributes.fieldType,n=(0,S.$K)(UncannyAutomator.i18n.tokens.tokenType[t])?UncannyAutomator.i18n.tokens.tokenType[t]:t,o=a()('\n\t\t\t\t<div class="form-variable__filter"></div>\n\t\t\t'),i=new ee("checkbox",{optionCode:"token__enableFilter",currentValue:!0,label:'<span class="form-variable__filter-label">'+B(UncannyAutomator.i18n.tokens.filter,['<span class="form-variable__filter-type">'.concat(n,"</span>")])+"<span>"}),r=i.createFormElement();o.prepend(r),this.$elements.searchFieldContainer.append(o),this.$elements.filterContainer=o,r.on("automator:field:change",(function(){i.getValue()?e.setFilter(!0):e.setFilter(!1)}))}}},{key:"createGroupsOfTokens",value:function(){var e=this,t=this.$elements.wrapper.find(".form-variable__groups");this.tokens.forEach((function(n,o){t.append(e.createIndividualGroupOfTokens(o,n))})),this.$elements.allGroups=t.find(".form-variable__group"),this.$elements.dropdownTokens=t.find(".form-variable__group-item"),this.$elements.noResultsOption=a()('\n\t\t\t<div class="form-variable__group-item-no-results form-variable__group-item-no-results--hide">\n\t\t\t\t<div class="form-variable__group-item-no-results-title">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.tokens.noResults,'\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__group-item-no-results-description">\n\t\t\t\t\t').concat(this.shouldSupportFilters()?UncannyAutomator.i18n.tokens.noResultsDescriptionWithFilter:UncannyAutomator.i18n.tokens.noResultsDescription,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),t.append(this.$elements.noResultsOption)}},{key:"createIndividualGroupOfTokens",value:function(e,t){var n=this,o=a()('\n\t\t\t<div \n\t\t\t\tclass="form-variable__group"\n\t\t\t\tdata-id="'.concat(t.id,'"\n\t\t\t>\n\t\t\t\t<div class="form-variable__group-source">\n\t\t\t\t\t<div class="form-variable-group-source__icon"></div>\n\t\t\t\t\t<div class="form-variable-group-source__description"></div>\n\t\t\t\t\t<div class="form-variable-group-source__toggle">\n\t\t\t\t\t\t<span class="form-variable-group-source__toggle-icon"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span class="form-variable__group-children"></span>\n\t\t\t</div>\n\t\t')),i=t.name;"string"==!L(i)&&(i.html.clone(),function(e){throw new TypeError('"groupName" is read-only')}()),o.find(".form-variable-group-source__description").append(t.name);var r=t.icon.clone();o.find(".form-variable-group-source__icon").append(r);var s=o.find(".form-variable__group-source");s.on("click",(function(){o.toggleClass("form-variable__group--open")}));var l=o.find(".form-variable__group-children");return t.tokens.forEach((function(e){var t=(0,S.xb)(e.name)?"":e.name,o=a()('\n\t\t\t\t<div \n\t\t\t\t\tclass="form-variable__group-item"\n\t\t\t\t\tdata-search="'.concat(t.trim().toLowerCase().replace(/\s/g,""),'"\n\t\t\t\t\tdata-type="').concat(e.type,'"\n\t\t\t\t>\n\t\t\t\t\t<span>').concat(t,"</span>\n\n\t\t\t\t\t").concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(0,S.$K)(e.requiresUser)&&e.requiresUser?'<span class="form-variable__group-item-tag">'+UncannyAutomator.i18n.needsUserData+"</span>":"","\n\t\t\t\t</div>\n\t\t\t")),i=function(e){n.Field.field.trigger("ua-add-token",e)};o.on("click",(function(){n.close(),(0,S.$K)(e.beforeAdded)?e.beforeAdded(i):i(e)})),l.append(o)})),this.tokens[e].$toggleButton=s,o}},{key:"addAllTokensInGroupCallback",value:function(e){var t=this,n=a()("<div></div>"),o=new ee("checkbox",{label:UncannyAutomator.i18n.tokens.includeTokenName,currentValue:!0});n.append(o.createFormElement());var i=new ee("checkbox",{label:UncannyAutomator.i18n.tokens.includeTokenID,currentValue:!1});n.append(i.createFormElement());var r=e.name instanceof jQuery?e.name.text():e.name,s=a()('<div class="description">'.concat(B(UncannyAutomator.i18n.tokens.addAllDescription,[r,(0,S.xb)(this.Field.attributes.label)?UncannyAutomator.i18n.noLabel:this.Field.attributes.label]),"</div>"));n.append(s);var l=new $.Z({title:UncannyAutomator.i18n.tokens.addTokens,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.addTokens}});l.setEvents({onConfirm:function(){try{t.close();var n=o.getValue(),a=i.getValue(),r="",s=t.Field.getValue();r+=s,"textarea"==t.Field.type&&(r+="<hr>"),e.tokens.forEach((function(e){var o="";n&&(o+="".concat(e.name)),a&&(n&&(o+=" "),o+="(".concat(e.id,")")),(n||a)&&(o+=": "),o+="{{".concat(e.id,"}}"),"textarea"==t.Field.type?o+="<br><br>":o+=" | ",r+=o})),t.Field.setValue(r),"textarea"==t.Field.type&&(0,S.$K)(t.Field.fieldTinyMCE)&&!t.Field.fieldTinyMCE.hidden&&t.Field.getField().trigger("ua-tinymce-activate-visual-view")}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e),alert("Debugging: Couldn't add all tokens. Enable debug mode and check the console.")}l.destroy()},afterHide:function(){l.destroy()}})}},{key:"listenToggleButton",value:function(){var e=this;this.$elements.toggleButton.on("click",(function(){e.data.isOpen?e.close():e.open()}))}},{key:"search",value:function(){var e=this;this.$elements.searchField.on("input",(0,S.P2)((function(){var t=e.$elements.searchField.val();t=t.trim().toLowerCase().replace(/\s/g,""),(0,S.xb)(t)?(e.$elements.allGroups.removeClass("form-variable__group--open"),e.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-search")):(e.$elements.allGroups.addClass("form-variable__group--open"),e.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-search"),e.$elements.dropdownTokens.filter((function(e,n){return-1!==n.dataset.search.search(t)})).removeClass("form-variable__group-item--hidden-by-search")),e.updateGroupsOfTokensVisibility()}),30))}},{key:"setFilter",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){this.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-filter");var n=this.$elements.dropdownTokens.filter((function(t,n){return("int"==n.dataset.type&&"float"==e.Field.attributes.fieldType?"float":n.dataset.type)==e.Field.attributes.fieldType}));n.removeClass("form-variable__group-item--hidden-by-filter")}else this.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-filter");this.updateGroupsOfTokensVisibility()}},{key:"updateGroupsOfTokensVisibility",value:function(){var e=!1;this.$elements.allGroups.removeClass("form-variable__group--without-available-tokens"),this.$elements.allGroups.filter((function(t,n){n.querySelectorAll(".form-variable__group-item:not(.form-variable__group-item--hidden-by-filter):not(.form-variable__group-item--hidden-by-search)").length>0?e=!0:n.classList.add("form-variable__group--without-available-tokens")})),e?this.$elements.noResultsOption.addClass("form-variable__group-item-no-results--hide"):this.$elements.noResultsOption.removeClass("form-variable__group-item-no-results--hide")}},{key:"open",value:function(){if(["date","time"].includes(this.Field.attributes.fieldType))try{this.Field.flatpickrInstance.close()}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}this.$elements.wrapper.addClass("form-variable--open"),this.data.isOpen=!0,this.closeWhenClickedOutside(),this.$elements.searchField.val("").trigger("input").css({"padding-right":"".concat(((0,S.$K)(this.$elements.filterContainer)?this.$elements.filterContainer.outerWidth():0)+12,"px")}),this.$elements.searchField.focus(),this.setDropdownDirection(),this.setDropdownHeight(),this.addContextMenus()}},{key:"addContextMenus",value:function(){var e=this;this.tokens.forEach((function(t,n){try{var o=new uap.ContextMenu({id:"tokens",$element:t.$toggleButton[0]});e.tokens[n].contextMenu=o;var a=o.addGroup({id:"testing",name:UncannyAutomator.i18n.debuggingTools});"advanced"==t.id?a.addItem({id:"add-all-tokens",name:UncannyAutomator.i18n.tokens.addAllTokensInGroup,disabled:!0}):a.addItem({id:"add-all-tokens",name:UncannyAutomator.i18n.tokens.addAllTokensInGroup,callback:function(){e.addAllTokensInGroupCallback(t)}})}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}))}},{key:"close",value:function(){this.$elements.wrapper.removeClass("form-variable--open"),this.data.isOpen=!1,this.$elements.searchField.val("").trigger("input"),a()(document).off("mouseup.uap-token-selector-click-outside"),this.tokens.forEach((function(e,t){try{e.contextMenu.destroy()}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}))}},{key:"destroy",value:function(){this.$elements.renderContainer.children().insertAfter(this.$elements.wrapper),this.$elements.wrapper.remove()}},{key:"closeWhenClickedOutside",value:function(){var e=this;a()(document).on("mouseup.uap-token-selector-click-outside",(function(t){var n=e.$elements.wrapper;n.is(t.target)||0!==n.has(t.target).length||e.close()}))}},{key:"getDropdownPosition",value:function(){var e=a()(window),t={};t.above=this.$elements.wrapper.offset().top-e.scrollTop(),t.below=e.height()-(t.above+this.$elements.wrapper.outerHeight()),"textarea"==this.Field.type&&(t.below=e.height()-(t.above+38)),this.$elements.dropdown.addClass("uo-realsize");var n=this.$elements.dropdown.outerHeight()+110;return this.$elements.dropdown.removeClass("uo-realsize"),"textarea"==this.Field.type?t.hasSpaceBelow=!0:t.hasSpaceBelow=t.below>=n,t}},{key:"setDropdownDirection",value:function(){var e=this.getDropdownPosition();this.$elements.wrapper.removeClass("form-variable--above form-variable--below"),e.below>e.above||e.hasSpaceBelow?(this.$elements.wrapper.addClass("form-variable--below"),this.data.position="below"):(this.$elements.wrapper.addClass("form-variable--above"),this.data.position="above")}},{key:"setDropdownHeight",value:function(){if(this.data.isOpen){var e=this.getDropdownPosition()[this.data.position]-this.$elements.searchField.outerHeight()-45;this.$elements.dropdownGroupsContainer.css({"max-height":"".concat(e,"px")})}}},{key:"focusSearchField",value:function(){this.$elements.searchField.focus()}},{key:"resizeDropdownOnWindowResize",value:function(){var e=this;a()(window).on("resize",(0,S.P2)((function(){e.setDropdownDirection(),e.setDropdownHeight()}),20))}},{key:"resizeDropdownOnWindowScroll",value:function(){var e=this;a()(window).on("scroll",(0,S.Ds)((function(){e.setDropdownDirection(),e.setDropdownHeight()}),300))}},{key:"refreshOnFieldChange",value:function(){var e=this;this.Field.formElement.on("automator:field:change",(function(){e.setDropdownDirection(),e.setDropdownHeight()}))}},{key:"shouldSupportFilters",value:function(){var e=this.Field.attributes.fieldType;return["email","int","float","url","date","time"].includes(e)}}]),e}();function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var X=n(975).vsprintf,Q=function(){function e(t,n){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;G(this,e),this.type=t,this.attributes=this.setAttributes(n),this.customValidationFunction=a,o&&this.createFormElement()}var t,n;return t=e,n=[{key:"createFormElement",value:function(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=null,i=this.type,r=this.attributes;if((0,S.d3)(i,(0,S.ew)())){var s=a()("<div/>",{class:"form-element"});(0,S.$K)(r.formElementClass)&&s.addClass(r.formElementClass);var l,c,u,d={name:r.optionCode,id:r.uniqueFieldID,"data-isajax":r.isAjax,"data-targetfield":r.targetField,"data-integrationid":r.integrationID,"data-endPoint":r.endPoint,"data-supportsTokens":r.supportsTokens,"data-supportsTinymce":r.supportsTinyMCE,"data-required":r.isRequired,"data-item_type":r.itemType,"data-item-id":r.itemId,"data-option-group":r.groupId,"data-is-hidden":r.isHidden,"data-is-child-field":r.isChildField};switch(i){case"select":l=a()("<div/>",{class:"form-select"}),this.fieldContainer=l,c=a()("<select/>",a().extend({},d,{"data-type":"select",class:"form-element__select","data-supports-custom-value":r.supportsCustomValue})),r.supportsMultipleValues&&c.prop("multiple","multiple"),this.field=c;var p,m,f=!1,h=0;r.hasDefaultValue&&(p=(0,S.xb)(r.defaultValue.option_value)||(0,S.xb)(r.defaultValue.option_name)?r.defaultValue:r.defaultValue.option_value);var g=a()('<optgroup\n\t\t\t\t\t\t\ttitle="form-element__select-normal-options"\n\t\t\t\t\t\t\tclass="form-element__select-normal-options">\n\t\t\t\t\t\t</optgroup>');if(r.options=r.options.filter((function(e){return"automator_custom_value"!==e.value})),a().each(r.options,(function(e,t){var n=a()("<option/>",{value:t.value,text:t.text});r.hasDefaultValue&&(0,S.A5)(p,e)&&(n.prop("selected",!0),m=!0,f=!0),r.hasValue&&(0,S.A5)(r.currentValue,t.value)&&(n.prop("selected",!0),f=!0),n.appendTo(g),h++})),g.appendTo(c),r.supportsMultipleValues){if(!(0,S.xb)(r.currentValue))try{c.val(r.currentValue)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}(0,S.xb)(c.val())||(f=!0)}if(r.hasDefaultValue&&!m&&!(0,S.xb)(r.defaultValue.option_value)&&!(0,S.xb)(r.defaultValue.option_name)){var v=a()("<option/>",{value:r.defaultValue.option_value,text:r.defaultValue.option_name});r.hasValue||(0,S.A5)(r.defaultValue.option_value,r.currentValue)||(v.prop("selected",!0),f=!0),v.prependTo(c),h++}if(r.hasPlaceholder&&(c.prepend("<option></option>"),r.hasDefaultValue||r.hasValue||c.find("option:selected").prop("selected",!1)),r.supportsCustomValue){var y=r.customValue,_=a()('\n\t\t\t\t\t\t\t<optgroup label="'.concat(UncannyAutomator.i18n.validation.field.select.otherOptions,'">\n\t\t\t\t\t\t\t\t<option value="automator_custom_value">').concat(UncannyAutomator.i18n.validation.field.select.customValue,"</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t"));c.append(_),r.hasValue&&(0,S.A5)(r.currentValue,"automator_custom_value")&&(_.find("option").attr("selected",!0),f=!0),r.hasValue&&!f&&(_.find("option").attr("selected",!0),f=!0,y=r.currentValue),this.customValueField=new e("text",{itemId:r.itemId,itemType:r.itemType,isRequired:r.isRequired,isReadOnly:!1,supportsTinyMCE:!1,supportsCopyToClipboard:!1,supportsTokens:r.supportsTokens,isAjax:!1,fieldType:"text",optionCode:"".concat(r.optionCode,"_custom"),label:"",description:r.hasCustomValueDescription?r.customValueDescription:void 0,placeholder:"",isHidden:!1,tokenName:X(UncannyAutomator.i18n.validation.field.select.customValueToken,[r.label]),defaultValue:null,currentValue:y,isChildField:!0,parentOptionCode:r.optionCode})}if(this.selectHasSelectedOption=f,0==h){var b=a()(new Option(UncannyAutomator.i18n.noResults,"",!0,!0));b.prop("disabled",!0),this.field.find(".form-element__select-normal-options").append(b),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}c.on("change",(function(e,t){s.trigger("automator:field:change",t)}));break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":var w="form-input form-input--".concat(i);if(l=a()("<div/>",{class:w}),this.$fakeCodemirrorField=a()("<div/>",{class:"form-element__input-cm"}),l.append(this.$fakeCodemirrorField),this.fieldContainer=l,c=a()("<input/>",a().extend({},d,{class:"form-element__input",type:"text","data-type":i})),(0,S.$K)(r.maxLength)&&c.prop("maxlength",r.maxLength),this.field=c,r.supportsTokens&&l.addClass("form-input--token"),r.hasPlaceholder&&c.prop("placeholder",r.placeholder),r.hasValue?c.prop("value",r.currentValue):r.hasDefaultValue&&c.prop("value",r.defaultValue),["date","time"].includes(r.fieldType)){var A=a()('\n\t\t\t\t\t\t\t\t<div class="form-element__input-clear" uap-tooltip="'.concat(UncannyAutomator.i18n.clear,'">\n\t\t\t\t\t\t\t\t\t<span class="uap-icon uap-icon--times"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'));l.addClass("form-input--has-clear"),this.$fakeCodemirrorField.append(A),A.on("click",(function(){t.clearValue()}))}c.on("input",(function(){s.trigger("automator:field:change")}));break;case"textarea":l=a()("<div/>",{class:"form-textarea"}),this.fieldContainer=l,c=a()("<textarea/>",a().extend(!0,d,{"data-type":"textarea",class:"form-element__textarea","data-item_type":r.itemType})),(0,S.$K)(r.maxLength)&&c.prop("maxlength",r.maxLength),this.field=c,r.supportsTokens&&l.addClass("form-textarea--token"),r.hasPlaceholder&&c.prop("placeholder",r.placeholder),this.$fakeCodemirrorField=a()("<div/>",{class:"form-element__input-cm"}),l.append(this.$fakeCodemirrorField),r.hasValue?c.text(r.currentValue):r.hasDefaultValue&&c.text(r.defaultValue),c.on("input",(function(){s.trigger("automator:field:change")}));break;case"checkbox":l=a()("<div/>",{class:"form-checkbox"}),this.fieldContainer=l;var k=a()("<label/>",{class:"form-checkbox__container"}),C=a()("<div/>",{class:"checkbox--show"});if(c=a()("<input/>",a().extend({},d,{type:"checkbox","data-type":"checkbox",class:"checkbox--hidden checkbox--primary"})),r.hasValue&&r.currentValue&&c.prop("checked",!0),this.field=c,r.hasLabel&&k.html(r.label),l.append(k),k.append(c),k.append(C),(0,S.$K)(r.isToggle)&&r.isToggle&&(l.addClass("form-checkbox--toggle"),(0,S.$K)(r.toggle))){if((0,S.$K)(r.toggle.on)){var T=a()("<span/>",{class:"checkbox-label checkbox-label--on"}).text(r.toggle.on);k.append(T)}if((0,S.$K)(r.toggle.off)){var U=a()("<span/>",{class:"checkbox-label checkbox-label--off"}).text(r.toggle.off);k.append(U)}}if((0,S.$K)(r.color))if((0,S.d3)(r.color,["gutenberg","green"]))switch(r.color){case"gutenberg":l.addClass("form-checkbox--toggle-gutenberg");break;case"green":l.addClass("form-checkbox--toggle-green")}else console.error(X("The color %s does not exists. Default color will be used instead.",[r.color]));(0,S.$K)(r.align)&&((0,S.d3)(r.align,["left","right"])?"right"==r.align&&l.addClass("form-checkbox--toggle-right"):console.error(X("The alignment %s does not exists. %s will be used instead.",[r.align,'"left"']))),c.on("change",(function(e,t){s.trigger("automator:field:change",t)})),c=k;break;case"radio":l=a()("<div/>",{class:"form-radio"}),this.fieldContainer=l;var x=a()(),E=a()();a().each(r.options,(function(e,t){var n=a()("<label/>",{class:"form-radio__container"});n.html(t.text);var o=a()("<input/>",a().extend({},d,{type:"radio","data-type":"radio",class:"radio--hidden radio--primary",value:t.value,name:d.id}));x=x.add(o);var i=a()("<div/>",{class:"radio--show"});n.append(o),n.append(i),(r.hasValue&&r.currentValue==t.value||!r.hasValue&&r.hasDefaultValue&&r.defaultValue==t.value)&&o.prop("checked",!0),E=E.add(n)})),this.field=E,c=E,x.on("change",(function(e,t){s.trigger("automator:field:change",t)}))}if(l.append(c),"checkbox"!=i&&(r.hasLabel||r.isRequired)&&(u=a()("<label/>",{class:"form-element__label",for:r.uniqueFieldID}),r.hasLabel&&u.html(r.label)),r.isRequired)if(l.addClass("form-element--required"),"checkbox"==r.fieldType){if(c.find("input").prop("required",!0),r.hasLabel){var D=a()("<span/>",{class:"form-element-label__required"});c.append(D)}}else if(c.prop("required",!0),r.hasLabel){var M=a()("<span/>",{class:"form-element-label__required"});u.append(M)}(0,S.$K)(r.isReadOnly)&&r.isReadOnly&&(["date","time"].includes(this.attributes.fieldType)||l.addClass("form-element--readonly"),"select"==r.fieldType?c.prop("disabled",!0):["checkbox","radio"].includes(r.fieldType)?c.find("input").prop("disabled",!0):c.prop("readonly",!0)),(r.hasLabel||r.isRequired)&&l.prepend(u);var O=a()("<div/>",{class:"form-element__error"});if(l.append(O),this.fieldContainer=l,r.hasDescription){var I=a()("<div/>",{class:"description"});I.html(r.description),l.append(I)}r.isHidden&&l.addClass("form-element--hidden"),s.append(l),"select"==r.fieldType&&(0,S.$K)(this.customValueField)&&(this.customValueFieldContainer=a()('<div class="form-select-custom">\n\t\t\t\t\t\t<div class="form-element-children"></div>\n\t\t\t\t\t</div>'),this.customValueFieldContainer.find(".form-element-children").append(this.customValueField.createFormElement()),s.append(this.customValueFieldContainer),"automator_custom_value"==this.getValue()?this.customValueFieldContainer.addClass("form-select-custom--visible"):this.customValueFieldContainer.removeClass("form-select-custom--visible")),o=s,this.formElement=s,n&&this.initLibraries(),this.onChange(),this.onFocus()}else console.error(X('The field type "%s" is invalid. The valid ones are %s',[i,(0,S.ew)().join(", ")]));return o}},{key:"setAttributes",value:function(e){if(e.fieldType=this.type,e.uniqueFieldID="".concat(e.optionCode,"__").concat((0,S.Ki)()),"checkbox"!=e.fieldType||(0,S.xb)(e.currentValue)||["true","false"].includes(e.currentValue)&&(e.currentValue="true"==e.currentValue,e.currentValue?e.hasValue=!0:e.hasValue=!1),(0,S.$K)(e.hasValue)||((0,S.xb)(e.currentValue)?e.hasValue=!1:e.hasValue=!0),(0,S.$K)(e.hasPlaceholder)||((0,S.xb)(e.placeholder)?e.hasPlaceholder=!1:e.hasPlaceholder=!0),(0,S.$K)(e.hasDefaultValue)||((0,S.xb)(e.defaultValue)?e.hasDefaultValue=!1:e.hasDefaultValue=!0),(0,S.$K)(e.hasLabel)||((0,S.xb)(e.label)?e.hasLabel=!1:e.hasLabel=!0),(0,S.$K)(e.hasDescription)||((0,S.xb)(e.description)?e.hasDescription=!1:e.hasDescription=!0),(0,S.$K)(e.isRequired)||(e.isRequired=!1),(0,S.$K)(e.isChildField)||(e.isChildField=!1),(0,S.$K)(e.supportsTokens)||(e.supportsTokens=!1),e.supportsTokens&&"select"==e.fieldType&&!["action","closure"].includes(e.itemType)&&(e.supportsTokens=!1),(0,S.$K)(e.isReadOnly)||(e.isReadOnly=!1),"select"==e.fieldType){if((0,S.$K)(e.supportsMultipleValues)||(e.supportsMultipleValues=!1),e.supportsMultipleValues&&(e.supportsCustomValue=!1),e.supportsMultipleValues)try{e.currentValue=JSON.parse(e.currentValue)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}(0,S.$K)(e.supportsCustomValue)||(e.supportsCustomValue=!1),e.hasCustomValueDescription=!(0,S.xb)(e.customValueDescription)}return"date"==e.fieldType&&(e.isReadOnly=!0,(0,S.$K)(e.dateFormat)||(e.dateFormat="Y-m-d"),(0,S.$K)(e.dateAltFormat)||(e.dateAltFormat=UncannyAutomator.format.date),(0,S.$K)(e.minDate)&&(e.minDate=e.minDate),(0,S.$K)(e.maxDate)&&(e.maxDate=e.maxDate),(0,S.$K)(e.supportsRange)||(e.supportsRange=!1)),"time"==e.fieldType&&(e.isReadOnly=!0,(0,S.$K)(e.timeFormat)||(e.timeFormat="h:i K"),(0,S.$K)(e.timeAltFormat)||(e.timeAltFormat="h:i K"),(0,S.$K)(e.minTime)&&(e.minTime=e.minTime),(0,S.$K)(e.maxTime)&&(e.maxTime=e.maxTime)),(0,S.$K)(e.supportsTinyMCE)||(e.supportsTinyMCE=!1),!(0,S.$K)(e.isToggle)&&(0,S.$K)(e.toggle)&&(e.isToggle=!0),(0,S.$K)(e.isAjax)||(e.isAjax=!1),(0,S.$K)(e.isHidden)||(e.isHidden=!1),(0,S.$K)(e.unsupportedTokens)||(e.unsupportedTokens=[]),e}},{key:"validate",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=null;t?(n=this.getFieldContainer(),e=this.getValue()):e=this.attributes.currentValue,this.type;var o={supportsTokens:this.attributes.supportsTokens,required:this.attributes.isRequired};return(0,O.OP)(n,this.type,e,o,this.customValidationFunction)}},{key:"onChange",value:function(){var e=this;this.formElement.on("automator:field:change",(function(t,n){(0,S.$K)(e.fieldContainer)&&((0,S.xb)(e.getValue())?e.fieldContainer.removeClass("form-input--has-value"):e.fieldContainer.addClass("form-input--has-value")),"select"==e.attributes.fieldType&&e.attributes.supportsCustomValue&&("automator_custom_value"==e.getValue()?e.customValueFieldContainer.addClass("form-select-custom--visible"):e.customValueFieldContainer.removeClass("form-select-custom--visible"));var o=function(){if(e.attributes.isAjax&&e.attributes.targetField!==e.attributes.optionCode&&e.doAJAX(),(0,S.$K)(e.attributes.isChildField)&&e.attributes.isChildField&&(0,S.$K)(e.attributes.parentOptionCode)){var t=(0,S.rz)(e.attributes.itemId,e.attributes.parentOptionCode);(0,S.$K)(t)&&t.doAJAX()}};if(e.attributes.isAjax&&(0,S.$K)(e.attributes.targetField)&&e.attributes.targetField!==e.attributes.optionCode&&(e.attributes.completedFirstLoad||(0,S.xb)(e.attributes.currentValue)&&!e.attributes.hasDefaultValue&&!e.attributes.completedFirstLoad)){var a=(0,S.rz)(e.attributes.itemId,e.attributes.targetField);a.setValue(null,!1),a.setCustomValue(null,!1)}return["select","radio","checkbox"].includes(e.attributes.fieldType)?o():((0,S.$K)(e.onChangeTimeout)&&clearTimeout(e.onChangeTimeout),e.onChangeTimeout=setTimeout((function(){o()}),1500)),!1}))}},{key:"onFocus",value:function(){var e=this;this.field.on("focusin",(function(t){e.attributes.isReadOnly&&a()(t.currentTarget).select()})),this.field.on("focusout",(function(){}))}},{key:"isReady",value:function(){var e=!1;return(0,S.$K)(UncannyAutomator.recipe.items[this.attributes.itemId])&&(e=!0),e}},{key:"doAJAX",value:function(){var e=this;if((0,S.$K)(this.getValue())?this.getValue():this.getMetaValue(),this.attributes.isAjax){var t=this;if(this.attributes.optionCode!=this.attributes.targetField&&(t=(0,S.rz)(this.attributes.itemId,this.attributes.targetField)),!(0,S.xb)(this.attributes.integrationId)&&!(0,S.xb)(this.attributes.endpoint)){this.startLoadingAnimation(),t.startLoadingAnimation();var n=this.getValue(),o=(0,S.$K)(t.getValue())?t.getValue():t.getMetaValue();(0,S.bN)(this.attributes.endpoint,{recipe_id:UncannyAutomator.recipe.id,integration_id:this.attributes.integrationId,item_id:this.attributes.itemId,group_id:this.attributes.groupId,field_id:this.attributes.optionCode,target_field:this.attributes.targetField,value:n,values:(0,S.q7)(this.attributes.itemId)},(function(n){if(e.stopLoadingAnimation(),t.stopLoadingAnimation(),"select"==t.getAttributes().fieldType&&a().isArray(n)){if(e.attributes.isAjax&&(0,S.$K)(e.attributes.targetField)&&e.attributes.targetField!==e.attributes.optionCode&&(e.attributes.completedFirstLoad||(0,S.xb)(e.attributes.currentValue)&&!e.attributes.hasDefaultValue&&!e.attributes.completedFirstLoad)&&(o=null),"automator_custom_value"==o){var i=t.getSelectCustomValue();o=(0,S.xb)(i)?null:i}t.setSelectOptions(n,!1),t.setValue(o)}else t.setValue(n);e.attributes.completedFirstLoad=!0}))}}}},{key:"getFormElement",value:function(){var e=this;if(this.isReady()){this.attributes.completedFirstLoad=!1;var t=!1;try{t=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields.reduce((function(t,n){return t||n.attributes.targetField==e.attributes.optionCode&&n.attributes.optionCode!=e.attributes.optionCode&&n.attributes.isAjax}),!1)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}t||(this.attributes.targetField==this.attributes.optionCode&&this.attributes.isAjax&&this.doAJAX(),this.field.trigger("automator:field:change",{manuallySet:!1}))}return this.formElement}},{key:"getFieldContainer",value:function(){return this.fieldContainer}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"getField",value:function(){return this.field}},{key:"getFieldCM",value:function(){return this.$fakeCodemirrorField}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getValue",value:function(){var e=null;if((0,S.$K)(this.field))switch(this.type){case"select":case"text":case"url":case"email":case"int":case"float":case"date":case"time":e=this.field.val();break;case"textarea":if((0,S.$K)(this.TokenSelector))try{this.TokenSelector.parseHTMLTokensInPlainTextarea()}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}e=this.field.val();try{(0,S.$K)(this.fieldTinyMCE)&&!this.fieldTinyMCE.hidden&&(e=this.fieldTinyMCE.getContent({format:"raw"}))}catch(e){}if(this.attributes.supportsTinyMCE)try{e=e.replaceAll("\n","")}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}break;case"checkbox":e=this.field.is(":checked");break;case"radio":e=this.field.find("input:checked").val()}return(0,S.$K)(this.field)&&(0,S.$K)(e)||(this.attributes.hasValue?e=this.attributes.currentValue:this.attributes.hasDefaultValue&&(e=this.attributes.defaultValue)),e}},{key:"getReadableValue",value:function(){var e=this,t=null,n=this.getValue();switch(this.type){case"select":if((0,S.$K)(this.field))t=this.attributes.supportsMultipleValues&&a().isArray(n)?n.map((function(t){return e.field.find(X('option[value="%s"]',[t])).text()})).join("".concat(UncannyAutomator.i18n.itemSeparator," ")):this.field.find(X('option[value="%s"]',[n])).text();else if(this.attributes.supportsMultipleValues&&a().isArray(n))try{t=n.map((function(t){return e.getSelectOptionByValue(t).text})).join("".concat(UncannyAutomator.i18n.itemSeparator," "))}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}else try{t=this.getSelectOptionByValue(n).text}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}break;case"text":case"url":case"email":case"int":case"float":case"textarea":case"date":case"time":n=a()("<p/>").html(n).text();break;case"checkbox":t=n?UncannyAutomator.i18n.trueLabel:UncannyAutomator.i18n.falseLabel;break;case"radio":if((0,S.$K)(this.field)){var o=this.field.find("input:checked");1==o.length&&(t=o.closest(".form-radio__container").text().trim())}else try{t=this.getSelectOptionByValue(n).text}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}return t}},{key:"getSelectCustomValue",value:function(){var e=null;if("select"==this.attributes.fieldType&&this.attributes.supportsCustomValue&&"automator_custom_value"==this.getValue())if((0,S.$K)(this.customValueField))e=this.customValueField.getValue();else try{e=UncannyAutomator.recipe.items[this.attributes.itemId].meta["".concat(this.attributes.optionCode,"_custom")]}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}return e}},{key:"getSelectOptionByValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null,n=this.attributes.options;return this.attributes.supportsCustomValue&&n.push({value:"automator_custom_value",text:UncannyAutomator.i18n.validation.field.select.customValue}),(0,S.xb)(n)||n.forEach((function(n){e==n.value&&(t=n)})),t}},{key:"getMetaValue",value:function(){var e;if((0,S.$K)(UncannyAutomator.recipe.items[this.attributes.itemId])){var t=UncannyAutomator.recipe.items[this.attributes.itemId].meta[this.attributes.optionCode];(0,S.$K)(t)&&(e=t)}return e}},{key:"setValue",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{updateCodemirror:!0};if((0,S.$K)(this.field))switch(this.type){case"select":(0,S.$K)(e)||(e=this.attributes.supportsMultipleValues?[]:"");var i=this.field.find("option");if(this.attributes.supportsMultipleValues)i.prop("selected",!1),a().isArray(e)&&!(0,S.xb)(e)&&(e.forEach((function(e){var n=t.field.find('option[value="'.concat(e,'"]'));n.length>0&&n.prop("selected",!0)})),n&&this.field.trigger("change",{manuallySet:!1}));else{var r=this.field.find('option[value="'.concat(e,'"]'));r.length>0?(i.prop("selected",!1),r.prop("selected",!0),n&&this.field.trigger("change",{manuallySet:!1})):(i.prop("selected",!1),this.attributes.supportsCustomValue&&!(0,S.xb)(e)&&this.setCustomValue(e,!1),n&&this.field.trigger("change",{manuallySet:!1}))}break;case"text":case"url":case"email":case"int":case"float":if((0,S.$K)(o.updateCodemirror)&&o.updateCodemirror&&(0,S.$K)(this.fieldCM))try{this.fieldCM.setValue(e)}catch(t){this.field.val(e)}else this.field.val(e);n&&this.field.trigger("automator:field:change");break;case"textarea":if(this.field.val(e),(0,S.$K)(this.fieldTinyMCE)&&this.fieldTinyMCE.setContent(e),(0,S.$K)(o.updateCodemirror)&&o.updateCodemirror&&(0,S.$K)(this.fieldCM))try{this.fieldCM.setValue(e)}catch(t){this.field.val(e)}else this.field.val(e);n&&this.field.trigger("automator:field:change");break;case"checkbox":var s=e,l=this.getValue();s&&!l&&this.field.prop("checked",!0),!s&&l&&this.field.prop("checked",!1),n&&(s&&!l||!s&&l)&&this.field.trigger("automator:field:change");break;case"radio":this.field.filter('[name="'.concat(e,'"]')).prop("checked",!0),n&&this.field.trigger("automator:field:change");break;case"date":case"time":this.field.val(e),n&&this.field.trigger("automator:field:change")}}},{key:"clearValue",value:function(){this.setValue("",!0);try{this.fieldCM.setValue("")}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}if(["date","time"].includes(this.attributes.fieldType))try{this.flatpickrInstance.clear()}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}},{key:"setCustomValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&(this.field.val("automator_custom_value"),this.customValueField.setValue(e,t),t&&this.field.trigger("change",{manuallySet:!1}))}},{key:"hasSelectedOption",value:function(){return this.selectHasSelectedOption}},{key:"setSelectOptions",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeSelectOptions();try{e=e.filter((function(e){return(0,S.$K)(e.value)&&(0,S.$K)(e.text)}))}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}if((0,S.$K)(this.field)){var n=this.field.find(".form-element__select-normal-options");if(e.length>0){this.field.prop("disabled",!1);var o=(0,S.$K)(this.getValue())?this.getValue():this.getMetaValue(),i=[];a().each(e,(function(e,t){var o=new Option(t.text,t.value,!1,!1);n.append(o),i.push(o)})),(0,S.xb)(o)||a().each(this.field.find("option"),(function(e,t){t.value==o&&a()(t).prop("selected",!0)}))}else{var r=a()(new Option(UncannyAutomator.i18n.noResults,"",!this.attributes.supportsCustomValue,!this.attributes.supportsCustomValue));r.prop("disabled",!0),n.append(r),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}t&&this.field.trigger("change"),this.rerenderSelect2()}}},{key:"removeSelectOptions",value:function(){(0,S.$K)(this.field)&&this.field.find(".form-element__select-normal-options").empty()}},{key:"isLoading",value:function(){return this.formElement.hasClass("form-element--loading")}},{key:"startLoadingAnimation",value:function(){var e="form-element--loading";(0,S.$K)(this.formElement)&&!this.formElement.hasClass(e)&&(this.formElement.addClass(e),"checkbox"!=this.type||(0,S.$K)(this.attributes.isToggle)||this.fieldContainer.addClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"stopLoadingAnimation",value:function(){var e="form-element--loading";(0,S.$K)(this.formElement)&&this.formElement.hasClass(e)&&(this.formElement.removeClass(e),this.fieldContainer.removeClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"initLibraries",value:function(){switch(this.type){case"select":this.initSelect2(this.field);break;case"text":case"url":case"email":case"int":case"float":case"textarea":"url"==this.attributes.fieldType&&(0,O.oy)(this.fieldContainer);break;case"date":case"time":this.initFlatpickr(this.field)}}},{key:"getSelect2Settings",value:function(){var e={theme:"uap-select2",searchInputPlaceholder:UncannyAutomator.i18n.search,language:{noResults:function(){return UncannyAutomator.i18n.noResults}},templateResult:function(e){var t=e.text;return(0,S.$K)(e.id)&&Number.isInteger(parseInt(e.id))&&parseInt(e.id)>0&&(t='<span class="uap-select2-item__meta">('.concat(X(UncannyAutomator.i18n.postIDPlaceholder,[e.id.replace("-objectkey","")]),")</span> ").concat(e.text)),t},templateSelection:function(e){var t=e.text;return(0,S.$K)(e.id)&&Number.isInteger(parseInt(e.id))&&parseInt(e.id)>0&&(t='<span class="uap-select2-item__meta">('.concat(X(UncannyAutomator.i18n.postIDPlaceholder,[e.id.replace("-objectkey","")]),")</span> ").concat(t)),t},escapeMarkup:function(e){return e}};return this.attributes.hasPlaceholder&&(e.placeholder=this.attributes.placeholder),this.attributes.customClass&&(e.customClass=this.attributes.customClass),e}},{key:"initSelect2",value:function(e){var t=this.getSelect2Settings();e.hasClass("select2-hidden-accessible")||e.select2(t)}},{key:"initFlatpickr",value:function(e){var t=this;(0,S.$K)(document.getElementById("uap-flatpickr-calendar"))||a()("body").append(a()('<div id="uap-flatpickr-calendar" class="uap uap-flatpickr-calendar"></div>'));var n=document.getElementById("uap-flatpickr-calendar"),o={allowInput:!0,positionElement:this.$fakeCodemirrorField[0],altInput:!0,clickOpens:!1,appendTo:n,locale:{weekdays:{shorthand:[UncannyAutomator.i18n.format.date.weekdays.shorthand.sunday,UncannyAutomator.i18n.format.date.weekdays.shorthand.monday,UncannyAutomator.i18n.format.date.weekdays.shorthand.tuesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.wednesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.thursday,UncannyAutomator.i18n.format.date.weekdays.shorthand.friday,UncannyAutomator.i18n.format.date.weekdays.shorthand.saturday],longhand:[UncannyAutomator.i18n.format.date.weekdays.longhand.sunday,UncannyAutomator.i18n.format.date.weekdays.longhand.monday,UncannyAutomator.i18n.format.date.weekdays.longhand.tuesday,UncannyAutomator.i18n.format.date.weekdays.longhand.wednesday,UncannyAutomator.i18n.format.date.weekdays.longhand.thursday,UncannyAutomator.i18n.format.date.weekdays.longhand.friday,UncannyAutomator.i18n.format.date.weekdays.longhand.saturday]},months:{shorthand:[UncannyAutomator.i18n.format.date.months.shorthand.january,UncannyAutomator.i18n.format.date.months.shorthand.february,UncannyAutomator.i18n.format.date.months.shorthand.march,UncannyAutomator.i18n.format.date.months.shorthand.april,UncannyAutomator.i18n.format.date.months.shorthand.may,UncannyAutomator.i18n.format.date.months.shorthand.june,UncannyAutomator.i18n.format.date.months.shorthand.july,UncannyAutomator.i18n.format.date.months.shorthand.august,UncannyAutomator.i18n.format.date.months.shorthand.september,UncannyAutomator.i18n.format.date.months.shorthand.october,UncannyAutomator.i18n.format.date.months.shorthand.november,UncannyAutomator.i18n.format.date.months.shorthand.december],longhand:[UncannyAutomator.i18n.format.date.months.longhand.january,UncannyAutomator.i18n.format.date.months.longhand.february,UncannyAutomator.i18n.format.date.months.longhand.march,UncannyAutomator.i18n.format.date.months.longhand.april,UncannyAutomator.i18n.format.date.months.longhand.may,UncannyAutomator.i18n.format.date.months.longhand.june,UncannyAutomator.i18n.format.date.months.longhand.july,UncannyAutomator.i18n.format.date.months.longhand.august,UncannyAutomator.i18n.format.date.months.longhand.september,UncannyAutomator.i18n.format.date.months.longhand.october,UncannyAutomator.i18n.format.date.months.longhand.november,UncannyAutomator.i18n.format.date.months.longhand.december]},rangeSeparator:" ".concat(UncannyAutomator.i18n.format.date.rangeSeparator," "),firstDayOfWeek:parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)>=1&&parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)<=7?parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)-1:0,weekAbbreviation:" ".concat(UncannyAutomator.i18n.format.date.weekAbbreviation," "),scrollTitle:UncannyAutomator.i18n.scrollToIncrement,toggleTitle:UncannyAutomator.i18n.clickToToggle,amPM:[UncannyAutomator.i18n.format.date.am,UncannyAutomator.i18n.format.date.pm],yearAriaLabel:UncannyAutomator.i18n.format.date.year,monthAriaLabel:UncannyAutomator.i18n.format.date.month,hourAriaLabel:UncannyAutomator.i18n.format.date.hour,minuteAriaLabel:UncannyAutomator.i18n.format.date.minute},onReady:function(e,n,o){try{var a=function(){t.getValue().includes("}}")||t.fieldCM.getValue()!=o.altInput.value&&t.fieldCM.setValue(o.altInput.value)};(0,S.$K)(t.fieldCM)?a():t.field.on("ua-codemirror-ready",(function(){a()}))}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}},onChange:function(e,n,o){try{var a=function(){t.fieldCM.setValue(o.altInput.value)};(0,S.$K)(t.fieldCM)?a():t.field.on("ua-codemirror-ready",(function(){a()}))}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}};"date"==this.attributes.fieldType&&(o=a().extend(o,{dateFormat:this.attributes.dateFormat,altFormat:this.attributes.dateAltFormat}),this.attributes.supportsRange&&(o.mode="range"),(0,S.$K)(this.attributes.minDate)&&(o.minDate=this.attributes.minDate),(0,S.$K)(this.attributes.maxDate)&&(o.maxDate=this.attributes.maxDate)),"time"==this.attributes.fieldType&&(o=a().extend(o,{enableTime:!0,noCalendar:!0,dateFormat:this.attributes.timeFormat,altFormat:this.attributes.timeAltFormat}),(0,S.$K)(this.attributes.minTime)&&(o.minTime=this.attributes.minTime),(0,S.$K)(this.attributes.manTime)&&(o.manTime=this.attributes.manTime)),this.flatpickrInstance=e.flatpickr(o)}},{key:"initCodeMirror",value:function(){var e=this;if(["text","url","email","int","float","date","time","textarea"].includes(this.attributes.fieldType)){this.destroyCodeMirror();var t=this.getValue();this.fieldCM=CodeMirror(this.$fakeCodemirrorField[0],{lineNumbers:0,tabSize:4,value:t,mode:"default",dragDrop:!1,viewportMargin:1/0,lineWrapping:!0,autoRefresh:!0,noNewlines:!("textarea"==this.attributes.fieldType),scrollbarStyle:"textarea"==this.attributes.fieldType?"native":null,extraKeys:{Tab:function(){var t=e.getNextField();return(0,S.$K)(t)&&t.focus(),!1}},readOnly:this.attributes.isReadOnly}),this.attributes.hasPlaceholder&&this.fieldCM.setOption("placeholder",this.attributes.placeholder),this.fieldCM.on("changes",(function(t,n){["date","time"].includes(e.attributes.fieldType)||e.setValue(e.fieldCM.getValue(),!0,{updateCodemirror:!1})})),this.fieldCM.on("focus",(function(){if(["date","time"].includes(e.attributes.fieldType))try{setTimeout((function(){e.flatpickrInstance.open()}),50)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}})),this.field.on("focus",(function(){e.fieldCM.focus()})),this.field.trigger("ua-codemirror-ready")}"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&this.customValueField.initCodeMirror()}},{key:"getNextField",value:function(){var e=null;if((0,S.$K)(this.attributes.itemId)&&(0,S.$K)(this.attributes.groupId)){var t=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields;if((0,S.$K)(t)&&a().isArray(t)){var n=t.indexOf(this);-1!=n&&n!=t.length-1&&(e=t[n+1])}}if((0,S.$K)(this.attributes.itemType)&&"user-selector"==this.attributes.itemType){var o=UncannyAutomator.recipe.userSelector.fields;if((0,S.$K)(o)&&a().isArray(o)){var i=o.indexOf(this);-1!=i&&i!=o.length-1&&(e=o[i+1])}}return e}},{key:"focus",value:function(){if((0,S.$K)(this.field))switch(this.type){case"select":try{this.field.select2("focus")}catch(e){this.field.focus()}break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":(0,S.$K)(this.fieldCM)?this.fieldCM.focus():this.field.focus();break;case"textarea":if((0,S.$K)(this.fieldTinyMCE))if(this.field.is(":visible"))this.field.focus();else try{this.fieldTinyMCE.focus()}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}else this.field.focus();break;case"checkbox":case"radio":this.field.focus()}}},{key:"destroyCodeMirror",value:function(){if((0,S.$K)(this.fieldCM))try{var e=this.fieldCM.getWrapperElement();e.parentNode.removeChild(e),this.fieldCM=null}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}},{key:"rerenderSelect2",value:function(){var e=this.getSelect2Settings();!(0,S.xb)(this.field)&&this.field.hasClass("select2-hidden-accessible")&&this.field.select2("destroy").select2(e)}},{key:"initTokenSelector",value:function(){this.attributes.supportsTokens&&(this.destroyTokenSelector(),this.tokenSelector=new W(this,{unsupportedTokens:this.attributes.unsupportedTokens})),"select"==this.attributes.fieldType&&(0,S.$K)(this.customValueField)&&this.customValueField.initTokenSelector()}},{key:"destroyTokenSelector",value:function(){(0,S.$K)(this.tokenSelector)&&this.tokenSelector.destroy()}},{key:"initTinyMCE",value:function(){var e=this;if(this.field,(0,S.$K)(this.field)&&"textarea"==this.attributes.fieldType&&this.attributes.supportsTinyMCE){var t=this.field.prop("id"),n=tinymce.get(t);(0,S.$K)(n)&&wp.editor.remove(t),wp.editor.initialize(t,{mediaButtons:!0,tinymce:{toolbar1:"formatselect bold italic bullist numlist blockquote alignleft aligncenter alignright link unlink wp_more",toolbar2:"strikethrough hr forecolor pastetext removeformat visualchars outdent indent undo redo"},quicktags:!0}),(n=tinymce.get(t)).hidden?this.fieldContainer.addClass("form-textarea--tinymce-text"):this.fieldContainer.addClass("form-textarea--tinymce-visual"),this.formElement.find(".switch-tmce").on("click",(function(){e.field.trigger("ua-tinymce-activate-visual-view"),e.fieldContainer.removeClass("form-textarea--tinymce-text").addClass("form-textarea--tinymce-visual")})),this.formElement.find(".switch-html").on("click",(function(){e.field.trigger("ua-tinymce-activate-text-view"),e.fieldContainer.removeClass("form-textarea--tinymce-visual").addClass("form-textarea--tinymce-text");try{e.fieldCM.setValue(n.getContent({format:"raw"}))}catch(t){e.field.val(n.getContent({format:"raw"}))}})),this.fieldTinyMCE=n,n.on("init",(function(){e.field.trigger("ua-tinymce-ready")}))}}}],n&&J(t.prototype,n),e}();const ee=Q;!function(e){var t=e.fn.select2.amd.require("select2/defaults");e.extend(t.defaults,{searchInputPlaceholder:""});var n=e.fn.select2.amd.require("select2/dropdown/search"),o=n.prototype.render;n.prototype.render=function(){var e=o.apply(this,Array.prototype.slice.apply(arguments));return this.$search.attr("placeholder",this.options.get("searchInputPlaceholder")),this.$search.addClass(this.options.get("customClass")),e}}(window.jQuery)},515:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(311),a=n.n(o),i=n(756),r=n(772),s=n(973),l=n(375);function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const u=function(){function e(t,n,o,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.itemCode=o,this.itemId=a,this.item=UncannyAutomator.recipe.items[a],this.createItemActions()}var t,n;return t=e,(n=[{key:"createItemActions",value:function(){var e=this,t=a()("<div/>",{class:"item-actions"}),n=a()("<div/>",{class:"item-actions__btn"}),o=a()("<i/>",{class:"uap-icon uap-icon--ellipsis-h-alt"}),c=a()("<div/>",{class:"item-actions__dropdown"}),u=a()("<ul/>",{class:"item-actions-dropdown__ul"});n.append(o),t.append(n);var d=a()("<li/>",{class:"item-actions-dropdown__action"}),p=a()("<span/>").text(UncannyAutomator.i18n.delete);if(d.append(p),u.append(d),(0,i.$K)(this.itemType)&&(0,i.$K)(this.itemCode)&&(!(0,i.$K)(this.item)||(0,i.$K)(this.item)&&!this.item.isMissing)){var m=(0,i.Vx)(this.integrationID,this.itemType,this.itemCode);if((0,i.$K)(m.support_link)){var f="support_menu_link-".concat(this.integrationID,"-").concat(this.integrationID,"_").concat(this.itemCode,"-").concat(this.integrationID,"_").concat((0,i.hF)(m.select_option_name,"","").toLowerCase().replace(/\s+|{|}/g,"_")),h=a()("<a/>",{href:(0,i.XE)(m.support_link,{medium:"action_menu",content:f}),class:"item-actions-dropdown__action",target:"_blank"}),g=a()("<span/>").text(UncannyAutomator.i18n.support);h.append(g),u.append(h)}}return c.append(u),t.append(c),n.on("click",(function(){t.hasClass("item-actions--open")?(t.removeClass("item-actions--open"),a()(document).off("mouseup.uap-actions-click-outside")):(t.addClass("item-actions--open"),a()(document).on("mouseup.uap-actions-click-outside",(function(e){t.is(e.target)||0!==t.has(e.target).length||(t.removeClass("item-actions--open"),a()(document).off("mouseup.uap-actions-click-outside"))})))})),d.on("click",(function(){if((0,i.$K)(e.itemId)&&UncannyAutomator.recipe.isLive&&UncannyAutomator.recipe.items[e.itemId].isLive){t.removeClass("item-actions--open");var n=new r.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,i.hF)(UncannyAutomator.i18n.confirmationModal.deleteWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});n.setEvents({afterSetEvents:function(){n.show()},onConfirm:function(){n.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,i.L8)("delete",{ID:e.itemId},(function(){n.destroy(),"trigger"==e.itemType&&(new s.Z,"anonymous"==UncannyAutomator.recipe.type&&new l.Z),"action"!=e.itemType&&"closure"!=e.itemType||new l.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){n.destroy(),console.log("‼️ ERROR-TODO. Couldn't delete the item"),"trigger"==e.itemType&&new s.Z,"action"!=e.itemType&&"closure"!=e.itemType||new l.Z}))},afterHide:function(){n.destroy()}})}else(0,i.$K)(e.itemId)?(d.addClass("item-actions-dropdown__action--loading"),(0,i.L8)("delete",{ID:e.itemId},(function(){"trigger"==e.itemType&&(new s.Z,"anonymous"==UncannyAutomator.recipe.type&&new l.Z),"action"!=e.itemType&&"closure"!=e.itemType||new l.Z}),(function(){console.log("‼️ ERROR-TODO. Couldn't delete the item"),"trigger"==e.itemType&&new s.Z,"action"!=e.itemType&&"closure"!=e.itemType||new l.Z}))):("trigger"==e.itemType&&new s.Z,"action"==e.itemType&&new l.Z)})),t}}])&&c(t.prototype,n),e}()},375:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var o=n(311),a=n.n(o),i=n(756),r=n(605),s=n(593),l=n(463);function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=n(975).vsprintf;const d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),UncannyAutomator.recipe.userSelector.step=(0,i.Cn)("get-step"),this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){var e="";switch(UncannyAutomator.recipe.userSelector.step){case"select-source":UncannyAutomator.recipe.userSelector.isValid=!1,(0,i.Tm)("validate"),e=this.getSelectSourceNodes();break;case"set-options":e=this.getOptionsNodes();break;case"show-sentence":(0,i.Tm)("validate"),UncannyAutomator.recipe.errorMode=!1,new s.Z,e=this.getSentenceNodes()}(0,i.M0)("metabox",{type:"action"}).prepend(e)}},{key:"getSelectSourceNodes",value:function(){var e=a()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-integrations">\n\t\t\t\t\t\t\t<div class="item-integration user-selector-option user-selector-option--existing-user" data-source="existingUser">\n\t\t\t\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.existing,'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-integration user-selector-option user-selector-option--new-user" data-source="newUser">\n\t\t\t\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.new,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\t\n\t\t"));return e.find(".item").prepend(this.getHeaderNodes()),e.find(".user-selector-option").on("click",(function(e){var t=a()(e.currentTarget).data("source");(0,i.Cn)("set-source",{source:t}),UncannyAutomator.recipe.userSelector.step="set-options",new k})),e}},{key:"getOptionsNodes",value:function(){var e=a()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-options"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'));return e.find(".item").prepend(this.getHeaderNodes()),e.find(".item-options").append(this.getOptionsFields()),e}},{key:"getOptionsFields",value:function(){var e=a()("<div></div>"),t=a()('<div class="item-options__group"></div>'),n=[];(0,i.Cn)("update-fields",{source:"existingUser",data:{}}),(0,i.Cn)("update-fields",{source:"newUser",data:{}});var o=UncannyAutomator.recipe.userSelector.resources.roles;switch(delete o.administrator,UncannyAutomator.recipe.userSelector.source){case"existingUser":var s=a()('<div class="user-selector__field-group user-selector__field-group--two-columns"></div>'),l=new r.Z("select",{itemType:"user-selector",optionCode:"uniqueField",label:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionEmail},{value:"id",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionId},{value:"username",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionUsername}]});n.push(l);var c=new r.Z("text",{itemType:"user-selector",optionCode:"uniqueFieldValue",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue,label:UncannyAutomator.i18n.userSelector.existingUser.valueFieldLabel,isRequired:!0,supportsTokens:!0});n.push(c);var u=l.getFormElement();c.initTokenSelector(),c.initCodeMirror(),s.append(u);var d=c.getFormElement();s.append(d),t.append(s);var p=new r.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-existing-user-fallback",label:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.fallback,options:[{value:"create-new-user",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionCreateUser},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionDoNothing}]});n.push(p);var m=p.getFormElement();if(t.append(m),u.on("automator:field:change",(function(){(0,i.Cn)("update-fields",{source:"existingUser",data:{uniqueField:l.getValue()}})})),d.on("automator:field:change",(function(){(0,i.Cn)("update-fields",{source:"existingUser",data:{uniqueFieldValue:c.getValue()}})})),m.on("automator:field:change",(function(){(0,i.Cn)("update-fields",{source:"existingUser",data:{fallback:p.getValue()}}),new k})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var f=a()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.existingUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));t.append(f)}else if("create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var h=a()("<div/>",{class:"item-options"});[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,i.xb)(UncannyAutomator.recipe.userSelector.data.existingUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.existingUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(o).map((function(e,t){return{value:e,text:o[e]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,i.xb)(UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(e){var t=new r.Z(e.fieldType,e),o=t.getFormElement();h.append(o),t.initTokenSelector(),t.initCodeMirror(),n.push(t)})),t.append(h)}break;case"newUser":[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:(0,i.xb)(UncannyAutomator.recipe.userSelector.data.newUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.newUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,options:Object.keys(o).map((function(e,t){return{value:e,text:o[e]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?(0,i.xb)(UncannyAutomator.recipe.userSelector.data.newUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.newUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(e){var o=new r.Z(e.fieldType,e),a=o.getFormElement();t.append(a),o.initTokenSelector(),o.initCodeMirror(),n.push(o)}));var g=new r.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-new-user-fallback",label:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.fallback,options:[{value:"select-existing-user",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionExisting},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionDoNothing}]});n.push(g);var v=g.getFormElement();if(t.append(v),v.on("automator:field:change",(function(){var e={};n.forEach((function(t){e[t.getAttributes().optionCode]=t.getValue()})),(0,i.Cn)("update-fields",{source:"newUser",data:e}),new k})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var y=a()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.newUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));t.append(y)}else if("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var _=a()("<div/>",{class:"item-options"}),b=new r.Z("select",{itemType:"user-selector",optionCode:"prioritizedField",label:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.prioritizedField,defaultValue:"email",description:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldDescription,isRequired:!0,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.newUser.email},{value:"username",text:UncannyAutomator.i18n.userSelector.newUser.username}]});n.push(b);var w=b.getFormElement();_.append(w),t.append(_)}}UncannyAutomator.recipe.userSelector.fields=n,e.append(t);var A=a()('<div class="item-options__buttons"></div>'),C=a()('<div class="uap-btn uap-btn--primary">'.concat(UncannyAutomator.i18n.save,"</div>")),T=a()('<div class="uap-btn uap-btn--secondary">'.concat(UncannyAutomator.i18n.cancel,"</div>"));return C.on("click",(function(){var e=!0,t={};n.forEach((function(n){var o=n.validate().isValid;e=e&&o,o&&(t[n.getAttributes().optionCode]=n.getValue())})),(0,i.Cn)("update-fields",{source:UncannyAutomator.recipe.userSelector.source,data:t}),e&&(C.addClass("uap-btn--primary uap-btn--loading uap-btn--disabled"),(0,i.L8)("user-selector",{recipeId:UncannyAutomator.recipe.id,source:UncannyAutomator.recipe.userSelector.source,data:UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source]},(function(e){UncannyAutomator.recipe.userSelector.isValid=!0,(0,i.Cn)("set-step",{step:"show-sentence"}),new k}),(function(e){})))})),T.on("click",(function(){(0,i.Cn)("set-step",{step:"select-source"}),new k})),A.append(C),A.append(T),e.append(A),e}},{key:"getSentenceNodes",value:function(){var e=a()('\n\t\t\t<div class="user-selector user-selector--summary '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t\t<div class="item item--user-selector">\n\t\t\t\t\t<div class="item__content">\n\t\t\t\t\t\t<div class="item-options">\n\t\t\t\t\t\t\t<div class="user-selector-summary"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'));e.find(".item").prepend(this.getHeaderNodes());var t=e.find(".user-selector-summary"),n=a()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uap-icon uap-icon--atom"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),o=a()('\n\t\t\t<div class="user-selector-summary-row__token"></div>\n\t\t');n.find(".user-selector-summary-row__content").append(o),"existingUser"==UncannyAutomator.recipe.userSelector.source?o.text(UncannyAutomator.i18n.userSelector.userType.existing):"newUser"==UncannyAutomator.recipe.userSelector.source&&o.text(UncannyAutomator.i18n.userSelector.userType.new),o.on("click",(function(){(0,i.Cn)("set-step",{step:"select-source"}),new k})),t.append(n);var r,s=a()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uap-icon uap-icon--fingerprint"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),c=UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue;try{c=new l.Z("user-selector").renderTextWithTokens(c).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}if("existingUser"==UncannyAutomator.recipe.userSelector.source)r=a()("\n\t\t\t\t<div>\n\t\t\t\t".concat(u(UncannyAutomator.i18n.userSelector.summary.matches,['<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.i18n.userSelector.summary[UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField],"</div>"),'<div class="user-selector-summary-row__token">'.concat(c,"</div>")]),"\n\t\t\t\t</div>"));else if("newUser"==UncannyAutomator.recipe.userSelector.source){var d=UncannyAutomator.recipe.userSelector.data.newUser.email;try{d=new l.Z("user-selector").renderTextWithTokens(d).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}r=a()("\n\t\t\t\t<div>\n\t\t\t\t".concat(u(UncannyAutomator.i18n.userSelector.summary.withEmail,['<div class="user-selector-summary-row__token">'.concat(d,"</div>")]),"\n\t\t\t\t</div>\n\t\t\t\t"))}s.find(".user-selector-summary-row__content").append(r),r.find(".user-selector-summary-row__token").on("click",(function(){(0,i.Cn)("set-step",{step:"set-options"}),new k})),t.append(s);var p=a()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<span class="uap-icon uap-icon--directions"></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),m="";"existingUser"==UncannyAutomator.recipe.userSelector.source?"create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback?m=UncannyAutomator.i18n.userSelector.summary.createNewUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback&&(m=UncannyAutomator.i18n.userSelector.summary.doNothing):"newUser"==UncannyAutomator.recipe.userSelector.source&&("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback?m=UncannyAutomator.i18n.userSelector.summary.selectExistingUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback&&(m=UncannyAutomator.i18n.userSelector.summary.doNothing));var f=a()("\n\t\t\t<div>\n\t\t\t".concat(u(UncannyAutomator.i18n.userSelector.summary.otherwise,['<div class="user-selector-summary-row__token">'.concat(m,"</div>")]),"\n\t\t\t</div>"));return p.find(".user-selector-summary-row__content").append(f),p.find(".user-selector-summary-row__token").on("click",(function(){(0,i.Cn)("set-step",{step:"set-options"}),new k})),t.append(p),e}},{key:"getHeaderNodes",value:function(){var e;switch(UncannyAutomator.recipe.userSelector.step){case"select-source":case"show-sentence":e=UncannyAutomator.i18n.userSelector.sentenceTitle;break;case"set-options":e=UncannyAutomator.i18n.userSelector.setOptions}var t=a()('\n\t\t\t<div>\n\t\t\t\t<div class="item-actions">\n\t\t\t\t\t<div class="item-actions__btn">\n\t\t\t\t\t\t<i class="uap-icon uap-icon--ellipsis-h-alt"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="item-actions__dropdown">\n\t\t\t\t\t\t<ul class="item-actions-dropdown__ul">\n\t\t\t\t\t\t\t<a href="'.concat((0,i.XE)("https://automatorplugin.com/knowledge-base/anonymous-recipes/#Introducing_the_User_Selector",{medium:"user_selector",content:"support_menu_link"}),'" target="_blank" class="item-actions-dropdown__action">\n\t\t\t\t\t\t\t\t<span>').concat(UncannyAutomator.i18n.support,'</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-icon"></div>\n\t\t\t\t<div class="item-title uap-clear">\n\t\t\t\t\t<div class="item-title__describe">\n\t\t\t\t\t\t<div class="item-title__non-editable">\n\t\t\t\t\t\t\t').concat(e,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),n=t.find(".item-actions");return t.find(".item-actions__btn").on("click",(function(){n.hasClass("item-actions--open")?(n.removeClass("item-actions--open"),a()(document).off("mouseup.uap-actions-click-outside")):(n.addClass("item-actions--open"),a()(document).on("mouseup.uap-actions-click-outside",(function(e){n.is(e.target)||0!==n.has(e.target).length||(n.removeClass("item-actions--open"),a()(document).off("mouseup.uap-actions-click-outside"))})))})),t}}])&&c(t.prototype,n),e}();var p=n(122),m=n(911),f=n(464);const h=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=a()("<div/>",{class:"item item--start"}),o=a()("<div/>",{class:"item-icon"}),r=a()("<div/>",{class:"item-title uap-clear"}),s=a()("<div/>",{class:"uap-btn uap-btn--secondary uap-btn--small"});r.append(s),n.append(o),n.append(r),(0,i.M0)("metabox",{type:t}).append(n),"trigger"==t&&s.text(UncannyAutomator.i18n.trigger.add),"action"==t&&s.text(UncannyAutomator.i18n.action.add),s.on("click",(function(){return new f.Z(t)}))};var g=n(515),v=n(214),y=n(104),_=n(865);function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(975).vsprintf;const w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={$metabox:(0,i.M0)("metabox",{type:"action"})},a().each(UncannyAutomator.closures,(function(e,o){return n.createClosure(o,t)}))}var t,n;return t=e,(n=[{key:"createClosure",value:function(e,t){var n=!1,o=a()('\n\t\t\t<div class="metabox__footer metabox__closures"></div>\n\t\t'),s={label:t,formElementClass:"form-element--nomargin"},l=this.getClosureByCodeFromItemsObject(e.code);(0,i.$K)(l)&&(n=!0,s.currentValue=!0,s.itemid=l.id);var c=new r.Z("checkbox",s),u=c.getFormElement();u.on("change",(function(){var t=c.getValue();c.startLoadingAnimation(),t?(0,i.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:"add-new-closure",item_code:e.code,default_meta:{integration_name:UncannyAutomator.integrations[e.integration].name,sentence:e.sentence}},(function(e){new k,(0,i.$K)(e.post_ID)&&(0,i.M0)("item",{id:e.post_ID}).item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(e){console.log("‼️ ERROR-TODO. Couldn't add the closure"),c.stopLoadingAnimation(),c.setValue(!1,!1)})):(0,i.L8)("delete",{ID:l.id},(function(){new k}),(function(){console.log("‼️ ERROR-TODO. Couldn't delete the closure"),new k}))})),o.append(u);var d=a()("<div/>",{class:"uo-toggle uo-toggle--show"});if(n){d.addClass("uo-toggle--show");var p=a()("<div/>",{class:"item item--closure item--margintop","data-id":l.id}),m=this.createHeader(UncannyAutomator.recipe.items[l.id].integrationCode,"closure",e.code,l.id);p.append(m);var f=a()("<div/>",{class:"item__content"});p.append(f),d.append(p)}o.append(d),this.elements.$metabox.append(o)}},{key:"createHeader",value:function(e,t,n,o){var i=a()("<div/>"),r=a()("<div/>",{class:"item-title uap-clear"}),s=new g.Z(t,e,n,o);i.append(s);var l=new v.Z(e);i.append(l);var c=new y.Z(e);r.append(c);var u=new _.Z(t,e,n,o);return r.append(u),i.append(r),i}},{key:"getClosureByCodeFromItemsObject",value:function(e){var t;return a().each(UncannyAutomator.recipe.items,(function(n,o){o.itemCode==e&&(t=o)})),t}}])&&b(t.prototype,n),e}();function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,i.M0)("metabox",{type:"action"}).empty(),"anonymous"==UncannyAutomator.recipe.type&&new d;var t=(0,i.Wr)("get",{filter:{itemType:"action"}});if(!(0,i.xb)(t)&&(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var n=(0,i.p5)(t,"async_mode",!1),o=(0,i.PT)(t,"async_mode","delay"),a=(0,i.PT)(t,"async_mode","schedule");(0,i.xb)(o)&&(0,i.xb)(a)?(new p.Z("action",n,!0),new m.Z("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):((0,i.xb)(n)||new p.Z("action",n,!0),new m.Z("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly),new p.Z("action",o,!1),new p.Z("action",a,!1))}else(0,i.xb)(t)?(new h("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):(new p.Z("action",t,!0),new m.Z("action"),this.isContinuingIntegrationConnection()&&new f.Z("action"),new w(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly))}var t,n;return t=e,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==(0,i.Tb)(null,"ua_connecting_integration")&&"action"==(0,i.Tb)(null,"ua_connecting_integration_context")}}])&&A(t.prototype,n),e}()},214:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(311),a=n.n(o),i=n(756);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=n(975).vsprintf;const l=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.integrationCode=t,this.createItemIcon()}var t,n;return t=e,(n=[{key:"createItemIcon",value:function(){var e=a()("<div/>",{class:"item-icon"});if((0,i.$K)(UncannyAutomator.integrations[this.integrationCode])){var t,n=UncannyAutomator.integrations[this.integrationCode];(0,i.$K)(n.icon_svg)?t=a()('<img src="'.concat(n.icon_svg,'" alt="').concat(n.name,'">')):(0,i.$K)(n.icon_32)&&(0,i.$K)(n.icon_64)&&(t=a()('<img src="'.concat(n.icon_32,'" srcset="').concat(s("%s 1x, %s 2x",[n.icon_32,n.icon_64]),'" alt="').concat(n.name,'">'))),e.append(t)}return e}}])&&r(t.prototype,n),e}()},104:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(311),a=n.n(o),i=n(756);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r(this,e),this.integrationId=t,this.integrationName=n,this.createItemTag()}var t,n;return t=e,(n=[{key:"createItemTag",value:function(){var e=UncannyAutomator.integrations[this.integrationId],t=a()("<div/>",{class:"item-title__integration uap-clear"}),n=a()("<div/>",{class:"item-title__tag"});return(0,i.$K)(e)?n.text(e.name):n.text(this.integrationName),t.append(n),t}}])&&s(t.prototype,n),e}()},464:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var o=n(311),a=n.n(o),i=n(756),r=n(772),s=n(515),l=n(214),c=n(104),u=n(973),d=n(375);function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m=n(975).vsprintf;const f=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.$currentItem=o,this.render()}var t,n;return t=e,(n=[{key:"render",value:function(){this.$container=a()('<div class="item"></div>'),this.$item=this.$container,this.createHeader(),this.createItemsList(),this.removeConnectingIntegrationsParameters(),this.$currentItem.replaceWith(this.$container)}},{key:"createHeader",value:function(){var e=a()('\n\t\t\t<div>\n\t\t\t\t<div class="item-title uap-clear">\n\t\t\t\t\t<div class="item-title__describe">\n\t\t\t\t\t\t<div class="item-title__non-editable">\n\t\t\t\t\t\t\t'.concat("trigger"==this.itemType?UncannyAutomator.i18n.trigger.select:UncannyAutomator.i18n.action.select,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),t=new s.Z(this.itemType);e.append(t);var n=new l.Z(this.integrationID);e.append(n);var o=new c.Z(this.integrationID);e.find(".item-title").prepend(o),this.$container.append(e)}},{key:"createItemsList",value:function(){var e,t,n=this;"trigger"==this.itemType?(e=(0,i.eU)(this.integrationID,"triggers"),t=UncannyAutomator.i18n.trigger.search,UncannyAutomator.i18n.proOnly.unlockTriggers):"action"==this.itemType&&(e=(0,i.eU)(this.integrationID,"actions"),t=UncannyAutomator.i18n.action.search,UncannyAutomator.i18n.proOnly.unlockActions);var o=a()('\n\t\t\t<div class="item__content">\n\t\t\t\t<div class="item-options item-options--nopadding item-options--noborder">\n\t\t\t\t\t<div class="form-element">\n\t\t\t\t\t\t<div class="item__task-selector">\n\t\t\t\t\t\t\t<div class="item-task-selector__search">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\t\tclass="item-task-selector__search-input"\n\t\t\t\t\t\t\t\t\tplaceholder="'.concat(t,'"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-task-selector__options">\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--available"></div>\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--unavailable">\n\t\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group-items"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide">\n\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.noResults,"\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),s=o.find(".item-options"),l=o.find(".item__task-selector"),c=o.find(".item-task-selector__search-input"),p={container:o.find(".item-task-selector__options"),available:o.find(".item-task-selector-options__group--available"),unavailable:{container:o.find(".item-task-selector-options__group--unavailable"),list:o.find(".item-task-selector-options__group-items")},noResults:o.find(".item-task-selector__option--no-results")};if(e.hasAvailableItems){if(!((0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type)){var f=[],h=[];e.available.forEach((function(e){e.requires_user?f.push(e):h.push(e)})),e.available=[].concat(h,f)}p.available.append(e.available.map((function(e){var t=e.is_pro,o=(!(0,i.$K)(UncannyAutomator.wp)||!UncannyAutomator.wp)&&"anonymous"==UncannyAutomator.recipe.type&&e.requires_user,s=a()('\n\t\t\t\t\t<div class="item-task-selector__option '.concat(t?"item-task-selector__option--pro":""," ").concat(e.requires_user?"item-task-selector__option--requires-user":""," ").concat(o?"item-task-selector__option-cannot-add":"",'"\n\t\t\t\t\t\tdata-search="').concat(e.select_option_name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t').concat(o?'<span class="uap-icon uap-icon--lock-alt"></span>':"","\n\t\t\t\t\t\t\t").concat((0,i.hF)(e.select_option_name,'<span class="item-task-selector__option-variable">',"</span>")," ").concat(t?'<span class="item-task-selector-option__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</span>"):"",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="item-task-selector__option-properties">\n\t\t\t\t\t\t\t').concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&e.requires_user?'<span class="item-task-selector-option__requires-user">'.concat(UncannyAutomator.i18n.needsUserData,"</span>"):"","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"));return s.on("click",(function(){l.addClass("item__task-selector--loading"),s.addClass("item-task-selector__option--loading");var t=["trigger","action"].includes(n.itemType)?"add-new-".concat(n.itemType):"",o={};a().each(e.options,(function(e,t){(0,i.$K)(t.default_value)&&(o[t.option_code]=t.default_value)})),"anonymous"==e.type&&(o.can_log_in_new_user=!(0,i.$K)(e.can_log_in_new_user)||e.can_log_in_new_user);var c,p=function(r,c){(0,i.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:t,item_code:e.code,default_meta:a().extend({},o,{integration_name:UncannyAutomator.integrations[n.integrationID].name,sentence:e.sentence})},(function(e){if(new u.Z,new d.Z,(0,i.$K)(e.post_ID)){var t=(0,i.M0)("item",{id:e.post_ID});UncannyAutomator.recipe.items[e.post_ID].isValid?UncannyAutomator.recipe.isLive||t.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):t.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}(0,i.$K)(r)&&r(e)}),(function(e){console.log("ERROR-TODO. Couldn't add the item"),l.removeClass("item__task-selector--loading"),s.removeClass("item-task-selector__option--loading"),0==e.success&&new u.Z,(0,i.$K)(c)&&c(e)}))};if("action"==n.itemType&&"anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&e.requires_user)if(l.removeClass("item__task-selector--loading"),s.removeClass("item-task-selector__option--loading"),(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var f=UncannyAutomator.recipe.isLive;(c=new r.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,i.hF)(e.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.description,"</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var e=c.getElements();e.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,i.R$)(!0,(function(t){p((function(){c.destroy()}),(function(){e.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)}))}),(function(t){e.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),f&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)},onCancel:function(){c.destroy()}})}else(c=new r.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,i.hF)(e.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(m(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.description,[UncannyAutomator.i18n.uncannyAutomatorPro]),' <a href="').concat((0,i.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <span class="uap-icon uap-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.upgradeLater,' <a href="').concat((0,i.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uap-icon uap-icon--external-link-alt"></span></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){c.destroy(),(0,i.YQ)((0,i.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}))},onCancel:function(){c.destroy()}});else p()})),s})))}else p.available.remove();e.hasUnavailableItems?p.unavailable.list.append(e.unavailable.map((function(e){var t="unavailable_item-".concat(n.integrationID,"-").concat(n.integrationID,"_").concat((0,i.hF)(e.name,"","").toLowerCase().replace(/\s+|{|}/g,"_"));return a()('\n\t\t\t\t\t<a href="'.concat((0,i.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:t}),'"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\tclass="item-task-selector__option item-task-selector__option--pro"\n\t\t\t\t\t\tdata-search="').concat(e.name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t<span class="uap-icon uap-icon--lock-alt"></span>\n\t\t\t\t\t\t\t').concat((0,i.hF)(e.name,'<span class="item-task-selector__option-variable">',"</span>"),'\n\t\t\t\t\t\t\t<span class="item-task-selector-option__badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t"))}))):p.unavailable.container.remove();var g=p.container.find(".item-task-selector__option:not(.item-task-selector__option--no-results)");c.on("input",(function(){var e=c.val().toLowerCase().replace(/\s+|{|}/g,"");g.removeClass("item-task-selector__option--show item-task-selector__option--hide");var t=!0;(0,i.xb)(e)||(t=!1,a().each(g,(function(n,o){var i=a()(o);-1!==i.data("search").search(e)?(i.addClass("item-task-selector__option--show"),t=!0):i.addClass("item-task-selector__option--hide")}))),p.noResults.removeClass("item-task-selector__option--hide item-task-selector__option--show"),t?p.noResults.addClass("item-task-selector__option--hide"):p.noResults.addClass("item-task-selector__option--show")})),s.append(this.createCancelButton()),this.$container.append(o)}},{key:"createCancelButton",value:function(){var e=this,t=a()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return t.on("click",(function(){new _(e.itemType,e.$item)})),t}},{key:"removeConnectingIntegrationsParameters",value:function(){(0,i.hl)(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}}])&&p(t.prototype,n),e}();function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var v=n(975).vsprintf,y=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.$currentItem=n,this.integrations=[],this.render(),this.handleContinueIntegrationConnection()}var t,n;return t=e,n=[{key:"render",value:function(){var e=a()("<div/>",{class:"item"});this.$item=e;var t=this.createHeader(),n=a()("<div/>",{class:"item__content"}),o=this.createIntegrations(),r=this.createDiscoverMoreIntegrations();if(e.append(t),n.append(o),n.append(r),e.append(n),(0,i.$K)(this.$currentItem))this.$currentItem.replaceWith(e);else{var s=(0,i.M0)("lastItem",{type:this.itemType});"trigger"==this.itemType&&(s.length>0?e.insertAfter(s):(0,i.M0)("metabox",{type:this.itemType}).append(e)),"action"==this.itemType&&((0,i.M0)("items",{type:this.itemType}).length>0?e.insertBefore(a()(".add-action-btn")):(0,i.M0)("metabox",{type:this.itemType}).find(".item.item--start").replaceWith(e))}}},{key:"createHeader",value:function(){var e=a()("<div/>"),t=a()("<div/>",{class:"item-icon"}),n=a()("<div/>",{class:"item-title uap-clear"}),o=a()("<div/>",{class:"item-title__describe"}),i=a()("<div/>",{class:"item-title__non-editable"}).text(UncannyAutomator.i18n.integration.select),r=new s.Z(this.itemType);return e.append(r),e.append(t),o.append(i),n.append(o),e.append(n),e}},{key:"createIntegrations",value:function(){var e=this,t=a()("<div/>",{class:"item-integrations"});return this.filterByNonEmptyIntegrations(this.itemType),this.sortIntegrationsAlphabetically(),this.integrations.forEach((function(n){var o=n.id,a=e.createIntegration(o,n),r=function(){new f(e.itemType,o,e.$item)};if((0,i.$K)(n.connected))switch(e.integrationModalCurrentStep(n)){case 1:r=function(){(0,i.hl)(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:o,ua_connecting_integration_context:e.itemType},{setAsURL:!0,refresh:!1}),e.connectIntegrationModal(o,n,{currentStep:1})};break;case 2:r=function(){(0,i.hl)(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:o,ua_connecting_integration_context:e.itemType},{setAsURL:!0,refresh:!1}),e.connectIntegrationModal(o,n,{currentStep:2})}}a.on("click",(function(){r()})),t.append(a)})),t}},{key:"connectIntegrationModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({currentStep:1},n);var o=(0,i.hl)(UncannyAutomator.connectApiUrl,{redirect_url:(0,i.hl)(UncannyAutomator.dashboardUrl,{ua_close_window:1})}),a="";a=(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp?'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<span class="uap-icon uap-icon--check-circle"></span>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1Pro,[UncannyAutomator.i18n.uncannyAutomatorPro]),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-activate-license" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.activate,' <span class="uap-icon uap-icon--arrow-circle-right"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'):'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<span class="uap-icon uap-icon--smile-plus"></span>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1,[UncannyAutomator.i18n.uncannyAutomator]),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-sign-up" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.signUp,' <span class="uap-icon uap-icon--arrow-circle-right"></span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t');var s=new r.Z({title:"".concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectIntegration),content:'\n\t\t\t\t<div class="connect-integration-modal">\n\t\t\t\t\t<div class="connect-integration-modal-steps__counter">\n\t\t\t\t\t\t'.concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.stepCounter,[n.currentStep-1,"2"]),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-steps">\n\t\t\t\t\t\t<div class="connect-integration-modal-steps__list">\n\t\t\t\t\t\t\t').concat(a,'\n\t\t\t\t\t\t\t<div class="connect-integration-modal-step ').concat(n.currentStep>2?"connect-integration-modal-step--completed":""," ").concat(1==n.currentStep?"connect-integration-modal-step--previous-not-completed":"",'">\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t\t\t\t<span class="uap-icon uap-icon--plug"></span>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t\t\t\t<strong>2.</strong> ').concat(v(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step2,['<span class="connect-integration-modal-step-integration-name">'+(0,i.Y6)(e).node.outerHTML+t.name+"</span>",UncannyAutomator.i18n.uncannyAutomator]),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t\t\t\t<span ').concat(1==n.currentStep?'uap-tooltip="'+UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.completePrevious+'"':"",'>\n\t\t\t\t\t\t\t\t\t\t<a id="connect-integration-modal-connect-account" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectAccount,' <span class="uap-icon uap-icon--arrow-circle-right"></span>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:null}},{size:"extra-large"});s.setEvents({onCancel:function(){s.destroy(),setTimeout((function(){(0,i.hl)(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}),10)}}),s.getElements().modal.container.find("#connect-integration-modal-sign-up").on("click",(function(e){e.preventDefault(),e.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,i.Lc)({url:o,w:550,h:600,onClose:function(){location.reload()}})})),s.getElements().modal.container.find("#connect-integration-modal-activate-license").on("click",(function(e){e.preventDefault(),e.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,i.Lc)({url:UncannyAutomator.licenseUrl,w:550,h:600,onClose:function(){location.reload()}})})),2==n.currentStep&&s.getElements().modal.container.find("#connect-integration-modal-connect-account").on("click",(function(e){e.preventDefault(),e.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,i.Lc)({url:(0,i.hl)(t.settings_url,{minimal:1,hide_settings_tabs:1}),w:550,h:600,onClose:function(){location.reload()}})}))}},{key:"handleContinueIntegrationConnection",value:function(){if(1==(0,i.Tb)(null,"ua_connecting_integration")&&(0,i.Tb)(null,"ua_connecting_integration_context")==this.itemType){var e=(0,i.Tb)(null,"ua_connecting_integration_id");if(!(0,i.xb)(e)){var t=UncannyAutomator.integrations[e];if((0,i.$K)(t)&&(0,i.$K)(t.connected))switch(this.integrationModalCurrentStep(t)){case 1:this.connectIntegrationModal(e,t,{currentStep:1});break;case 2:this.connectIntegrationModal(e,t,{currentStep:2});break;case 3:new f(this.itemType,e,this.$item)}}}}},{key:"createIntegration",value:function(e,t){var n,o=a()("<div/>",{class:"item-integration"}),r=a()("<div/>",{class:"item-integration__logo"}),s=a()("<div/>",{class:"item-integration__name"});return t.isProOnly&&(o.addClass("item-integration--pro"),o.append(a()('\n\t\t\t\t<div class="item-integration__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</div>\n\t\t\t")))),t.isAvailable?(0,i.$K)(t.connected)?UncannyAutomator.hasAccountConnected?t.connected?o.addClass("item-integration--available"):(o.addClass("item-integration--unavailable item-integration--unavailable-integration-not-connected"),o.attr("uap-tooltip",v(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,[t.name])),o.append(a()('\n\t\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t\t")))):(o.addClass("item-integration--unavailable item-integration--unavailable-ap-account-not-connected"),o.attr("uap-tooltip",v(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,[t.name])),o.append(a()('\n\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t")))):"action"==this.itemType?(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type?o.addClass("item-integration--available"):0==t.items.actions.available.filter((function(e){return 0==e.requires_user})).length?(o.addClass("item-integration--unavailable item-integration--unavailable-requires-user-data"),o.attr("uap-tooltip",UncannyAutomator.i18n.apiIntegrations.allActionsRequireUserData)):o.addClass("item-integration--available"):o.addClass("item-integration--available"):(o.addClass("item-integration--unavailable item-integration--unavailable-requires-pro"),o.attr("uap-tooltip",v(UncannyAutomator.i18n.proOnly.requiresPro,[UncannyAutomator.i18n.uncannyAutomatorPro]))),(0,i.$K)(t.icon_svg)?n=a()('<img src="'.concat(t.icon_svg,'" alt="').concat(t.name,'">')):(0,i.$K)(t.icon_32)&&(0,i.$K)(t.icon_64)&&(n=a()('<img src="'.concat(t.icon_32,'" srcset="').concat(v("%s 1x, %s 2x",[t.icon_32,t.icon_64]),'" alt="').concat(t.name,'">'))),s.text(t.name),r.append(n),o.append(r),o.append(s),o}},{key:"createDiscoverMoreIntegrations",value:function(){return a()('\n\t\t\t<div class="item-content__description">\n\t\t\t\t'.concat("anonymous"==UncannyAutomator.recipe.type?UncannyAutomator.i18n.integration.dontSeeTrigger:UncannyAutomator.i18n.integration.discoverMore,' <a href="').concat((0,i.XE)("https://automatorplugin.com/integrations/",{medium:"select_an_integration",content:"discover_more_integrations"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uap-icon uap-icon--external-link-alt"></span></a>\n\t\t\t</div>\n\t\t'))}},{key:"filterByNonEmptyIntegrations",value:function(e){var t=this;if(["trigger","action"].includes(e)){var n=a().extend(!0,{},UncannyAutomator.integrations);Object.entries(n).forEach((function(n){var o,r,s,l=(s=2,function(e){if(Array.isArray(e))return e}(r=n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return i}}(r,s)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=l[0],u=l[1],d=!1,p=!1,m=!1;"trigger"==e?(d=(o=(0,i.IL)(u.items.triggers)).hasTriggers,m=o.hasAvailableItems,p=o.allItemsArePro):"action"==e&&(d=(o=(0,i.IL)(u.items.actions)).hasActions,m=o.hasAvailableItems,p=o.allItemsArePro),d&&t.integrations.push(a().extend({},u,{id:c,isAvailable:m,isProOnly:p}))}))}}},{key:"sortIntegrationsAlphabetically",value:function(){this.integrations=(0,i.yv)(this.integrations,"name")}},{key:"integrationModalCurrentStep",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!(0,i.$K)(UncannyAutomator.wp)||(0,i.$K)(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&!UncannyAutomator.hasAccountConnected||(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&!UncannyAutomator.hasAccountConnected&&!UncannyAutomator.hasValidProLicense?e=1:((!(0,i.$K)(UncannyAutomator.wp)||(0,i.$K)(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&UncannyAutomator.hasAccountConnected||(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&(UncannyAutomator.hasAccountConnected||UncannyAutomator.hasValidProLicense))&&(e=t.connected?3:2),e}}],n&&g(t.prototype,n),e}();const _=y},313:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(756),_common_modal_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(772),_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(235),_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(454),_triggers_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(973),_actions_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(375);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var vsprintf=__webpack_require__(975).vsprintf,ItemOptions=function(){function ItemOptions(e,t){_classCallCheck(this,ItemOptions),this.itemId=e,this.optionId=t,this.item=UncannyAutomator.recipe.items[e],this.fields=this.item.options[this.optionId].fields,this.buttons=this.item.options[this.optionId].buttons,this.create(),this.initTokenSelector(),this.initTinyMCE(),this.initCodeMirror()}return _createClass(ItemOptions,[{key:"create",value:function(){var e=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:this.itemId}).contentContainer,t=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options"}),n=this.createButtons(),o=this.createFields();this.fieldsContainer=o,t.append(o);var a=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__notices"});this.noticeContainer=a,t.append(a),t.append(n),e.html(t)}},{key:"createFields",value:function(){var e=this,t=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__group"});return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(n,o){var a=o.getAttributes().fieldType;"repeater"==a&&o.createFields(),o.createFormElement(),t.append(o.getFormElement()),["textarea","group","repeater"].includes(a)?"group"==a?o.fields.forEach((function(t){"textarea"!==t.getAttributes().fieldType&&t.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))})):"repeater"==a&&o.fieldRows.forEach((function(t,n){t.forEach((function(t,n){t.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))}))})):o.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))})),t}},{key:"createButtons",value:function createButtons(){var _this2=this,container=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__buttons"}),automatorButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__automator-buttons"}),developerButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__developer-buttons"}),saveButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--primary"}),cancelButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return"trigger"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"action"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"closure"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),this.saveButton=saveButton,automatorButtons.append(saveButton),automatorButtons.append(cancelButton),jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.buttons,(function(index,button){var $buttonElement=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn"}).text(button.text);(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.css_classes)&&$buttonElement.addClass(button.css_classes);var doOnClick=function(){};if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.on_click))try{doOnClick=eval("(".concat(button.on_click.replace("<script>","").replace("<\/script>","").trim(),")"))}catch(e){UncannyAutomator.dev.developerMode&&(console.warn(e),console.warn(button.on_click))}$buttonElement.on("click",(function(){var e;doOnClick($buttonElement,{item:_this2.item,values:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)(_this2.itemId)},(e={},(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(button.modules)&&(button.modules.includes("modal")&&(e.Modal=_common_modal_js__WEBPACK_IMPORTED_MODULE_2__.Z),button.modules.includes("markdown")&&(e.Markdown=_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__.Z)),e))})),developerButtons.append($buttonElement)})),container.append(automatorButtons),container.append(developerButtons),saveButton.on("click",(function(){if((0,_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__.R3)(_this2.fieldsContainer).isValid){saveButton.addClass("uap-btn--loading uap-btn--disabled");var e,t=_this2.itemId,n=_this2.optionId,o=_this2.getOptionValue(),a=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(_this2.item,_this2.item.meta.sentence,jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},_this2.item.meta,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)(_this2.itemId)));try{e=a.html.get(0).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.L8)("update",{itemId:t,optionCode:n,optionValue:o,sentence_human_readable:a.brackets,sentence_human_readable_html:e},(function(e){_this2.fields.forEach((function(e){e.getFormElement().trigger("saved")})),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;var t=UncannyAutomator.recipe.items[_this2.item.id].isValid,n=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.item.id});t?UncannyAutomator.recipe.isLive||_this2.item.isLive||n.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):n.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(e){console.log("‼️ ERROR-TODO. Couldn't save the options of the item"),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;try{(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.itemId}).item.find('.item-title__token[data-options-id="'.concat(n,'"]')).trigger("click")}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}}))}})),cancelButton.on("click",(function(){"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z})),container}},{key:"initTokenSelector",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){t.initTokenSelector()}))}},{key:"initTinyMCE",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){"textarea"==t.getAttributes().fieldType&&t.initTinyMCE()}))}},{key:"initCodeMirror",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(e,t){t.initCodeMirror()}))}},{key:"getOptionValue",value:function(){var e={},t=!1,n=!1;return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(o,a){var i=a.getAttributes().optionCode,r=a.getValue();if(["select","radio"].includes(a.getAttributes().fieldType)){if(t=!0,a.getAttributes().supportsMultipleValues)try{r=JSON.stringify(r)}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}e[vsprintf("%s_readable",[i])]=a.getReadableValue();var s=a.getSelectCustomValue();"automator_custom_value"==r&&(e[vsprintf("%s_custom",[i])]=s)}else"repeater"==a.getAttributes().fieldType&&(n=!0,r=JSON.stringify(r));e[i]=r})),n||t||1!=Object.keys(e).length||(e=e[Object.keys(e)[0]]),e}}]),ItemOptions}();const __WEBPACK_DEFAULT_EXPORT__=ItemOptions},865:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var o=n(311),a=n.n(o),i=n(756),r=n(772),s=n(605),l=n(313),c=n(973),u=n(375),d=n(454),p=n(593);function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const f=function(){function e(t,n,o,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.integrationID=n,this.itemCode=o,this.itemId=a,this.item=UncannyAutomator.recipe.items[a],this.createItemSentence(t,o,a)}var t,n;return t=e,(n=[{key:"createItemSentence",value:function(e,t,n){var o,m=(0,i.Vx)(this.integrationID,e,t);this.globalItem=m,o=this.item.isMissing?this.item.sentence:(0,i.Vx)(this.integrationID,this.item.itemType,this.item.itemCode).sentence,o=(0,i.qh)(this.item,o,UncannyAutomator.recipe.items[this.itemId].meta,!0),this.item.isMissing||o.elements.token.on("click",(function(e){var t=a()(e.currentTarget);o.elements.token.removeClass("item-title__token--open"),t.addClass("item-title__token--open");var r=t.parents(".item");r.addClass("item--open"),r.trigger("automator:item:open",r.hasClass("item--open"));var s=t.data("options-id");(0,i.M0)("optionGroup",{itemID:n,groupID:s}),new l.Z(n,s)}));var f=a()("<div/>",{class:"item-title__describe-container"}),h=a()("<div/>",{class:"item-status"});f.append(o.html.addClass("item-title__describe"));var g=new s.Z("checkbox",{color:"green",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipeItem,off:UncannyAutomator.i18n.status.draftRecipeItem},currentValue:UncannyAutomator.recipe.items[n].isLive}),v=g.getFormElement();return h.append(v),f.append(h),this.item.isMissing||v.on("automator:field:change",(function(){var e=g.getValue(),t=!0;if(e&&(t=(0,d.RC)(n).isValid),g.startLoadingAnimation(),t){var a=e?"publish":"draft";if(!e&&UncannyAutomator.recipe.isLive){var s=new r.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,i.hF)(UncannyAutomator.i18n.confirmationModal.statusWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});s.setEvents({afterSetEvents:function(){s.show()},onConfirm:function(){var t;s.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),g.startLoadingAnimation();try{t=o.html.get(0).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}(0,i.L8)("change_post_status",{post_ID:n,post_status:a,sentence_human_readable:o.brackets,sentence_human_readable_html:t},(function(){s.destroy(),new c.Z,new u.Z,new p.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the item status"),s.destroy(),g.stopLoadingAnimation(),g.setValue(!e,!1)}))},onCancel:function(){s.destroy(),g.setValue(!e,!1),g.stopLoadingAnimation()},afterHide:function(){s.destroy()}})}else{var l;try{l=o.html.get(0).outerHTML}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}(0,i.L8)("change_post_status",{post_ID:n,post_status:a,sentence_human_readable:o.brackets,sentence_human_readable_html:l},(function(){g.stopLoadingAnimation(),new p.Z}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the item status"),g.stopLoadingAnimation(),g.setValue(!e,!1)}))}}else setTimeout((function(){g.stopLoadingAnimation(),g.setValue(!1,!1)}),1e3)})),f}}])&&m(t.prototype,n),e}()},973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c}),n(311);var o=n(756),a=n(464);n(975).vsprintf;var i=n(122),r=n(911);function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(975).vsprintf;var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(0,o.M0)("metabox",{type:"trigger"}).empty();var t=(0,o.Wr)("get",{filter:{itemType:"trigger"}});(0,o.xb)(t)?(new a.Z("trigger"),new r.Z("trigger")):(new i.Z("trigger",t,!1),new r.Z("trigger"),this.isContinuingIntegrationConnection()&&new a.Z("trigger"))}var t,n;return t=e,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==(0,o.Tb)(null,"ua_connecting_integration")&&"trigger"==(0,o.Tb)(null,"ua_connecting_integration_context")}}])&&s(t.prototype,n),e}();const c=l},911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var o=n(311),a=n.n(o),i=n(756),r=n(464);function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(973),n(375),n(122),n(975).vsprintf;const l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.itemType=t,this.shouldCreateMetaboxFooter()&&this.createFooter()}var t,n;return t=e,(n=[{key:"shouldCreateMetaboxFooter",value:function(){var e=!1;if("trigger"==this.itemType){var t=(0,i.Wr)("get",{filter:{itemType:"trigger"}});(0,i.xb)(t)&&(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp&&"anonymous"!=UncannyAutomator.recipe.type||(e=!0)}if("action"==this.itemType){var n=(0,i.Wr)("get",{filter:{itemType:"action"}});!(0,i.xb)(n)&&(e=!0)}return e}},{key:"createFooter",value:function(){var e=this,t=a()("<div/>",{class:"metabox__footer"}),n=a()("<div/>",{class:"uap-btn uap-btn--secondary"});if(("action"==this.itemType||"trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type)&&t.append(n),"trigger"==this.itemType&&("user"==UncannyAutomator.recipe.type&&n.text(UncannyAutomator.i18n.trigger.addAnother),"anonymous"==UncannyAutomator.recipe.type)){var o=this.createAnonymousNotice();t.append(o)}"action"==this.itemType&&(n.text(UncannyAutomator.i18n.action.addAnother),t.addClass("add-action-btn")),("trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type||"action"==this.itemType)&&n.on("click",(function(){new r.Z(e.itemType)})),(0,i.M0)("metabox",{type:this.itemType}).append(t)}},{key:"createAnonymousNotice",value:function(){return a()('\n\t\t\t<div class="description">\n\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.everyoneOnlyOneTrigger,' <a href="').concat((0,i.XE)("https://automatorplugin.com/knowledge-base/managing-triggers/",{medium:"anonymous_recipe_one_trigger",content:"learn_more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uap-icon uap-icon--external-link-alt"></span></a>\n\t\t\t</div>\n\t\t'))}}])&&s(t.prototype,n),e}()},122:(e,t,n)=>{"use strict";n.d(t,{Z:()=>k});var o=n(311),a=n.n(o),i=n(756),r=n(515),s=n(214),l=n(104),c=n(605),u=n(772),d=n(375);function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(){function e(t,n,o,a){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"buttonContainer",void 0),m(this,"button",void 0),m(this,"buttonIcon",void 0),m(this,"removeButton",void 0),m(this,"asyncModeField",void 0),m(this,"asyncModeHTML",void 0),m(this,"delayNumberField",void 0),m(this,"delayNumberHTML",void 0),m(this,"delayUnitField",void 0),m(this,"delayUnitHTML",void 0),m(this,"scheduleDateField",void 0),m(this,"scheduleDateHTML",void 0),m(this,"scheduleTimeField",void 0),m(this,"scheduleTimeHTML",void 0),m(this,"scheduleNoticeHTML",void 0),m(this,"modal",void 0),this.itemType=t,this.integrationID=n,this.itemCode=o,this.itemId=a,this.item=UncannyAutomator.recipe.items[a],this.asyncMode=this.item.meta.async_mode,UncannyAutomator.proVersion.startsWith("2")?null:this.createAsyncButton()}var t,n;return t=e,n=[{key:"hasSchedule",value:function(){return!!this.asyncMode&&("delay"==this.asyncMode?this.item.meta.async_delay_number&&this.item.meta.async_delay_unit:"schedule"==this.asyncMode&&this.item.meta.async_schedule_time&&this.item.meta.async_schedule_date)}},{key:"getButtonText",value:function(){if(this.hasSchedule()){var e=UncannyAutomator.i18n.action.asyncActions[this.asyncMode];return(e+=" ")+"<strong>"+this.item.meta.async_sentence+"</strong>"}return UncannyAutomator.i18n.action.asyncActions.delay}},{key:"createAsyncButton",value:function(){var e=this;return this.buttonContainer=a()("<div/>",{class:"item-async"}),this.button=a()("<div/>",{class:"item-async__btn"}),this.buttonIcon=a()("<i/>",{class:"uap-icon uap-icon--clock"}),this.button.html(this.getButtonText()),this.button.prepend(this.buttonIcon),this.buttonContainer.append(this.button),this.hasSchedule()&&this.createRemoveButton(),this.isNew()&&this.createBadge(UncannyAutomator.i18n.action.asyncActions.new),this.button.on("click",(function(){e.buttonContainer.hasClass("disabled")||e.showModal()})),this.buttonContainer.on("automator:asyncButton:maybeDisable",(function(e,t){var n=a()(e.currentTarget);t?(n.attr("uap-tooltip",UncannyAutomator.i18n.action.asyncActions.pleaseSave),n.attr("uap-tooltip-flow","down"),n.addClass("disabled")):(n.removeAttr("uap-tooltip"),n.removeClass("disabled"))})),this.buttonContainer}},{key:"enable",value:function(){this.button.removeAttr("uap-tooltip"),this.button.removeAttr("disabled")}},{key:"isNew",value:function(){return!0}},{key:"createBadge",value:function(e){this.buttonBadge=a()("<span/>",{class:"async-button__badge"}),this.buttonBadge.text(e),this.button.append(this.buttonBadge)}},{key:"createRemoveButton",value:function(){var e=this;this.removeButton=a()("<span/>",{class:"async-remove"}),this.removeButtonIcon=a()("<i/>",{class:"uap-icon uap-icon--times"}),this.removeButton.text(UncannyAutomator.i18n.action.asyncActions.remove),this.removeButton.on("click",(function(){e.removeSchedule()})),this.removeButton.prepend(this.removeButtonIcon),this.buttonContainer.append(this.removeButton)}},{key:"createModalContent",value:function(){var e=a()("<div/>",{class:"async-action-modal"});if(this.asyncModeHTML=this.createAsyncModeHTML(),this.asyncModeHTML.find(".form-radio__container:first").after(this.createDelayOptions()),this.asyncModeHTML.find(".form-radio__container:last").after(this.createScheduleOptions()),this.attachModeChangeEvent(),e.append(this.asyncModeHTML),this.hasSchedule()){var t=a()("<div/>",{class:"async-notice async-notice__blue"}),n=a()("<i/>",{class:"uap-icon uap-icon--exclamation-triangle"});t.append(n),t.append(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice2),e.append(t)}return e}},{key:"showModal",value:function(){var e=UncannyAutomator.i18n.action.asyncActions.modal.confirm;this.hasSchedule()&&"schedule"==this.asyncMode&&(e=UncannyAutomator.i18n.action.asyncActions.schedule),this.modal=new u.Z({title:UncannyAutomator.i18n.action.asyncActions.modal.title,content:this.createModalContent(),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:e}},{size:"large",customClass:"async-action"}),this.modalEvents()}},{key:"modalEvents",value:function(){var e=this;this.modal.setEvents({afterSetEvents:function(){e.modal.show()},onConfirm:function(){e.submitModal()},afterHide:function(){e.modal.destroy()}})}},{key:"submitModal",value:function(){var e=this.modal.getElements().modal.box.buttons.confirm;if(e.addClass("uap-btn--loading").prop("disabled",!0),this.validateForm().isValid){var t,n=this.asyncModeField.getValue(),o=this.delayNumberField.getValue(),a=this.delayUnitField.getValue(),i=this.scheduleTimeField.getValue(),r=this.scheduleDateField.getValue();t="delay"==n?this.delaySentence():this.scheduleSentence(),this.saveSchedule(n,o,a,i,r,t)}else e.removeClass("uap-btn--loading").prop("disabled",!1)}},{key:"delaySeconds",value:function(){var e,t=this.delayUnitField.getValue(),n=this.delayNumberField.getValue();switch(t){default:e=1;break;case"minutes":e=60;break;case"hours":e=3600;break;case"days":e=86400;break;case"years":e=31536e3}return n*e}},{key:"delaySentence",value:function(){var e=this.delayUnitField.getValue();return 1==this.delayNumberField.getValue()&&(e=e.slice(0,-1)),this.delayNumberField.getValue()+" "+UncannyAutomator.i18n.action.asyncActions.modal[e].toLowerCase()}},{key:"scheduleSeconds",value:function(){return Date.parse(this.scheduleDateField.getValue()+" "+this.scheduleTimeField.getValue())}},{key:"scheduleSentence",value:function(){return this.scheduleDateField.getValue()+" @ "+this.scheduleTimeField.getValue()}},{key:"saveSchedule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,i.L8)("schedule_action",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId,asyncMode:e,delayNumber:n,delayUnit:o,scheduleTime:a,scheduleDate:r,scheduleSentence:s},(function(){t.modal.destroy(),new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){t.modal.destroy(),console.log("‼️ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"removeSchedule",value:function(){this.removeButtonIcon.removeClass("uap-icon--times"),this.removeButtonIcon.addClass("uap-icon--loading uap-icon--rotate"),(0,i.L8)("remove_schedule",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId},(function(){new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("‼️ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"createTimeZone",value:function(){var e=a()("<a/>",{href:UncannyAutomator.i18n.action.asyncActions.modal.timezoneLink,target:"_blank"}),t=a()("<i/>",{class:"uap-icon uap-icon--question-circle"}),n=a()("<span/>",{class:"schedule-fields__description"}).html("<strong>"+UncannyAutomator.i18n.action.asyncActions.modal.timezone+"</strong>: "+UncannyAutomator.i18n.action.asyncActions.modal.timezoneString);return e.append(t),n.append(e),n}},{key:"createAsyncModeHTML",value:function(){return this.asyncModeField=new c.Z("radio",{itemType:"action",optionCode:"schedule_type",name:"schedule-type",isRequired:!0,currentValue:this.asyncMode?this.asyncMode:"delay",options:[{value:"delay",text:UncannyAutomator.i18n.action.asyncActions.delay},{value:"schedule",text:UncannyAutomator.i18n.action.asyncActions.schedule}]}),this.asyncModeField.createFormElement().addClass("schedule-type-radio")}},{key:"attachModeChangeEvent",value:function(){var e=this;this.asyncModeHTML.on("automator:field:change",(function(){var t,n=e.asyncModeField.getValue();t="schedule"==n?UncannyAutomator.i18n.action.asyncActions.schedule:UncannyAutomator.i18n.action.asyncActions.modal.confirm,e.hasSchedule()||("schedule"==n?e.scheduleNoticeHTML.removeClass("hidden"):e.scheduleNoticeHTML.addClass("hidden")),e.modal.elements.modal.box.buttons.confirm.text(t)}))}},{key:"createScheduleOptions",value:function(){var e=a()("<div/>",{class:"schedule-options"}),t=a()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleDesc),n=a()("<div/>",{class:"schedule-fields"});return this.hasSchedule()||(this.scheduleNoticeHTML=a()("<div/>",{class:"schedule-notice hidden"}),a()("<i/>",{class:"uap-icon uap-icon--question-circle"}),this.scheduleNoticeHTML.text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice1),this.scheduleNoticeHTML.addClass("schedule-notice__yellow")),e.append(t),n.append(this.createScheduleDateHTML()),n.append(this.createScheduleTimeHTML()),e.append(n),e.append(this.createTimeZone()),e.append(this.scheduleNoticeHTML),e}},{key:"createDelayOptions",value:function(){var e=a()("<div/>",{class:"delay-options"}),t=a()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.delayDesc),n=a()("<div/>",{class:"delay-fields"});this.delayNumberHTML=this.createDelayNumberHTML(),this.delayUnitHTML=this.createDelayUnitHTML();var o=a()("<span/>",{class:"delay-fields__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.after);return n.append(this.delayNumberHTML),n.append(this.delayUnitHTML),n.append(o),e.append(t),e.append(n),e}},{key:"createDelayNumberHTML",value:function(){this.delayNumberField=new c.Z("int",{itemType:"action",optionCode:"delay-number",isRequired:!0,placeholder:"10",supportsTokens:!1,currentValue:this.item.meta.async_delay_number?this.item.meta.async_delay_number:""},!0,this.validateDelayNumber);var e=this.delayNumberField.createFormElement();return e.addClass("delay-fields__number"),this.delayNumberField.initCodeMirror(),e}},{key:"createDelayUnitHTML",value:function(){return this.delayUnitField=new c.Z("select",{itemType:"action",optionCode:"delay-unit",currentValue:this.item.meta.async_delay_unit?this.item.meta.async_delay_unit:"minutes",customClass:"hide-this",isRequired:!0,options:[{value:"seconds",text:UncannyAutomator.i18n.action.asyncActions.modal.seconds},{value:"minutes",text:UncannyAutomator.i18n.action.asyncActions.modal.minutes},{value:"hours",text:UncannyAutomator.i18n.action.asyncActions.modal.hours},{value:"days",text:UncannyAutomator.i18n.action.asyncActions.modal.days},{value:"years",text:UncannyAutomator.i18n.action.asyncActions.modal.years}]}),this.delayUnitField.createFormElement().addClass("delay-fields__unit")}},{key:"createScheduleDateHTML",value:function(){this.scheduleDateField=new c.Z("date",m({itemType:"action",optionCode:"schedule-date",isRequired:!0,placeholder:UncannyAutomator.i18n.action.asyncActions.modal.today,dateFormat:UncannyAutomator.i18n.action.asyncActions.modal.dateFormat,supportsTokens:!1,currentValue:this.item.meta.async_schedule_date?this.item.meta.async_schedule_date:""},"placeholder",UncannyAutomator.i18n.format.date.selectDate));var e=this.scheduleDateField.createFormElement();return e.addClass("schedule-fields__date"),this.scheduleDateField.initCodeMirror(),e}},{key:"createScheduleTimeHTML",value:function(){this.scheduleTimeField=new c.Z("time",m({itemType:"action",optionCode:"schedule-time",isRequired:!0,placeholder:"11:00 AM",timeFormat:"h:i K",timeAltFormat:"h:i K",supportsTokens:!1,currentValue:this.item.meta.async_schedule_time?this.item.meta.async_schedule_time:""},"placeholder",UncannyAutomator.i18n.format.date.selectTime));var e=this.scheduleTimeField.createFormElement();return e.addClass("schedule-fields__time"),this.scheduleTimeField.initCodeMirror(),e}},{key:"validateForm",value:function(){var e;switch(this.asyncModeField.getValue()){case"schedule":e=this.validateScheduleFields();break;case"delay":e=this.delayNumberField.validate();break;default:e={isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.unsupported}}return e.isValid?{isValid:!0}:e}},{key:"validateScheduleFields",value:function(){var e=this.scheduleDateField.validate();return e.isValid&&(e=this.scheduleTimeField.validate()),e}},{key:"validateDelayNumber",value:function(e,t){return e<1?{isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.positiveNumber}:{isValid:!0}}}],n&&p(t.prototype,n),e}();const h=f;var g=n(865);function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const y=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createDragHandle()}var t,n;return t=e,(n=[{key:"createDragHandle",value:function(){return this.handle=document.createElement("div"),this.handle.setAttribute("class","item-handle"),this.handleIcon=document.createElement("i"),this.handleIcon.setAttribute("class","uap-icon uap-icon--sort"),this.handle.append(this.handleIcon),this.handle}}])&&v(t.prototype,n),e}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var w=n(771),A=function(){function e(t,n){var o=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];_(this,e);var s=(0,i.M0)("metabox",{type:t}),l=Object.keys(n).length;if(l>1&&r){var c=a()("<div/>",{class:"sortable"}),u=Object.values(n).sort((function(e,t){return e.menuOrder-t.menuOrder}));a().each(u,(function(e,n){if(t==n.itemType){var a=o.createItem(n.id,r);c.append(a)}})),this.makeSortable(c),s.append(c)}else a().each(n,(function(e,n){if(t==n.itemType){var a=o.createItem(e);s.append(a)}}))}var t,n;return t=e,(n=[{key:"createItem",value:function(e,t){var n=UncannyAutomator.recipe.items[e],o=a()("<div/>",{class:"item","data-id":e});n.isMissing&&o.addClass("item--missing"),n.meta.async_mode&&o.addClass("item--hasSchedule"),(0,i.xb)(n.inlineCss)||(n.inlineCss=n.inlineCss.replace(/{{item_id}}/g,e),o.prepend(n.inlineCss));var r=this.createHeader(n.integrationCode,n.itemType,n.itemCode,e),s=this.createNotice(n);if(t){var l=new y;o.append(l)}return o.append(r),o.append(s),o.on("automator:item:open",(function(e,t){var n=o.find(".item-async");a()(n[0]).trigger("automator:asyncButton:maybeDisable",t)})),o}},{key:"createHeader",value:function(e,t,n,o){var c=a()("<div/>"),u=a()("<div/>",{class:"item-title uap-clear"}),d=UncannyAutomator.recipe.items[o];d.isMissing&&(e=null);var p=new r.Z(t,e,n,o);c.append(p);var m=new s.Z(e);c.append(m);var f=d.integrationName,v=new l.Z(e,f);u.append(v);var y=new g.Z(t,e,n,o);u.append(y),c.append(u);var _=a()("<div/>",{class:"item__content"});if(c.append(_),"action"==t&&(0,i.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp){var b=new h(t,e,n,o,c);c.append(b)}return c}},{key:"createNotice",value:function(e){var t;return e.isMissing&&(t=a()("<div/>",{class:"item-notice"})).text(UncannyAutomator.i18n.itemMissing),t}},{key:"makeSortable",value:function(e){var t=this;w(e,{placeholder:'<div class="item"></div>',handle:".item-handle",items:".item",hoverClass:"hover"})[0].addEventListener("sortupdate",(function(e){t.orderUpdated(e)}))}},{key:"orderUpdated",value:function(e){var t=e.detail.destination.container;t.classList.add("loading");var n=e.detail.destination.items,o=[];a().each(n,(function(e,t){o.push(t.dataset.id)})),(0,i.L8)("actions_order",{recipeID:UncannyAutomator.recipe.id,newOrder:o},(function(e){new d.Z,t.classList.remove("loading")}),(function(e){new d.Z,t.classList.remove("loading")}))}}])&&b(t.prototype,n),e}();const k=A},838:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(311),a=n.n(o),i=n(756),r=n(593),s=n(605);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(975).vsprintf;const c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={metabox:a()("#uo-automator-publish-metabox"),timesPerUser:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_completions_allowed"},timesPerRecipe:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_max_completions_allowed"},toggle:null},this.createMetabox()}var t,n;return t=e,(n=[{key:"createMetabox",value:function(){var e=a()("<div/>",{id:"uap-publish-metabox"}),t=a()("<div/>",{class:"metabox__content"}),n=a()("<div/>",{class:"metabox__footer"});if("anonymous"!=UncannyAutomator.recipe.type){var o=a()("<div/>",{class:"publish-row"}),l=a()("<div/>",{class:"publish-row__visible"}),c=a()("<span/>",{class:"publish-row__icon"}),u=a()("<i/>",{class:"uap-icon uap-icon--repeat-alt"}),d=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerUser);UncannyAutomator.recipe.publish.timesPerUser=-1==UncannyAutomator.recipe.publish.timesPerUser?"":UncannyAutomator.recipe.publish.timesPerUser;var p=(0,i.xb)(UncannyAutomator.recipe.publish.timesPerUser)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerUser,m=a()("<span/>",{class:"publish-row__value"}).text(p),f=a()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),h=a()("<div/>",{class:"publish-row__hidden"}),g=a()("<div/>",{class:"publish-row__settings"});this.elements.timesPerUser.editLink=f,this.elements.timesPerUser.hiddenBox=h;var v=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerUser,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(e){var t={isValid:!1,message:""};return e>=1?t.isValid=!0:t.message=UncannyAutomator.i18n.publish.oneOrBigger,t}));this.timesField=v;var y=a()("<div/>",{class:"publish-row__buttons"}),_=a()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),b=a()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);this.elements.timesPerUser.saveButton=_,this.elements.timesPerUser.cancelButton=b,y.append(_),y.append(b),g.append(v.getFormElement()),g.append(y),h.append(g),c.append(u),l.append(c),l.append(d),l.append(m),l.append(f),o.append(l),o.append(h),t.append(o)}var w=this.timesPerRecipe();t.append(w);var A=a()("<div/>",{class:"publish-row"}),k=a()("<div/>",{class:"publish-row__visible"}),C=a()("<span/>",{class:"publish-row__icon"}),T=a()("<i/>",{class:"uap-icon uap-icon--user-astronaut"}),U=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeType),x=a()("<span/>",{class:"publish-row__value"}),E=a()('\n\t\t\t\t<a href="'.concat((0,i.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/",{medium:"publish_metabox",content:"recipe_type_question_icon"}),'" class="publish-row__learn-more" target="_blank"><span class="uap-icon uap-icon--question-circle"></span></a>\n\t\t\t'));"user"==UncannyAutomator.recipe.type&&x.text(UncannyAutomator.i18n.recipeType.userRecipeName),"anonymous"==UncannyAutomator.recipe.type&&x.text(UncannyAutomator.i18n.recipeType.everyoneRecipeName),C.append(T),k.append(C),k.append(U),k.append(x),k.append(E),A.append(k),t.append(A);var D=a()("<div/>",{class:"publish-row"}),M=a()("<div/>",{class:"publish-row__visible"}),S=a()("<span/>",{class:"publish-row__icon"}),O=a()("<i/>",{class:"uap-icon uap-icon--calendar-alt"}),I=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.createdOn),$=a()("<span/>",{class:"publish-row__value"}).text(UncannyAutomator.recipe.publish.createdOn);S.append(O),M.append(S),M.append(I),M.append($),D.append(M),t.append(D);var L=UncannyAutomator.recipe.publish.recipeRunTimes,P=a()("<a/>",{class:"publish-row__recipe-runs",target:"_blank",href:UncannyAutomator.recipe.publish.recipeRunTimesUrl.replace(/&amp;/g,"&")}).text(UncannyAutomator.recipe.publish.recipeRunTimesViewLogs),R=a()("<div/>",{class:"publish-row"}),F=a()("<div/>",{class:"publish-row__visible"}),V=a()("<span/>",{class:"publish-row__icon"}),j=a()("<i/>",{class:"uap-icon uap-icon--repeat-alt"}),K=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeRunTimes);V.append(j),F.append(V),F.append(K),F.append(a()("<span/>",{class:"publish-row__value"}).text(L)),L>0&&F.append(P),R.append(F),t.append(R);var N=a()("<div/>",{class:"publish-row"}),q=a()("<div/>",{class:"publish-row__visible"}),H=a()("<a/>",{class:"publish-row__copy-to-draft button button-secondary",href:UncannyAutomator.recipe.publish.copyToDraft.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.publish.copyRecipe);q.append(H),N.append(q),t.append(N);var B=a()("<div/>",{class:"publish-footer__row uap-clear"}),W=a()("<div/>",{class:"publish-footer__left"}),Z=a()("<a/>",{class:"publish-footer__move-to-draft",href:UncannyAutomator.recipe.publish.moveToTrash.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.proOnly.moveToTrash),Y=a()("<div/>",{class:"publish-footer__right"}),z=new s.Z("checkbox",{color:"gutenberg",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipe,off:UncannyAutomator.i18n.status.draftRecipe},currentValue:UncannyAutomator.recipe.isLive});UncannyAutomator.recipe.publish.statusToggle=z;var G=z.getFormElement();this.recipeStatusToggle=z,this.elements.toggle=G,W.append(Z),Y.append(G),B.append(W),B.append(Y),n.append(B),e.append(t),e.append(n),this.elements.metabox.html(e),new r.Z,this.bind(),this.validateStatus()}},{key:"timesPerRecipe",value:function(){var e=a()("<div/>",{class:"publish-row"}),t=a()("<div/>",{class:"publish-row__visible"}),n=a()("<span/>",{class:"publish-row__icon"}),o=a()("<i/>",{class:"uap-icon uap-icon--stopwatch-20"}),r=a()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerRecipe);UncannyAutomator.recipe.publish.timesPerRecipe=-1==UncannyAutomator.recipe.publish.timesPerRecipe?"":UncannyAutomator.recipe.publish.timesPerRecipe;var l=(0,i.xb)(UncannyAutomator.recipe.publish.timesPerRecipe)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerRecipe,c=a()("<span/>",{class:"publish-row__value"}).text(l),u=a()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),d=a()("<div/>",{class:"publish-row__hidden"}),p=a()("<div/>",{class:"publish-row__settings"});this.elements.timesPerRecipe.editLink=u,this.elements.timesPerRecipe.hiddenBox=d;var m=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerRecipe,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(e){var t={isValid:!1,message:""};return e>=1?t.isValid=!0:t.message=UncannyAutomator.i18n.publish.oneOrBigger,t}));this.timesRecipeField=m;var f=a()("<div/>",{class:"publish-row__buttons"}),h=a()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),g=a()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return this.elements.timesPerRecipe.saveButton=h,this.elements.timesPerRecipe.cancelButton=g,f.append(h),f.append(g),p.append(m.getFormElement()),p.append(f),d.append(p),n.append(o),t.append(n),t.append(r),t.append(c),t.append(u),e.append(t),e.append(d),e}},{key:"validateStatus",value:function(){UncannyAutomator.recipe.isLive&&!UncannyAutomator.recipe.isValid&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}},{key:"validateTimesPerFields",value:function(t,n,o){t.editLink.on("click",(function(){t.hiddenBox.slideToggle(300)})),t.cancelButton.on("click",(function(){t.hiddenBox.slideToggle(300,(function(){new e}))})),t.saveButton.on("click",(function(){if(o.validate().isValid){t.saveButton.addClass("uap-btn--loading uap-btn--disabled");var a=o.getValue();(0,i.xb)(a)&&(a=-1),(0,i.L8)(t.endPoint,{post_ID:UncannyAutomator.recipe.id,recipe_completions_allowed:a},(function(){"recipe_completions_allowed"==t.endPoint?UncannyAutomator.recipe.publish.timesPerUser=a:UncannyAutomator.recipe.publish.timesPerRecipe=a,t.hiddenBox.slideToggle(300,(function(){new e}))}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save times per user"),o.setValue(n),t.saveButton.removeClass("uap-btn--loading uap-btn--disabled")}))}})),o.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))}},{key:"bind",value:function(){var t=this;"anonymous"!=UncannyAutomator.recipe.type&&this.validateTimesPerFields(this.elements.timesPerUser,UncannyAutomator.recipe.publish.timesPerUser,this.timesField),this.validateTimesPerFields(this.elements.timesPerRecipe,UncannyAutomator.recipe.publish.timesPerRecipe,this.timesRecipeField),this.elements.toggle.on("automator:field:change",(function(){t.recipeStatusToggle.startLoadingAnimation();var n=t.recipeStatusToggle.getValue(),o=n?"publish":"draft";!n||n&&UncannyAutomator.recipe.isValid?(0,i.L8)("change_post_status",{post_ID:UncannyAutomator.recipe.id,post_status:o},(function(){UncannyAutomator.recipe.isLive=n,new e}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't set the recipe status"),setTimeout((function(){t.recipeStatusToggle.stopLoadingAnimation(),t.recipeStatusToggle.setValue(!1,!1)}),1e3)})):(UncannyAutomator.recipe.errorMode=!0,new r.Z,setTimeout((function(){t.recipeStatusToggle.stopLoadingAnimation(),t.recipeStatusToggle.setValue(!1,!1)}),1e3))}))}}])&&l(t.prototype,n),e}()},593:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(311),a=n.n(o),i=n(756);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={container:a()("#uo-uap-notices")},0==this.elements.container.length&&(this.createContainer(),this.elements.container=a()("#uo-uap-notices")),this.emptyContainer(),this.createWarning(),UncannyAutomator.recipe.errorMode&&this.createError()}var t,n;return t=e,(n=[{key:"emptyContainer",value:function(){this.elements.container.empty()}},{key:"createContainer",value:function(){var e=a()("<div/>",{id:"uo-uap-notices",class:"uap"});a()("#uap-publish-metabox").prepend(e)}},{key:"createError",value:function(){if(!(0,i.xb)(UncannyAutomator.recipe.message.error)){var e=a()("<div/>",{class:"uo-notice uo-notice--error"}).text(UncannyAutomator.recipe.message.error);this.elements.container.append(e)}}},{key:"createWarning",value:function(){if(!(0,i.xb)(UncannyAutomator.recipe.message.warning)){var e=a()("<div/>",{class:"uo-notice uo-notice--warning"}).text(UncannyAutomator.recipe.message.warning);this.elements.container.append(e)}}}])&&r(t.prototype,n),e}()},347:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(311),a=n.n(o),i=n(756);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.doWhenReady=t,this.render(),this.getElements(),this.listenSubmission()}var t,n;return t=e,(n=[{key:"render",value:function(){var e=a()('\n\t\t\t<div class="uap">\n\t\t\t\t<div id="uap-type-selector" class="uap-type-selector">\n\t\t\t\t\t<div class="uap-type-selector__box">\n\t\t\t\t\t\t<form id="uap-type-selector-form" class="uap-type-selector__form">\n\t\t\t\t\t\t\t<div class="uap-type-selector__title">\n\t\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.title,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__content">\n\t\t\t\t\t\t\t\t<div class="uap-type-selector__types">\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--user">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="user" id="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-user">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--user"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.userRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type uap-type-selector-type--anonymous">\n\t\t\t\t\t\t\t\t\t\t<input class="uap-type-selector-type__hidden-field" type="radio" name="uap-recipe-type" value="anonymous" id="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t<label class="uap-type-selector-type__label" for="uap-recipe-type-anonymous">\n\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__container">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__icon-img uap-type-selector-type__icon-img--anonymous"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__title">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.everyoneRecipeName,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-type-selector-type__description">\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.everyoneRecipeDescription,'\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__warning">\n\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.recipeType.cantChangeLaterNotice,'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="uap-type-selector__buttons">\n\t\t\t\t\t\t\t\t<button type="submit" id="uap-type-selector-submit-button" class="uap-btn uap-btn--primary">').concat(UncannyAutomator.i18n.confirm,"</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"));a()("body").append(e)}},{key:"getElements",value:function(){this.$elements={container:a()("#uap-type-selector"),form:a()("#uap-type-selector-form"),warning:a()("#uap-type-selector .uap-type-selector__warning"),submitButton:a()("#uap-type-selector-submit-button")}}},{key:"listenSubmission",value:function(){var e=this;this.$elements.form.on("submit",(function(t){t.preventDefault();var n=e.$elements.form.find('input[name="uap-recipe-type"]:checked').val();(0,i.xb)(n)?e.showError(UncannyAutomator.i18n.recipeType.errorDidNotSelectType):["user","anonymous"].includes(n)?e.saveRecipeType(n):e.showError(UncannyAutomator.i18n.recipeType.errorTryingToSaveOtherValue)}))}},{key:"saveRecipeType",value:function(e){var t=this,n={post_ID:UncannyAutomator.recipe.id,recipe_type:e};this.$elements.submitButton.addClass("uap-btn--loading uap-btn--disabled"),(0,i.L8)("change_post_recipe_type",n,(function(n){if(n.success){t.$elements.container.remove(),UncannyAutomator.recipe.type=e;var o=a()("#uo-recipe-triggers-meta-box-ui h2.hndle.ui-sortable-handle"),i=UncannyAutomator.i18n.trigger.userTriggers;"anonymous"==UncannyAutomator.recipe.type&&(i=UncannyAutomator.i18n.trigger.everyoneTrigger),o.text(i),t.doWhenReady(e)}else t.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save the recipe type"),t.$elements.submitButton.removeClass("uap-btn--loading uap-btn--disabled"),t.showError(UncannyAutomator.i18n.recipeType.errorSomethingWentWrong)}))}},{key:"showError",value:function(e){var t=a()('\n\t\t\t<div class="uap-type-selector__error">\n\t\t\t\t'.concat(e,"\n\t\t\t</div>\n\t\t")),n=this.$elements.container.find(".uap-type-selector__error");n.length>0&&n.remove(),t.insertAfter(this.$elements.warning),setTimeout((function(){t.addClass("uap-type-selector__error--shake")}),10)}}])&&r(t.prototype,n),e}()},463:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Tokens});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(756),_common_modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(772),_field_field__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(605);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,i=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var vsprintf=__webpack_require__(975).vsprintf,Tokens=function(){function Tokens(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Tokens),this.saveData(e,t,n),this.getData()}return _createClass(Tokens,[{key:"saveData",value:function(e,t,n){this.itemType=e,this.fieldType=t,this.options=Object.assign({includeGroupName:!0,includeGroupIcon:!0,includeGroupTokens:!0,unsupportedTokens:[]},n),this.tokensRegEx=new RegExp(/\{\{(.*?)\}\}/gm),this.tokensRegExNoAttributes=new RegExp(/[^\="]\{\{(.*?)\}\}[^\"]/gm),this.tokensThatRequireUser=[]}},{key:"getData",value:function(){this.tokens=this.getAllTokens()}},{key:"getAllTokens",value:function(){var e=[],t=this.getCommonTokens();t.tokens.length>0&&e.push(t);var n=this.getAdvancedTokens();n.tokens.length>0&&e.push(n);var o=this.getItemsTokens();return[].concat(_toConsumableArray(e),_toConsumableArray(o))}},{key:"filterUnsupportedTokens",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(this.options.unsupportedTokens)||(t=t.filter((function(t){return!e.options.unsupportedTokens.includes(t.id)}))),t}},{key:"getCommonTokens",value:function(){var e=this,t={id:"common"};return this.options.includeGroupName&&(t.name=UncannyAutomator.i18n.tokens.global.common),this.options.includeGroupIcon&&(t.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<i class="uap-icon uap-icon--bolt"></i>\n\t\t\t')),this.options.includeGroupTokens&&(t.tokens=[{id:"site_name",type:"text",name:UncannyAutomator.i18n.tokens.global.siteName,cacheable:!0}],("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&t.tokens.push(new Token({id:"user_id",type:"int",name:UncannyAutomator.i18n.tokens.global.userID,requiresUser:!0}),new Token({id:"user_username",type:"text",name:UncannyAutomator.i18n.tokens.global.userUsername,requiresUser:!0}),new Token({id:"user_firstname",type:"text",name:UncannyAutomator.i18n.tokens.global.userFirstName,requiresUser:!0}),new Token({id:"user_lastname",type:"text",name:UncannyAutomator.i18n.tokens.global.userLastName,requiresUser:!0}),new Token({id:"user_email",type:"email",name:UncannyAutomator.i18n.tokens.global.userEmail,requiresUser:!0}),new Token({id:"user_displayname",type:"text",name:UncannyAutomator.i18n.tokens.global.userDisplay,requiresUser:!0}),new Token({id:"reset_pass_link",type:"url",name:UncannyAutomator.i18n.tokens.global.userResetPassLink,requiresUser:!0})),t.tokens.push(new Token({id:"admin_email",type:"email",name:UncannyAutomator.i18n.tokens.global.adminEmail}),new Token({id:"site_url",type:"url",name:UncannyAutomator.i18n.tokens.global.siteUrl}),new Token({id:"recipe_name",name:UncannyAutomator.i18n.tokens.global.recipeName}),new Token({id:"current_date",name:UncannyAutomator.i18n.tokens.global.currentDate}),new Token({id:"current_time",name:UncannyAutomator.i18n.tokens.global.currentTime}))),t.tokens=this.filterUnsupportedTokens(t.tokens),t.tokens.forEach((function(t){t.requiresUser&&e.tokensThatRequireUser.push(t.id)})),t}},{key:"getAdvancedTokens",value:function(){var e=this,t={id:"advanced",tokens:[]};return this.options.includeGroupName&&(t.name=UncannyAutomator.i18n.tokens.global.advanced),this.options.includeGroupIcon&&(t.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<i class="uap-icon uap-icon--bolt"></i>\n\t\t\t')),this.options.includeGroupTokens&&(t.tokens.push(new PostMetaToken({context:this.itemType})),("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&(t.tokens.push(new UserMetaToken({context:this.itemType})),(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.wp)&&"1"===UncannyAutomator.wp&&t.tokens.push(new Token({id:"AUTOLOGINLINK",type:"text",name:UncannyAutomator.i18n.tokens.global.autoLoginLink,cacheable:!0,requiresUser:!0})))),t.tokens=this.filterUnsupportedTokens(t.tokens),t.tokens.forEach((function(t){t.requiresUser&&e.tokensThatRequireUser.push(t.id)})),t}},{key:"getItemsTokens",value:function(){var e=this,t=[],n=UncannyAutomator.recipe.items;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.itemType)&&(n={},["action","closure","user-selector"].includes(this.itemType)&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Wr)("get",{filter:{itemType:"trigger"}}))),"closure"==this.itemType&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Wr)("get",{filter:{itemType:"action"}})))),Object.entries(n).forEach((function(n){var o=_slicedToArray(n,2),a=(o[0],o[1]),i=e.getItemTokens(a);(i.tokens.length>0||!e.options.includeGroupTokens)&&t.push(i)})),t}},{key:"getItemTokens",value:function getItemTokens(item){var tokensGroup={id:item.itemCode,integrationId:item.integrationCode};if(this.options.includeGroupName){var itemSentence=item.sentence;item.isMissing||(itemSentence=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Vx)(item.integrationCode,item.itemType,item.itemCode).sentence),tokensGroup.name=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(item,itemSentence,UncannyAutomator.recipe.items[item.id].meta).html}if(this.options.includeGroupIcon){var $icon;if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.integrations[item.integrationCode])){var integration=UncannyAutomator.integrations[item.integrationCode];(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_svg)?$icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_svg,'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')):(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_16)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(integration.icon_32)&&($icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_16,'"\n\t\t\t\t\t\t\tsrcset="').concat(vsprintf("%s 1x, %s 2x",[integration.icon_16,integration.icon_32]),'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')))}tokensGroup.icon=$icon}if(this.options.includeGroupTokens){var itemTokens=[];if(Object.entries(item.options).forEach((function(e){var t=_slicedToArray(e,2);t[0],t[1].fields.forEach((function(e){var t=e.getAttributes();"repeater"==t.fieldType?e.fieldRows.forEach((function(e,n){var o=n;e.forEach((function(e){itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(t.optionCode,":").concat(o,":").concat(e.getAttributes().optionCode),name:"".concat(t.tokenName," - ").concat(vsprintf(UncannyAutomator.i18n.rowNumber,[o+1])," - ").concat(e.getAttributes().tokenName),type:"select"==e.getAttributes().fieldType||"textarea"==e.getAttributes().fieldType?"text":e.getAttributes().fieldType,value:e.getValue(),fieldId:e.getAttributes().optionCode,itemID:item.id,cacheable:!1})}))})):(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(t.customFieldTokens)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.Kn)(t.customFieldTokens)?Object.entries(t.customFieldTokens).forEach((function(n){var o=_slicedToArray(n,2),a=o[0],i=o[1];itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(a),name:i,type:"select"==t.fieldType||"textarea"==t.fieldType?"text":t.fieldType,value:e.getValue(),fieldId:t.optionCode,itemID:item.id,cacheable:!0})})):itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(t.optionCode),name:t.tokenName,type:"select"==t.fieldType||"textarea"==t.fieldType?"text":t.fieldType,value:e.getValue(),fieldId:t.optionCode,itemID:item.id,cacheable:!0})}))})),item.tokens.forEach((function(e){itemTokens.push({id:"".concat(item.id,":").concat(e.tokenIdentifier,":").concat(e.tokenId),name:e.tokenName,type:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(e.tokenType)?e.tokenType:"text",itemID:item.id,cacheable:!0})})),tokensGroup.tokens=itemTokens,tokensGroup.tokens=this.filterUnsupportedTokens(tokensGroup.tokens),!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(item.filterTokens))try{var filterTokens=eval("(".concat(item.filterTokens.replace("<script>","").replace("<\/script>","").trim(),")"));itemTokens=filterTokens(tokensGroup,item)}catch(e){UncannyAutomator.dev.developerMode&&(console.warn(e),console.log(item.filterTokens))}}return tokensGroup}},{key:"filterTokensByType",value:function(e){var t=this;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(this.fieldType)&&(["text","textarea","url"].includes(this.fieldType)||(e=e.filter((function(e){var n=e.type;return"float"==t.fieldType&&"int"==n&&(n="float"),t.fieldType==n})))),e}},{key:"createTokenDOMNode",value:function(e){var t=null,n=this.getTokenDataByID(e);if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n)){if((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(UncannyAutomator.cache.tokens[n.id]))t=UncannyAutomator.cache.tokens[n.id];else{(t=document.createElement("span")).classList.add("uap-token"),t.appendChild(n.group.icon[0].cloneNode());var o=document.createElement("span");o.classList.add("uap-token__name"),o.innerHTML=n.name,t.appendChild(o),n.cacheable&&(UncannyAutomator.cache.tokens[n.id]=t)}t=t.cloneNode(!0)}else{(t=document.createElement("span")).classList.add("uap-token","uap-token--invalid");var a=document.createElement("i");a.classList.add("uap-icon","uap-icon--exclamation"),t.appendChild(a);var i=document.createElement("span");i.classList.add("uap-token__name"),i.innerHTML=e,t.appendChild(i)}return t}},{key:"getTokenDataByID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=null;return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(e)||this.tokens.some((function(n){return t=n.tokens.reduce((function(t,n){return(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(n.is)?n.is(e)?n:t:n.id==e?n:t}),null),!!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(t)&&((0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(t)&&(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(t.getVariation)&&(t=t.getVariation(e)),t.group={id:n.id,name:n.name,icon:n.icon},!0)})),t}},{key:"renderTextWithTokens",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({template:"",parseTokensInAttributes:!0},n);var o=!(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.xb)(n.template),a=document.createElement("span");return e=e.replace(n.parseTokensInAttributes?this.tokensRegEx:this.tokensRegExNoAttributes,(function(e,a){var i=t.createTokenDOMNode(a).outerHTML;return o&&(i=vsprintf(n.template,[i,a])),e.replace("{{".concat(a,"}}"),i)})),a.innerHTML=e,a}}]),Tokens}(),Token=function(){function e(t){var n=t.id,o=t.type,a=void 0===o?"text":o,i=t.name,r=t.cacheable,s=void 0===r||r,l=t.requiresUser,c=void 0!==l&&l;_classCallCheck(this,e),this.id=n,this.type=a,this.name=i,this.cacheable=s,this.requiresUser=c}return _createClass(e,[{key:"is",value:function(e){return e==this.id}}]),e}(),PostMetaToken=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o,a=e.customID,i=e.customName,r=e.context,s=void 0===r?"trigger":r;return _classCallCheck(this,n),(o=t.call(this,{id:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(a)?a:"POSTMETA:POSTID:KEY",name:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(i)?i:UncannyAutomator.i18n.tokens.global.postMetaKey,type:"text",cacheable:!1,requiresUser:!1})).context=s,o}return _createClass(n,[{key:"unmodifiedID",get:function(){return"POSTMETA:POSTID:KEY"}},{key:"defaultName",get:function(){return UncannyAutomator.i18n.tokens.global.postMetaKey}},{key:"beforeAdded",value:function(e){var t=this,n=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div></div>"),o=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.XE)("https://automatorplugin.com/knowledge-base/post-meta-tokens/",{medium:"add_token",content:"post_meta_post_id_learn_more"}),a=new _field_field__WEBPACK_IMPORTED_MODULE_3__.Z("int",{itemType:this.context,optionCode:"token__postMetaPostField",label:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldLabel,description:vsprintf(UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldDescription,['<a href="'.concat(o,'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <span class="uap-icon uap-icon--external-link-alt"></span></a>')]),isRequired:!0,supportsTokens:!0,unsupportedTokens:["USERMETA:KEY","POSTMETA:POSTID:KEY"]});n.append(a.createFormElement());var i=new _field_field__WEBPACK_IMPORTED_MODULE_3__.Z("text",{itemType:this.context,optionCode:"token__postMetaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldLabel,description:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldDescription,isRequired:!0,supportsTokens:!0,unsupportedTokens:["USERMETA:KEY","POSTMETA:POSTID:KEY"]});n.append(i.createFormElement()),a.initTokenSelector(),a.initCodeMirror(),i.initTokenSelector(),i.initCodeMirror();var r=new _common_modal__WEBPACK_IMPORTED_MODULE_2__.Z({title:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.confirmButton}},{size:"extra-large",allowContentOverflow:!0});r.setEvents({afterSetEvents:function(){r.show()},onConfirm:function(){var n=a.validate(),o=i.validate();if(n.isValid&&o.isValid){var s=a.getValue(),l=i.getValue(),c=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},t),u=s.replaceAll("{","[").replaceAll("}","]").replaceAll(":",";"),d=l.replaceAll("{","[").replaceAll("}","]").replaceAll(":",";");c.id=c.id.replace("POSTID",u).replace("KEY",d);var p=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[u,d]);if(s.includes("{{")||l.includes("{{"))try{var m=new Tokens("action"),f=m.renderTextWithTokens(s),h=m.renderTextWithTokens(l);p=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[f.outerHTML,h.outerHTML])}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}c.name=p,r.destroy(),e(c)}},afterHide:function(){r.destroy()}})}},{key:"getDynamicTokenName",value:function(e){var t=_slicedToArray(e.split(":"),3),n=(t[0],t[1]),o=t[2],a=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[n,o]);if(n.includes("[[")||o.includes("[["))try{var i=new Tokens("action"),r=i.renderTextWithTokens(n.replaceAll("[","{").replaceAll("]","}").replaceAll(";",":")),s=i.renderTextWithTokens(o.replaceAll("[","{").replaceAll("]","}").replaceAll(";",":"));a=vsprintf(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,[r.outerHTML,s.outerHTML])}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}return a}},{key:"is",value:function(e){return e.startsWith("POSTMETA:")}},{key:"getVariation",value:function(e){return new n({customID:e,customName:this.getDynamicTokenName(e),context:this.context})}}]),n}(Token),UserMetaToken=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o,a=e.customID,i=e.customName,r=e.context,s=void 0===r?"trigger":r;return _classCallCheck(this,n),(o=t.call(this,{id:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(a)?a:"USERMETA:KEY",name:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.$K)(i)?i:UncannyAutomator.i18n.tokens.global.userMetaKey,type:"text",cacheable:!1,requiresUser:!0})).context=s,o}return _createClass(n,[{key:"beforeAdded",value:function(e){var t=this,n=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div></div>"),o=new _field_field__WEBPACK_IMPORTED_MODULE_3__.Z("text",{optionCode:"token__metaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKey,description:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKeyDescription,isRequired:!0});n.append(o.createFormElement());var a=new _common_modal__WEBPACK_IMPORTED_MODULE_2__.Z({title:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.confirmButton}});a.setEvents({afterSetEvents:function(){a.show()},onConfirm:function(){var n=o.validate(),i=o.getValue();if(n.isValid){var r=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},t);r.id=r.id.replace("KEY",i),r.name=vsprintf(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[i]),a.destroy(),e(r)}},afterHide:function(){a.destroy()}})}},{key:"getDynamicTokenName",value:function(e){var t=e.replace("USERMETA:","");return vsprintf(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,[t])}},{key:"is",value:function(e){return e.startsWith("USERMETA:")}},{key:"getVariation",value:function(e){return new n({customID:e,customName:this.getDynamicTokenName(e),context:this.context})}}]),n}(Token)},454:(e,t,n)=>{"use strict";n.d(t,{RC:()=>l,R3:()=>c,OP:()=>u,oy:()=>f});var o=n(311),a=n.n(o),i=n(756),r=(n(838),n(463)),s=n(975).vsprintf;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={isValid:!1};if((0,i.$K)(e)){var o=UncannyAutomator.recipe.items[e];if(!o.isMissing&&!(0,i.xb)(o)&&(n.isValid=o.isValid,!o.isValid)){var r=(0,i.M0)("item",{id:e}).item;r.addClass("item--error"),a().each(o.options,(function(t,n){if(!n.isValid){var o=(0,i.M0)("optionGroup",{itemID:e,groupID:t});o.tokenInSentence.addClass("item-title__token--error item-title__token--error-shake"),o.fieldsContainer.addClass("item-options__group--error"),o.optionsContainer.addClass("item-options--error"),setTimeout((function(){o.tokenInSentence.removeClass("item-title__variable--error-shake")}),1e3),(0,i.$K)(o.optionsContainer)&&c(o.optionsContainer)}}))}}else n.isValid=!1,(0,i.xb)(t)&&console.error("Neither itemID nor the $item are defined. One of them must be defined.");return n}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={isValid:!1},o=e.find('\n\t\tinput.form-element__input[data-is-child-field="'.concat(t?"true":"false",'"],\n\t\ttextarea.form-element__textarea[data-is-child-field="').concat(t?"true":"false",'"],\n\t\tselect.form-element__select[data-is-child-field="').concat(t?"true":"false",'"],\n\t\t.form-checkbox input,\n\t\t.form-radio')),i=!0;return o.each((function(){var t=a()(this),n=(t.data("type"),{});if(t.hasClass("form-radio")){var o=t.find("input").first(),r=t.find("input:checked");n={field_type:"radio",value:r.length>0?r.val():"",attributes:{supportsTokens:o.data("supportstokens"),required:o.data("required")}}}else n=t.hasClass("form-element__select")?{field_type:"select",value:t.val(),attributes:{supportsTokens:t.data("supportstokens"),required:t.data("required"),supportsCustomValue:t.data("supports-custom-value")}}:{field_type:t.data("type"),value:t.val(),attributes:{supportsTokens:t.data("supportstokens"),required:t.data("required")}};"checkbox"==n.field_type&&(n.value=t.is(":checked")),u(t,n.field_type,n.value,n.attributes).isValid||(i=!1,e.addClass("item-options--error"))})),n.isValid=i,n}function u(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{supportsTokens:!1,required:!1},r=arguments.length>4?arguments[4]:void 0,s={isValid:!1,message:""},l=(0,i.ew)(),u={select:{empty:UncannyAutomator.i18n.validation.field.select.empty,invalid:UncannyAutomator.i18n.validation.field.select.invalid},text:{empty:UncannyAutomator.i18n.validation.field.text.empty,invalid:UncannyAutomator.i18n.validation.field.text.invalid},textarea:{empty:UncannyAutomator.i18n.validation.field.textarea.empty,invalid:UncannyAutomator.i18n.validation.field.textarea.invalid},int:{empty:UncannyAutomator.i18n.validation.field.int.empty,invalid:UncannyAutomator.i18n.validation.field.int.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.int.multipleTokens},float:{empty:UncannyAutomator.i18n.validation.field.float.empty,invalid:UncannyAutomator.i18n.validation.field.float.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.float.multipleTokens},email:{empty:UncannyAutomator.i18n.validation.field.email.empty,single:{invalid:UncannyAutomator.i18n.validation.field.email.single.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.single.multipleTokens},multiple:{invalid:UncannyAutomator.i18n.validation.field.email.multiple.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens}},url:{empty:UncannyAutomator.i18n.validation.field.url.empty,invalid:UncannyAutomator.i18n.validation.field.url.invalid},checkbox:{empty:UncannyAutomator.i18n.validation.field.checkbox.empty,invalid:UncannyAutomator.i18n.validation.field.checkbox.invalid},radio:{empty:UncannyAutomator.i18n.validation.field.radio.empty,invalid:UncannyAutomator.i18n.validation.field.radio.invalid},date:{empty:UncannyAutomator.i18n.validation.field.date.empty,invalid:UncannyAutomator.i18n.validation.field.date.invalid},time:{empty:UncannyAutomator.i18n.validation.field.time.empty,invalid:UncannyAutomator.i18n.validation.field.time.invalid},invalidType:UncannyAutomator.i18n.validation.field.invalidType};try{if("textarea"==t&&!(0,i.xb)(e)&&e.is(":not(:visible)")){var p=e.closest(".form-element");p.find(".switch-html").trigger("click"),n=e.val(),p.find(".switch-tmce").trigger("click")}}catch(e){UncannyAutomator.dev.developerMode&&console.warn(e)}if((0,i.d3)(t,l)){if("checkbox"!=t||(0,i.xb)(n)||["true","false"].includes(n)&&(n="true"==n),o.required&&((0,i.xb)(n)||"checkbox"==t&&!1===n))s.message=u[t].empty;else if(!o.required&&(0,i.xb)(n))s.isValid=!0;else if(""!=n){var f;switch(t){case"select":if(s.isValid=!0,o.supportsCustomValue&&"automator_custom_value"==n){var h=e.closest(".form-element").find(".form-element-children");1==h.length&&(s.isValid=c(h,!0).isValid)}if(s.isValid&&(0,i.$K)(r)){var g=r(n);s.isValid=g.isValid,g.isValid||(s.message=g.message)}break;case"text":case"textarea":if(s.isValid=!0,(0,i.$K)(r)){var v=r(n);s.isValid=v.isValid,v.isValid||(s.message=v.message)}break;case"int":var y,_=new RegExp(/^([+-]?[1-9]\d*|0)$/gm);if(f=d(n),o.supportsTokens&&f.hasTokens?1==f.tokens.length?s.isValid=!0:s.message=u.int.multipleTokens:_.test(n)?s.isValid=!0:s.message=u.int.invalid,s.isValid&&(0,i.$K)(r)){var b=r(n,y);s.isValid=b.isValid,b.isValid||(s.message=b.message)}break;case"float":var w,A=new RegExp(/^[+-]?((\d+(\.|\,)?\d*)|(\.\d+))$/gm);if(f=d(n),o.supportsTokens&&f.hasTokens?1==f.tokens.length?s.isValid=!0:s.message=u.float.multipleTokens:A.test(n)?s.isValid=!0:s.message=u.float.invalid,s.isValid&&(0,i.$K)(r)){var k=r(n,w);s.isValid=k.isValid,k.isValid||(s.message=k.message)}break;case"email":var C,T=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),U=[];n.includes(",")?(U=n.split(","),a().each(U,(function(e,t){U[e]=t.trim()}))):U.push(n.trim()),f=d(n);var x=!0,E=U.length>1;if(o.supportsTokens&&f.hasTokens){var D=!1;a().each(U,(function(e,t){if(!((f=d(t)).tokens.length<=1))return D=!0,!1})),x&&!D?s.isValid=!0:s.message=D?E?u.email.multiple.multipleTokens:u.email.single.multipleTokens:E?u.email.multiple.invalid:u.email.single.invalid}else a().each(U,(function(e,t){T.test(t)||(x=!1)})),x?s.isValid=!0:s.message=E?u.email.multiple.invalid:u.email.single.invalid;if(s.isValid&&(0,i.$K)(r)){var M=r(n,C);s.isValid=M.isValid,M.isValid||(s.message=M.message)}break;case"url":var S=m(n,o);if(S.isValid?s.isValid=!0:s.message=u.invalidType,s.isValid&&(0,i.$K)(r)){var O=r(n,S.simulatedURL);s.isValid=O.isValid,O.isValid||(s.message=O.message)}break;case"checkbox":if(s.isValid=!0,(0,i.$K)(r)){var I=r(n);s.isValid=I.isValid,I.isValid||(s.message=I.message)}break;case"radio":if(s.isValid=!0,(0,i.$K)(r)){var $=r(n);s.isValid=$.isValid,$.isValid||(s.message=$.message)}break;case"date":if(s.isValid=!0,(0,i.$K)(r)){var L=r(n);s.isValid=L.isValid,L.isValid||(s.message=L.message)}break;case"time":if(s.isValid=!0,(0,i.$K)(r)){var P=r(n);s.isValid=P.isValid,P.isValid||(s.message=P.message)}break;default:s.isValid=!1,s.message=""}}}else s.message=u.invalidType;if(!(0,i.xb)(e)){var R=e.closest(".form-element"),F=R.find(".form-element__error").filter((function(){return a()(this).closest(".form-element").is(R)}));s.isValid?(R.removeClass("form-element--error"),R.addClass("form-element--success")):(R.removeClass("form-element--success"),R.addClass("form-element--error")),""!=s.message?(F.addClass("form-element__error--show"),F.text(s.message)):(F.removeClass("form-element__error--show"),F.text(""))}return s}function d(e){var t={hasTokens:!1,tokens:[]},n=new RegExp(/\{\{(.*?)\}\}/gm),o=new r.Z(null,null,{includeGroupName:!1,includeGroupIcon:!1}).tokens;return(0,i.$K)(e)?(0,i.xb)(e)||function(){(0,i.HD)(e)||(e=e.toString());for(var r,s=[],l=function(){var e=r[1];e.startsWith("USERMETA:")||e.startsWith("POSTMETA:")?s.push(e):a().each(o,(function(t,n){a().each(n.tokens,(function(t,n){e==n.id&&s.push(n)}))}))};null!==(r=n.exec(e));)l();t.tokens=s,t.tokens.length>0&&(t.hasTokens=!0)}():console.error("Undefined string attribute"),t}function p(e){var t=e,n=d(e);return n.hasTokens&&a().each(n.tokens,(function(e,n){var o=n.id.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");o=s("{{%s}}",[o]);var a=new RegExp(o,"g");t=t.replace(a,(function(e,t){return function(e){var t="";switch(e){case"select":case"radio":t="option";break;case"text":t="lorem-ipsum";break;case"textarea":t="<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum finibus eros nunc, et posuere libero posuere a. Nam viverra mattis finibus. Aenean purus lorem, mollis vel ullamcorper ac</p>";break;case"int":t=1;break;case"float":t=1.1;break;case"url":t="https://example.com";break;case"email":t="example@example.com";break;case"checkbox":t=!0;break;case"date":t="2021-12-31";break;case"":t="01:00 PM"}return t}(n.type)}))})),t}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{supportsTokens:!1},n={changed:!1,isValid:!1,newURL:null,simulatedURL:null};e=e.replace(/ /g,"%20");var o=new RegExp("^(?:(?:https?|ftp)://)(?:S+(?::S*)?@)?(?:(?!(?:10|127)(?:.d{1,3}){3})(?!(?:169.254|192.168)(?:.d{1,3}){2})(?!172.(?:1[6-9]|2d|3[0-1])(?:.d{1,3}){2})(?:[1-9]d?|1dd|2[01]d|22[0-3])(?:.(?:1?d{1,2}|2[0-4]d|25[0-5])){2}(?:.(?:[1-9]d?|1dd|2[0-4]d|25[0-4]))|(?:(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)(?:.(?:[a-z¡-￿0-9]-*)*[a-z¡-￿0-9]+)*(?:.(?:[a-z¡-￿]{2,})).?)(?::d{2,5})?(?:[/?#]S*)?"),a=d(e),i=e;if(t.supportsTokens&&a.hasTokens){var r=p(e);n.simulatedURL=r,o.test(r)?n.isValid=!0:(i="/"==e[0]?UncannyAutomator.siteURL+e:UncannyAutomator.siteURL+"/"+e,o.test(i)&&(n.isValid=!0))}else o.test(e)?n.isValid=!0:(i="/"==e[0]?UncannyAutomator.siteURL+e:UncannyAutomator.siteURL+"/"+e,o.test(i)&&(n.isValid=!0));return n.newURL=i,n.newURL!=e&&(n.changed=!0),n}function f(e){e.checkURL()}!function(e){e.fn.checkURL=function(t){return this.each((function(){var n=e(this),o=e.extend({preURL:"Final URL: "},t),a={container:n,input:n.find(".form-element__input")},i={required:a.input.data("required"),supportsTokens:a.input.data("supportstokens")},r=e("<div/>",{class:"form-input-url-notice"}),s=e("<div/>",{class:"form-input-url-notice__header"}),l=e("<div/>",{class:"form-input-url-notice__url"});function c(e){var t=m(e,i);""!=e&&t.isValid&&t.changed?(r.addClass("form-input-url-notice--show"),l.text(t.newURL)):r.removeClass("form-input-url-notice--show")}return s.text(o.preURL),s.appendTo(r),l.appendTo(r),r.appendTo(a.container),""!=a.input.val()&&c(a.input.val()),a.container.on("automator:field:change",(function(){c(a.input.val())})),this}))}}(jQuery)},895:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e,...t){if(!e)throw TypeError("Cannot convert undefined or null to object");for(const n of t)n&&Object.keys(n).forEach((t=>e[t]=n[t]));return e})},771:e=>{"use strict";function t(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var n=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},o=new Map,a=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),i=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return o.has(e)||o.set(e,new a),o.get(e)};function r(e,t,n){if(e instanceof Array)for(var o=0;o<e.length;++o)r(e[o],t,n);else e.addEventListener(t,n),i(e).setData("event"+t,n)}function s(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)s(e[n],t);else e.removeEventListener(t,i(e).getData("event"+t)),i(e).deleteData("event"+t)}function l(e,t,n){if(e instanceof Array)for(var o=0;o<e.length;++o)l(e[o],t,n);else e.setAttribute(t,n)}function c(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.removeAttribute(t)}var u,d,p,m,f,h,g,v,y,_=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},b=function(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},w=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},A=function(e,t,n){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},k=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return"border-box"===t.getPropertyValue("box-sizing")?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},C=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},T=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},U=function(e){return e.composedPath&&e.composedPath()[0]||e.target},x=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},E=function(e,t){if(!0===e.isSortable){var n=i(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==i(e).getConfig("connectWith")&&null!==i(e).getConfig("connectWith"))return i(e).getConfig("connectWith")===i(t).getConfig("connectWith")}return!1},D={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"},M=function(e,t){if("string"==typeof i(e).getConfig("hoverClass")){var o=i(e).getConfig("hoverClass").split(" ");!0===t?(r(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"number"!=typeof t)throw new Error("You must provide a number as the second argument for throttle.");var o=null;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var r=Date.now();(null===o||r-o>=t)&&(o=r,e.apply(n,a))}}((function(t){0===t.buttons&&n(e.children,i(e).getConfig("items")).forEach((function(e){var n,a;e===t.target||e.contains(t.target)?(n=e.classList).add.apply(n,o):(a=e.classList).remove.apply(a,o)}))}),i(e).getConfig("throttleTime"))),r(e,"mouseleave",(function(){n(e.children,i(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,o)}))}))):(s(e,"mousemove"),s(e,"mouseleave"))}},S=function(e){s(e,"dragstart"),s(e,"dragend"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop"),s(e,"mouseenter"),s(e,"mouseleave")},O=function(e,t){e&&s(e,"dragleave"),t&&t!==e&&s(t,"dragleave")},I=function(e){var t;(t=e).h5s&&delete t.h5s.data,c(e,"aria-dropeffect")},$=function(e){c(e,"aria-grabbed"),c(e,"aria-copied"),c(e,"draggable"),c(e,"role")};function L(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function P(e,o){var a=t(e,"opts"),i=n(e.children,a.items).filter((function(e){return e.contains(o)||e.shadowRoot&&e.shadowRoot.contains(o)}));return i.length>0?i[0]:o}var R=function(e){var o=t(e,"opts"),a=n(e.children,o.items),i=T(a,o.handle);l(e,"aria-dropeffect","move"),t(e,"_disabled","false"),l(i,"draggable","true"),M(e,!0),!1===o.disableIEFix&&"function"==typeof(document||window.document).createElement("span").dragDrop&&r(i,"mousedown",(function(){if(-1!==a.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===a.indexOf(e);)e=e.parentElement;e.dragDrop()}}))};function F(e,a){var c=String(a);return a=a||{},"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(c)?e.map((function(e){var o=t(e,"opts");return function(e,o,a){if(void 0===o&&(o=function(e,t){return e}),void 0===a&&(a=function(e){return e}),!(e instanceof HTMLElement)||1==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof o||"function"!=typeof a)throw new Error("You need to provide a valid serializer for items and the container.");var i=t(e,"opts").items,r=n(e.children,i),s=r.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:b(t,r)}}));return{container:a({node:e,itemCount:s.length}),items:s.map((function(t){return o(t,e)}))}}(e,o.itemSerializer,o.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(c))return F[c](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(a,e)&&null!==a[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),a=Object.assign({},D,i(e).config,a),i(e).config=a,t(e,"opts",a),e.isSortable=!0,function(e){var o=t(e,"opts"),a=n(e.children,o.items),i=T(a,o.handle);t(e,"_disabled","false"),S(a),O(m,v),s(i,"mousedown"),s(e,"dragover"),s(e,"dragenter"),s(e,"drop")}(e);var M,I=n(e.children,a.items);if(null!==a.placeholder&&void 0!==a.placeholder){var $=document.createElement(e.tagName);a.placeholder instanceof HTMLElement?$.appendChild(a.placeholder):$.innerHTML=a.placeholder,M=$.children[0]}i(e).placeholder=function(e,t,n){var o;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(o=t.classList).add.apply(o,n.split(" ")),t}(e,M,a.placeholderClass),t(e,"items",a.items),a.acceptFrom?t(e,"acceptFrom",a.acceptFrom):a.connectWith&&t(e,"connectWith",a.connectWith),R(e),l(I,"role","option"),l(I,"aria-grabbed","false"),r(e,"dragstart",(function(e){var t=U(e);if(!0!==t.isSortable&&(e.stopImmediatePropagation(),(!a.handle||t.matches(a.handle))&&"false"!==t.getAttribute("draggable"))){var o=L(t,e),r=P(o,t);g=n(o.children,a.items),f=g.indexOf(r),h=b(r,o.children),m=o,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=x),e.dataTransfer&&e.dataTransfer.setDragImage){var o=n(t,_(t),e);if(!(o.element instanceof HTMLElement)||"number"!=typeof o.posX||"number"!=typeof o.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",U(e).id),e.dataTransfer.setDragImage(o.element,o.posX,o.posY)}}(e,r,a.customDragImage),d=k(r),p=C(r),r.classList.add(a.draggingClass),u=function(e,t){var n=e;return!0===i(t).getConfig("copy")&&(l(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(r,o),l(u,"aria-grabbed","true"),o.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:h,index:f,container:m},item:u,originalTarget:t}}))}})),r(e,"dragenter",(function(o){var s=U(o),l=L(s,o);l&&l!==v&&(y=n(l.children,t(l,"items")).filter((function(t){return t!==i(e).placeholder})),a.dropTargetContainerClass&&l.classList.add(a.dropTargetContainerClass),l.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:h,index:f,container:m},destination:{container:l,itemsBeforeUpdate:y},item:u,originalTarget:s}})),r(l,"dragleave",(function(e){var t=e.relatedTarget||e.fromElement;e.currentTarget.contains(t)||(a.dropTargetContainerClass&&l.classList.remove(a.dropTargetContainerClass),l.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:h,index:f,container:l},item:u,originalTarget:s}})))}))),v=l})),r(e,"dragend",(function(n){if(u){u.classList.remove(a.draggingClass),l(u,"aria-grabbed","false"),"true"===u.getAttribute("aria-copied")&&"true"!==t(u,"dropped")&&u.remove(),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay);var i=Array.from(o.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(w)[0];i&&i.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}})),v=null,u=null,d=null,p=null}})),r(e,"drop",(function(r){if(E(e,u.parentElement)){r.preventDefault(),r.stopPropagation(),t(u,"dropped","true");var s=Array.from(o.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(w)[0];if(s){s.replaceWith(u),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}}));var l=i(e).placeholder,c=n(m.children,a.items).filter((function(e){return e!==l})),d=!0===this.isSortable?this:this.parentElement,p=n(d.children,t(d,"items")).filter((function(e){return e!==l})),v=b(u,Array.from(u.parentElement.children).filter((function(e){return e!==l}))),_=b(u,p);a.dropTargetContainerClass&&d.classList.remove(a.dropTargetContainerClass),h===v&&m===d||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:h,index:f,container:m,itemsBeforeUpdate:g,items:c},destination:{index:_,elementIndex:v,container:d,itemsBeforeUpdate:y,items:p},item:u}}))}else t(u,"dropped","false")}}));var V,j,K,N=(V=function(e,t,r,s){if(u)if(a.forcePlaceholderSize&&(i(e).placeholder.style.height=d+"px",i(e).placeholder.style.width=p+"px"),Array.from(e.children).indexOf(t)>-1){var l=k(t),c=C(t),m=b(i(e).placeholder,t.parentElement.children),f=b(t,t.parentElement.children);if(l>d||c>p){var h=l-d,g=c-p,v=_(t).top,y=_(t).left;if(m<f&&("vertical"===a.orientation&&s<v||"horizontal"===a.orientation&&r<y))return;if(m>f&&("vertical"===a.orientation&&s>v+l-h||"horizontal"===a.orientation&&r>y+c-g))return}void 0===u.oldDisplay&&(u.oldDisplay=u.style.display),"none"!==u.style.display&&(u.style.display="none");var w=!1;try{var T=_(t).top+t.offsetHeight/2,U=_(t).left+t.offsetWidth/2;w="vertical"===a.orientation&&s>=T||"horizontal"===a.orientation&&r>=U}catch(e){w=m<f}w?function(e,t){A(e,t,"after")}(t,i(e).placeholder):function(e,t){A(e,t,"before")}(t,i(e).placeholder),Array.from(o.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==i(e).placeholder&&t.placeholder.remove()}))}else{var x=Array.from(o.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==x.indexOf(t)||e!==t||n(t.children,a.items).length||(x.forEach((function(e){return e.remove()})),t.appendChild(i(e).placeholder))}},void 0===(j=a.debounce)&&(j=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(K),K=setTimeout((function(){V.apply(void 0,e)}),j)}),q=function(e){var o=e.target,a=!0===o.isSortable?o:L(o,e);if(o=P(a,o),u&&E(a,u.parentElement)&&"true"!==t(a,"_disabled")){var r=t(a,"opts");parseInt(r.maxItems)&&n(a.children,t(a,"items")).length>parseInt(r.maxItems)&&u.parentElement!==a||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===i(a).getConfig("copy")?"copy":"move",N(a,o,e.pageX,e.pageY))}};r(I.concat(e),"dragover",q),r(I.concat(e),"dragenter",q)})),e)}F.destroy=function(e){!function(e){var o=t(e,"opts")||{},a=n(e.children,o.items),i=T(a,o.handle);M(e,!1),s(e,"dragover"),s(e,"dragenter"),s(e,"dragstart"),s(e,"dragend"),s(e,"drop"),I(e),s(i,"mousedown"),S(a),$(a),O(m,v),e.isSortable=!1}(e)},F.enable=function(e){R(e)},F.disable=function(e){!function(e){var o=t(e,"opts"),a=n(e.children,o.items),i=T(a,o.handle);l(e,"aria-dropeffect","none"),t(e,"_disabled","true"),l(i,"draggable","false"),s(i,"mousedown"),M(e,!1)}(e)},F.__testing={data:t,removeItemEvents:S,removeItemData:$,removeSortableData:I,removeContainerEvents:O},e.exports=F},686:(e,t,n)=>{var o,a;o=[n(311)],void 0===(a=function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var n,o,a;return t&&t.requirejs||(t?o=t:t={},function(e){var t,i,r,s,l={},c={},u={},d={},p=Object.prototype.hasOwnProperty,m=[].slice,f=/\.js$/;function h(e,t){return p.call(e,t)}function g(e,t){var n,o,a,i,r,s,l,c,d,p,m,h=t&&t.split("/"),g=u.map,v=g&&g["*"]||{};if(e){for(r=(e=e.split("/")).length-1,u.nodeIdCompat&&f.test(e[r])&&(e[r]=e[r].replace(f,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),d=0;d<e.length;d++)if("."===(m=e[d]))e.splice(d,1),d-=1;else if(".."===m){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((h||v)&&g){for(d=(n=e.split("/")).length;d>0;d-=1){if(o=n.slice(0,d).join("/"),h)for(p=h.length;p>0;p-=1)if((a=g[h.slice(0,p).join("/")])&&(a=a[o])){i=a,s=d;break}if(i)break;!l&&v&&v[o]&&(l=v[o],c=d)}!i&&l&&(i=l,s=c),i&&(n.splice(0,s,i),e=n.join("/"))}return e}function v(t,n){return function(){var o=m.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),i.apply(e,o.concat([t,n]))}}function y(e){return function(t){l[e]=t}}function _(n){if(h(c,n)){var o=c[n];delete c[n],d[n]=!0,t.apply(e,o)}if(!h(l,n)&&!h(d,n))throw new Error("No "+n);return l[n]}function b(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function w(e){return e?b(e):[]}function A(e){return function(){return u&&u.config&&u.config[e]||{}}}r=function(e,t){var n,o,a=b(e),i=a[0],r=t[1];return e=a[1],i&&(n=_(i=g(i,r))),i?e=n&&n.normalize?n.normalize(e,(o=r,function(e){return g(e,o)})):g(e,r):(i=(a=b(e=g(e,r)))[0],e=a[1],i&&(n=_(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},s={require:function(e){return v(e)},exports:function(e){var t=l[e];return void 0!==t?t:l[e]={}},module:function(e){return{id:e,uri:"",exports:l[e],config:A(e)}}},t=function(t,n,o,a){var i,u,p,m,f,g,b,A=[],k=typeof o;if(g=w(a=a||t),"undefined"===k||"function"===k){for(n=!n.length&&o.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if("require"===(u=(m=r(n[f],g)).f))A[f]=s.require(t);else if("exports"===u)A[f]=s.exports(t),b=!0;else if("module"===u)i=A[f]=s.module(t);else if(h(l,u)||h(c,u)||h(d,u))A[f]=_(u);else{if(!m.p)throw new Error(t+" missing "+u);m.p.load(m.n,v(a,!0),y(u),{}),A[f]=l[u]}p=o?o.apply(l[t],A):void 0,t&&(i&&i.exports!==e&&i.exports!==l[t]?l[t]=i.exports:p===e&&b||(l[t]=p))}else t&&(l[t]=o)},n=o=i=function(n,o,a,l,c){if("string"==typeof n)return s[n]?s[n](o):_(r(n,w(o)).f);if(!n.splice){if((u=n).deps&&i(u.deps,u.callback),!o)return;o.splice?(n=o,o=a,a=null):n=e}return o=o||function(){},"function"==typeof a&&(a=l,l=c),l?t(e,n,o,a):setTimeout((function(){t(e,n,o,a)}),4),i},i.config=function(e){return i(e)},n._defined=l,(a=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),h(l,e)||h(c,e)||(c[e]=[e,t,n])}).amd={jQuery:!0}}(),t.requirejs=n,t.require=o,t.define=a),t.define("almond",(function(){})),t.define("jquery",[],(function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t})),t.define("select2/utils",["jquery"],(function(e){var t={};function n(e){var t=e.prototype,n=[];for(var o in t)"function"==typeof t[o]&&"constructor"!==o&&n.push(o);return n}t.Extend=function(e,t){var n={}.hasOwnProperty;function o(){this.constructor=e}for(var a in t)n.call(t,a)&&(e[a]=t[a]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},t.Decorate=function(e,t){var o=n(t),a=n(e);function i(){var n=Array.prototype.unshift,o=t.prototype.constructor.length,a=e.prototype.constructor;o>0&&(n.call(arguments,e.prototype.constructor),a=t.prototype.constructor),a.apply(this,arguments)}t.displayName=e.displayName,i.prototype=new function(){this.constructor=i};for(var r=0;r<a.length;r++){var s=a[r];i.prototype[s]=e.prototype[s]}for(var l=function(e){var n=function(){};e in i.prototype&&(n=i.prototype[e]);var o=t.prototype[e];return function(){return Array.prototype.unshift.call(arguments,n),o.apply(this,arguments)}},c=0;c<o.length;c++){var u=o[c];i.prototype[u]=l(u)}return i};var o=function(){this.listeners={}};o.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},o.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},o.prototype.invoke=function(e,t){for(var n=0,o=e.length;n<o;n++)e[n].apply(this,t)},t.Observable=o,t.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},t.bind=function(e,t){return function(){e.apply(t,arguments)}},t._convertData=function(e){for(var t in e){var n=t.split("-"),o=e;if(1!==n.length){for(var a=0;a<n.length;a++){var i=n[a];(i=i.substring(0,1).toLowerCase()+i.substring(1))in o||(o[i]={}),a==n.length-1&&(o[i]=e[t]),o=o[i]}delete e[t]}}return e},t.hasScroll=function(t,n){var o=e(n),a=n.style.overflowX,i=n.style.overflowY;return(a!==i||"hidden"!==i&&"visible"!==i)&&("scroll"===a||"scroll"===i||o.innerHeight()<n.scrollHeight||o.innerWidth()<n.scrollWidth)},t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))},t.__cache={};var a=0;return t.GetUniqueElementId=function(e){var n=e.getAttribute("data-select2-id");return null!=n||(n=e.id?"select2-data-"+e.id:"select2-data-"+(++a).toString()+"-"+t.generateChars(4),e.setAttribute("data-select2-id",n)),n},t.StoreData=function(e,n,o){var a=t.GetUniqueElementId(e);t.__cache[a]||(t.__cache[a]={}),t.__cache[a][n]=o},t.GetData=function(n,o){var a=t.GetUniqueElementId(n);return o?t.__cache[a]&&null!=t.__cache[a][o]?t.__cache[a][o]:e(n).data(o):t.__cache[a]},t.RemoveData=function(e){var n=t.GetUniqueElementId(e);null!=t.__cache[n]&&delete t.__cache[n],e.removeAttribute("data-select2-id")},t.copyNonInternalCssClasses=function(e,t){var n=e.getAttribute("class").trim().split(/\s+/);n=n.filter((function(e){return 0===e.indexOf("select2-")}));var o=t.getAttribute("class").trim().split(/\s+/);o=o.filter((function(e){return 0!==e.indexOf("select2-")}));var a=n.concat(o);e.setAttribute("class",a.join(" "))},t})),t.define("select2/results",["jquery","./utils"],(function(e,t){function n(e,t,o){this.$element=e,this.data=o,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var o=e('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),a=this.options.get("translations").get(t.message);o.append(n(a(t.args))),o[0].className+=" select2-results__message",this.$results.append(o)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var o=e.results[n],a=this.option(o);t.push(a)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option--selectable"),t=e.filter(".select2-results__option--selected");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(o){var a=o.map((function(e){return e.id.toString()}));n.$results.find(".select2-results__option--selectable").each((function(){var n=e(this),o=t.GetData(this,"data"),i=""+o.id;null!=o.element&&o.element.selected||null==o.element&&a.indexOf(i)>-1?(this.classList.add("select2-results__option--selected"),n.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),n.attr("aria-selected","false"))}))}))},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var o=document.createElement("li");o.classList.add("select2-results__option"),o.classList.add("select2-results__option--selectable");var a={role:"option"},i=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var r in(null!=n.element&&i.call(n.element,":disabled")||null==n.element&&n.disabled)&&(a["aria-disabled"]="true",o.classList.remove("select2-results__option--selectable"),o.classList.add("select2-results__option--disabled")),null==n.id&&o.classList.remove("select2-results__option--selectable"),null!=n._resultId&&(o.id=n._resultId),n.title&&(o.title=n.title),n.children&&(a.role="group",a["aria-label"]=n.text,o.classList.remove("select2-results__option--selectable"),o.classList.add("select2-results__option--group")),a){var s=a[r];o.setAttribute(r,s)}if(n.children){var l=e(o),c=document.createElement("strong");c.className="select2-results__group",this.template(n,c);for(var u=[],d=0;d<n.children.length;d++){var p=n.children[d],m=this.option(p);u.push(m)}var f=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});f.append(u),l.append(c),l.append(f)}else this.template(n,o);return t.StoreData(o,"data",n),o},n.prototype.bind=function(n,o){var a=this,i=n.id+"-results";this.$results.attr("id",i),n.on("results:all",(function(e){a.clear(),a.append(e.data),n.isOpen()&&(a.setClasses(),a.highlightFirstItem())})),n.on("results:append",(function(e){a.append(e.data),n.isOpen()&&a.setClasses()})),n.on("query",(function(e){a.hideMessages(),a.showLoading(e)})),n.on("select",(function(){n.isOpen()&&(a.setClasses(),a.options.get("scrollAfterSelect")&&a.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(a.setClasses(),a.options.get("scrollAfterSelect")&&a.highlightFirstItem())})),n.on("open",(function(){a.$results.attr("aria-expanded","true"),a.$results.attr("aria-hidden","false"),a.setClasses(),a.ensureHighlightVisible()})),n.on("close",(function(){a.$results.attr("aria-expanded","false"),a.$results.attr("aria-hidden","true"),a.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var e=a.getHighlightedResults();0!==e.length&&e.trigger("mouseup")})),n.on("results:select",(function(){var e=a.getHighlightedResults();if(0!==e.length){var n=t.GetData(e[0],"data");e.hasClass("select2-results__option--selected")?a.trigger("close",{}):a.trigger("select",{data:n})}})),n.on("results:previous",(function(){var e=a.getHighlightedResults(),t=a.$results.find(".select2-results__option--selectable"),n=t.index(e);if(!(n<=0)){var o=n-1;0===e.length&&(o=0);var i=t.eq(o);i.trigger("mouseenter");var r=a.$results.offset().top,s=i.offset().top,l=a.$results.scrollTop()+(s-r);0===o?a.$results.scrollTop(0):s-r<0&&a.$results.scrollTop(l)}})),n.on("results:next",(function(){var e=a.getHighlightedResults(),t=a.$results.find(".select2-results__option--selectable"),n=t.index(e)+1;if(!(n>=t.length)){var o=t.eq(n);o.trigger("mouseenter");var i=a.$results.offset().top+a.$results.outerHeight(!1),r=o.offset().top+o.outerHeight(!1),s=a.$results.scrollTop()+r-i;0===n?a.$results.scrollTop(0):r>i&&a.$results.scrollTop(s)}})),n.on("results:focus",(function(e){e.element[0].classList.add("select2-results__option--highlighted"),e.element[0].setAttribute("aria-selected","true")})),n.on("results:message",(function(e){a.displayMessage(e)})),e.fn.mousewheel&&this.$results.on("mousewheel",(function(e){var t=a.$results.scrollTop(),n=a.$results.get(0).scrollHeight-t+e.deltaY,o=e.deltaY>0&&t-e.deltaY<=0,i=e.deltaY<0&&n<=a.$results.height();o?(a.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):i&&(a.$results.scrollTop(a.$results.get(0).scrollHeight-a.$results.height()),e.preventDefault(),e.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(n){var o=e(this),i=t.GetData(this,"data");o.hasClass("select2-results__option--selected")?a.options.get("multiple")?a.trigger("unselect",{originalEvent:n,data:i}):a.trigger("close",{}):a.trigger("select",{originalEvent:n,data:i})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(n){var o=t.GetData(this,"data");a.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),a.trigger("results:focus",{data:o,element:e(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find(".select2-results__option--selectable").index(e),n=this.$results.offset().top,o=e.offset().top,a=this.$results.scrollTop()+(o-n),i=o-n;a-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(i>this.$results.outerHeight()||i<0)&&this.$results.scrollTop(a)}},n.prototype.template=function(t,n){var o=this.options.get("templateResult"),a=this.options.get("escapeMarkup"),i=o(t,n);null==i?n.style.display="none":"string"==typeof i?n.innerHTML=a(i):e(n).append(i)},n})),t.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),t.define("select2/selection/base",["jquery","../utils","../keys"],(function(e,t,n){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return t.Extend(o,t.Observable),o.prototype.render=function(){var n=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=t.GetData(this.$element[0],"old-tabindex")?this._tabindex=t.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n,n},o.prototype.bind=function(e,t){var o=this,a=e.id+"-results";this.container=e,this.$selection.on("focus",(function(e){o.trigger("focus",e)})),this.$selection.on("blur",(function(e){o._handleBlur(e)})),this.$selection.on("keydown",(function(e){o.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()})),e.on("results:focus",(function(e){o.$selection.attr("aria-activedescendant",e.data._resultId)})),e.on("selection:update",(function(e){o.update(e.data)})),e.on("open",(function(){o.$selection.attr("aria-expanded","true"),o.$selection.attr("aria-owns",a),o._attachCloseHandler(e)})),e.on("close",(function(){o.$selection.attr("aria-expanded","false"),o.$selection.removeAttr("aria-activedescendant"),o.$selection.removeAttr("aria-owns"),o.$selection.trigger("focus"),o._detachCloseHandler(e)})),e.on("enable",(function(){o.$selection.attr("tabindex",o._tabindex),o.$selection.attr("aria-disabled","false")})),e.on("disable",(function(){o.$selection.attr("tabindex","-1"),o.$selection.attr("aria-disabled","true")}))},o.prototype._handleBlur=function(t){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)}),1)},o.prototype._attachCloseHandler=function(n){e(document.body).on("mousedown.select2."+n.id,(function(n){var o=e(n.target).closest(".select2");e(".select2.select2-container--open").each((function(){this!=o[0]&&t.GetData(this,"element").select2("close")}))}))},o.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},o.prototype.position=function(e,t){t.find(".selection").append(e)},o.prototype.destroy=function(){this._detachCloseHandler(this.container)},o.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o})),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(e,t,n,o){function a(){a.__super__.constructor.apply(this,arguments)}return n.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e[0].classList.add("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(e,t){var n=this;a.__super__.bind.apply(this,arguments);var o=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",o).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",o),this.$selection.attr("aria-controls",o),this.$selection.on("mousedown",(function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})})),this.$selection.on("focus",(function(e){})),this.$selection.on("blur",(function(e){})),e.on("focus",(function(t){e.isOpen()||n.$selection.trigger("focus")}))},a.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},a.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),o=this.display(t,n);n.empty().append(o);var a=t.title||t.text;a?n.attr("title",a):n.removeAttr("title")}else this.clear()},a})),t.define("select2/selection/multiple",["jquery","./base","../utils"],(function(e,t,n){function o(e,t){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e[0].classList.add("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},o.prototype.bind=function(t,a){var i=this;o.__super__.bind.apply(this,arguments);var r=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",r),this.$selection.on("click",(function(e){i.trigger("toggle",{originalEvent:e})})),this.$selection.on("click",".select2-selection__choice__remove",(function(t){if(!i.isDisabled()){var o=e(this).parent(),a=n.GetData(o[0],"data");i.trigger("unselect",{originalEvent:t,data:a})}})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(e){i.isDisabled()||e.stopPropagation()}))},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},o.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],o=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",a=0;a<e.length;a++){var i=e[a],r=this.selectionContainer(),s=this.display(i,r),l=o+n.generateChars(4)+"-";i.id?l+=i.id:l+=n.generateChars(4),r.find(".select2-selection__choice__display").append(s).attr("id",l);var c=i.title||i.text;c&&r.attr("title",c);var u=this.options.get("translations").get("removeItem"),d=r.find(".select2-selection__choice__remove");d.attr("title",u()),d.attr("aria-label",u()),d.attr("aria-describedby",l),n.StoreData(r[0],"data",i),t.push(r)}this.$selection.find(".select2-selection__rendered").append(t)}},o})),t.define("select2/selection/placeholder",[],(function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();n.html(this.display(t)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");var o=t.title||t.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",o),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var o=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(o)},e})),t.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(e,t,n){function o(){}return o.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(e){o._handleClear(e)})),t.on("keypress",(function(e){o._handleKeyboardClear(e,t)}))},o.prototype._handleClear=function(e,t){if(!this.isDisabled()){var o=this.$selection.find(".select2-selection__clear");if(0!==o.length){t.stopPropagation();var a=n.GetData(o[0],"data"),i=this.$element.val();this.$element.val(this.placeholder.id);var r={data:a};if(this.trigger("clear",r),r.prevented)this.$element.val(i);else{for(var s=0;s<a.length;s++)if(r={data:a[s]},this.trigger("unselect",r),r.prevented)return void this.$element.val(i);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},o.prototype._handleKeyboardClear=function(e,n,o){o.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},o.prototype.update=function(t,o){if(t.call(this,o),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===o.length)){var a=this.$selection.find(".select2-selection__rendered").attr("id"),i=this.options.get("translations").get("removeAllItems"),r=e('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');r.attr("title",i()),r.attr("aria-label",i()),r.attr("aria-describedby",a),n.StoreData(r[0],"data",o),this.$selection.prepend(r),this.$selection[0].classList.add("select2-selection--clearable")}},o})),t.define("select2/selection/search",["jquery","../utils","../keys"],(function(e,t,n){function o(e,t,n){e.call(this,t,n)}return o.prototype.render=function(t){var n=this.options.get("translations").get("search"),o=e('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=o,this.$search=o.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n());var a=t.call(this);return this._transferTabIndex(),a.append(this.$searchContainer),a},o.prototype.bind=function(e,o,a){var i=this,r=o.id+"-results",s=o.id+"-container";e.call(this,o,a),i.$search.attr("aria-describedby",s),o.on("open",(function(){i.$search.attr("aria-controls",r),i.$search.trigger("focus")})),o.on("close",(function(){i.$search.val(""),i.resizeSearch(),i.$search.removeAttr("aria-controls"),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")})),o.on("enable",(function(){i.$search.prop("disabled",!1),i._transferTabIndex()})),o.on("disable",(function(){i.$search.prop("disabled",!0)})),o.on("focus",(function(e){i.$search.trigger("focus")})),o.on("results:focus",(function(e){e.data._resultId?i.$search.attr("aria-activedescendant",e.data._resultId):i.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(e){i.trigger("focus",e)})),this.$selection.on("focusout",".select2-search--inline",(function(e){i._handleBlur(e)})),this.$selection.on("keydown",".select2-search--inline",(function(e){if(e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===i.$search.val()){var o=i.$selection.find(".select2-selection__choice").last();if(o.length>0){var a=t.GetData(o[0],"data");i.searchRemoveChoice(a),e.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(e){i.$search.val()&&e.stopPropagation()}));var l=document.documentMode,c=l&&l<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(e){c?i.$selection.off("input.search input.searchcheck"):i.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(e){if(c&&"input"===e.type)i.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&i.handleSearch(e)}}))},o.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},o.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},o.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.resizeSearch(),n&&this.$search.trigger("focus")},o.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},o.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},o.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="100%";""===this.$search.attr("placeholder")&&(e=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",e)},o})),t.define("select2/selection/selectionCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),o=this.options.get("selectionCssClass")||"";return-1!==o.indexOf(":all:")&&(o=o.replace(":all:",""),e.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(o),n},t})),t.define("select2/selection/eventRelay",["jquery"],(function(e){function t(){}return t.prototype.bind=function(t,n,o){var a=this,i=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],r=["opening","closing","selecting","unselecting","clearing"];t.call(this,n,o),n.on("*",(function(t,n){if(-1!==i.indexOf(t)){n=n||{};var o=e.Event("select2:"+t,{params:n});a.$element.trigger(o),-1!==r.indexOf(t)&&(n.prevented=o.isDefaultPrevented())}}))},t})),t.define("select2/translation",["jquery","require"],(function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var o=t(e);n._cache[e]=o}return new n(n._cache[e])},n})),t.define("select2/diacritics",[],(function(){return{"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Œ:"OE",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",œ:"oe",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ώ:"ω",ς:"σ","’":"'"}})),t.define("select2/data/base",["../utils"],(function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var o=t.id+"-result-";return o+=e.generateChars(4),null!=n.id?o+="-"+n.id.toString():o+="-"+e.generateChars(4),o},t})),t.define("select2/data/select",["./base","../utils","jquery"],(function(e,t,n){function o(e,t){this.$element=e,this.options=t,o.__super__.constructor.call(this)}return t.Extend(o,e),o.prototype.current=function(e){var t=this;e(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(e){return t.item(n(e))})))},o.prototype.select=function(e){var t=this;if(e.selected=!0,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var o=[];(e=[e]).push.apply(e,n);for(var a=0;a<e.length;a++){var i=e[a].id;-1===o.indexOf(i)&&o.push(i)}t.$element.val(o),t.$element.trigger("input").trigger("change")}));else{var n=e.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},o.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,null!=e.element&&"option"===e.element.tagName.toLowerCase())return e.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var o=[],a=0;a<n.length;a++){var i=n[a].id;i!==e.id&&-1===o.indexOf(i)&&o.push(i)}t.$element.val(o),t.$element.trigger("input").trigger("change")}))}},o.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",(function(e){n.select(e.data)})),e.on("unselect",(function(e){n.unselect(e.data)}))},o.prototype.destroy=function(){this.$element.find("*").each((function(){t.RemoveData(this)}))},o.prototype.query=function(e,t){var o=[],a=this;this.$element.children().each((function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var t=n(this),i=a.item(t),r=a.matches(e,i);null!==r&&o.push(r)}})),t({results:o})},o.prototype.addOptions=function(e){this.$element.append(e)},o.prototype.option=function(e){var o;e.children?(o=document.createElement("optgroup")).label=e.text:void 0!==(o=document.createElement("option")).textContent?o.textContent=e.text:o.innerText=e.text,void 0!==e.id&&(o.value=e.id),e.disabled&&(o.disabled=!0),e.selected&&(o.selected=!0),e.title&&(o.title=e.title);var a=this._normalizeItem(e);return a.element=o,t.StoreData(o,"data",a),n(o)},o.prototype.item=function(e){var o={};if(null!=(o=t.GetData(e[0],"data")))return o;var a=e[0];if("option"===a.tagName.toLowerCase())o={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if("optgroup"===a.tagName.toLowerCase()){o={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),r=[],s=0;s<i.length;s++){var l=n(i[s]),c=this.item(l);r.push(c)}o.children=r}return(o=this._normalizeItem(o)).element=e[0],t.StoreData(e[0],"data",o),o},o.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},{selected:!1,disabled:!1},e)},o.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},o})),t.define("select2/data/array",["./select","../utils","jquery"],(function(e,t,n){function o(e,t){this._dataToConvert=t.get("data")||[],o.__super__.constructor.call(this,e,t)}return t.Extend(o,e),o.prototype.bind=function(e,t){o.__super__.bind.call(this,e,t),this.addOptions(this.convertToOptions(this._dataToConvert))},o.prototype.select=function(e){var t=this.$element.find("option").filter((function(t,n){return n.value==e.id.toString()}));0===t.length&&(t=this.option(e),this.addOptions(t)),o.__super__.select.call(this,e)},o.prototype.convertToOptions=function(e){var t=this,o=this.$element.find("option"),a=o.map((function(){return t.item(n(this)).id})).get(),i=[];function r(e){return function(){return n(this).val()==e.id}}for(var s=0;s<e.length;s++){var l=this._normalizeItem(e[s]);if(a.indexOf(l.id)>=0){var c=o.filter(r(l)),u=this.item(c),d=n.extend(!0,{},l,u),p=this.option(d);c.replaceWith(p)}else{var m=this.option(l);if(l.children){var f=this.convertToOptions(l.children);m.append(f)}i.push(m)}}return i},o})),t.define("select2/data/ajax",["./array","../utils","jquery"],(function(e,t,n){function o(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),o.__super__.constructor.call(this,e,t)}return t.Extend(o,e),o.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,o){var a=n.ajax(e);return a.then(t),a.fail(o),a}};return n.extend({},t,e,!0)},o.prototype.processResults=function(e){return e},o.prototype.query=function(e,t){var o=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var a=n.extend({type:"GET"},this.ajaxOptions);function i(){var n=a.transport(a,(function(n){var a=o.processResults(n,e);o.options.get("debug")&&window.console&&console.error&&(a&&a.results&&Array.isArray(a.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(a)}),(function(){(!("status"in n)||0!==n.status&&"0"!==n.status)&&o.trigger("results:message",{message:"errorLoading"})}));o._request=n}"function"==typeof a.url&&(a.url=a.url.call(this.$element,e)),"function"==typeof a.data&&(a.data=a.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},o})),t.define("select2/data/tags",["jquery"],(function(e){function t(e,t,n){var o=n.get("tags"),a=n.get("createTag");void 0!==a&&(this.createTag=a);var i=n.get("insertTag");if(void 0!==i&&(this.insertTag=i),e.call(this,t,n),Array.isArray(o))for(var r=0;r<o.length;r++){var s=o[r],l=this._normalizeItem(s),c=this.option(l);this.$element.append(c)}}return t.prototype.query=function(e,t,n){var o=this;this._removeOldTags(),null!=t.term&&null==t.page?e.call(this,t,(function e(a,i){for(var r=a.results,s=0;s<r.length;s++){var l=r[s],c=null!=l.children&&!e({results:l.children},!0);if((l.text||"").toUpperCase()===(t.term||"").toUpperCase()||c)return!i&&(a.data=r,void n(a))}if(i)return!0;var u=o.createTag(t);if(null!=u){var d=o.option(u);d.attr("data-select2-tag","true"),o.addOptions([d]),o.insertTag(r,u)}a.results=r,n(a)})):e.call(this,t,n)},t.prototype.createTag=function(e,t){if(null==t.term)return null;var n=t.term.trim();return""===n?null:{id:n,text:n}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){this.$element.find("option[data-select2-tag]").each((function(){this.selected||e(this).remove()}))},t})),t.define("select2/data/tokenizer",["jquery"],(function(e){function t(e,t,n){var o=n.get("tokenizer");void 0!==o&&(this.tokenizer=o),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,o){var a=this;n.term=n.term||"";var i=this.tokenizer(n,this.options,(function(t){var n=a._normalizeItem(t);if(!a.$element.find("option").filter((function(){return e(this).val()===n.id})).length){var o=a.option(n);o.attr("data-select2-tag",!0),a._removeOldTags(),a.addOptions([o])}!function(e){a.trigger("select",{data:e})}(n)}));i.term!==n.term&&(this.$search.length&&(this.$search.val(i.term),this.$search.trigger("focus")),n.term=i.term),t.call(this,n,o)},t.prototype.tokenizer=function(t,n,o,a){for(var i=o.get("tokenSeparators")||[],r=n.term,s=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};s<r.length;){var c=r[s];if(-1!==i.indexOf(c)){var u=r.substr(0,s),d=l(e.extend({},n,{term:u}));null!=d?(a(d),r=r.substr(s+1)||"",s=0):s++}else s++}return{term:r}},t})),t.define("select2/data/minimumInputLength",[],(function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),t.define("select2/data/maximumInputLength",[],(function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e})),t.define("select2/data/maximumSelectionLength",[],(function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("select",(function(){o._checkIfMaximumSelected()}))},e.prototype.query=function(e,t,n){var o=this;this._checkIfMaximumSelected((function(){e.call(o,t,n)}))},e.prototype._checkIfMaximumSelected=function(e,t){var n=this;this.current((function(e){var o=null!=e?e.length:0;n.maximumSelectionLength>0&&o>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):t&&t()}))},e})),t.define("select2/dropdown",["jquery","./utils"],(function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),t.define("select2/dropdown/search",["jquery"],(function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),o=this.options.get("translations").get("search"),a=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=a,this.$search=a.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",o()),n.prepend(a),n},t.prototype.bind=function(t,n,o){var a=this,i=n.id+"-results";t.call(this,n,o),this.$search.on("keydown",(function(e){a.trigger("keypress",e),a._keyUpPrevented=e.isDefaultPrevented()})),this.$search.on("input",(function(t){e(this).off("keyup")})),this.$search.on("keyup input",(function(e){a.handleSearch(e)})),n.on("open",(function(){a.$search.attr("tabindex",0),a.$search.attr("aria-controls",i),a.$search.trigger("focus"),window.setTimeout((function(){a.$search.trigger("focus")}),0)})),n.on("close",(function(){a.$search.attr("tabindex",-1),a.$search.removeAttr("aria-controls"),a.$search.removeAttr("aria-activedescendant"),a.$search.val(""),a.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||a.$search.trigger("focus")})),n.on("results:all",(function(e){null!=e.query.term&&""!==e.query.term||(a.showSearch(e)?a.$searchContainer[0].classList.remove("select2-search--hide"):a.$searchContainer[0].classList.add("select2-search--hide"))})),n.on("results:focus",(function(e){e.data._resultId?a.$search.attr("aria-activedescendant",e.data._resultId):a.$search.removeAttr("aria-activedescendant")}))},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t})),t.define("select2/dropdown/hidePlaceholder",[],(function(){function e(e,t,n,o){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,o)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),o=t.length-1;o>=0;o--){var a=t[o];this.placeholder.id===a.id&&n.splice(o,1)}return n},e})),t.define("select2/dropdown/infiniteScroll",["jquery"],(function(e){function t(e,t,n,o){this.lastParams={},e.call(this,t,n,o),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},t.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("query",(function(e){o.lastParams=e,o.loading=!0})),t.on("query:append",(function(e){o.lastParams=e,o.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},t.prototype.loadMoreIfNeeded=function(){var t=e.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&t&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t})),t.define("select2/dropdown/attachBody",["jquery","../utils"],(function(e,t){function n(t,n,o){this.$dropdownParent=e(o.get("dropdownParent")||document.body),t.call(this,n,o)}return n.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("open",(function(){o._showDropdown(),o._attachPositioningHandler(t),o._bindContainerResultHandlers(t)})),t.on("close",(function(){o._hideDropdown(),o._detachPositioningHandler(t)})),this.$dropdownContainer.on("mousedown",(function(e){e.stopPropagation()}))},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t[0].classList.remove("select2"),t[0].classList.add("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),o=t.call(this);return n.append(o),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(e,t){if(!this._containerResultsHandlersBound){var n=this;t.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),t.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,o){var a=this,i="scroll.select2."+o.id,r="resize.select2."+o.id,s="orientationchange.select2."+o.id,l=this.$container.parents().filter(t.hasScroll);l.each((function(){t.StoreData(this,"select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})})),l.on(i,(function(n){var o=t.GetData(this,"select2-scroll-position");e(this).scrollTop(o.y)})),e(window).on(i+" "+r+" "+s,(function(e){a._positionDropdown(),a._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,o){var a="scroll.select2."+o.id,i="resize.select2."+o.id,r="orientationchange.select2."+o.id;this.$container.parents().filter(t.hasScroll).off(a),e(window).off(a+" "+i+" "+r)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown[0].classList.contains("select2-dropdown--above"),o=this.$dropdown[0].classList.contains("select2-dropdown--below"),a=null,i=this.$container.offset();i.bottom=i.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=i.top,r.bottom=i.top+r.height;var s=this.$dropdown.outerHeight(!1),l=t.scrollTop(),c=t.scrollTop()+t.height(),u=l<i.top-s,d=c>i.bottom+s,p={left:i.left,top:r.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var f={top:0,left:0};(e.contains(document.body,m[0])||m[0].isConnected)&&(f=m.offset()),p.top-=f.top,p.left-=f.left,n||o||(a="below"),d||!u||n?!u&&d&&n&&(a="below"):a="above",("above"==a||n&&"below"!==a)&&(p.top=r.top-f.top-s),null!=a&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+a),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+a)),this.$dropdownContainer.css(p)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),t.define("select2/dropdown/minimumResultsForSearch",[],(function(){function e(t){for(var n=0,o=0;o<t.length;o++){var a=t[o];a.children?n+=e(a.children):n++}return n}function t(e,t,n,o){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,o)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t})),t.define("select2/dropdown/selectOnClose",["../utils"],(function(e){function t(){}return t.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("close",(function(e){o._handleSelectOnClose(e)}))},t.prototype._handleSelectOnClose=function(t,n){if(n&&null!=n.originalSelect2Event){var o=n.originalSelect2Event;if("select"===o._type||"unselect"===o._type)return}var a=this.getHighlightedResults();if(!(a.length<1)){var i=e.GetData(a[0],"data");null!=i.element&&i.element.selected||null==i.element&&i.selected||this.trigger("select",{data:i})}},t})),t.define("select2/dropdown/closeOnSelect",[],(function(){function e(){}return e.prototype.bind=function(e,t,n){var o=this;e.call(this,t,n),t.on("select",(function(e){o._selectTriggered(e)})),t.on("unselect",(function(e){o._selectTriggered(e)}))},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e})),t.define("select2/dropdown/dropdownCss",["../utils"],(function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),o=this.options.get("dropdownCssClass")||"";return-1!==o.indexOf(":all:")&&(o=o.replace(":all:",""),e.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(o),n},t})),t.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(e){function t(){}return t.prototype.highlightFirstItem=function(t){var n=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(n.length>0){var o=n.first(),a=e.GetData(o[0],"data").element;if(a&&a.getAttribute&&"true"===a.getAttribute("data-select2-tag"))return void o.trigger("mouseenter")}t.call(this)},t})),t.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),t.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(e,t,n,o,a,i,r,s,l,c,u,d,p,m,f,h,g,v,y,_,b,w,A,k,C,T,U,x,E,D,M){function S(){this.reset()}return S.prototype.apply=function(u){if(null==(u=e.extend(!0,{},this.defaults,u)).dataAdapter&&(null!=u.ajax?u.dataAdapter=f:null!=u.data?u.dataAdapter=m:u.dataAdapter=p,u.minimumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=c.Decorate(u.dataAdapter,_)),u.tags&&(u.dataAdapter=c.Decorate(u.dataAdapter,h)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=c.Decorate(u.dataAdapter,g))),null==u.resultsAdapter&&(u.resultsAdapter=t,null!=u.ajax&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,k)),null!=u.placeholder&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,A)),u.selectOnClose&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,U)),u.tags&&(u.resultsAdapter=c.Decorate(u.resultsAdapter,D))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=b;else{var d=c.Decorate(b,w);u.dropdownAdapter=d}0!==u.minimumResultsForSearch&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,T)),u.closeOnSelect&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,x)),null!=u.dropdownCssClass&&(u.dropdownAdapter=c.Decorate(u.dropdownAdapter,E)),u.dropdownAdapter=c.Decorate(u.dropdownAdapter,C)}null==u.selectionAdapter&&(u.multiple?u.selectionAdapter=o:u.selectionAdapter=n,null!=u.placeholder&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,a)),u.allowClear&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,i)),u.multiple&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,r)),null!=u.selectionCssClass&&(u.selectionAdapter=c.Decorate(u.selectionAdapter,s)),u.selectionAdapter=c.Decorate(u.selectionAdapter,l)),u.language=this._resolveLanguage(u.language),u.language.push("en");for(var M=[],S=0;S<u.language.length;S++){var O=u.language[S];-1===M.indexOf(O)&&M.push(O)}return u.language=M,u.translations=this._processTranslations(u.language,u.debug),u},S.prototype.reset=function(){function t(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return d[e]||e}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function n(o,a){if(null==o.term||""===o.term.trim())return a;if(a.children&&a.children.length>0){for(var i=e.extend(!0,{},a),r=a.children.length-1;r>=0;r--)null==n(o,a.children[r])&&i.children.splice(r,1);return i.children.length>0?i:n(o,i)}var s=t(a.text).toUpperCase(),l=t(o.term).toUpperCase();return s.indexOf(l)>-1?a:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},S.prototype.applyFromElement=function(e,t){var n=e.language,o=this.defaults.language,a=t.prop("lang"),i=t.closest("[lang]").prop("lang"),r=Array.prototype.concat.call(this._resolveLanguage(a),this._resolveLanguage(n),this._resolveLanguage(o),this._resolveLanguage(i));return e.language=r,e},S.prototype._resolveLanguage=function(t){if(!t)return[];if(e.isEmptyObject(t))return[];if(e.isPlainObject(t))return[t];var n;n=Array.isArray(t)?t:[t];for(var o=[],a=0;a<n.length;a++)if(o.push(n[a]),"string"==typeof n[a]&&n[a].indexOf("-")>0){var i=n[a].split("-")[0];o.push(i)}return o},S.prototype._processTranslations=function(t,n){for(var o=new u,a=0;a<t.length;a++){var i=new u,r=t[a];if("string"==typeof r)try{i=u.loadPath(r)}catch(e){try{r=this.defaults.amdLanguageBase+r,i=u.loadPath(r)}catch(e){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else i=e.isPlainObject(r)?new u(r):r;o.extend(i)}return o},S.prototype.set=function(t,n){var o={};o[e.camelCase(t)]=n;var a=c._convertData(o);e.extend(!0,this.defaults,a)},new S})),t.define("select2/options",["jquery","./defaults","./utils"],(function(e,t,n){function o(e,n){this.options=e,null!=n&&this.fromElement(n),null!=n&&(this.options=t.applyFromElement(this.options,n)),this.options=t.apply(this.options)}return o.prototype.fromElement=function(t){var o=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.autocomplete&&t.prop("autocomplete")&&(this.options.autocomplete=t.prop("autocomplete")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl")));var a={};function i(e,t){return t.toUpperCase()}for(var r=0;r<t[0].attributes.length;r++){var s=t[0].attributes[r].name,l="data-";if(s.substr(0,l.length)==l){var c=s.substring(l.length),u=n.GetData(t[0],c);a[c.replace(/-([a-z])/g,i)]=u}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(a=e.extend(!0,{},t[0].dataset,a));var d=e.extend(!0,{},n.GetData(t[0]),a);for(var p in d=n._convertData(d))o.indexOf(p)>-1||(e.isPlainObject(this.options[p])?e.extend(this.options[p],d[p]):this.options[p]=d[p]);return this},o.prototype.get=function(e){return this.options[e]},o.prototype.set=function(e,t){this.options[e]=t},o})),t.define("select2/core",["jquery","./options","./utils","./keys"],(function(e,t,n,o){var a=function(e,o){null!=n.GetData(e[0],"select2")&&n.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),o=o||{},this.options=new t(o,e),a.__super__.constructor.call(this);var i=e.attr("tabindex")||0;n.StoreData(e[0],"old-tabindex",i),e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var s=this.render();this._placeContainer(s);var l=this.options.get("selectionAdapter");this.selection=new l(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var c=this.options.get("dropdownAdapter");this.dropdown=new c(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var u=this.options.get("resultsAdapter");this.results=new u(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(e){d.trigger("selection:update",{data:e})})),e[0].classList.add("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(e[0],"select2",this),e.data("select2",this)};return n.Extend(a,n.Observable),a.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},a.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},a.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var o=this._resolveWidth(e,"style");return null!=o?o:this._resolveWidth(e,"element")}if("element"==t){var a=e.outerWidth(!1);return a<=0?"auto":a+"px"}if("style"==t){var i=e.attr("style");if("string"!=typeof i)return null;for(var r=i.split(";"),s=0,l=r.length;s<l;s+=1){var c=r[s].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==t?window.getComputedStyle(e[0]).width:t},a.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},a.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(t){e._syncA(),e._syncS(t)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},a.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",(function(t,n){e.trigger(t,n)}))},a.prototype._registerSelectionEvents=function(){var e=this,t=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,o){-1===t.indexOf(n)&&e.trigger(n,o)}))},a.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",(function(t,n){e.trigger(t,n)}))},a.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",(function(t,n){e.trigger(t,n)}))},a.prototype._registerEvents=function(){var e=this;this.on("open",(function(){e.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){e.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){e.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){e.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){e.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,(function(n){e.trigger("results:all",{data:n,query:t})}))})),this.on("query:append",(function(t){this.dataAdapter.query(t,(function(n){e.trigger("results:append",{data:n,query:t})}))})),this.on("keypress",(function(t){var n=t.which;e.isOpen()?n===o.ESC||n===o.UP&&t.altKey?(e.close(t),t.preventDefault()):n===o.ENTER||n===o.TAB?(e.trigger("results:select",{}),t.preventDefault()):n===o.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===o.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===o.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===o.ENTER||n===o.SPACE||n===o.DOWN&&t.altKey)&&(e.open(),t.preventDefault())}))},a.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},a.prototype._isChangeMutation=function(e){var t=this;if(e.addedNodes&&e.addedNodes.length>0){for(var n=0;n<e.addedNodes.length;n++)if(e.addedNodes[n].selected)return!0}else{if(e.removedNodes&&e.removedNodes.length>0)return!0;if(Array.isArray(e))return e.some((function(e){return t._isChangeMutation(e)}))}return!1},a.prototype._syncSubtree=function(e){var t=this._isChangeMutation(e),n=this;t&&this.dataAdapter.current((function(e){n.trigger("selection:update",{data:e})}))},a.prototype.trigger=function(e,t){var n=a.__super__.trigger,o={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in o){var i=o[e],r={prevented:!1,name:e,args:t};if(n.call(this,i,r),r.prevented)return void(t.prevented=!0)}n.call(this,e,t)},a.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},a.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},a.prototype.close=function(e){this.isOpen()&&this.trigger("close",{originalEvent:e})},a.prototype.isEnabled=function(){return!this.isDisabled()},a.prototype.isDisabled=function(){return this.options.get("disabled")},a.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},a.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},a.prototype.focus=function(e){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},a.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},a.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current((function(t){e=t})),e},a.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];Array.isArray(t)&&(t=t.map((function(e){return e.toString()}))),this.$element.val(t).trigger("input").trigger("change")},a.prototype.destroy=function(){n.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},a.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),n.StoreData(t[0],"element",this.$element),t},a})),t.define("jquery-mousewheel",["jquery"],(function(e){return e})),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(e,t,n,o,a){if(null==e.fn.select2){var i=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each((function(){var o=e.extend(!0,{},t);new n(e(this),o)})),this;if("string"==typeof t){var o,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var e=a.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),o=e[t].apply(e,r)})),i.indexOf(t)>-1?this:o}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=o),n})),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}.apply(t,o))||(e.exports=a)},975:(e,t,n)=>{var o;!function(){"use strict";var a={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return s(c(e),arguments)}function r(e,t){return i.apply(null,[e].concat(t||[]))}function s(e,t){var n,o,r,s,l,c,u,d,p,m=1,f=e.length,h="";for(o=0;o<f;o++)if("string"==typeof e[o])h+=e[o];else if("object"==typeof e[o]){if((s=e[o]).keys)for(n=t[m],r=0;r<s.keys.length;r++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[r],s.keys[r-1]));n=n[s.keys[r]]}else n=s.param_no?t[s.param_no]:t[m++];if(a.not_type.test(s.type)&&a.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),a.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(a.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}a.json.test(s.type)?h+=n:(!a.number.test(s.type)||d&&!s.sign?p="":(p=d?"+":"-",n=n.toString().replace(a.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(p+n).length,l=s.width&&u>0?c.repeat(u):"",h+=s.align?p+n+l:"0"===c?p+l+n:l+p+n)}return h}var l=Object.create(null);function c(e){if(l[e])return l[e];for(var t,n=e,o=[],i=0;n;){if(null!==(t=a.text.exec(n)))o.push(t[0]);else if(null!==(t=a.modulo.exec(n)))o.push("%");else{if(null===(t=a.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var r=[],s=t[2],c=[];if(null===(c=a.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(r.push(c[1]);""!==(s=s.substring(c[0].length));)if(null!==(c=a.key_access.exec(s)))r.push(c[1]);else{if(null===(c=a.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");r.push(c[1])}t[2]=r}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return l[e]=o}t.sprintf=i,t.vsprintf=r,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=r,void 0===(o=function(){return{sprintf:i,vsprintf:r}}.call(t,n,t,e))||(e.exports=o))}()},311:e=>{"use strict";e.exports=jQuery}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(311),t=__webpack_require__.n(e),n=__webpack_require__(756),o=__webpack_require__(838),a=__webpack_require__(973),i=__webpack_require__(375);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.render()}var o,a;return o=e,(a=[{key:"render",value:function(){var e=t()('\n\t\t\t<div class="uap-report-bug">\n\t\t\t\t<a\n\t\t\t\t\tclass="uap-report-bug__btn"\n\n\t\t\t\t\tuap-tooltip="'.concat(UncannyAutomator.i18n.sendFeedback.title,'"\n\t\t\t\t\tuap-tooltip-flow="left"\n\n\t\t\t\t\ttarget="_blank"\n\t\t\t\t\thref="').concat((0,n.hl)("https://automatorplugin.com/feedback/",this.utmBtnParameters),'"\n\t\t\t\t>\n\t\t\t\t\t<span class="uap-report-bug__icon"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'));t()("body").append(e)}},{key:"utmBtnParameters",get:function(){var e,t;return(0,n.$K)(UncannyAutomator.wp)&&UncannyAutomator.wp?(e="Uncanny Automator Pro ".concat(UncannyAutomator.version),t="uncanny_automator_pro"):(e="Uncanny Automator ".concat(UncannyAutomator.version),t="uncanny_automator"),{version:e,utm_source:t,utm_medium:"send_feedback",utm_content:"bulb_icon"}}}])&&r(o.prototype,a),e}();function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}__webpack_require__(347);const c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements={container:t()("#titlediv"),input:t()("#titlediv #title"),status:{}},this.publishedTitle=this.elements.input.val(),this.createStatus(),this.bindChanges(),this.notSavedAlert()}var o,a;return o=e,(a=[{key:"createStatus",value:function(){var e=t()("<div/>",{class:"uap-title-status"}),n=t()("<div/>",{class:"uap"}),o=t()("<div/>",{class:"uo-status uo-status--saving"}),a=t()("<span/>",{class:"uo-status-icon uap-icon uap-icon--loading uap-icon--rotate"}),i=t()("<span/>",{class:"uo-status__text"}).text(UncannyAutomator.i18n.title.saving);o.append(a),o.append(i),this.elements.status.saving=o;var r=t()("<div/>",{class:"uo-status uo-status--saved"}),s=t()("<span/>",{class:"uo-status-icon uap-icon uap-icon--check"}),l=t()("<span/>",{class:"uo-status__text"}).text(UncannyAutomator.i18n.title.saved);r.append(s),r.append(l),this.elements.status.saved=r,n.append(o),n.append(r),e.append(n),this.elements.container.append(e)}},{key:"setStatusSaving",value:function(){this.elements.status.saving.stop().fadeIn(150)}},{key:"setStatusSaved",value:function(){var e=this;this.elements.status.saving.stop().fadeOut(150),this.elements.status.saved.stop().fadeIn(150,(function(){setTimeout((function(){e.elements.status.saved.fadeOut(150)}),3e3)}))}},{key:"revertChanges",value:function(){this.elements.input.val(this.publishedTitle),this.elements.status.saving.stop().fadeOut(150)}},{key:"bindChanges",value:function(){var e,t=this;this.elements.input.on("input",(function(){clearTimeout(e),e=setTimeout((function(){t.setStatusSaving(),t.updateTitle()}),1500)}))}},{key:"getTitle",value:function(){return this.elements.input.val()}},{key:"updateTitle",value:function(){var e=this;(0,n.L8)("change_post_title",{post_ID:UncannyAutomator.recipe.id,post_title:this.getTitle()},(function(){e.setStatusSaved(),e.publishedTitle=e.getTitle()}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save the title"),e.revertChanges()}))}},{key:"notSavedAlert",value:function(){t()(document).ready((function(){t()(window).off("beforeunload.edit-post")}))}}])&&l(o.prototype,a),e}();function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hasMetabox&&this.listenCheckboxes()}var o,a;return o=e,a=[{key:"$container",get:function(){return t()("#recipe_categorydiv")}},{key:"$allCategoriesList",get:function(){return t()("#recipe_categorychecklist")}},{key:"hasMetabox",get:function(){return(0,n.$K)(this.$allCategoriesList)}},{key:"listenCheckboxes",value:function(){var e=this;this.$container.on("change",'input[type="checkbox"][name="tax_input[recipe_category][]"], .popular-category input[type="checkbox"]',(function(n){var o=t()(n.currentTarget);e.saveCategory(o)})),new MutationObserver((function(n){n.forEach((function(n){n.addedNodes.forEach((function(n){var o=t()(n).find('input[type="checkbox"][name="tax_input[recipe_category][]"]');e.saveCategory(o)}))}))})).observe(this.$allCategoriesList[0],{childList:!0})}},{key:"saveCategory",value:function(e){var t=this,o={id:e.val(),isChecked:e.is(":checked")};this.setStatus("loading",!0,e),(0,n.L8)("set_recipe_terms",{term_id:"recipe_category",recipe_id:UncannyAutomator.recipe.id,category_id:o.id,set_category:o.isChecked},(function(n){n.success?(t.setStatus("success",!0,e),setTimeout((function(){t.setStatus("success",!1,e)}),2e3)):(UncannyAutomator.dev.developerMode&&console.error("Couldn't change the status of the recipe category"),t.revertCheckboxValue(e),t.setStatus("error",!0,e),setTimeout((function(){t.setStatus("error",!1,e)}))),t.setStatus("loading",!1,e)}),(function(){t.revertCheckboxValue(e),t.setStatus("loading",!1,e),t.setStatus("error",!0,e),setTimeout((function(){t.setStatus("error",!1,e)}))}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"revertCheckboxValue",value:function(e){e.prop("checked",!e.is(":checked"))}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,o=n.closest(".selectit");"loading"==e?t?(o.addClass("uap-taxonomy-loading"),n.prop("disabled",!0)):(o.removeClass("uap-taxonomy-loading"),n.prop("disabled",!1)):"success"==e?t?o.addClass("uap-taxonomy-success"):o.removeClass("uap-taxonomy-success"):"error"==e&&(t?o.addClass("uap-taxonomy-error"):o.removeClass("uap-taxonomy-error"))}}],a&&u(o.prototype,a),e}();function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getElements(),1==this.$elements.tagsTextarea.length&&this.listenModificationsToTags()}var o,a;return o=e,a=[{key:"getElements",value:function(){this.$elements={container:t()("#tagsdiv-recipe_tag"),tagsTextarea:t()("textarea#tax-input-recipe_tag"),tagsList:t()("#tagsdiv-recipe_tag .tagchecklist")}}},{key:"listenModificationsToTags",value:function(){var e=this;new MutationObserver((function(t){e.saveTags()})).observe(this.$elements.tagsList[0],{childList:!0})}},{key:"saveTags",value:function(){var e=this,t=this.getTags();this.setStatus("loading",!0),(0,n.L8)("set_recipe_terms",{term_id:"recipe_tag",recipe_id:UncannyAutomator.recipe.id,tags:t},(function(t){t.success?(e.setStatus("success",!0),setTimeout((function(){e.setStatus("success",!1)}),2e3)):(0,n.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:vsprintf(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat((0,n.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")]),content:"",console:"Data sent:\n ".concat(JSON.stringify(t)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}}),e.setStatus("loading",!1)}),(function(e){(0,n.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:vsprintf(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,['<a href="'.concat((0,n.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")]),content:"",console:"Data sent:\n ".concat(JSON.stringify(e)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(e){e.destroy()}}}})}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"loading"==e?t?this.$elements.container.addClass("uap-tags-loading"):this.$elements.container.removeClass("uap-tags-loading"):"success"==e?t?this.$elements.container.addClass("uap-tags-success"):this.$elements.container.removeClass("uap-tags-success"):"error"==e&&(t?this.$elements.container.addClass("uap-tags-error"):this.$elements.container.removeClass("uap-tags-error"))}},{key:"getTags",value:function(){var e=this.$elements.tagsTextarea.val();return{asArray:e.split(","),commaSeparated:e}}}],a&&p(o.prototype,a),e}(),f=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),new d,new m};UncannyAutomator.cache={tokens:{}};try{(0,n.iK)((function(){(0,n.Dh)("Render the UI",!1,{bgColor:"#579f49"}),new a.Z,new i.Z,new o.Z,new s,new c,new f}))}catch(e){(0,n.C2)({title:UncannyAutomator.i18n.debugging.uiCantLoad.title,warning:UncannyAutomator.i18n.debugging.uiCantLoad.warning,content:UncannyAutomator.i18n.debugging.uiCantLoad.content,console:e})}})()})();
//# sourceMappingURL=bundle.min.js.map