/*! For license information please see bundle.min.js.LICENSE.txt */
(()=>{var __webpack_modules__={3198:(t,e,n)=>{"use strict";n.d(e,{gB:()=>c});var i=n(9588),o=n.n(i),r=n(8975),a=n.n(r);const s=o()(console.error);function c(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return a().sprintf(t,...n)}catch(e){return e instanceof Error&&s("sprintf error: \n\n"+e.toString()),t}}var l,u,d,p;l={"(":9,"!":8,"*":7,"/":7,"%":7,"+":6,"-":6,"<":5,"<=":5,">":5,">=":5,"==":4,"!=":4,"&&":3,"||":2,"?":1,"?:":1},u=["(","?"],d={")":["("],":":["?","?:"]},p=/<=|>=|==|!=|&&|\|\||\?:|\(|!|\*|\/|%|\+|-|<|>|\?|\)|:/;var m={"!":function(t){return!t},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"<":function(t,e){return t<e},"<=":function(t,e){return t<=e},">":function(t,e){return t>e},">=":function(t,e){return t>=e},"==":function(t,e){return t===e},"!=":function(t,e){return t!==e},"&&":function(t,e){return t&&e},"||":function(t,e){return t||e},"?:":function(t,e,n){if(t)throw e;return n}};var f={contextDelimiter:"",onMissingKey:null};function h(t,e){var n;for(n in this.data=t,this.pluralForms={},this.options={},f)this.options[n]=void 0!==e&&n in e?e[n]:f[n]}h.prototype.getPluralForm=function(t,e){var n,i,o,r,a=this.pluralForms[t];return a||("function"!=typeof(o=(n=this.data[t][""])["Plural-Forms"]||n["plural-forms"]||n.plural_forms)&&(i=function(t){var e,n,i;for(e=t.split(";"),n=0;n<e.length;n++)if(0===(i=e[n].trim()).indexOf("plural="))return i.substr(7)}(n["Plural-Forms"]||n["plural-forms"]||n.plural_forms),r=function(t){var e=function(t){for(var e,n,i,o,r=[],a=[];e=t.match(p);){for(n=e[0],(i=t.substr(0,e.index).trim())&&r.push(i);o=a.pop();){if(d[n]){if(d[n][0]===o){n=d[n][1]||n;break}}else if(u.indexOf(o)>=0||l[o]<l[n]){a.push(o);break}r.push(o)}d[n]||a.push(n),t=t.substr(e.index+n.length)}return(t=t.trim())&&r.push(t),r.concat(a.reverse())}(t);return function(t){return function(t,e){var n,i,o,r,a,s,c=[];for(n=0;n<t.length;n++){if(a=t[n],r=m[a]){for(i=r.length,o=Array(i);i--;)o[i]=c.pop();try{s=r.apply(null,o)}catch(t){return t}}else s=e.hasOwnProperty(a)?e[a]:+a;c.push(s)}return c[0]}(e,t)}}(i),o=function(t){return+r({n:t})}),a=this.pluralForms[t]=o),a(e)},h.prototype.dcnpgettext=function(t,e,n,i,o){var r,a,s;return r=void 0===o?0:this.getPluralForm(t,o),a=n,e&&(a=e+this.options.contextDelimiter+n),(s=this.data[t][a])&&s[r]?s[r]:(this.options.onMissingKey&&this.options.onMissingKey(n,t),0===r?n:i)};const g={plural_forms:t=>1===t?0:1},v=/^i18n\.(n?gettext|has_translation)(_|$)/,y=function(t){return"string"!=typeof t||""===t?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(t)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},b=function(t){return"string"!=typeof t||""===t?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(t)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(t)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},_=function(t,e){return function(n,i,o){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const a=t[e];if(!b(n))return;if(!y(i))return;if("function"!=typeof o)return void console.error("The hook callback must be a function.");if("number"!=typeof r)return void console.error("If specified, the hook priority must be a number.");const s={callback:o,priority:r,namespace:i};if(a[n]){const t=a[n].handlers;let e;for(e=t.length;e>0&&!(r>=t[e-1].priority);e--);e===t.length?t[e]=s:t.splice(e,0,s),a.__current.forEach((t=>{t.name===n&&t.currentIndex>=e&&t.currentIndex++}))}else a[n]={handlers:[s],runs:0};"hookAdded"!==n&&t.doAction("hookAdded",n,i,o,r)}},w=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(i,o){const r=t[e];if(!b(i))return;if(!n&&!y(o))return;if(!r[i])return 0;let a=0;if(n)a=r[i].handlers.length,r[i]={runs:r[i].runs,handlers:[]};else{const t=r[i].handlers;for(let e=t.length-1;e>=0;e--)t[e].namespace===o&&(t.splice(e,1),a++,r.__current.forEach((t=>{t.name===i&&t.currentIndex>=e&&t.currentIndex--})))}return"hookRemoved"!==i&&t.doAction("hookRemoved",i,o),a}},A=function(t,e){return function(n,i){const o=t[e];return void 0!==i?n in o&&o[n].handlers.some((t=>t.namespace===i)):n in o}},k=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(i){const o=t[e];o[i]||(o[i]={handlers:[],runs:0}),o[i].runs++;const r=o[i].handlers;for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];if(!r||!r.length)return n?s[0]:void 0;const l={name:i,currentIndex:0};for(o.__current.push(l);l.currentIndex<r.length;){const t=r[l.currentIndex].callback.apply(null,s);n&&(s[0]=t),l.currentIndex++}return o.__current.pop(),n?s[0]:void 0}},C=function(t,e){return function(){var n,i;const o=t[e];return null!==(n=null===(i=o.__current[o.__current.length-1])||void 0===i?void 0:i.name)&&void 0!==n?n:null}},T=function(t,e){return function(n){const i=t[e];return void 0===n?void 0!==i.__current[0]:!!i.__current[0]&&n===i.__current[0].name}},U=function(t,e){return function(n){const i=t[e];if(b(n))return i[n]&&i[n].runs?i[n].runs:0}};class E{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=_(this,"actions"),this.addFilter=_(this,"filters"),this.removeAction=w(this,"actions"),this.removeFilter=w(this,"filters"),this.hasAction=A(this,"actions"),this.hasFilter=A(this,"filters"),this.removeAllActions=w(this,"actions",!0),this.removeAllFilters=w(this,"filters",!0),this.doAction=k(this,"actions"),this.applyFilters=k(this,"filters",!0),this.currentAction=C(this,"actions"),this.currentFilter=C(this,"filters"),this.doingAction=T(this,"actions"),this.doingFilter=T(this,"filters"),this.didAction=U(this,"actions"),this.didFilter=U(this,"filters")}}const x=new E,{addAction:D,addFilter:M,removeAction:S,removeFilter:O,hasAction:I,hasFilter:$,removeAllActions:P,removeAllFilters:L,doAction:j,applyFilters:F,currentAction:R,currentFilter:V,doingAction:N,doingFilter:q,didAction:H,didFilter:B,actions:W,filters:z}=x,Z=((t,e,n)=>{const i=new h({}),o=new Set,r=()=>{o.forEach((t=>t()))},a=function(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";i.data[n]={...i.data[n],...t},i.data[n][""]={...g,...null===(e=i.data[n])||void 0===e?void 0:e[""]},delete i.pluralForms[n]},s=(t,e)=>{a(t,e),r()},c=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return i.data[t]||a(void 0,t),i.dcnpgettext(t,e,n,o,r)},l=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return t},u=(t,e,i)=>{let o=c(i,e,t);return n?(o=n.applyFilters("i18n.gettext_with_context",o,t,e,i),n.applyFilters("i18n.gettext_with_context_"+l(i),o,t,e,i)):o};if(n){const t=t=>{v.test(t)&&r()};n.addAction("hookAdded","core/i18n",t),n.addAction("hookRemoved","core/i18n",t)}return{getLocaleData:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return i.data[t]},setLocaleData:s,addLocaleData:function(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";i.data[n]={...i.data[n],...t,"":{...g,...null===(e=i.data[n])||void 0===e?void 0:e[""],...null==t?void 0:t[""]}},delete i.pluralForms[n],r()},resetLocaleData:(t,e)=>{i.data={},i.pluralForms={},s(t,e)},subscribe:t=>(o.add(t),()=>o.delete(t)),__:(t,e)=>{let i=c(e,void 0,t);return n?(i=n.applyFilters("i18n.gettext",i,t,e),n.applyFilters("i18n.gettext_"+l(e),i,t,e)):i},_x:u,_n:(t,e,i,o)=>{let r=c(o,void 0,t,e,i);return n?(r=n.applyFilters("i18n.ngettext",r,t,e,i,o),n.applyFilters("i18n.ngettext_"+l(o),r,t,e,i,o)):r},_nx:(t,e,i,o,r)=>{let a=c(r,o,t,e,i);return n?(a=n.applyFilters("i18n.ngettext_with_context",a,t,e,i,o,r),n.applyFilters("i18n.ngettext_with_context_"+l(r),a,t,e,i,o,r)):a},isRTL:()=>"rtl"===u("ltr","text direction"),hasTranslation:(t,e,o)=>{var r,a;const s=e?e+""+t:t;let c=!(null===(r=i.data)||void 0===r||null===(a=r[null!=o?o:"default"])||void 0===a||!a[s]);return n&&(c=n.applyFilters("i18n.has_translation",c,t,e,o),c=n.applyFilters("i18n.has_translation_"+l(o),c,t,e,o)),c}}})(0,0,x);Z.getLocaleData.bind(Z),Z.setLocaleData.bind(Z),Z.resetLocaleData.bind(Z),Z.subscribe.bind(Z),Z.__.bind(Z),Z._x.bind(Z),Z._n.bind(Z),Z._nx.bind(Z),Z.isRTL.bind(Z),Z.hasTranslation.bind(Z)},6235:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(1290);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=_uo.utility.isEmpty,s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o(this,t),this.content=e}var e,n;return e=t,n=[{key:"getHTML",value:function(){var t=(0,i.r)(this.content);return t=this.parseItalicsAndBold(t),this.parseAnchors(t)}},{key:"parseItalicsAndBold",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={doubleUnderscores:/(^|\s|>|\b)__(?=\S)([^]+?)__(?=\b|<|\s|$)/gm,singleUnderscores:/(^|\s|>|\b)_(?=\S)([^]+?)_(?=\b|<|\s|$)/gm,doubleAsterisks:/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,singleAsterisks:/(\*)(?=\S)([^\r]*?\S)\1/g};return(t=(t=(t=t.replace(e.doubleUnderscores,"$1<strong>$2</strong>")).replace(e.singleUnderscores,"$1<em>$2</em>")).replace(e.doubleAsterisks,"<strong>$2</strong>")).replace(e.singleAsterisks,"<em>$2</em>")}},{key:"parseAnchors",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n=function(t,e,n,i,o,r,s){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(t=e,i=i.toLowerCase(),!o){if(i||(i=n.toLowerCase().replace(/ ?\n/g," ")),o="#".concat(i),!(t.search(/\(\s*\)$/m)>-1))return t;o=""}o=encodeURI(o,"*_",!1),a(c)?c="":(c=c.replace(/"/g,"&quot;"),c=encodeURI(c,"*_",!1),c=' title="'.concat(c,'"'));var l='\n\t\t\t\t<a href="'.concat(o,'" target="_blank" ').concat(c,">\n\t\t\t\t\t").concat(n,"\n\t\t\t\t</a>\n\t\t\t");return l};return t.replace(e,n)}}],n&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},772:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var i=n(5311),o=n.n(i);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=_uo.utility.isDefined,c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(this,t),this.elements={container:null,automatorContainer:null,modal:{container:null,box:{container:null,title:null,warning:null,buttons:{container:null,cancel:null,confirm:null}}}},this.elements.container=o()("body"),this.isVisible=!1,this.config=o().extend(!0,{fadeDuration:150,size:"medium",warningFirst:!1,customClass:"",allowContentOverflow:!1},n),this.content=o().extend({},{buttons:{cancel:UncannyAutomator.i18n.cancel}},e),this.create(),this}var e,n;return e=t,n=[{key:"create",value:function(){var t,e,n=o()("<div/>",{class:"uap"}),i=o()("<div/>",{class:"modal"}),r=o()("<div/>",{class:"modal__box"});if(s(this.config.size)&&["small","medium","large","extra-large","xx-large"].includes(this.config.size)&&i.addClass("modal--".concat(this.config.size)),this.config.allowContentOverflow&&i.addClass("modal--allow-content-overflow"),s(this.config.customClass)&&i.addClass("modal--".concat(this.config.customClass)),this.elements.automatorContainer=n,this.elements.modal.container=i,this.elements.modal.box.container=r,s(this.content.title)){var a=o()("<div/>",{class:"modal__title"}).html(this.content.title);r.append(a),this.elements.modal.box.title=a}if(s(this.content.content)){t=o()("<div/>",{class:"modal__content"});try{t.append(this.content.content)}catch(e){t.html(this.content.content)}r.append(t),this.elements.modal.box.content=t}s(this.content.warning)&&(e=o()("<div/>",{class:"modal__warning"}).html(this.content.warning),this.elements.modal.box.warning=e),s(this.config.warningFirst)&&this.config.warningFirst?(s(this.content.warning)&&r.append(e),s(this.content.content)&&r.append(t)):(s(this.content.content)&&r.append(t),s(this.content.warning)&&r.append(e));var c=o()("<div/>",{class:"modal__buttons"}),l=o()("<button/>",{class:"uap-btn uap-btn--secondary"}).html(this.content.buttons.cancel);if(c.append(l),this.elements.modal.box.buttons.container=c,this.elements.modal.box.buttons.cancel=l,s(this.content.buttons.confirm)){var u=o()("<button/>",{class:"uap-btn uap-btn--primary"}).html(this.content.buttons.confirm);c.append(u),this.elements.modal.box.buttons.confirm=u}r.append(c),i.append(r),n.append(i),this.elements.container.append(n),o()("html").addClass("automator-modal-open"),this.bind()}},{key:"setEvents",value:function(t){var e=this;this.events={afterSetEvents:s(t.afterSetEvents)?t.afterSetEvents:function(){},afterShow:s(t.afterShow)?t.afterShow:function(){},afterHide:s(t.afterHide)?t.afterHide:function(){},onConfirm:s(t.onConfirm)?t.onConfirm:function(){},onCancel:s(t.onCancel)?t.onCancel:function(){}},s(t.onCancel)||(this.events.onCancel=function(){e.hide()}),this.events.afterSetEvents()}},{key:"destroy",value:function(){var t=this;this.unbind(),this.isVisible?this.hide((function(){t.elements.automatorContainer.remove()})):t.elements.automatorContainer.remove(),o()("html").removeClass("automator-modal-open")}},{key:"bind",value:function(){var t=this;s(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.on("click",(function(){t.events.onCancel()})),s(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.on("click",(function(){t.events.onConfirm()}))}},{key:"unbind",value:function(){s(this.elements.modal.box.buttons.cancel)&&this.elements.modal.box.buttons.cancel.unbind("click"),s(this.elements.modal.box.buttons.confirm)&&this.elements.modal.box.buttons.confirm.unbind("click")}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this,n=function(){};s(t)?n=t:s(this.events.afterShow)&&(n=this.events.afterShow),t=n,this.isVisible=!0,this.elements.modal.container.fadeIn(e.config.fadeDuration,t)}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=s(t)?t:this.events.afterHide,this.isVisible=!1,this.elements.modal.container.fadeOut(this.config.fadeDuration,t),o()("html").removeClass("automator-modal-open")}},{key:"getElements",value:function(){return this.elements}}],n&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},1290:(t,e,n)=>{"use strict";n.d(e,{bN:()=>nt,XE:()=>Et,A5:()=>dt,Dh:()=>gt,vQ:()=>At,iK:()=>W,r:()=>yt,IL:()=>J,p5:()=>Tt,PT:()=>Ct,q7:()=>it,M0:()=>st,rz:()=>ot,Vx:()=>rt,Y6:()=>ct,eU:()=>K,C2:()=>kt,d3:()=>pt,HD:()=>ft,Wr:()=>Z,Lc:()=>ut,YQ:()=>Ut,qh:()=>lt,Tm:()=>z,R$:()=>at,hF:()=>ht,L8:()=>tt,yv:()=>Y,gy:()=>et,P2:()=>wt,Cn:()=>X});var i=n(5311),o=n.n(i),r=n(3198);function a(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var c=function(){var t,e=!1,n=Object.values(Z("get",{filter:{itemType:"trigger"}}));return n.length>1&&(t=new Set(n.map((function(t){return t.integrationCode}))),function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).length<n.length&&(e=!0),e};const l=function(){if(c()){var t=Z("get",{filter:{itemType:"trigger"}});Object.entries(t).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||a(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0];i[1],UncannyAutomator.recipe.items[o].shouldShowItemId=!0}))}};var u=n(7109);function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=_uo.utility,m=p.isDefined,f=p.isEmpty;const h=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.setAttributes(e),this.createFields()}var e,n;return e=t,n=[{key:"setAttributes",value:function(t){m(t.hasLabel)||(f(t.label)?t.hasLabel=!1:t.hasLabel=!0),m(t.hasDescription)||(f(t.description)?t.hasDescription=!1:t.hasDescription=!0),this.attributes=t}},{key:"createFields",value:function(){this.fields=this.attributes.fields.map((function(t){return new u.Z(t.fieldType,t)}))}},{key:"createFormElement",value:function(){var t=o()('<div class="form-group"></div>');if(this.attributes.hasLabel){var e=o()('<div class="form-group__label">'.concat(this.attributes.label,"</div>"));t.append(e)}var n=o()('<div class="form-group__fields"></div>');if(this.fields.forEach((function(t){var e=t.createFormElement();n.append(e)})),t.append(n),this.attributes.hasLabel){var i=o()('<div class="form-group__description">'.concat(this.attributes.description,"</div>"));t.append(i)}return this.formElement=t,t}},{key:"getValue",value:function(){var t={};return this.fields.forEach((function(e){t[e.getFieldID()]=e.getValue()})),t}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"validate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={isValid:!0,message:""};return this.fields.forEach((function(n){e[n.getFieldID()]=n.validate(t),e.isValid=e.isValid&&e[n.getFieldID()].isValid})),e}}],n&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v=_uo.utility,y=v.isDefined,b=v.isEmpty,_=n(7771);const w=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.setAttributes(e),this.createFields()}var e,n;return e=t,n=[{key:"setAttributes",value:function(t){y(t.hasLabel)||(b(t.label)?t.hasLabel=!1:t.hasLabel=!0),y(t.hasDescription)||(b(t.description)?t.hasDescription=!1:t.hasDescription=!0),y(t.canSortRows)||(t.canSortRows=!0),this.attributes=t}},{key:"createFields",value:function(){var t=this.attributes.fields,e=[];if(Array.isArray(this.attributes.currentValue)&&this.attributes.currentValue.length>0)this.attributes.currentValue.forEach((function(n){var i=JSON.parse(JSON.stringify(t));i=i.map((function(t){return y(n[t.optionCode])?t.currentValue=n[t.optionCode]:t.currentValue="",t})),e.push(i)}));else if(this.attributes.isRequired){var n=JSON.parse(JSON.stringify(t));n.currentValue="",e.push(n)}e=e.map((function(t){return t.map((function(t){return t.label="",t.description="",new u.Z(t.fieldType,t)}))})),this.fieldRows=e}},{key:"createFormElement",value:function(){var t,e=o()('<div class="form-repeater"></div>');if(this.attributes.hasLabel){var n=o()('\n\t\t\t\t<div class="form-repeater__label">\n\t\t\t\t\t'.concat(this.attributes.label,"\n\t\t\t\t\t").concat(this.attributes.isRequired?'<span class="form-repeater__label-required"></span>':"","\n\t\t\t\t</div>\n\t\t\t"));e.append(n)}var i=this.getFieldsTable();if(e.append(i),i.append(o()('<div class="form-element__error"></div>')),this.attributes.hasDescription){var r=o()('<div class="form-repeater__description">'.concat(this.attributes.description,"</div>"));e.append(r)}return this.formElement=e,t=e,this.fieldRows.length>1&&this.makeRowsSortable(),this.listenSave(),t}},{key:"listenSave",value:function(){var t=this;this.formElement.on("saved",(function(e){t.updateAttributesFieldsFromRow()}))}},{key:"updateAttributesFieldsFromRow",value:function(){var t=[];this.fieldRows.forEach((function(e){var n=[];e.forEach((function(t){n.push(t.attributes)})),t.push(n)})),this.attributes.fields=t}},{key:"makeRowsSortable",value:function(){var t=this;this.attributes.canSortRows&&(_(this.formElement.find(".form-repeater-fields__table-rows"),{forcePlaceholderSize:!0,handle:".form-repeater-fields__table-rows-cell--number",placeholder:'<tr><td colspan="'.concat(this.fieldRows[0].length+2,'">&nbsp;</td></tr>'),itemSerializer:function(t,e){return{position:t.index,html:t.html}}}),this.formElement.find(".form-repeater-fields__table-rows").on("sortupdate",(function(e){var n=[];o().each(e.detail.destination.items,(function(t,e){n.push(o()(e).data("order"))}));var i=[];n.forEach((function(e){i.push(t.fieldRows[e])})),t.fieldRows=i,t.reRender()})))}},{key:"getFieldsTable",value:function(){var t=this,e=o()('\n\t\t\t<div class="form-repeater-fields" data-id="'.concat(this.attributes.optionCode,'">\n\t\t\t\t<table class="form-repeater-fields__table">\n\t\t\t\t\t<thead class="form-repeater-fields__table-heading"></thead>\n\t\t\t\t\t<tbody class="form-repeater-fields__table-rows"></tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class="form-repeater-fields__actions"></div>\n\t\t\t</div>\n\t\t')),n=[];this.attributes.fields.forEach((function(t){var e=y(t.label)?t.label:"",i=!!y(t.isRequired)&&t.isRequired,o=y(t.description)?t.description:"";n.push({title:e,description:o,isRequired:i,id:t.optionCode})}));var i=o()("<tr></tr>");i.append(o()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--number">#</th>')),n.forEach((function(t){var e=o()('<th class="form-repeater-fields__table-heading-cell" data-id="'.concat(t.id,'"></th>'));b(t.title)||e.append(o()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-title">\n\t\t\t\t\t\t'.concat(t.title,"\n\t\t\t\t\t\t").concat(t.isRequired?'<span class="form-repeater-fields__table-heading-cell-required"></span>':"","\n\t\t\t\t\t</div>\n\t\t\t\t"))),b(t.description)||e.append(o()('\n\t\t\t\t\t<div class="form-repeater-fields__table-heading-cell-description">\n\t\t\t\t\t\t'.concat(t.description,"\n\t\t\t\t\t</div>\n\t\t\t\t"))),i.append(e)})),i.append(o()('<th class="form-repeater-fields__table-heading-cell form-repeater-fields__table-heading-cell--actions"></th>')),e.find(".form-repeater-fields__table-heading").append(i);var r=e.find(".form-repeater-fields__table-rows"),a=this.fieldRows.length;if(this.fieldRows.forEach((function(e,n){var i=o()('<tr data-order="'.concat(n,'"></tr>'));i.append(o()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--number">'.concat(n+1,"</td>"))),e.forEach((function(t){var e=o()('<td class="form-repeater-fields__table-rows-cell" data-id="'.concat(t.attributes.optionCode,'"></td>')),n=t.getFormElement();t.initLibraries(),e.append(n),i.append(e)}));var s=o()('<td class="form-repeater-fields__table-rows-cell form-repeater-fields__table-rows-cell--actions"></td>');i.append(s);var c=t.getAttributes();if(0!=n||0==n&&(!t.attributes.isRequired||a>1)){var l=y(t.attributes.removeRowButtonLabel)?t.attributes.removeRowButtonLabel:UncannyAutomator.i18n.removeRow,u=o()('<div class="form-repeater-fields__table-rows-cell-remove" uap-tooltip="'.concat(l,'"><span></span></div>'));u.on("click",(function(){t.deleteRow(n)})),c.hideActions||s.append(u)}r.append(i)})),!this.getAttributes().hideActions){var s=o()('\n\t\t\t\t<div class="uap-btn uap-btn--primary uap-btn--small">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.addRow,"\n\t\t\t\t</div>\n\t\t\t"));y(this.attributes.addRowButtonLabel)&&s.text(this.attributes.addRowButtonLabel),s.on("click",(function(){s.addClass("uap-btn--loading"),t.addRow()})),e.find(".form-repeater-fields__actions").append(s)}return e}},{key:"getValue",value:function(){var t=[];return this.fieldRows.forEach((function(e){var n={};e.forEach((function(t){n[t.getFieldID()]=t.getValue()})),t.push(n)})),t}},{key:"addRow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=JSON.parse(JSON.stringify(this.attributes.fields));n.currentValue="",n=n.map((function(e){return e.label="",e.description="",y(t[e.optionCode])&&(e.currentValue=t[e.optionCode]),new u.Z(e.fieldType,e)})),this.fieldRows.push(n),e&&this.reRender(!0)}},{key:"reRender",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyCodeMirror(),this.destroyTokenSelector();var e=this.formElement,n=this.createFormElement(!1);if(e.replaceWith(n),this.initTokenSelector(),this.initCodeMirror(),t){var i=this.fieldRows[this.fieldRows.length-1];if(y(i)){var o=i[0];y(o)&&o.focus()}}}},{key:"deleteRow",value:function(t){y(this.fieldRows[t])&&this.fieldRows.splice(t,1),this.formElement.replaceWith(this.createFormElement())}},{key:"getFormElement",value:function(){return this.formElement}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"validate",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e={isValid:!0,message:""},n=[];return this.fieldRows.forEach((function(i){var o={};i.forEach((function(n){o[n.getFieldID()]=n.validate(t),e.isValid=e.isValid&&o[n.getFieldID()].isValid})),n.push(o)})),e}},{key:"initTokenSelector",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.initTokenSelector()}))}))}},{key:"destroyTokenSelector",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.destroyTokenSelector()}))}))}},{key:"initCodeMirror",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.initCodeMirror()}))}))}},{key:"destroyCodeMirror",value:function(){this.fieldRows.forEach((function(t){t.forEach((function(t){t.destroyCodeMirror()}))}))}}],n&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var A,k,C=n(2310),T=n(2569),U=n(9392),E=n(8036),x=n(6126);function D(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function M(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function S(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,O(t,e,"get"))}function O(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var I=_uo.utility.isEmpty,$=new WeakMap,P=function(){function t(e){var n,i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$dialog=(0,x.V)(),o={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,i=$),i.set(n,o),this.onReady=e,this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){var t=this;(0,U.sY)((0,U.dy)(A||(A=D(['\n\t\t\t\t<uo-dialog\n\t\t\t\t\t/* translators: Verb conjugated in present-tense second-person singular */\n\t\t\t\t\theading="','"\n\t\t\t\t\topen\n\n\t\t\t\t\t','\n\t\t\t\t>\n\t\t\t\t\t<div class="uap-recipe-type">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<uo-alert\n\t\t\t\t\t\ttype="info"\n\t\t\t\t\t\theading="','"\n\t\t\t\t\t\tclass="uap-spacing-top uap-spacing-top--big"\n\t\t\t\t\t></uo-alert>\n\n\t\t    \t\t<uo-button\n\t\t\t\t\t\tslot="primary-action"\n\n\t\t\t\t\t\t@click=',"\n\n\t\t\t\t\t\t?disabled=","\n\t\t\t\t\t>\n\t\t\t\t\t\t","\n\t\t\t\t\t</uo-button>\n\t\t\t\t</uo-dialog>\n\t\t\t"])),UncannyAutomator.i18n.recipeType.title,(0,x.i)(this.$dialog),(0,E.r)(Object.values(T.O),(function(t){return t.id}),(function(e){return(0,U.dy)(k||(k=D(['\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclass="uap-recipe-type-item"\n\t\t\t\t\t\t\t\t\t\tdata-id=','\n\t\t\t\t\t\t\t\t\t\t@click="','"\n\t\t\t\t\t\t\t\t\t\t?selected=',"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<h3>","</h3>\n\t\t\t\t\t\t\t\t\t\t<p>","</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"])),e.id,(function(){t.recipeType=e.id}),e.id===t.recipeType,e.name,e.description)})),UncannyAutomator.i18n.recipeType.cantChangeLaterNotice,(function(e){e.target.loading=!0,t.saveRecipeType()}),I(this.recipeType),UncannyAutomator.i18n.confirm),document.body)}},{key:"saveRecipeType",value:function(){var t=this;tt("change_post_recipe_type",{post_ID:UncannyAutomator.recipe.id,recipe_type:this.recipeType},(function(e){e.success?(UncannyAutomator.recipe.type=t.recipeType,t.$dialog.value.close(),t.onReady()):UncannyAutomatorBackend.debugging.enabled&&console.error("Recipe type selector: Couldn't set the recipe type. Open the Network tab and perform the action again.")}))}},{key:"recipeType",get:function(){return Object.keys(T.O).includes(S(this,$))?S(this,$):""},set:function(t){var e,n;void 0===t&&(t=""),Object.keys(T.O).includes(t)&&(n=t,function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(e=this,O(e,$,"set"),n),this.render())}}])&&M(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),L=n(8027),j=n(772),F=n(7172),R="undefined"==typeof arguments?void 0:arguments;function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var N=_uo.utility,q=N.isDefined,H=N.isEmpty,B=N.addParametersToURL,W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";UncannyAutomator.dev.developerMode&&gt("Start creating the main object"),t=H(t)?function(){}:t;var e=function(){Q(),G(),z("create",{allRecipes:UncannyAutomator.recipes_object}),delete UncannyAutomator.triggers,delete UncannyAutomator.actions,delete UncannyAutomator.actionsConditions,UncannyAutomator.dev.developerMode&&gt("Ended creating the main object"),t()};H(UncannyAutomator.recipe.type)?new P((function(){e()})):e()},z=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1,r=["create","validate"];if(q(e)&&pt(e,r))switch(e){case"create":var a=["allRecipes"];if(pt(a,Object.keys(n))){var s,c=n.allRecipes;o().each(c,(function(t,e){e.ID==UncannyAutomator.recipe.id&&(s=e)})),q(s.extra_options)&&!H(s.extra_options)&&(UncannyAutomator.recipes_object[s.ID].extra_options=s.extra_options),o().each(s.triggers,(function(t,e){return e.itemType="trigger"})),o().each(s.actions,(function(t,e){return e.itemType="action"})),o().each(s.closures,(function(t,e){return e.itemType="closure"}));var d=[].concat.apply([],[s.triggers,s.actions,s.closures]);Z("reset");var p="anonymous"==UncannyAutomator.recipe.type;if(o().each(d,(function(t,e){var n,i,r=e.meta.integration,a=e.meta.code;try{i=UncannyAutomator.recipes_object[s.ID].extra_options[r][a]}catch(t){}var c=rt(r,e.itemType,a);if(q(c)){var l={};H(i)?(q(c.options)&&o().each(c.options,(function(t,e){l[e.option_code]=[e]})),q(c.options_group)&&o().extend(!0,l,c.options_group)):(q(i.options)&&o().each(i.options,(function(t,e){l[e.option_code]=[e]})),q(i.options_group)&&o().extend(!0,l,i.options_group));var d={};o().each(l,(function(t,n){var i=[],r=n.length>1;o().each(n,(function(n,o){var a,s;if(o.itemType=e.itemType,"group"==o.input_type)a=Object.assign((0,C.Z)(o),{groupId:t,isGroup:r,itemId:e.ID,itemType:e.itemType}),s=new h(a);else if("repeater"==o.input_type){try{e.meta[o.option_code]=JSON.parse(e.meta[o.option_code])}catch(t){}a=Object.assign((0,C.Z)(o),{groupId:t,isGroup:r,itemId:e.ID,itemType:e.itemType,currentValue:q(e.meta[o.option_code])?e.meta[o.option_code]:o.default_value}),s=new w(a)}else a=function(n){var i=Object.assign((0,C.Z)(n),{isGroup:r,itemId:e.ID,groupId:t,currentValue:q(e.meta[n.option_code])?e.meta[n.option_code]:n.default_value});return"select"==i.fieldType&&q(e.meta["".concat(i.optionCode,"_custom")])&&(i.customValue=e.meta["".concat(i.optionCode,"_custom")]),i.isAjax&&(i.integrationId=c.integration,H(i.targetField)&&(i.targetField=n.option_code)),i}(o),s=new u.Z(a.fieldType,a,!1);i.push(s)}));var a=[];q(c.buttons)&&o().each(c.buttons,(function(e,n){n.show_in==t&&a.push(n)})),d[t]={fields:i,isValid:!1,buttons:a}})),n={id:e.ID,itemType:e.itemType,itemCode:a,integrationCode:c.integration,isLive:"publish"==e.post_status,options:d,meta:e.meta,isMissing:!1,tokens:q(e.tokens)?e.tokens:[],inlineCss:q(c.inline_css)?c.inline_css:"",customHTML:q(c.custom_html)?c.custom_html:"",filterTokens:q(c.filter_tokens)?c.filter_tokens:"",menuOrder:e.menu_order?parseInt(e.menu_order):9999},q(c.support)&&(n.support=c.support);var m={};o().each(d,(function(t,e){o().each(e.fields,(function(t,e){m[e.getAttributes().optionCode]=e}))})),o().each(m,(function(t,e){var i=e.getAttributes();q(n.meta[i.optionCode])&&!H(n.meta[i.optionCode])||H(i.currentValue)||(n.meta[i.optionCode]=i.currentValue)})),p&&(n.canLogNewUserIn=!q(c.can_log_in_new_user)||c.can_log_in_new_user)}else n={id:e.ID,itemType:e.itemType,itemCode:e.meta.code,integrationCode:e.meta.integration,integrationName:e.meta.integration_name,sentence:e.meta.sentence,isLive:"publish"==e.post_status,tokens:[],options:{},meta:e.meta,isMissing:!0,menuOrder:e.menu_order?parseInt(e.menu_order):9999},p&&(n.canLogNewUserIn=!q(e.meta.can_log_in_new_user)||"true"==e.meta.can_log_in_new_user);Z("add",n)})),l(),(0,F.A)(s),(0,F.lU)(),p){UncannyAutomator.recipe.canLogNewUserIn=!1;var m=Z("get",{filter:{itemType:"trigger"}});Object.keys(m)>0&&(UncannyAutomator.recipe.canLogNewUserIn=!0,o().each(m,(function(t,e){UncannyAutomator.recipe.canLogNewUserIn=UncannyAutomator.recipe.canLogNewUserIn&&e.canLogNewUserIn})))}(!q(n.validate)||q(n.validate)&&n.validate)&&t("validate")}else{var f=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("recipeObject: Some attributes are missing: ".concat(f))}break;case"validate":var g=!0;o().each(UncannyAutomator.recipe.hasLive,(function(t){UncannyAutomator.recipe.hasLive[t]=!1})),o().each(UncannyAutomator.recipe.items,(function(t,e){e.isLive&&(UncannyAutomator.recipe.hasLive[e.itemType]=!0)})),o().each(UncannyAutomator.recipe.items,(function(t,e){var n=!0;o().each(e.options,(function(e,i){var r=!0;o().each(i.fields,(function(t,e){e.validate(!1).isValid||(r=!1)})),UncannyAutomator.recipe.items[t].options[e].isValid=r,r||(n=!1)})),UncannyAutomator.recipe.items[t].isValid=n,e.isLive&&!n&&(g=!1)})),UncannyAutomator.recipe.hasLive.trigger?"anonymous"==UncannyAutomator.recipe.type&&UncannyAutomator.recipe.requiresUserData&&!UncannyAutomator.recipe.userSelector.isValid?(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.userSelector):UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure?UncannyAutomator.recipe.hasLive.trigger||UncannyAutomator.recipe.hasLive.action||UncannyAutomator.recipe.hasLive.closure||(UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.liveItems):(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneAction):(g=!1,UncannyAutomator.recipe.message.error=UncannyAutomator.i18n.validation.recipe.oneTrigger),UncannyAutomator.recipe.isValid=g,g&&(UncannyAutomator.recipe.message.error=""),i=!0}else UncannyAutomator.dev.developerMode&&console.error('recipeObject: The action "'.concat(e,"\" isn't defined"));return i},Z=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1,r=["add","delete","clean","reset","update","get"];if(q(e)&&pt(e,r))switch(e){case"add":n=o().extend({isValid:!1,isLive:!1},n);var a=["id","itemType"];if(pt(a,Object.keys(n)))q(UncannyAutomator.recipe.items[n.id])||(UncannyAutomator.recipe.items[n.id]=n,t("clean",{}),i=!0);else{var s=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("itemsObject: Some attributes are missing: ".concat(s))}break;case"delete":n=o().extend({isValid:!1},n),H(n.id)?UncannyAutomator.dev.developerMode&&console.error("itemsObject: Invalid item ID"):q(UncannyAutomator.recipe.items[n.id])?(delete UncannyAutomator.recipe.items[n.id],i=!0):UncannyAutomator.dev.developerMode&&console.error("itemsObject: We didn't find an item with this the ID ".concat(n.id));break;case"clean":var c={};o().each(UncannyAutomator.recipe.items,(function(t,e){q(e)&&(c[t]=e)})),UncannyAutomator.recipe.items=c,i=!0;break;case"update":H(n.id)?UncannyAutomator.dev.developerMode&&console.error("itemsObject: Invalid item ID"):q(UncannyAutomator.recipe.items[n.id])?(UncannyAutomator.recipe.items[n.id]=o().extend({},UncannyAutomator.recipe.items[n.id],n),i=!0):UncannyAutomator.dev.developerMode&&console.error("itemsObject: We didn't find an item with this the ID ".concat(n.id));break;case"reset":UncannyAutomator.recipe.items={},i=!0;break;case"get":if(H(n.filter))i=UncannyAutomator.recipe.items;else{var l={};o().each(UncannyAutomator.recipe.items,(function(t,e){var i=!0;o().each(n.filter,(function(t,n){e[t]!=n&&(i=!1)})),i&&(l[t]=e)})),i=l}}else UncannyAutomator.dev.developerMode&&console.error('itemsObject: The action "'.concat(e,"\" isn't defined"));return i},G=function(){Object.entries(UncannyAutomator.integrations).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||function(t,e){if(t){if("string"==typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],r=(i[1],{available:Y(UncannyAutomator.triggers.filter((function(t){return t.integration==o})),"select_option_name",(function(t){return ht(t)})),unavailable:[]}),a={available:Y(UncannyAutomator.actions.filter((function(t){return t.integration==o})),"select_option_name",(function(t){return ht(t)})),unavailable:[]};if((!q(UncannyAutomator.wp)||!UncannyAutomator.wp)&&q(UncannyAutomator.proFeatures)&&q(UncannyAutomator.proFeatures[o])){var s=UncannyAutomator.recipe.type;s="user"==s?"logged-in":s,r.unavailable=Y(UncannyAutomator.proFeatures[o].triggers.filter((function(t){return t.type==s})),"name",(function(t){return ht(t)})),a.unavailable=Y(UncannyAutomator.proFeatures[o].actions,"name",(function(t){return ht(t)}))}r.allItemsArePro=r.available.every((function(t){return!!q(t.is_pro)&&t.is_pro})),a.allItemsArePro=a.available.every((function(t){return!!q(t.is_pro)&&t.is_pro})),r.hasAvailableItems=r.available.length>0,a.hasAvailableItems=a.available.length>0,r.hasUnavailableItems=r.unavailable.length>0,a.hasUnavailableItems=a.unavailable.length>0,r.hasTriggers=r.hasAvailableItems||r.unavailable.length>0,a.hasActions=a.hasAvailableItems||a.unavailable.length>0,UncannyAutomator.integrations[o].items={triggers:r,actions:a},(0,F.Gm)({integrationCode:o})}))},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return q(n)||(n=function(t){return t}),Array.isArray(t)&&!H(t)&&(t=t.sort((function(t,i){var o=0;if(q(t[e])&&q(i[e])){var r=n(t[e]),a=n(i[e]);o=(o=(o=r.localeCompare(a))>0?1:o)<0?-1:o}return o}))),t},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"triggers",n=arguments.length>2?arguments[2]:void 0;n=Object.assign({addDeprecatedItems:!1},n);var i={available:{},unavailable:{}};return["triggers","actions"].includes(e="action"==(e="trigger"==e?"triggers":e)?"actions":e)&&(H(t)||q(UncannyAutomator.integrations[t])&&(i=o().extend(!0,{},UncannyAutomator.integrations[t].items[e]),n.addDeprecatedItems||(i=J(i)))),i},J=function(t){return t.available=t.available.filter((function(t){return!t.is_deprecated})),t.hasAvailableItems=t.available.length>0,q(t.hasTriggers)?t.hasTriggers=t.hasAvailableItems||t.unavailable.length>0:q(t.hasActions)&&(t.hasActions=t.hasAvailableItems||t.unavailable.length>0),t.allItemsArePro=t.available.every((function(t){return!!q(t.is_pro)&&t.is_pro})),t},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1,i=["set-step","get-step","set-source","update-fields","reset-fields"];if(q(t)&&pt(t,i)){var r=[];switch(t){case"set-step":if(pt(r=["step"],Object.keys(e)))UncannyAutomator.recipe.userSelector.step=e.step;else{var a=JSON.stringify(mt(e,r));UncannyAutomator.dev.developerMode&&console.error("userSelectorObject: Some attributes are missing: ".concat(a))}break;case"get-step":var s="select-source";q(UncannyAutomator.recipe.userSelector.step)?s=UncannyAutomator.recipe.userSelector.step:H(UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source])||(s="show-sentence",UncannyAutomator.recipe.userSelector.isValid=!0),n=s;break;case"set-source":if(pt(r=["source"],Object.keys(e)))UncannyAutomator.recipe.userSelector.source=e.source;else{var c=JSON.stringify(mt(e,r));UncannyAutomator.dev.developerMode&&console.error("userSelectorObject: Some attributes are missing: ".concat(c))}break;case"update-fields":if(pt(r=["source","data"],Object.keys(e)))["existingUser","newUser"].includes(e.source)?(H(UncannyAutomator.recipe.userSelector.data)&&(UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}),UncannyAutomator.recipe.userSelector.data[e.source]=o().extend({},UncannyAutomator.recipe.userSelector.data[e.source],e.data)):UncannyAutomator.dev.developerMode&&console.error("userSelectorObject: The source parameter is invalid. Valid values are: existingUser, newUser");else{var l=JSON.stringify(mt(e,r));UncannyAutomator.dev.developerMode&&console.error("userSelectorObject: Some attributes are missing: ".concat(l))}break;case"reset-fields":UncannyAutomator.recipe.userSelector.data={existingUser:{},newUser:{}}}}else UncannyAutomator.dev.developerMode&&console.error('userSelectorObject: The action "'.concat(t,"\" isn't defined"));return n},Q=function(){["user","anonymous"].includes(UncannyAutomator.recipe.type)&&(UncannyAutomator.dev.developerMode&&(gt("Filter Automator items",!0,{collapseGroup:!0}),console.log("Current recipe type: ".concat(UncannyAutomator.recipe.type))),UncannyAutomator.triggers=UncannyAutomator.triggers.filter((function(t){return UncannyAutomator.dev.developerMode&&(console.log(t),t.type==UncannyAutomator.recipe.type?vt("success","Keep"):vt("error","Remove")),t.type==UncannyAutomator.recipe.type})),UncannyAutomator.dev.developerMode&&console.groupEnd())},tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=["add","delete","update","change_post_status","recipe_completions_allowed","recipe_max_completions_allowed","change_post_title","change_post_recipe_type","user-selector","set_recipe_terms","schedule_action","remove_schedule","set_recipe_requires_user","actions_order","actions_conditions_update","actions_conditions_fields"],c=et();a=Object.assign({requiresRecipesObject:!0,renderUI:!0,errorMessaging:{accessDenied:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,content:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,"<strong>".concat(t,"</strong>"))},notFound:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.title,content:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.content,'<a href="'.concat(UncannyAutomator.dev.permalinksURL,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.notFound.sitePermalinks,"</a>"),'<a href="'.concat(c,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>"))},timeout:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.timeout.content},serverError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.title,content:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.serverError.content,'<a href="'.concat(c,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>"))},parserError:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.title,content:UncannyAutomator.i18n.debugging.fatalErrorHandler.parserError.content},dataMissing:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.title,content:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.content,'<a href="'.concat(c,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.contactSupport,"</a>"),'<a href="'.concat(UncannyAutomator.dev.automatorTools,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.fatalErrorHandler.dataMissing.automatorTools,"</a>"))},generic:{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.title,content:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,'<a href="'.concat(c,'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>"))}}},a),pt(t,s)?o().ajax({method:"POST",url:"".concat(UncannyAutomator.restURL,"/").concat(t,"/"),data:"".concat(o().param(e),"&").concat(o().param({doing_rest:1})),dataType:"json",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",UncannyAutomator.nonce)}}).done((function(o,r,s){UncannyAutomator.dev.developerMode&&(gt("✅ REST: ".concat(t),!0,{collapseGroup:!0}),console.log("Endpoint: ".concat(t)),console.log("Data:"),console.log(e),console.log("Response:"),console.log(o),console.groupEnd()),o.success?q(o.recipes_object)||!a.requiresRecipesObject?q(n)&&(a.requiresRecipesObject&&a.renderUI&&z("create",{allRecipes:o.recipes_object}),n(o)):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but the new recipes_object is missing."),q(i)&&i(o,"data-missing")):(UncannyAutomator.dev.developerMode&&console.error("The call was successful, but there were errors."),q(i)&&i(o,"data-missing"))})).fail((function(n,o,r){var s=o,c=a.errorMessaging.generic;switch(s){case"parsererror":s="parser-error",c=a.errorMessaging.parserError;break;case"error":403==n.status?(s="access-denied",c=a.errorMessaging.accessDenied):404==n.status?(s="not-found",c=a.errorMessaging.notFound):500==n.status&&(s="server-error",c=a.errorMessaging.serverError);break;case"timeout":s="timeout",c=a.errorMessaging.timeOut}UncannyAutomator.dev.developerMode&&(gt("❌ REST: ".concat(t),!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),console.log(n),console.log(s),console.log(r),console.groupEnd()),q(i)&&i({success:!1},s),kt({title:c.title,warning:c.content,content:"",console:"Data sent:\n"+"".concat(JSON.stringify(e),"\n\n")+"errorCode: \n".concat(s,"\n\n")+"errorThrown:\n".concat(JSON.stringify(r),"\n\n")+"jqXHR: \n".concat(JSON.stringify(n)," \n\n"),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})})):UncannyAutomator.dev.developerMode&&console.error("The ".concat(t," endPoint does not exists. The valid endpoints are ").concat(s.join(", ")))},et=function(){return B(Et(UncannyAutomator.dev.supportPage,{medium:"error-handler",content:"get-support-link"}),{subject:"technical-support",version:UncannyAutomator.version,site_url:UncannyAutomator.siteURL})},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;q(t)?(e=o().extend(!0,e,{action:t,nonce:UncannyAutomator.nonce}),o().ajax({method:"POST",dataType:"json",url:ajaxurl,data:e,success:function(o){UncannyAutomator.dev.developerMode&&(gt("AJAX call ✅",!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),console.log(o),console.groupEnd()),q(o.status)&&"auth-failed"==o.status?(q(i)&&i(o),kt({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,warning:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,"<strong>".concat(t,"</strong>")),content:"",console:"Data sent:\n"+"".concat(JSON.stringify(e),"\n\n")+"errorCode: \naccess-denied\n\n",buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})):q(n)&&n(o,e)},statusCode:{403:function(n){UncannyAutomator.dev.developerMode&&(gt("AJAX call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),gt("403: Access denied",!1,{bgColor:"#ff0000"}),console.groupEnd()),q(i)&&i(n),kt({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.title,warning:(0,r.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.accessDenied.content,"<strong>".concat(t,"</strong>")),content:"",console:"Data sent:\n"+"".concat(JSON.stringify(e),"\n\n")+"errorCode: \naccess-denied\n\n",buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})}},fail:function(t){UncannyAutomator.dev.developerMode&&(gt("AJAX call 🔴",!0,{collapseGroup:!0}),console.log("Data:"),console.log(e),console.log("Response"),console.log("%cUnknown error","color: red"),console.groupEnd()),q(i)&&i(t)}})):UncannyAutomator.dev.developerMode&&console.error("We cannot do this AJAX request. {action} is not defined.")},it=function(t){var e=t.itemID,n=t.field,i={};if(q(e))o().each(UncannyAutomator.recipe.items[e].options,(function(t,e){o().each(e.fields,(function(t,e){var n=e.getFieldID(),o=e.getValue();q(o)||(o=e.getAttributes().currentValue),"select"==e.getAttributes().fieldType&&"automator_custom_value"==o&&(i["".concat(n,"_custom")]=e.getSelectCustomValue()),i[n]=o,H(o)||"select"!=e.getAttributes().fieldType||(i["".concat(n,"_readable")]=e.getReadableValue())}))}));else if(q(n))try{n.$wrapper.get(0).parentNode.querySelectorAll("select, input, textarea").forEach((function(t){q(t.fieldInstance)&&(i[t.fieldInstance.attributes.optionCode]=t.fieldInstance.getValue())}))}catch(t){console.log(t)}return i},ot=function(t,e){var n;if(H(t)||H(e)){var i=document.querySelector('[name="'.concat(e,'"]:not([data-item-id])'));q(i)&&q(i.fieldInstance)&&(n=i.fieldInstance)}else o().each(UncannyAutomator.recipe.items[t].options,(function(t,i){o().each(i.fields,(function(t,i){e==i.getFieldID()&&(n=i)}))}));return n},rt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!H(e)&&!H(n)&&!H(i)){var r={};if("trigger"==n||"action"==n){if(q(UncannyAutomator.integrations[e])){var a=UncannyAutomator.integrations[e];q(a.items)&&(r="trigger"==n?a.items.triggers.available:a.items.actions.available)}}else"closure"==n&&(r=UncannyAutomator.closures);o().each(r,(function(e,n){if(n.code==i)return t=n,!1}))}return t},at=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;tt("set_recipe_requires_user",{recipePostID:UncannyAutomator.recipe.id,requiresUser:t},(function(n){n.success&&q(e)&&(UncannyAutomator.recipe.requiresUserData=t,st("user-selector").addClass("user-selector--show"),e(n))}),(function(t){UncannyAutomator.dev.developerMode&&console.log("Couldn't set the recipe requires user status"),q(n)&&n(t)}),{requiresRecipesObject:!1})},st=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={},r=["metabox","items","item","optionGroup","lastItem","user-selector"];if(q(e)&&pt(e,r)){var a=[];switch(e){case"metabox":if(n=o().extend({},n),pt(a=["type"],Object.keys(n))){n.cssSelectorMetabox="","trigger"==n.type?n.cssSelectorMetabox="#recipe-triggers-ui":"action"==n.type&&(n.cssSelectorMetabox="#recipe-actions-ui");var s=o()(n.cssSelectorMetabox);i=s}else{var c=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("itemsObject: Some attributes are missing: ".concat(c))}break;case"items":if(n=o().extend({},n),pt(a=["type"],Object.keys(n))){var l=t("metabox",{type:n.type}),u=l.find(".item:not(.item--user-selector):not(.uap-item--actions-initial):not(.item--closure)");i=u}else{var d=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("itemsObject: Some attributes are missing: ".concat(d))}break;case"item":if(n=o().extend({},n),pt(a=["id"],Object.keys(n))){n.cssSelector='.uap .item[data-id="'.concat(n.id,'"]');var p=o()(n.cssSelector),m=p.find(".uap-item-inner-content");i.item=p,i.contentContainer=m}else{var f=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("itemsObject: Some attributes are missing: ".concat(f))}break;case"optionGroup":if(n=o().extend({},n),pt(a=["itemID","groupID"],Object.keys(n))){var h=t("item",{id:n.itemID}).item;n.cssSelectorTokenInSentence='.item-title__token[data-token-id="'.concat(n.groupID,'"]'),n.cssSelectorFieldsContainer='.item-options__group[data-optiongroup="'.concat(n.groupID,'"]');var g=h.find(n.cssSelectorTokenInSentence),v=h.find(n.cssSelectorFieldsContainer),y=h.find(".item-options");i.tokenInSentence=g,i.fieldsContainer=v,i.optionsContainer=y}else{var b=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("itemsObject: Some attributes are missing: ".concat(b))}break;case"lastItem":if(n=o().extend({},n),pt(a=["type"],Object.keys(n))){var _=t("metabox",{type:n.type}),w=_.find(".item:not(.item--user-selector):not(.uap-item--actions-initial):not(.item--closure)").last();i=w}else{var A=JSON.stringify(mt(n,a));UncannyAutomator.dev.developerMode&&console.error("itemsObject: Some attributes are missing: ".concat(A))}break;case"user-selector":i=o()(".user-selector")}}else UncannyAutomator.dev.developerMode&&console.error('getDOMElements: The element "'.concat(e,"\" isn't defined"));return i},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={url:"",node:null},n=UncannyAutomator.integrations[t];return q(n)&&(e.node=document.createElement("img"),q(n.icon_svg)?(e.url=n.icon_svg,e.node.setAttribute("src",n.icon_svg),e.node.setAttribute("alt",n.name)):q(n.icon_32)&&q(n.icon_64)&&(e.url={icon16:n.icon_16,icon32:n.icon_32,icon64:n.icon_64},e.node.setAttribute("src",n.icon_32),e.node.setAttribute("srcset","".concat(n.icon_32," 1x, ").concat(n.icon_64," 2x")),e.node.setAttribute("alt",n.name))),e},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=null;if(i={plain:"",brackets:"",html:o()("<div/>"),elements:{normal:[],token:[]},parts:[]},e=e.trim(),!H(e)){var r,a=new RegExp(/\{\{(.*?)\}\}/gm),s=[],c=[],l=e,u=0,d=(e=e.replace(a,(function(e,i){var o,r=i.split(":"),a=r[0],s=r[1],d=q(r[2])?r[2]:s;return i={type:"token",id:s,text:a,optionsID:d,hasFields:q(t.options[d])},q(n[i.id])&&("automator_custom_value"==n[i.id]&&q(n["".concat(i.id,"_custom")])?o=n["".concat(i.id,"_custom")]:q(n["".concat(i.id,"_readable")])&&(o=n["".concat(i.id,"_readable")]),i.originalText=i.text,i.text=q(o)?o:n[i.id]),c.push(i),l=l.replace(e,"{{token:".concat(u,"}}")),u++,"{{v}}"}))).split("{{v}}"),p=0;for(o().each(d,(function(t,e){if(""!=e){var n={type:"normal",text:e};s.push(n),l=l.replace(e,"{{normal:".concat(p,"}}")),p++}}));null!==(r=a.exec(l));){var m=r[1].split(":");"normal"==(m={type:m[0],index:m[1]}).type?i.parts.push(s[m.index]):i.parts.push(c[m.index])}var f=null;o().each(i.parts,(function(e,n){if(i.plain+=n.text," "!=n.text){var r,s=n.text,c=!1,l=null;if("normal"==n.type||"token"==n.type&&!n.hasFields&&!t.isMissing)r={class:"item-title__normal"},i.brackets+=n.text;else{if(r={class:"item-title__token","data-token-id":n.id,"data-options-id":n.optionsID},q(t.options[n.optionsID])&&t.options[n.optionsID].isValid&&(r.class+=" item-title__token--filled"),q(n.originalText)){if(a.test(s)){q(f)||(f=new L.Z(t.itemType,"text",{includeGroupName:!1}));var u=f.renderTextWithTokens(s);q(u)&&(c=!0,l=u)}if(!c){var d=bt(s,30);d.isAbbreviated&&(r["uap-tooltip"]=s,s=d.text)}}i.brackets+="{{".concat(_t(s),"}}")}var p=o()("<span/>",r);c?p.append(l):p.text(_t(s)),i.elements[n.type].push(p),i.html.append(p)}else i.brackets+=n.text})),i.elements.normal=o()(i.elements.normal).map((function(t,e){return e.get()})),i.elements.token=o()(i.elements.token).map((function(t,e){return e.get()})).filter(":not(.item-title__normal)")}return UncannyAutomator.recipe.items[t.id].itemSentence=i,i},ut=function(t){var e=t.url,n=t.title,i=t.w,o=t.h,r=t.onClose,a=q(window.screenLeft)?window.screenLeft:window.screenX,s=q(window.screenTop)?window.screenTop:window.screenY,c=document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;window.innerWidth&&(c=window.innerWidth);var l=document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;window.innerHeight&&(l=window.innerHeight);var u=c/window.screen.availWidth,d=(c-i)/2/u+a,p=(l-o)/2/u+s,m=window.open(e,n,"\n\t\tscrollbars=yes,\n\t\twidth=".concat(i/u,", \n\t\theight=").concat(o/u,", \n\t\ttop=").concat(p,", \n\t\tleft=").concat(d,"\n\t\t"));return window.focus&&m.focus(),q(r)&&function t(){m.closed?r():setTimeout((function(){t()}),500)}(),m},dt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{caseSensitive:!0};return n.caseSensitive?t.toString()==e.toString():t.toString().toLowerCase()==e.toString().toLowerCase()},pt=function(t,e){return Array.isArray(t)?0==mt(t,e).length:-1!==o().inArray(t,e)},mt=function(t,e){return o()(t).not(e).get()},ft=function(t){return"string"==typeof t},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return(t=t.replace(/{{/g,e)).replace(/}}/g,n)},gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(UncannyAutomator.dev.developerMode){q(n.bgColor)||(n.bgColor="#0790e8");var i="background: ".concat(n.bgColor,'; color: #fff; font-weight: 500; padding: 2px 6px; font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; border-radius: 8px;');e?q(n.collapseGroup)&&n.collapseGroup?console.groupCollapsed("%cAutomator",i,t):console.group("%cAutomator",i,t):console.log("%cAutomator",i,t)}},vt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(UncannyAutomator.dev.developerMode){var n=["color: #fff","padding: 2px 7px",'font-family: -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',"font-weight: normal"].join(";");"error"==t&&(n="background: #f13c3c; ".concat(n)),"success"==t&&(n="background: #40b528; ".concat(n)),console.log("%c".concat(e),n)}},yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={"&":"&amp;","<":"&lt;",">":"&gt;"},n=function(t){return e[t]||t};return t.replace(/[&<>]/g,n)},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n={isAbbreviated:!1,text:t};if(t.length>e){var i=Math.floor(e/2),o={start:t.substring(0,i),end:t.slice(-i)};n.text="".concat(o.start," ... ").concat(o.end),n.isAbbreviated=!0}return n},_t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.createElement("textarea");return e.innerHTML=t,e.value},wt=function(t,e){var n=0;return function(){var i=Date.now();if(n+e<i)return n=i,t.apply(void 0,R)}},At=function(t){var e=document.createElement("textarea");e.style.width="0px",e.style.height="0px",e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=o().extend(!0,{title:UncannyAutomator.i18n.debugging.fatalErrorHandler.title,warning:"",content:UncannyAutomator.i18n.debugging.fatalErrorHandler.content,console:null,buttons:{confirm:{label:UncannyAutomator.i18n.debugging.learnMore,onClick:function(){window.open(UncannyAutomator.dev.debuggingURL,"_blank")}},cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}},t);var e,n="";try{o().each(UncannyAutomator.recipes_object,(function(t,n){n.ID==UncannyAutomator.recipe.id&&(e=n)}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{var i="====== ".concat(UncannyAutomator.i18n.debugging.recipeTitle," ====== \n"),r=UncannyAutomator.i18n.debugging.recipeTypeUser;"anonymous"==e.recipe_type&&(r=UncannyAutomator.i18n.debugging.recipeTypeAnonymous),i+="".concat(UncannyAutomator.i18n.debugging.recipeType,": ").concat(r);var a=UncannyAutomator.i18n.debugging.recipeStatusDraft;"publish"==e.post_status&&(a=UncannyAutomator.i18n.debugging.recipeStatusLive),n=i+="\n".concat(UncannyAutomator.i18n.debugging.recipeStatus,": ").concat(a)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{var s="=== ".concat(UncannyAutomator.i18n.debugging.recipeItemsTitle," === \n"),c=function(t){var e="publish"==t.post_status?UncannyAutomator.i18n.debugging.itemStatusLive:UncannyAutomator.i18n.debugging.itemStatusDraft;return"> ".concat(t.meta.integration," - ").concat(t.meta.code," - ").concat(e,"\n  (").concat(t.meta.sentence.replace(/\{\{|\:[a-zA-Z0-9]*\}\}/g,""),")\n  ").concat(JSON.stringify(t).replaceAll("<","&lt;").replaceAll(">","&gt;"),"\n")},l=e.triggers.map(c),u=l.length>0,d=e.actions.map(c),p=d.length>0,m=e.closures.map(c),f=m.length>0;u||p||f?(s+="".concat(UncannyAutomator.i18n.debugging.triggersTitle,"\n\n"),s+=u?l.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noTriggers),s+="\n".concat(UncannyAutomator.i18n.debugging.actionsTitle,"\n\n"),s+=p?d.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noActions),s+="\n".concat(UncannyAutomator.i18n.debugging.closuresTitle,"\n\n"),s+=f?m.join("\n"):"> ".concat(UncannyAutomator.i18n.debugging.noClosures)):s+="".concat(UncannyAutomator.i18n.debugging.noRecipeItemsFound),n=""!==n?"".concat(n,"\n\n").concat(s):n}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{if(q(t.console)){UncannyAutomator.dev.developerMode&&console.error(t.console);var h="====== ".concat(UncannyAutomator.i18n.debugging.jsConsole," ====== \n");try{h+="".concat(t.console.stack.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(e){try{h+="".concat(t.console.replaceAll(UncannyAutomator.siteURL,"{site_url}"))}catch(e){h+=t.console}}n=""!==n?"".concat(n,"\n\n").concat(h):n}}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}try{n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}var g={};q(t.buttons.cancel)&&(g.cancel=t.buttons.cancel.label),q(t.buttons.confirm)&&(g.confirm=t.buttons.confirm.label);var v=new j.Z({title:'<span class="modal__title-icon"><uo-icon id="exclamation-triangle"></uo-icon></span> '.concat(t.title),warning:"".concat(t.warning),content:"\n\t\t\t<div>\n\t\t\t\t".concat(H(t.content)?"":t.content,'\n\t\t\t\t<div class="modal__content-code">\n\t\t\t\t\t<pre id="uap-debugging">').concat(n,"</pre>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"),buttons:g},{size:"extra-large",warningFirst:!0});v.setEvents({onConfirm:function(){t.buttons.confirm.onClick(v)},onCancel:function(){t.buttons.cancel.onClick(v)},afterSetEvents:function(){var t=o()("#uap-debugging");t.on("click",(function(){var e=document.createRange();e.selectNodeContents(t[0]),window.getSelection().removeAllRanges(),window.getSelection().addRange(e)}))}})},Ct=function(t,e,n){var i={};return o().each(t,(function(t,o){o.meta[e]&&o.meta[e]==n&&(i[t]=o)})),i},Tt=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={};return o().each(t,(function(t,o){e in o.meta===n&&(i[t]=o)})),i},Ut=function(t){Object.assign(document.createElement("a"),{target:"_blank",href:t}).click()},Et=function(t,e){var n=e.medium,i=e.campaign,o=e.content,r={};return r.utm_source=q(UncannyAutomator.wp)&&UncannyAutomator.wp?"uncanny_automator_pro":"uncanny_automator",H(n)||(r.utm_medium=n),H(i)||(r.utm_campaign=i),H(o)||(r.utm_content=o),H(UncannyAutomator.marketing.utmR)||(r.utm_r=UncannyAutomator.marketing.utmR),B(t,r)}},2569:(t,e,n)=>{"use strict";n.d(e,{s:()=>o,O:()=>i});const i={user:{id:"user",name:UncannyAutomator.i18n.recipeType.userRecipeName,description:UncannyAutomator.i18n.recipeType.userRecipeDescription},anonymous:{id:"anonymous",name:UncannyAutomator.i18n.recipeType.everyoneRecipeName,description:UncannyAutomator.i18n.recipeType.everyoneRecipeDescription}},o=["select","textarea","text","url","email","int","float","checkbox","radio","group","date","time","repeater"]},7109:(t,e,n)=>{"use strict";n.d(e,{Z:()=>pt});var i=n(5311),o=n.n(i),r=n(3198),a=(n(686),["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"]),s={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return"undefined"!=typeof console&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},c={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};const l=c;var u=function(t,e){return void 0===e&&(e=2),("000"+t).slice(-1*e)},d=function(t){return!0===t?1:0};function p(t,e){var n;return function(){var i=this,o=arguments;clearTimeout(n),n=setTimeout((function(){return t.apply(i,o)}),e)}}var m=function(t){return t instanceof Array?t:[t]};function f(t,e,n){if(!0===n)return t.classList.add(e);t.classList.remove(e)}function h(t,e,n){var i=window.document.createElement(t);return e=e||"",n=n||"",i.className=e,void 0!==n&&(i.textContent=n),i}function g(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function v(t,e){return e(t)?t:t.parentNode?v(t.parentNode,e):void 0}function y(t,e){var n=h("div","numInputWrapper"),i=h("input","numInput "+t),o=h("span","arrowUp"),r=h("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?i.type="number":(i.type="text",i.pattern="\\d*"),void 0!==e)for(var a in e)i.setAttribute(a,e[a]);return n.appendChild(i),n.appendChild(o),n.appendChild(r),n}function b(t){try{return"function"==typeof t.composedPath?t.composedPath()[0]:t.target}catch(e){return t.target}}var _=function(){},w=function(t,e,n){return n.months[e?"shorthand":"longhand"][t]},A={D:_,F:function(t,e,n){t.setMonth(n.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,n){t.setHours(t.getHours()%12+12*d(new RegExp(n.amPM[1],"i").test(e)))},M:function(t,e,n){t.setMonth(n.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(1e3*parseFloat(e))},W:function(t,e,n){var i=parseInt(e),o=new Date(t.getFullYear(),0,2+7*(i-1),0,0,0,0);return o.setDate(o.getDate()-o.getDay()+n.firstDayOfWeek),o},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:_,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:_,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},k={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},C={Z:function(t){return t.toISOString()},D:function(t,e,n){return e.weekdays.shorthand[C.w(t,e,n)]},F:function(t,e,n){return w(C.n(t,e,n)-1,!1,e)},G:function(t,e,n){return u(C.h(t,e,n))},H:function(t){return u(t.getHours())},J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[d(t.getHours()>11)]},M:function(t,e){return w(t.getMonth(),!0,e)},S:function(t){return u(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,n){return n.getWeek(t)},Y:function(t){return u(t.getFullYear(),4)},d:function(t){return u(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return u(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return u(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}},T=function(t){var e=t.config,n=void 0===e?s:e,i=t.l10n,o=void 0===i?c:i,r=t.isMobile,a=void 0!==r&&r;return function(t,e,i){var r=i||o;return void 0===n.formatDate||a?e.split("").map((function(e,i,o){return C[e]&&"\\"!==o[i-1]?C[e](t,r,n):"\\"!==e?e:""})).join(""):n.formatDate(t,e,r)}},U=function(t){var e=t.config,n=void 0===e?s:e,i=t.l10n,o=void 0===i?c:i;return function(t,e,i,r){if(0===t||t){var a,c=r||o,l=t;if(t instanceof Date)a=new Date(t.getTime());else if("string"!=typeof t&&void 0!==t.toFixed)a=new Date(t);else if("string"==typeof t){var u=e||(n||s).dateFormat,d=String(t).trim();if("today"===d)a=new Date,i=!0;else if(n&&n.parseDate)a=n.parseDate(t,u);else if(/Z$/.test(d)||/GMT$/.test(d))a=new Date(t);else{for(var p=void 0,m=[],f=0,h=0,g="";f<u.length;f++){var v=u[f],y="\\"===v,b="\\"===u[f-1]||y;if(k[v]&&!b){g+=k[v];var _=new RegExp(g).exec(t);_&&(p=!0)&&m["Y"!==v?"push":"unshift"]({fn:A[v],val:_[++h]})}else y||(g+=".")}a=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),m.forEach((function(t){var e=t.fn,n=t.val;return a=e(a,n,c)||a})),a=p?a:void 0}}if(a instanceof Date&&!isNaN(a.getTime()))return!0===i&&a.setHours(0,0,0,0),a;n.errorHandler(new Error("Invalid date provided: "+l))}}};function E(t,e,n){return void 0===n&&(n=!0),!1!==n?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var x=function(t,e,n){return 3600*t+60*e+n};function D(t){var e=t.defaultHour,n=t.defaultMinute,i=t.defaultSeconds;if(void 0!==t.minDate){var o=t.minDate.getHours(),r=t.minDate.getMinutes(),a=t.minDate.getSeconds();e<o&&(e=o),e===o&&n<r&&(n=r),e===o&&n===r&&i<a&&(i=t.minDate.getSeconds())}if(void 0!==t.maxDate){var s=t.maxDate.getHours(),c=t.maxDate.getMinutes();(e=Math.min(e,s))===s&&(n=Math.min(c,n)),e===s&&n===c&&(i=t.maxDate.getSeconds())}return{hours:e,minutes:n,seconds:i}}n(1895);var M=function(){return M=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},M.apply(this,arguments)},S=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),o=0;for(e=0;e<n;e++)for(var r=arguments[e],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i};function O(t,e){var n={config:M(M({},s),$.defaultConfig),l10n:l};function i(){var t;return(null===(t=n.calendarContainer)||void 0===t?void 0:t.getRootNode()).activeElement||document.activeElement}function o(t){return t.bind(n)}function r(){var t=n.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){var e=(n.days.offsetWidth+1)*t.showMonths;n.daysContainer.style.width=e+"px",n.calendarContainer.style.width=e+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function c(t){if(0===n.selectedDates.length){var e=void 0===n.config.minDate||E(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),i=D(n.config);e.setHours(i.hours,i.minutes,i.seconds,e.getMilliseconds()),n.selectedDates=[e],n.latestSelectedDateObj=e}void 0!==t&&"blur"!==t.type&&function(t){t.preventDefault();var e="keydown"===t.type,i=b(t),o=i;void 0!==n.amPM&&i===n.amPM&&(n.amPM.textContent=n.l10n.amPM[d(n.amPM.textContent===n.l10n.amPM[0])]);var r=parseFloat(o.getAttribute("min")),a=parseFloat(o.getAttribute("max")),s=parseFloat(o.getAttribute("step")),c=parseInt(o.value,10),l=c+s*(t.delta||(e?38===t.which?1:-1:0));if(void 0!==o.value&&2===o.value.length){var p=o===n.hourElement,m=o===n.minuteElement;l<r?(l=a+l+d(!p)+(d(p)&&d(!n.amPM)),m&&F(void 0,-1,n.hourElement)):l>a&&(l=o===n.hourElement?l-a-d(!n.amPM):r,m&&F(void 0,1,n.hourElement)),n.amPM&&p&&(1===s?l+c===23:Math.abs(l-c)>s)&&(n.amPM.textContent=n.l10n.amPM[d(n.amPM.textContent===n.l10n.amPM[0])]),o.value=u(l)}}(t);var o=n._input.value;_(),At(),n._input.value!==o&&n._debouncedChange()}function _(){if(void 0!==n.hourElement&&void 0!==n.minuteElement){var t,e,i=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,o=(parseInt(n.minuteElement.value,10)||0)%60,r=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;void 0!==n.amPM&&(t=i,e=n.amPM.textContent,i=t%12+12*d(e===n.l10n.amPM[1]));var a=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===E(n.latestSelectedDateObj,n.config.minDate,!0),s=void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===E(n.latestSelectedDateObj,n.config.maxDate,!0);if(void 0!==n.config.maxTime&&void 0!==n.config.minTime&&n.config.minTime>n.config.maxTime){var c=x(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),l=x(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),u=x(i,o,r);if(u>l&&u<c){var p=function(t){var e=Math.floor(t/3600),n=(t-3600*e)/60;return[e,n,t-3600*e-60*n]}(c);i=p[0],o=p[1],r=p[2]}}else{if(s){var m=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;(i=Math.min(i,m.getHours()))===m.getHours()&&(o=Math.min(o,m.getMinutes())),o===m.getMinutes()&&(r=Math.min(r,m.getSeconds()))}if(a){var f=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;(i=Math.max(i,f.getHours()))===f.getHours()&&o<f.getMinutes()&&(o=f.getMinutes()),o===f.getMinutes()&&(r=Math.max(r,f.getSeconds()))}}C(i,o,r)}}function A(t){var e=t||n.latestSelectedDateObj;e&&e instanceof Date&&C(e.getHours(),e.getMinutes(),e.getSeconds())}function C(t,e,i){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(t%24,e,i||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=u(n.config.time_24hr?t:(12+t)%12+12*d(t%12==0)),n.minuteElement.value=u(e),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[d(t>=12)]),void 0!==n.secondElement&&(n.secondElement.value=u(i)))}function O(t){var e=b(t),n=parseInt(e.value)+(t.delta||0);(n/1e3>1||"Enter"===t.key&&!/[^\d]/.test(n.toString()))&&Q(n)}function I(t,e,i,o){return e instanceof Array?e.forEach((function(e){return I(t,e,i,o)})):t instanceof Array?t.forEach((function(t){return I(t,e,i,o)})):(t.addEventListener(e,i,o),void n._handlers.push({remove:function(){return t.removeEventListener(e,i,o)}}))}function P(){vt("onChange")}function L(t,e){var i=void 0!==t?n.parseDate(t):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),o=n.currentYear,r=n.currentMonth;try{void 0!==i&&(n.currentYear=i.getFullYear(),n.currentMonth=i.getMonth())}catch(t){t.message="Invalid date supplied: "+i,n.config.errorHandler(t)}e&&n.currentYear!==o&&(vt("onYearChange"),W()),!e||n.currentYear===o&&n.currentMonth===r||vt("onMonthChange"),n.redraw()}function j(t){var e=b(t);~e.className.indexOf("arrow")&&F(t,e.classList.contains("arrowUp")?1:-1)}function F(t,e,n){var i=t&&b(t),o=n||i&&i.parentNode&&i.parentNode.firstChild,r=yt("increment");r.delta=e,o&&o.dispatchEvent(r)}function R(t,e,i,o){var r=tt(e,!0),a=h("span",t,e.getDate().toString());return a.dateObj=e,a.$i=o,a.setAttribute("aria-label",n.formatDate(e,n.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===E(e,n.now)&&(n.todayDateElem=a,a.classList.add("today"),a.setAttribute("aria-current","date")),r?(a.tabIndex=-1,bt(e)&&(a.classList.add("selected"),n.selectedDateElem=a,"range"===n.config.mode&&(f(a,"startRange",n.selectedDates[0]&&0===E(e,n.selectedDates[0],!0)),f(a,"endRange",n.selectedDates[1]&&0===E(e,n.selectedDates[1],!0)),"nextMonthDay"===t&&a.classList.add("inRange")))):a.classList.add("flatpickr-disabled"),"range"===n.config.mode&&function(t){return!("range"!==n.config.mode||n.selectedDates.length<2)&&E(t,n.selectedDates[0])>=0&&E(t,n.selectedDates[1])<=0}(e)&&!bt(e)&&a.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==t&&i%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(e)+"</span>"),vt("onDayCreate",a),a}function V(t){t.focus(),"range"===n.config.mode&&ot(t)}function N(t){for(var e=t>0?0:n.config.showMonths-1,i=t>0?n.config.showMonths:-1,o=e;o!=i;o+=t)for(var r=n.daysContainer.children[o],a=t>0?0:r.children.length-1,s=t>0?r.children.length:-1,c=a;c!=s;c+=t){var l=r.children[c];if(-1===l.className.indexOf("hidden")&&tt(l.dateObj))return l}}function q(t,e){var o=i(),r=et(o||document.body),a=void 0!==t?t:r?o:void 0!==n.selectedDateElem&&et(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&et(n.todayDateElem)?n.todayDateElem:N(e>0?1:-1);void 0===a?n._input.focus():r?function(t,e){for(var i=-1===t.className.indexOf("Month")?t.dateObj.getMonth():n.currentMonth,o=e>0?n.config.showMonths:-1,r=e>0?1:-1,a=i-n.currentMonth;a!=o;a+=r)for(var s=n.daysContainer.children[a],c=i-n.currentMonth===a?t.$i+e:e<0?s.children.length-1:0,l=s.children.length,u=c;u>=0&&u<l&&u!=(e>0?l:-1);u+=r){var d=s.children[u];if(-1===d.className.indexOf("hidden")&&tt(d.dateObj)&&Math.abs(t.$i-u)>=Math.abs(e))return V(d)}n.changeMonth(r),q(N(r),0)}(a,e):V(a)}function H(t,e){for(var i=(new Date(t,e,1).getDay()-n.l10n.firstDayOfWeek+7)%7,o=n.utils.getDaysInMonth((e-1+12)%12,t),r=n.utils.getDaysInMonth(e,t),a=window.document.createDocumentFragment(),s=n.config.showMonths>1,c=s?"prevMonthDay hidden":"prevMonthDay",l=s?"nextMonthDay hidden":"nextMonthDay",u=o+1-i,d=0;u<=o;u++,d++)a.appendChild(R("flatpickr-day "+c,new Date(t,e-1,u),u,d));for(u=1;u<=r;u++,d++)a.appendChild(R("flatpickr-day",new Date(t,e,u),u,d));for(var p=r+1;p<=42-i&&(1===n.config.showMonths||d%7!=0);p++,d++)a.appendChild(R("flatpickr-day "+l,new Date(t,e+1,p%r),p,d));var m=h("div","dayContainer");return m.appendChild(a),m}function B(){if(void 0!==n.daysContainer){g(n.daysContainer),n.weekNumbers&&g(n.weekNumbers);for(var t=document.createDocumentFragment(),e=0;e<n.config.showMonths;e++){var i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+e),t.appendChild(H(i.getFullYear(),i.getMonth()))}n.daysContainer.appendChild(t),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&ot()}}function W(){if(!(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)){var t=function(t){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&t<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&t>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var e=0;e<12;e++)if(t(e)){var i=h("option","flatpickr-monthDropdown-month");i.value=new Date(n.currentYear,e).getMonth().toString(),i.textContent=w(e,n.config.shorthandCurrentMonth,n.l10n),i.tabIndex=-1,n.currentMonth===e&&(i.selected=!0),n.monthsDropdownContainer.appendChild(i)}}}function z(){var t,e=h("div","flatpickr-month"),i=window.document.createDocumentFragment();n.config.showMonths>1||"static"===n.config.monthSelectorType?t=h("span","cur-month"):(n.monthsDropdownContainer=h("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),I(n.monthsDropdownContainer,"change",(function(t){var e=b(t),i=parseInt(e.value,10);n.changeMonth(i-n.currentMonth),vt("onMonthChange")})),W(),t=n.monthsDropdownContainer);var o=y("cur-year",{tabindex:"-1"}),r=o.getElementsByTagName("input")[0];r.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&r.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(r.setAttribute("max",n.config.maxDate.getFullYear().toString()),r.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var a=h("div","flatpickr-current-month");return a.appendChild(t),a.appendChild(o),i.appendChild(a),e.appendChild(i),{container:e,yearElement:r,monthElement:t}}function Z(){g(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var t=n.config.showMonths;t--;){var e=z();n.yearElements.push(e.yearElement),n.monthElements.push(e.monthElement),n.monthNav.appendChild(e.container)}n.monthNav.appendChild(n.nextMonthNav)}function G(){n.weekdayContainer?g(n.weekdayContainer):n.weekdayContainer=h("div","flatpickr-weekdays");for(var t=n.config.showMonths;t--;){var e=h("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(e)}return Y(),n.weekdayContainer}function Y(){if(n.weekdayContainer){var t=n.l10n.firstDayOfWeek,e=S(n.l10n.weekdays.shorthand);t>0&&t<e.length&&(e=S(e.splice(t,e.length),e.splice(0,t)));for(var i=n.config.showMonths;i--;)n.weekdayContainer.children[i].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+e.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function K(t,e){void 0===e&&(e=!0);var i=e?t:t-n.currentMonth;i<0&&!0===n._hidePrevMonthArrow||i>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=i,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,vt("onYearChange"),W()),B(),vt("onMonthChange"),_t())}function J(t){return n.calendarContainer.contains(t)}function X(t){if(n.isOpen&&!n.config.inline){var e=b(t),i=J(e),o=!(e===n.input||e===n.altInput||n.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(n.input)||~t.path.indexOf(n.altInput))||i||J(t.relatedTarget)),r=!n.config.ignoredFocusElements.some((function(t){return t.contains(e)}));o&&r&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&c(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&n.clear(!1))}}function Q(t){if(!(!t||n.config.minDate&&t<n.config.minDate.getFullYear()||n.config.maxDate&&t>n.config.maxDate.getFullYear())){var e=t,i=n.currentYear!==e;n.currentYear=e||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),i&&(n.redraw(),vt("onYearChange"),W())}}function tt(t,e){var i;void 0===e&&(e=!0);var o=n.parseDate(t,void 0,e);if(n.config.minDate&&o&&E(o,n.config.minDate,void 0!==e?e:!n.minDateHasTime)<0||n.config.maxDate&&o&&E(o,n.config.maxDate,void 0!==e?e:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===o)return!1;for(var r=!!n.config.enable,a=null!==(i=n.config.enable)&&void 0!==i?i:n.config.disable,s=0,c=void 0;s<a.length;s++){if("function"==typeof(c=a[s])&&c(o))return r;if(c instanceof Date&&void 0!==o&&c.getTime()===o.getTime())return r;if("string"==typeof c){var l=n.parseDate(c,void 0,!0);return l&&l.getTime()===o.getTime()?r:!r}if("object"==typeof c&&void 0!==o&&c.from&&c.to&&o.getTime()>=c.from.getTime()&&o.getTime()<=c.to.getTime())return r}return!r}function et(t){return void 0!==n.daysContainer&&-1===t.className.indexOf("hidden")&&-1===t.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(t)}function nt(t){t.target!==n._input||!(n.selectedDates.length>0||n._input.value.length>0)||t.relatedTarget&&J(t.relatedTarget)||n.setDate(n._input.value,!0,t.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function it(e){var o=b(e),r=n.config.wrap?t.contains(o):o===n._input,a=n.config.allowInput,s=n.isOpen&&(!a||!r),l=n.config.inline&&r&&!a;if(13===e.keyCode&&r){if(a)return n.setDate(n._input.value,!0,o===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),o.blur();n.open()}else if(J(o)||s||l){var u=!!n.timeContainer&&n.timeContainer.contains(o);switch(e.keyCode){case 13:u?(e.preventDefault(),c(),dt()):pt(e);break;case 27:e.preventDefault(),dt();break;case 8:case 46:r&&!n.config.allowInput&&(e.preventDefault(),n.clear());break;case 37:case 39:if(u||r)n.hourElement&&n.hourElement.focus();else{e.preventDefault();var d=i();if(void 0!==n.daysContainer&&(!1===a||d&&et(d))){var p=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),K(p),q(N(1),0)):q(void 0,p)}}break;case 38:case 40:e.preventDefault();var m=40===e.keyCode?1:-1;n.daysContainer&&void 0!==o.$i||o===n.input||o===n.altInput?e.ctrlKey?(e.stopPropagation(),Q(n.currentYear-m),q(N(1),0)):u||q(void 0,7*m):o===n.currentYearElement?Q(n.currentYear-m):n.config.enableTime&&(!u&&n.hourElement&&n.hourElement.focus(),c(e),n._debouncedChange());break;case 9:if(u){var f=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((function(t){return t})),h=f.indexOf(o);if(-1!==h){var g=f[h+(e.shiftKey?-1:1)];e.preventDefault(),(g||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(o)&&e.shiftKey&&(e.preventDefault(),n._input.focus())}}if(void 0!==n.amPM&&o===n.amPM)switch(e.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],_(),At();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],_(),At()}(r||J(o))&&vt("onKeyDown",e)}function ot(t,e){if(void 0===e&&(e="flatpickr-day"),1===n.selectedDates.length&&(!t||t.classList.contains(e)&&!t.classList.contains("flatpickr-disabled"))){for(var i=t?t.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),o=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),r=Math.min(i,n.selectedDates[0].getTime()),a=Math.max(i,n.selectedDates[0].getTime()),s=!1,c=0,l=0,u=r;u<a;u+=864e5)tt(new Date(u),!0)||(s=s||u>r&&u<a,u<o&&(!c||u>c)?c=u:u>o&&(!l||u<l)&&(l=u));Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+e)).forEach((function(e){var r,a,u,d=e.dateObj.getTime(),p=c>0&&d<c||l>0&&d>l;if(p)return e.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(t){e.classList.remove(t)}));s&&!p||(["startRange","inRange","endRange","notAllowed"].forEach((function(t){e.classList.remove(t)})),void 0!==t&&(t.classList.add(i<=n.selectedDates[0].getTime()?"startRange":"endRange"),o<i&&d===o?e.classList.add("startRange"):o>i&&d===o&&e.classList.add("endRange"),d>=c&&(0===l||d<=l)&&(a=o,u=i,(r=d)>Math.min(a,u)&&r<Math.max(a,u))&&e.classList.add("inRange")))}))}}function rt(){!n.isOpen||n.config.static||n.config.inline||lt()}function at(t){return function(e){var i=n.config["_"+t+"Date"]=n.parseDate(e,n.config.dateFormat),o=n.config["_"+("min"===t?"max":"min")+"Date"];void 0!==i&&(n["min"===t?"minDateHasTime":"maxDateHasTime"]=i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((function(t){return tt(t)})),n.selectedDates.length||"min"!==t||A(i),At()),n.daysContainer&&(ut(),void 0!==i?n.currentYearElement[t]=i.getFullYear().toString():n.currentYearElement.removeAttribute(t),n.currentYearElement.disabled=!!o&&void 0!==i&&o.getFullYear()===i.getFullYear())}}function st(){return n.config.wrap?t.querySelector("[data-input]"):t}function ct(){"object"!=typeof n.config.locale&&void 0===$.l10ns[n.config.locale]&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=M(M({},$.l10ns.default),"object"==typeof n.config.locale?n.config.locale:"default"!==n.config.locale?$.l10ns[n.config.locale]:void 0),k.D="("+n.l10n.weekdays.shorthand.join("|")+")",k.l="("+n.l10n.weekdays.longhand.join("|")+")",k.M="("+n.l10n.months.shorthand.join("|")+")",k.F="("+n.l10n.months.longhand.join("|")+")",k.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")",void 0===M(M({},e),JSON.parse(JSON.stringify(t.dataset||{}))).time_24hr&&void 0===$.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=T(n),n.parseDate=U({config:n.config,l10n:n.l10n})}function lt(t){if("function"!=typeof n.config.position){if(void 0!==n.calendarContainer){vt("onPreCalendarPosition");var e=t||n._positionElement,i=Array.prototype.reduce.call(n.calendarContainer.children,(function(t,e){return t+e.offsetHeight}),0),o=n.calendarContainer.offsetWidth,r=n.config.position.split(" "),a=r[0],s=r.length>1?r[1]:null,c=e.getBoundingClientRect(),l=window.innerHeight-c.bottom,u="above"===a||"below"!==a&&l<i&&c.top>i,d=window.pageYOffset+c.top+(u?-i-2:e.offsetHeight+2);if(f(n.calendarContainer,"arrowTop",!u),f(n.calendarContainer,"arrowBottom",u),!n.config.inline){var p=window.pageXOffset+c.left,m=!1,h=!1;"center"===s?(p-=(o-c.width)/2,m=!0):"right"===s&&(p-=o-c.width,h=!0),f(n.calendarContainer,"arrowLeft",!m&&!h),f(n.calendarContainer,"arrowCenter",m),f(n.calendarContainer,"arrowRight",h);var g=window.document.body.offsetWidth-(window.pageXOffset+c.right),v=p+o>window.document.body.offsetWidth,y=g+o>window.document.body.offsetWidth;if(f(n.calendarContainer,"rightMost",v),!n.config.static)if(n.calendarContainer.style.top=d+"px",v)if(y){var b=function(){for(var t=null,e=0;e<document.styleSheets.length;e++){var n=document.styleSheets[e];if(n.cssRules){try{n.cssRules}catch(t){continue}t=n;break}}return null!=t?t:(i=document.createElement("style"),document.head.appendChild(i),i.sheet);var i}();if(void 0===b)return;var _=window.document.body.offsetWidth,w=Math.max(0,_/2-o/2),A=b.cssRules.length,k="{left:"+c.left+"px;right:auto;}";f(n.calendarContainer,"rightMost",!1),f(n.calendarContainer,"centerMost",!0),b.insertRule(".flatpickr-calendar.centerMost:before,.flatpickr-calendar.centerMost:after"+k,A),n.calendarContainer.style.left=w+"px",n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=g+"px";else n.calendarContainer.style.left=p+"px",n.calendarContainer.style.right="auto"}}}else n.config.position(n,t)}function ut(){n.config.noCalendar||n.isMobile||(W(),_t(),B())}function dt(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function pt(t){t.preventDefault(),t.stopPropagation();var e=v(b(t),(function(t){return t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")}));if(void 0!==e){var i=e,o=n.latestSelectedDateObj=new Date(i.dateObj.getTime()),r=(o.getMonth()<n.currentMonth||o.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=i,"single"===n.config.mode)n.selectedDates=[o];else if("multiple"===n.config.mode){var a=bt(o);a?n.selectedDates.splice(parseInt(a),1):n.selectedDates.push(o)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=o,n.selectedDates.push(o),0!==E(o,n.selectedDates[0],!0)&&n.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()})));if(_(),r){var s=n.currentYear!==o.getFullYear();n.currentYear=o.getFullYear(),n.currentMonth=o.getMonth(),s&&(vt("onYearChange"),W()),vt("onMonthChange")}if(_t(),B(),At(),r||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():V(i),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){var c="single"===n.config.mode&&!n.config.enableTime,l="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(c||l)&&dt()}P()}}n.parseDate=U({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=I,n._setHoursFromDate=A,n._positionCalendar=lt,n.changeMonth=K,n.changeYear=Q,n.clear=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!0),n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===e&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){var i=D(n.config);C(i.hours,i.minutes,i.seconds)}n.redraw(),t&&vt("onChange")},n.close=function(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),vt("onClose")},n.onMouseOver=ot,n._createElement=h,n.createDay=R,n.destroy=function(){void 0!==n.config&&vt("onDestroy");for(var t=n._handlers.length;t--;)n._handlers[t].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var e=n.calendarContainer.parentNode;if(e.lastChild&&e.removeChild(e.lastChild),e.parentNode){for(;e.firstChild;)e.parentNode.insertBefore(e.firstChild,e);e.parentNode.removeChild(e)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(t){try{delete n[t]}catch(t){}}))},n.isEnabled=tt,n.jumpToDate=L,n.updateValue=At,n.open=function(t,e){if(void 0===e&&(e=n._positionElement),!0===n.isMobile){if(t){t.preventDefault();var i=b(t);i&&i.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void vt("onOpen")}if(!n._input.disabled&&!n.config.inline){var o=n.isOpen;n.isOpen=!0,o||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),vt("onOpen"),lt(e)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==t&&n.timeContainer.contains(t.relatedTarget)||setTimeout((function(){return n.hourElement.select()}),50))}},n.redraw=ut,n.set=function(t,e){if(null!==t&&"object"==typeof t)for(var i in Object.assign(n.config,t),t)void 0!==mt[i]&&mt[i].forEach((function(t){return t()}));else n.config[t]=e,void 0!==mt[t]?mt[t].forEach((function(t){return t()})):a.indexOf(t)>-1&&(n.config[t]=m(e));n.redraw(),At(!0)},n.setDate=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=n.config.dateFormat),0!==t&&!t||t instanceof Array&&0===t.length)return n.clear(e);ft(t,i),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),L(void 0,e),A(),0===n.selectedDates.length&&n.clear(!1),At(e),e&&vt("onChange")},n.toggle=function(t){if(!0===n.isOpen)return n.close();n.open(t)};var mt={locale:[ct,Y],showMonths:[Z,r,G],minDate:[L],maxDate:[L],positionElement:[gt],clickOpens:[function(){!0===n.config.clickOpens?(I(n._input,"focus",n.open),I(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function ft(t,e){var i=[];if(t instanceof Array)i=t.map((function(t){return n.parseDate(t,e)}));else if(t instanceof Date||"number"==typeof t)i=[n.parseDate(t,e)];else if("string"==typeof t)switch(n.config.mode){case"single":case"time":i=[n.parseDate(t,e)];break;case"multiple":i=t.split(n.config.conjunction).map((function(t){return n.parseDate(t,e)}));break;case"range":i=t.split(n.l10n.rangeSeparator).map((function(t){return n.parseDate(t,e)}))}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(t)));n.selectedDates=n.config.allowInvalidPreload?i:i.filter((function(t){return t instanceof Date&&tt(t,!1)})),"range"===n.config.mode&&n.selectedDates.sort((function(t,e){return t.getTime()-e.getTime()}))}function ht(t){return t.slice().map((function(t){return"string"==typeof t||"number"==typeof t||t instanceof Date?n.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:n.parseDate(t.from,void 0),to:n.parseDate(t.to,void 0)}:t})).filter((function(t){return t}))}function gt(){n._positionElement=n.config.positionElement||n._input}function vt(t,e){if(void 0!==n.config){var i=n.config[t];if(void 0!==i&&i.length>0)for(var o=0;i[o]&&o<i.length;o++)i[o](n.selectedDates,n.input.value,n,e);"onChange"===t&&(n.input.dispatchEvent(yt("change")),n.input.dispatchEvent(yt("input")))}}function yt(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function bt(t){for(var e=0;e<n.selectedDates.length;e++){var i=n.selectedDates[e];if(i instanceof Date&&0===E(i,t))return""+e}return!1}function _t(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((function(t,e){var i=new Date(n.currentYear,n.currentMonth,1);i.setMonth(n.currentMonth+e),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[e].textContent=w(i.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=i.getMonth().toString(),t.value=i.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function wt(t){return n.selectedDates.map((function(e){return n.formatDate(e,t)})).filter((function(t,e,i){return"range"!==n.config.mode||n.config.enableTime||i.indexOf(t)===e})).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function At(t){void 0===t&&(t=!0),void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=wt(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=wt(n.config.altFormat)),!1!==t&&vt("onValueUpdate")}function kt(t){var e=b(t),i=n.prevMonthNav.contains(e),o=n.nextMonthNav.contains(e);i||o?K(i?-1:1):n.yearElements.indexOf(e)>=0?e.select():e.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):e.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}return function(){n.element=n.input=t,n.isOpen=!1,function(){var i=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],r=M(M({},JSON.parse(JSON.stringify(t.dataset||{}))),e),c={};n.config.parseDate=r.parseDate,n.config.formatDate=r.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(t){n.config._enable=ht(t)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(t){n.config._disable=ht(t)}});var l="time"===r.mode;if(!r.dateFormat&&(r.enableTime||l)){var u=$.defaultConfig.dateFormat||s.dateFormat;c.dateFormat=r.noCalendar||l?"H:i"+(r.enableSeconds?":S":""):u+" H:i"+(r.enableSeconds?":S":"")}if(r.altInput&&(r.enableTime||l)&&!r.altFormat){var d=$.defaultConfig.altFormat||s.altFormat;c.altFormat=r.noCalendar||l?"h:i"+(r.enableSeconds?":S K":" K"):d+" h:i"+(r.enableSeconds?":S":"")+" K"}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:at("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:at("max")});var p=function(t){return function(e){n.config["min"===t?"_minTime":"_maxTime"]=n.parseDate(e,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:p("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:p("max")}),"time"===r.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,c,r);for(var f=0;f<i.length;f++)n.config[i[f]]=!0===n.config[i[f]]||"true"===n.config[i[f]];for(a.filter((function(t){return void 0!==n.config[t]})).forEach((function(t){n.config[t]=m(n.config[t]||[]).map(o)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),f=0;f<n.config.plugins.length;f++){var h=n.config.plugins[f](n)||{};for(var g in h)a.indexOf(g)>-1?n.config[g]=m(h[g]).map(o).concat(n.config[g]):void 0===r[g]&&(n.config[g]=h[g])}r.altInputClass||(n.config.altInputClass=st().className+" "+n.config.altInputClass),vt("onParseConfig")}(),ct(),n.input=st(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=h(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),gt()):n.config.errorHandler(new Error("Invalid input element specified")),function(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var t=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);t&&ft(t,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}(),n.utils={getDaysInMonth:function(t,e){return void 0===t&&(t=n.currentMonth),void 0===e&&(e=n.currentYear),1===t&&(e%4==0&&e%100!=0||e%400==0)?29:n.l10n.daysInMonth[t]}},n.isMobile||function(){var t=window.document.createDocumentFragment();if(n.calendarContainer=h("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(t.appendChild((n.monthNav=h("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=h("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=h("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,Z(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(t){n.__hidePrevMonthArrow!==t&&(f(n.prevMonthNav,"flatpickr-disabled",t),n.__hidePrevMonthArrow=t)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(t){n.__hideNextMonthArrow!==t&&(f(n.nextMonthNav,"flatpickr-disabled",t),n.__hideNextMonthArrow=t)}}),n.currentYearElement=n.yearElements[0],_t(),n.monthNav)),n.innerContainer=h("div","flatpickr-innerContainer"),n.config.weekNumbers){var e=function(){n.calendarContainer.classList.add("hasWeeks");var t=h("div","flatpickr-weekwrapper");t.appendChild(h("span","flatpickr-weekday",n.l10n.weekAbbreviation));var e=h("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}(),i=e.weekWrapper,o=e.weekNumbers;n.innerContainer.appendChild(i),n.weekNumbers=o,n.weekWrapper=i}n.rContainer=h("div","flatpickr-rContainer"),n.rContainer.appendChild(G()),n.daysContainer||(n.daysContainer=h("div","flatpickr-days"),n.daysContainer.tabIndex=-1),B(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),t.appendChild(n.innerContainer)}n.config.enableTime&&t.appendChild(function(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var t=D(n.config);n.timeContainer=h("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var e=h("span","flatpickr-time-separator",":"),i=y("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=i.getElementsByTagName("input")[0];var o=y("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=o.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=u(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?t.hours:function(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}(t.hours)),n.minuteElement.value=u(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():t.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(i),n.timeContainer.appendChild(e),n.timeContainer.appendChild(o),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var r=y("flatpickr-second");n.secondElement=r.getElementsByTagName("input")[0],n.secondElement.value=u(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():t.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(h("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(r)}return n.config.time_24hr||(n.amPM=h("span","flatpickr-am-pm",n.l10n.amPM[d((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}()),f(n.calendarContainer,"rangeMode","range"===n.config.mode),f(n.calendarContainer,"animate",!0===n.config.animate),f(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(t);var r=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!r&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var a=h("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(a,n.element),a.appendChild(n.element),n.altInput&&a.appendChild(n.altInput),a.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}(),function(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((function(t){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+t+"]"),(function(e){return I(e,"click",n[t])}))})),n.isMobile)!function(){var t=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=h("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=t,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(t){}I(n.mobileInput,"change",(function(t){n.setDate(b(t).value,!1,n.mobileFormatStr),vt("onChange"),vt("onClose")}))}();else{var t=p(rt,50);if(n._debouncedChange=p(P,300),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&I(n.daysContainer,"mouseover",(function(t){"range"===n.config.mode&&ot(b(t))})),I(n._input,"keydown",it),void 0!==n.calendarContainer&&I(n.calendarContainer,"keydown",it),n.config.inline||n.config.static||I(window,"resize",t),void 0!==window.ontouchstart?I(window.document,"touchstart",X):I(window.document,"mousedown",X),I(window.document,"focus",X,{capture:!0}),!0===n.config.clickOpens&&(I(n._input,"focus",n.open),I(n._input,"click",n.open)),void 0!==n.daysContainer&&(I(n.monthNav,"click",kt),I(n.monthNav,["keyup","increment"],O),I(n.daysContainer,"click",pt)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){I(n.timeContainer,["increment"],c),I(n.timeContainer,"blur",c,{capture:!0}),I(n.timeContainer,"click",j),I([n.hourElement,n.minuteElement],["focus","click"],(function(t){return b(t).select()})),void 0!==n.secondElement&&I(n.secondElement,"focus",(function(){return n.secondElement&&n.secondElement.select()})),void 0!==n.amPM&&I(n.amPM,"click",(function(t){c(t)}))}n.config.allowInput&&I(n._input,"blur",nt)}}(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&A(n.config.noCalendar?n.latestSelectedDateObj:void 0),At(!1)),r();var i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&i&&lt(),vt("onReady")}(),n}function I(t,e){for(var n=Array.prototype.slice.call(t).filter((function(t){return t instanceof HTMLElement})),i=[],o=0;o<n.length;o++){var r=n[o];try{if(null!==r.getAttribute("data-fp-omit"))continue;void 0!==r._flatpickr&&(r._flatpickr.destroy(),r._flatpickr=void 0),r._flatpickr=O(r,e||{}),i.push(r._flatpickr)}catch(t){console.error(t)}}return 1===i.length?i[0]:i}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return I(this,t)},HTMLElement.prototype.flatpickr=function(t){return I([this],t)});var $=function(t,e){return"string"==typeof t?I(window.document.querySelectorAll(t),e):t instanceof Node?I([t],e):I(t,e)};$.defaultConfig={},$.l10ns={en:M({},l),default:M({},l)},$.localize=function(t){$.l10ns.default=M(M({},$.l10ns.default),t)},$.setDefaults=function(t){$.defaultConfig=M(M({},$.defaultConfig),t)},$.parseDate=U({}),$.formatDate=T({}),$.compareDates=E,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return I(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=$);const P=$;var L=n(1290),j=n(2569),F=n(1454),R=n(8027),V=n(772);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}function H(t,e){return H=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},H(t,e)}function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Z(t);if(e){var o=Z(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return W(this,n)}}function W(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return z(t)}function z(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t){return Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Z(t)}function G(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Y(t,e,n){return e&&G(t.prototype,e),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var J=_uo.utility,X=J.isDefined,Q=J.isEmpty,tt=J.debounce,et=(J.addParametersToURL,Y((function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(K(this,t),e.attributes.supportsTokens)return"textarea"==e.type?new it(e,n):new nt(e,n)}))),nt=function(t){q(n,t);var e=B(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K(this,n),(i=e.call(this,t.attributes.itemType,t.type,o)).Field=t,i.Field.TokenSelector=z(i),i.render(),i.setData(),i.Field.getField().on("ua-codemirror-ready",(function(){i.getCodeMirrorEditor(),i.editor.setValue(i.editor.getValue()),i.renderTokens(),i.handleAddTokens(),i.renderTokensInRealTime()})),i}return Y(n,[{key:"render",value:function(){this.RenderTokenSelector=new ot(this.Field,this.tokens)}},{key:"setData",value:function(){this.data={tokenRenderingDebounce:200}}},{key:"getCodeMirrorEditor",value:function(){this.editor=this.Field.fieldCM}},{key:"handleAddTokens",value:function(){var t=this;this.Field.field.off("ua-add-token").on("ua-add-token",(function(e,n){["date","time"].includes(t.Field.attributes.fieldType)&&t.editor.setValue(""),t.insertTextAtCursor("{{".concat(n.id,"}}")),t.renderTokens({ignoreRequiresUserModal:!0}),["date","time"].includes(t.Field.attributes.fieldType)||t.editor.focus(),["date","time"].includes(t.Field.attributes.fieldType)&&t.Field.setValue("{{".concat(n.id,"}}"))}))}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}},{key:"insertTextAtCursor",value:function(t){this.editor.doc.replaceRange(t,this.editor.doc.getCursor())}},{key:"renderTokensInRealTime",value:function(){var t=this;this.editor.on("changes",tt((function(e){t.renderTokens()}),this.data.tokenRenderingDebounce))}},{key:"renderTokens",value:function(t){var e=this;t=Object.assign({ignoreRequiresUserModal:!1},t);for(var n=this.editor.getSearchCursor(/\{\{(.*?)\}\}/),i=function(){var i={from:n.from(),to:n.to()},o=e.editor.getRange(i.from,i.to).replace("{{","").replace("}}",""),r=e.createTokenDOMNode(o),a=e.editor.markText(i.from,i.to,{replacedWith:r});if("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&(e.tokensThatRequireUser.includes(o)||o.startsWith("USERMETA:"))&&!t.ignoreRequiresUserModal)return e.tokenNeedsUserModal(r,{removeToken:function(){var t=a.find();a.clear(),e.editor.replaceRange("",t.from,t.to)}}),"break";e.Field.attributes.isReadOnly||r.addEventListener("click",(function(){if(!r.classList.contains("uap-token--cm-focused")){r.classList.add("uap-token--cm-focused");var t=function(){r.classList.remove("uap-token--cm-focused"),document.removeEventListener("mouseup",n),document.removeEventListener("copy",i),document.removeEventListener("keydown",s),document.removeEventListener("keydown",c)},n=function(e){r===e.target||r.contains(e.target)||t()};document.addEventListener("mouseup",n);var i=function(e){t(),(0,L.vQ)("{{".concat(o,"}}"))};document.addEventListener("copy",i);var s=function(n){var i=n.keyCode||n.charCode;if(8==i||46==i){var o=a.find();a.clear(),e.editor.replaceRange("",o.from,o.to),t()}};document.addEventListener("keydown",s);var c=function(n){var i=n.keyCode||n.charCode;if(37==i||39==i){t();var o,r=a.find();37==i&&(o=r.from),39==i&&(o=r.to),e.editor.focus(),e.editor.setCursor(o)}};document.addEventListener("keydown",c)}}))};n.findNext()&&"break"!==i(););}},{key:"tokenNeedsUserModal",value:function(t){var e,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(X(UncannyAutomator.wp)&&UncannyAutomator.wp){var o=UncannyAutomator.recipe.isLive;(e=new V.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat((0,r.gB)(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.mustRunOnUser,t.outerHTML),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.content.description,"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var t=e.getElements();t.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,L.R$)(!0,(function(t){e.destroy(),n.renderTokens()}),(function(e){t.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),o&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1),X(i.allowedConfirm)&&i.allowedConfirm()},onCancel:function(){e.destroy(),X(i.removeToken)&&i.removeToken(),X(i.allowedCancel)&&i.allowedCancel()}})}else(e=new V.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat((0,r.gB)(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.mustRunOnUser,t.outerHTML),'</div>\n\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat((0,r.gB)(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.description,UncannyAutomator.i18n.uncannyAutomatorPro),' <a href="').concat((0,L.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.content.upgradeLater,' <a href="').concat((0,L.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.cancelButton,confirm:UncannyAutomator.i18n.userSelector.userDataModal.token.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){e.destroy(),(0,L.YQ)((0,L.XE)("https://automatorplugin.com/pricing/",{medium:"add_token",campaign:"update_to_pro",content:"requires_user_data"})),X(i.removeToken)&&i.removeToken(),X(i.forbiddenConfirm)&&i.forbiddenConfirm()},onCancel:function(){e.destroy(),X(i.removeToken)&&i.removeToken(),X(i.forbiddenCancel)&&i.forbiddenCancel()}})}}]),n}(R.Z),it=function(t){q(n,t);var e=B(n);function n(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K(this,n),(i=e.call(this,t,o)).Field.attributes.supportsTinyMCE&&i.Field.getField().on("ua-tinymce-ready",(function(){i.getTinyMCEEditor(),i.addStylesToEditor(),setTimeout((function(){i.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),i.data.tokenRenderingDebounce),setTimeout((function(){i.parseHTMLTokensInPlainTextarea()}),i.data.tokenRenderingDebounce),i.handleAddTokens(),i.handleHTMLTokensInPlainTextarea(),i.handlePlainTokensInTinyMCE()})),i}return Y(n,[{key:"setData",value:function(){this.data={tokenRenderingDebounce:200,tokenCSSClass:"uap-token-tinymce",tinymceTokenRegex:new RegExp(/\<ins contenteditable\="false"\>\<\!\-\-UAToken\-\-\>(?:.*?)data\-token\-id\="(.*?)"(?:.*?)\<\!\-\-UATokenEnd\-\-\>\<\/ins\>/gm)},this.data.tinymceTokenTemplate='<ins contenteditable="false">\x3c!--UAToken--\x3e<span class="'.concat(this.data.tokenCSSClass,'" contenteditable="false" data-token-id="%2$s">%1$s</span>\x3c!--UATokenEnd--\x3e</ins>')}},{key:"render",value:function(){this.RenderTokenSelector=new ot(this.Field,this.tokens)}},{key:"insertTextAtCursor",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!X(this.tinyMCEeditor)||X(this.tinyMCEeditor)&&this.tinyMCEeditor.hidden)this.editor.doc.replaceRange(e,this.editor.doc.getCursor());else{e=e.replace("{{","").replace("}}","");var n=this.createTokenDOMNode(e);"anonymous"!=UncannyAutomator.recipe.type||UncannyAutomator.recipe.requiresUserData||!this.tokensThatRequireUser.includes(e)&&!e.startsWith("USERMETA:")?(this.tinyMCEeditor.execCommand("mceInsertContent",!1,(0,r.gB)(this.data.tinymceTokenTemplate,n.outerHTML,e)),this.Field.getField().trigger("change input")):this.tokenNeedsUserModal(n,{allowedConfirm:function(){t.tinyMCEeditor.execCommand("mceInsertContent",!1,(0,r.gB)(t.data.tinymceTokenTemplate,n.outerHTML,e)),t.Field.getField().trigger("change input")}})}}},{key:"getTinyMCEEditor",value:function(){this.tinyMCEeditor=this.Field.fieldTinyMCE}},{key:"addStylesToEditor",value:function(){this.tinyMCEeditor.dom.addStyle("\n\t\t\thtml body {\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\tfont-size: 15px;\n\t\t\t\tmargin-left: 12px;\n\t\t\t\tmargin-right: 12px;\n\t\t\t}\n\n\t\t\t.uap-token {\n\t\t\t\tdisplay: inline-flex;\n\t\t\t\talign-items: center;\n\t\t\t\tbackground: #eee;\n\t\t\t\tline-height: 1;\n\t\t\t\tpadding: 3px 8px;\n\t\t\t\tborder-radius: 150px;\n\n\t\t\t\tfont-size: 15px;\n\t\t\t\tfont-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n\t\t\t\t-webkit-font-smoothing:antialiased;\n\t\t\t\t-moz-osx-font-smoothing:grayscale;\n\t\t\t}\n\n\t\t\t\t.uap-token-tinymce {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tline-height: 1;\n\t\t\t\t\tborder-radius: 150px;\n\t\t\t\t\tbox-shadow: 0 0 0 2px transparent;\n\t\t\t\t\ttransition: box-shadow 150ms ease-in-out;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\n\t\t\t\t.uap-token-tinymce[data-mce-selected=\"1\"] {\n\t\t\t\t\toutline: 0 !important;\n\t\t\t\t\tbox-shadow: 0 0 0 2px #0790e8;\n\t\t\t\t}\n\n\t\t\t\t.uap-token img {\n\t\t\t\t\twidth: 12px;\n\t\t\t\t\theight: 11px;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\tobject-position: center;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t.uap-token uo-icon {\n\t\t\t\t\twidth: 14px;\n\t\t\t\t\theight: 14px;\n\t\t\t\t\tborder: 1px solid #444;\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\tfont-size: 9px;\n\t\t\t\t\tcolor: #444;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tline-height: 15px;\n\t\t\t\t\tbackground: #fff;\n\t\t\t\t\topacity: .8;\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tdisplay: inline-flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\n\t\t\t\t.uap-token__name {\n\t\t\t\t\tcolor: #444444;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid {\n\t\t\t\t\t\tbackground: #f9e2e2;\n\t\t\t\t\t}\n\n\t\t\t\t\t.uap-token--invalid uo-icon {\n\t\t\t\t\t\tcolor: #c00;\n\t\t\t\t\t\tborder-color: #c00;\n\t\t\t\t\t}\n\n\t\t")}},{key:"handleHTMLTokensInPlainTextarea",value:function(){var t=this;this.Field.getField().on("change input",tt((function(){t.parseHTMLTokensInPlainTextarea()}),this.data.tokenRenderingDebounce)),this.Field.getField().on("ua-tinymce-activate-text-view",(function(){setTimeout((function(){t.parseHTMLTokensInPlainTextarea()}),t.data.tokenRenderingDebounce)}))}},{key:"handlePlainTokensInTinyMCE",value:function(){var t=this;this.Field.getField().on("ua-tinymce-activate-visual-view",(function(){setTimeout((function(){t.parsePlainTokensInTinyMCE({parseTokensInAttributes:!1})}),t.data.tokenRenderingDebounce)}))}},{key:"parsePlainTokensInTinyMCE",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object.assign({parseTokensInAttributes:!0},t);var e=this.tinyMCEeditor.getContent({format:"raw"}),n=this.renderTextWithTokens(e,{template:this.data.tinymceTokenTemplate,parseTokensInAttributes:t.parseTokensInAttributes,returnString:!0});e!=n&&this.tinyMCEeditor.setContent(n)}},{key:"parseHTMLTokensInPlainTextarea",value:function(){var t=this.Field.getField().val(),e=!1;if(t=t.replaceAll(this.data.tinymceTokenRegex,(function(t,n){return e=!0,"{{".concat(n,"}}")})),e)try{this.editor.setValue(t)}catch(e){this.Field.getField().val(t)}}},{key:"destroy",value:function(){this.RenderTokenSelector.destroy()}}]),n}(nt),ot=function(){function t(e,n){K(this,t),this.Field=e,this.tokens=n,this.getData(),this.getElements(),this.createWrapper(),this.createFilter(),this.createGroupsOfTokens(),this.listenToggleButton(),this.resizeDropdownOnWindowResize(),this.resizeDropdownOnWindowScroll(),this.refreshOnFieldChange(),this.search(),this.shouldSupportFilters()&&this.setFilter(!0)}return Y(t,[{key:"getData",value:function(){this.data={isOpen:!1,position:"below"}}},{key:"getElements",value:function(){this.$elements={wrapper:null,toggleButton:null,searchField:null,dropdown:null,allGroups:null,dropdownGroupsContainer:null,dropdownTokens:null,noResultsOption:null}}},{key:"createWrapper",value:function(){var t=o()('\n\t\t\t<div class="form-variable">\n\t\t\t\t<div class="form-variable__element">\n\t\t\t\t\t<div class="form-variable__render-container"></div>\n\t\t\t\t\t<div class="form-variable__toggle">\n\t\t\t\t\t\t<uo-icon id="asterisk"></uo-icon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__dropdown">\n\t\t\t\t\t<div class="form-variable__dropdown-container">\n\t\t\t\t\t\t<div class="form-variable__search">\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\tclass="form-variable__search-input" \n\t\t\t\t\t\t\t\tplaceholder="'.concat(UncannyAutomator.i18n.tokens.search,'"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="form-variable__groups"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t')),e=[];"textarea"==this.Field.type&&e.push(this.Field.getField()),X(this.Field.getFieldCM())&&e.push(this.Field.getFieldCM()),e.forEach((function(e){t.insertAfter(e),t.find(".form-variable__render-container").append(e)})),this.$elements.wrapper=t,this.$elements.renderContainer=t.find(".form-variable__render-container"),this.$elements.searchFieldContainer=t.find(".form-variable__search"),this.$elements.searchField=t.find(".form-variable__search-input"),this.$elements.toggleButton=t.find(".form-variable__toggle"),this.$elements.dropdown=t.find(".form-variable__dropdown"),this.$elements.dropdownGroupsContainer=t.find(".form-variable__groups")}},{key:"createFilter",value:function(){var t=this;if(this.shouldSupportFilters()){var e=this.Field.attributes.fieldType,n=X(UncannyAutomator.i18n.tokens.tokenType[e])?UncannyAutomator.i18n.tokens.tokenType[e]:e,i=o()('\n\t\t\t\t<div class="form-variable__filter"></div>\n\t\t\t'),a=new pt("checkbox",{optionCode:"token__enableFilter",currentValue:!0,label:'<span class="form-variable__filter-label">'+(0,r.gB)(UncannyAutomator.i18n.tokens.filter,'<span class="form-variable__filter-type">'.concat(n,"</span>"))+"<span>"}),s=a.createFormElement();i.prepend(s),this.$elements.searchFieldContainer.append(i),this.$elements.filterContainer=i,s.on("automator:field:change",(function(){a.getValue()?t.setFilter(!0):t.setFilter(!1)}))}}},{key:"createGroupsOfTokens",value:function(){var t=this,e=this.$elements.wrapper.find(".form-variable__groups");this.tokens.forEach((function(n,i){e.append(t.createIndividualGroupOfTokens(i,n))})),this.$elements.allGroups=e.find(".form-variable__group"),this.$elements.dropdownTokens=e.find(".form-variable__group-item"),this.$elements.noResultsOption=o()('\n\t\t\t<div class="form-variable__group-item-no-results form-variable__group-item-no-results--hide">\n\t\t\t\t<div class="form-variable__group-item-no-results-title">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.tokens.noResults,'\n\t\t\t\t</div>\n\t\t\t\t<div class="form-variable__group-item-no-results-description">\n\t\t\t\t\t').concat(this.shouldSupportFilters()?UncannyAutomator.i18n.tokens.noResultsDescriptionWithFilter:UncannyAutomator.i18n.tokens.noResultsDescription,"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),e.append(this.$elements.noResultsOption)}},{key:"createIndividualGroupOfTokens",value:function(t,e){var n=this,i=o()('\n\t\t\t<div \n\t\t\t\tclass="form-variable__group"\n\t\t\t\tdata-id="'.concat(e.id,'"\n\t\t\t>\n\t\t\t\t<div class="form-variable__group-source">\n\t\t\t\t\t<div class="form-variable-group-source__icon"></div>\n\t\t\t\t\t<div class="form-variable-group-source__description"></div>\n\t\t\t\t\t<div class="form-variable-group-source__toggle">\n\t\t\t\t\t\t<span class="form-variable-group-source__toggle-icon"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<span class="form-variable__group-children"></span>\n\t\t\t</div>\n\t\t')),r=e.name;"string"==!N(r)&&(r.html.clone(),function(t){throw new TypeError('"groupName" is read-only')}()),i.find(".form-variable-group-source__description").append(e.name);var a=e.icon.clone();i.find(".form-variable-group-source__icon").append(a);var s=i.find(".form-variable__group-source");s.on("click",(function(){i.toggleClass("form-variable__group--open")}));var c=i.find(".form-variable__group-children");return e.tokens.forEach((function(t){var e=Q(t.name)?"":t.name,i=o()('\n\t\t\t\t<div \n\t\t\t\t\tclass="form-variable__group-item"\n\t\t\t\t\tdata-search="'.concat(e.trim().toLowerCase().replace(/\s/g,""),'"\n\t\t\t\t\tdata-type="').concat(t.type,'"\n\t\t\t\t>\n\t\t\t\t\t<span>').concat(e,"</span>\n\n\t\t\t\t\t").concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&X(t.requiresUser)&&t.requiresUser?'<span class="form-variable__group-item-tag">'+UncannyAutomator.i18n.needsUserData+"</span>":"","\n\t\t\t\t</div>\n\t\t\t")),r=function(t){n.Field.field.trigger("ua-add-token",t)};i.on("click",(function(){n.close(),X(t.beforeAdded)?t.beforeAdded(r):r(t)})),c.append(i)})),this.tokens[t].$toggleButton=s,i}},{key:"addAllTokensInGroupCallback",value:function(t){var e=this,n=o()("<div></div>"),i=new pt("checkbox",{label:UncannyAutomator.i18n.tokens.includeTokenName,currentValue:!0});n.append(i.createFormElement());var a=new pt("checkbox",{label:UncannyAutomator.i18n.tokens.includeTokenID,currentValue:!1});n.append(a.createFormElement());var s=t.name instanceof jQuery?t.name.text():t.name,c=o()('<div class="description">'.concat((0,r.gB)(UncannyAutomator.i18n.tokens.addAllDescription,s,Q(this.Field.attributes.label)?UncannyAutomator.i18n.noLabel:this.Field.attributes.label),"</div>"));n.append(c);var l=new V.Z({title:UncannyAutomator.i18n.tokens.addTokens,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.addTokens}});l.setEvents({onConfirm:function(){try{e.close();var n=i.getValue(),o=a.getValue(),r=e.Field.getValue(),s="";if(t.tokens.forEach((function(t){n&&(s+="".concat(t.name)),o&&(n&&(s+=" "),s+="(".concat(t.id,")")),(n||o)&&(s+=": "),s+="{{".concat(t.id,"}}"),"textarea"==e.Field.type?s+="<br><br>":s+=" | "})),"textarea"==e.Field.type&&X(e.Field.fieldTinyMCE)&&r.includes("</body>"))try{e.Field.setValue(r.replace("</body>","".concat(s,"</body>")))}catch(t){e.Field.setValue("".concat(r," ").concat(s))}else e.Field.setValue("".concat(r," ").concat(s));"textarea"==e.Field.type&&X(e.Field.fieldTinyMCE)&&!e.Field.fieldTinyMCE.hidden&&e.Field.getField().trigger("ua-tinymce-activate-visual-view")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t),alert("Debugging: Couldn't add all tokens. Enable debug mode and check the console.")}l.destroy()},afterHide:function(){l.destroy()}})}},{key:"listenToggleButton",value:function(){var t=this;this.$elements.toggleButton.on("click",(function(){t.data.isOpen?t.close():t.open()}))}},{key:"search",value:function(){var t=this;this.$elements.searchField.on("input",(0,L.P2)((function(){var e=t.$elements.searchField.val();e=e.trim().toLowerCase().replace(/\s/g,""),Q(e)?(t.$elements.allGroups.removeClass("form-variable__group--open"),t.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-search")):(t.$elements.allGroups.addClass("form-variable__group--open"),t.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-search"),t.$elements.dropdownTokens.filter((function(t,n){return-1!==n.dataset.search.search(e)})).removeClass("form-variable__group-item--hidden-by-search")),t.updateGroupsOfTokensVisibility()}),30)),this.$elements.searchField.on("focus",(function(){t.$elements.wrapper.addClass("form-variable--search-focus")})),this.$elements.searchField.on("blur",(function(){t.$elements.wrapper.removeClass("form-variable--search-focus")}))}},{key:"setFilter",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){this.$elements.dropdownTokens.addClass("form-variable__group-item--hidden-by-filter");var n=this.$elements.dropdownTokens.filter((function(e,n){return("int"==n.dataset.type&&"float"==t.Field.attributes.fieldType?"float":n.dataset.type)==t.Field.attributes.fieldType}));n.removeClass("form-variable__group-item--hidden-by-filter")}else this.$elements.dropdownTokens.removeClass("form-variable__group-item--hidden-by-filter");this.updateGroupsOfTokensVisibility()}},{key:"updateGroupsOfTokensVisibility",value:function(){var t=!1;this.$elements.allGroups.removeClass("form-variable__group--without-available-tokens"),this.$elements.allGroups.filter((function(e,n){n.querySelectorAll(".form-variable__group-item:not(.form-variable__group-item--hidden-by-filter):not(.form-variable__group-item--hidden-by-search)").length>0?t=!0:n.classList.add("form-variable__group--without-available-tokens")})),t?this.$elements.noResultsOption.addClass("form-variable__group-item-no-results--hide"):this.$elements.noResultsOption.removeClass("form-variable__group-item-no-results--hide")}},{key:"open",value:function(){if(["date","time"].includes(this.Field.attributes.fieldType))try{this.Field.flatpickrInstance.close()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}this.$elements.wrapper.addClass("form-variable--open"),this.data.isOpen=!0,this.closeWhenClickedOutside(),this.$elements.searchField.val("").trigger("input").css({"padding-right":"".concat((X(this.$elements.filterContainer)?this.$elements.filterContainer.outerWidth():0)+12,"px")}),this.$elements.searchField.focus(),this.setDropdownView(),this.setDropdownDirection(),this.setDropdownHeight(),this.addContextMenus()}},{key:"addContextMenus",value:function(){var t=this;this.tokens.forEach((function(e,n){try{var i=new uap.ContextMenu({id:"tokens",$element:e.$toggleButton[0]});t.tokens[n].contextMenu=i;var o=i.addGroup({id:"testing",name:UncannyAutomator.i18n.debuggingTools});"advanced"==e.id?o.addItem({id:"add-all-tokens",name:UncannyAutomator.i18n.tokens.addAllTokensInGroup,disabled:!0}):o.addItem({id:"add-all-tokens",name:UncannyAutomator.i18n.tokens.addAllTokensInGroup,callback:function(){t.addAllTokensInGroupCallback(e)}})}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}))}},{key:"close",value:function(){this.$elements.wrapper.removeClass("form-variable--open"),this.data.isOpen=!1,this.$elements.searchField.val("").trigger("input"),o()(document).off("mouseup.uap-token-selector-click-outside"),this.tokens.forEach((function(t,e){try{t.contextMenu.destroy()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}))}},{key:"destroy",value:function(){this.$elements.renderContainer.children().insertAfter(this.$elements.wrapper),this.$elements.wrapper.remove()}},{key:"closeWhenClickedOutside",value:function(){var t=this;o()(document).on("mouseup.uap-token-selector-click-outside",(function(e){var n=t.$elements.wrapper;n.is(e.target)||0!==n.has(e.target).length||t.close()}))}},{key:"getDropdownPosition",value:function(){var t=o()(window),e={};e.above=this.$elements.wrapper.offset().top-t.scrollTop(),e.below=t.height()-(e.above+this.$elements.wrapper.outerHeight()),"textarea"==this.Field.type&&(e.below=t.height()-(e.above+38)),this.$elements.dropdown.addClass("uo-realsize");var n=this.$elements.dropdown.outerHeight()+110;return this.$elements.dropdown.removeClass("uo-realsize"),"textarea"==this.Field.type?e.hasSpaceBelow=!0:e.hasSpaceBelow=e.below>=n,e}},{key:"setDropdownView",value:function(){this.$elements.dropdown.width()<350&&this.$elements.wrapper.addClass("form-variable--bubble")}},{key:"setDropdownDirection",value:function(){var t=this.getDropdownPosition();this.$elements.wrapper.removeClass("form-variable--above form-variable--below"),t.below>t.above||t.hasSpaceBelow?(this.$elements.wrapper.addClass("form-variable--below"),this.data.position="below"):(this.$elements.wrapper.addClass("form-variable--above"),this.data.position="above")}},{key:"setDropdownHeight",value:function(){if(this.data.isOpen){var t=this.getDropdownPosition()[this.data.position]-this.$elements.searchField.outerHeight()-45;this.$elements.dropdownGroupsContainer.css({"max-height":"".concat(t,"px")})}}},{key:"focusSearchField",value:function(){this.$elements.searchField.focus()}},{key:"resizeDropdownOnWindowResize",value:function(){var t=this;o()(window).on("resize",(0,L.P2)((function(){t.setDropdownDirection(),t.setDropdownHeight()}),20))}},{key:"resizeDropdownOnWindowScroll",value:function(){var t=this;o()(window).on("scroll",tt((function(){t.setDropdownDirection(),t.setDropdownHeight()}),300))}},{key:"refreshOnFieldChange",value:function(){var t=this;this.Field.formElement.on("automator:field:change",(function(){t.setDropdownDirection(),t.setDropdownHeight()}))}},{key:"shouldSupportFilters",value:function(){var t=this.Field.attributes.fieldType;return["email","int","float","url","date","time"].includes(t)}}]),t}();function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function at(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var st=_uo.utility,ct=st.isDefined,lt=st.isEmpty,ut=(st.debounce,st.getUniqueID),dt=function(){function t(e,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;rt(this,t),this.type=e,this.attributes=this.setAttributes(n),this.customValidationFunction=o,i&&this.createFormElement()}var e,n;return e=t,n=[{key:"createFormElement",value:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=null,a=this.type,s=this.attributes;if((0,L.d3)(a,j.s)){var c=o()("<div/>",{class:"form-element"});ct(s.formElementClass)&&c.addClass(s.formElementClass);var l,u,d,p={name:s.optionCode,id:s.uniqueFieldID,"data-isajax":s.isAjax,"data-targetfield":s.targetField,"data-integrationid":s.integrationID,"data-endPoint":s.endPoint,"data-supportsTokens":s.supportsTokens,"data-supportsTinymce":s.supportsTinyMCE,"data-required":s.isRequired,"data-item_type":s.itemType,"data-item-id":s.itemId,"data-option-group":s.groupId,"data-is-hidden":s.isHidden,"data-is-child-field":s.isChildField};switch(a){case"select":l=o()("<div/>",{class:"form-select"}),this.fieldContainer=l,u=o()("<select/>",o().extend({},p,{"data-type":"select",class:"form-element__select","data-supports-custom-value":s.supportsCustomValue})),s.supportsMultipleValues&&u.prop("multiple","multiple"),this.field=u;var m,f,h=!1,g=0;s.hasDefaultValue&&(m=lt(s.defaultValue.option_value)||lt(s.defaultValue.option_name)?s.defaultValue:s.defaultValue.option_value);var v=o()('<optgroup class="form-element__select-normal-options"></optgroup>');if(s.options=s.options.filter((function(t){return"automator_custom_value"!==t.value})),o().each(s.options,(function(t,e){var n=o()("<option/>",{value:e.value,text:e.text});s.hasDefaultValue&&(0,L.A5)(m,t)&&(n.prop("selected",!0),f=!0,h=!0),s.hasValue&&(0,L.A5)(s.currentValue,e.value)&&(n.prop("selected",!0),h=!0),n.appendTo(v),g++})),v.appendTo(u),s.supportsMultipleValues){if(!lt(s.currentValue))try{u.val(s.currentValue)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}lt(u.val())||(h=!0)}if(s.hasDefaultValue&&!f&&!lt(s.defaultValue.option_value)&&!lt(s.defaultValue.option_name)){var y=o()("<option/>",{value:s.defaultValue.option_value,text:s.defaultValue.option_name});s.hasValue||(0,L.A5)(s.defaultValue.option_value,s.currentValue)||(y.prop("selected",!0),h=!0),y.prependTo(u),g++}if(s.hasPlaceholder&&(u.prepend("<option></option>"),s.hasDefaultValue||s.hasValue||u.find("option:selected").prop("selected",!1)),s.supportsCustomValue){var b=s.customValue,_=o()('\n\t\t\t\t\t\t\t<optgroup label="'.concat(UncannyAutomator.i18n.validation.field.select.otherOptions,'">\n\t\t\t\t\t\t\t\t<option value="automator_custom_value">').concat(UncannyAutomator.i18n.validation.field.select.customValue,"</option>\n\t\t\t\t\t\t\t</optgroup>\n\t\t\t\t\t\t"));u.append(_),s.hasValue&&(0,L.A5)(s.currentValue,"automator_custom_value")&&(_.find("option").attr("selected",!0),h=!0),s.hasValue&&!h&&(_.find("option").attr("selected",!0),h=!0,b=s.currentValue),this.customValueField=new t("text",{itemId:s.itemId,itemType:s.itemType,isRequired:s.isRequired,isReadOnly:!1,supportsTinyMCE:!1,supportsCopyToClipboard:!1,supportsTokens:s.supportsTokens,isAjax:!1,fieldType:"text",optionCode:"".concat(s.optionCode,"_custom"),label:"",description:s.hasCustomValueDescription?s.customValueDescription:void 0,placeholder:"",isHidden:!1,tokenName:(0,r.gB)(UncannyAutomator.i18n.validation.field.select.customValueToken,s.label),defaultValue:null,currentValue:b,isChildField:!0,parentOptionCode:s.optionCode})}if(this.selectHasSelectedOption=h,0==g){var w=o()(new Option(UncannyAutomator.i18n.noResults,"",!0,!0));w.prop("disabled",!0),this.field.find(".form-element__select-normal-options").append(w),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}u.on("change",(function(t,e){c.trigger("automator:field:change",e)}));break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":var A="form-input form-input--".concat(a);if(l=o()("<div/>",{class:A}),this.$fakeCodemirrorField=o()("<div/>",{class:"form-element__input-cm"}),l.append(this.$fakeCodemirrorField),this.fieldContainer=l,u=o()("<input/>",o().extend({},p,{class:"form-element__input",type:"text","data-type":a})),ct(s.maxLength)&&u.prop("maxlength",s.maxLength),this.field=u,s.supportsTokens&&l.addClass("form-input--token"),s.hasPlaceholder&&u.prop("placeholder",s.placeholder),s.hasValue?u.prop("value",s.currentValue):s.hasDefaultValue&&u.prop("value",s.defaultValue),["date","time"].includes(s.fieldType)){var k=o()('\n\t\t\t\t\t\t\t\t<div class="form-element__input-clear" uap-tooltip="'.concat(UncannyAutomator.i18n.clear,'">\n\t\t\t\t\t\t\t\t\t<uo-icon id="times"></uo-icon>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'));l.addClass("form-input--has-clear"),this.$fakeCodemirrorField.append(k),k.on("click",(function(){e.clearValue()}))}u.on("input",(function(){c.trigger("automator:field:change")}));break;case"textarea":l=o()("<div/>",{class:"form-textarea"}),this.fieldContainer=l,u=o()("<textarea/>",o().extend(!0,p,{"data-type":"textarea",class:"form-element__textarea","data-item_type":s.itemType})),ct(s.maxLength)&&u.prop("maxlength",s.maxLength),this.field=u,s.supportsTokens&&l.addClass("form-textarea--token"),s.hasPlaceholder&&u.prop("placeholder",s.placeholder),this.$fakeCodemirrorField=o()("<div/>",{class:"form-element__input-cm"}),l.append(this.$fakeCodemirrorField),s.hasValue?u.text(s.currentValue):s.hasDefaultValue&&u.text(s.defaultValue),u.on("input",(function(){c.trigger("automator:field:change")}));break;case"checkbox":l=o()("<div/>",{class:"form-checkbox"}),this.fieldContainer=l;var C=o()("<label/>",{class:"form-checkbox__container"}),T=o()("<div/>",{class:"checkbox--show"});if(u=o()("<input/>",o().extend({},p,{type:"checkbox","data-type":"checkbox",class:"checkbox--hidden checkbox--primary"})),s.hasValue&&s.currentValue&&u.prop("checked",!0),this.field=u,s.hasLabel&&(ct(s.isToggle)&&s.isToggle?l[0].insertAdjacentHTML("afterBegin",'\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\tfor="'.concat(p.id,'"\n\t\t\t\t\t\t\t\t\t\tclass="form-element__label"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t').concat(s.label,"\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t")):C[0].innerHTML=s.label),l.append(C),C.append(u),C.append(T),ct(s.isToggle)&&s.isToggle){l.addClass("form-checkbox--toggle"),ct(s.toggle)||(s.toggle={on:UncannyAutomator.i18n.yes,off:UncannyAutomator.i18n.no});var U=o()("<span/>",{class:"checkbox-label checkbox-label--on"}).text(s.toggle.on);C.append(U);var E=o()("<span/>",{class:"checkbox-label checkbox-label--off"}).text(s.toggle.off);C.append(E)}if(ct(s.color))if((0,L.d3)(s.color,["gutenberg","green"]))switch(s.color){case"gutenberg":l.addClass("form-checkbox--toggle-gutenberg");break;case"green":l.addClass("form-checkbox--toggle-green")}else console.error("The color ".concat(s.color," does not exists. Default color will be used instead."));ct(s.align)&&((0,L.d3)(s.align,["left","right"])?"right"==s.align&&l.addClass("form-checkbox--toggle-right"):console.error("The alignment ".concat(s.align,' does not exists. "left" will be used instead.'))),u.on("change",(function(t,e){c.trigger("automator:field:change",e)})),u=C;break;case"radio":l=o()("<div/>",{class:"form-radio"}),this.fieldContainer=l;var x=o()(),D=o()();o().each(s.options,(function(t,e){var n=o()("<label/>",{class:"form-radio__container"});n.html(e.text);var i=o()("<input/>",o().extend({},p,{type:"radio","data-type":"radio",class:"radio--hidden radio--primary",value:e.value,name:p.id}));x=x.add(i);var r=o()("<div/>",{class:"radio--show"});n.append(i),n.append(r),(s.hasValue&&s.currentValue==e.value||!s.hasValue&&s.hasDefaultValue&&s.defaultValue==e.value)&&i.prop("checked",!0),D=D.add(n)})),this.field=D,u=D,x.on("change",(function(t,e){c.trigger("automator:field:change",e)}))}if(l.append(u),"checkbox"!=a&&(s.hasLabel||s.isRequired)&&(d=o()("<label/>",{class:"form-element__label",for:s.uniqueFieldID}),s.hasLabel&&d.html(s.label)),s.isRequired)if(l.addClass("form-element--required"),"checkbox"==s.fieldType){if(u.find("input").prop("required",!0),s.hasLabel){var M=o()("<span/>",{class:"form-element-label__required"});u.append(M)}}else if(u.prop("required",!0),s.hasLabel){var S=o()("<span/>",{class:"form-element-label__required"});d.append(S)}ct(s.isReadOnly)&&s.isReadOnly&&(["date","time"].includes(this.attributes.fieldType)||l.addClass("form-element--readonly"),"select"==s.fieldType?u.prop("disabled",!0):["checkbox","radio"].includes(s.fieldType)?u.find("input").prop("disabled",!0):u.prop("readonly",!0)),(s.hasLabel||s.isRequired)&&l.prepend(d);var O=o()("<div/>",{class:"form-element__error"});if(l.append(O),this.fieldContainer=l,s.hasDescription){var I=o()("<div/>",{class:"description"});I.html(s.description),l.append(I)}s.isHidden&&l.addClass("form-element--hidden"),c.append(l),"select"==s.fieldType&&ct(this.customValueField)&&(this.customValueFieldContainer=o()('<div class="form-select-custom">\n\t\t\t\t\t\t<div class="form-element-children"></div>\n\t\t\t\t\t</div>'),this.customValueFieldContainer.find(".form-element-children").append(this.customValueField.createFormElement()),c.append(this.customValueFieldContainer),"automator_custom_value"==this.getValue()?this.customValueFieldContainer.addClass("form-select-custom--visible"):this.customValueFieldContainer.removeClass("form-select-custom--visible")),this.field.get(0).fieldInstance=this,i=c,this.formElement=c,n&&this.initLibraries(),this.onChange(),this.onFocus()}else console.error('The field type "'.concat(a,'" is invalid. The valid ones are ').concat(j.s.join(", ")));return i}},{key:"setAttributes",value:function(t){if(t.fieldType=this.type,t.uniqueFieldID="".concat(t.optionCode,"__").concat(ut()),"checkbox"!=t.fieldType||lt(t.currentValue)||["true","false"].includes(t.currentValue)&&(t.currentValue="true"==t.currentValue,t.currentValue?t.hasValue=!0:t.hasValue=!1),ct(t.hasValue)||(lt(t.currentValue)?t.hasValue=!1:t.hasValue=!0),ct(t.hasPlaceholder)||(lt(t.placeholder)?t.hasPlaceholder=!1:t.hasPlaceholder=!0),ct(t.hasDefaultValue)||(lt(t.defaultValue)?t.hasDefaultValue=!1:t.hasDefaultValue=!0),ct(t.hasLabel)||(lt(t.label)?t.hasLabel=!1:t.hasLabel=!0),ct(t.hasDescription)||(lt(t.description)?t.hasDescription=!1:t.hasDescription=!0),lt(t.tokenName)&&(t.tokenName=t.label),ct(t.supportsCopyToClipboard)||(t.supportsCopyToClipboard=!1),ct(t.isRequired)||(t.isRequired=!1),ct(t.isChildField)||(t.isChildField=!1),ct(t.isReadOnly)||(t.isReadOnly=!1),"select"==t.fieldType){if(ct(t.supportsMultipleValues)||(t.supportsMultipleValues=!1),t.supportsMultipleValues?t.supportsCustomValue=!1:ct(t.supportsCustomValue)||(["action","closure"].includes(t.itemType)?t.supportsCustomValue=!0:t.supportsCustomValue=!1),t.supportsMultipleValues)try{t.currentValue=JSON.parse(t.currentValue)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}t.hasCustomValueDescription=!lt(t.customValueDescription)}if(["radio","select"].includes(t.fieldType)&&(ct(t.options)||(t.options=[]),ct(t.optionsShowID)||(t.optionsShowID=!0)),"date"==t.fieldType&&(t.isReadOnly=!0,ct(t.dateFormat)||(t.dateFormat="Y-m-d"),ct(t.dateAltFormat)||(t.dateAltFormat=UncannyAutomator.format.date),ct(t.minDate)&&(t.minDate=t.minDate),ct(t.maxDate)&&(t.maxDate=t.maxDate),ct(t.supportsRange)||(t.supportsRange=!1)),"time"==t.fieldType){t.isReadOnly=!0,ct(t.timeFormat)||(t.timeFormat="h:i K"),ct(t.timeAltFormat)||(t.timeAltFormat=UncannyAutomator.format.time);var e={a:"K",A:"K",B:"",G:"H",g:"h",h:"g"};try{t.timeAltFormat=t.timeAltFormat.replace(new RegExp(Object.keys(e).join("|"),"g"),(function(t){return e[t]}))}catch(e){t.timeAltFormat=t.timeFormat,UncannyAutomatorBackend.debugging.enabled&&console.warn(e)}ct(t.minTime)&&(t.minTime=t.minTime),ct(t.maxTime)&&(t.maxTime=t.maxTime)}return ct(t.supportsTinyMCE)||(t.supportsTinyMCE=!1),t.supportsTinyMCE&&!ct(t.supportsFullPageEditing)&&(t.supportsFullPageEditing=!1),!ct(t.isToggle)&&ct(t.toggle)&&(t.isToggle=!0),ct(t.isAjax)||(t.isAjax=!1),ct(t.isHidden)||(t.isHidden=!1),ct(t.unsupportedTokens)||(t.unsupportedTokens=[]),"trigger"==t.itemType&&(t.supportsTokens=!1),ct(t.supportsTokens)||(["text","textarea","int","float","email","url","select","date","time"].includes(t.fieldType)&&["action","closure"].includes(t.itemType)&&!t.isReadOnly?t.supportsTokens=!0:t.supportsTokens=!1),t.supportsTokens&&"select"==t.fieldType&&!["action","closure"].includes(t.itemType)&&(t.supportsTokens=!1),t}},{key:"validate",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=null;e?(n=this.getFieldContainer(),t=this.getValue()):t=this.attributes.currentValue,this.type;var i={supportsTokens:this.attributes.supportsTokens,required:this.attributes.isRequired};return(0,F.OP)(n,this.type,t,i,this.customValidationFunction)}},{key:"onChange",value:function(){var t=this;this.formElement.on("automator:field:change",(function(e,n){ct(t.fieldContainer)&&(lt(t.getValue())?t.fieldContainer.removeClass("form-input--has-value"):t.fieldContainer.addClass("form-input--has-value")),"select"==t.attributes.fieldType&&t.attributes.supportsCustomValue&&("automator_custom_value"==t.getValue()?t.customValueFieldContainer.addClass("form-select-custom--visible"):t.customValueFieldContainer.removeClass("form-select-custom--visible"));var i=function(){if(t.attributes.isAjax&&t.attributes.targetField!==t.attributes.optionCode&&t.doAJAX(),ct(t.attributes.isChildField)&&t.attributes.isChildField&&ct(t.attributes.parentOptionCode)){var e=(0,L.rz)(t.attributes.itemId,t.attributes.parentOptionCode);ct(e)&&e.doAJAX()}};if(t.attributes.isAjax&&ct(t.attributes.targetField)&&t.attributes.targetField!==t.attributes.optionCode&&(t.attributes.completedFirstLoad||lt(t.attributes.currentValue)&&!t.attributes.hasDefaultValue&&!t.attributes.completedFirstLoad)){var o=(0,L.rz)(t.attributes.itemId,t.attributes.targetField);o.setValue(null,!1),o.setCustomValue(null,!1)}return["select","radio","checkbox"].includes(t.attributes.fieldType)?i():(ct(t.onChangeTimeout)&&clearTimeout(t.onChangeTimeout),t.onChangeTimeout=setTimeout((function(){i()}),1500)),!1}))}},{key:"onFocus",value:function(){var t=this;this.field.on("focusin",(function(e){t.attributes.isReadOnly&&o()(e.currentTarget).select()})),this.field.on("focusout",(function(){}))}},{key:"isReady",value:function(){var t=!1;return ct(UncannyAutomator.recipe.items[this.attributes.itemId])&&(t=!0),t}},{key:"doAJAX",value:function(){var t=this;if(ct(this.getValue())?this.getValue():this.getMetaValue(),this.attributes.isAjax){var e=this;if(this.attributes.optionCode!=this.attributes.targetField&&(e=(0,L.rz)(this.attributes.itemId,this.attributes.targetField)),!lt(this.attributes.integrationId)&&!lt(this.attributes.endpoint)){this.startLoadingAnimation(),e.startLoadingAnimation();var n=this.getValue(),i=ct(e.getValue())?e.getValue():e.getMetaValue();(0,L.bN)(this.attributes.endpoint,{recipe_id:UncannyAutomator.recipe.id,integration_id:this.attributes.integrationId,item_id:this.attributes.itemId,group_id:this.attributes.groupId,field_id:this.attributes.optionCode,target_field:this.attributes.targetField,value:n,values:(0,L.q7)({itemID:this.attributes.itemId,field:this})},(function(n){if(t.stopLoadingAnimation(),e.stopLoadingAnimation(),"select"==e.getAttributes().fieldType&&o().isArray(n)){if(t.attributes.isAjax&&ct(t.attributes.targetField)&&t.attributes.targetField!==t.attributes.optionCode&&(t.attributes.completedFirstLoad||lt(t.attributes.currentValue)&&!t.attributes.hasDefaultValue&&!t.attributes.completedFirstLoad)&&(i=null),"automator_custom_value"==i){var r=e.getSelectCustomValue();i=lt(r)?null:r}e.setSelectOptions(n,!1),e.setValue(i)}else e.setValue(n);t.attributes.completedFirstLoad=!0}))}}}},{key:"getFormElement",value:function(){var t=this;if(this.isReady()){this.attributes.completedFirstLoad=!1;var e=!1;try{e=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields.reduce((function(e,n){return e||n.attributes.targetField==t.attributes.optionCode&&n.attributes.optionCode!=t.attributes.optionCode&&n.attributes.isAjax}),!1)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}e||(this.attributes.targetField==this.attributes.optionCode&&this.attributes.isAjax&&this.doAJAX(),this.field.trigger("automator:field:change",{manuallySet:!1}))}return this.formElement}},{key:"$wrapper",get:function(){return this.getFormElement()}},{key:"getFieldContainer",value:function(){return this.fieldContainer}},{key:"getFieldID",value:function(){return this.attributes.optionCode}},{key:"id",get:function(){return this.getFieldID()}},{key:"getField",value:function(){return this.field}},{key:"getFieldCM",value:function(){return this.$fakeCodemirrorField}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getValue",value:function(){var t=null;if(ct(this.field))switch(this.type){case"select":case"text":case"url":case"email":case"int":case"float":case"date":case"time":t=this.field.val();break;case"textarea":if(ct(this.TokenSelector))try{this.TokenSelector.parseHTMLTokensInPlainTextarea()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}t=this.field.val();try{ct(this.fieldTinyMCE)&&!this.fieldTinyMCE.hidden&&(t=this.fieldTinyMCE.getContent({format:"raw"}))}catch(t){}break;case"checkbox":t=this.field.is(":checked");break;case"radio":t=this.field.find("input:checked").val()}return ct(this.field)&&ct(t)||(this.attributes.hasValue?t=this.attributes.currentValue:this.attributes.hasDefaultValue&&(t=this.attributes.defaultValue)),t}},{key:"value",get:function(){return this.getValue()}},{key:"getReadableValue",value:function(){var t=this,e=null,n=this.getValue();switch(this.type){case"select":if(ct(this.field))e=this.attributes.supportsMultipleValues&&o().isArray(n)?n.map((function(e){return t.field.find('option[value="'.concat(e,'"]')).text()})).join("".concat(UncannyAutomator.i18n.itemSeparator," ")):this.field.find('option[value="'.concat(n,'"]')).text();else if(this.attributes.supportsMultipleValues&&o().isArray(n))try{e=n.map((function(e){return t.getSelectOptionByValue(e).text})).join("".concat(UncannyAutomator.i18n.itemSeparator," "))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}else try{e=this.getSelectOptionByValue(n).text}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}break;case"text":case"url":case"email":case"int":case"float":case"textarea":case"date":case"time":n=o()("<p/>").html(n).text();break;case"checkbox":e=n?UncannyAutomator.i18n.trueLabel:UncannyAutomator.i18n.falseLabel;break;case"radio":if(ct(this.field)){var i=this.field.find("input:checked");1==i.length&&(e=i.closest(".form-radio__container").text().trim())}else try{e=this.getSelectOptionByValue(n).text}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}return e}},{key:"readableValue",get:function(){return this.getReadableValue()}},{key:"getSelectCustomValue",value:function(){var t=null;if("select"==this.attributes.fieldType&&this.attributes.supportsCustomValue&&"automator_custom_value"==this.getValue())if(ct(this.customValueField))t=this.customValueField.getValue();else try{t=UncannyAutomator.recipe.items[this.attributes.itemId].meta["".concat(this.attributes.optionCode,"_custom")]}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}return t}},{key:"getSelectOptionByValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=null,n=this.attributes.options;return this.attributes.supportsCustomValue&&n.push({value:"automator_custom_value",text:UncannyAutomator.i18n.validation.field.select.customValue}),lt(n)||n.forEach((function(n){t==n.value&&(e=n)})),e}},{key:"getMetaValue",value:function(){var t;if(ct(UncannyAutomator.recipe.items[this.attributes.itemId])){var e=UncannyAutomator.recipe.items[this.attributes.itemId].meta[this.attributes.optionCode];ct(e)&&(t=e)}return t}},{key:"setValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{updateCodemirror:!0};if(ct(this.field))switch(this.type){case"select":ct(t)||(t=this.attributes.supportsMultipleValues?[]:"");var r=this.field.find("option");if(this.attributes.supportsMultipleValues)r.prop("selected",!1),o().isArray(t)&&!lt(t)&&(t.forEach((function(t){var n=e.field.find('option[value="'.concat(t,'"]'));n.length>0&&n.prop("selected",!0)})),n&&this.field.trigger("change",{manuallySet:!1}));else{var a=this.field.find('option[value="'.concat(t,'"]'));a.length>0?(r.prop("selected",!1),a.prop("selected",!0),n&&this.field.trigger("change",{manuallySet:!1})):(r.prop("selected",!1),this.attributes.supportsCustomValue&&!lt(t)&&this.setCustomValue(t,!1),n&&this.field.trigger("change",{manuallySet:!1}))}break;case"text":case"url":case"email":case"int":case"float":if(ct(i.updateCodemirror)&&i.updateCodemirror&&ct(this.fieldCM))try{this.fieldCM.setValue(t)}catch(e){this.field.val(t)}else this.field.val(t);n&&this.field.trigger("automator:field:change");break;case"textarea":if(this.field.val(t),ct(this.fieldTinyMCE)&&this.fieldTinyMCE.setContent(t),ct(i.updateCodemirror)&&i.updateCodemirror&&ct(this.fieldCM))try{this.fieldCM.setValue(t)}catch(e){this.field.val(t)}else this.field.val(t);n&&this.field.trigger("automator:field:change");break;case"checkbox":var s=t,c=this.getValue();s&&!c&&this.field.prop("checked",!0),!s&&c&&this.field.prop("checked",!1),n&&(s&&!c||!s&&c)&&this.field.trigger("automator:field:change");break;case"radio":this.field.filter('[name="'.concat(t,'"]')).prop("checked",!0),n&&this.field.trigger("automator:field:change");break;case"date":case"time":this.field.val(t),n&&this.field.trigger("automator:field:change")}}},{key:"clearValue",value:function(){this.setValue("",!0);try{this.fieldCM.setValue("")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if(["date","time"].includes(this.attributes.fieldType))try{this.flatpickrInstance.clear()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}},{key:"setCustomValue",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"select"==this.attributes.fieldType&&ct(this.customValueField)&&(this.field.val("automator_custom_value"),this.customValueField.setValue(t,e),e&&this.field.trigger("change",{manuallySet:!1}))}},{key:"hasSelectedOption",value:function(){return this.selectHasSelectedOption}},{key:"setSelectOptions",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeSelectOptions();try{t=t.filter((function(t){return ct(t.value)&&ct(t.text)}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if(ct(this.field)){var n=this.field.find(".form-element__select-normal-options");if(t.length>0){this.field.prop("disabled",!1);var i=ct(this.getValue())?this.getValue():this.getMetaValue(),r=[];o().each(t,(function(t,e){var i=new Option(e.text,e.value,!1,!1);n.append(i),r.push(i)})),lt(i)||o().each(this.field.find("option"),(function(t,e){e.value==i&&o()(e).prop("selected",!0)}))}else{var a=o()(new Option(UncannyAutomator.i18n.noResults,"",!this.attributes.supportsCustomValue,!this.attributes.supportsCustomValue));a.prop("disabled",!0),n.append(a),this.attributes.supportsCustomValue||this.field.prop("disabled",!0)}e&&this.field.trigger("change"),this.rerenderSelect2()}}},{key:"removeSelectOptions",value:function(){ct(this.field)&&this.field.find(".form-element__select-normal-options").empty()}},{key:"isLoading",value:function(){return this.formElement.hasClass("form-element--loading")}},{key:"startLoadingAnimation",value:function(){var t="form-element--loading";ct(this.formElement)&&!this.formElement.hasClass(t)&&(this.formElement.addClass(t),"checkbox"!=this.type||ct(this.attributes.isToggle)||this.fieldContainer.addClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"stopLoadingAnimation",value:function(){var t="form-element--loading";ct(this.formElement)&&this.formElement.hasClass(t)&&(this.formElement.removeClass(t),this.fieldContainer.removeClass("form-checkbox--loading-inline"),this.formElement.trigger("automator:field:loading"))}},{key:"initLibraries",value:function(){switch(this.type){case"select":this.initSelect2(this.field);break;case"text":case"url":case"email":case"int":case"float":case"textarea":break;case"date":case"time":this.initFlatpickr(this.field)}}},{key:"getSelect2Settings",value:function(){var t=this,e=function(e){var n=e.text;if(!lt(e.id)&&t.attributes.optionsShowID&&"automator_custom_value"!==e.id&&"-1"!=e.id){var i=e.id.length>10;n='<span class="uap-select2-item__meta '.concat(i?"uap-select2-item__meta--long":"",'">(').concat((0,r.gB)(UncannyAutomator.i18n.postIDPlaceholder,e.id.replace("-objectkey","")),")</span> ").concat(n)}return n},n={theme:"uap-select2",searchInputPlaceholder:UncannyAutomator.i18n.search,language:{noResults:function(){return UncannyAutomator.i18n.noResults}},templateResult:e,templateSelection:e,escapeMarkup:function(t){return t}};return this.attributes.hasPlaceholder&&(n.placeholder=this.attributes.placeholder),this.attributes.customClass&&(n.customClass=this.attributes.customClass),n}},{key:"initSelect2",value:function(t){var e=this.getSelect2Settings();t.hasClass("select2-hidden-accessible")||t.select2(e)}},{key:"initFlatpickr",value:function(t){var e=this;ct(document.getElementById("uap-flatpickr-calendar"))||o()("body").append(o()('<div id="uap-flatpickr-calendar" class="uap uap-flatpickr-calendar"></div>'));var n=document.getElementById("uap-flatpickr-calendar"),i={allowInput:!0,positionElement:this.$fakeCodemirrorField[0],altInput:!0,clickOpens:!1,appendTo:n,locale:{weekdays:{shorthand:[UncannyAutomator.i18n.format.date.weekdays.shorthand.sunday,UncannyAutomator.i18n.format.date.weekdays.shorthand.monday,UncannyAutomator.i18n.format.date.weekdays.shorthand.tuesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.wednesday,UncannyAutomator.i18n.format.date.weekdays.shorthand.thursday,UncannyAutomator.i18n.format.date.weekdays.shorthand.friday,UncannyAutomator.i18n.format.date.weekdays.shorthand.saturday],longhand:[UncannyAutomator.i18n.format.date.weekdays.longhand.sunday,UncannyAutomator.i18n.format.date.weekdays.longhand.monday,UncannyAutomator.i18n.format.date.weekdays.longhand.tuesday,UncannyAutomator.i18n.format.date.weekdays.longhand.wednesday,UncannyAutomator.i18n.format.date.weekdays.longhand.thursday,UncannyAutomator.i18n.format.date.weekdays.longhand.friday,UncannyAutomator.i18n.format.date.weekdays.longhand.saturday]},months:{shorthand:[UncannyAutomator.i18n.format.date.months.shorthand.january,UncannyAutomator.i18n.format.date.months.shorthand.february,UncannyAutomator.i18n.format.date.months.shorthand.march,UncannyAutomator.i18n.format.date.months.shorthand.april,UncannyAutomator.i18n.format.date.months.shorthand.may,UncannyAutomator.i18n.format.date.months.shorthand.june,UncannyAutomator.i18n.format.date.months.shorthand.july,UncannyAutomator.i18n.format.date.months.shorthand.august,UncannyAutomator.i18n.format.date.months.shorthand.september,UncannyAutomator.i18n.format.date.months.shorthand.october,UncannyAutomator.i18n.format.date.months.shorthand.november,UncannyAutomator.i18n.format.date.months.shorthand.december],longhand:[UncannyAutomator.i18n.format.date.months.longhand.january,UncannyAutomator.i18n.format.date.months.longhand.february,UncannyAutomator.i18n.format.date.months.longhand.march,UncannyAutomator.i18n.format.date.months.longhand.april,UncannyAutomator.i18n.format.date.months.longhand.may,UncannyAutomator.i18n.format.date.months.longhand.june,UncannyAutomator.i18n.format.date.months.longhand.july,UncannyAutomator.i18n.format.date.months.longhand.august,UncannyAutomator.i18n.format.date.months.longhand.september,UncannyAutomator.i18n.format.date.months.longhand.october,UncannyAutomator.i18n.format.date.months.longhand.november,UncannyAutomator.i18n.format.date.months.longhand.december]},rangeSeparator:" ".concat(UncannyAutomator.i18n.format.date.rangeSeparator," "),firstDayOfWeek:parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)>=1&&parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)<=7?parseInt(UncannyAutomator.i18n.format.date.firstDayOfWeek)-1:0,weekAbbreviation:" ".concat(UncannyAutomator.i18n.format.date.weekAbbreviation," "),scrollTitle:UncannyAutomator.i18n.scrollToIncrement,toggleTitle:UncannyAutomator.i18n.clickToToggle,amPM:[UncannyAutomator.i18n.format.date.am,UncannyAutomator.i18n.format.date.pm],yearAriaLabel:UncannyAutomator.i18n.format.date.year,monthAriaLabel:UncannyAutomator.i18n.format.date.month,hourAriaLabel:UncannyAutomator.i18n.format.date.hour,minuteAriaLabel:UncannyAutomator.i18n.format.date.minute},parseDate:function(t,e){if(!lt(t)&&!t.includes("}}"))return P.parseDate(t,e)},errorHandler:function(t){e.getValue().includes("}}")||UncannyAutomator.dev.developerMode&&console.warn(t)},onReady:function(t,n,i){try{var o=function(){e.getValue().includes("}}")||e.fieldCM.getValue()!=i.altInput.value&&e.fieldCM.setValue(i.altInput.value)};ct(e.fieldCM)?o():e.field.on("ua-codemirror-ready",(function(){o()}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}},onChange:function(t,n,i){try{var o=function(){e.fieldCM.setValue(i.altInput.value)};ct(e.fieldCM)?o():e.field.on("ua-codemirror-ready",(function(){o()}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}};if("date"==this.attributes.fieldType&&(i=o().extend(i,{dateFormat:this.attributes.dateFormat,altFormat:this.attributes.dateAltFormat}),this.attributes.supportsRange&&(i.mode="range"),ct(this.attributes.minDate)&&(i.minDate=this.attributes.minDate),ct(this.attributes.maxDate)&&(i.maxDate=this.attributes.maxDate)),"time"==this.attributes.fieldType){var r=this.attributes.timeAltFormat.includes("K");i=o().extend(i,{enableTime:!0,noCalendar:!0,dateFormat:this.attributes.timeFormat,altFormat:this.attributes.timeAltFormat,time_24hr:!r}),ct(this.attributes.minTime)&&(i.minTime=this.attributes.minTime),ct(this.attributes.manTime)&&(i.manTime=this.attributes.manTime)}this.flatpickrInstance=t.flatpickr(i)}},{key:"initCodeMirror",value:function(){var t=this;if(["text","url","email","int","float","date","time","textarea"].includes(this.attributes.fieldType)){this.destroyCodeMirror();var e={lineNumbers:!1,tabSize:4,value:this.getValue(),mode:"default",dragDrop:!1,viewportMargin:1/0,lineWrapping:!0,autoRefresh:!0,noNewlines:!0,scrollbarStyle:null,readOnly:this.attributes.isReadOnly};"textarea"==this.attributes.fieldType&&(e=Object.assign(e,{scrollbarStyle:"native",noNewlines:!1}),this.attributes.supportsTinyMCE&&(e=Object.assign(e,{lineNumbers:!0,mode:"htmlmixed",verify_html:!1,inline_styles:!0}))),"textarea"!=this.attributes.fieldType&&(e.extraKeys={Tab:function(){var e=t.getNextField();return ct(e)&&e.focus(),!1}}),this.fieldCM=CodeMirror(this.$fakeCodemirrorField[0],e),this.attributes.hasPlaceholder&&this.fieldCM.setOption("placeholder",this.attributes.placeholder),this.fieldCM.on("changes",(function(e,n){["date","time"].includes(t.attributes.fieldType)||t.setValue(t.fieldCM.getValue(),!0,{updateCodemirror:!1})})),this.fieldCM.on("focus",(function(){if(["date","time"].includes(t.attributes.fieldType))try{setTimeout((function(){t.flatpickrInstance.open()}),50)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}})),this.field.on("focus",(function(){t.fieldCM.focus()})),this.field.trigger("ua-codemirror-ready")}"select"==this.attributes.fieldType&&ct(this.customValueField)&&this.customValueField.initCodeMirror()}},{key:"getNextField",value:function(){var t=null;if(ct(this.attributes.itemId)&&ct(this.attributes.groupId)){var e=UncannyAutomator.recipe.items[this.attributes.itemId].options[this.attributes.groupId].fields;if(ct(e)&&o().isArray(e)){var n=e.indexOf(this);-1!=n&&n!=e.length-1&&(t=e[n+1])}}if(ct(this.attributes.itemType)&&"user-selector"==this.attributes.itemType){var i=UncannyAutomator.recipe.userSelector.fields;if(ct(i)&&o().isArray(i)){var r=i.indexOf(this);-1!=r&&r!=i.length-1&&(t=i[r+1])}}return t}},{key:"focus",value:function(){if(ct(this.field))switch(this.type){case"select":try{this.field.select2("focus")}catch(t){this.field.focus()}break;case"text":case"url":case"email":case"int":case"float":case"date":case"time":ct(this.fieldCM)?this.fieldCM.focus():this.field.focus();break;case"textarea":if(ct(this.fieldTinyMCE))if(this.field.is(":visible"))this.field.focus();else try{this.fieldTinyMCE.focus()}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}else this.field.focus();break;case"checkbox":case"radio":this.field.focus()}}},{key:"destroyCodeMirror",value:function(){if(ct(this.fieldCM))try{var t=this.fieldCM.getWrapperElement();t.parentNode.removeChild(t),this.fieldCM=null}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}},{key:"rerenderSelect2",value:function(){var t=this.getSelect2Settings();!lt(this.field)&&this.field.hasClass("select2-hidden-accessible")&&this.field.select2("destroy").select2(t)}},{key:"initTokenSelector",value:function(){this.attributes.supportsTokens&&(this.destroyTokenSelector(),this.tokenSelector=new et(this,{unsupportedTokens:this.attributes.unsupportedTokens})),"select"==this.attributes.fieldType&&ct(this.customValueField)&&this.customValueField.initTokenSelector()}},{key:"destroyTokenSelector",value:function(){ct(this.tokenSelector)&&this.tokenSelector.destroy()}},{key:"initTinyMCE",value:function(){var t=this;if(this.field,ct(this.field)&&"textarea"==this.attributes.fieldType&&this.attributes.supportsTinyMCE){var e=this.field.prop("id"),n=tinymce.get(e);ct(n)&&wp.editor.remove(e);var i=["charmap","colorpicker","hr","lists","paste","tabfocus","textcolor","fullscreen","link"];this.attributes.supportsFullPageEditing&&i.push("fullpage");var o={mediaButtons:!0,tinymce:{plugins:i.join(" "),toolbar1:["formatselect","bold","italic","bullist","numlist","blockquote","alignleft","aligncenter","alignright","link","unlink","wp_more","strikethrough","hr","forecolor","pastetext","removeformat","visualchars","outdent","indent","undo","redo"].join(" "),height:"350"},quicktags:!0};wp.editor.initialize(e,o),(n=tinymce.get(e)).hidden?this.fieldContainer.addClass("form-textarea--tinymce-text"):this.fieldContainer.addClass("form-textarea--tinymce-visual"),this.formElement.find(".switch-tmce").on("click",(function(){t.field.trigger("ua-tinymce-activate-visual-view"),t.fieldContainer.removeClass("form-textarea--tinymce-text").addClass("form-textarea--tinymce-visual")})),this.formElement.find(".switch-html").on("click",(function(){t.field.trigger("ua-tinymce-activate-text-view"),t.fieldContainer.removeClass("form-textarea--tinymce-visual").addClass("form-textarea--tinymce-text");try{t.fieldCM.setValue(n.getContent({format:"raw"}))}catch(e){t.field.val(n.getContent({format:"raw"}))}t.fieldCM.refresh()})),this.fieldTinyMCE=n,n.on("init",(function(){t.field.trigger("ua-tinymce-ready")}))}}}],n&&at(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const pt=dt},2310:(t,e,n)=>{"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,{Z:()=>r});var o=_uo.utility.isDefined;const r=function(t){return t=JSON.parse(JSON.stringify(t)),t=a(t),["group","repeater"].includes(t.fieldType)&&(t.fields=t.fields.map((function(e){return Object.assign(a(e),{itemType:t.itemType})}))),t};var a=function(t){var e={required:"isRequired",read_only:"isReadOnly",supports_tinymce:"supportsTinyMCE",supports_fullpage_editing:"supportsFullPageEditing",copy_to_clipboard:"supportsCopyToClipboard",is_ajax:"isAjax",option_code:"optionCode",input_type:"fieldType",is_hidden:"isHidden",token_name:"tokenName",default_value:"defaultValue",current_value:"currentValue",max_length:"maxLength",relevant_tokens:"customFieldTokens",date_format:"dateFormat",date_alt_format:"dateAltFormat",supports_range:"supportsRange",min_date:"minDate",max_date:"maxDate",time_format:"timeFormat",supports_tokens:"supportsTokens",time_alt_format:"timeAltFormat",min_time:"minTime",max_time:"maxTime",hide_actions:"hideActions",supports_custom_value:"supportsCustomValue",supports_multiple_values:"supportsMultipleValues",custom_value_description:"customValueDescription",fill_values_in:"targetField",add_row_button:"addRowButtonLabel",remove_row_button:"removeRowButtonLabel",item_type:"itemType",can_sort_rows:"canSortRows",is_toggle:"isToggle",options_show_id:"optionsShowID"};return Object.entries(t).forEach((function(n){var r,a,s=(a=2,function(t){if(Array.isArray(t))return t}(r=n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(r,a)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(r,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],l=s[1];o(e[c])&&(t[e[c]]=l,delete t[c])})),t}},3418:(t,e,n)=>{"use strict";n.d(e,{UJ:()=>o,SS:()=>a,Vh:()=>s,Zh:()=>m});var i=_uo.utility.isDefined;const o=function(t){var e=t.integrationCode,n=null;return i(UncannyAutomator.integrations[e])&&(n=UncannyAutomator.integrations[e]),n};var r=_uo.utility.isDefined;const a=function(t){var e=t.integrationCode,n="";if(r(UncannyAutomator.integrations[e])){var i=UncannyAutomator.integrations[e];r(i.icon_svg)?n=i.icon_svg:r(i.icon_64)&&(n=i.icon_64)}return n},s=function(t){return UncannyAutomator.integrations[t].name};function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u=_uo.utility,d=u.isEmpty,p=u.isDefined;const m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(d(t))return UncannyAutomator.integrations;t=Object.assign({triggers:null,actions:null,conditions:null,customFilter:null},t);var e={};return Object.entries(UncannyAutomator.integrations).map((function(n){var i=c(n,2),o=i[0],r=i[1],a=!0;p(t.customFilter)&&(a=t.customFilter(r)),p(t.triggers)&&(t.triggers&&!r.items.triggers.hasTriggers||!t.triggers&&r.items.triggers.hasTriggers)&&(a=!1),p(t.actions)&&(t.actions&&!r.items.actions.hasActions||!t.actions&&r.items.actions.hasActions)&&(a=!1),p(t.conditions)&&(t.conditions&&!r.conditions.hasConditions||!t.conditions&&r.conditions.hasConditions)&&(a=!1),a&&(e[o]=r)})),e}},515:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(5311),o=n.n(i),r=n(1290),a=n(772),s=n(9973),c=n(6626),l=n(7172);function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=_uo.utility.isDefined;const p=function(){function t(e,n,i,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.integrationID=n,this.itemCode=i,this.itemId=o,this.item=UncannyAutomator.recipe.items[o],this.createItemActions()}var e,n;return e=t,(n=[{key:"createItemActions",value:function(){var t=this,e=o()("<div/>",{class:"item-actions"}),n=o()("<div/>",{class:"item-actions__btn"}),i=o()("<uo-icon/>",{id:"ellipsis-h"}),u=o()("<div/>",{class:"item-actions__dropdown"}),p=o()("<ul/>",{class:"item-actions-dropdown__ul"});n.append(i),e.append(n);var m=o()("<li/>",{class:"item-actions-dropdown__action"}),f=o()("<span/>").text(UncannyAutomator.i18n.delete);if(m.append(f),p.append(m),d(this.itemType)&&d(this.itemCode)&&(!d(this.item)||d(this.item)&&!this.item.isMissing)){var h=(0,r.Vx)(this.integrationID,this.itemType,this.itemCode);if(d(h.support_link)){var g="support_menu_link-".concat(this.integrationID,"-").concat(this.integrationID,"_").concat(this.itemCode,"-").concat(this.integrationID,"_").concat((0,r.hF)(h.select_option_name,"","").toLowerCase().replace(/\s+|{|}/g,"_")),v=o()("<a/>",{href:(0,r.XE)(h.support_link,{medium:"action_menu",content:g}),class:"item-actions-dropdown__action",target:"_blank"}),y=o()("<span/>").text(UncannyAutomator.i18n.support);v.append(y),p.append(v)}}return u.append(p),e.append(u),n.on("click",(function(){e.hasClass("item-actions--open")?(e.removeClass("item-actions--open"),o()(document).off("mouseup.uap-actions-click-outside")):(e.addClass("item-actions--open"),o()(document).on("mouseup.uap-actions-click-outside",(function(t){e.is(t.target)||0!==e.has(t.target).length||(e.removeClass("item-actions--open"),o()(document).off("mouseup.uap-actions-click-outside"))})))})),m.on("click",(function(){if(d(t.itemId)&&UncannyAutomator.recipe.isLive&&UncannyAutomator.recipe.items[t.itemId].isLive){e.removeClass("item-actions--open");var n=new a.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,r.hF)(UncannyAutomator.i18n.confirmationModal.deleteWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});n.setEvents({afterSetEvents:function(){n.show()},onConfirm:function(){n.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0);var e={ID:t.itemId};(0,r.L8)("delete",e,(function(){n.destroy(),"trigger"==t.itemType&&(new s.Z,UncannyAutomator.cache.tokens=[],"anonymous"==UncannyAutomator.recipe.type&&new c.Z),"action"!=t.itemType&&"closure"!=t.itemType||(new c.Z,(0,l.Q9)()),UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){n.destroy(),console.log("‼️ ERROR-TODO. Couldn't delete the item"),"trigger"==t.itemType&&new s.Z,"action"!=t.itemType&&"closure"!=t.itemType||new c.Z}))},afterHide:function(){n.destroy()}})}else if(d(t.itemId)){m.addClass("item-actions-dropdown__action--loading");var i={ID:t.itemId};(0,r.L8)("delete",i,(function(){"trigger"==t.itemType&&(new s.Z,UncannyAutomator.cache.tokens=[],"anonymous"==UncannyAutomator.recipe.type&&new c.Z),"action"!=t.itemType&&"closure"!=t.itemType||(new c.Z,(0,l.Q9)({}))}),(function(){console.log("‼️ ERROR-TODO. Couldn't delete the item"),"trigger"==t.itemType&&new s.Z,"action"!=t.itemType&&"closure"!=t.itemType||new c.Z}))}else"trigger"==t.itemType&&new s.Z,"action"==t.itemType&&new c.Z})),e}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},6626:(t,e,n)=>{"use strict";n.d(e,{Z:()=>pt});var i=n(5311),o=n.n(i),r=n(1290),a=n(3198),s=n(7109),c=n(2593),l=n(8027);function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=_uo.utility,p=(d.isDefined,d.isEmpty);d.addParametersToURL;const m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),UncannyAutomator.recipe.userSelector.step=(0,r.Cn)("get-step"),this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){var t="";switch(UncannyAutomator.recipe.userSelector.step){case"select-source":UncannyAutomator.recipe.userSelector.isValid=!1,(0,r.Tm)("validate"),t=this.getSelectSourceNodes();break;case"set-options":t=this.getOptionsNodes();break;case"show-sentence":(0,r.Tm)("validate"),UncannyAutomator.recipe.errorMode=!1,new c.Z,t=this.getSentenceNodes()}(0,r.M0)("metabox",{type:"action"}).prepend(t)}},{key:"getSelectSourceNodes",value:function(){var t=o()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t</div>\t\n\t\t'));return t.append(this.createItem()),t.find(".uap-item-inner-content").append(o()('\n\t\t\t<div class="item-integrations">\n\t\t\t\t<div class="item-integration user-selector-option user-selector-option--existing-user" data-source="existingUser">\n\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.userType.existing,'\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="item-integration user-selector-option user-selector-option--new-user" data-source="newUser">\n\t\t\t\t\t<div class="item-integration__logo"></div>\n\t\t\t\t\t<div class="item-integration__name">\n\t\t\t\t\t\t').concat(UncannyAutomator.i18n.userSelector.userType.new,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"))),t.find(".user-selector-option").on("click",(function(t){var e=o()(t.currentTarget).data("source");(0,r.Cn)("set-source",{source:e}),UncannyAutomator.recipe.userSelector.step="set-options",new pt})),t}},{key:"getOptionsNodes",value:function(){var t=o()('\n\t\t\t<div class="user-selector '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t</div>\n\t\t'));return t.prepend(this.createItem()),t.find(".uap-item-inner-content").append(o()('<div class="item-options"></div>')),t.find(".item-options").append(this.getOptionsFields()),t}},{key:"getOptionsFields",value:function(){var t=o()("<div></div>"),e=o()('<div class="item-options__group"></div>'),n=[];(0,r.Cn)("update-fields",{source:"existingUser",data:{}}),(0,r.Cn)("update-fields",{source:"newUser",data:{}});var i=UncannyAutomator.recipe.userSelector.resources.roles;switch(delete i.administrator,UncannyAutomator.recipe.userSelector.source){case"existingUser":var a=o()('<div class="user-selector__field-group user-selector__field-group--two-columns"></div>'),c=new s.Z("select",{itemType:"user-selector",optionCode:"uniqueField",label:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField,isRequired:!0,optionsShowID:!1,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionEmail},{value:"id",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionId},{value:"username",text:UncannyAutomator.i18n.userSelector.existingUser.uniqueFieldOptionUsername}]});n.push(c);var l=new s.Z("text",{itemType:"user-selector",optionCode:"uniqueFieldValue",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue,label:UncannyAutomator.i18n.userSelector.existingUser.valueFieldLabel,isRequired:!0,supportsTokens:!0});n.push(l);var u=c.getFormElement();l.initTokenSelector(),l.initCodeMirror(),a.append(u);var d=l.getFormElement();a.append(d),e.append(a);var m=new s.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-existing-user-fallback",label:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.fallback,options:[{value:"create-new-user",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionCreateUser},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.existingUser.createNewUserFieldOptionDoNothing}]});n.push(m);var f=m.getFormElement();if(e.append(f),u.on("automator:field:change",(function(){(0,r.Cn)("update-fields",{source:"existingUser",data:{uniqueField:c.getValue()}})})),d.on("automator:field:change",(function(){(0,r.Cn)("update-fields",{source:"existingUser",data:{uniqueFieldValue:l.getValue()}})})),f.on("automator:field:change",(function(){(0,r.Cn)("update-fields",{source:"existingUser",data:{fallback:m.getValue()}}),new pt})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var h=o()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.existingUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));e.append(h)}else if("create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback){var g=o()("<div/>",{class:"item-options"});[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.existingUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:p(UncannyAutomator.recipe.userSelector.data.existingUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.existingUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,optionsShowID:!1,options:Object.keys(i).map((function(t,e){return{value:t,text:i[t]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?p(UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.existingUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(t){var e=new s.Z(t.fieldType,t),i=e.getFormElement();g.append(i),e.initTokenSelector(),e.initCodeMirror(),n.push(e)})),e.append(g)}break;case"newUser":[{itemType:"user-selector",fieldType:"text",optionCode:"firstName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.firstName,label:UncannyAutomator.i18n.userSelector.newUser.firstName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"lastName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.lastName,label:UncannyAutomator.i18n.userSelector.newUser.lastName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"email",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.email,label:UncannyAutomator.i18n.userSelector.newUser.email,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"username",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.username,label:UncannyAutomator.i18n.userSelector.newUser.username,isRequired:!0,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"displayName",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.displayName,label:UncannyAutomator.i18n.userSelector.newUser.displayName,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"text",optionCode:"password",currentValue:UncannyAutomator.recipe.userSelector.data.newUser.password,label:UncannyAutomator.i18n.userSelector.newUser.password,description:UncannyAutomator.i18n.userSelector.newUser.passwordDescription,isRequired:!1,supportsTokens:!0},{itemType:"user-selector",fieldType:"select",optionCode:"role",currentValue:p(UncannyAutomator.recipe.userSelector.data.newUser.role)?"subscriber":UncannyAutomator.recipe.userSelector.data.newUser.role,label:UncannyAutomator.i18n.userSelector.newUser.role,isRequired:!0,supportsTokens:!1,optionsShowID:!1,options:Object.keys(i).map((function(t,e){return{value:t,text:i[t]}}))},{itemType:"user-selector",fieldType:"radio",optionCode:"logUserIn",name:"logUserIn",currentValue:UncannyAutomator.recipe.canLogNewUserIn?p(UncannyAutomator.recipe.userSelector.data.newUser.logUserIn)?"no":UncannyAutomator.recipe.userSelector.data.newUser.logUserIn:"no",isHidden:!UncannyAutomator.recipe.canLogNewUserIn,label:UncannyAutomator.i18n.userSelector.logUserIn,supportsTokens:!1,options:[{value:"yes",text:UncannyAutomator.i18n.yes},{value:"no",text:UncannyAutomator.i18n.no}]}].forEach((function(t){var i=new s.Z(t.fieldType,t),o=i.getFormElement();e.append(o),i.initTokenSelector(),i.initCodeMirror(),n.push(i)}));var v=new s.Z("radio",{itemType:"user-selector",optionCode:"fallback",name:"user-selector-new-user-fallback",label:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldLabel,isRequired:!0,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.fallback,options:[{value:"select-existing-user",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionExisting},{value:"do-nothing",text:UncannyAutomator.i18n.userSelector.newUser.existingUserFieldOptionDoNothing}]});n.push(v);var y=v.getFormElement();if(e.append(y),y.on("automator:field:change",(function(){var t={};n.forEach((function(e){t[e.getAttributes().optionCode]=e.getValue()})),(0,r.Cn)("update-fields",{source:"newUser",data:t}),new pt})),"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var b=o()('\n\t\t\t\t\t\t<div class="user-selector__warning">\n\t\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.userSelector.newUser.doNothingMessage,"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"));e.append(b)}else if("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback){var _=o()("<div/>",{class:"item-options"}),w=new s.Z("select",{itemType:"user-selector",optionCode:"prioritizedField",label:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldLabel,currentValue:UncannyAutomator.recipe.userSelector.data.newUser.prioritizedField,defaultValue:"email",description:UncannyAutomator.i18n.userSelector.newUser.prioritizedFieldDescription,isRequired:!0,optionsShowID:!1,options:[{value:"email",text:UncannyAutomator.i18n.userSelector.newUser.email},{value:"username",text:UncannyAutomator.i18n.userSelector.newUser.username}]});n.push(w);var A=w.getFormElement();_.append(A),e.append(_)}}UncannyAutomator.recipe.userSelector.fields=n,t.append(e);var k=o()('<div class="item-options__buttons"></div>'),C=o()('<div class="uap-btn uap-btn--primary">'.concat(UncannyAutomator.i18n.save,"</div>")),T=o()('<div class="uap-btn uap-btn--secondary">'.concat(UncannyAutomator.i18n.cancel,"</div>"));return C.on("click",(function(){var t=!0,e={};n.forEach((function(n){var i=n.validate().isValid;t=t&&i,i&&(e[n.getAttributes().optionCode]=n.getValue())})),(0,r.Cn)("update-fields",{source:UncannyAutomator.recipe.userSelector.source,data:e}),t&&(C.addClass("uap-btn--primary uap-btn--loading uap-btn--disabled"),(0,r.L8)("user-selector",{recipeId:UncannyAutomator.recipe.id,source:UncannyAutomator.recipe.userSelector.source,data:UncannyAutomator.recipe.userSelector.data[UncannyAutomator.recipe.userSelector.source]},(function(t){UncannyAutomator.recipe.userSelector.isValid=!0,(0,r.Cn)("set-step",{step:"show-sentence"}),new pt}),(function(t){})))})),T.on("click",(function(){(0,r.Cn)("set-step",{step:"select-source"}),new pt})),k.append(C),k.append(T),t.append(k),t}},{key:"getSentenceNodes",value:function(){var t=o()('\n\t\t\t<div class="user-selector user-selector--summary '.concat(UncannyAutomator.recipe.requiresUserData?"user-selector--show":"",'">\n\t\t\t</div>\n\t\t'));t.prepend(this.createItem()),t.find(".uap-item-inner-content").append(o()('<div class="user-selector-summary"></div>'));var e=t.find(".user-selector-summary"),n=o()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<uo-icon id="atom"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),i=o()('\n\t\t\t<div class="user-selector-summary-row__token"></div>\n\t\t');n.find(".user-selector-summary-row__content").append(i),"existingUser"==UncannyAutomator.recipe.userSelector.source?i.text(UncannyAutomator.i18n.userSelector.userType.existing):"newUser"==UncannyAutomator.recipe.userSelector.source&&i.text(UncannyAutomator.i18n.userSelector.userType.new),i.on("click",(function(){(0,r.Cn)("set-step",{step:"select-source"}),new pt})),e.append(n);var s,c=o()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<uo-icon id="fingerprint"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),u=UncannyAutomator.recipe.userSelector.data.existingUser.uniqueFieldValue;try{u=new l.Z("user-selector").renderTextWithTokens(u).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if("existingUser"==UncannyAutomator.recipe.userSelector.source)s=o()("\n\t\t\t\t<div>\n\t\t\t\t".concat((0,a.gB)(UncannyAutomator.i18n.userSelector.summary.matches,'<div class="user-selector-summary-row__token">'.concat(UncannyAutomator.i18n.userSelector.summary[UncannyAutomator.recipe.userSelector.data.existingUser.uniqueField],"</div>"),'<div class="user-selector-summary-row__token">'.concat(u,"</div>")),"\n\t\t\t\t</div>"));else if("newUser"==UncannyAutomator.recipe.userSelector.source){var d=UncannyAutomator.recipe.userSelector.data.newUser.email;try{d=new l.Z("user-selector").renderTextWithTokens(d).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}s=o()("\n\t\t\t\t<div>\n\t\t\t\t".concat((0,a.gB)(UncannyAutomator.i18n.userSelector.summary.withEmail,'<div class="user-selector-summary-row__token">'.concat(d,"</div>")),"\n\t\t\t\t</div>\n\t\t\t\t"))}c.find(".user-selector-summary-row__content").append(s),s.find(".user-selector-summary-row__token").on("click",(function(){(0,r.Cn)("set-step",{step:"set-options"}),new pt})),e.append(c);var p=o()('\n\t\t\t<div class="user-selector-summary-row">\n\t\t\t\t<div class="user-selector-summary-row__icon">\n\t\t\t\t\t<uo-icon id="directions"></uo-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="user-selector-summary-row__content"></div>\n\t\t\t</div>\n\t\t'),m="";"existingUser"==UncannyAutomator.recipe.userSelector.source?"create-new-user"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback?m=UncannyAutomator.i18n.userSelector.summary.createNewUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.existingUser.fallback&&(m=UncannyAutomator.i18n.userSelector.summary.doNothing):"newUser"==UncannyAutomator.recipe.userSelector.source&&("select-existing-user"==UncannyAutomator.recipe.userSelector.data.newUser.fallback?m=UncannyAutomator.i18n.userSelector.summary.selectExistingUser:"do-nothing"==UncannyAutomator.recipe.userSelector.data.newUser.fallback&&(m=UncannyAutomator.i18n.userSelector.summary.doNothing));var f=o()("\n\t\t\t<div>\n\t\t\t".concat((0,a.gB)(UncannyAutomator.i18n.userSelector.summary.otherwise,'<div class="user-selector-summary-row__token">'.concat(m,"</div>")),"\n\t\t\t</div>"));return p.find(".user-selector-summary-row__content").append(f),p.find(".user-selector-summary-row__token").on("click",(function(){(0,r.Cn)("set-step",{step:"set-options"}),new pt})),e.append(p),t}},{key:"createItem",value:function(){var t={stepTitle:"set-options"==UncannyAutomator.recipe.userSelector.step?UncannyAutomator.i18n.userSelector.setOptions:UncannyAutomator.i18n.userSelector.sentenceTitle,supportUrl:(0,r.XE)("https://automatorplugin.com/knowledge-base/anonymous-recipes/#Introducing_the_User_Selector",{medium:"user_selector",content:"support_menu_link"})},e=document.createElement("div");return e.classList.add("uap-item","uap-item--user-selector","item","item--user-selector"),e.innerHTML='\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar">\n\t\t\t\t\t<ua-builder-integration-icon code="UOA"></ua-builder-integration-icon>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-top-header">\n\t\t\t\t\t<div class="uap-item-top-header-left">\n\t\t\t\t\t\t'.concat(t.stepTitle,'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="uap-item-top-header-right">\n\t\t\t\t\t\t<uo-dropdown align="right" items-close-dropdown>\n\t\t\t\t\t\t\t<uo-icon id="ellipsis-h" slot="button"></uo-icon>\n\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<a href="').concat(t.supportUrl,'" target="_blank">\n\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.support,'\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</uo-dropdown>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-inner-content"></div>\n\t\t\t</div>\n\t\t'),e}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var f=n(2841),h=n(3911),g=n(7464);function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var b=y((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=document.createElement("div");e.classList.add("item","uap-item","uap-item--actions-initial"),e.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar">\n\t\t\t\t\t<div class="uap-item-icon"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-main">\n\t\t\t\t\t<div class="uap-btn uap-btn--secondary uap-btn--small">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.action.add,"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),(0,r.M0)("metabox",{type:"action"}).get(0).appendChild(e),e.querySelector(".uap-btn").addEventListener("click",(function(){new g.Z("action")}))})),_=n(515),w=n(9214),A=n(8104),k=n(5865);function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var T=_uo.utility.isDefined;const U=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={$metabox:(0,r.M0)("metabox",{type:"action"})},o().each(UncannyAutomator.closures,(function(t,i){return n.createClosure(i,e)}))}var e,n;return e=t,(n=[{key:"createClosure",value:function(t,e){var n=!1,i=o()('\n\t\t\t<div class="metabox__footer metabox__closures"></div>\n\t\t'),a={label:e,formElementClass:"form-element--nomargin"},c=this.getClosureByCodeFromItemsObject(t.code);T(c)&&(n=!0,a.currentValue=!0,a.itemid=c.id);var l=new s.Z("checkbox",a),u=l.getFormElement();u.on("change",(function(){var e=l.getValue();l.startLoadingAnimation(),e?(0,r.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:"add-new-closure",item_code:t.code,default_meta:{integration_name:UncannyAutomator.integrations[t.integration].name,sentence:t.sentence}},(function(t){new pt,T(t.post_ID)&&(0,r.M0)("item",{id:t.post_ID}).item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(t){console.log("‼️ ERROR-TODO. Couldn't add the closure"),l.stopLoadingAnimation(),l.setValue(!1,!1)})):(0,r.L8)("delete",{ID:c.id},(function(){new pt}),(function(){console.log("‼️ ERROR-TODO. Couldn't delete the closure"),new pt}))})),i.append(u);var d=o()("<div/>",{class:"uo-toggle uo-toggle--show"});if(n){d.addClass("uo-toggle--show");var p=o()("<div/>",{class:"item item--closure item--margintop uap-item uap-item--closure uap-item--margintop","data-id":c.id});p.append(this.createInnerContent(UncannyAutomator.recipe.items[c.id].integrationCode,"closure",t.code,c.id)),d.append(p)}i.append(d),this.elements.$metabox.append(i)}},{key:"createInnerContent",value:function(t,e,n,i){var o={$icon:new w.Z(t),$integrationNameTag:new A.Z({integrationId:t}),$actionMenu:new _.Z(e,t,n,i),$sentence:new k.Z(e,t,n,i)},r=document.createElement("div");return r.classList.add("uap-item-inner"),r.innerHTML='\n\t\t\t<div class="uap-item-sidebar"></div>\n\t\t\t<div class="uap-item-top-header">\n\t\t\t\t<div class="uap-item-top-header-left"></div>\n\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t</div>\n\t\t\t<div class="uap-item-main"></div>\n\t\t\t<div class="uap-item-inner-content"></div>\n\t\t',r.querySelector(".uap-item-sidebar").appendChild(o.$icon),r.querySelector(".uap-item-top-header-left").appendChild(o.$integrationNameTag),r.querySelector(".uap-item-top-header-right").appendChild(o.$actionMenu.get(0)),r.querySelector(".uap-item-main").appendChild(o.$sentence.get(0)),r}},{key:"getClosureByCodeFromItemsObject",value:function(t){var e;return o().each(UncannyAutomator.recipe.items,(function(n,i){i.itemCode==t&&(e=i)})),e}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var E=n(7172),x=(n(4900),n(4248)),D=n(8500);function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function I(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var $=_uo.utility.isDefined,P=new WeakSet,L=new WeakSet,j=new WeakSet,F=new WeakSet,R=new WeakSet,V=new WeakSet,N=new WeakSet,q=new WeakSet,H=new WeakSet,B=new WeakSet,W=new WeakSet,z=function(){function t(e){var n=e.conditionsGroupId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,W),O(this,B),O(this,H),O(this,q),O(this,N),O(this,V),O(this,R),O(this,F),O(this,j),O(this,L),O(this,P),this.conditionsGroupId=n;var i=(0,E.lj)({conditionsGroupId:n});$(i)&&(this.conditionsGroup=i,this.conditionsGroup.hasActions&&I(this,P,Z).call(this))}var e,n;return e=t,(n=[{key:"$addConditionButton",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-add-condition-btn")}},{key:"$conditionPillsWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-content")}},{key:"$logicHeader",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header")}},{key:"$logicHeaderModeWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header-mode")}},{key:"$logicHeaderDropdownWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header-dropdown")}},{key:"$logicOperatorSelect",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-header uo-select")}},{key:"$logicFooter",get:function(){return this.$block.querySelector(".uap-conditions-block-logic-footer")}},{key:"$actionsWrapper",get:function(){return this.$block.querySelector(".uap-conditions-block-actions")}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Z(){var t=document.createElement("div");t.classList.add("uap-conditions-block"),this.$block=t,t.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-conditions-block-logic">\n\t\t\t\t<div class="uap-conditions-block-logic-header">\n\t\t\t\t\t<div class="uap-conditions-block-logic-header-mode"></div>\n\t\t\t\t\t<div class="uap-conditions-block-logic-header-dropdown"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-conditions-block-logic-content"></div>\n\t\t\t\t<div class="uap-conditions-block-logic-footer"></div>\n\t\t\t</div>\n\t\t\t<div class="uap-conditions-block-actions"></div>\n\t\t'),(0,E.a9)()||(this.$block.classList.add("uap-conditions-block--cannot-manage"),this.$block.setAttribute("disabled","")),I(this,j,Y).call(this),I(this,F,K).call(this),I(this,B,nt).call(this),I(this,R,J).call(this),I(this,W,it).call(this),I(this,V,X).call(this),I(this,L,G).call(this),I(this,H,et).call(this)}function G(){this.conditionsGroup.hasActions&&(0,r.M0)("item",{id:this.conditionsGroup.actions[0]}).item.get(0).insertAdjacentElement("beforeBegin",this.$block)}function Y(){if(this.conditionsGroup.numberOfConditions<=1)this.$logicHeaderModeWrapper.insertAdjacentHTML("beforeEnd","\n\t\t\t\t".concat(UncannyAutomator.i18n.conditions.runIf,"\n\t\t\t"));else if(this.conditionsGroup.numberOfConditions>1){var t=this.conditionsGroup.mode,e=UncannyAutomator.i18n.conditions.runIfAnyFull.replaceAll(/\{\{(.*)\}\}/gm,(function(t,e){return"<span>".concat(e,"</span>")})),n=(0,a.gB)(e,'\n\t\t\t\t<uo-select>\n\t\t\t\t\t<uo-select-option\n\t\t\t\t\t\tvalue="any"\n\t\t\t\t\t\ttext="'.concat(UncannyAutomator.i18n.conditions.any,'"\n\t\t\t\t\t\t').concat("any"==t?"selected":"",'\n\t\t\t\t\t></uo-select-option>\n\n\t\t\t\t\t<uo-select-option\n\t\t\t\t\t\tvalue="all"\n\t\t\t\t\t\ttext="').concat(UncannyAutomator.i18n.conditions.all,'"\n\t\t\t\t\t\t').concat("all"==t?"selected":"","\n\t\t\t\t\t></uo-select-option>\n\t\t\t\t</uo-select>\n\t\t\t"));this.$logicHeaderModeWrapper.insertAdjacentHTML("beforeEnd",n),I(this,N,Q).call(this)}}function K(){var t=this;this.$logicHeaderDropdownWrapper.innerHTML='\n\t\t\t<uo-dropdown align="right">\n\t\t\t\t<uo-icon id="ellipsis-h" slot="button"></uo-icon>\n\n\t\t\t\t<ul>\n\t\t\t\t\t<li data-action="delete">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.delete,"\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</uo-dropdown>\n\t\t"),this.$logicHeaderDropdownWrapper.querySelector("uo-dropdown").addEventListener("automator/dropdown/item-clicked",(function(e){"delete"==e.detail.item.dataset.action&&(e.detail.item.setAttribute("loading",""),t.conditionsGroup.destroy(),(0,E.Q9)({}))}))}function J(){(0,E.a9)()&&(this.$logicFooter.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t<uo-button \n\t\t\t\t\tsize="extra-small"\n\t\t\t\t\tclass="uap-conditions-block-logic-add-condition-btn"\n\t\t\t\t>\n\t\t\t\t\t<uo-icon id="plus"></uo-icon>'.concat(UncannyAutomator.i18n.conditions.addBtnLabel,"\n\t\t\t\t</uo-button>\n\t\t\t")),I(this,q,tt).call(this))}function X(){if(!(0,E.a9)()){var t=1==this.conditionsGroup.numberOfActions?UncannyAutomator.i18n.conditions.actionWontRun:UncannyAutomator.i18n.conditions.actionsWontRun,e=1==this.conditionsGroup.numberOfActions?UncannyAutomator.i18n.conditions.actionWontRunContent:UncannyAutomator.i18n.conditions.actionsWontRunContent;this.$actionsWrapper.insertAdjacentHTML("beforeBegin",'\n\t\t\t\t<div class="uap-conditions-block-warning">\n\t\t\t\t\t<uo-alert \n\t\t\t\t\t\ttype="warning" \n\t\t\t\t\t\theading="'.concat(t,'" \n\t\t\t\t\t\tno-radius\n\t\t\t\t\t>\n\t\t\t\t\t\t').concat((0,a.gB)(e,"<strong>".concat(UncannyAutomator.i18n.uncannyAutomatorPro,"</strong>")),"\n\t\t\t\t\t</uo-alert>\n\t\t\t\t</div>\n\t\t\t"))}}function Q(){var t=this;this.$logicOperatorSelect.addEventListener("change",(function(){var e=t.$logicOperatorSelect.value;t.conditionsGroup.mode=e,(0,E.Q9)({})}))}function tt(){var t=this;(0,E.a9)()&&this.$addConditionButton.addEventListener("click",(function(){new D.Z({conditionsGroupId:t.conditionsGroupId,comingFrom:"conditions-block-add-condition-button"})}))}function et(){var t=this;this.conditionsGroup.actions.forEach((function(e){var n=(0,r.M0)("item",{id:e}).item.get(0);t.$actionsWrapper.appendChild(n)}))}function nt(){var t=this;this.conditionsGroup.hasConditions?Object.entries(this.conditionsGroup.conditions).forEach((function(e){var n,i,o=(i=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(n,i)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0];o[1],t.$conditionPillsWrapper.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t\t<ua-builder-condition-pill\n\t\t\t\t\t\tcondition-group-id="'.concat(t.conditionsGroupId,'"\n\t\t\t\t\t\tcondition-id="').concat(r,'"\n\t\t\t\t\t></ua-builder-condition-pill>\n\t\t\t\t'))})):this.$conditionPillsWrapper.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t<span class="uap-conditions-block-logic-content-empty">\n\t\t\t\t\t'.concat(UncannyAutomator.i18n.conditions.noConditions,"\n\t\t\t\t</span>\n\t\t\t"))}function it(){if((0,x.Z)()){var t=document.createElement("div");t.classList.add("uap-conditions-block-drag-handle"),t.innerHTML='<uo-icon id="sort-circle"></uo-icon>',this.$block.insertAdjacentElement("afterBegin",t)}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function rt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var at=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,E.NS)()&&this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){Object.entries(UncannyAutomator.recipe.conditions).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||function(t,e){if(t){if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0];i[1],new z({conditionsGroupId:o})}))}}])&&rt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ct=_uo.utility,lt=ct.isDefined,ut=ct.isEmpty,dt=(ct.debounce,ct.getURLParameter),pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,r.M0)("metabox",{type:"action"}).empty(),"anonymous"==UncannyAutomator.recipe.type&&new m;var e=(0,r.Wr)("get",{filter:{itemType:"action"}});if(!ut(e)&&lt(UncannyAutomator.wp)&&UncannyAutomator.wp){var n=(0,r.p5)(e,"async_mode",!1),i=(0,r.PT)(e,"async_mode","delay"),o=(0,r.PT)(e,"async_mode","schedule");ut(i)&&ut(o)?(this.metaboxItems=new f.Z("action",n,!0),new h.Z("action"),this.isContinuingIntegrationConnection()&&new g.Z("action"),new U(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):(ut(n)||(this.metaboxItems=new f.Z("action",n,!0)),new h.Z("action"),this.isContinuingIntegrationConnection()&&new g.Z("action"),new U(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly),this.metaboxItems=new f.Z("action",i,!1),this.metaboxItems=new f.Z("action",o,!1))}else ut(e)?(new b,this.isContinuingIntegrationConnection()&&new g.Z("action"),new U(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly)):(this.metaboxItems=new f.Z("action",e,!0),new h.Z("action"),this.isContinuingIntegrationConnection()&&new g.Z("action"),new U(UncannyAutomator.i18n.action.asyncActions.closuresLabelAsyncOnly));new at;try{this.metaboxItems.makeSortable()}catch(t){}}var e,n;return e=t,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==dt(null,"ua_connecting_integration")&&"action"==dt(null,"ua_connecting_integration_context")}}])&&st(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2431:(t,e,n)=>{"use strict";n.d(e,{Z:()=>T});var i=n(938),o=n(7172),r=n(3418);function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=_uo.utility,c=s.isDefined,l=s.getUniqueID,u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.integrationCode="",this.conditionCode="",this.fields={},this.backup={},this.conditionsGroup=void 0,this.id=l()}var e,n;return e=t,(n=[{key:"isMissing",get:function(){return!c(this.conditionPostData)}},{key:"formattedForMeta",get:function(){return{integration:this.integrationCode,condition:this.conditionCode,fields:this.fields,backup:this.isMissing?this.backup:{nameDynamic:this.conditionPostData.dynamic_name,integrationName:this.integration.name}}}},{key:"$dynamicSentence",get:function(){return(0,i.d)({dynamicSentence:this.isMissing?this.backup.nameDynamic:this.conditionPostData.dynamic_name,fields:this.fields})}},{key:"conditionPostData",get:function(){return(0,o.m9)({integrationCode:this.integrationCode,conditionCode:this.conditionCode})}},{key:"integration",get:function(){return(0,r.UJ)({integrationCode:this.integrationCode})}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),d=n(3599);function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function h(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,v(t,e,"set"),n),n}function g(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,v(t,e,"get"))}function v(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var y=_uo.utility,b=y.isDefined,_=y.isEmpty,w=y.getUniqueID,A=new WeakMap,k=new WeakMap,C=new WeakMap,T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,A,{writable:!0,value:"any"}),f(this,k,{writable:!0,value:[]}),f(this,C,{writable:!0,value:{}}),this.id=w(),UncannyAutomator.recipe.conditions[this.id]=this}var e,n;return e=t,(n=[{key:"addCondition",value:function(t){var e=t.integrationCode,n=t.conditionCode,i=t.fields,o=t.backup,r=void 0===o?{}:o,a=new u;return a.integrationCode=e,a.conditionCode=n,a.fields=i,a.backup=r,a.conditionsGroup=this,g(this,C)[a.id]=a,a}},{key:"removeCondition",value:function(t){var e=t.conditionId;b(this.conditions[e])&&delete g(this,C)[e]}},{key:"editCondition",value:function(t){var e=t.conditionId;new d.Z({conditionsGroupId:this.id,conditionId:e,comingFrom:"edit-condition-pill"})}},{key:"mode",get:function(){return g(this,A)},set:function(t){["all","any"].includes(t)?h(this,A,t):h(this,A,"any")}},{key:"actions",get:function(){return h(this,k,g(this,k).filter((function(t){return b(UncannyAutomator.recipe.items[t])}))),g(this,k)},set:function(t){var e=this;h(this,k,[]);try{t.forEach((function(t){b(UncannyAutomator.recipe.items[t])&&g(e,k).push(t)}))}catch(t){UncannyAutomator.dev.developerMode&&console.error("ConditionsGroup: Couldn't set the actions. Make sure the array is valid.")}}},{key:"conditions",get:function(){return g(this,C)},set:function(t){var e=this;h(this,C,{});try{t.forEach((function(t){e.addCondition({integrationCode:t.integration,conditionCode:t.condition,fields:t.fields,backup:t.backup})}))}catch(t){UncannyAutomator.dev.developerMode&&(console.error("ConditionsGroup: Couldn't set the conditions. Make sure the array is valid."),console.error(t))}}},{key:"formattedForMeta",get:function(){var t={};return t={actions:this.actions,mode:this.mode,conditions:[]},Object.entries(this.conditions).forEach((function(e){var n,i,o=(i=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(n,i)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=(o[0],o[1]);t.conditions.push(r.formattedForMeta)})),t}},{key:"hasAction",value:function(t){return this.actions.includes(t)}},{key:"hasCondition",value:function(t){return b(this.conditions[t])}},{key:"getCondition",value:function(t){return this.conditions[t]}},{key:"destroy",value:function(){delete UncannyAutomator.recipe.conditions[this.id]}},{key:"hasActions",get:function(){return!_(this.actions)}},{key:"hasConditions",get:function(){return!_(this.conditions)}},{key:"numberOfActions",get:function(){return Object.keys(this.actions).length}},{key:"numberOfConditions",get:function(){return Object.keys(this.conditions).length}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},8500:(t,e,n)=>{"use strict";n.d(e,{Z:()=>S});var i=n(9392),o=n(8036),r=n(6126),a=n(938),s=n(3418),c=n(7172);const l=function(){return"anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData};var u=n(3692),d=n(875);class p extends d.Xe{constructor(t){if(super(t),this.it=u.Ld,t.type!==d.pX.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===u.Ld||null==t)return this.ft=void 0,this.it=t;if(t===u.Jb)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this.ft;this.it=t;const e=[t];return e.raw=e,this.ft={_$litType$:this.constructor.resultType,strings:e,values:[]}}}p.directiveName="unsafeHTML",p.resultType=1;const m=(0,d.XM)(p);var f,h=_uo.utility.isString;const g=function(t){var e=t.summary,n=void 0===e?"":e,o=t.box,r=void 0===o?"":o,a=t.description,s=void 0===a?"":a,c=document.createElement("div");return document.body.append(c),new Promise((function(t,e){var o,a;(0,i.sY)((0,i.dy)(f||(o=["\n\t\t\t\t<ua-builder-user-selector-set-data-dialog\n\t\t\t\t\t@automator_user-selector_request-data-dialog_confirm_success=","\n\n\t\t\t\t\t@automator_user-selector_request-data-dialog_confirm_fail=","\n\n\t\t\t\t\t@automator_user-selector_request-data-dialog_cancel=",'\n\t\t\t\t>\n\n\t\t\t\t\t<div slot="summary">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div slot="box">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div slot="description">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\n\t\t\t\t</ua-builder-user-selector-set-data-dialog>\n\t\t\t"],a||(a=o.slice(0)),f=Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(a)}}))),(function(){t()}),(function(){e()}),(function(){e()}),h(n)?m(n):n,h(r)?m(r):r,h(s)?m(s):s),c,{host:void 0})}))};var v,y,b,_,w=n(3599);function A(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function k(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function T(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function U(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,x(t,e,"get"))}function x(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var D=_uo.utility.isDefined,M=new WeakMap,S=function(){function t(e){var n,i,o,a=e.conditionsGroupId,s=e.comingFrom;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$dialog=(0,r.V)(),o={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,i=M),i.set(n,o),this.conditionsGroupId=a,this.comingFrom=s,this.render()}var e,n,u,d;return e=t,n=[{key:"render",value:function(){var t=this;(0,i.sY)((0,i.dy)(v||(v=T(['\n\t\t\t\t<uo-dialog\n\t\t\t\t\theading="','"\n\t\t\t\t\tsize="large"\n\t\t\t\t\topen\n\n\t\t\t\t\t','\n\t\t\t\t>\n\t\t\t\t\t<div class="uap-conditions-list">\n\t\t\t\t\t\t<uo-accordion\n\t\t\t\t\t\t\tlist-search\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t.searchPlaceholder="','"\n\t\t\t\t\t\t\t.noResultsText="','"\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t','\n\n\t\t\t\t\t\t</uo-accordion>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot="secondary-action"\n\t\t\t\t\t\tdialog-action="close"\n\t\t\t\t\t\tcolor="secondary"\n\t\t\t\t\t>\n\t\t\t\t\t\t',"\n\t\t\t\t\t</uo-button>\n\t\t\t\t</uo-dialog>\n\t\t\t"])),UncannyAutomator.i18n.conditions.condition,(0,r.i)(this.$dialog),UncannyAutomator.i18n.conditions.searchConditions,UncannyAutomator.i18n.conditions.noConditionsFound,(0,o.r)(this.integrations,(function(t){var e=k(t,2),n=e[0];return e[1],n}),(function(e){var n=k(e,2),r=n[0],s=n[1];return(0,i.dy)(y||(y=T(["\n\t\t\t\t\t\t\t\t\t\t<uo-accordion-item\n\t\t\t\t\t\t\t\t\t\t\t?open=",'\n\t\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t\t\t<div slot="summary">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-conditions-list-item-integration">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ua-builder-integration-icon\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode="','"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize="xsmall"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplain\n\t\t\t\t\t\t\t\t\t\t\t\t\t></ua-builder-integration-icon>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t","\n\n\t\t\t\t\t\t\t\t\t\t</uo-accordion-item>\n\t\t\t\t\t\t\t\t\t"])),t.integrationOpenByDefault(r),r,s.name,(0,o.r)(Object.entries((0,c.mO)({integrationCode:r,filters:{deprecated:!1}})),(function(t){var e=k(t,2),n=e[0];return e[1],n}),(function(e){var n=k(e,2),o=n[0],s=n[1];return(0,i.dy)(b||(b=T(["\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uo-accordion-item-li\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t@click=",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="uap-conditions-list-item-sentence">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</uo-accordion-item-li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t"])),(function(){t.selectCondition({integrationCode:r,conditionCode:o,name:s.name,requiresUserData:s.requires_user})}),(0,a.d)({dynamicSentence:s.name}),t._templateAddRequiresUserData({requiresUserData:s.requires_user}))})))})),UncannyAutomator.i18n.cancel),this.$wrapper,{host:this})}},{key:"selectCondition",value:(u=regeneratorRuntime.mark((function t(e){var n,i,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.integrationCode,i=e.conditionCode,o=e.name,!e.requiresUserData||!l()){t.next=10;break}return t.prev=2,t.next=5,g({summary:UncannyAutomator.i18n.conditions.conditionRequiresUserData,box:(0,a.d)({dynamicSentence:o}),description:UncannyAutomator.i18n.conditions.conditionRequiresUserDataDescription});case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(2),t.abrupt("return");case 10:this.$dialog.value.close(),r=new CustomEvent("automator/action/conditions/add/select",{detail:{conditionsGroupId:this.conditionsGroupId,integrationCode:n,conditionCode:i}}),document.dispatchEvent(r),new w.Z({conditionsGroupId:this.conditionsGroupId,integrationCode:n,conditionCode:i,comingFrom:this.comingFrom});case 14:case"end":return t.stop()}}),t,this,[[2,7]])})),d=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=u.apply(t,e);function r(t){A(o,n,i,r,a,"next",t)}function a(t){A(o,n,i,r,a,"throw",t)}r(void 0)}))},function(t){return d.apply(this,arguments)})},{key:"_templateAddRequiresUserData",value:function(t){if(t.requiresUserData&&l())return(0,i.dy)(_||(_=T(['\n\t\t\t\t<uo-chip\n\t\t\t\t\tslot="chip"\n\t\t\t\t\tsize="small"\n\t\t\t\t\tcolor="info"\n\t\t\t\t\tfilled\n\t\t\t\t>\n\t\t\t\t\t',"\n\t\t\t\t</uo-chip>\n\t\t\t"])),UncannyAutomator.i18n.conditions.requiresUserData)}},{key:"integrationOpenByDefault",value:function(t){return"GEN"==t}},{key:"integrations",get:function(){var t=Object.entries((0,s.Zh)({conditions:!0})),e=t.findIndex((function(t){var e=k(t,2),n=e[0];return e[1],"GEN"==n}));return t.unshift(t.splice(e,1)[0]),t}},{key:"$wrapper",get:function(){return D(E(this,M))||(t=this,e=M,n=document.createElement("div"),function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,x(t,e,"set"),n),document.body.append(E(this,M))),E(this,M);var t,e,n}}],n&&U(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},3599:(t,e,n)=>{"use strict";n.d(e,{Z:()=>$});var i=n(7109),o=n(9392),r=n(8036),a=n(6126),s=n(3692),c=n(875),l=n(4232),u=n(5206);class d{constructor(t){this.U=t}disconnect(){this.U=void 0}reconnect(t){this.U=t}deref(){return this.U}}class p{constructor(){this.Y=void 0,this.q=void 0}get(){return this.Y}pause(){var t;null!==(t=this.Y)&&void 0!==t||(this.Y=new Promise((t=>this.q=t)))}resume(){var t;null===(t=this.q)||void 0===t||t.call(this),this.Y=this.q=void 0}}const m=t=>!(0,l.pt)(t)&&"function"==typeof t.then;class f extends u.s{constructor(){super(...arguments),this._$Cwt=1073741823,this._$Cyt=[],this._$CG=new d(this),this._$CK=new p}render(...t){var e;return null!==(e=t.find((t=>!m(t))))&&void 0!==e?e:s.Jb}update(t,e){const n=this._$Cyt;let i=n.length;this._$Cyt=e;const o=this._$CG,r=this._$CK;this.isConnected||this.disconnected();for(let t=0;t<e.length&&!(t>this._$Cwt);t++){const a=e[t];if(!m(a))return this._$Cwt=t,a;t<i&&a===n[t]||(this._$Cwt=1073741823,i=0,Promise.resolve(a).then((async t=>{for(;r.get();)await r.get();const e=o.deref();if(void 0!==e){const n=e._$Cyt.indexOf(a);n>-1&&n<e._$Cwt&&(e._$Cwt=n,e.setValue(t))}})))}return s.Jb}disconnected(){this._$CG.disconnect(),this._$CK.pause()}reconnected(){this._$CG.reconnect(this),this._$CK.resume()}}const h=(0,c.XM)(f);var g,v,y,b,_,w,A=n(7172),k=n(3418),C=n(938);function T(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function U(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function E(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,D(t,e,"get"))}function D(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var M=_uo.utility,S=M.isDefined,O=M.isEmpty,I=new WeakMap,$=function(){function t(e){var n,i,o,r=e.conditionsGroupId,s=e.integrationCode,c=e.conditionCode,l=e.conditionId,u=e.comingFrom;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$dialog=(0,a.V)(),this.$saveButton=(0,a.V)(),o={writable:!0,value:void 0},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,i=I),i.set(n,o);var d=(0,A.lj)({conditionsGroupId:r});O(d)||(this.conditionsGroup=d,this.comingFrom=u,O(l)?(this.integrationCode=s,this.conditionCode=c,this.condition=this.createCondition(),this.modalMode="create"):(this.condition=(0,A.AB)({conditionsGroupId:r,conditionId:l}),S(this.condition)&&(this.integrationCode=this.condition.integrationCode,this.conditionCode=this.condition.conditionCode),this.modalMode="edit"),O(this.condition)||O(this.conditionPostData)||this.render())}var e,n;return e=t,n=[{key:"render",value:function(){var t=this;(0,o.sY)((0,o.dy)(g||(g=U(['\n\t\t\t\t<uo-dialog\n\t\t\t\t\theading="','"\n\t\t\t\t\tsize="large"\n\t\t\t\t\topen\n\n\t\t\t\t\t','\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="uap-conditions-options"\n\t\t\t\t\t\tdata-integration="','"\n\t\t\t\t\t\tdata-condition="','"\n\t\t\t\t\t>\n\t\t\t\t\t\t',"\n\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot="primary-action"\n\n\t\t\t\t\t\t',"\n\n\t\t\t\t\t\t@click=","\n\t\t\t\t\t>\n\t\t\t\t\t\t",'\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t\t<uo-button\n\t\t\t\t\t\tslot="secondary-action"\n\t\t\t\t\t\tdialog-action="close"\n\t\t\t\t\t\tcolor="secondary"\n\n\t\t\t\t\t\t@click=',"\n\t\t\t\t\t>\n\t\t\t\t\t\t","\n\t\t\t\t\t</uo-button>\n\n\t\t\t\t</uo-dialog>\n\t\t\t"])),UncannyAutomator.i18n.conditions.configureTheRule,(0,a.i)(this.$dialog),this.integrationCode,this.conditionCode,this._templateHeader,h(this._templateFields,this._templateFieldsPlaceholder),(0,a.i)(this.$saveButton),(function(){t.saveOptions()}),UncannyAutomator.i18n.conditions.saveFilter,(function(){t.maybeRemoveCondition(),t.maybeRemoveConditionsGroup()}),UncannyAutomator.i18n.cancel),this.$wrapper,{host:this})}},{key:"_templateHeader",get:function(){return(0,o.dy)(v||(v=U(['\n\t\t\t<div class="uap-conditions-options-header">\n\t\t\t\t<div class="uap-conditions-options-header-integration">\n\t\t\t\t\t<ua-builder-integration-icon\n\t\t\t\t\t\tcode=','\n\t\t\t\t\t\tsize="xsmall"\n\t\t\t\t\t\tplain\n\t\t\t\t\t></ua-builder-integration-icon>\n\n\t\t\t\t\t<uo-chip size="small" filled>\n\t\t\t\t\t\t','\n\t\t\t\t\t</uo-chip>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="uap-conditions-options-header-sentence">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),this.condition.integrationCode,(0,k.Vh)(this.condition.integrationCode),(0,C.d)({dynamicSentence:this.conditionPostData.dynamic_name,fields:this.condition.fields}))}},{key:"_templateFields",get:function(){var t,e=this;return(t=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,(0,A.fy)({integrationCode:e.integrationCode,conditionCode:e.conditionCode})){t.next=4;break}return t.next=4,(0,A.qv)({integrationCode:e.integrationCode,conditionCode:e.conditionCode});case 4:return t.abrupt("return",(0,o.dy)(y||(y=U(['\n\t\t\t\t\t<div class="uap uap-conditions-options-fields">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"])),(0,r.r)(Object.values(e.fields),(function(t){return t.id}),(function(t){return(0,o.dy)(b||(b=U(["\n\t\t\t\t\t\t\t\t\t\t","\n\t\t\t\t\t\t\t\t\t"])),t.$wrapper.get(0))}))));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(0,o.dy)(_||(_=U(["\n\t\t\t\t\t","\n\t\t\t\t"])),UncannyAutomator.i18n.somethingWentWrong));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})),function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){T(r,i,o,a,s,"next",t)}function s(t){T(r,i,o,a,s,"throw",t)}a(void 0)}))})()}},{key:"_templateFieldsPlaceholder",get:function(){return(0,o.dy)(w||(w=U(['\n\t\t\t<div class="uap-conditions-options-fields-placeholder">\n\n\t\t\t\t<div>\n\t\t\t\t\t<uo-placeholder width="100px"></uo-placeholder> <uo-placeholder width="30px"></uo-placeholder>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<uo-placeholder height="42px"></uo-placeholder>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<uo-placeholder width="40px"></uo-placeholder> <uo-placeholder width="100px"></uo-placeholder> <uo-placeholder width="50px"></uo-placeholder>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t'])))}},{key:"saveOptions",value:function(){var t=this;this.areFieldsValid()&&(this.condition.fields=this.getFieldsValues(),this.$saveButton.value.loading=!0,(0,A.Q9)({onSuccess:function(e){t.$saveButton.value.loading=!1,e.success&&t.$dialog.value.close()},onFail:function(){t.$saveButton.value.loading=!1}}))}},{key:"createCondition",value:function(){return this.conditionsGroup.addCondition({integrationCode:this.integrationCode,conditionCode:this.conditionCode,fields:{}})}},{key:"getFieldsValues",value:function(){var t={};return Object.values(this.fields).forEach((function(e){t[e.id]=e.value,"select"==e.type&&(t["".concat(e.id,"_readable")]=e.readableValue)})),t}},{key:"areFieldsValid",value:function(){var t=!0;return Object.values(this.fields).forEach((function(e){var n=e.validate();t=t&&n.isValid})),t}},{key:"maybeRemoveCondition",value:function(){"create"==this.modalMode&&this.conditionsGroup.removeCondition({conditionId:this.condition.id})}},{key:"maybeRemoveConditionsGroup",value:function(){"action-filter-button"==this.comingFrom&&(this.conditionsGroup.hasConditions||this.conditionsGroup.destroy())}},{key:"$wrapper",get:function(){return S(x(this,I))||(t=this,e=I,n=document.createElement("div"),function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,D(t,e,"set"),n),document.body.append(x(this,I))),x(this,I);var t,e,n}},{key:"fields",get:function(){var t=this;return S(this._fields)?this._fields:S(this.conditionPostData.fields)?(this._fields={},this.conditionPostData.fields.forEach((function(e){var n=Object.assign({},e);S(t.condition.fields[n.optionCode])&&(n.currentValue=t.condition.fields[n.optionCode]);var o=new i.Z(n.fieldType,n);o.doAJAX(),o.initTokenSelector(),o.initCodeMirror(),t._fields[n.optionCode]=o})),this._fields):null}},{key:"conditionPostData",get:function(){return(0,A.m9)({integrationCode:this.integrationCode,conditionCode:this.conditionCode})}}],n&&E(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},7172:(t,e,n)=>{"use strict";n.d(e,{qG:()=>m,Gm:()=>a,a9:()=>c,fy:()=>$,lU:()=>d,qv:()=>L,AB:()=>h,m9:()=>v,mO:()=>q,lj:()=>b,A:()=>C,NS:()=>U,d3:()=>x,S$:()=>j,Q9:()=>O});var i=n(2310);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var r=_uo.utility.isDefined;const a=function(t){var e=t.integrationCode,n={available:{},hasConditions:!1};r(UncannyAutomator.actionsConditions)&&r(UncannyAutomator.actionsConditions[e])&&(n.available=UncannyAutomator.actionsConditions[e],Object.entries(n.available).forEach((function(t){var a,s,c=(s=2,function(t){if(Array.isArray(t))return t}(a=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(a,s)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(a,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0];c[1],r(n.available[l].fields)&&(n.available[l].fields=n.available[l].fields.map((function(t){return t.itemType="action",t.integrationId=e,(0,i.Z)(t)})))})),n.hasConditions=!0),UncannyAutomator.integrations[e].conditions=n};var s=_uo.utility.isDefined;const c=function(){return s(UncannyAutomator.wp)&&UncannyAutomator.wp};var l=n(1290);function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const d=function(){if(U()){var t=(0,l.Wr)("get",{filter:{itemType:"action"}});for(var e in t)UncannyAutomator.recipe.items[e].hasConditions=!1;Object.entries(UncannyAutomator.recipe.conditions).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());i[0],i[1].actions.forEach((function(t){UncannyAutomator.recipe.items[t].hasConditions=!0}))}))}};function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}_uo.utility.isEmpty;const m=function(){var t={},e=(0,l.Wr)("get",{filter:{itemType:"action"}});return U()?Object.entries(e).forEach((function(e){var n,i,o=(i=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(n,i)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0],a=o[1];a.hasConditions||(t[r]=a)})):t=e,t};var f=_uo.utility.isDefined;const h=function(t){var e=t.conditionsGroupId,n=t.conditionId,i=null,o=b({conditionsGroupId:e});return f(o)&&o.hasCondition(n)&&(i=o.getCondition(n)),i};var g=_uo.utility.isDefined;const v=function(t){var e,n=t.integrationCode,i=t.conditionCode;if(g(UncannyAutomator.integrations[n])){var o=UncannyAutomator.integrations[n].conditions.available;g(o[i])&&(e=o[i])}return e};var y=_uo.utility.isDefined;const b=function(t){var e=t.conditionsGroupId,n=null;return U()&&y(UncannyAutomator.recipe.conditions[e])&&(n=UncannyAutomator.recipe.conditions[e]),n};var _=n(2431),w=_uo.utility,A=w.isDefined,k=w.isEmpty;const C=function(t){if(UncannyAutomator.recipe.conditions={},A(t.actions_conditions)&&!k(t.actions_conditions))try{JSON.parse(t.actions_conditions).forEach((function(t){var e=new _.Z;e.mode=t.mode,e.actions=t.actions,e.conditions=t.conditions}))}catch(t){UncannyAutomator.dev.developerMode&&console.warn("Conditions: Automator failed to parse the conditions saved in the meta. Make sure you're saving a valid JSON.")}};var T=_uo.utility.isEmpty;const U=function(){return!T(UncannyAutomator.recipe.conditions)};function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const x=function(){var t=[];return U()&&Object.entries(UncannyAutomator.recipe.conditions).forEach((function(e){var n,i,o=(i=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(n,i)||function(t,e){if(t){if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(t,e):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=(o[0],o[1]);r.hasActions&&r.hasConditions&&t.push(r.formattedForMeta)})),t};var D=n(938),M=n(6626),S=_uo.utility.isDefined;const O=function(t){var e=t.onSuccess,n=t.onFail;if((0,D.o)()){var i=x();(0,l.L8)("actions_conditions_update",{recipe_id:UncannyAutomator.recipe.id,actions_conditions:JSON.stringify(i)},(function(t){if(t.success){if(S(e))try{e(t)}catch(t){UncannyAutomator.dev.developerMode&&(console.error("updateRemoteConditionsMeta: Couldn't execute the onSuccess callback."),console.error(t))}var n=new CustomEvent("automator/action/conditions/update",{detail:{conditions:i}});document.dispatchEvent(n),new M.Z}}),(function(){if(UncannyAutomator.dev.developerMode&&console.error("updateRemoteConditionsMeta: Couldn't update remote conditions meta. UI might be outdated."),S(n))try{n()}catch(t){UncannyAutomator.dev.developerMode&&(console.error("updateRemoteConditionsMeta: Couldn't execute the onFail callback."),console.error(t))}}))}};var I=_uo.utility.isDefined;const $=function(t){var e=t.integrationCode,n=t.conditionCode,i=v({integrationCode:e,conditionCode:n});return I(i.fields)};var P=_uo.utility.isDefined;const L=function(t){var e=t.integrationCode,n=t.conditionCode;return new Promise((function(t,o){(0,l.L8)("actions_conditions_fields",{integration:e,code:n},(function(r){if(!r.success||!P(r.fields))return o(new Error(UncannyAutomator.i18n.conditions.errorCouldNotGetFields));var a=r.fields.map((function(t){return t.itemType="action",t.integrationId=e,(0,i.Z)(t)}));return j({integrationCode:e,conditionCode:n,updates:{fields:a}}),t(a)}),(function(){return o(new Error(UncannyAutomator.i18n.conditions.errorCouldNotGetFields))}),{requiresRecipesObject:!1,renderUI:!1})}))},j=function(t){var e=t.integrationCode,n=t.conditionCode,i=t.updates,o=void 0===i?{}:i;UncannyAutomator.integrations[e].conditions.available[n]=Object.assign(UncannyAutomator.integrations[e].conditions.available[n],o)};function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var R=_uo.utility,V=R.isEmpty,N=R.isDefined;const q=function(t){var e=t.integrationCode,n=t.filters,i=void 0===n?{}:n;if(V(e))return{};if(!UncannyAutomator.integrations[e].conditions.hasConditions)return{};i=Object.assign({deprecated:null,customFilter:null},i);var o={};return Object.entries(UncannyAutomator.integrations[e].conditions.available).forEach((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||function(t,e){if(t){if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],s=r[1],c=!0;if(N(i.customFilter)&&(c=i.customFilter(s)),N(i.deprecated)){var l=!!N(s.deprecated)&&s.deprecated;c=i.deprecated===l}c&&(o[a]=s)})),o}},9214:(t,e,n)=>{"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,{Z:()=>r}),n(5311);var o=_uo.utility.isDefined;const r=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.integrationCode=e,this.createItemIcon()}var e,n;return e=t,(n=[{key:"createItemIcon",value:function(){var t=document.createElement("div");if(t.classList.add("uap-item-icon"),o(UncannyAutomator.integrations[this.integrationCode])){var e=UncannyAutomator.integrations[this.integrationCode];o(e.icon_svg)?t.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t\t<img src="'.concat(e.icon_svg,'" alt="').concat(e.name,'">\n\t\t\t\t')):o(e.icon_32)&&o(e.icon_64)&&t.insertAdjacentHTML("beforeEnd",'\n\t\t\t\t\t<img \n\t\t\t\t\t\tsrc="'.concat(e.icon_32,'"  \n\t\t\t\t\t\talt="').concat(e.name,'"\n\t\t\t\t\t>\n\t\t\t\t'))}return t}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},8104:(t,e,n)=>{"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.d(e,{Z:()=>r});var o=_uo.utility.isDefined,r=function(){function t(e){var n=e.integrationId,i=e.customIntegrationName;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.integrationId=n,this.customIntegrationName=i,this.createItemTag(),this.$tag}var e,n;return e=t,(n=[{key:"createItemTag",value:function(){var t=UncannyAutomator.integrations[this.integrationId],e=document.createElement("div");e.classList.add("uap-item-tag"),e.innerText=o(t)?t.name:this.customIntegrationName,this.$tag=e}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},7464:(t,e,n)=>{"use strict";n.d(e,{Z:()=>U});var i=n(5311),o=n.n(i),r=n(3198),a=n(1290),s=n(772),c=n(515),l=n(9214),u=n(8104),d=n(9973),p=n(6626);function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=_uo.utility,h=f.isDefined,g=f.isEmpty,v=f.addParametersToURL;const y=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.integrationID=n,this.$currentItem=i,this.removeConnectingIntegrationsParameters(),this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){var t={title:"trigger"==this.itemType?UncannyAutomator.i18n.trigger.select:UncannyAutomator.i18n.action.select,$icon:new l.Z(this.integrationID),$integrationNameTag:new u.Z({integrationId:this.integrationID}),$actionMenu:new c.Z(this.itemType)},e=document.createElement("div");e.classList.add("item","uap-item"),e.setAttribute("data-integration",this.integrationID),this.$item=e,e.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar"></div>\n\t\t\t\t<div class="uap-item-top-header">\n\t\t\t\t\t<div class="uap-item-top-header-left"></div>\n\t\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-inner-content"></div>\n\t\t\t</div>\n\t\t'),e.querySelector(".uap-item-sidebar").appendChild(t.$icon),e.querySelector(".uap-item-top-header-left").appendChild(t.$integrationNameTag),e.querySelector(".uap-item-top-header-right").appendChild(t.$actionMenu.get(0)),e.querySelector(".uap-item-inner-content").appendChild(this.createItemsList().get(0)),this.$currentItem.replaceWith(e)}},{key:"createItemsList",value:function(){var t,e,n=this;"trigger"==this.itemType?(t=(0,a.eU)(this.integrationID,"triggers"),e=UncannyAutomator.i18n.trigger.search,UncannyAutomator.i18n.proOnly.unlockTriggers):"action"==this.itemType&&(t=(0,a.eU)(this.integrationID,"actions"),e=UncannyAutomator.i18n.action.search,UncannyAutomator.i18n.proOnly.unlockActions);var i=o()('\n\t\t\t<div class="item-options item-options--nopadding item-options--noborder">\n\t\t\t\t<div class="form-element">\n\t\t\t\t\t<div class="item__task-selector">\n\t\t\t\t\t\t<div class="item-task-selector__search">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\t\tclass="item-task-selector__search-input"\n\t\t\t\t\t\t\t\tplaceholder="'.concat(e,'"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="item-task-selector__options">\n\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--available"></div>\n\t\t\t\t\t\t\t<div class="item-task-selector-options__group item-task-selector-options__group--unavailable">\n\t\t\t\t\t\t\t\t<div class="item-task-selector-options__group-items"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="item-task-selector__option item-task-selector__option--no-results item-task-selector__option--hide">\n\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.noResults,"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t")),c=i.find(".item__task-selector"),l=i.find(".item-task-selector__search-input"),u={container:i.find(".item-task-selector__options"),available:i.find(".item-task-selector-options__group--available"),unavailable:{container:i.find(".item-task-selector-options__group--unavailable"),list:i.find(".item-task-selector-options__group-items")},noResults:i.find(".item-task-selector__option--no-results")};if(t.hasAvailableItems){if(!(h(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type)){var m=[],f=[];t.available.forEach((function(t){t.requires_user?m.push(t):f.push(t)})),t.available=[].concat(f,m)}u.available.append(t.available.map((function(t){var e=t.is_pro,i=(!h(UncannyAutomator.wp)||!UncannyAutomator.wp)&&"anonymous"==UncannyAutomator.recipe.type&&t.requires_user,l=o()('\n\t\t\t\t\t<div class="item-task-selector__option '.concat(e?"item-task-selector__option--pro":""," ").concat(t.requires_user?"item-task-selector__option--requires-user":""," ").concat(i?"item-task-selector__option-cannot-add":"",'"\n\t\t\t\t\t\tdata-search="').concat(t.select_option_name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t').concat(i?'<uo-icon id="lock"></uo-icon>':"","\n\t\t\t\t\t\t\t").concat((0,a.hF)(t.select_option_name,'<span class="item-task-selector__option-variable">',"</span>")," ").concat(e?'<span class="item-task-selector-option__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</span>"):"",'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="item-task-selector__option-properties">\n\t\t\t\t\t\t\t').concat("anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&t.requires_user?'<span class="item-task-selector-option__requires-user">'.concat(UncannyAutomator.i18n.needsUserData,"</span>"):"","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"));return l.on("click",(function(){c.addClass("item__task-selector--loading"),l.addClass("item-task-selector__option--loading");var e=["trigger","action"].includes(n.itemType)?"add-new-".concat(n.itemType):"",i={};o().each(t.options,(function(t,e){h(e.default_value)&&(i[e.option_code]=e.default_value)})),"anonymous"==t.type&&(i.can_log_in_new_user=!h(t.can_log_in_new_user)||t.can_log_in_new_user);var u,m=function(r,s){(0,a.L8)("add",{recipePostID:UncannyAutomator.recipe.id,action:e,item_code:t.code,default_meta:o().extend({},i,{integration_name:UncannyAutomator.integrations[n.integrationID].name,sentence:t.sentence})},(function(t){if(new d.Z,new p.Z,"trigger"==n.itemType&&(UncannyAutomator.cache.tokens=[]),h(t.post_ID)){var e=(0,a.M0)("item",{id:t.post_ID});UncannyAutomator.recipe.items[t.post_ID].isValid?UncannyAutomator.recipe.isLive||e.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):e.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}h(r)&&r(t)}),(function(t){console.log("ERROR-TODO. Couldn't add the item"),c.removeClass("item__task-selector--loading"),l.removeClass("item-task-selector__option--loading"),0==t.success&&new d.Z,h(s)&&s(t)}))};if("action"==n.itemType&&"anonymous"==UncannyAutomator.recipe.type&&!UncannyAutomator.recipe.requiresUserData&&t.requires_user)if(c.removeClass("item__task-selector--loading"),l.removeClass("item-task-selector__option--loading"),h(UncannyAutomator.wp)&&UncannyAutomator.wp){var f=UncannyAutomator.recipe.isLive;(u=new s.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,' <span class="needs-user-data-modal-pro-badge needs-user-data-modal-pro-badge--gray">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,a.hF)(t.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.content.description,"</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){var t=u.getElements();t.modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),(0,a.R$)(!0,(function(e){m((function(){u.destroy()}),(function(){t.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)}))}),(function(e){t.modal.box.buttons.confirm.removeClass("uap-btn--loading").prop("disabled",!1)})),f&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)},onCancel:function(){u.destroy()}})}else(u=new s.Z({title:"".concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.title,' <span class="needs-user-data-modal-pro-badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>"),content:'\n\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal">\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__title">'.concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.mustRunOnUser,'</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__sentence">\n\t\t\t\t\t\t\t\t\t\t\t').concat((0,a.hF)(t.select_option_name,"<span>","</span>"),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="needs-user-data-modal__disclaimer">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat((0,r.gB)(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.description,UncannyAutomator.i18n.uncannyAutomatorPro),' <a href="').concat((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}),'" target="_blank">').concat(UncannyAutomator.i18n.upgradeNow,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="description">').concat(UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.content.upgradeLater,' <a href="').concat((0,a.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/#Recipe_types",{medium:"select_an_item",content:"requires_user_data-learn-more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a></div>\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.userSelector.userDataModal.action.forbidden.confirmButton}},{size:"large"})).setEvents({onConfirm:function(){u.destroy(),(0,a.YQ)((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:"requires_user_data"}))},onCancel:function(){u.destroy()}});else m()})),l})))}else u.available.remove();t.hasUnavailableItems?u.unavailable.list.append(t.unavailable.map((function(t){var e="unavailable_item-".concat(n.integrationID,"-").concat(n.integrationID,"_").concat((0,a.hF)(t.name,"","").toLowerCase().replace(/\s+|{|}/g,"_"));return o()('\n\t\t\t\t\t<a href="'.concat((0,a.XE)("https://automatorplugin.com/pricing/",{medium:"select_an_item",campaign:"update_to_pro",content:e}),'"\n\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\tclass="item-task-selector__option item-task-selector__option--pro"\n\t\t\t\t\t\tdata-search="').concat(t.name.toLowerCase().replace(/\s+|{|}/g,""),'">\n\t\t\t\t\t\t<div class="item-task-selector__option-sentence">\n\t\t\t\t\t\t\t<uo-icon id="lock"></uo-icon>\n\t\t\t\t\t\t\t').concat((0,a.hF)(t.name,'<span class="item-task-selector__option-variable">',"</span>"),'\n\t\t\t\t\t\t\t<span class="item-task-selector-option__badge">').concat(UncannyAutomator.i18n.proOnly.pro,"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</a>\n\t\t\t\t"))}))):u.unavailable.container.remove();var v=u.container.find(".item-task-selector__option:not(.item-task-selector__option--no-results)");return l.on("input",(function(){var t=l.val().toLowerCase().replace(/\s+|{|}/g,"");v.removeClass("item-task-selector__option--show item-task-selector__option--hide");var e=!0;g(t)||(e=!1,o().each(v,(function(n,i){var r=o()(i);-1!==r.data("search").search(t)?(r.addClass("item-task-selector__option--show"),e=!0):r.addClass("item-task-selector__option--hide")}))),u.noResults.removeClass("item-task-selector__option--hide item-task-selector__option--show"),e?u.noResults.addClass("item-task-selector__option--hide"):u.noResults.addClass("item-task-selector__option--show")})),i.append(this.createCancelButton()),i}},{key:"createCancelButton",value:function(){var t=this,e=document.createElement("uo-button");return e.setAttribute("color","secondary"),e.innerText=UncannyAutomator.i18n.cancel,e.addEventListener("click",(function(){new U(t.itemType,t.$item)})),e}},{key:"removeConnectingIntegrationsParameters",value:function(){v(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=_uo.utility,A=w.isDefined,k=w.isEmpty,C=w.getURLParameter,T=w.addParametersToURL;const U=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.$currentItem=n,this.integrations=[],this.render(),this.handleContinueIntegrationConnection()}var e,n;return e=t,n=[{key:"render",value:function(){var t={$actionMenu:new c.Z(this.itemType)},e=document.createElement("div");if(e.classList.add("item","uap-item"),this.$item=e,e.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-inner">\n\t\t\t\t<div class="uap-item-sidebar">\n\t\t\t\t\t<div class="uap-item-icon"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-top-header">\n\t\t\t\t\t<div class="uap-item-top-header-left">\n\t\t\t\t\t\t'.concat(UncannyAutomator.i18n.integration.select,'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="uap-item-inner-content"></div>\n\t\t\t</div>\n\t\t')),e.querySelector(".uap-item-top-header-right").appendChild(t.$actionMenu.get(0)),e.querySelector(".uap-item-inner-content").appendChild(this.createIntegrations().get(0)),e.querySelector(".uap-item-inner-content").appendChild(this.createFooter()),A(this.$currentItem))this.$currentItem.replaceWith(e);else{var n=(0,a.M0)("lastItem",{type:this.itemType}).get(0);if("trigger"==this.itemType&&(A(n)?n.insertAdjacentElement("afterEnd",e):(0,a.M0)("metabox",{type:this.itemType}).get(0).appendChild(e)),"action"==this.itemType){var i=(0,a.M0)("items",{type:this.itemType}),o=(0,a.M0)("metabox",{type:this.itemType}).get(0);i.length>0?o.querySelector(".add-action-btn").insertAdjacentElement("beforeBegin",e):o.querySelector(".uap-item--actions-initial").replaceWith(e)}}}},{key:"createIntegrations",value:function(){var t=this,e=o()("<div/>",{class:"item-integrations"});return this.filterByNonEmptyIntegrations(this.itemType),this.sortIntegrationsAlphabetically(),this.integrations.forEach((function(n){var i=n.id,o=t.createIntegration(i,n),r=function(){new y(t.itemType,i,t.$item)};if(A(n.connected))switch(t.integrationModalCurrentStep(n)){case 1:r=function(){T(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:i,ua_connecting_integration_context:t.itemType},{setAsURL:!0,refresh:!1}),t.connectIntegrationModal(i,n,{currentStep:1})};break;case 2:r=function(){T(window.location.href,{ua_connecting_integration:1,ua_connecting_integration_id:i,ua_connecting_integration_context:t.itemType},{setAsURL:!0,refresh:!1}),t.connectIntegrationModal(i,n,{currentStep:2})}}o.on("click",(function(){r()})),e.append(o)})),e}},{key:"connectIntegrationModal",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=Object.assign({currentStep:1},n);var i=T(UncannyAutomator.connectApiUrl,{redirect_url:T(UncannyAutomator.dashboardUrl,{ua_close_window:1})}),o="";o=A(UncannyAutomator.wp)&&UncannyAutomator.wp?'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<uo-icon id="check-circle"></uo-icon>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat((0,r.gB)(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1Pro,UncannyAutomator.i18n.uncannyAutomatorPro),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-activate-license" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.activate,' <uo-icon id="arrow-circle-right"></uo-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'):'\n\t\t\t\t<div class="connect-integration-modal-step '.concat(n.currentStep>1?"connect-integration-modal-step--completed":"",'">\n\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t<uo-icon id="smile-plus"></uo-icon>\n\t\t\t\t\t</div> \n\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t<strong>1.</strong> ').concat((0,r.gB)(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step1,UncannyAutomator.i18n.uncannyAutomator),'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t<a id="connect-integration-modal-sign-up" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.signUp,' <uo-icon id="arrow-circle-right"></uo-icon>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t');var c=new s.Z({title:"".concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectIntegration),content:'\n\t\t\t\t<div class="connect-integration-modal">\n\t\t\t\t\t<div class="connect-integration-modal-steps__counter">\n\t\t\t\t\t\t'.concat((0,r.gB)(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.stepCounter,(n.currentStep,"2")),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="connect-integration-modal-steps">\n\t\t\t\t\t\t<div class="connect-integration-modal-steps__list">\n\t\t\t\t\t\t\t').concat(o,'\n\t\t\t\t\t\t\t<div class="connect-integration-modal-step ').concat(n.currentStep>2?"connect-integration-modal-step--completed":""," ").concat(1==n.currentStep?"connect-integration-modal-step--previous-not-completed":"",'">\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__icon">\n\t\t\t\t\t\t\t\t\t<uo-icon id="plug"></uo-icon>\n\t\t\t\t\t\t\t\t</div> \n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description">\n\t\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__description-main">\n\t\t\t\t\t\t\t\t\t\t<strong>2.</strong> ').concat((0,r.gB)(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.step2,'<span class="connect-integration-modal-step-integration-name">'+(0,a.Y6)(t).node.outerHTML+e.name+"</span>",UncannyAutomator.i18n.uncannyAutomator),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="connect-integration-modal-step__action">\n\t\t\t\t\t\t\t\t\t<span ').concat(1==n.currentStep?'uap-tooltip="'+UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.completePrevious+'"':"",'>\n\t\t\t\t\t\t\t\t\t\t<a id="connect-integration-modal-connect-account" class="connect-integration-modal-step__action-anchor">\n\t\t\t\t\t\t\t\t\t\t\t').concat(UncannyAutomator.i18n.apiIntegrations.instructionsToConnect.connectAccount,' <uo-icon id="arrow-circle-right"></uo-icon>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t'),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:null}},{size:"extra-large"});c.setEvents({onCancel:function(){c.destroy(),setTimeout((function(){T(window.location.href,{ua_connecting_integration:"",ua_connecting_integration_id:"",ua_connecting_integration_context:""},{setAsURL:!0,refresh:!1})}),10)}}),c.getElements().modal.container.find("#connect-integration-modal-sign-up").on("click",(function(t){t.preventDefault(),t.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:i,w:550,h:600,onClose:function(){location.reload()}})})),c.getElements().modal.container.find("#connect-integration-modal-activate-license").on("click",(function(t){t.preventDefault(),t.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:UncannyAutomator.licenseUrl,w:550,h:600,onClose:function(){location.reload()}})})),2==n.currentStep&&c.getElements().modal.container.find("#connect-integration-modal-connect-account").on("click",(function(t){t.preventDefault(),t.currentTarget.classList.add("connect-integration-modal-step__action-anchor--loading"),(0,a.Lc)({url:T(e.settings_url,{automator_minimal:1,automator_hide_settings_tabs:1}),w:550,h:600,onClose:function(){location.reload()}})}))}},{key:"handleContinueIntegrationConnection",value:function(){if(1==C(null,"ua_connecting_integration")&&C(null,"ua_connecting_integration_context")==this.itemType){var t=C(null,"ua_connecting_integration_id");if(!k(t)){var e=UncannyAutomator.integrations[t];if(A(e)&&A(e.connected))switch(this.integrationModalCurrentStep(e)){case 1:this.connectIntegrationModal(t,e,{currentStep:1});break;case 2:this.connectIntegrationModal(t,e,{currentStep:2});break;case 3:new y(this.itemType,t,this.$item)}}}}},{key:"createIntegration",value:function(t,e){var n,i=o()("<div/>",{class:"item-integration"}),a=o()("<div/>",{class:"item-integration__logo"}),s=o()("<div/>",{class:"item-integration__name"});return e.isProOnly&&(i.addClass("item-integration--pro"),i.append(o()('\n\t\t\t\t<div class="item-integration__badge">'.concat(UncannyAutomator.i18n.proOnly.pro,"</div>\n\t\t\t")))),e.isAvailable?A(e.connected)?UncannyAutomator.hasAccountConnected?e.connected?i.addClass("item-integration--available"):(i.addClass("item-integration--unavailable item-integration--unavailable-integration-not-connected"),i.attr("uap-tooltip",(0,r.gB)(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,e.name)),i.append(o()('\n\t\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t\t")))):(i.addClass("item-integration--unavailable item-integration--unavailable-ap-account-not-connected"),i.attr("uap-tooltip",(0,r.gB)(UncannyAutomator.i18n.apiIntegrations.integrationNotConnected,e.name)),i.append(o()('\n\t\t\t\t\t\t<div class="item-integration__badge item-integration__badge--warning">'.concat(UncannyAutomator.i18n.apiIntegrations.notConnected,"</div>\n\t\t\t\t\t")))):"action"==this.itemType?A(UncannyAutomator.wp)&&UncannyAutomator.wp||"anonymous"!=UncannyAutomator.recipe.type?i.addClass("item-integration--available"):0==e.items.actions.available.filter((function(t){return 0==t.requires_user})).length?(i.addClass("item-integration--unavailable item-integration--unavailable-requires-user-data"),i.attr("uap-tooltip",UncannyAutomator.i18n.apiIntegrations.allActionsRequireUserData)):i.addClass("item-integration--available"):i.addClass("item-integration--available"):(i.addClass("item-integration--unavailable item-integration--unavailable-requires-pro"),i.attr("uap-tooltip",(0,r.gB)(UncannyAutomator.i18n.proOnly.requiresPro,UncannyAutomator.i18n.uncannyAutomatorPro))),A(e.icon_svg)?n=o()('<img src="'.concat(e.icon_svg,'" alt="').concat(e.name,'">')):A(e.icon_32)&&A(e.icon_64)&&(n=o()('<img src="'.concat(e.icon_32,'" alt="').concat(e.name,'">'))),s.text(e.name),a.append(n),i.append(a),i.append(s),i}},{key:"createFooter",value:function(){var t={text:""};if("anonymous"==UncannyAutomator.recipe.type)t.text=UncannyAutomator.i18n.integration.dontSeeTrigger;else{var e=(0,a.XE)("https://automatorplugin.com/integrations/",{medium:"select_an_integration",content:"discover_more_integrations"});t.text="".concat(UncannyAutomator.i18n.integration.discoverMore,' <a href="').concat(e,'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a>')}var n=document.createElement("div");return n.classList.add("item-content__description"),n.innerHTML=t.text,n}},{key:"filterByNonEmptyIntegrations",value:function(t){var e=this;if(["trigger","action"].includes(t)){var n=o().extend(!0,{},UncannyAutomator.integrations);Object.entries(n).forEach((function(n){var i,r,s,c=(s=2,function(t){if(Array.isArray(t))return t}(r=n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(r,s)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(r,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],u=c[1],d=!1,p=!1,m=!1;"trigger"==t?(d=(i=(0,a.IL)(u.items.triggers)).hasTriggers,m=i.hasAvailableItems,p=i.allItemsArePro):"action"==t&&(d=(i=(0,a.IL)(u.items.actions)).hasActions,m=i.hasAvailableItems,p=i.allItemsArePro),d&&e.integrations.push(o().extend({},u,{id:l,isAvailable:m,isProOnly:p}))}))}}},{key:"sortIntegrationsAlphabetically",value:function(){this.integrations=(0,a.yv)(this.integrations,"name")}},{key:"integrationModalCurrentStep",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(!A(UncannyAutomator.wp)||A(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&!UncannyAutomator.hasAccountConnected||A(UncannyAutomator.wp)&&UncannyAutomator.wp&&!UncannyAutomator.hasAccountConnected&&!UncannyAutomator.hasValidProLicense?t=1:((!A(UncannyAutomator.wp)||A(UncannyAutomator.wp)&&!UncannyAutomator.wp)&&UncannyAutomator.hasAccountConnected||A(UncannyAutomator.wp)&&UncannyAutomator.wp&&(UncannyAutomator.hasAccountConnected||UncannyAutomator.hasValidProLicense))&&(t=e.connected?3:2),t}}],n&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},3313:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1290),_common_modal_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(772),_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6235),_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1454),_triggers_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9973),_actions_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6626);function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var _uo$utility=_uo.utility,isDefined=_uo$utility.isDefined,isEmpty=_uo$utility.isEmpty,ItemOptions=function(){function ItemOptions(t,e){_classCallCheck(this,ItemOptions),this.itemId=t,this.optionId=e,this.item=UncannyAutomator.recipe.items[t],this.fields=this.item.options[this.optionId].fields,this.buttons=this.item.options[this.optionId].buttons,this.create(),this.initTokenSelector(),this.initTinyMCE(),this.initCodeMirror(),document.dispatchEvent(new CustomEvent("automator/item/options/open",{detail:{itemId:this.itemId,librariesReady:!0}}))}return _createClass(ItemOptions,[{key:"create",value:function(){var t=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:this.itemId}).contentContainer,e=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options"}),n=this.createButtons(),i=this.createFields();if(this.fieldsContainer=i,e.append(i),isDefined(this.item.customHTML))try{try{this.item.customHTML=this.item.customHTML.replaceAll("{{item_id}}",this.itemId)}catch(t){console.log(t)}e.get(0).insertAdjacentHTML("beforeEnd",this.item.customHTML)}catch(t){console.log(t)}var o=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__notices"});this.noticeContainer=o,e.append(o),e.append(n),t.html(e)}},{key:"createFields",value:function(){var t=this,e=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__group"});return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(n,i){var o=i.getAttributes().fieldType;"repeater"==o&&i.createFields(),i.createFormElement(),e.append(i.getFormElement()),["textarea","group","repeater"].includes(o)?"group"==o?i.fields.forEach((function(e){"textarea"!==e.getAttributes().fieldType&&e.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))})):"repeater"==o&&i.fieldRows.forEach((function(e,n){e.forEach((function(e,n){e.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))}))})):i.getField().on("keyup",(function(e){13==e.keyCode&&t.saveButton.trigger("click")}))})),e}},{key:"createButtons",value:function createButtons(){var _this2=this,container=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__buttons"}),automatorButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__uo-buttons"}),developerButtons=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"item-options__developer-buttons"}),saveButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--primary"}),cancelButton=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return"trigger"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"action"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),"closure"==this.item.itemType&&saveButton.text(UncannyAutomator.i18n.save),this.saveButton=saveButton,automatorButtons.append(saveButton),automatorButtons.append(cancelButton),jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.buttons,(function(index,button){var $buttonElement=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div/>",{class:"uap-btn"}).text(button.text);isDefined(button.css_classes)&&$buttonElement.addClass(button.css_classes);var doOnClick=function(){};if(isDefined(button.on_click))try{doOnClick=eval("(".concat(button.on_click.replace("<script>","").replace("<\/script>","").trim(),")"))}catch(t){UncannyAutomator.dev.developerMode&&(console.warn(t),console.warn(button.on_click))}$buttonElement.on("click",(function(){var t;doOnClick($buttonElement,{item:_this2.item,values:(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)({itemID:_this2.itemId})},(t={},isDefined(button.modules)&&(button.modules.includes("modal")&&(t.Modal=_common_modal_js__WEBPACK_IMPORTED_MODULE_2__.Z),button.modules.includes("markdown")&&(t.Markdown=_common_markdown_js__WEBPACK_IMPORTED_MODULE_3__.Z)),t))})),developerButtons.append($buttonElement)})),container.append(automatorButtons),container.append(developerButtons),saveButton.on("click",(function(){if((0,_validation_validation_js__WEBPACK_IMPORTED_MODULE_4__.R3)(_this2.fieldsContainer).isValid){saveButton.addClass("uap-btn--loading uap-btn--disabled");var t,e=_this2.itemId,n=_this2.optionId,i=_this2.getOptionValue(),o=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.qh)(_this2.item,_this2.item.meta.sentence,jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},_this2.item.meta,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.q7)({itemID:_this2.itemId})));try{t=o.html.get(0).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.L8)("update",{itemId:e,optionCode:n,optionValue:i,sentence_human_readable:o.brackets,sentence_human_readable_html:t},(function(t){_this2.fields.forEach((function(t){t.getFormElement().trigger("saved")})),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;var e=UncannyAutomator.recipe.items[_this2.item.id].isValid,n=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.item.id});e?UncannyAutomator.recipe.isLive||_this2.item.isLive||n.item.find('.item-status input[type="checkbox"]').prop("checked",!0).trigger("change"):n.item.find(".item-title__token:not(.item-title__token--filled)").first().trigger("click")}),(function(t){console.log("‼️ ERROR-TODO. Couldn't save the options of the item"),"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z;try{(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_1__.M0)("item",{id:_this2.itemId}).item.find('.item-title__token[data-options-id="'.concat(n,'"]')).trigger("click")}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}}))}})),cancelButton.on("click",(function(){"trigger"==_this2.item.itemType&&new _triggers_js__WEBPACK_IMPORTED_MODULE_5__.Z,"action"!=_this2.item.itemType&&"closure"!=_this2.item.itemType||new _actions_js__WEBPACK_IMPORTED_MODULE_6__.Z})),container}},{key:"initTokenSelector",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(t,e){e.initTokenSelector()}))}},{key:"initTinyMCE",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(t,e){"textarea"==e.getAttributes().fieldType&&e.initTinyMCE()}))}},{key:"initCodeMirror",value:function(){jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(t,e){e.initCodeMirror()}))}},{key:"getOptionValue",value:function(){var t={},e=!1,n=!1;return jquery__WEBPACK_IMPORTED_MODULE_0___default().each(this.fields,(function(i,o){var r=o.getAttributes().optionCode,a=o.getValue();if(["select","radio"].includes(o.getAttributes().fieldType)){if(e=!0,o.getAttributes().supportsMultipleValues)try{a=JSON.stringify(a)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}t["".concat(r,"_readable")]=o.getReadableValue();var s=o.getSelectCustomValue();"automator_custom_value"==a&&(t["".concat(r,"_custom")]=s)}else"repeater"==o.getAttributes().fieldType&&(n=!0,a=JSON.stringify(a));t[r]=a})),n||e||1!=Object.keys(t).length||(t=t[Object.keys(t)[0]]),t}}]),ItemOptions}();const __WEBPACK_DEFAULT_EXPORT__=ItemOptions},5865:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var i=n(5311),o=n.n(i),r=n(1290),a=n(772),s=n(7109),c=n(3313),l=n(9973),u=n(6626),d=n(1454),p=n(2593);function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var f=_uo.utility;f.isDefined,f.isEmpty;const h=function(){function t(e,n,i,o){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.integrationID=n,this.itemCode=i,this.itemId=o,this.item=UncannyAutomator.recipe.items[o],this.createItemSentence(e,i,o)}var e,n;return e=t,(n=[{key:"createItemSentence",value:function(t,e,n){var i,m=(0,r.Vx)(this.integrationID,t,e);this.globalItem=m,i=this.item.isMissing?this.item.sentence:(0,r.Vx)(this.integrationID,this.item.itemType,this.item.itemCode).sentence,i=(0,r.qh)(this.item,i,UncannyAutomator.recipe.items[this.itemId].meta,!0),this.item.isMissing||i.elements.token.on("click",(function(t){var e=o()(t.currentTarget);i.elements.token.removeClass("item-title__token--open"),e.addClass("item-title__token--open");var a=e.parents(".item");a.addClass("item--open uap-item--open"),a.trigger("automator:item:open",!0);var s=e.data("options-id");(0,r.M0)("optionGroup",{itemID:n,groupID:s}),new c.Z(n,s)}));var f=o()("<div/>",{class:"item-title__describe-container"}),h=o()("<div/>",{class:"item-status"});f.append(i.html.addClass("item-title__describe"));var g=new s.Z("checkbox",{color:"green",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipeItem,off:UncannyAutomator.i18n.status.draftRecipeItem},currentValue:UncannyAutomator.recipe.items[n].isLive}),v=g.getFormElement();return h.append(v),f.append(h),this.item.isMissing||v.on("automator:field:change",(function(){var t=g.getValue(),e=!0;if(t&&(e=(0,d.RC)(n).isValid),g.startLoadingAnimation(),e){var o=t?"publish":"draft";if(!t&&UncannyAutomator.recipe.isLive){var s=new a.Z({title:UncannyAutomator.i18n.confirmationModal.title,warning:(0,r.hF)(UncannyAutomator.i18n.confirmationModal.statusWarning,"<strong>","</strong>"),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.confirm}});s.setEvents({afterSetEvents:function(){s.show()},onConfirm:function(){var e;s.getElements().modal.box.buttons.confirm.addClass("uap-btn--loading").prop("disabled",!0),g.startLoadingAnimation();try{e=i.html.get(0).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,r.L8)("change_post_status",{post_ID:n,post_status:o,sentence_human_readable:i.brackets,sentence_human_readable_html:e},(function(){s.destroy(),new l.Z,new u.Z,new p.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the item status"),s.destroy(),g.stopLoadingAnimation(),g.setValue(!t,!1)}))},onCancel:function(){s.destroy(),g.setValue(!t,!1),g.stopLoadingAnimation()},afterHide:function(){s.destroy()}})}else{var c;try{c=i.html.get(0).outerHTML}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}(0,r.L8)("change_post_status",{post_ID:n,post_status:o,sentence_human_readable:i.brackets,sentence_human_readable_html:c},(function(){new u.Z,new l.Z,new p.Z}),(function(){console.log("‼️ ERROR-TODO. Couldn't set the item status"),g.stopLoadingAnimation(),g.setValue(!t,!1)}))}}else setTimeout((function(){g.stopLoadingAnimation(),g.setValue(!1,!1)}),1e3)})),f}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},4900:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var i=n(1290);const o=function(){var t=[];return(0,i.M0)("metabox",{type:"action"}).get(0).querySelectorAll(".uap-item").forEach((function(e){var n=e.itemId;t.push(n)})),t}},4248:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var i=n(1290),o=n(7172);const r=function(){var t=!1;if((0,i.Wr)("get",{filter:{itemType:"action"}}).length>1)t=!0;else{var e=(0,o.qG)(),n=UncannyAutomator.recipe.conditions;Object.keys(e).length+Object.keys(n).length>1&&(t=!0)}return t}},9973:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p}),n(5311);var i=n(1290),o=n(7464);_uo.utility.isDefined;var r=n(2841),a=n(3911);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var c=_uo.utility,l=(c.isDefined,c.isEmpty),u=c.getURLParameter,d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),(0,i.M0)("metabox",{type:"trigger"}).empty();var e=(0,i.Wr)("get",{filter:{itemType:"trigger"}});l(e)?(new o.Z("trigger"),new a.Z("trigger")):(new r.Z("trigger",e,!1),new a.Z("trigger"),this.isContinuingIntegrationConnection()&&new o.Z("trigger"))}var e,n;return e=t,(n=[{key:"isContinuingIntegrationConnection",value:function(){return 1==u(null,"ua_connecting_integration")&&"trigger"==u(null,"ua_connecting_integration_context")}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const p=d},3911:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var i=n(5311),o=n.n(i),r=n(1290),a=n(7464);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n(9973),n(6626),n(2841);var c=_uo.utility,l=c.isDefined,u=c.isEmpty;const d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.itemType=e,this.shouldCreateMetaboxFooter()&&this.createFooter()}var e,n;return e=t,(n=[{key:"shouldCreateMetaboxFooter",value:function(){var t=!1;if("trigger"==this.itemType){var e=(0,r.Wr)("get",{filter:{itemType:"trigger"}});u(e)&&l(UncannyAutomator.wp)&&UncannyAutomator.wp&&"anonymous"!=UncannyAutomator.recipe.type||(t=!0)}if("action"==this.itemType){var n=(0,r.Wr)("get",{filter:{itemType:"action"}});!u(n)&&(t=!0)}return t}},{key:"createFooter",value:function(){var t=this,e=o()("<div/>",{class:"metabox__footer"}),n=o()("<div/>",{class:"uap-btn uap-btn--secondary"});if(("action"==this.itemType||"trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type)&&e.append(n),"trigger"==this.itemType&&("user"==UncannyAutomator.recipe.type&&n.text(UncannyAutomator.i18n.trigger.addAnother),"anonymous"==UncannyAutomator.recipe.type)){var i=this.createAnonymousNotice();e.append(i)}"action"==this.itemType&&(n.text(UncannyAutomator.i18n.action.addAnother),e.addClass("add-action-btn")),("trigger"==this.itemType&&"user"==UncannyAutomator.recipe.type||"action"==this.itemType)&&n.on("click",(function(){new a.Z(t.itemType)})),(0,r.M0)("metabox",{type:this.itemType}).append(e)}},{key:"createAnonymousNotice",value:function(){return o()('\n\t\t\t<div class="description">\n\t\t\t\t'.concat(UncannyAutomator.i18n.recipeType.everyoneOnlyOneTrigger,' <a href="').concat((0,r.XE)("https://automatorplugin.com/knowledge-base/managing-triggers/",{medium:"anonymous_recipe_one_trigger",content:"learn_more"}),'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a>\n\t\t\t</div>\n\t\t'))}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2841:(t,e,n)=>{"use strict";n.d(e,{Z:()=>P});var i=n(5311),o=n.n(i),r=n(1290),a=n(515),s=n(9214),c=n(8104),l=n(7109),u=n(772),d=n(6626);function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var m=_uo.utility.isDefined,f=function(){function t(e,n,i,o){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.buttonContainer=void 0,this.button=void 0,this.buttonIcon=void 0,this.removeButton=void 0,this.asyncModeField=void 0,this.asyncModeHTML=void 0,this.delayNumberField=void 0,this.delayNumberHTML=void 0,this.delayUnitField=void 0,this.delayUnitHTML=void 0,this.scheduleDateField=void 0,this.scheduleDateHTML=void 0,this.scheduleTimeField=void 0,this.scheduleTimeHTML=void 0,this.scheduleNoticeHTML=void 0,this.modal=void 0,this.itemType=e,this.integrationID=n,this.itemCode=i,this.itemId=o,this.item=UncannyAutomator.recipe.items[o],this.asyncMode=this.item.meta.async_mode,UncannyAutomator.proVersion.startsWith("2"))return null;this.createAsyncButton()}var e,n;return e=t,n=[{key:"hasSchedule",value:function(){return!!this.asyncMode&&("delay"==this.asyncMode?this.item.meta.async_delay_number&&this.item.meta.async_delay_unit:"schedule"==this.asyncMode&&this.item.meta.async_schedule_time&&this.item.meta.async_schedule_date)}},{key:"getButtonText",value:function(){if(this.hasSchedule()){var t=UncannyAutomator.i18n.action.asyncActions[this.asyncMode];return(t+=" ")+"<strong>".concat(this.item.meta.async_sentence,"</strong>")}return UncannyAutomator.i18n.action.asyncActions.delay}},{key:"createAsyncButton",value:function(){var t=this;this.buttonContainer=o()("<div/>",{class:"item-async"}),this.button=o()("<uo-button/>"),this.button.prop("size","extra-small"),this.button.prop("color","secondary"),this.buttonIcon=o()("<uo-icon/>",{id:"clock"}),this.button.html(this.getButtonText()),this.button.prepend(this.buttonIcon),this.buttonContainer.append(this.button),this.hasSchedule()&&this.createRemoveButton(),this.button.on("click",(function(){t.buttonContainer.hasClass("disabled")||t.showModal()})),this.buttonContainer.on("automator:asyncButton:maybeDisable",(function(e,n){var i=o()(e.currentTarget);n?(i.attr("uap-tooltip",UncannyAutomator.i18n.action.asyncActions.pleaseSave),t.button.prop("disabled",!0)):(t.button.prop("disabled",!1),t.button.removeAttr("uap-tooltip",!1))})),this.$button=this.buttonContainer.get(0)}},{key:"enable",value:function(){this.button.removeAttr("uap-tooltip"),this.button.removeAttr("disabled")}},{key:"createRemoveButton",value:function(){var t=this;this.removeButton=o()("<span/>",{class:"async-remove"}),this.removeButtonIcon=o()("<uo-icon/>",{id:"times"}),this.removeButton.text(UncannyAutomator.i18n.action.asyncActions.remove),this.removeButton.on("click",(function(){t.removeSchedule()})),this.removeButton.prepend(this.removeButtonIcon),this.buttonContainer.append(this.removeButton)}},{key:"createModalContent",value:function(){var t=o()("<div/>",{class:"async-action-modal"});if(this.asyncModeHTML=this.createAsyncModeHTML(),this.asyncModeHTML.find(".form-radio__container:first").after(this.createDelayOptions()),this.asyncModeHTML.find(".form-radio__container:last").after(this.createScheduleOptions()),this.attachModeChangeEvent(),t.append(this.asyncModeHTML),this.hasSchedule()){var e=o()("<div/>",{class:"async-notice async-notice__blue"}),n=o()("<uo-icon/>",{id:"exclamation-triangle"});e.append(n),e.append(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice2),t.append(e)}return t}},{key:"showModal",value:function(){var t=UncannyAutomator.i18n.action.asyncActions.modal.confirm;this.hasSchedule()&&"schedule"==this.asyncMode&&(t=UncannyAutomator.i18n.action.asyncActions.schedule),this.modal=new u.Z({title:UncannyAutomator.i18n.action.asyncActions.modal.title,content:this.createModalContent(),buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:t}},{size:"large",customClass:"async-action"}),this.modalEvents()}},{key:"modalEvents",value:function(){var t=this;this.modal.setEvents({afterSetEvents:function(){t.modal.show()},onConfirm:function(){t.submitModal()},afterHide:function(){t.modal.destroy()}})}},{key:"submitModal",value:function(){var t=this.modal.getElements().modal.box.buttons.confirm;if(t.addClass("uap-btn--loading").prop("disabled",!0),this.validateForm().isValid){var e,n=this.asyncModeField.getValue(),i=this.delayNumberField.getValue(),o=this.delayUnitField.getValue(),r=this.scheduleTimeField.getValue(),a=this.scheduleDateField.getValue();e="delay"==n?this.delaySentence():this.scheduleSentence(),this.saveSchedule(n,i,o,r,a,e)}else t.removeClass("uap-btn--loading").prop("disabled",!1)}},{key:"delaySeconds",value:function(){var t,e=this.delayUnitField.getValue(),n=this.delayNumberField.getValue();switch(e){case"seconds":default:t=1;break;case"minutes":t=60;break;case"hours":t=3600;break;case"days":t=86400;break;case"years":t=31536e3}return n*t}},{key:"delaySentence",value:function(){var t=this.delayUnitField.getValue();return 1==this.delayNumberField.getValue()&&(t=t.slice(0,-1)),"".concat(this.delayNumberField.getValue()," ").concat(UncannyAutomator.i18n.action.asyncActions.modal[t].toLowerCase())}},{key:"scheduleSeconds",value:function(){return Date.parse("".concat(this.scheduleDateField.getValue()," ").concat(this.scheduleTimeField.getValue()))}},{key:"scheduleSentence",value:function(){return"".concat(this.scheduleDateField.getValue()," @ ").concat(this.scheduleTimeField.getValue())}},{key:"saveSchedule",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;(0,r.L8)("schedule_action",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId,asyncMode:t,delayNumber:n,delayUnit:i,scheduleTime:o,scheduleDate:a,scheduleSentence:s},(function(){e.modal.destroy(),new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){e.modal.destroy(),console.log("‼️ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"removeSchedule",value:function(){(0,r.L8)("remove_schedule",{recipeId:UncannyAutomator.recipe.id,actionId:this.itemId},(function(){new d.Z,UncannyAutomator.recipe.isValid||UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}),(function(){console.log("‼️ ERROR-TODO. Couldn't schedule the item"),new d.Z}))}},{key:"createTimeZone",value:function(){var t=o()("<a/>",{href:UncannyAutomator.i18n.action.asyncActions.modal.timezoneLink,target:"_blank"}),e=o()("<uo-icon/>",{id:"question-circle"}),n=o()("<span/>",{class:"schedule-fields__description"}).html("<strong>".concat(UncannyAutomator.i18n.action.asyncActions.modal.timezone,"</strong>: ").concat(UncannyAutomator.i18n.action.asyncActions.modal.timezoneString));return t.append(e),n.append(t),n}},{key:"createAsyncModeHTML",value:function(){return this.asyncModeField=new l.Z("radio",{itemType:"action",optionCode:"schedule_type",name:"schedule-type",isRequired:!0,currentValue:this.asyncMode?this.asyncMode:"delay",options:[{value:"delay",text:UncannyAutomator.i18n.action.asyncActions.delay},{value:"schedule",text:UncannyAutomator.i18n.action.asyncActions.schedule}]}),this.asyncModeField.createFormElement().addClass("schedule-type-radio")}},{key:"attachModeChangeEvent",value:function(){var t=this;this.asyncModeHTML.on("automator:field:change",(function(){var e,n=t.asyncModeField.getValue();e="schedule"==n?UncannyAutomator.i18n.action.asyncActions.schedule:UncannyAutomator.i18n.action.asyncActions.modal.confirm,t.hasSchedule()||("schedule"==n?t.scheduleNoticeHTML.removeClass("hidden"):t.scheduleNoticeHTML.addClass("hidden")),t.modal.elements.modal.box.buttons.confirm.text(e)}))}},{key:"createScheduleOptions",value:function(){var t=o()("<div/>",{class:"schedule-options"}),e=o()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleDesc),n=o()("<div/>",{class:"schedule-fields"});return this.hasSchedule()||(this.scheduleNoticeHTML=o()("<div/>",{class:"schedule-notice hidden"}),this.scheduleNoticeHTML.text(UncannyAutomator.i18n.action.asyncActions.modal.scheduleNotice1),this.scheduleNoticeHTML.addClass("schedule-notice__yellow")),t.append(e),n.append(this.createScheduleDateHTML()),n.append(this.createScheduleTimeHTML()),t.append(n),t.append(this.createTimeZone()),t.append(this.scheduleNoticeHTML),t}},{key:"createDelayOptions",value:function(){var t=o()("<div/>",{class:"delay-options"}),e=o()("<span/>",{class:"async-mode__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.delayDesc),n=o()("<div/>",{class:"delay-fields"});this.delayNumberHTML=this.createDelayNumberHTML(),this.delayUnitHTML=this.createDelayUnitHTML();var i=o()("<span/>",{class:"delay-fields__description"}).text(UncannyAutomator.i18n.action.asyncActions.modal.after);return n.append(this.delayNumberHTML),n.append(this.delayUnitHTML),n.append(i),t.append(e),t.append(n),t}},{key:"createDelayNumberHTML",value:function(){this.delayNumberField=new l.Z("int",{itemType:"action",optionCode:"delay-number",isRequired:!0,placeholder:"10",supportsTokens:!1,currentValue:this.item.meta.async_delay_number?this.item.meta.async_delay_number:""},!0,this.validateDelayNumber);var t=this.delayNumberField.createFormElement();return t.addClass("delay-fields__number"),this.delayNumberField.initCodeMirror(),t}},{key:"createDelayUnitHTML",value:function(){return this.delayUnitField=new l.Z("select",{itemType:"action",optionCode:"delay-unit",currentValue:this.item.meta.async_delay_unit?this.item.meta.async_delay_unit:"minutes",customClass:"hide-this",supportsCustomValue:!1,optionsShowID:!1,isRequired:!0,options:[{value:"seconds",text:UncannyAutomator.i18n.action.asyncActions.modal.seconds},{value:"minutes",text:UncannyAutomator.i18n.action.asyncActions.modal.minutes},{value:"hours",text:UncannyAutomator.i18n.action.asyncActions.modal.hours},{value:"days",text:UncannyAutomator.i18n.action.asyncActions.modal.days},{value:"years",text:UncannyAutomator.i18n.action.asyncActions.modal.years}]}),this.delayUnitField.createFormElement().addClass("delay-fields__unit")}},{key:"createScheduleDateHTML",value:function(){var t,e,n;this.scheduleDateField=new l.Z("date",(t={itemType:"action",optionCode:"schedule-date",isRequired:!0,placeholder:UncannyAutomator.i18n.action.asyncActions.modal.today,supportsTokens:!1,currentValue:this.item.meta.async_schedule_date?this.item.meta.async_schedule_date:""},e="placeholder",n=UncannyAutomator.i18n.format.date.selectDate,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t));var i=this.scheduleDateField.createFormElement();return i.addClass("schedule-fields__date"),this.scheduleDateField.initCodeMirror(),i}},{key:"createScheduleTimeHTML",value:function(){this.scheduleTimeField=new l.Z("time",{itemType:"action",optionCode:"schedule-time",isRequired:!0,supportsTokens:!1,currentValue:this.item.meta.async_schedule_time?this.item.meta.async_schedule_time:"",placeholder:UncannyAutomator.i18n.format.date.selectTime});var t=this.scheduleTimeField.createFormElement();return t.addClass("schedule-fields__time"),this.scheduleTimeField.initCodeMirror(),t}},{key:"validateForm",value:function(){var t;switch(this.asyncModeField.getValue()){case"schedule":t=this.validateScheduleFields();break;case"delay":t=this.delayNumberField.validate();break;default:t={isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.unsupported}}return t.isValid?{isValid:!0}:t}},{key:"validateScheduleFields",value:function(){var t=this.scheduleDateField.validate();return t.isValid&&(t=this.scheduleTimeField.validate()),t}},{key:"validateDelayNumber",value:function(t,e){return t<1?{isValid:!1,message:UncannyAutomator.i18n.action.asyncActions.modal.validation.positiveNumber}:{isValid:!0}}},{key:"shouldAddButton",value:function(){return"action"==this.itemType&&m(UncannyAutomator.wp)&&UncannyAutomator.wp}}],n&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const h=f;var g=n(5865);function v(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const y=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.createDragHandle()}var e,n;return e=t,(n=[{key:"createDragHandle",value:function(){return this.handle=document.createElement("div"),this.handle.setAttribute("class","item-handle"),this.handleIcon=document.createElement("uo-icon"),this.handleIcon.setAttribute("id","sort-circle"),this.handle.append(this.handleIcon),this.handle}}])&&v(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var b=n(4900),_=n(4248),w=n(7172),A=n(8500),k=n(2431);function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var T=new WeakSet,U=function(){function t(e){var n,i,o=e.itemId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,i=T),i.add(n),this.item=UncannyAutomator.recipe.items[o],this.createButton(),this.handleClick(),this.disableWhenUserEditsAction()}var e,n;return e=t,(n=[{key:"createButton",value:function(){var t=document.createElement("div");t.classList.add("uap-item-button","uap-item-button--conditions"),t.innerHTML='\n\t\t\t<uo-button\n\t\t\t\tcolor="secondary"\n\t\t\t\tsize="extra-small"\n\t\t\t\tclass="uap-conditions-action-button"\n\t\t\t>\n\t\t\t\t<uo-icon id="code-merge"></uo-icon>'.concat(UncannyAutomator.i18n.conditions.filter,"\n\t\t\t</uo-button>\n\t\t");var e=t.querySelector("uo-button");(0,w.a9)()||(e.setAttribute("disabled",""),t.setAttribute("uap-tooltip",UncannyAutomator.i18n.conditions.unlockConditions)),this.$wrapper=t,this.$button=e}},{key:"handleClick",value:function(){var t=this;this.$button.addEventListener("click",(function(){(0,w.a9)()?(function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(t,T,E).call(t),t.renderListOfConditions()):t.promotePro()}))}},{key:"renderListOfConditions",value:function(){var t=new CustomEvent("automator/action/conditions/add",{detail:{conditionsGroupId:this.conditionsGroupId}});document.dispatchEvent(t),new A.Z({conditionsGroupId:this.conditionsGroupId,comingFrom:"action-filter-button"})}},{key:"disableWhenUserEditsAction",value:function(){var t=this;document.addEventListener("automator/item/options/open",(function(e){t.item.id==e.detail.itemId&&(t.$button.setAttribute("disabled",""),t.$wrapper.setAttribute("uap-tooltip",UncannyAutomator.i18n.conditions.pleaseSaveActionFirst))}))}},{key:"promotePro",value:function(){(0,r.YQ)((0,r.XE)("https://automatorplugin.com/pricing/",{medium:"recipe_creator",content:"add_condition_btn"}))}},{key:"shouldAddButton",value:function(){return"action"==this.item.itemType&&!this.item.hasConditions&&!this.item.isMissing}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function E(){var t=new k.Z;t.actions=[this.item.id],this.conditionsGroupId=t.id}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var M=_uo.utility,S=M.isDefined,O=M.isEmpty,I=n(7771),$=function(){function t(e,n){var i=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];x(this,t);var s=(0,r.M0)("metabox",{type:e});if(Object.keys(n).length,(0,_.Z)()){var c=o()("<div/>",{class:"ua-sortable"});this.innerContainerSortable=c;var l=Object.values(n).sort((function(t,e){return t.menuOrder-e.menuOrder}));o().each(l,(function(t,n){if(e==n.itemType){var o=i.createItem(n.id,a);c.append(o)}})),s.append(c)}else o().each(n,(function(t,n){if(e==n.itemType){var o=i.createItem(t);s.append(o)}}))}var e,n;return e=t,n=[{key:"createItem",value:function(t,e){var n=UncannyAutomator.recipe.items[t],i=o()("<div/>",{class:"item uap-item","data-id":t});i[0].setAttribute("data-integration",n.integrationCode),i[0].setAttribute("data-item",n.itemCode),i[0].itemId=t,n.isMissing&&i.addClass("item--missing"),n.meta.async_mode&&i.addClass("item--hasSchedule"),O(n.inlineCss)||(n.inlineCss=n.inlineCss.replace(/{{item_id}}/g,t),i.prepend(n.inlineCss));var r=this.createInner(t),a=this.createNotice(n);if(e&&"action"==n.itemType&&!n.hasConditions){var s=new y(t);i.append(s)}return i.append(r),i.append(a),i.on("automator:item:open",(function(t,e){var n=i.find(".item-async");o()(n[0]).trigger("automator:asyncButton:maybeDisable",e)})),i}},{key:"createInner",value:function(t){var e=UncannyAutomator.recipe.items[t],n=e.isMissing?null:e.integrationCode,i={$sentence:new g.Z(e.itemType,n,e.itemCode,t),$icon:new s.Z(n),$integrationNameTag:new c.Z({integrationId:n,customIntegrationName:e.integrationName}),$actionMenu:new a.Z(e.itemType,n,e.itemCode,t),buttons:[]},o=new U({itemId:t});o.shouldAddButton()&&i.buttons.push(o.$wrapper);var r=new h(e.itemType,n,e.itemCode,t);r.shouldAddButton()&&i.buttons.push(r.$button);var l=document.createElement("div");return l.classList.add("uap-item-inner"),l.insertAdjacentHTML("beforeEnd",'\n\t\t\t<div class="uap-item-sidebar"></div>\n\t\t\t<div class="uap-item-top-header">\n\t\t\t\t<div class="uap-item-top-header-left"></div>\n\t\t\t\t<div class="uap-item-top-header-right"></div>\n\t\t\t</div>\n\t\t\t<div class="uap-item-main"></div>\n\t\t\t<div class="uap-item-inner-content"></div>\n\t\t'),l.querySelector(".uap-item-sidebar").appendChild(i.$icon),l.querySelector(".uap-item-top-header-left").appendChild(i.$integrationNameTag),l.querySelector(".uap-item-top-header-right").appendChild(i.$actionMenu.get(0)),l.querySelector(".uap-item-main").appendChild(i.$sentence.get(0)),i.buttons.forEach((function(t){l.querySelector(".uap-item-top-header-right").appendChild(t)})),S(e.shouldShowItemId)&&e.shouldShowItemId&&l.querySelector(".uap-item-top-header-left").appendChild(this.$createItemID(t)),l}},{key:"createNotice",value:function(t){var e;return t.isMissing&&(e=o()("<uo-alert/>",{type:"warning"})).text(UncannyAutomator.i18n.itemMissing),e}},{key:"makeSortable",value:function(){var t=this;I(this.innerContainerSortable,{placeholder:'<div class="item"></div>',handle:".item-handle, .uap-conditions-block-drag-handle",items:"#recipe-actions-ui .ua-sortable > .uap-item, .uap-conditions-block",hoverClass:"hover"})[0].addEventListener("sortupdate",(function(e){t.orderUpdated(e)}))}},{key:"orderUpdated",value:function(t){var e=(0,b.Z)();(0,r.L8)("actions_order",{recipeID:UncannyAutomator.recipe.id,newOrder:e},(function(t){new d.Z}),(function(t){new d.Z}))}},{key:"$createItemID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.createElement("div");return e.classList.add("uap-item-id"),e.innerText=sprintf("#%1$s",t),e}}],n&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();const P=$},838:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var i=n(5311),o=n.n(i),r=(n(3198),n(1290)),a=n(2593),s=n(7109),c=n(9973),l=n(6626);function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var d=_uo.utility.isEmpty;const p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={metabox:o()("#uo-automator-publish-metabox"),timesPerUser:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_completions_allowed"},timesPerRecipe:{editLink:null,hiddenBox:null,saveButton:null,cancelButton:null,endPoint:"recipe_max_completions_allowed"},toggle:null},this.createMetabox()}var e,n;return e=t,(n=[{key:"createMetabox",value:function(){var t=o()("<div/>",{id:"uap-publish-metabox"}),e=o()("<div/>",{class:"metabox__content"}),n=o()("<div/>",{class:"metabox__footer"});if("anonymous"!=UncannyAutomator.recipe.type){var i=o()("<div/>",{class:"publish-row"}),c=o()("<div/>",{class:"publish-row__visible"}),l=o()("<span/>",{class:"publish-row__icon"}),u=o()("<uo-icon/>",{id:"repeat"}),p=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerUser);UncannyAutomator.recipe.publish.timesPerUser=-1==UncannyAutomator.recipe.publish.timesPerUser?"":UncannyAutomator.recipe.publish.timesPerUser;var m=d(UncannyAutomator.recipe.publish.timesPerUser)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerUser,f=o()("<span/>",{class:"publish-row__value"}).text(m),h=o()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),g=o()("<div/>",{class:"publish-row__hidden"}),v=o()("<div/>",{class:"publish-row__settings"});this.elements.timesPerUser.editLink=h,this.elements.timesPerUser.hiddenBox=g;var y=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerUser,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(t){var e={isValid:!1,message:""};return t>=1?e.isValid=!0:e.message=UncannyAutomator.i18n.publish.oneOrBigger,e}));this.timesField=y;var b=o()("<div/>",{class:"publish-row__buttons"}),_=o()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),w=o()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);this.elements.timesPerUser.saveButton=_,this.elements.timesPerUser.cancelButton=w,b.append(_),b.append(w),v.append(y.getFormElement()),v.append(b),g.append(v),l.append(u),c.append(l),c.append(p),c.append(f),c.append(h),i.append(c),i.append(g),e.append(i)}var A=this.timesPerRecipe();e.append(A);var k=o()("<div/>",{class:"publish-row"}),C=o()("<div/>",{class:"publish-row__visible"}),T=o()("<span/>",{class:"publish-row__icon"}),U=o()("<uo-icon/>",{id:"user-astronaut"}),E=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeType),x=o()("<span/>",{class:"publish-row__value"}),D=o()('\n\t\t\t\t<a href="'.concat((0,r.XE)("https://automatorplugin.com/knowledge-base/creating-a-recipe/",{medium:"publish_metabox",content:"recipe_type_question_icon"}),'" class="publish-row__learn-more" target="_blank"><uo-icon id="question-circle"></uo-icon></a>\n\t\t\t'));"user"==UncannyAutomator.recipe.type&&x.text(UncannyAutomator.i18n.recipeType.userRecipeName),"anonymous"==UncannyAutomator.recipe.type&&x.text(UncannyAutomator.i18n.recipeType.everyoneRecipeName),T.append(U),C.append(T),C.append(E),C.append(x),C.append(D),k.append(C),e.append(k);var M=o()("<div/>",{class:"publish-row"}),S=o()("<div/>",{class:"publish-row__visible"}),O=o()("<span/>",{class:"publish-row__icon"}),I=o()("<uo-icon/>",{id:"calendar"}),$=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.createdOn),P=o()("<span/>",{class:"publish-row__value"}).text(UncannyAutomator.recipe.publish.createdOn);O.append(I),S.append(O),S.append($),S.append(P),M.append(S),e.append(M);var L=UncannyAutomator.recipe.publish.recipeRunTimes,j=o()("<a/>",{class:"publish-row__recipe-runs",target:"_blank",href:UncannyAutomator.recipe.publish.recipeRunTimesUrl.replace(/&amp;/g,"&")}).text(UncannyAutomator.recipe.publish.recipeRunTimesViewLogs),F=o()("<div/>",{class:"publish-row"}),R=o()("<div/>",{class:"publish-row__visible"}),V=o()("<span/>",{class:"publish-row__icon"}),N=o()("<uo-icon/>",{id:"repeat"}),q=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.recipeRunTimes);V.append(N),R.append(V),R.append(q),R.append(o()("<span/>",{class:"publish-row__value"}).text(L)),L>0&&R.append(j),F.append(R),e.append(F);var H=o()("<div/>",{class:"publish-row"}),B=o()("<div/>",{class:"publish-row__visible"}),W=o()("<a/>",{class:"publish-row__copy-to-draft button button-secondary",href:UncannyAutomator.recipe.publish.copyToDraft.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.publish.copyRecipe);B.append(W),H.append(B),e.append(H);var z=o()("<div/>",{class:"publish-footer__row uap-clear"}),Z=o()("<div/>",{class:"publish-footer__left"}),G=o()("<a/>",{class:"publish-footer__move-to-draft",href:UncannyAutomator.recipe.publish.moveToTrash.replace(/&amp;/g,"&")}).text(UncannyAutomator.i18n.proOnly.moveToTrash),Y=o()("<div/>",{class:"publish-footer__right"}),K=new s.Z("checkbox",{color:"gutenberg",align:"right",toggle:{on:UncannyAutomator.i18n.status.liveRecipe,off:UncannyAutomator.i18n.status.draftRecipe},currentValue:UncannyAutomator.recipe.isLive});UncannyAutomator.recipe.publish.statusToggle=K;var J=K.getFormElement();this.recipeStatusToggle=K,this.elements.toggle=J,Z.append(G),Y.append(J),z.append(Z),z.append(Y),n.append(z),t.append(e),t.append(n),this.elements.metabox.html(t),new a.Z,this.bind(),this.validateStatus()}},{key:"timesPerRecipe",value:function(){var t=o()("<div/>",{class:"publish-row"}),e=o()("<div/>",{class:"publish-row__visible"}),n=o()("<span/>",{class:"publish-row__icon"}),i=o()("<uo-icon/>",{id:"stopwatch"}),r=o()("<span/>",{class:"publish-row__name"}).text(UncannyAutomator.i18n.publish.timesPerRecipe);UncannyAutomator.recipe.publish.timesPerRecipe=-1==UncannyAutomator.recipe.publish.timesPerRecipe?"":UncannyAutomator.recipe.publish.timesPerRecipe;var a=d(UncannyAutomator.recipe.publish.timesPerRecipe)?UncannyAutomator.i18n.publish.unlimited:UncannyAutomator.recipe.publish.timesPerRecipe,c=o()("<span/>",{class:"publish-row__value"}).text(a),l=o()("<span/>",{class:"publish-row__edit"}).text(UncannyAutomator.i18n.edit),u=o()("<div/>",{class:"publish-row__hidden"}),p=o()("<div/>",{class:"publish-row__settings"});this.elements.timesPerRecipe.editLink=l,this.elements.timesPerRecipe.hiddenBox=u;var m=new s.Z("int",{currentValue:UncannyAutomator.recipe.publish.timesPerRecipe,description:UncannyAutomator.i18n.publish.leaveEmpty,placeholder:UncannyAutomator.i18n.publish.unlimited},!0,(function(t){var e={isValid:!1,message:""};return t>=1?e.isValid=!0:e.message=UncannyAutomator.i18n.publish.oneOrBigger,e}));this.timesRecipeField=m;var f=o()("<div/>",{class:"publish-row__buttons"}),h=o()("<div/>",{class:"uap-btn uap-btn--primary"}).text(UncannyAutomator.i18n.save),g=o()("<div/>",{class:"uap-btn uap-btn--secondary"}).text(UncannyAutomator.i18n.cancel);return this.elements.timesPerRecipe.saveButton=h,this.elements.timesPerRecipe.cancelButton=g,f.append(h),f.append(g),p.append(m.getFormElement()),p.append(f),u.append(p),n.append(i),e.append(n),e.append(r),e.append(c),e.append(l),t.append(e),t.append(u),t}},{key:"validateStatus",value:function(){UncannyAutomator.recipe.isLive&&!UncannyAutomator.recipe.isValid&&UncannyAutomator.recipe.publish.statusToggle.setValue(!1)}},{key:"validateTimesPerFields",value:function(e,n,i){e.editLink.on("click",(function(){e.hiddenBox.slideToggle(300)})),e.cancelButton.on("click",(function(){e.hiddenBox.slideToggle(300,(function(){new t}))})),e.saveButton.on("click",(function(){if(i.validate().isValid){e.saveButton.addClass("uap-btn--loading uap-btn--disabled");var o=i.getValue();d(o)&&(o=-1),(0,r.L8)(e.endPoint,{post_ID:UncannyAutomator.recipe.id,recipe_completions_allowed:o},(function(){"recipe_completions_allowed"==e.endPoint?UncannyAutomator.recipe.publish.timesPerUser=o:UncannyAutomator.recipe.publish.timesPerRecipe=o,e.hiddenBox.slideToggle(300,(function(){new t,new l.Z,new c.Z}))}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't save times per user"),i.setValue(n),e.saveButton.removeClass("uap-btn--loading uap-btn--disabled")}))}})),i.getField().on("keyup",(function(t){13==t.keyCode&&e.saveButton.trigger("click")}))}},{key:"bind",value:function(){var e=this;"anonymous"!=UncannyAutomator.recipe.type&&this.validateTimesPerFields(this.elements.timesPerUser,UncannyAutomator.recipe.publish.timesPerUser,this.timesField),this.validateTimesPerFields(this.elements.timesPerRecipe,UncannyAutomator.recipe.publish.timesPerRecipe,this.timesRecipeField),this.elements.toggle.on("automator:field:change",(function(){e.recipeStatusToggle.startLoadingAnimation();var n=e.recipeStatusToggle.getValue(),i=n?"publish":"draft";!n||n&&UncannyAutomator.recipe.isValid?(0,r.L8)("change_post_status",{post_ID:UncannyAutomator.recipe.id,post_status:i},(function(){UncannyAutomator.recipe.isLive=n,new t,new l.Z,new c.Z}),(function(){UncannyAutomator.dev.developerMode&&console.error("Couldn't set the recipe status"),setTimeout((function(){e.recipeStatusToggle.stopLoadingAnimation(),e.recipeStatusToggle.setValue(!1,!1)}),1e3)})):(UncannyAutomator.recipe.errorMode=!0,new a.Z,setTimeout((function(){e.recipeStatusToggle.stopLoadingAnimation(),e.recipeStatusToggle.setValue(!1,!1)}),1e3))}))}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2593:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(5311),o=n.n(i);function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=_uo.utility.isEmpty;const s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elements={container:o()("#uo-uap-notices")},0==this.elements.container.length&&(this.createContainer(),this.elements.container=o()("#uo-uap-notices")),this.emptyContainer(),this.createWarning(),UncannyAutomator.recipe.errorMode&&this.createError()}var e,n;return e=t,(n=[{key:"emptyContainer",value:function(){this.elements.container.empty()}},{key:"createContainer",value:function(){var t=o()("<div/>",{id:"uo-uap-notices",class:"uap"});o()("#uap-publish-metabox").prepend(t)}},{key:"createError",value:function(){if(!a(UncannyAutomator.recipe.message.error)){var t=o()("<div/>",{class:"uo-notice uo-notice--error"}).text(UncannyAutomator.recipe.message.error);this.elements.container.append(t)}}},{key:"createWarning",value:function(){if(!a(UncannyAutomator.recipe.message.warning)){var t=o()("<div/>",{class:"uo-notice uo-notice--warning"}).text(UncannyAutomator.recipe.message.warning);this.elements.container.append(t)}}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()},8027:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>Tokens});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5311),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3198),_common_utilities_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1290),_common_modal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(772),_field__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7109);function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){if(e&&("object"===_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var _uo$utility=_uo.utility,isDefined=_uo$utility.isDefined,isEmpty=_uo$utility.isEmpty,isObject=_uo$utility.isObject,Tokens=function(){function Tokens(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Tokens),this.saveData(t,e,n),this.getData()}return _createClass(Tokens,[{key:"saveData",value:function(t,e,n){this.itemType=t,this.fieldType=e,this.options=Object.assign({includeGroupName:!0,includeGroupIcon:!0,includeGroupTokens:!0,unsupportedTokens:[]},n),this.tokensRegEx=new RegExp(/\{\{(.*?)\}\}/gm),this.tokensRegExNoAttributes=new RegExp(/(?<=[^\="])\{\{(.*?)\}\}(?<=[^\"])/gm),this.tokensRegExNoAttributesFallback=new RegExp(/[^\="]\{\{(.*?)\}\}[^\"]/gm),this.tokensThatRequireUser=[]}},{key:"getData",value:function(){this.tokens=this.getAllTokens()}},{key:"getAllTokens",value:function(){var t=[],e=this.getCommonTokens();e.tokens.length>0&&t.push(e);var n=this.getAdvancedTokens();n.tokens.length>0&&t.push(n);var i=this.getItemsTokens();return[].concat(_toConsumableArray(t),_toConsumableArray(i))}},{key:"filterUnsupportedTokens",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return isEmpty(this.options.unsupportedTokens)||(e=e.filter((function(e){return!t.options.unsupportedTokens.includes(e.id)}))),e}},{key:"getCommonTokens",value:function(){var t=this,e={id:"common"};return this.options.includeGroupName&&(e.name=UncannyAutomator.i18n.tokens.global.common),this.options.includeGroupIcon&&(e.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<uo-icon id="bolt"></uo-icon>\n\t\t\t')),this.options.includeGroupTokens&&(e.tokens=[],("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&e.tokens.push(new Token({id:"user_id",type:"int",name:UncannyAutomator.i18n.tokens.global.userID,requiresUser:!0}),new Token({id:"user_username",type:"text",name:UncannyAutomator.i18n.tokens.global.userUsername,requiresUser:!0}),new Token({id:"user_firstname",type:"text",name:UncannyAutomator.i18n.tokens.global.userFirstName,requiresUser:!0}),new Token({id:"user_lastname",type:"text",name:UncannyAutomator.i18n.tokens.global.userLastName,requiresUser:!0}),new Token({id:"user_email",type:"email",name:UncannyAutomator.i18n.tokens.global.userEmail,requiresUser:!0}),new Token({id:"user_displayname",type:"text",name:UncannyAutomator.i18n.tokens.global.userDisplay,requiresUser:!0}),new Token({id:"user_role",type:"text",name:UncannyAutomator.i18n.tokens.global.userRole,requiresUser:!0}),new Token({id:"reset_pass_link",type:"url",name:UncannyAutomator.i18n.tokens.global.userResetPassLink,requiresUser:!0})),e.tokens.push(new Token({id:"admin_email",type:"email",name:UncannyAutomator.i18n.tokens.global.adminEmail})),UncannyAutomator.isMultisite&&isDefined(UncannyAutomator.wp)&&UncannyAutomator.wp&&e.tokens.push(new Token({id:"current_blog_id",type:"int",name:UncannyAutomator.i18n.tokens.global.currentBlogId,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"site_name",type:"text",name:UncannyAutomator.isMultisite?UncannyAutomator.i18n.tokens.global.currentSiteName:UncannyAutomator.i18n.tokens.global.siteName}),new Token({id:"site_url",type:"url",name:UncannyAutomator.isMultisite?UncannyAutomator.i18n.tokens.global.currentSiteUrl:UncannyAutomator.i18n.tokens.global.siteUrl}),new Token({id:"recipe_name",name:UncannyAutomator.i18n.tokens.global.recipeName}),new Token({id:"recipe_id",type:"int",name:UncannyAutomator.i18n.tokens.global.recipeId}),new Token({id:"current_date",name:UncannyAutomator.i18n.tokens.global.currentDate}),new Token({id:"current_time",name:UncannyAutomator.i18n.tokens.global.currentTime}),new Token({id:"user_ip_address",name:UncannyAutomator.i18n.tokens.global.user_ip_address}),new Token({id:"user_reset_pass_url",name:UncannyAutomator.i18n.tokens.global.user_reset_pass_url}))),e.tokens=this.filterUnsupportedTokens(e.tokens),e.tokens.forEach((function(e){e.requiresUser&&t.tokensThatRequireUser.push(e.id)})),e}},{key:"getAdvancedTokens",value:function(){var t=this,e={id:"advanced",tokens:[]};return this.options.includeGroupName&&(e.name=UncannyAutomator.i18n.tokens.global.advanced),this.options.includeGroupIcon&&(e.icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t<uo-icon id="bolt"></uo-icon>\n\t\t\t')),this.options.includeGroupTokens&&(e.tokens.push(new PostMetaToken({context:this.itemType})),("anonymous"!=UncannyAutomator.recipe.type||"trigger"!=this.itemType&&"user-selector"!=this.itemType)&&(e.tokens.push(new UserMetaToken({context:this.itemType})),isDefined(UncannyAutomator.wp)&&"1"===UncannyAutomator.wp&&e.tokens.push(new Token({id:"AUTOLOGINLINK",type:"text",name:UncannyAutomator.i18n.tokens.global.autoLoginLink,cacheable:!0,requiresUser:!0}))),e.tokens.push(new Token({id:"recipe_total_run",type:"int",name:UncannyAutomator.i18n.tokens.global.recipeTotalRunToken,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"recipe_run",type:"int",name:UncannyAutomator.i18n.tokens.global.recipeRunToken,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"current_unix_timestamp",type:"text",name:UncannyAutomator.i18n.tokens.global.current_unix_timestamp,cacheable:!0,requiresUser:!1})),e.tokens.push(new Token({id:"currentdate_unix_timestamp",type:"text",name:UncannyAutomator.i18n.tokens.global.currentdate_unix_timestamp,cacheable:!0,requiresUser:!1}))),e.tokens=this.filterUnsupportedTokens(e.tokens),e.tokens.forEach((function(e){e.requiresUser&&t.tokensThatRequireUser.push(e.id)})),e}},{key:"getItemsTokens",value:function(){var t=this,e=[],n=UncannyAutomator.recipe.items;return isDefined(this.itemType)&&(n={},["action","closure","user-selector"].includes(this.itemType)&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_2__.Wr)("get",{filter:{itemType:"trigger"}}))),"closure"==this.itemType&&(n=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend({},n,(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_2__.Wr)("get",{filter:{itemType:"action"}})))),Object.entries(n).forEach((function(n){var i=_slicedToArray(n,2),o=(i[0],i[1]),r=t.getItemTokens(o);(r.tokens.length>0||!t.options.includeGroupTokens)&&e.push(r)})),e}},{key:"getItemTokens",value:function getItemTokens(item){var tokensGroup={id:item.itemCode,integrationId:item.integrationCode};if(this.options.includeGroupName){var itemSentence=item.sentence;item.isMissing||(itemSentence=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_2__.Vx)(item.integrationCode,item.itemType,item.itemCode).sentence),tokensGroup.name=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_2__.qh)(item,itemSentence,UncannyAutomator.recipe.items[item.id].meta).html}if(this.options.includeGroupIcon){var $icon;if(isDefined(UncannyAutomator.integrations[item.integrationCode])){var integration=UncannyAutomator.integrations[item.integrationCode];isDefined(integration.icon_svg)?$icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_svg,'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')):isDefined(integration.icon_16)&&isDefined(integration.icon_32)&&($icon=jquery__WEBPACK_IMPORTED_MODULE_0___default()('\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tsrc="'.concat(integration.icon_16,'"\n\t\t\t\t\t\t\talt="').concat(integration.name,'"\n\t\t\t\t\t\t>\n\t\t\t\t\t')))}tokensGroup.icon=$icon}if(this.options.includeGroupTokens){var itemTokens=[];if(Object.entries(item.options).forEach((function(t){var e=_slicedToArray(t,2);e[0],e[1].fields.forEach((function(t){var e=t.getAttributes();"repeater"==e.fieldType?t.fieldRows.forEach((function(t,n){var i=n;t.forEach((function(t){itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(e.optionCode,":").concat(i,":").concat(t.getAttributes().optionCode),name:"".concat(e.tokenName," - ").concat((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.rowNumber,i+1)," - ").concat(t.getAttributes().tokenName),type:"select"==t.getAttributes().fieldType||"textarea"==t.getAttributes().fieldType?"text":t.getAttributes().fieldType,value:t.getValue(),fieldId:t.getAttributes().optionCode,itemID:item.id,itemType:item.itemType,cacheable:!1})}))})):isDefined(e.customFieldTokens)&&isObject(e.customFieldTokens)?Object.entries(e.customFieldTokens).forEach((function(n){var i=_slicedToArray(n,2),o=i[0],r=i[1];itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(o),name:r,type:"select"==e.fieldType||"textarea"==e.fieldType?"text":e.fieldType,value:t.getValue(),fieldId:e.optionCode,itemID:item.id,cacheable:!0})})):itemTokens.push({id:"".concat(item.id,":").concat(item.itemCode,":").concat(e.optionCode),name:e.tokenName,type:"select"==e.fieldType||"textarea"==e.fieldType?"text":e.fieldType,value:t.getValue(),fieldId:e.optionCode,itemID:item.id,cacheable:!0})}))})),item.tokens.forEach((function(t){itemTokens.push({id:"".concat(item.id,":").concat(t.tokenIdentifier,":").concat(t.tokenId),name:t.tokenName,type:isDefined(t.tokenType)?t.tokenType:"text",itemID:item.id,cacheable:!0})})),tokensGroup.tokens=itemTokens,tokensGroup.tokens=this.filterUnsupportedTokens(tokensGroup.tokens),!isEmpty(item.filterTokens))try{var filterTokens=eval("(".concat(item.filterTokens.replace("<script>","").replace("<\/script>","").trim(),")"));itemTokens=filterTokens(tokensGroup,item)}catch(t){UncannyAutomator.dev.developerMode&&(console.warn(t),console.log(item.filterTokens))}}return tokensGroup}},{key:"filterTokensByType",value:function(t){var e=this;return isDefined(this.fieldType)&&(["text","textarea","url"].includes(this.fieldType)||(t=t.filter((function(t){var n=t.type;return"float"==e.fieldType&&"int"==n&&(n="float"),e.fieldType==n})))),t}},{key:"createTokenDOMNode",value:function(t){var e=null,n=this.getTokenDataByID(t);if(isDefined(n)){if(isDefined(UncannyAutomator.cache.tokens[n.id]))e=UncannyAutomator.cache.tokens[n.id];else{(e=document.createElement("span")).classList.add("uap-token"),e.appendChild(n.group.icon[0].cloneNode());var i=document.createElement("span");i.classList.add("uap-token__name"),i.innerHTML=n.name,e.appendChild(i),isDefined(n.itemID)&&UncannyAutomator.recipe.items[n.itemID].shouldShowItemId&&i.insertAdjacentHTML("afterBegin",'<span class="uap-token__id">'.concat((0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)("#%s: ",n.itemID),"</span>")),n.cacheable&&(UncannyAutomator.cache.tokens[n.id]=e)}e=e.cloneNode(!0)}else{(e=document.createElement("span")).classList.add("uap-token","uap-token--invalid");var o=document.createElement("uo-icon");o.setAttribute("id","exclamation-triangle"),e.appendChild(o);var r=document.createElement("span");r.classList.add("uap-token__name"),r.innerHTML=t,e.appendChild(r)}return e}},{key:"getTokenDataByID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=null;return isEmpty(t)||this.tokens.some((function(n){return e=n.tokens.reduce((function(e,n){return isDefined(n.is)?n.is(t)?n:e:n.id==t?n:e}),null),!!isDefined(e)&&(isDefined(e)&&isDefined(e.getVariation)&&(e=e.getVariation(t)),e.group={id:n.id,name:n.name,icon:n.icon},!0)})),e}},{key:"renderTextWithTokens",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({template:"",parseTokensInAttributes:!0,returnString:!1},n);var i=!isEmpty(n.template),o=function(t,o){var r=e.createTokenDOMNode(o).outerHTML;return i&&(r=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(n.template,r,o)),t.replace("{{".concat(o,"}}"),r)};try{t=t.replace(n.parseTokensInAttributes?this.tokensRegEx:this.tokensRegExNoAttributes,o)}catch(e){t=t.replace(n.parseTokensInAttributes?this.tokensRegEx:this.tokensRegExNoAttributesFallback,o)}if(n.returnString)return t;if(!n.returnString){var r=document.createElement("span");return r.classList.add("uap-text-with-tokens"),r.innerHTML=t,r}}}]),Tokens}(),Token=function(){function t(e){var n=e.id,i=e.type,o=void 0===i?"text":i,r=e.name,a=e.cacheable,s=void 0===a||a,c=e.requiresUser,l=void 0!==c&&c;_classCallCheck(this,t),this.id=n,this.type=o,this.name=r,this.cacheable=s,this.requiresUser=l}return _createClass(t,[{key:"is",value:function(t){return t==this.id}}]),t}(),PostMetaToken=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i,o=t.customID,r=t.customName,a=t.context,s=void 0===a?"trigger":a;return _classCallCheck(this,n),(i=e.call(this,{id:isDefined(o)?o:"POSTMETA:POSTID:KEY",name:isDefined(r)?r:UncannyAutomator.i18n.tokens.global.postMetaKey,type:"text",cacheable:!1,requiresUser:!1})).context=s,i}return _createClass(n,[{key:"unmodifiedID",get:function(){return"POSTMETA:POSTID:KEY"}},{key:"defaultName",get:function(){return UncannyAutomator.i18n.tokens.global.postMetaKey}},{key:"beforeAdded",value:function(t){var e=this,n=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div></div>"),i=(0,_common_utilities_js__WEBPACK_IMPORTED_MODULE_2__.XE)("https://automatorplugin.com/knowledge-base/post-meta-tokens/",{medium:"add_token",content:"post_meta_post_id_learn_more"}),o=new _field__WEBPACK_IMPORTED_MODULE_4__.Z("int",{itemType:this.context,optionCode:"token__postMetaPostField",label:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldLabel,description:(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.postFieldDescription,'<a href="'.concat(i,'" target="_blank">').concat(UncannyAutomator.i18n.learnMore,' <uo-icon id="external-link"></uo-icon></a>')),isRequired:!0,supportsTokens:!0,unsupportedTokens:["USERMETA:KEY","POSTMETA:POSTID:KEY"]});n.append(o.createFormElement());var r=new _field__WEBPACK_IMPORTED_MODULE_4__.Z("text",{itemType:this.context,optionCode:"token__postMetaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldLabel,description:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.keyFieldDescription,isRequired:!0,supportsTokens:!0,unsupportedTokens:["USERMETA:KEY","POSTMETA:POSTID:KEY"]});n.append(r.createFormElement()),o.initTokenSelector(),o.initCodeMirror(),r.initTokenSelector(),r.initCodeMirror();var a=new _common_modal__WEBPACK_IMPORTED_MODULE_3__.Z({title:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.postMeta.modal.confirmButton}},{size:"extra-large",allowContentOverflow:!0});a.setEvents({afterSetEvents:function(){a.show()},onConfirm:function(){var n=o.validate(),i=r.validate();if(n.isValid&&i.isValid){var s=o.getValue(),c=r.getValue(),l=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},e),u=s.replaceAll("{","[").replaceAll("}","]").replaceAll(":",";"),d=c.replaceAll("{","[").replaceAll("}","]").replaceAll(":",";");l.id=l.id.replace("POSTID",u).replace("KEY",d);var p=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,u,d);if(s.includes("{{")||c.includes("{{"))try{var m=new Tokens("action"),f=m.renderTextWithTokens(s),h=m.renderTextWithTokens(c);p=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,f.outerHTML,h.outerHTML)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}l.name=p,a.destroy(),t(l)}},afterHide:function(){a.destroy()}})}},{key:"getDynamicTokenName",value:function(t){var e=_slicedToArray(t.split(":"),3),n=(e[0],e[1]),i=e[2],o=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,n,i);if(n.includes("[[")||i.includes("[["))try{var r=new Tokens("action"),a=r.renderTextWithTokens(n.replaceAll("[","{").replaceAll("]","}").replaceAll(";",":")),s=r.renderTextWithTokens(i.replaceAll("[","{").replaceAll("]","}").replaceAll(";",":"));o=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.global.postMetaKeyTemplate,a.outerHTML,s.outerHTML)}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}return o}},{key:"is",value:function(t){return t.startsWith("POSTMETA:")}},{key:"getVariation",value:function(t){return new n({customID:t,customName:this.getDynamicTokenName(t),context:this.context})}}]),n}(Token),UserMetaToken=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){var i,o=t.customID,r=t.customName,a=t.context,s=void 0===a?"trigger":a;return _classCallCheck(this,n),(i=e.call(this,{id:isDefined(o)?o:"USERMETA:KEY",name:isDefined(r)?r:UncannyAutomator.i18n.tokens.global.userMetaKey,type:"text",cacheable:!1,requiresUser:!0})).context=s,i}return _createClass(n,[{key:"beforeAdded",value:function(t){var e=this,n=jquery__WEBPACK_IMPORTED_MODULE_0___default()("<div></div>"),i=new _field__WEBPACK_IMPORTED_MODULE_4__.Z("text",{optionCode:"token__metaKeyField",label:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKey,description:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.userMetaKeyDescription,isRequired:!0});n.append(i.createFormElement());var o=new _common_modal__WEBPACK_IMPORTED_MODULE_3__.Z({title:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.title,content:n,buttons:{cancel:UncannyAutomator.i18n.cancel,confirm:UncannyAutomator.i18n.tokens.specialTokens.userMeta.modal.confirmButton}});o.setEvents({afterSetEvents:function(){o.show()},onConfirm:function(){var n=i.validate(),r=i.getValue();if(n.isValid){var a=jquery__WEBPACK_IMPORTED_MODULE_0___default().extend(!0,{},e);a.id=a.id.replace("KEY",r),a.name=(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,r),o.destroy(),t(a)}},afterHide:function(){o.destroy()}})}},{key:"getDynamicTokenName",value:function(t){var e=t.replace("USERMETA:","");return(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.gB)(UncannyAutomator.i18n.tokens.global.userMetaKeyTemplate,e)}},{key:"is",value:function(t){return t.startsWith("USERMETA:")}},{key:"getVariation",value:function(t){return new n({customID:t,customName:this.getDynamicTokenName(t),context:this.context})}}]),n}(Token)},938:(t,e,n)=>{"use strict";n.d(e,{o:()=>o,d:()=>u});var i=_uo.utility.isDefined;const o=function(){return i(UncannyAutomator.wp)&&UncannyAutomator.wp};var r=n(8027);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var s=_uo.utility,c=s.isDefined,l=s.isEmpty;const u=function(t){var e=t.dynamicSentence,n=void 0===e?"":e,i=t.fields,o=void 0===i?{}:i,s=document.createElement("span");s.classList.add("uap-dynamic-sentence");var u=new RegExp(/\{\{(.*?)(?:\:(.*?)(?:\:(.*?))?)?\}\}/gm),d=new r.Z;return n=n.replaceAll(u,(function(t,e,n,i){var o=document.createElement("span");return o.classList.add("uap-dynamic-sentence-pill"),o.innerText=e,l(n)||o.setAttribute("data-field",n),l(i)||o.setAttribute("data-field-group",i),o.outerHTML})),s.innerHTML=n,Object.entries(o).forEach((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(e,n)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],u=i[1],p=s.querySelector('span[data-field="'.concat(r,'"]'));if(c(o["".concat(r,"_readable")])&&(u=o["".concat(r,"_readable")]),c(p)){p.classList.add("uap-dynamic-sentence-pill--filled");try{p.innerText="",p.appendChild(u)}catch(t){if(l(u))p.innerHTML='<em class="uap-empty-value">'.concat(UncannyAutomator.i18n.emptyValue,"</em>");else try{var m=d.renderTextWithTokens(u);p.appendChild(m)}catch(t){p.innerText=u}}}})),s.childNodes.forEach((function(t){if(t.nodeType===Node.TEXT_NODE){var e=document.createElement("span");e.classList.add("uap-dynamic-sentence-plain"),s.insertBefore(e,t),e.appendChild(t)}})),s}},1454:(t,e,n)=>{"use strict";n.d(e,{OP:()=>m,R3:()=>p,RC:()=>d});var i=n(5311),o=n.n(i),r=n(1290),a=n(2569),s=(n(838),n(8027)),c=_uo.utility,l=c.isDefined,u=c.isEmpty;function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={isValid:!1};if(l(t)){var i=UncannyAutomator.recipe.items[t];if(!i.isMissing&&!u(i)&&(n.isValid=i.isValid,!i.isValid)){var a=(0,r.M0)("item",{id:t}).item;a.addClass("item--error"),o().each(i.options,(function(e,n){if(!n.isValid){var i=(0,r.M0)("optionGroup",{itemID:t,groupID:e});i.tokenInSentence.addClass("item-title__token--error item-title__token--error-shake"),i.fieldsContainer.addClass("item-options__group--error"),i.optionsContainer.addClass("item-options--error"),setTimeout((function(){i.tokenInSentence.removeClass("item-title__variable--error-shake")}),1e3),l(i.optionsContainer)&&p(i.optionsContainer)}}))}}else n.isValid=!1,u(e)&&console.error("Neither itemID nor the $item are defined. One of them must be defined.");return n}function p(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={isValid:!1},i=t.find('\n\t\tinput.form-element__input[data-is-child-field="'.concat(e?"true":"false",'"],\n\t\ttextarea.form-element__textarea[data-is-child-field="').concat(e?"true":"false",'"],\n\t\tselect.form-element__select[data-is-child-field="').concat(e?"true":"false",'"],\n\t\t.form-checkbox input,\n\t\t.form-radio')),r=!0;return i.each((function(){var e=o()(this),n=(e.data("type"),{});if(e.hasClass("form-radio")){var i=e.find("input").first(),a=e.find("input:checked");n={field_type:"radio",value:a.length>0?a.val():"",attributes:{supportsTokens:i.data("supportstokens"),required:i.data("required")}}}else n=e.hasClass("form-element__select")?{field_type:"select",value:e.val(),attributes:{supportsTokens:e.data("supportstokens"),required:e.data("required"),supportsCustomValue:e.data("supports-custom-value")}}:{field_type:e.data("type"),value:e.val(),attributes:{supportsTokens:e.data("supportstokens"),required:e.data("required")}};"checkbox"==n.field_type&&(n.value=e.is(":checked")),m(e,n.field_type,n.value,n.attributes).isValid||(r=!1,t.addClass("item-options--error"))})),n.isValid=r,n}function m(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{supportsTokens:!1,required:!1},s=arguments.length>4?arguments[4]:void 0,c={isValid:!1,message:""},d=a.s,m={select:{empty:UncannyAutomator.i18n.validation.field.select.empty,invalid:UncannyAutomator.i18n.validation.field.select.invalid},text:{empty:UncannyAutomator.i18n.validation.field.text.empty,invalid:UncannyAutomator.i18n.validation.field.text.invalid},textarea:{empty:UncannyAutomator.i18n.validation.field.textarea.empty,invalid:UncannyAutomator.i18n.validation.field.textarea.invalid},int:{empty:UncannyAutomator.i18n.validation.field.int.empty,invalid:UncannyAutomator.i18n.validation.field.int.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.int.multipleTokens},float:{empty:UncannyAutomator.i18n.validation.field.float.empty,invalid:UncannyAutomator.i18n.validation.field.float.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.float.multipleTokens},email:{empty:UncannyAutomator.i18n.validation.field.email.empty,single:{invalid:UncannyAutomator.i18n.validation.field.email.single.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.single.multipleTokens},multiple:{invalid:UncannyAutomator.i18n.validation.field.email.multiple.invalid,multipleTokens:UncannyAutomator.i18n.validation.field.email.multiple.multipleTokens}},url:{empty:UncannyAutomator.i18n.validation.field.url.empty,invalid:UncannyAutomator.i18n.validation.field.url.invalid},checkbox:{empty:UncannyAutomator.i18n.validation.field.checkbox.empty,invalid:UncannyAutomator.i18n.validation.field.checkbox.invalid},radio:{empty:UncannyAutomator.i18n.validation.field.radio.empty,invalid:UncannyAutomator.i18n.validation.field.radio.invalid},date:{empty:UncannyAutomator.i18n.validation.field.date.empty,invalid:UncannyAutomator.i18n.validation.field.date.invalid},time:{empty:UncannyAutomator.i18n.validation.field.time.empty,invalid:UncannyAutomator.i18n.validation.field.time.invalid},invalidType:UncannyAutomator.i18n.validation.field.invalidType};try{if("textarea"==e&&!u(t)&&t.is(":not(:visible)")){var h=t.closest(".form-element");h.find(".switch-html").trigger("click"),n=t.val(),h.find(".switch-tmce").trigger("click")}}catch(t){UncannyAutomator.dev.developerMode&&console.warn(t)}if((0,r.d3)(e,d)){if("checkbox"!=e||u(n)||["true","false"].includes(n)&&(n="true"==n),i.required&&(u(n)||"checkbox"==e&&!1===n))c.message=m[e].empty;else if(!i.required&&u(n))c.isValid=!0;else if(""!=n){var g;switch(e){case"select":if(c.isValid=!0,i.supportsCustomValue&&"automator_custom_value"==n){var v=t.closest(".form-element").find(".form-element-children");1==v.length&&(c.isValid=p(v,!0).isValid)}if(c.isValid&&l(s)){var y=s(n);c.isValid=y.isValid,y.isValid||(c.message=y.message)}break;case"text":case"textarea":if(c.isValid=!0,l(s)){var b=s(n);c.isValid=b.isValid,b.isValid||(c.message=b.message)}break;case"int":var _,w=new RegExp(/^([+-]?[1-9]\d*|0)$/gm);if(g=f(n),i.supportsTokens&&g.hasTokens?1==g.tokens.length?c.isValid=!0:c.message=m.int.multipleTokens:w.test(n)?c.isValid=!0:c.message=m.int.invalid,c.isValid&&l(s)){var A=s(n,_);c.isValid=A.isValid,A.isValid||(c.message=A.message)}break;case"float":var k,C=new RegExp(/^[+-]?((\d+(\.|\,)?\d*)|(\.\d+))$/gm);if(g=f(n),i.supportsTokens&&g.hasTokens?1==g.tokens.length?c.isValid=!0:c.message=m.float.multipleTokens:C.test(n)?c.isValid=!0:c.message=m.float.invalid,c.isValid&&l(s)){var T=s(n,k);c.isValid=T.isValid,T.isValid||(c.message=T.message)}break;case"email":var U,E=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),x=[];n.includes(",")?(x=n.split(","),o().each(x,(function(t,e){x[t]=e.trim()}))):x.push(n.trim()),g=f(n);var D=!0,M=x.length>1;if(i.supportsTokens&&g.hasTokens){var S=!1;o().each(x,(function(t,e){if(!((g=f(e)).tokens.length<=1))return S=!0,!1})),D&&!S?c.isValid=!0:c.message=S?M?m.email.multiple.multipleTokens:m.email.single.multipleTokens:M?m.email.multiple.invalid:m.email.single.invalid}else o().each(x,(function(t,e){E.test(e)||(D=!1)})),D?c.isValid=!0:c.message=M?m.email.multiple.invalid:m.email.single.invalid;if(c.isValid&&l(s)){var O=s(n,U);c.isValid=O.isValid,O.isValid||(c.message=O.message)}break;case"url":if(c.isValid=!0,c.isValid&&l(s)){var I=s(n);c.isValid=I.isValid,I.isValid||(c.message=I.message)}break;case"checkbox":if(c.isValid=!0,l(s)){var $=s(n);c.isValid=$.isValid,$.isValid||(c.message=$.message)}break;case"radio":if(c.isValid=!0,l(s)){var P=s(n);c.isValid=P.isValid,P.isValid||(c.message=P.message)}break;case"date":if(c.isValid=!0,l(s)){var L=s(n);c.isValid=L.isValid,L.isValid||(c.message=L.message)}break;case"time":if(c.isValid=!0,l(s)){var j=s(n);c.isValid=j.isValid,j.isValid||(c.message=j.message)}break;default:c.isValid=!1,c.message=""}}}else c.message=m.invalidType;if(!u(t)){var F=t.closest(".form-element"),R=F.find(".form-element__error").filter((function(){return o()(this).closest(".form-element").is(F)}));c.isValid?(F.removeClass("form-element--error"),F.addClass("form-element--success")):(F.removeClass("form-element--success"),F.addClass("form-element--error")),""!=c.message?(R.addClass("form-element__error--show"),R.text(c.message)):(R.removeClass("form-element__error--show"),R.text(""))}return c}function f(t){var e={hasTokens:!1,tokens:[]},n=new RegExp(/\{\{(.*?)\}\}/gm),i=new s.Z(null,null,{includeGroupName:!1,includeGroupIcon:!1}).tokens;return l(t)?u(t)||function(){(0,r.HD)(t)||(t=t.toString());for(var a,s=[],c=function(){var t=a[1];o().each(i,(function(e,n){o().each(n.tokens,(function(e,n){try{n.is(t)&&s.push(n)}catch(e){t==n.id&&s.push(n)}}))}))};null!==(a=n.exec(t));)c();e.tokens=s,e.tokens.length>0&&(e.hasTokens=!0)}():console.error("Undefined string attribute"),e}},7987:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var i=n(8081),o=n.n(i),r=n(3645),a=n.n(r)()(o());a.push([t.id,":host{display:block}.icon{display:flex;align-items:center;justify-content:center;position:relative}.icon img{object-fit:contain;object-position:center}.icon:not([plain]){background:#fff;border-radius:50%;border:1px solid var(--uap-field-border-color);box-shadow:var(--uap-box-shadow-small)}.icon:not([plain])[size=xsmall]{width:16px;height:16px}.icon:not([plain])[size=xsmall] img{width:12px;height:12px}.icon:not([plain]):not([size]),.icon:not([plain])[size=regular]{width:45px;height:45px}.icon:not([plain]):not([size]) img,.icon:not([plain])[size=regular] img{width:24px;height:24px}.icon[plain][size=xsmall]{width:16px;height:16px}.icon[plain][size=xsmall] img{width:16px;height:16px}.icon[plain]:not([size]),.icon[plain][size=regular]{width:45px;height:45px}.icon[plain]:not([size]) img,.icon[plain][size=regular] img{width:45px;height:45px}",""]);const s=a},1447:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var i=n(8081),o=n.n(i),r=n(3645),a=n.n(r)()(o());a.push([t.id,":host{display:block}.pill{padding:12px 0;position:relative;width:100%;display:flex;gap:10px;align-items:center;border-top:1px solid var(--uap-border-color-gray)}:host(:last-child) .pill{border-bottom:1px solid var(--uap-border-color-gray)}.pill-logo{flex:0 0 auto}.pill-sentence{flex:1 1 auto}.pill-actions{flex:0 0 auto;display:inline-flex}:host-context(.rtl) .pill-actions{padding-left:0;padding-right:15px}.pill-actions-edit{cursor:pointer}.pill-actions-remove{color:#e85113;margin-left:10px;cursor:pointer}:host-context(.rtl) .pill-actions-remove{margin-left:0;margin-right:10px}.pill--missing{background:var(--uap-alert-warning-background);margin-left:calc(var(--uap-builder-metabox-padding)*-1);margin-right:calc(var(--uap-builder-metabox-padding)*-1);padding-left:var(--uap-builder-metabox-padding);padding-right:var(--uap-builder-metabox-padding);--uap-alert-padding: 0}",""]);const s=a},9259:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var i=n(8081),o=n.n(i),r=n(3645),a=n.n(r)()(o());a.push([t.id,":host{display:block}.set-data-dialog{display:flex;flex-direction:column;gap:15px}.set-data-dialog-box{font-size:var(--uap-font-size--body-small);line-height:var(--uap-line-height--body-small);border:1px solid var(--uap-field-border-color);border-radius:var(--uap-border-radius);padding:10px 15px}.set-data-dialog-description{font-size:var(--uap-font-size--body-xsmall);line-height:var(--uap-line-height--body-xsmall);color:var(--uap-font-color-secondary)}",""]);const s=a},3645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);i&&a[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},8081:t=>{"use strict";t.exports=function(t){return t[1]}},1895:()=>{"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var i=function(e){e&&Object.keys(e).forEach((function(n){return t[n]=e[n]}))},o=0,r=e;o<r.length;o++){var a=r[o];i(a)}return t})},7771:t=>{"use strict";function e(t,e,n){if(void 0===n)return t&&t.h5s&&t.h5s.data&&t.h5s.data[e];t.h5s=t.h5s||{},t.h5s.data=t.h5s.data||{},t.h5s.data[e]=n}var n=function(t,e){if(!(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof e?Array.from(t):Array.from(t).filter((function(t){return 1===t.nodeType&&t.matches(e)}))},i=new Map,o=function(){function t(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(t.prototype,"config",{get:function(){var t={};return this._config.forEach((function(e,n){t[n]=e})),t},set:function(t){if("object"!=typeof t)throw new Error("You must provide a valid configuration object to the config setter.");var e=Object.assign({},t);this._config=new Map(Object.entries(e))},enumerable:!1,configurable:!0}),t.prototype.setConfig=function(t,e){if(!this._config.has(t))throw new Error("Trying to set invalid configuration item: "+t);this._config.set(t,e)},t.prototype.getConfig=function(t){if(!this._config.has(t))throw new Error("Invalid configuration item requested: "+t);return this._config.get(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(t){if(!(t instanceof HTMLElement)&&null!==t)throw new Error("A placeholder must be an html element or null.");this._placeholder=t},enumerable:!1,configurable:!0}),t.prototype.setData=function(t,e){if("string"!=typeof t)throw new Error("The key must be a string.");this._data.set(t,e)},t.prototype.getData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.get(t)},t.prototype.deleteData=function(t){if("string"!=typeof t)throw new Error("The key must be a string.");return this._data.delete(t)},t}(),r=function(t){if(!(t instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return i.has(t)||i.set(t,new o),i.get(t)};function a(t,e,n){if(t instanceof Array)for(var i=0;i<t.length;++i)a(t[i],e,n);else t.addEventListener(e,n),r(t).setData("event"+e,n)}function s(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)s(t[n],e);else t.removeEventListener(e,r(t).getData("event"+e)),r(t).deleteData("event"+e)}function c(t,e,n){if(t instanceof Array)for(var i=0;i<t.length;++i)c(t[i],e,n);else t.setAttribute(e,n)}function l(t,e){if(t instanceof Array)for(var n=0;n<t.length;++n)l(t[n],e);else t.removeAttribute(e)}var u,d,p,m,f,h,g,v,y,b=function(t){if(!t.parentElement||0===t.getClientRects().length)throw new Error("target element must be part of the dom");var e=t.getClientRects()[0];return{left:e.left+window.pageXOffset,right:e.right+window.pageXOffset,top:e.top+window.pageYOffset,bottom:e.bottom+window.pageYOffset}},_=function(t,e){if(!(t instanceof HTMLElement&&(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(e).indexOf(t)},w=function(t){if(!(t instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==t.parentNode},A=function(t,e,n){if(!(t instanceof HTMLElement&&t.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");t.parentElement.insertBefore(e,"before"===n?t:t.nextElementSibling)},k=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return"border-box"===e.getPropertyValue("box-sizing")?parseInt(e.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},C=function(t){if(!(t instanceof HTMLElement))throw new Error("You must provide a valid dom element");var e=window.getComputedStyle(t);return["width","padding-left","padding-right"].map((function(t){var n=parseInt(e.getPropertyValue(t),10);return isNaN(n)?0:n})).reduce((function(t,e){return t+e}))},T=function(t,e){if(!(t instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof e?t:t.filter((function(t){return t.querySelector(e)instanceof HTMLElement||t.shadowRoot&&t.shadowRoot.querySelector(e)instanceof HTMLElement})).map((function(t){return t.querySelector(e)||t.shadowRoot&&t.shadowRoot.querySelector(e)}))},U=function(t){return t.composedPath&&t.composedPath()[0]||t.target},E=function(t,e,n){return{element:t,posX:n.pageX-e.left,posY:n.pageY-e.top}},x=function(t,e){if(!0===t.isSortable){var n=r(t).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(t){return t.length>0&&e.matches(t)})).length>0;if(t===e)return!0;if(void 0!==r(t).getConfig("connectWith")&&null!==r(t).getConfig("connectWith"))return r(t).getConfig("connectWith")===r(e).getConfig("connectWith")}return!1},D={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"},M=function(t,e){if("string"==typeof r(t).getConfig("hoverClass")){var i=r(t).getConfig("hoverClass").split(" ");!0===e?(a(t,"mousemove",function(t,e){var n=this;if(void 0===e&&(e=250),"number"!=typeof e)throw new Error("You must provide a number as the second argument for throttle.");var i=null;return function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];var a=Date.now();(null===i||a-i>=e)&&(i=a,t.apply(n,o))}}((function(e){0===e.buttons&&n(t.children,r(t).getConfig("items")).forEach((function(t){var n,o;t===e.target||t.contains(e.target)?(n=t.classList).add.apply(n,i):(o=t.classList).remove.apply(o,i)}))}),r(t).getConfig("throttleTime"))),a(t,"mouseleave",(function(){n(t.children,r(t).getConfig("items")).forEach((function(t){var e;(e=t.classList).remove.apply(e,i)}))}))):(s(t,"mousemove"),s(t,"mouseleave"))}},S=function(t){s(t,"dragstart"),s(t,"dragend"),s(t,"dragover"),s(t,"dragenter"),s(t,"drop"),s(t,"mouseenter"),s(t,"mouseleave")},O=function(t,e){t&&s(t,"dragleave"),e&&e!==t&&s(e,"dragleave")},I=function(t){var e;(e=t).h5s&&delete e.h5s.data,l(t,"aria-dropeffect")},$=function(t){l(t,"aria-grabbed"),l(t,"aria-copied"),l(t,"draggable"),l(t,"role")};function P(t,e){if(e.composedPath)return e.composedPath().find((function(t){return t.isSortable}));for(;!0!==t.isSortable;)t=t.parentElement;return t}function L(t,i){var o=e(t,"opts"),r=n(t.children,o.items).filter((function(t){return t.contains(i)||t.shadowRoot&&t.shadowRoot.contains(i)}));return r.length>0?r[0]:i}var j=function(t){var i=e(t,"opts"),o=n(t.children,i.items),r=T(o,i.handle);c(t,"aria-dropeffect","move"),e(t,"_disabled","false"),c(r,"draggable","true"),M(t,!0),!1===i.disableIEFix&&"function"==typeof(document||window.document).createElement("span").dragDrop&&a(r,"mousedown",(function(){if(-1!==o.indexOf(this))this.dragDrop();else{for(var t=this.parentElement;-1===o.indexOf(t);)t=t.parentElement;t.dragDrop()}}))};function F(t,o){var l=String(o);return o=o||{},"string"==typeof t&&(t=document.querySelectorAll(t)),t instanceof HTMLElement&&(t=[t]),t=Array.prototype.slice.call(t),/serialize/.test(l)?t.map((function(t){var i=e(t,"opts");return function(t,i,o){if(void 0===i&&(i=function(t,e){return t}),void 0===o&&(o=function(t){return t}),!(t instanceof HTMLElement)||1==!t.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof i||"function"!=typeof o)throw new Error("You need to provide a valid serializer for items and the container.");var r=e(t,"opts").items,a=n(t.children,r),s=a.map((function(e){return{parent:t,node:e,html:e.outerHTML,index:_(e,a)}}));return{container:o({node:t,itemCount:s.length}),items:s.map((function(e){return i(e,t)}))}}(t,i.itemSerializer,i.containerSerializer)})):(t.forEach((function(t){if(/enable|disable|destroy/.test(l))return F[l](t);["connectWith","disableIEFix"].forEach((function(t){Object.prototype.hasOwnProperty.call(o,t)&&null!==o[t]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+t+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),o=Object.assign({},D,r(t).config,o),r(t).config=o,e(t,"opts",o),t.isSortable=!0,function(t){var i=e(t,"opts"),o=n(t.children,i.items),r=T(o,i.handle);e(t,"_disabled","false"),S(o),O(m,v),s(r,"mousedown"),s(t,"dragover"),s(t,"dragenter"),s(t,"drop")}(t);var M,I=n(t.children,o.items);if(null!==o.placeholder&&void 0!==o.placeholder){var $=document.createElement(t.tagName);o.placeholder instanceof HTMLElement?$.appendChild(o.placeholder):$.innerHTML=o.placeholder,M=$.children[0]}r(t).placeholder=function(t,e,n){var i;if(void 0===n&&(n="sortable-placeholder"),!(t instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(e instanceof HTMLElement)&&void 0!==e)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===e&&(["UL","OL"].includes(t.tagName)?e=document.createElement("li"):["TABLE","TBODY"].includes(t.tagName)?(e=document.createElement("tr")).innerHTML='<td colspan="100"></td>':e=document.createElement("div")),"string"==typeof n&&(i=e.classList).add.apply(i,n.split(" ")),e}(t,M,o.placeholderClass),e(t,"items",o.items),o.acceptFrom?e(t,"acceptFrom",o.acceptFrom):o.connectWith&&e(t,"connectWith",o.connectWith),j(t),c(I,"role","option"),c(I,"aria-grabbed","false"),a(t,"dragstart",(function(t){var e=U(t);if(!0!==e.isSortable&&(t.stopImmediatePropagation(),(!o.handle||e.matches(o.handle))&&"false"!==e.getAttribute("draggable"))){var i=P(e,t),a=L(i,e);g=n(i.children,o.items),f=g.indexOf(a),h=_(a,i.children),m=i,function(t,e,n){if(!(t instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(e instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=E),t.dataTransfer&&t.dataTransfer.setDragImage){var i=n(e,b(e),t);if(!(i.element instanceof HTMLElement)||"number"!=typeof i.posX||"number"!=typeof i.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setData("text/plain",U(t).id),t.dataTransfer.setDragImage(i.element,i.posX,i.posY)}}(t,a,o.customDragImage),d=k(a),p=C(a),a.classList.add(o.draggingClass),u=function(t,e){var n=t;return!0===r(e).getConfig("copy")&&(c(n=t.cloneNode(!0),"aria-copied","true"),t.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=t.style.display),n}(a,i),c(u,"aria-grabbed","true"),i.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:h,index:f,container:m},item:u,originalTarget:e}}))}})),a(t,"dragenter",(function(i){var s=U(i),c=P(s,i);c&&c!==v&&(y=n(c.children,e(c,"items")).filter((function(e){return e!==r(t).placeholder})),o.dropTargetContainerClass&&c.classList.add(o.dropTargetContainerClass),c.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:h,index:f,container:m},destination:{container:c,itemsBeforeUpdate:y},item:u,originalTarget:s}})),a(c,"dragleave",(function(t){var e=t.relatedTarget||t.fromElement;t.currentTarget.contains(e)||(o.dropTargetContainerClass&&c.classList.remove(o.dropTargetContainerClass),c.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:h,index:f,container:c},item:u,originalTarget:s}})))}))),v=c})),a(t,"dragend",(function(n){if(u){u.classList.remove(o.draggingClass),c(u,"aria-grabbed","false"),"true"===u.getAttribute("aria-copied")&&"true"!==e(u,"dropped")&&u.remove(),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay);var r=Array.from(i.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(w)[0];r&&r.remove(),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}})),v=null,u=null,d=null,p=null}})),a(t,"drop",(function(a){if(x(t,u.parentElement)){a.preventDefault(),a.stopPropagation(),e(u,"dropped","true");var s=Array.from(i.values()).map((function(t){return t.placeholder})).filter((function(t){return t instanceof HTMLElement})).filter(w)[0];if(s){s.replaceWith(u),void 0!==u.oldDisplay&&(u.style.display=u.oldDisplay,delete u.oldDisplay),t.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:h,index:f,container:m},item:u}}));var c=r(t).placeholder,l=n(m.children,o.items).filter((function(t){return t!==c})),d=!0===this.isSortable?this:this.parentElement,p=n(d.children,e(d,"items")).filter((function(t){return t!==c})),v=_(u,Array.from(u.parentElement.children).filter((function(t){return t!==c}))),b=_(u,p);o.dropTargetContainerClass&&d.classList.remove(o.dropTargetContainerClass),h===v&&m===d||t.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:h,index:f,container:m,itemsBeforeUpdate:g,items:l},destination:{index:b,elementIndex:v,container:d,itemsBeforeUpdate:y,items:p},item:u}}))}else e(u,"dropped","false")}}));var R,V,N,q=(R=function(t,e,a,s){if(u)if(o.forcePlaceholderSize&&(r(t).placeholder.style.height=d+"px",r(t).placeholder.style.width=p+"px"),Array.from(t.children).indexOf(e)>-1){var c=k(e),l=C(e),m=_(r(t).placeholder,e.parentElement.children),f=_(e,e.parentElement.children);if(c>d||l>p){var h=c-d,g=l-p,v=b(e).top,y=b(e).left;if(m<f&&("vertical"===o.orientation&&s<v||"horizontal"===o.orientation&&a<y))return;if(m>f&&("vertical"===o.orientation&&s>v+c-h||"horizontal"===o.orientation&&a>y+l-g))return}void 0===u.oldDisplay&&(u.oldDisplay=u.style.display),"none"!==u.style.display&&(u.style.display="none");var w=!1;try{var T=b(e).top+e.offsetHeight/2,U=b(e).left+e.offsetWidth/2;w="vertical"===o.orientation&&s>=T||"horizontal"===o.orientation&&a>=U}catch(t){w=m<f}w?function(t,e){A(t,e,"after")}(e,r(t).placeholder):function(t,e){A(t,e,"before")}(e,r(t).placeholder),Array.from(i.values()).filter((function(t){return void 0!==t.placeholder})).forEach((function(e){e.placeholder!==r(t).placeholder&&e.placeholder.remove()}))}else{var E=Array.from(i.values()).filter((function(t){return void 0!==t.placeholder})).map((function(t){return t.placeholder}));-1!==E.indexOf(e)||t!==e||n(e.children,o.items).length||(E.forEach((function(t){return t.remove()})),e.appendChild(r(t).placeholder))}},void 0===(V=o.debounce)&&(V=0),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];clearTimeout(N),N=setTimeout((function(){R.apply(void 0,t)}),V)}),H=function(t){var i=t.target,o=!0===i.isSortable?i:P(i,t);if(i=L(o,i),u&&x(o,u.parentElement)&&"true"!==e(o,"_disabled")){var a=e(o,"opts");parseInt(a.maxItems)&&n(o.children,e(o,"items")).length>parseInt(a.maxItems)&&u.parentElement!==o||(t.preventDefault(),t.stopPropagation(),t.dataTransfer.dropEffect=!0===r(o).getConfig("copy")?"copy":"move",q(o,i,t.pageX,t.pageY))}};a(I.concat(t),"dragover",H),a(I.concat(t),"dragenter",H)})),t)}F.destroy=function(t){!function(t){var i=e(t,"opts")||{},o=n(t.children,i.items),r=T(o,i.handle);M(t,!1),s(t,"dragover"),s(t,"dragenter"),s(t,"dragstart"),s(t,"dragend"),s(t,"drop"),I(t),s(r,"mousedown"),S(o),$(o),O(m,v),t.isSortable=!1}(t)},F.enable=function(t){j(t)},F.disable=function(t){!function(t){var i=e(t,"opts"),o=n(t.children,i.items),r=T(o,i.handle);c(t,"aria-dropeffect","none"),e(t,"_disabled","true"),c(r,"draggable","false"),s(r,"mousedown"),M(t,!1)}(t)},F.__testing={data:e,removeItemEvents:S,removeItemData:$,removeSortableData:I,removeContainerEvents:O},t.exports=F},9588:t=>{t.exports=function(t,e){var n,i,o=0;function r(){var r,a,s=n,c=arguments.length;t:for(;s;){if(s.args.length===arguments.length){for(a=0;a<c;a++)if(s.args[a]!==arguments[a]){s=s.next;continue t}return s!==n&&(s===i&&(i=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=n,s.prev=null,n.prev=s,n=s),s.val}s=s.next}for(r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return s={args:r,val:t.apply(null,r)},n?(n.prev=s,s.next=n):i=s,o===e.maxSize?(i=i.prev).next=null:o++,n=s,s.val}return e=e||{},r.clear=function(){n=null,i=null,o=0},r}},686:(t,e,n)=>{var i,o;i=[n(5311)],void 0===(o=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var n,i,o;return e&&e.requirejs||(e?i=e:e={},function(t){var e,r,a,s,c={},l={},u={},d={},p=Object.prototype.hasOwnProperty,m=[].slice,f=/\.js$/;function h(t,e){return p.call(t,e)}function g(t,e){var n,i,o,r,a,s,c,l,d,p,m,h=e&&e.split("/"),g=u.map,v=g&&g["*"]||{};if(t){for(a=(t=t.split("/")).length-1,u.nodeIdCompat&&f.test(t[a])&&(t[a]=t[a].replace(f,"")),"."===t[0].charAt(0)&&h&&(t=h.slice(0,h.length-1).concat(t)),d=0;d<t.length;d++)if("."===(m=t[d]))t.splice(d,1),d-=1;else if(".."===m){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;d>0&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((h||v)&&g){for(d=(n=t.split("/")).length;d>0;d-=1){if(i=n.slice(0,d).join("/"),h)for(p=h.length;p>0;p-=1)if((o=g[h.slice(0,p).join("/")])&&(o=o[i])){r=o,s=d;break}if(r)break;!c&&v&&v[i]&&(c=v[i],l=d)}!r&&c&&(r=c,s=l),r&&(n.splice(0,s,r),t=n.join("/"))}return t}function v(e,n){return function(){var i=m.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),r.apply(t,i.concat([e,n]))}}function y(t){return function(e){c[t]=e}}function b(n){if(h(l,n)){var i=l[n];delete l[n],d[n]=!0,e.apply(t,i)}if(!h(c,n)&&!h(d,n))throw new Error("No "+n);return c[n]}function _(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function w(t){return t?_(t):[]}function A(t){return function(){return u&&u.config&&u.config[t]||{}}}a=function(t,e){var n,i,o=_(t),r=o[0],a=e[1];return t=o[1],r&&(n=b(r=g(r,a))),r?t=n&&n.normalize?n.normalize(t,(i=a,function(t){return g(t,i)})):g(t,a):(r=(o=_(t=g(t,a)))[0],t=o[1],r&&(n=b(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},s={require:function(t){return v(t)},exports:function(t){var e=c[t];return void 0!==e?e:c[t]={}},module:function(t){return{id:t,uri:"",exports:c[t],config:A(t)}}},e=function(e,n,i,o){var r,u,p,m,f,g,_,A=[],k=typeof i;if(g=w(o=o||e),"undefined"===k||"function"===k){for(n=!n.length&&i.length?["require","exports","module"]:n,f=0;f<n.length;f+=1)if("require"===(u=(m=a(n[f],g)).f))A[f]=s.require(e);else if("exports"===u)A[f]=s.exports(e),_=!0;else if("module"===u)r=A[f]=s.module(e);else if(h(c,u)||h(l,u)||h(d,u))A[f]=b(u);else{if(!m.p)throw new Error(e+" missing "+u);m.p.load(m.n,v(o,!0),y(u),{}),A[f]=c[u]}p=i?i.apply(c[e],A):void 0,e&&(r&&r.exports!==t&&r.exports!==c[e]?c[e]=r.exports:p===t&&_||(c[e]=p))}else e&&(c[e]=i)},n=i=r=function(n,i,o,c,l){if("string"==typeof n)return s[n]?s[n](i):b(a(n,w(i)).f);if(!n.splice){if((u=n).deps&&r(u.deps,u.callback),!i)return;i.splice?(n=i,i=o,o=null):n=t}return i=i||function(){},"function"==typeof o&&(o=c,c=l),c?e(t,n,i,o):setTimeout((function(){e(t,n,i,o)}),4),r},r.config=function(t){return r(t)},n._defined=c,(o=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),h(c,t)||h(l,t)||(l[t]=[t,e,n])}).amd={jQuery:!0}}(),e.requirejs=n,e.require=i,e.define=o),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var i in e)"function"==typeof e[i]&&"constructor"!==i&&n.push(i);return n}e.Extend=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},e.Decorate=function(t,e){var i=n(e),o=n(t);function r(){var n=Array.prototype.unshift,i=e.prototype.constructor.length,o=t.prototype.constructor;i>0&&(n.call(arguments,t.prototype.constructor),o=e.prototype.constructor),o.apply(this,arguments)}e.displayName=t.displayName,r.prototype=new function(){this.constructor=r};for(var a=0;a<o.length;a++){var s=o[a];r.prototype[s]=t.prototype[s]}for(var c=function(t){var n=function(){};t in r.prototype&&(n=r.prototype[t]);var i=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}},l=0;l<i.length;l++){var u=i[l];r.prototype[u]=c(u)}return r};var i=function(){this.listeners={}};i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},e.Observable=i,e.generateChars=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var o=0;o<n.length;o++){var r=n[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in i||(i[r]={}),o==n.length-1&&(i[r]=t[e]),i=i[r]}delete t[e]}}return t},e.hasScroll=function(e,n){var i=t(n),o=n.style.overflowX,r=n.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.__cache={};var o=0;return e.GetUniqueElementId=function(t){var n=t.getAttribute("data-select2-id");return null!=n||(n=t.id?"select2-data-"+t.id:"select2-data-"+(++o).toString()+"-"+e.generateChars(4),t.setAttribute("data-select2-id",n)),n},e.StoreData=function(t,n,i){var o=e.GetUniqueElementId(t);e.__cache[o]||(e.__cache[o]={}),e.__cache[o][n]=i},e.GetData=function(n,i){var o=e.GetUniqueElementId(n);return i?e.__cache[o]&&null!=e.__cache[o][i]?e.__cache[o][i]:t(n).data(i):e.__cache[o]},e.RemoveData=function(t){var n=e.GetUniqueElementId(t);null!=e.__cache[n]&&delete e.__cache[n],t.removeAttribute("data-select2-id")},e.copyNonInternalCssClasses=function(t,e){var n=t.getAttribute("class").trim().split(/\s+/);n=n.filter((function(t){return 0===t.indexOf("select2-")}));var i=e.getAttribute("class").trim().split(/\s+/);i=i.filter((function(t){return 0!==t.indexOf("select2-")}));var o=n.concat(i);t.setAttribute("class",o.join(" "))},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);i.append(n(o(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],o=this.option(i);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option--selectable"),e=t.filter(".select2-results__option--selected");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(i){var o=i.map((function(t){return t.id.toString()}));n.$results.find(".select2-results__option--selectable").each((function(){var n=t(this),i=e.GetData(this,"data"),r=""+i.id;null!=i.element&&i.element.selected||null==i.element&&o.indexOf(r)>-1?(this.classList.add("select2-results__option--selected"),n.attr("aria-selected","true")):(this.classList.remove("select2-results__option--selected"),n.attr("aria-selected","false"))}))}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var i=document.createElement("li");i.classList.add("select2-results__option"),i.classList.add("select2-results__option--selectable");var o={role:"option"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var a in(null!=n.element&&r.call(n.element,":disabled")||null==n.element&&n.disabled)&&(o["aria-disabled"]="true",i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--disabled")),null==n.id&&i.classList.remove("select2-results__option--selectable"),null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(o.role="group",o["aria-label"]=n.text,i.classList.remove("select2-results__option--selectable"),i.classList.add("select2-results__option--group")),o){var s=o[a];i.setAttribute(a,s)}if(n.children){var c=t(i),l=document.createElement("strong");l.className="select2-results__group",this.template(n,l);for(var u=[],d=0;d<n.children.length;d++){var p=n.children[d],m=this.option(p);u.push(m)}var f=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested",role:"none"});f.append(u),c.append(l),c.append(f)}else this.template(n,i);return e.StoreData(i,"data",n),i},n.prototype.bind=function(n,i){var o=this,r=n.id+"-results";this.$results.attr("id",r),n.on("results:all",(function(t){o.clear(),o.append(t.data),n.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),n.on("results:append",(function(t){o.append(t.data),n.isOpen()&&o.setClasses()})),n.on("query",(function(t){o.hideMessages(),o.showLoading(t)})),n.on("select",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),n.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var t=o.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),n.on("results:select",(function(){var t=o.getHighlightedResults();if(0!==t.length){var n=e.GetData(t[0],"data");t.hasClass("select2-results__option--selected")?o.trigger("close",{}):o.trigger("select",{data:n})}})),n.on("results:previous",(function(){var t=o.getHighlightedResults(),e=o.$results.find(".select2-results__option--selectable"),n=e.index(t);if(!(n<=0)){var i=n-1;0===t.length&&(i=0);var r=e.eq(i);r.trigger("mouseenter");var a=o.$results.offset().top,s=r.offset().top,c=o.$results.scrollTop()+(s-a);0===i?o.$results.scrollTop(0):s-a<0&&o.$results.scrollTop(c)}})),n.on("results:next",(function(){var t=o.getHighlightedResults(),e=o.$results.find(".select2-results__option--selectable"),n=e.index(t)+1;if(!(n>=e.length)){var i=e.eq(n);i.trigger("mouseenter");var r=o.$results.offset().top+o.$results.outerHeight(!1),a=i.offset().top+i.outerHeight(!1),s=o.$results.scrollTop()+a-r;0===n?o.$results.scrollTop(0):a>r&&o.$results.scrollTop(s)}})),n.on("results:focus",(function(t){t.element[0].classList.add("select2-results__option--highlighted"),t.element[0].setAttribute("aria-selected","true")})),n.on("results:message",(function(t){o.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-e+t.deltaY,i=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&n<=o.$results.height();i?(o.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option--selectable",(function(n){var i=t(this),r=e.GetData(this,"data");i.hasClass("select2-results__option--selected")?o.options.get("multiple")?o.trigger("unselect",{originalEvent:n,data:r}):o.trigger("close",{}):o.trigger("select",{originalEvent:n,data:r})})),this.$results.on("mouseenter",".select2-results__option--selectable",(function(n){var i=e.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted").attr("aria-selected","false"),o.trigger("results:focus",{data:i,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find(".select2-results__option--selectable").index(t),n=this.$results.offset().top,i=t.offset().top,o=this.$results.scrollTop()+(i-n),r=i-n;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=i(e,n);null==r?n.style.display="none":"string"==typeof r?n.innerHTML=o(r):t(n).append(r)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var n=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n,n},i.prototype.bind=function(t,e){var i=this,o=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){i.trigger("focus",t)})),this.$selection.on("blur",(function(t){i._handleBlur(t)})),this.$selection.on("keydown",(function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){i.update(t.data)})),t.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(t)})),t.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.trigger("focus"),i._detachCloseHandler(t)})),t.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex),i.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){i.$selection.attr("tabindex","-1"),i.$selection.attr("aria-disabled","true")}))},i.prototype._handleBlur=function(e){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(n){t(document.body).on("mousedown.select2."+n.id,(function(n){var i=t(n.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=i[0]&&e.GetData(this,"element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i.prototype.isEnabled=function(){return!this.isDisabled()},i.prototype.isDisabled=function(){return this.options.get("disabled")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t[0].classList.add("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var n=this;o.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.attr("aria-controls",i),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||n.$selection.trigger("focus")}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i);var o=e.title||e.text;o?n.attr("title",o):n.removeAttr("title")}else this.clear()},o})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t[0].classList.add("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,o){var r=this;i.__super__.bind.apply(this,arguments);var a=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",a),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.isDisabled()){var i=t(this).parent(),o=n.GetData(i[0],"data");r.trigger("unselect",{originalEvent:e,data:o})}})),this.$selection.on("keydown",".select2-selection__choice__remove",(function(t){r.isDisabled()||t.stopPropagation()}))},i.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><button type="button" class="select2-selection__choice__remove" tabindex="-1"><span aria-hidden="true">&times;</span></button><span class="select2-selection__choice__display"></span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=this.$selection.find(".select2-selection__rendered").attr("id")+"-choice-",o=0;o<t.length;o++){var r=t[o],a=this.selectionContainer(),s=this.display(r,a),c=i+n.generateChars(4)+"-";r.id?c+=r.id:c+=n.generateChars(4),a.find(".select2-selection__choice__display").append(s).attr("id",c);var l=r.title||r.text;l&&a.attr("title",l);var u=this.options.get("translations").get("removeItem"),d=a.find(".select2-selection__choice__remove");d.attr("title",u()),d.attr("aria-label",u()),d.attr("aria-describedby",c),n.StoreData(a[0],"data",r),e.push(a)}this.$selection.find(".select2-selection__rendered").append(e)}},i})),e.define("select2/selection/placeholder",[],(function(){function t(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();n.html(this.display(e)),n[0].classList.add("select2-selection__placeholder"),n[0].classList.remove("select2-selection__choice");var i=e.title||e.text||n.text();return this.$selection.find(".select2-selection__rendered").attr("title",i),n},t.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,n){function i(){}return i.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){i._handleClear(t)})),e.on("keypress",(function(t){i._handleKeyboardClear(t,e)}))},i.prototype._handleClear=function(t,e){if(!this.isDisabled()){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();var o=n.GetData(i[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var a={data:o};if(this.trigger("clear",a),a.prevented)this.$element.val(r);else{for(var s=0;s<o.length;s++)if(a={data:o[s]},this.trigger("unselect",a),a.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},i.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},i.prototype.update=function(e,i){if(e.call(this,i),this.$selection.find(".select2-selection__clear").remove(),this.$selection[0].classList.remove("select2-selection--clearable"),!(this.$selection.find(".select2-selection__placeholder").length>0||0===i.length)){var o=this.$selection.find(".select2-selection__rendered").attr("id"),r=this.options.get("translations").get("removeAllItems"),a=t('<button type="button" class="select2-selection__clear" tabindex="-1"><span aria-hidden="true">&times;</span></button>');a.attr("title",r()),a.attr("aria-label",r()),a.attr("aria-describedby",o),n.StoreData(a[0],"data",i),this.$selection.prepend(a),this.$selection[0].classList.add("select2-selection--clearable")}},i})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=this.options.get("translations").get("search"),i=t('<span class="select2-search select2-search--inline"><textarea class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" ></textarea></span>');this.$searchContainer=i,this.$search=i.find("textarea"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",n());var o=e.call(this);return this._transferTabIndex(),o.append(this.$searchContainer),o},i.prototype.bind=function(t,i,o){var r=this,a=i.id+"-results",s=i.id+"-container";t.call(this,i,o),r.$search.attr("aria-describedby",s),i.on("open",(function(){r.$search.attr("aria-controls",a),r.$search.trigger("focus")})),i.on("close",(function(){r.$search.val(""),r.resizeSearch(),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),i.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),i.on("disable",(function(){r.$search.prop("disabled",!0)})),i.on("focus",(function(t){r.$search.trigger("focus")})),i.on("results:focus",(function(t){t.data._resultId?r.$search.attr("aria-activedescendant",t.data._resultId):r.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===r.$search.val()){var i=r.$selection.find(".select2-selection__choice").last();if(i.length>0){var o=e.GetData(i[0],"data");r.searchRemoveChoice(o),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){r.$search.val()&&t.stopPropagation()}));var c=document.documentMode,l=c&&c<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&r.handleSearch(t)}}))},i.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.resizeSearch(),n&&this.$search.trigger("focus")},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="100%";""===this.$search.attr("placeholder")&&(t=.75*(this.$search.val().length+1)+"em"),this.$search.css("width",t)},i})),e.define("select2/selection/selectionCss",["../utils"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=this.options.get("selectionCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),t.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(i),n},e})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,i){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];e.call(this,n,i),n.on("*",(function(e,n){if(-1!==r.indexOf(e)){n=n||{};var i=t.Event("select2:"+e,{params:n});o.$element.trigger(i),-1!==a.indexOf(e)&&(n.prevented=i.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G",Ꞡ:"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H",Ɥ:"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K",Ꞣ:"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N",Ꞑ:"N",Ꞥ:"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Œ:"OE",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R",Ꞧ:"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S",Ȿ:"S",Ꞩ:"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z",Ɀ:"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g",ꞡ:"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k",ꞣ:"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n",ꞑ:"n",ꞥ:"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",œ:"oe",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r",ꞧ:"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s",ꞩ:"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ώ:"ω",ς:"σ","’":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=this;t(Array.prototype.map.call(this.$element[0].querySelectorAll(":checked"),(function(t){return e.item(n(t))})))},i.prototype.select=function(t){var e=this;if(t.selected=!0,null!=t.element&&"option"===t.element.tagName.toLowerCase())return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var i=[];(t=[t]).push.apply(t,n);for(var o=0;o<t.length;o++){var r=t[o].id;-1===i.indexOf(r)&&i.push(r)}e.$element.val(i),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,null!=t.element&&"option"===t.element.tagName.toLowerCase())return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var i=[],o=0;o<n.length;o++){var r=n[o].id;r!==t.id&&-1===i.indexOf(r)&&i.push(r)}e.$element.val(i),e.$element.trigger("input").trigger("change")}))}},i.prototype.bind=function(t,e){var n=this;this.container=t,t.on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},i.prototype.query=function(t,e){var i=[],o=this;this.$element.children().each((function(){if("option"===this.tagName.toLowerCase()||"optgroup"===this.tagName.toLowerCase()){var e=n(this),r=o.item(e),a=o.matches(t,r);null!==a&&i.push(a)}})),e({results:i})},i.prototype.addOptions=function(t){this.$element.append(t)},i.prototype.option=function(t){var i;t.children?(i=document.createElement("optgroup")).label=t.text:void 0!==(i=document.createElement("option")).textContent?i.textContent=t.text:i.innerText=t.text,void 0!==t.id&&(i.value=t.id),t.disabled&&(i.disabled=!0),t.selected&&(i.selected=!0),t.title&&(i.title=t.title);var o=this._normalizeItem(t);return o.element=i,e.StoreData(i,"data",o),n(i)},i.prototype.item=function(t){var i={};if(null!=(i=e.GetData(t[0],"data")))return i;var o=t[0];if("option"===o.tagName.toLowerCase())i={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if("optgroup"===o.tagName.toLowerCase()){i={text:t.prop("label"),children:[],title:t.prop("title")};for(var r=t.children("option"),a=[],s=0;s<r.length;s++){var c=n(r[s]),l=this.item(c);a.push(l)}i.children=a}return(i=this._normalizeItem(i)).element=t[0],e.StoreData(t[0],"data",i),i},i.prototype._normalizeItem=function(t){t!==Object(t)&&(t={id:t,text:t});return null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function i(t,e){this._dataToConvert=e.get("data")||[],i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype.bind=function(t,e){i.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},i.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){var e=this,i=this.$element.find("option"),o=i.map((function(){return e.item(n(this)).id})).get(),r=[];function a(t){return function(){return n(this).val()==t.id}}for(var s=0;s<t.length;s++){var c=this._normalizeItem(t[s]);if(o.indexOf(c.id)>=0){var l=i.filter(a(c)),u=this.item(l),d=n.extend(!0,{},c,u),p=this.option(d);l.replaceWith(p)}else{var m=this.option(c);if(c.children){var f=this.convertToOptions(c.children);m.append(f)}r.push(m)}}return r},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var o=n.ajax(t);return o.then(e),o.fail(i),o}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){var i=this;null!=this._request&&("function"==typeof this._request.abort&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);function r(){var n=o.transport(o,(function(n){var o=i.processResults(n,t);i.options.get("debug")&&window.console&&console.error&&(o&&o.results&&Array.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(o)}),(function(){(!("status"in n)||0!==n.status&&"0"!==n.status)&&i.trigger("results:message",{message:"errorLoading"})}));i._request=n}"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},i})),e.define("select2/data/tags",["jquery"],(function(t){function e(t,e,n){var i=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);var r=n.get("insertTag");if(void 0!==r&&(this.insertTag=r),t.call(this,e,n),Array.isArray(i))for(var a=0;a<i.length;a++){var s=i[a],c=this._normalizeItem(s),l=this.option(c);this.$element.append(l)}}return e.prototype.query=function(t,e,n){var i=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(o,r){for(var a=o.results,s=0;s<a.length;s++){var c=a[s],l=null!=c.children&&!t({results:c.children},!0);if((c.text||"").toUpperCase()===(e.term||"").toUpperCase()||l)return!r&&(o.data=a,void n(o))}if(r)return!0;var u=i.createTag(e);if(null!=u){var d=i.option(u);d.attr("data-select2-tag","true"),i.addOptions([d]),i.insertTag(a,u)}o.results=a,n(o)})):t.call(this,e,n)},e.prototype.createTag=function(t,e){if(null==e.term)return null;var n=e.term.trim();return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,i){var o=this;n.term=n.term||"";var r=this.tokenizer(n,this.options,(function(e){var n=o._normalizeItem(e);if(!o.$element.find("option").filter((function(){return t(this).val()===n.id})).length){var i=o.option(n);i.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([i])}!function(t){o.trigger("select",{data:t})}(n)}));r.term!==n.term&&(this.$search.length&&(this.$search.val(r.term),this.$search.trigger("focus")),n.term=r.term),e.call(this,n,i)},e.prototype.tokenizer=function(e,n,i,o){for(var r=i.get("tokenSeparators")||[],a=n.term,s=0,c=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var l=a[s];if(-1!==r.indexOf(l)){var u=a.substr(0,s),d=c(t.extend({},n,{term:u}));null!=d?(o(d),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(){i._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,n){var i=this;this._checkIfMaximumSelected((function(){t.call(i,e,n)}))},t.prototype._checkIfMaximumSelected=function(t,e){var n=this;this.current((function(t){var i=null!=t?t.length:0;n.maximumSelectionLength>0&&i>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=this.options.get("translations").get("search"),o=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=o,this.$search=o.find("input"),this.$search.prop("autocomplete",this.options.get("autocomplete")),this.$search.attr("aria-label",i()),n.prepend(o),n},e.prototype.bind=function(e,n,i){var o=this,r=n.id+"-results";e.call(this,n,i),this.$search.on("keydown",(function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){o.handleSearch(t)})),n.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",r),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),n.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||o.$search.trigger("focus")})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer[0].classList.remove("select2-search--hide"):o.$searchContainer[0].classList.add("select2-search--hide"))})),n.on("results:focus",(function(t){t.data._resultId?o.$search.attr("aria-activedescendant",t.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},e.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.showSearch=function(t,e){return!0},e})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;i>=0;i--){var o=e[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("query",(function(t){i.lastParams=t,i.loading=!0})),e.on("query:append",(function(t){i.lastParams=t,i.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(e,n,i){this.$dropdownParent=t(i.get("dropdownParent")||document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(e),i._bindContainerResultHandlers(e)})),e.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e[0].classList.remove("select2"),e[0].classList.add("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var n=this;e.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,i){var o=this,r="scroll.select2."+i.id,a="resize.select2."+i.id,s="orientationchange.select2."+i.id,c=this.$container.parents().filter(e.hasScroll);c.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),c.on(r,(function(n){var i=e.GetData(this,"select2-scroll-position");t(this).scrollTop(i.y)})),t(window).on(r+" "+a+" "+s,(function(t){o._positionDropdown(),o._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,r="resize.select2."+i.id,a="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+r+" "+a)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown[0].classList.contains("select2-dropdown--above"),i=this.$dropdown[0].classList.contains("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s=this.$dropdown.outerHeight(!1),c=e.scrollTop(),l=e.scrollTop()+e.height(),u=c<r.top-s,d=l>r.bottom+s,p={left:r.left,top:a.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var f={top:0,left:0};(t.contains(document.body,m[0])||m[0].isConnected)&&(f=m.offset()),p.top-=f.top,p.left-=f.left,n||i||(o="below"),d||!u||n?!u&&d&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(p.top=a.top-f.top-s),null!=o&&(this.$dropdown[0].classList.remove("select2-dropdown--below"),this.$dropdown[0].classList.remove("select2-dropdown--above"),this.$dropdown[0].classList.add("select2-dropdown--"+o),this.$container[0].classList.remove("select2-container--below"),this.$container[0].classList.remove("select2-container--above"),this.$container[0].classList.add("select2-container--"+o)),this.$dropdownContainer.css(p)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var n=0,i=0;i<e.length;i++){var o=e[i];o.children?n+=t(o.children):n++}return n}function e(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return e.prototype.showSearch=function(e,n){return!(t(n.data.results)<this.minimumResultsForSearch)&&e.call(this,n)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",(function(t){i._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,n){if(n&&null!=n.originalSelect2Event){var i=n.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var r=t.GetData(o[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(t){i._selectTriggered(t)})),e.on("unselect",(function(t){i._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t})),e.define("select2/dropdown/dropdownCss",["../utils"],(function(t){function e(){}return e.prototype.render=function(e){var n=e.call(this),i=this.options.get("dropdownCssClass")||"";return-1!==i.indexOf(":all:")&&(i=i.replace(":all:",""),t.copyNonInternalCssClasses(n[0],this.$element[0])),n.addClass(i),n},e})),e.define("select2/dropdown/tagsSearchHighlight",["../utils"],(function(t){function e(){}return e.prototype.highlightFirstItem=function(e){var n=this.$results.find(".select2-results__option--selectable:not(.select2-results__option--selected)");if(n.length>0){var i=n.first(),o=t.GetData(i[0],"data").element;if(o&&o.getAttribute&&"true"===o.getAttribute("data-select2-tag"))return void i.trigger("mouseenter")}e.call(this)},e})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"},removeItem:function(){return"Remove item"},search:function(){return"Search"}}})),e.define("select2/defaults",["jquery","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/selectionCss","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./dropdown/dropdownCss","./dropdown/tagsSearchHighlight","./i18n/en"],(function(t,e,n,i,o,r,a,s,c,l,u,d,p,m,f,h,g,v,y,b,_,w,A,k,C,T,U,E,x,D,M){function S(){this.reset()}return S.prototype.apply=function(u){if(null==(u=t.extend(!0,{},this.defaults,u)).dataAdapter&&(null!=u.ajax?u.dataAdapter=f:null!=u.data?u.dataAdapter=m:u.dataAdapter=p,u.minimumInputLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,v)),u.maximumInputLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,y)),u.maximumSelectionLength>0&&(u.dataAdapter=l.Decorate(u.dataAdapter,b)),u.tags&&(u.dataAdapter=l.Decorate(u.dataAdapter,h)),null==u.tokenSeparators&&null==u.tokenizer||(u.dataAdapter=l.Decorate(u.dataAdapter,g))),null==u.resultsAdapter&&(u.resultsAdapter=e,null!=u.ajax&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,k)),null!=u.placeholder&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,A)),u.selectOnClose&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,U)),u.tags&&(u.resultsAdapter=l.Decorate(u.resultsAdapter,D))),null==u.dropdownAdapter){if(u.multiple)u.dropdownAdapter=_;else{var d=l.Decorate(_,w);u.dropdownAdapter=d}0!==u.minimumResultsForSearch&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,T)),u.closeOnSelect&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,E)),null!=u.dropdownCssClass&&(u.dropdownAdapter=l.Decorate(u.dropdownAdapter,x)),u.dropdownAdapter=l.Decorate(u.dropdownAdapter,C)}null==u.selectionAdapter&&(u.multiple?u.selectionAdapter=i:u.selectionAdapter=n,null!=u.placeholder&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,o)),u.allowClear&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,r)),u.multiple&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,a)),null!=u.selectionCssClass&&(u.selectionAdapter=l.Decorate(u.selectionAdapter,s)),u.selectionAdapter=l.Decorate(u.selectionAdapter,c)),u.language=this._resolveLanguage(u.language),u.language.push("en");for(var M=[],S=0;S<u.language.length;S++){var O=u.language[S];-1===M.indexOf(O)&&M.push(O)}return u.language=M,u.translations=this._processTranslations(u.language,u.debug),u},S.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return d[t]||t}))}this.defaults={amdLanguageBase:"./i18n/",autocomplete:"off",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:l.escapeMarkup,language:{},matcher:function n(i,o){if(null==i.term||""===i.term.trim())return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),a=o.children.length-1;a>=0;a--)null==n(i,o.children[a])&&r.children.splice(a,1);return r.children.length>0?r:n(i,r)}var s=e(o.text).toUpperCase(),c=e(i.term).toUpperCase();return s.indexOf(c)>-1?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},S.prototype.applyFromElement=function(t,e){var n=t.language,i=this.defaults.language,o=e.prop("lang"),r=e.closest("[lang]").prop("lang"),a=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(n),this._resolveLanguage(i),this._resolveLanguage(r));return t.language=a,t},S.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var n;n=Array.isArray(e)?e:[e];for(var i=[],o=0;o<n.length;o++)if(i.push(n[o]),"string"==typeof n[o]&&n[o].indexOf("-")>0){var r=n[o].split("-")[0];i.push(r)}return i},S.prototype._processTranslations=function(e,n){for(var i=new u,o=0;o<e.length;o++){var r=new u,a=e[o];if("string"==typeof a)try{r=u.loadPath(a)}catch(t){try{a=this.defaults.amdLanguageBase+a,r=u.loadPath(a)}catch(t){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else r=t.isPlainObject(a)?new u(a):a;i.extend(r)}return i},S.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var o=l._convertData(i);t.extend(!0,this.defaults,o)},new S})),e.define("select2/options",["jquery","./defaults","./utils"],(function(t,e,n){function i(t,n){this.options=t,null!=n&&this.fromElement(n),null!=n&&(this.options=e.applyFromElement(this.options,n)),this.options=e.apply(this.options)}return i.prototype.fromElement=function(e){var i=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.autocomplete&&e.prop("autocomplete")&&(this.options.autocomplete=e.prop("autocomplete")),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),n.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(e[0],"data",n.GetData(e[0],"select2Tags")),n.StoreData(e[0],"tags",!0)),n.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",n.GetData(e[0],"ajaxUrl")),n.StoreData(e[0],"ajax-Url",n.GetData(e[0],"ajaxUrl")));var o={};function r(t,e){return e.toUpperCase()}for(var a=0;a<e[0].attributes.length;a++){var s=e[0].attributes[a].name,c="data-";if(s.substr(0,c.length)==c){var l=s.substring(c.length),u=n.GetData(e[0],l);o[l.replace(/-([a-z])/g,r)]=u}}t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset&&(o=t.extend(!0,{},e[0].dataset,o));var d=t.extend(!0,{},n.GetData(e[0]),o);for(var p in d=n._convertData(d))i.indexOf(p)>-1||(t.isPlainObject(this.options[p])?t.extend(this.options[p],d[p]):this.options[p]=d[p]);return this},i.prototype.get=function(t){return this.options[t]},i.prototype.set=function(t,e){this.options[t]=e},i})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,i){var o=function(t,i){null!=n.GetData(t[0],"select2")&&n.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),o.__super__.constructor.call(this);var r=t.attr("tabindex")||0;n.StoreData(t[0],"old-tabindex",r),t.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(t,this.options);var s=this.render();this._placeContainer(s);var c=this.options.get("selectionAdapter");this.selection=new c(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var u=this.options.get("resultsAdapter");this.results=new u(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){d.trigger("selection:update",{data:t})})),t[0].classList.add("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(t[0],"select2",this),t.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,c=a.length;s<c;s+=1){var l=a[s].replace(/\s/g,"").match(n);if(null!==l&&l.length>=1)return l[1]}return null}return"computedstyle"==e?window.getComputedStyle(t[0]).width:e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this._observer=new window.MutationObserver((function(e){t._syncA(),t._syncS(e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerSelectionEvents=function(){var t=this,e=["toggle","focus"];this.selection.on("toggle",(function(){t.toggleDropdown()})),this.selection.on("focus",(function(e){t.focus(e)})),this.selection.on("*",(function(n,i){-1===e.indexOf(n)&&t.trigger(n,i)}))},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container[0].classList.add("select2-container--open")})),this.on("close",(function(){t.$container[0].classList.remove("select2-container--open")})),this.on("enable",(function(){t.$container[0].classList.remove("select2-container--disabled")})),this.on("disable",(function(){t.$container[0].classList.add("select2-container--disabled")})),this.on("blur",(function(){t.$container[0].classList.remove("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.UP&&e.altKey?(t.close(e),e.preventDefault()):n===i.ENTER||n===i.TAB?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(t){var e=this;if(t.addedNodes&&t.addedNodes.length>0){for(var n=0;n<t.addedNodes.length;n++)if(t.addedNodes[n].selected)return!0}else{if(t.removedNodes&&t.removedNodes.length>0)return!0;if(Array.isArray(t))return t.some((function(t){return e._isChangeMutation(t)}))}return!1},o.prototype._syncSubtree=function(t){var e=this._isChangeMutation(t),n=this;e&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},o.prototype.trigger=function(t,e){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in i){var r=i[t],a={prevented:!1,name:t,args:e};if(n.call(this,r,a),a.prevented)return void(e.prevented=!0)}n.call(this,t,e)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container[0].classList.contains("select2-container--open")},o.prototype.hasFocus=function(){return this.$container[0].classList.contains("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container[0].classList.add("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},o.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var e=t[0];Array.isArray(e)&&(e=e.map((function(t){return t.toString()}))),this.$element.val(e).trigger("input").trigger("change")},o.prototype.destroy=function(){n.RemoveData(this.$container[0]),this.$container.remove(),this._observer.disconnect(),this._observer=null,this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element[0].classList.remove("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container[0].classList.add("select2-container--"+this.options.get("theme")),n.StoreData(e[0],"element",this.$element),e},o})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,n,i,o){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var i=t.extend(!0,{},e);new n(t(this),i)})),this;if("string"==typeof e){var i,a=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=o.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=t[e].apply(t,a)})),r.indexOf(e)>-1?this:i}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n})),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n}.apply(e,i))||(t.exports=o)},8975:(t,e,n)=>{var i;!function(){"use strict";var o={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function r(t){return s(l(t),arguments)}function a(t,e){return r.apply(null,[t].concat(e||[]))}function s(t,e){var n,i,a,s,c,l,u,d,p,m=1,f=t.length,h="";for(i=0;i<f;i++)if("string"==typeof t[i])h+=t[i];else if("object"==typeof t[i]){if((s=t[i]).keys)for(n=e[m],a=0;a<s.keys.length;a++){if(null==n)throw new Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));n=n[s.keys[a]]}else n=s.param_no?e[s.param_no]:e[m++];if(o.not_type.test(s.type)&&o.not_primitive.test(s.type)&&n instanceof Function&&(n=n()),o.numeric_arg.test(s.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(r("[sprintf] expecting number but found %T",n));switch(o.number.test(s.type)&&(d=n>=0),s.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,s.width?parseInt(s.width):0);break;case"e":n=s.precision?parseFloat(n).toExponential(s.precision):parseFloat(n).toExponential();break;case"f":n=s.precision?parseFloat(n).toFixed(s.precision):parseFloat(n);break;case"g":n=s.precision?String(Number(n.toPrecision(s.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=s.precision?n.substring(0,s.precision):n;break;case"t":n=String(!!n),n=s.precision?n.substring(0,s.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=s.precision?n.substring(0,s.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=s.precision?n.substring(0,s.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}o.json.test(s.type)?h+=n:(!o.number.test(s.type)||d&&!s.sign?p="":(p=d?"+":"-",n=n.toString().replace(o.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",u=s.width-(p+n).length,c=s.width&&u>0?l.repeat(u):"",h+=s.align?p+n+c:"0"===l?p+c+n:c+p+n)}return h}var c=Object.create(null);function l(t){if(c[t])return c[t];for(var e,n=t,i=[],r=0;n;){if(null!==(e=o.text.exec(n)))i.push(e[0]);else if(null!==(e=o.modulo.exec(n)))i.push("%");else{if(null===(e=o.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){r|=1;var a=[],s=e[2],l=[];if(null===(l=o.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(l[1]);""!==(s=s.substring(l[0].length));)if(null!==(l=o.key_access.exec(s)))a.push(l[1]);else{if(null===(l=o.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(l[1])}e[2]=a}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}n=n.substring(e[0].length)}return c[t]=i}e.sprintf=r,e.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=r,window.vsprintf=a,void 0===(i=function(){return{sprintf:r,vsprintf:a}}.call(e,n,e,t))||(t.exports=i))}()},2627:(t,e,n)=>{var i=n(7987);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},8596:(t,e,n)=>{var i=n(1447);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},1561:(t,e,n)=>{var i=n(9259);i&&i.__esModule&&(i=i.default),t.exports="string"==typeof i?i:i.toString()},5311:t=>{"use strict";t.exports=jQuery},5206:(t,e,n)=>{"use strict";n.d(e,{s:()=>d});var i=n(4232),o=n(875);const r=(t,e)=>{var n,i;const o=t._$AN;if(void 0===o)return!1;for(const t of o)null===(i=(n=t)._$AO)||void 0===i||i.call(n,e,!1),r(t,e);return!0},a=t=>{let e,n;do{if(void 0===(e=t._$AM))break;n=e._$AN,n.delete(t),t=e}while(0===(null==n?void 0:n.size))},s=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(void 0===n)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),u(e)}};function c(t){void 0!==this._$AN?(a(this),this._$AM=t,s(this)):this._$AM=t}function l(t,e=!1,n=0){const i=this._$AH,o=this._$AN;if(void 0!==o&&0!==o.size)if(e)if(Array.isArray(i))for(let t=n;t<i.length;t++)r(i[t],!1),a(i[t]);else null!=i&&(r(i,!1),a(i));else r(this,t)}const u=t=>{var e,n,i,r;t.type==o.pX.CHILD&&(null!==(e=(i=t)._$AP)&&void 0!==e||(i._$AP=l),null!==(n=(r=t)._$AQ)&&void 0!==n||(r._$AQ=c))};class d extends o.Xe{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,e,n){super._$AT(t,e,n),s(this),this.isConnected=t._$AU}_$AO(t,e=!0){var n,i;t!==this.isConnected&&(this.isConnected=t,t?null===(n=this.reconnected)||void 0===n||n.call(this):null===(i=this.disconnected)||void 0===i||i.call(this)),e&&(r(this,t),a(this))}setValue(t){if((0,i.OR)(this._$Ct))this._$Ct._$AI(t,this);else{const e=[...this._$Ct._$AH];e[this._$Ci]=t,this._$Ct._$AI(e,this,0)}}disconnected(){}reconnected(){}}},4232:(t,e,n)=>{"use strict";n.d(e,{OR:()=>a,_Y:()=>c,fk:()=>l,hl:()=>d,i9:()=>p,pt:()=>r,ws:()=>m});var i=n(3692);const{H:o}=i.Al,r=t=>null===t||"object"!=typeof t&&"function"!=typeof t,a=t=>void 0===t.strings,s=()=>document.createComment(""),c=(t,e,n)=>{var i;const r=t._$AA.parentNode,a=void 0===e?t._$AB:e._$AA;if(void 0===n){const e=r.insertBefore(s(),a),i=r.insertBefore(s(),a);n=new o(e,i,t,t.options)}else{const e=n._$AB.nextSibling,o=n._$AM,s=o!==t;if(s){let e;null===(i=n._$AQ)||void 0===i||i.call(n,t),n._$AM=t,void 0!==n._$AP&&(e=t._$AU)!==o._$AU&&n._$AP(e)}if(e!==a||s){let t=n._$AA;for(;t!==e;){const e=t.nextSibling;r.insertBefore(t,a),t=e}}}return n},l=(t,e,n=t)=>(t._$AI(e,n),t),u={},d=(t,e=u)=>t._$AH=e,p=t=>t._$AH,m=t=>{var e;null===(e=t._$AP)||void 0===e||e.call(t,!1,!0);let n=t._$AA;const i=t._$AB.nextSibling;for(;n!==i;){const t=n.nextSibling;n.remove(),n=t}}},875:(t,e,n)=>{"use strict";n.d(e,{XM:()=>o,Xe:()=>r,pX:()=>i});const i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},o=t=>(...e)=>({_$litDirective$:t,values:e});class r{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}},3692:(t,e,n)=>{"use strict";var i;n.d(e,{Al:()=>R,Jb:()=>k,Ld:()=>C,dy:()=>A,sY:()=>U});const o=globalThis.trustedTypes,r=o?o.createPolicy("lit-html",{createHTML:t=>t}):void 0,a=`lit$${(Math.random()+"").slice(9)}$`,s="?"+a,c=`<${s}>`,l=document,u=(t="")=>l.createComment(t),d=t=>null===t||"object"!=typeof t&&"function"!=typeof t,p=Array.isArray,m=t=>{var e;return p(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])},f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,h=/-->/g,g=/>/g,v=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,y=/'/g,b=/"/g,_=/^(?:script|style|textarea|title)$/i,w=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),A=w(1),k=(w(2),Symbol.for("lit-noChange")),C=Symbol.for("lit-nothing"),T=new WeakMap,U=(t,e,n)=>{var i,o;const r=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:e;let a=r._$litPart$;if(void 0===a){const t=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:null;r._$litPart$=a=new O(e.insertBefore(u(),t),t,void 0,null!=n?n:{})}return a._$AI(t),a},E=l.createTreeWalker(l,129,null,!1),x=(t,e)=>{const n=t.length-1,i=[];let o,s=2===e?"<svg>":"",l=f;for(let e=0;e<n;e++){const n=t[e];let r,u,d=-1,p=0;for(;p<n.length&&(l.lastIndex=p,u=l.exec(n),null!==u);)p=l.lastIndex,l===f?"!--"===u[1]?l=h:void 0!==u[1]?l=g:void 0!==u[2]?(_.test(u[2])&&(o=RegExp("</"+u[2],"g")),l=v):void 0!==u[3]&&(l=v):l===v?">"===u[0]?(l=null!=o?o:f,d=-1):void 0===u[1]?d=-2:(d=l.lastIndex-u[2].length,r=u[1],l=void 0===u[3]?v:'"'===u[3]?b:y):l===b||l===y?l=v:l===h||l===g?l=f:(l=v,o=void 0);const m=l===v&&t[e+1].startsWith("/>")?" ":"";s+=l===f?n+c:d>=0?(i.push(r),n.slice(0,d)+"$lit$"+n.slice(d)+a+m):n+a+(-2===d?(i.push(void 0),e):m)}const u=s+(t[n]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==r?r.createHTML(u):u,i]};class D{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,c=0;const l=t.length-1,d=this.parts,[p,m]=x(t,e);if(this.el=D.createElement(p,n),E.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(i=E.nextNode())&&d.length<l;){if(1===i.nodeType){if(i.hasAttributes()){const t=[];for(const e of i.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(a)){const n=m[c++];if(t.push(e),void 0!==n){const t=i.getAttribute(n.toLowerCase()+"$lit$").split(a),e=/([.?@])?(.*)/.exec(n);d.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?$:"?"===e[1]?L:"@"===e[1]?j:I})}else d.push({type:6,index:r})}for(const e of t)i.removeAttribute(e)}if(_.test(i.tagName)){const t=i.textContent.split(a),e=t.length-1;if(e>0){i.textContent=o?o.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],u()),E.nextNode(),d.push({type:2,index:++r});i.append(t[e],u())}}}else if(8===i.nodeType)if(i.data===s)d.push({type:2,index:r});else{let t=-1;for(;-1!==(t=i.data.indexOf(a,t+1));)d.push({type:7,index:r}),t+=a.length-1}r++}}static createElement(t,e){const n=l.createElement("template");return n.innerHTML=t,n}}function M(t,e,n=t,i){var o,r,a,s;if(e===k)return e;let c=void 0!==i?null===(o=n._$Cl)||void 0===o?void 0:o[i]:n._$Cu;const l=d(e)?void 0:e._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(r=null==c?void 0:c._$AO)||void 0===r||r.call(c,!1),void 0===l?c=void 0:(c=new l(t),c._$AT(t,n,i)),void 0!==i?(null!==(a=(s=n)._$Cl)&&void 0!==a?a:s._$Cl=[])[i]=c:n._$Cu=c),void 0!==c&&(e=M(t,c._$AS(t,e.values),c,i)),e}class S{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:n},parts:i}=this._$AD,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:l).importNode(n,!0);E.currentNode=o;let r=E.nextNode(),a=0,s=0,c=i[0];for(;void 0!==c;){if(a===c.index){let e;2===c.type?e=new O(r,r.nextSibling,this,t):1===c.type?e=new c.ctor(r,c.name,c.strings,this,t):6===c.type&&(e=new F(r,this,t)),this.v.push(e),c=i[++s]}a!==(null==c?void 0:c.index)&&(r=E.nextNode(),a++)}return o}m(t){let e=0;for(const n of this.v)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class O{constructor(t,e,n,i){var o;this.type=2,this._$AH=C,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cg=null===(o=null==i?void 0:i.isConnected)||void 0===o||o}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=M(this,t,e),d(t)?t===C||null==t||""===t?(this._$AH!==C&&this._$AR(),this._$AH=C):t!==this._$AH&&t!==k&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):m(t)?this.S(t):this.$(t)}A(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==C&&d(this._$AH)?this._$AA.nextSibling.data=t:this.k(l.createTextNode(t)),this._$AH=t}T(t){var e;const{values:n,_$litType$:i}=t,o="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=D.createElement(i.h,this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===o)this._$AH.m(n);else{const t=new S(o,this),e=t.p(this.options);t.m(n),this.k(e),this._$AH=t}}_$AC(t){let e=T.get(t.strings);return void 0===e&&T.set(t.strings,e=new D(t)),e}S(t){p(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const o of t)i===e.length?e.push(n=new O(this.A(u()),this.A(u()),this,this.options)):n=e[i],n._$AI(o),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class I{constructor(t,e,n,i,o){this.type=1,this._$AH=C,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=o,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=C}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,i){const o=this.strings;let r=!1;if(void 0===o)t=M(this,t,e,0),r=!d(t)||t!==this._$AH&&t!==k,r&&(this._$AH=t);else{const i=t;let a,s;for(t=o[0],a=0;a<o.length-1;a++)s=M(this,i[n+a],e,a),s===k&&(s=this._$AH[a]),r||(r=!d(s)||s!==this._$AH[a]),s===C?t=C:t!==C&&(t+=(null!=s?s:"")+o[a+1]),this._$AH[a]=s}r&&!i&&this.C(t)}C(t){t===C?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class $ extends I{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===C?void 0:t}}const P=o?o.emptyScript:"";class L extends I{constructor(){super(...arguments),this.type=4}C(t){t&&t!==C?this.element.setAttribute(this.name,P):this.element.removeAttribute(this.name)}}class j extends I{constructor(t,e,n,i,o){super(t,e,n,i,o),this.type=5}_$AI(t,e=this){var n;if((t=null!==(n=M(this,t,e,0))&&void 0!==n?n:C)===k)return;const i=this._$AH,o=t===C&&i!==C||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,r=t!==C&&(i===C||o);o&&this.element.removeEventListener(this.name,this,i),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}class F{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){M(this,t)}}const R={P:"$lit$",L:a,V:s,I:1,N:x,R:S,D:m,j:M,H:O,O:I,F:L,B:j,W:$,Z:F},V=window.litHtmlPolyfillSupport;null==V||V(D,O),(null!==(i=globalThis.litHtmlVersions)&&void 0!==i?i:globalThis.litHtmlVersions=[]).push("2.2.1")},6126:(t,e,n)=>{"use strict";n.d(e,{V:()=>a,i:()=>l});var i=n(3692),o=n(5206),r=n(875);const a=()=>new s;class s{}const c=new WeakMap,l=(0,r.XM)(class extends o.s{render(t){return i.Ld}update(t,[e]){var n;const o=e!==this.U;return o&&void 0!==this.U&&this.ot(void 0),(o||this.rt!==this.lt)&&(this.U=e,this.ht=null===(n=t.options)||void 0===n?void 0:n.host,this.ot(this.lt=t.element)),i.Ld}ot(t){"function"==typeof this.U?(void 0!==c.get(this.U)&&this.U.call(this.ht,void 0),c.set(this.U,t),void 0!==t&&this.U.call(this.ht,t)):this.U.value=t}get rt(){var t;return"function"==typeof this.U?c.get(this.U):null===(t=this.U)||void 0===t?void 0:t.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}})},8036:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var i=n(3692),o=n(875),r=n(4232);const a=(t,e,n)=>{const i=new Map;for(let o=e;o<=n;o++)i.set(t[o],o);return i},s=(0,o.XM)(class extends o.Xe{constructor(t){if(super(t),t.type!==o.pX.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,n){let i;void 0===n?n=e:void 0!==e&&(i=e);const o=[],r=[];let a=0;for(const e of t)o[a]=i?i(e,a):a,r[a]=n(e,a),a++;return{values:r,keys:o}}render(t,e,n){return this.dt(t,e,n).values}update(t,[e,n,o]){var s;const c=(0,r.i9)(t),{values:l,keys:u}=this.dt(e,n,o);if(!Array.isArray(c))return this.ut=u,l;const d=null!==(s=this.ut)&&void 0!==s?s:this.ut=[],p=[];let m,f,h=0,g=c.length-1,v=0,y=l.length-1;for(;h<=g&&v<=y;)if(null===c[h])h++;else if(null===c[g])g--;else if(d[h]===u[v])p[v]=(0,r.fk)(c[h],l[v]),h++,v++;else if(d[g]===u[y])p[y]=(0,r.fk)(c[g],l[y]),g--,y--;else if(d[h]===u[y])p[y]=(0,r.fk)(c[h],l[y]),(0,r._Y)(t,p[y+1],c[h]),h++,y--;else if(d[g]===u[v])p[v]=(0,r.fk)(c[g],l[v]),(0,r._Y)(t,c[h],c[g]),g--,v++;else if(void 0===m&&(m=a(u,v,y),f=a(d,h,g)),m.has(d[h]))if(m.has(d[g])){const e=f.get(u[v]),n=void 0!==e?c[e]:null;if(null===n){const e=(0,r._Y)(t,c[h]);(0,r.fk)(e,l[v]),p[v]=e}else p[v]=(0,r.fk)(n,l[v]),(0,r._Y)(t,c[h],n),c[e]=null;v++}else(0,r.ws)(c[g]),g--;else(0,r.ws)(c[h]),h++;for(;v<=y;){const e=(0,r._Y)(t,p[y+1]);(0,r.fk)(e,l[v]),p[v++]=e}for(;h<=g;){const t=c[h++];null!==t&&(0,r.ws)(t)}return this.ut=u,(0,r.hl)(t,p),i.Jb}})},9392:(t,e,n)=>{"use strict";n.d(e,{oi:()=>w,iv:()=>c,dy:()=>_.dy,sY:()=>_.sY,$m:()=>s});const i=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,o=Symbol(),r=new Map;class a{constructor(t,e){if(this._$cssResult$=!0,e!==o)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=r.get(this.cssText);return i&&void 0===t&&(r.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const s=t=>new a("string"==typeof t?t:t+"",o),c=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1]),t[0]);return new a(n,o)},l=i?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return s(e)})(t):t;var u;const d=window.trustedTypes,p=d?d.emptyScript:"",m=window.reactiveElementPolyfillSupport,f={toAttribute(t,e){switch(e){case Boolean:t=t?p:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},h=(t,e)=>e!==t&&(e==e||t==t),g={attribute:!0,type:String,converter:f,reflect:!1,hasChanged:h};class v extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var e;null!==(e=this.l)&&void 0!==e||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,n)=>{const i=this._$Eh(n,e);void 0!==i&&(this._$Eu.set(i,n),t.push(i))})),t}static createProperty(t,e=g){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,n,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(i){const o=this[t];this[e]=i,this.requestUpdate(t,o,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||g}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of e)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(l(t))}else void 0!==t&&e.push(l(t));return e}static _$Eh(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,n;(null!==(e=this._$Eg)&&void 0!==e?e:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(n=t.hostConnected)||void 0===n||n.call(t))}removeController(t){var e;null===(e=this._$Eg)||void 0===e||e.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Et.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{i?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const n=document.createElement("style"),i=window.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=e.cssText,t.appendChild(n)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$ES(t,e,n=g){var i,o;const r=this.constructor._$Eh(t,n);if(void 0!==r&&!0===n.reflect){const a=(null!==(o=null===(i=n.converter)||void 0===i?void 0:i.toAttribute)&&void 0!==o?o:f.toAttribute)(e,n.type);this._$Ei=t,null==a?this.removeAttribute(r):this.setAttribute(r,a),this._$Ei=null}}_$AK(t,e){var n,i,o;const r=this.constructor,a=r._$Eu.get(t);if(void 0!==a&&this._$Ei!==a){const t=r.getPropertyOptions(a),s=t.converter,c=null!==(o=null!==(i=null===(n=s)||void 0===n?void 0:n.fromAttribute)&&void 0!==i?i:"function"==typeof s?s:null)&&void 0!==o?o:f.fromAttribute;this._$Ei=a,this[a]=c(e,t.type),this._$Ei=null}}requestUpdate(t,e,n){let i=!0;void 0!==t&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||h)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,n))):i=!1),!this.isUpdatePending&&i&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,e)=>this[e]=t)),this._$Et=void 0);let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(n)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;null===(e=this._$Eg)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$ES(e,this[e],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}v.finalized=!0,v.elementProperties=new Map,v.elementStyles=[],v.shadowRootOptions={mode:"open"},null==m||m({ReactiveElement:v}),(null!==(u=globalThis.reactiveElementVersions)&&void 0!==u?u:globalThis.reactiveElementVersions=[]).push("1.3.1");var y,b,_=n(3692);class w extends v{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=(0,_.sY)(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return _.Jb}}w.finalized=!0,w._$litElement$=!0,null===(y=globalThis.litElementHydrateSupport)||void 0===y||y.call(globalThis,{LitElement:w});const A=globalThis.litElementPolyfillSupport;null==A||A({LitElement:w}),(null!==(b=globalThis.litElementVersions)&&void 0!==b?b:globalThis.litElementVersions=[]).push("3.2.0")}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(9392);const e=t=>e=>"function"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:n,elements:i}=e;return{kind:n,elements:i,finisher(e){window.customElements.define(t,e)}}})(t,e),n=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function i(t){return(e,i)=>void 0!==i?((t,e,n)=>{e.constructor.createProperty(n,t)})(t,e,i):n(t,e)}function o(t,e){return(({finisher:t,descriptor:e})=>(n,i)=>{var o;if(void 0===i){const i=null!==(o=n.originalKey)&&void 0!==o?o:n.key,r=null!=e?{kind:"method",placement:"prototype",key:i,descriptor:e(n.key)}:{...n,key:i};return null!=t&&(r.finisher=function(e){t(e,i)}),r}{const o=n.constructor;void 0!==e&&Object.defineProperty(n,i,e(i)),null==t||t(o,i)}})({descriptor:n=>{const i={get(){var e,n;return null!==(n=null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(e){const e="symbol"==typeof n?Symbol():"__"+n;i.get=function(){var n,i;return void 0===this[e]&&(this[e]=null!==(i=null===(n=this.renderRoot)||void 0===n?void 0:n.querySelector(t))&&void 0!==i?i:null),this[e]}}return i}})}var r;null===(r=window.HTMLSlotElement)||void 0===r||r.prototype.assignedElements;var a,s,c=__webpack_require__(3692),l=__webpack_require__(3418);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function f(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function v(){v=function(){return t};var t={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,e){["method","field"].forEach((function(n){e.forEach((function(e){e.kind===n&&"own"===e.placement&&this.defineClassElement(t,e)}),this)}),this)},initializeClassElements:function(t,e){var n=t.prototype;["method","field"].forEach((function(i){e.forEach((function(e){var o=e.placement;if(e.kind===i&&("static"===o||"prototype"===o)){var r="static"===o?t:n;this.defineClassElement(r,e)}}),this)}),this)},defineClassElement:function(t,e){var n=e.descriptor;if("field"===e.kind){var i=e.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(t)}}Object.defineProperty(t,e.key,n)},decorateClass:function(t,e){var n=[],i=[],o={static:[],prototype:[],own:[]};if(t.forEach((function(t){this.addElementPlacement(t,o)}),this),t.forEach((function(t){if(!_(t))return n.push(t);var e=this.decorateElement(t,o);n.push(e.element),n.push.apply(n,e.extras),i.push.apply(i,e.finishers)}),this),!e)return{elements:n,finishers:i};var r=this.decorateConstructor(n,e);return i.push.apply(i,r.finishers),r.finishers=i,r},addElementPlacement:function(t,e,n){var i=e[t.placement];if(!n&&-1!==i.indexOf(t.key))throw new TypeError("Duplicated element ("+t.key+")");i.push(t.key)},decorateElement:function(t,e){for(var n=[],i=[],o=t.decorators,r=o.length-1;r>=0;r--){var a=e[t.placement];a.splice(a.indexOf(t.key),1);var s=this.fromElementDescriptor(t),c=this.toElementFinisherExtras((0,o[r])(s)||s);t=c.element,this.addElementPlacement(t,e),c.finisher&&i.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],e);n.push.apply(n,l)}}return{element:t,finishers:i,extras:n}},decorateConstructor:function(t,e){for(var n=[],i=e.length-1;i>=0;i--){var o=this.fromClassDescriptor(t),r=this.toClassDescriptor((0,e[i])(o)||o);if(void 0!==r.finisher&&n.push(r.finisher),void 0!==r.elements){t=r.elements;for(var a=0;a<t.length-1;a++)for(var s=a+1;s<t.length;s++)if(t[a].key===t[s].key&&t[a].placement===t[s].placement)throw new TypeError("Duplicated element ("+t[a].key+")")}}return{elements:t,finishers:n}},fromElementDescriptor:function(t){var e={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===t.kind&&(e.initializer=t.initializer),e},toElementDescriptors:function(t){var e;if(void 0!==t)return(e=t,function(t){if(Array.isArray(t))return t}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){var e=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),e}),this)},toElementDescriptor:function(t){var e=String(t.kind);if("method"!==e&&"field"!==e)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+e+'"');var n=k(t.key),i=String(t.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var r={kind:e,key:n,placement:i,descriptor:Object.assign({},o)};return"field"!==e?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),r.initializer=t.initializer),r},toElementFinisherExtras:function(t){return{element:this.toElementDescriptor(t),finisher:A(t,"finisher"),extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var e={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(t){var e=String(t.kind);if("class"!==e)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+e+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var n=A(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:n}},runClassFinishers:function(t,e){for(var n=0;n<e.length;n++){var i=(0,e[n])(t);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");t=i}}return t},disallowProperty:function(t,e,n){if(void 0!==t[e])throw new TypeError(n+" can't have a ."+e+" property.")}};return t}function y(t){var e,n=k(t.key);"method"===t.kind?e={value:t.value,writable:!0,configurable:!0,enumerable:!1}:"get"===t.kind?e={get:t.value,configurable:!0,enumerable:!1}:"set"===t.kind?e={set:t.value,configurable:!0,enumerable:!1}:"field"===t.kind&&(e={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===t.kind?"field":"method",key:n,placement:t.static?"static":"field"===t.kind?"own":"prototype",descriptor:e};return t.decorators&&(i.decorators=t.decorators),"field"===t.kind&&(i.initializer=t.value),i}function b(t,e){void 0!==t.descriptor.get?e.descriptor.get=t.descriptor.get:e.descriptor.set=t.descriptor.set}function _(t){return t.decorators&&t.decorators.length}function w(t){return void 0!==t&&!(void 0===t.value&&void 0===t.writable)}function A(t,e){var n=t[e];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+e+"' to be a function");return n}function k(t){var e=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===u(e)?e:String(e)}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var T,U,E,x,D,M,S,O,I,$,P=__webpack_require__(2627),L=(D=[e("ua-builder-integration-icon")],M=t.oi,O=v(),S=function(t){O.initializeInstanceElements(t,$.elements)},I={F:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(s,t);var e,n,i,o,r,a=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=g(o);if(r){var n=g(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return f(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),t=a.call(this),S(h(t)),t}return e=s,n&&p(e.prototype,n),i&&p(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(M),d:[{kind:"field",static:!0,key:"styles",value:function(){return(0,t.iv)(a||(a=d(["",""])),(0,t.$m)(P))}},{kind:"field",decorators:[i({type:String})],key:"code",value:void 0},{kind:"field",decorators:[i({type:String})],key:"size",value:function(){return"regular"}},{kind:"field",decorators:[i({type:Boolean})],key:"plain",value:void 0},{kind:"method",key:"render",value:function(){return(0,t.dy)(s||(s=d(['\n\t\t\t<div \n\t\t\t\tclass="icon"\n\t\t\t\tsize=',"\n\t\t\t\tplain=",'\n\t\t\t>\n\t\t\t\t<img src="','">\n\t\t\t</div>\n\t\t'])),this.size,null!=(e=this.plain)?e:c.Ld,(0,l.SS)({integrationCode:this.code}));var e}}]},$=O.decorateClass(function(t){for(var e=[],n=function(t){return"method"===t.kind&&t.key===r.key&&t.placement===r.placement},i=0;i<t.length;i++){var o,r=t[i];if("method"===r.kind&&(o=e.find(n)))if(w(r.descriptor)||w(o.descriptor)){if(_(r)||_(o))throw new ReferenceError("Duplicated methods ("+r.key+") can't be decorated.");o.descriptor=r.descriptor}else{if(_(r)){if(_(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+r.key+").");o.decorators=r.decorators}b(r,o)}else e.push(r)}return e}(I.d.map(y)),D),O.initializeClassElements(I.F,$.elements),O.runClassFinishers(I.F,$.finishers),__webpack_require__(7172));function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function F(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function R(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function V(t,e){return V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},V(t,e)}function N(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(){H=function(){return t};var t={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,e){["method","field"].forEach((function(n){e.forEach((function(e){e.kind===n&&"own"===e.placement&&this.defineClassElement(t,e)}),this)}),this)},initializeClassElements:function(t,e){var n=t.prototype;["method","field"].forEach((function(i){e.forEach((function(e){var o=e.placement;if(e.kind===i&&("static"===o||"prototype"===o)){var r="static"===o?t:n;this.defineClassElement(r,e)}}),this)}),this)},defineClassElement:function(t,e){var n=e.descriptor;if("field"===e.kind){var i=e.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(t)}}Object.defineProperty(t,e.key,n)},decorateClass:function(t,e){var n=[],i=[],o={static:[],prototype:[],own:[]};if(t.forEach((function(t){this.addElementPlacement(t,o)}),this),t.forEach((function(t){if(!z(t))return n.push(t);var e=this.decorateElement(t,o);n.push(e.element),n.push.apply(n,e.extras),i.push.apply(i,e.finishers)}),this),!e)return{elements:n,finishers:i};var r=this.decorateConstructor(n,e);return i.push.apply(i,r.finishers),r.finishers=i,r},addElementPlacement:function(t,e,n){var i=e[t.placement];if(!n&&-1!==i.indexOf(t.key))throw new TypeError("Duplicated element ("+t.key+")");i.push(t.key)},decorateElement:function(t,e){for(var n=[],i=[],o=t.decorators,r=o.length-1;r>=0;r--){var a=e[t.placement];a.splice(a.indexOf(t.key),1);var s=this.fromElementDescriptor(t),c=this.toElementFinisherExtras((0,o[r])(s)||s);t=c.element,this.addElementPlacement(t,e),c.finisher&&i.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],e);n.push.apply(n,l)}}return{element:t,finishers:i,extras:n}},decorateConstructor:function(t,e){for(var n=[],i=e.length-1;i>=0;i--){var o=this.fromClassDescriptor(t),r=this.toClassDescriptor((0,e[i])(o)||o);if(void 0!==r.finisher&&n.push(r.finisher),void 0!==r.elements){t=r.elements;for(var a=0;a<t.length-1;a++)for(var s=a+1;s<t.length;s++)if(t[a].key===t[s].key&&t[a].placement===t[s].placement)throw new TypeError("Duplicated element ("+t[a].key+")")}}return{elements:t,finishers:n}},fromElementDescriptor:function(t){var e={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===t.kind&&(e.initializer=t.initializer),e},toElementDescriptors:function(t){var e;if(void 0!==t)return(e=t,function(t){if(Array.isArray(t))return t}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){var e=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),e}),this)},toElementDescriptor:function(t){var e=String(t.kind);if("method"!==e&&"field"!==e)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+e+'"');var n=Y(t.key),i=String(t.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var r={kind:e,key:n,placement:i,descriptor:Object.assign({},o)};return"field"!==e?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),r.initializer=t.initializer),r},toElementFinisherExtras:function(t){return{element:this.toElementDescriptor(t),finisher:G(t,"finisher"),extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var e={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(t){var e=String(t.kind);if("class"!==e)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+e+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var n=G(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:n}},runClassFinishers:function(t,e){for(var n=0;n<e.length;n++){var i=(0,e[n])(t);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");t=i}}return t},disallowProperty:function(t,e,n){if(void 0!==t[e])throw new TypeError(n+" can't have a ."+e+" property.")}};return t}function B(t){var e,n=Y(t.key);"method"===t.kind?e={value:t.value,writable:!0,configurable:!0,enumerable:!1}:"get"===t.kind?e={get:t.value,configurable:!0,enumerable:!1}:"set"===t.kind?e={set:t.value,configurable:!0,enumerable:!1}:"field"===t.kind&&(e={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===t.kind?"field":"method",key:n,placement:t.static?"static":"field"===t.kind?"own":"prototype",descriptor:e};return t.decorators&&(i.decorators=t.decorators),"field"===t.kind&&(i.initializer=t.value),i}function W(t,e){void 0!==t.descriptor.get?e.descriptor.get=t.descriptor.get:e.descriptor.set=t.descriptor.set}function z(t){return t.decorators&&t.decorators.length}function Z(t){return void 0!==t&&!(void 0===t.value&&void 0===t.writable)}function G(t,e){var n=t[e];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+e+"' to be a function");return n}function Y(t){var e=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!==j(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===j(e)?e:String(e)}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=X(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},J.apply(this,arguments)}function X(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Q(t)););return t}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}var tt,et,nt=_uo.utility.isDefined,it=__webpack_require__(8596),ot=(function(e,n,o,r){var a=H(),s=function(e,n){var o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(c,t);var n,i,o,r,a,s=(r=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Q(r);if(a){var n=Q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return N(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),t=s.call(this),e(q(t)),t}return n=c,i&&R(n.prototype,i),o&&R(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}(n);return{F:o,d:[{kind:"field",static:!0,key:"styles",value:function(){return(0,t.iv)(T||(T=F(["",""])),(0,t.$m)(it))}},{kind:"field",decorators:[i({type:String,attribute:"condition-id",reactive:!0})],key:"id",value:void 0},{kind:"field",decorators:[i({type:String,attribute:"condition-group-id",reactive:!0})],key:"groupId",value:void 0},{kind:"method",key:"connectedCallback",value:function(){J(Q(o.prototype),"connectedCallback",this).call(this),this.innerHTML="",this.append(this.condition.$dynamicSentence)}},{kind:"method",key:"render",value:function(){if(nt(this.condition))return this.condition.isMissing?this.condition.isMissing?this._templateMissingCondition:void 0:this._templateCondition}},{kind:"get",key:"_templateCondition",value:function(){return(0,t.dy)(U||(U=F(['\n\t\t\t<div class="pill">\n\n\t\t\t\t<div class="pill-logo">\n\t\t\t\t\t<ua-builder-integration-icon\n\t\t\t\t\t\tcode="','"\n\t\t\t\t\t\tsize="xsmall"\n\t\t\t\t\t\tplain\n\t\t\t\t\t></ua-builder-integration-icon>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="pill-sentence">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="pill-actions">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="pill-actions-edit"\n\t\t\t\t\t\t@click=','\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id="pencil"></uo-icon>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass="pill-actions-remove"\n\t\t\t\t\t\t@click=','\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id="trash"></uo-icon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t'])),this.condition.integrationCode,this.edit,this.remove)}},{kind:"get",key:"_templateMissingCondition",value:function(){return(0,t.dy)(E||(E=F(['\n\t\t\t<div class="pill pill--missing">\n\n\t\t\t\t<div class="pill-sentence">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\n\t\t\t\t<div class="pill-actions">\n\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass="pill-actions-remove"\n\t\t\t\t\t\t@click=','\n\t\t\t\t\t>\n\t\t\t\t\t\t<uo-icon id="trash"></uo-icon>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t'])),nt(this.condition.backup.integrationName)?(0,t.dy)(x||(x=F(['\n\t\t\t\t\t\t\t<uo-alert \n\t\t\t\t\t\t\t\ttype="warning"\n\t\t\t\t\t\t\t\theading=',"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t",": <slot></slot>\n\t\t\t\t\t\t\t</uo-alert>\n\t\t\t\t\t\t"])),UncannyAutomator.i18n.conditions.missingCondition,this.condition.backup.integrationName):UncannyAutomator.i18n.conditions.missingCondition,this.remove)}},{kind:"method",key:"edit",value:function(){this.condition.conditionsGroup.editCondition({conditionId:this.condition.id})}},{kind:"method",key:"remove",value:function(){this.condition.conditionsGroup.removeCondition({conditionId:this.condition.id}),(0,L.Q9)({})}},{kind:"get",key:"condition",value:function(){return(0,L.AB)({conditionsGroupId:this.groupId,conditionId:this.id})}}]}}((function(t){a.initializeInstanceElements(t,c.elements)}),o),c=a.decorateClass(function(t){for(var e=[],n=function(t){return"method"===t.kind&&t.key===r.key&&t.placement===r.placement},i=0;i<t.length;i++){var o,r=t[i];if("method"===r.kind&&(o=e.find(n)))if(Z(r.descriptor)||Z(o.descriptor)){if(z(r)||z(o))throw new ReferenceError("Duplicated methods ("+r.key+") can't be decorated.");o.descriptor=r.descriptor}else{if(z(r)){if(z(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+r.key+").");o.decorators=r.decorators}W(r,o)}else e.push(r)}return e}(s.d.map(B)),e);a.initializeClassElements(s.F,c.elements),a.runClassFinishers(s.F,c.finishers)}([e("ua-builder-condition-pill")],0,t.oi),__webpack_require__(1290));function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function at(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ct(t,e){return ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ct(t,e)}function lt(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ut(t)}function ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}function pt(){pt=function(){return t};var t={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(t,e){["method","field"].forEach((function(n){e.forEach((function(e){e.kind===n&&"own"===e.placement&&this.defineClassElement(t,e)}),this)}),this)},initializeClassElements:function(t,e){var n=t.prototype;["method","field"].forEach((function(i){e.forEach((function(e){var o=e.placement;if(e.kind===i&&("static"===o||"prototype"===o)){var r="static"===o?t:n;this.defineClassElement(r,e)}}),this)}),this)},defineClassElement:function(t,e){var n=e.descriptor;if("field"===e.kind){var i=e.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===i?void 0:i.call(t)}}Object.defineProperty(t,e.key,n)},decorateClass:function(t,e){var n=[],i=[],o={static:[],prototype:[],own:[]};if(t.forEach((function(t){this.addElementPlacement(t,o)}),this),t.forEach((function(t){if(!ht(t))return n.push(t);var e=this.decorateElement(t,o);n.push(e.element),n.push.apply(n,e.extras),i.push.apply(i,e.finishers)}),this),!e)return{elements:n,finishers:i};var r=this.decorateConstructor(n,e);return i.push.apply(i,r.finishers),r.finishers=i,r},addElementPlacement:function(t,e,n){var i=e[t.placement];if(!n&&-1!==i.indexOf(t.key))throw new TypeError("Duplicated element ("+t.key+")");i.push(t.key)},decorateElement:function(t,e){for(var n=[],i=[],o=t.decorators,r=o.length-1;r>=0;r--){var a=e[t.placement];a.splice(a.indexOf(t.key),1);var s=this.fromElementDescriptor(t),c=this.toElementFinisherExtras((0,o[r])(s)||s);t=c.element,this.addElementPlacement(t,e),c.finisher&&i.push(c.finisher);var l=c.extras;if(l){for(var u=0;u<l.length;u++)this.addElementPlacement(l[u],e);n.push.apply(n,l)}}return{element:t,finishers:i,extras:n}},decorateConstructor:function(t,e){for(var n=[],i=e.length-1;i>=0;i--){var o=this.fromClassDescriptor(t),r=this.toClassDescriptor((0,e[i])(o)||o);if(void 0!==r.finisher&&n.push(r.finisher),void 0!==r.elements){t=r.elements;for(var a=0;a<t.length-1;a++)for(var s=a+1;s<t.length;s++)if(t[a].key===t[s].key&&t[a].placement===t[s].placement)throw new TypeError("Duplicated element ("+t[a].key+")")}}return{elements:t,finishers:n}},fromElementDescriptor:function(t){var e={kind:t.kind,key:t.key,placement:t.placement,descriptor:t.descriptor};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===t.kind&&(e.initializer=t.initializer),e},toElementDescriptors:function(t){var e;if(void 0!==t)return(e=t,function(t){if(Array.isArray(t))return t}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){var e=this.toElementDescriptor(t);return this.disallowProperty(t,"finisher","An element descriptor"),this.disallowProperty(t,"extras","An element descriptor"),e}),this)},toElementDescriptor:function(t){var e=String(t.kind);if("method"!==e&&"field"!==e)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+e+'"');var n=yt(t.key),i=String(t.placement);if("static"!==i&&"prototype"!==i&&"own"!==i)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+i+'"');var o=t.descriptor;this.disallowProperty(t,"elements","An element descriptor");var r={kind:e,key:n,placement:i,descriptor:Object.assign({},o)};return"field"!==e?this.disallowProperty(t,"initializer","A method descriptor"):(this.disallowProperty(o,"get","The property descriptor of a field descriptor"),this.disallowProperty(o,"set","The property descriptor of a field descriptor"),this.disallowProperty(o,"value","The property descriptor of a field descriptor"),r.initializer=t.initializer),r},toElementFinisherExtras:function(t){return{element:this.toElementDescriptor(t),finisher:vt(t,"finisher"),extras:this.toElementDescriptors(t.extras)}},fromClassDescriptor:function(t){var e={kind:"class",elements:t.map(this.fromElementDescriptor,this)};return Object.defineProperty(e,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),e},toClassDescriptor:function(t){var e=String(t.kind);if("class"!==e)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+e+'"');this.disallowProperty(t,"key","A class descriptor"),this.disallowProperty(t,"placement","A class descriptor"),this.disallowProperty(t,"descriptor","A class descriptor"),this.disallowProperty(t,"initializer","A class descriptor"),this.disallowProperty(t,"extras","A class descriptor");var n=vt(t,"finisher");return{elements:this.toElementDescriptors(t.elements),finisher:n}},runClassFinishers:function(t,e){for(var n=0;n<e.length;n++){var i=(0,e[n])(t);if(void 0!==i){if("function"!=typeof i)throw new TypeError("Finishers must return a constructor.");t=i}}return t},disallowProperty:function(t,e,n){if(void 0!==t[e])throw new TypeError(n+" can't have a ."+e+" property.")}};return t}function mt(t){var e,n=yt(t.key);"method"===t.kind?e={value:t.value,writable:!0,configurable:!0,enumerable:!1}:"get"===t.kind?e={get:t.value,configurable:!0,enumerable:!1}:"set"===t.kind?e={set:t.value,configurable:!0,enumerable:!1}:"field"===t.kind&&(e={configurable:!0,writable:!0,enumerable:!0});var i={kind:"field"===t.kind?"field":"method",key:n,placement:t.static?"static":"field"===t.kind?"own":"prototype",descriptor:e};return t.decorators&&(i.decorators=t.decorators),"field"===t.kind&&(i.initializer=t.value),i}function ft(t,e){void 0!==t.descriptor.get?e.descriptor.get=t.descriptor.get:e.descriptor.set=t.descriptor.set}function ht(t){return t.decorators&&t.decorators.length}function gt(t){return void 0!==t&&!(void 0===t.value&&void 0===t.writable)}function vt(t,e){var n=t[e];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+e+"' to be a function");return n}function yt(t){var e=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e);if("object"!==rt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===rt(e)?e:String(e)}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var _t=__webpack_require__(1561),wt=(function(e,n,i,r){var a=pt(),s=function(e,n){return{F:function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(c,t);var n,i,o,r,a,s=(r=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dt(r);if(a){var n=dt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return lt(this,t)});function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),t=s.call(this),e(ut(t)),t}return n=c,i&&st(n.prototype,i),o&&st(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}(n),d:[{kind:"field",static:!0,key:"styles",value:function(){return(0,t.iv)(tt||(tt=at(["",""])),(0,t.$m)(_t))}},{kind:"field",decorators:[o("uo-dialog")],key:"$dialog",value:void 0},{kind:"field",decorators:[o("#confirm-button")],key:"$confirmButton",value:void 0},{kind:"method",key:"render",value:function(){return(0,t.dy)(et||(et=at(['\n\t\t\t<uo-dialog\n\t\t\t\theading="','"\n\t\t\t\topen\n\t\t\t>\n\t\t\t\t<div class="set-data-dialog">\n\t\t\t\t\t<div class="set-data-dialog-summary">\n\t\t\t\t\t\t<slot name="summary"></slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class="set-data-dialog-box">\n\t\t\t\t\t\t<slot name="box"></slot>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class="set-data-dialog-description">\n\t\t\t\t\t\t<slot name="description"></slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<uo-button\n\t\t\t\t\tslot="primary-action"\n\t\t\t\t\tid="confirm-button"\n\n\t\t\t\t\t@click=',"\n\t\t\t\t>\n\t\t\t\t\t",'\n\t\t\t\t</uo-button>\n\n\t\t\t\t<uo-button\n\t\t\t\t\tslot="secondary-action"\n\t\t\t\t\tdialog-action="close"\n\t\t\t\t\tcolor="secondary"\n\n\t\t\t\t\t@click=',"\n\t\t\t\t>\n\t\t\t\t\t","\n\t\t\t\t</uo-button>\n\t\t\t</uo-dialog>\n\t\t"])),UncannyAutomator.i18n.userSelector.userDataModal.action.allowed.title,this.confirmAction,UncannyAutomator.i18n.userSelector.setOptions,this.cancelAction,UncannyAutomator.i18n.cancel)}},{kind:"method",key:"confirmAction",value:function(){var t=this;this.$confirmButton.loading=!0,(0,ot.R$)(!0,(function(){t.dispatchEvent(new CustomEvent("automator_user-selector_request-data-dialog_confirm_success")),t.$confirmButton.loading=!1,t.parentNode.removeChild(t)}),(function(){t.dispatchEvent(new CustomEvent("automator_user-selector_request-data-dialog_confirm_fail")),t.$confirmButton.loading=!1}))}},{kind:"method",key:"cancelAction",value:function(){this.parentNode.removeChild(this),this.dispatchEvent(new CustomEvent("automator_user-selector_request-data-dialog_cancel"))}}]}}((function(t){a.initializeInstanceElements(t,c.elements)}),i),c=a.decorateClass(function(t){for(var e=[],n=function(t){return"method"===t.kind&&t.key===r.key&&t.placement===r.placement},i=0;i<t.length;i++){var o,r=t[i];if("method"===r.kind&&(o=e.find(n)))if(gt(r.descriptor)||gt(o.descriptor)){if(ht(r)||ht(o))throw new ReferenceError("Duplicated methods ("+r.key+") can't be decorated.");o.descriptor=r.descriptor}else{if(ht(r)){if(ht(o))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+r.key+").");o.decorators=r.decorators}ft(r,o)}else e.push(r)}return e}(s.d.map(mt)),e);a.initializeClassElements(s.F,c.elements),a.runClassFinishers(s.F,c.finishers)}([e("ua-builder-user-selector-set-data-dialog")],0,t.oi),__webpack_require__(5311)),At=__webpack_require__.n(wt),kt=__webpack_require__(838),Ct=__webpack_require__(9973),Tt=__webpack_require__(6626);function Ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Et=_uo.utility,xt=Et.isDefined,Dt=Et.addParametersToURL,Mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.render()}var e,n;return e=t,(n=[{key:"render",value:function(){var t=At()('\n\t\t\t<div class="uap-report-bug">\n\t\t\t\t<a\n\t\t\t\t\tclass="uap-report-bug__btn"\n\n\t\t\t\t\tuap-tooltip="'.concat(UncannyAutomator.i18n.sendFeedback.title,'"\n\t\t\t\t\tuap-tooltip-flow="left"\n\n\t\t\t\t\ttarget="_blank"\n\t\t\t\t\thref="').concat(Dt("https://automatorplugin.com/feedback/",this.utmBtnParameters),'"\n\t\t\t\t>\n\t\t\t\t\t<span class="uap-report-bug__icon"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'));At()("body").append(t)}},{key:"utmBtnParameters",get:function(){var t,e;return xt(UncannyAutomator.wp)&&UncannyAutomator.wp?(t="Uncanny Automator Pro ".concat(UncannyAutomator.version),e="uncanny_automator_pro"):(t="Uncanny Automator ".concat(UncannyAutomator.version),e="uncanny_automator"),{version:t,utm_source:e,utm_medium:"send_feedback",utm_content:"bulb_icon"}}}])&&Ut(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function St(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ot=_uo.utility.debounce,It=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listenField()}var e,n;return e=t,(n=[{key:"listenField",value:function(){var t=this;this.$field.addEventListener("input",Ot((function(){t.saveTitle()}),1500))}},{key:"saveTitle",value:function(){var t=this;this.$wrapper.classList.add("uap-title--loading"),(0,ot.L8)("change_post_title",{post_ID:UncannyAutomator.recipe.id,post_title:this.title},(function(e){t.$wrapper.classList.remove("uap-title--loading"),t.$wrapper.classList.add("uap-title--success"),setTimeout((function(){t.$wrapper.classList.remove("uap-title--success")}),3e3)}),(function(){t.$wrapper.classList.remove("uap-title--loading"),UncannyAutomator.dev.developerMode&&console.error("Couldn't save the title")}),{requiresRecipesObject:!1})}},{key:"title",get:function(){return this.$field.value}},{key:"$wrapper",get:function(){return document.getElementById("titlewrap")}},{key:"$field",get:function(){return document.getElementById("title")}}])&&St(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Pt=_uo.utility.isDefined,Lt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hasMetabox&&this.listenCheckboxes()}var e,n;return e=t,n=[{key:"$container",get:function(){return At()("#recipe_categorydiv")}},{key:"$allCategoriesList",get:function(){return At()("#recipe_categorychecklist")}},{key:"hasMetabox",get:function(){return Pt(this.$allCategoriesList)}},{key:"listenCheckboxes",value:function(){var t=this;this.$container.on("change",'input[type="checkbox"][name="tax_input[recipe_category][]"], .popular-category input[type="checkbox"]',(function(e){var n=At()(e.currentTarget);t.saveCategory(n)})),new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){var n=At()(e).find('input[type="checkbox"][name="tax_input[recipe_category][]"]');t.saveCategory(n)}))}))})).observe(this.$allCategoriesList[0],{childList:!0})}},{key:"saveCategory",value:function(t){var e=this,n={id:t.val(),isChecked:t.is(":checked")};this.setStatus("loading",!0,t),(0,ot.L8)("set_recipe_terms",{term_id:"recipe_category",recipe_id:UncannyAutomator.recipe.id,category_id:n.id,set_category:n.isChecked},(function(n){n.success?(e.setStatus("success",!0,t),setTimeout((function(){e.setStatus("success",!1,t)}),2e3)):(UncannyAutomator.dev.developerMode&&console.error("Couldn't change the status of the recipe category"),e.revertCheckboxValue(t),e.setStatus("error",!0,t),setTimeout((function(){e.setStatus("error",!1,t)}))),e.setStatus("loading",!1,t)}),(function(){e.revertCheckboxValue(t),e.setStatus("loading",!1,t),e.setStatus("error",!0,t),setTimeout((function(){e.setStatus("error",!1,t)}))}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"revertCheckboxValue",value:function(t){t.prop("checked",!t.is(":checked"))}},{key:"setStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=n.closest(".selectit");"loading"==t?e?(i.addClass("uap-taxonomy-loading"),n.prop("disabled",!0)):(i.removeClass("uap-taxonomy-loading"),n.prop("disabled",!1)):"success"==t?e?i.addClass("uap-taxonomy-success"):i.removeClass("uap-taxonomy-success"):"error"==t&&(e?i.addClass("uap-taxonomy-error"):i.removeClass("uap-taxonomy-error"))}}],n&&$t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),jt=__webpack_require__(3198);function Ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getElements(),1==this.$elements.tagsTextarea.length&&this.listenModificationsToTags()}var e,n;return e=t,n=[{key:"getElements",value:function(){this.$elements={container:At()("#tagsdiv-recipe_tag"),tagsTextarea:At()("textarea#tax-input-recipe_tag"),tagsList:At()("#tagsdiv-recipe_tag .tagchecklist")}}},{key:"listenModificationsToTags",value:function(){var t=this;new MutationObserver((function(e){t.saveTags()})).observe(this.$elements.tagsList[0],{childList:!0})}},{key:"saveTags",value:function(){var t=this,e=this.getTags();this.setStatus("loading",!0),(0,ot.L8)("set_recipe_terms",{term_id:"recipe_tag",recipe_id:UncannyAutomator.recipe.id,tags:e},(function(e){e.success?(t.setStatus("success",!0),setTimeout((function(){t.setStatus("success",!1)}),2e3)):(0,ot.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:(0,jt.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,'<a href="'.concat((0,ot.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")),content:"",console:"Data sent:\n ".concat(JSON.stringify(e)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}}),t.setStatus("loading",!1)}),(function(t){(0,ot.C2)({title:UncannyAutomator.i18n.debugging.fatalErrorHandler.exceptions.tags.couldNotSave,warning:(0,jt.gB)(UncannyAutomator.i18n.debugging.fatalErrorHandler.generic.content,'<a href="'.concat((0,ot.gy)(),'" target="_blank">').concat(UncannyAutomator.i18n.debugging.automatorSupport,"</a>")),content:"",console:"Data sent:\n ".concat(JSON.stringify(t)),buttons:{confirm:null,cancel:{label:UncannyAutomator.i18n.close,onClick:function(t){t.destroy()}}}})}),{requiresRecipesObject:!1,renderUI:!1})}},{key:"setStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"loading"==t?e?this.$elements.container.addClass("uap-tags-loading"):this.$elements.container.removeClass("uap-tags-loading"):"success"==t?e?this.$elements.container.addClass("uap-tags-success"):this.$elements.container.removeClass("uap-tags-success"):"error"==t&&(e?this.$elements.container.addClass("uap-tags-error"):this.$elements.container.removeClass("uap-tags-error"))}},{key:"getTags",value:function(){var t=this.$elements.tagsTextarea.val();return{asArray:t.split(","),commaSeparated:t}}}],n&&Ft(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nt(t,e,n){return e&&Vt(t.prototype,e),n&&Vt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var qt=Nt((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),new Lt,new Rt}));UncannyAutomator.cache={tokens:{}};try{(0,ot.iK)((function(){(0,ot.Dh)("Render the UI",!1,{bgColor:"#579f49"}),new Ct.Z,new Tt.Z,new kt.Z,new Mt,new It,new qt}))}catch(t){(0,ot.C2)({title:UncannyAutomator.i18n.debugging.uiCantLoad.title,warning:UncannyAutomator.i18n.debugging.uiCantLoad.warning,content:UncannyAutomator.i18n.debugging.uiCantLoad.content,console:t})}jQuery(document).ready((function(){jQuery(window).off("beforeunload.edit-post",null)}))})()})();
//# sourceMappingURL=bundle.min.js.map